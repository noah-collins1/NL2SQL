{"timestamp":"2026-01-29T19:45:09.870Z","query_id":"5bc8d8de-2a09-46a4-b092-3c96c1acae49","question":"List all employees in the Sales department","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employees","departments","employee_salaries","employee_certifications","goods_receipts","positions","sales_regions","business_units","budgets","sales_territories","employment_history","employee_training"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"departments","similarity":0.7018819264422769},{"table":"employees","similarity":0.6963141569337209},{"table":"positions","similarity":0.6581594168559208},{"table":"employee_salaries","similarity":0.639257259916862},{"table":"sales_regions","similarity":0.6312030956746659},{"table":"business_units","similarity":0.6239684491575331},{"table":"employee_certifications","similarity":0.6229972990181882},{"table":"budgets","similarity":0.617459472791645},{"table":"sales_territories","similarity":0.6102039592511826},{"table":"employment_history","similarity":0.6101413897607149},{"table":"purchase_requisitions","similarity":0.6097607241658892},{"table":"employee_benefits","similarity":0.6082385664329927},{"table":"employee_training","similarity":0.6047853289798245},{"table":"goods_receipts","similarity":0.6024016522018802},{"table":"emergency_contacts","similarity":0.6009863587594317}],"column_hits_per_table":{"employees":16,"departments":6,"positions":1,"employee_certifications":2,"goods_receipts":1,"business_units":1,"sales_territories":1,"sales_orders":1,"budgets":1,"sales_regions":1,"asset_maintenance":1,"employee_salaries":2,"project_expenses":2,"employee_benefits":1,"purchase_requisitions":1,"sales_opportunities":1,"task_assignments":1,"emergency_contacts":1,"timesheets":1,"employment_history":1,"employee_training":1,"cost_centers":1,"asset_transfers":2,"project_resources":1,"warehouses":1,"performance_reviews":1},"top_columns_per_table":{"employees":[{"column":"department_id","similarity":0.7438378780959836},{"column":"is_active","similarity":0.6898514430157328},{"column":"phone","similarity":0.6884781654193587}],"departments":[{"column":"manager_id","similarity":0.7148098723176987},{"column":"department_id","similarity":0.6802234045695587},{"column":"budget","similarity":0.6768568604597922}],"positions":[{"column":"department_id","similarity":0.6885987208242758}],"employee_certifications":[{"column":"employee_id","similarity":0.6617681978427804},{"column":"certification_id","similarity":0.6311135283463721}],"goods_receipts":[{"column":"received_by","similarity":0.6583117635667177}],"business_units":[{"column":"manager_id","similarity":0.6545196306469504}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6512458142884996}],"sales_orders":[{"column":"sales_rep_id","similarity":0.6499960316755506}],"budgets":[{"column":"department_id","similarity":0.6460822382776508}],"sales_regions":[{"column":"manager_id","similarity":0.6439326618471962}],"asset_maintenance":[{"column":"performed_by","similarity":0.6437090997046176}],"employee_salaries":[{"column":"employee_id","similarity":0.6423794415726771},{"column":"approved_by","similarity":0.6339811095593604}],"project_expenses":[{"column":"employee_id","similarity":0.641830403107342},{"column":"approved_by","similarity":0.6256513564368459}],"employee_benefits":[{"column":"employee_id","similarity":0.641816911740203}],"purchase_requisitions":[{"column":"department_id","similarity":0.6412971471190316}],"sales_opportunities":[{"column":"owner_id","similarity":0.6380140640371665}],"task_assignments":[{"column":"employee_id","similarity":0.6368520287345143}],"emergency_contacts":[{"column":"employee_id","similarity":0.6359115695387068}],"timesheets":[{"column":"employee_id","similarity":0.6333688009401329}],"employment_history":[{"column":"employee_id","similarity":0.6321379482184605}],"employee_training":[{"column":"employee_id","similarity":0.6321176608254997}],"cost_centers":[{"column":"department_id","similarity":0.6314138263804895}],"asset_transfers":[{"column":"to_employee_id","similarity":0.6311987237616232},{"column":"transferred_by","similarity":0.6249766402000394}],"project_resources":[{"column":"employee_id","similarity":0.6300298241419464}],"warehouses":[{"column":"manager_id","similarity":0.6284950025854869}],"performance_reviews":[{"column":"employee_id","similarity":0.6283937123860818}]},"fused_scores":[{"table":"employees","fused":0.8298251093085066,"table_sim":0.6963141569337209,"col_score":1.0300915378706852},{"table":"departments","fused":0.7919452821737608,"table_sim":0.7018819264422769,"col_score":0.9270403157709868},{"table":"employee_salaries","fused":0.7270799215940361,"table_sim":0.639257259916862,"col_score":0.8588139141097973},{"table":"employee_certifications","fused":0.6474493687753835,"table_sim":0.6229972990181882,"col_score":0.6841274734111765},{"table":"goods_receipts","fused":0.6247656967478152,"table_sim":0.6024016522018802,"col_score":0.6583117635667177},{"table":"positions","fused":0.5877032919443497,"table_sim":0.6581594168559208,"col_score":0.482019104576993},{"table":"sales_regions","fused":0.5590230027220144,"table_sim":0.6312030956746659,"col_score":0.4507528632930373},{"table":"business_units","fused":0.557646566075666,"table_sim":0.6239684491575331,"col_score":0.45816374145286526},{"table":"budgets","fused":0.5513787103927292,"table_sim":0.617459472791645,"col_score":0.4522575667943555},{"table":"sales_territories","fused":0.5484712035514895,"table_sim":0.6102039592511826,"col_score":0.4558720700019497},{"table":"purchase_requisitions","fused":0.5454196356928624,"table_sim":0.6097607241658892,"col_score":0.4489080029833221},{"table":"employee_benefits","fused":0.5446518751470524,"table_sim":0.6082385664329927,"col_score":0.4492718382181421},{"table":"employment_history","fused":0.5430834593575978,"table_sim":0.6101413897607149,"col_score":0.4424965637529223},{"table":"employee_training","fused":0.5398641424190346,"table_sim":0.6047853289798245,"col_score":0.44248236257784973},{"table":"emergency_contacts","fused":0.538647054726497,"table_sim":0.6009863587594317,"col_score":0.4451380986770947}],"fk_expansion_candidates":31,"fk_expansion_added":2,"fk_expansion_blocked_count":23,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"project_expenses","reason":"max_tables"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"emergency_contacts","reason":"max_tables"},{"table":"asset_transfers","reason":"max_tables"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":1665,"total_retrieval_latency_ms":1723,"sql_generated":"SELECT e.employee_id, e.first_name || ' ' || e.last_name AS employee_full_name FROM employees e JOIN departments d ON e.department_id = d.department_id WHERE d.name = 'Sales';","tables_used_in_sql":[],"explain_result":"success","rows_returned":63,"total_latency_ms":5169}
{"timestamp":"2026-01-29T19:45:15.040Z","query_id":"0034c27d-0099-4f3f-9f9d-7b03fd43ef4f","question":"How many employees were hired in 2024?","attempt_count":2,"retry_succeeded":true,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employees","employee_salaries","employment_history","employee_certifications","employee_training","employee_benefits","timesheets","purchase_requisitions","budgets","sales_regions","sales_territories","positions"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"employees","similarity":0.6144292223525214},{"table":"employment_history","similarity":0.5990869260811272},{"table":"employee_salaries","similarity":0.5957232611905978},{"table":"employee_certifications","similarity":0.5847149077570227},{"table":"timesheets","similarity":0.575594643141534},{"table":"sales_regions","similarity":0.5687908420029388},{"table":"purchase_requisitions","similarity":0.5664402915390976},{"table":"positions","similarity":0.5658085475279547},{"table":"sales_opportunities","similarity":0.5639075817288894},{"table":"task_assignments","similarity":0.562680711321946},{"table":"employee_training","similarity":0.5619832232346038},{"table":"employee_benefits","similarity":0.5521280809074093},{"table":"sales_territories","similarity":0.5514528346239352},{"table":"budgets","similarity":0.5403087942053312},{"table":"sales_quotes","similarity":0.5393048811827968}],"column_hits_per_table":{"employees":16,"employee_salaries":6,"employee_certifications":4,"employment_history":6,"employee_training":5,"employee_benefits":2,"timesheets":2,"sales_regions":1,"stock_transfers":1,"sales_territories":1,"departments":1,"task_assignments":1,"business_units":1,"purchase_requisitions":1,"budgets":1,"sales_quotes":1},"top_columns_per_table":{"employees":[{"column":"hire_date","similarity":0.7106559818290373},{"column":"birth_date","similarity":0.6517135742797255},{"column":"employee_number","similarity":0.633121778910481}],"employee_salaries":[{"column":"effective_date","similarity":0.6296154988591133},{"column":"end_date","similarity":0.609101620634113},{"column":"approved_by","similarity":0.5761653893037841}],"employee_certifications":[{"column":"obtained_date","similarity":0.6094607553884445},{"column":"expiry_date","similarity":0.6007861744748104},{"column":"certificate_number","similarity":0.5633632316465422}],"employment_history":[{"column":"start_date","similarity":0.6071257631385101},{"column":"end_date","similarity":0.5989153405055726},{"column":"position","similarity":0.5890884348995125}],"employee_training":[{"column":"scheduled_date","similarity":0.6029307116623341},{"column":"completion_date","similarity":0.6028518248589481},{"column":"status","similarity":0.5708936159109197}],"employee_benefits":[{"column":"start_date","similarity":0.5952623658369748},{"column":"end_date","similarity":0.5732788329636184}],"timesheets":[{"column":"approved_by","similarity":0.5691747597184825},{"column":"employee_id","similarity":0.5581640185946611}],"sales_regions":[{"column":"manager_id","similarity":0.5671745315621484}],"stock_transfers":[{"column":"created_by","similarity":0.562232812523577}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5618670479918372}],"departments":[{"column":"manager_id","similarity":0.5617735539821376}],"task_assignments":[{"column":"employee_id","similarity":0.5576232667870425}],"business_units":[{"column":"manager_id","similarity":0.5563961234903366}],"purchase_requisitions":[{"column":"approved_by","similarity":0.5556539730090067}],"budgets":[{"column":"approved_by","similarity":0.5516931281633284}],"sales_quotes":[{"column":"created_by","similarity":0.5460264622486979}]},"fused_scores":[{"table":"employees","fused":0.7832626409990728,"table_sim":0.6144292223525214,"col_score":1.0365127689689002},{"table":"employee_salaries","fused":0.7311004803848267,"table_sim":0.5957232611905978,"col_score":0.9341663091761698},{"table":"employment_history","fused":0.7220855290051948,"table_sim":0.5990869260811272,"col_score":0.9065834333912963},{"table":"employee_certifications","fused":0.7147704817045535,"table_sim":0.5847149077570227,"col_score":0.9098538426258497},{"table":"employee_training","fused":0.6989325835774856,"table_sim":0.5619832232346038,"col_score":0.9043566240918082},{"table":"employee_benefits","fused":0.6840375614719592,"table_sim":0.5521280809074093,"col_score":0.881901782318784},{"table":"timesheets","fused":0.6511696523755659,"table_sim":0.575594643141534,"col_score":0.7645321662266139},{"table":"purchase_requisitions","fused":0.5621257641270612,"table_sim":0.5664402915390976,"col_score":0.5556539730090067},{"table":"budgets","fused":0.5448625277885301,"table_sim":0.5403087942053312,"col_score":0.5516931281633284},{"table":"sales_regions","fused":0.5000833740391648,"table_sim":0.5687908420029388,"col_score":0.3970221720935038},{"table":"task_assignments","fused":0.4937429414935395,"table_sim":0.562680711321946,"col_score":0.39033628675092974},{"table":"sales_territories","fused":0.4881944742120755,"table_sim":0.5514528346239352,"col_score":0.393306933594286},{"table":"sales_quotes","fused":0.4764703381393135,"table_sim":0.5393048811827968,"col_score":0.3822185235740885},{"table":"positions","fused":0.3394851285167728,"table_sim":0.5658085475279547,"col_score":0},{"table":"sales_opportunities","fused":0.33834454903733363,"table_sim":0.5639075817288894,"col_score":0}],"fk_expansion_candidates":33,"fk_expansion_added":2,"fk_expansion_blocked_count":28,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":65,"total_retrieval_latency_ms":72,"sql_generated":"SELECT COUNT(*) FROM employees WHERE hire_date BETWEEN '2024-01-01' AND '2024-12-31';","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":1164}
{"timestamp":"2026-01-29T19:45:16.205Z","query_id":"f92e63da-4b2e-4ab0-92bd-8b78c87257f9","question":"What is the average salary by department?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["positions","employee_salaries","employees","departments","budgets","goods_receipts","employee_benefits","journal_entries","employment_history","project_expenses","cost_centers","sales_territories"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"positions","similarity":0.6472399264470684},{"table":"employee_salaries","similarity":0.6163489777991259},{"table":"departments","similarity":0.6143006157633061},{"table":"employees","similarity":0.5843710762372889},{"table":"cost_centers","similarity":0.5579264629700211},{"table":"budgets","similarity":0.5571964787833181},{"table":"sales_regions","similarity":0.5364724383376334},{"table":"sales_territories","similarity":0.5299492722581486},{"table":"journal_entries","similarity":0.526534036172237},{"table":"purchase_requisitions","similarity":0.5238763225772829},{"table":"project_expenses","similarity":0.5181308895485073},{"table":"employee_benefits","similarity":0.5174411519669776},{"table":"goods_receipts","similarity":0.5160018389560823},{"table":"task_assignments","similarity":0.513087451687374},{"table":"employment_history","similarity":0.5120203905454107}],"column_hits_per_table":{"employees":8,"departments":6,"employee_salaries":7,"positions":4,"cost_centers":1,"budgets":2,"employee_benefits":1,"purchase_requisitions":1,"requisition_lines":2,"project_resources":1,"employment_history":1,"sales_orders":2,"project_budgets":1,"employee_training":1,"currencies":1,"vendor_invoices":2,"goods_receipts":2,"product_suppliers":1,"project_expenses":1,"journal_entries":1,"depreciation_schedules":1,"employee_certifications":1,"sales_quotes":1,"sales_territories":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.6714025402580912},{"column":"department_id","similarity":0.584700343354732},{"column":"employee_number","similarity":0.5532682108483173}],"departments":[{"column":"budget","similarity":0.6693178899525953},{"column":"name","similarity":0.6171203083627336},{"column":"parent_department_id","similarity":0.5878888275901532}],"employee_salaries":[{"column":"amount","similarity":0.6538497128830203},{"column":"effective_date","similarity":0.6119174466610072},{"column":"salary_id","similarity":0.6029067593645321}],"positions":[{"column":"department_id","similarity":0.6330316284547595},{"column":"max_salary","similarity":0.6298490831807669},{"column":"min_salary","similarity":0.6262751289068413}],"cost_centers":[{"column":"department_id","similarity":0.5944196229868914}],"budgets":[{"column":"department_id","similarity":0.57844391567942},{"column":"total_amount","similarity":0.5345358880503847}],"employee_benefits":[{"column":"coverage_level","similarity":0.5592633154028713}],"purchase_requisitions":[{"column":"department_id","similarity":0.5579053225850302}],"requisition_lines":[{"column":"estimated_total","similarity":0.5575389137165062},{"column":"estimated_unit_cost","similarity":0.5432548724783238}],"project_resources":[{"column":"hourly_rate","similarity":0.5507729867753033}],"employment_history":[{"column":"position","similarity":0.546923389654957}],"sales_orders":[{"column":"total","similarity":0.5456325341224678},{"column":"subtotal","similarity":0.5256028180358103}],"project_budgets":[{"column":"actual_amount","similarity":0.5389410727850935}],"employee_training":[{"column":"score","similarity":0.5351809226270803}],"currencies":[{"column":"exchange_rate","similarity":0.5339462316729515}],"vendor_invoices":[{"column":"amount_paid","similarity":0.5331812479989457},{"column":"total","similarity":0.5302071561700523}],"goods_receipts":[{"column":"received_by","similarity":0.5319872343080682},{"column":"receipt_number","similarity":0.523270196493927}],"product_suppliers":[{"column":"unit_cost","similarity":0.5297268931690184}],"project_expenses":[{"column":"amount","similarity":0.5280982333276214}],"journal_entries":[{"column":"posted_by","similarity":0.5260241851684003}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5257318815448632}],"employee_certifications":[{"column":"certificate_number","similarity":0.5236560179787567}],"sales_quotes":[{"column":"total","similarity":0.5236132162689948}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5204418572284772}]},"fused_scores":[{"table":"positions","fused":0.7655386149219161,"table_sim":0.6472399264470684,"col_score":0.9429866476341876},{"table":"employee_salaries","fused":0.7537327611648852,"table_sim":0.6163489777991259,"col_score":0.959808436213524},{"table":"employees","fused":0.7298373040152732,"table_sim":0.5843710762372889,"col_score":0.9480366456822499},{"table":"departments","fused":0.7227043686098045,"table_sim":0.6143006157633061,"col_score":0.8853099978795521},{"table":"budgets","fused":0.6291143906852635,"table_sim":0.5571964787833181,"col_score":0.7369912585381817},{"table":"goods_receipts","fused":0.6270500363956621,"table_sim":0.5160018389560823,"col_score":0.7936223325550317},{"table":"employee_benefits","fused":0.5341700173413351,"table_sim":0.5174411519669776,"col_score":0.5592633154028713},{"table":"journal_entries","fused":0.5263300957707023,"table_sim":0.526534036172237,"col_score":0.5260241851684003},{"table":"employment_history","fused":0.5259815901892293,"table_sim":0.5120203905454107,"col_score":0.546923389654957},{"table":"project_expenses","fused":0.522117827060153,"table_sim":0.5181308895485073,"col_score":0.5280982333276214},{"table":"cost_centers","fused":0.5011933722183423,"table_sim":0.5579264629700211,"col_score":0.416093736090824},{"table":"purchase_requisitions","fused":0.4705392838701782,"table_sim":0.5238763225772829,"col_score":0.3905337258095211},{"table":"sales_territories","fused":0.46369328337886273,"table_sim":0.5299492722581486,"col_score":0.36430930005993406},{"table":"requisition_lines","fused":0.33166653998226725,"table_sim":0,"col_score":0.8291663499556681},{"table":"sales_orders","fused":0.32337357725614924,"table_sim":0,"col_score":0.808433943140373}],"fk_expansion_candidates":34,"fk_expansion_added":2,"fk_expansion_blocked_count":27,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"sales_regions","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"benefit_types","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":41,"total_retrieval_latency_ms":47,"sql_generated":"SELECT d.name AS department_name, AVG(e.salary) AS avg_salary FROM departments d JOIN employees e ON d.department_id = e.department_id GROUP BY d.name;","tables_used_in_sql":[],"explain_result":"success","rows_returned":19,"total_latency_ms":903}
{"timestamp":"2026-01-29T19:45:17.108Z","query_id":"21c67e35-965f-4d29-9a5e-170fb0fc282a","question":"List all customers with credit limit over $100,000","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["customers","customer_contacts","bank_accounts","sales_quotes","certifications","budget_lines","purchase_requisitions","project_expenses","budgets","cost_centers","bank_transactions","employee_certifications"],"tables_from_table_retrieval":15,"tables_from_column_only":15,"tables_from_fk_expansion":2,"table_scores":[{"table":"customers","similarity":0.6422232823454113},{"table":"customer_contacts","similarity":0.5702946339617082},{"table":"sales_regions","similarity":0.5667997703273866},{"table":"certifications","similarity":0.5571072107976042},{"table":"sales_quotes","similarity":0.5491541498727729},{"table":"purchase_requisitions","similarity":0.5478589409950445},{"table":"budget_lines","similarity":0.5454449382794198},{"table":"bank_accounts","similarity":0.5447528216147618},{"table":"cost_centers","similarity":0.540959333993602},{"table":"employee_certifications","similarity":0.5407552237950306},{"table":"projects","similarity":0.5406308106386197},{"table":"project_expenses","similarity":0.5396310315886659},{"table":"fixed_assets","similarity":0.5381704816225558},{"table":"vendor_invoice_lines","similarity":0.5372813385528225},{"table":"budgets","similarity":0.5364846137863498}],"column_hits_per_table":{"customers":11,"projects":1,"customer_contacts":7,"sales_opportunities":1,"sales_quotes":2,"sales_orders":2,"reorder_rules":1,"budgets":1,"vendor_invoices":1,"project_expenses":1,"quote_lines":1,"certifications":1,"purchase_orders":3,"budget_lines":1,"bank_accounts":2,"bank_transactions":2,"journal_lines":1,"purchase_requisitions":1,"order_lines":1,"vendor_invoice_lines":1,"positions":1,"sales_regions":1,"po_lines":1,"cost_centers":1,"project_budgets":1,"project_milestones":1,"warehouse_locations":1,"requisition_lines":1},"top_columns_per_table":{"customers":[{"column":"credit_limit","similarity":0.8290390589962461},{"column":"payment_terms","similarity":0.6650377871997543},{"column":"customer_number","similarity":0.6415139612300956}],"projects":[{"column":"customer_id","similarity":0.6113530297711885}],"customer_contacts":[{"column":"phone","similarity":0.6040484167837853},{"column":"customer_id","similarity":0.6035386821269575},{"column":"contact_id","similarity":0.5998404377039879}],"sales_opportunities":[{"column":"customer_id","similarity":0.5973351705123849}],"sales_quotes":[{"column":"customer_id","similarity":0.5961691774985171},{"column":"total","similarity":0.5659883632982617}],"sales_orders":[{"column":"customer_id","similarity":0.58549970245739},{"column":"total","similarity":0.5683405933157465}],"reorder_rules":[{"column":"max_quantity","similarity":0.5844362539863144}],"budgets":[{"column":"approved_by","similarity":0.5826134824645886}],"vendor_invoices":[{"column":"total","similarity":0.5814502781366767}],"project_expenses":[{"column":"approved_by","similarity":0.5806637778484305}],"quote_lines":[{"column":"line_total","similarity":0.5801896505180127}],"certifications":[{"column":"validity_years","similarity":0.5798577433614027}],"purchase_orders":[{"column":"total","similarity":0.5778492143323815},{"column":"approved_by","similarity":0.5753364140452711},{"column":"buyer_id","similarity":0.5681572281535011}],"budget_lines":[{"column":"amount","similarity":0.5775415147969544}],"bank_accounts":[{"column":"current_balance","similarity":0.5767501897962805},{"column":"account_number","similarity":0.5703853537704927}],"bank_transactions":[{"column":"amount","similarity":0.5760624192982815},{"column":"reference","similarity":0.566440413697339}],"journal_lines":[{"column":"credit","similarity":0.5758582782262962}],"purchase_requisitions":[{"column":"approved_by","similarity":0.573497894904601}],"order_lines":[{"column":"line_total","similarity":0.5724929640076355}],"vendor_invoice_lines":[{"column":"amount","similarity":0.5692283162401672}],"positions":[{"column":"max_salary","similarity":0.5687679838535561}],"sales_regions":[{"column":"manager_id","similarity":0.5681024224683461}],"po_lines":[{"column":"line_total","similarity":0.5673570249509682}],"cost_centers":[{"column":"code","similarity":0.5669986563600412}],"project_budgets":[{"column":"actual_amount","similarity":0.566506927799081}],"project_milestones":[{"column":"amount","similarity":0.5661535207015114}],"warehouse_locations":[{"column":"capacity","similarity":0.5659576253370232}],"requisition_lines":[{"column":"estimated_total","similarity":0.5640113461906648}]},"fused_scores":[{"table":"customers","fused":0.8499571504456961,"table_sim":0.6422232823454113,"col_score":1.1615579525961233},{"table":"customer_contacts","fused":0.7028167334530704,"table_sim":0.5702946339617082,"col_score":0.9015998826901137},{"table":"bank_accounts","fused":0.6716288396414678,"table_sim":0.5447528216147618,"col_score":0.8619428666815268},{"table":"sales_quotes","fused":0.6393515200927609,"table_sim":0.5491541498727729,"col_score":0.7746475754227427},{"table":"certifications","fused":0.5662074238231236,"table_sim":0.5571072107976042,"col_score":0.5798577433614027},{"table":"budget_lines","fused":0.5582835688864336,"table_sim":0.5454449382794198,"col_score":0.5775415147969544},{"table":"purchase_requisitions","fused":0.5581145225588671,"table_sim":0.5478589409950445,"col_score":0.573497894904601},{"table":"project_expenses","fused":0.5560441300925718,"table_sim":0.5396310315886659,"col_score":0.5806637778484305},{"table":"budgets","fused":0.5549361612576453,"table_sim":0.5364846137863498,"col_score":0.5826134824645886},{"table":"cost_centers","fused":0.5513750629401777,"table_sim":0.540959333993602,"col_score":0.5669986563600412},{"table":"vendor_invoice_lines","fused":0.5500601296277604,"table_sim":0.5372813385528225,"col_score":0.5692283162401672},{"table":"sales_regions","fused":0.49914854048756885,"table_sim":0.5667997703273866,"col_score":0.3976716957278422},{"table":"projects","fused":0.4955573347191046,"table_sim":0.5406308106386197,"col_score":0.42794712083983194},{"table":"purchase_orders","fused":0.34620696854200683,"table_sim":0,"col_score":0.865517421355017},{"table":"bank_transactions","fused":0.3437130504587804,"table_sim":0,"col_score":0.8592826261469511}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":11,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"projects","reason":"max_tables"},{"table":"purchase_orders","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":57,"total_retrieval_latency_ms":63,"sql_generated":"SELECT c.customer_id, c.name AS customer_name, c.email, c.phone, c.credit_limit FROM customers c WHERE c.credit_limit > 100000;","tables_used_in_sql":[],"explain_result":"success","rows_returned":206,"total_latency_ms":845}
{"timestamp":"2026-01-29T19:45:17.953Z","query_id":"bc566b9a-71ba-4109-937e-b22e8937712d","question":"How many sales orders are in pending status?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["sales_orders","purchase_orders","sales_opportunities","order_lines","vendor_invoices","purchase_requisitions","sales_quotes","goods_receipts","po_lines","product_suppliers","fixed_assets","receipt_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":12,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.6863020331203206},{"table":"purchase_orders","similarity":0.6720782086239174},{"table":"order_lines","similarity":0.620432904007153},{"table":"vendor_invoices","similarity":0.6085185379492049},{"table":"goods_receipts","similarity":0.6053687360586439},{"table":"sales_opportunities","similarity":0.601388904869088},{"table":"po_lines","similarity":0.576218684979662},{"table":"product_suppliers","similarity":0.5754254810584586},{"table":"purchase_requisitions","similarity":0.57327171968414},{"table":"vendor_invoice_lines","similarity":0.5682118570421297},{"table":"sales_territories","similarity":0.5678982904980082},{"table":"receipt_lines","similarity":0.5660529547253613},{"table":"vendors","similarity":0.5659136630376012},{"table":"reorder_rules","similarity":0.5568055924346023},{"table":"sales_quotes","similarity":0.5566655088616519}],"column_hits_per_table":{"sales_orders":14,"purchase_orders":13,"sales_quotes":1,"vendor_invoices":3,"purchase_requisitions":1,"stock_transfers":1,"timesheets":1,"leave_requests":1,"sales_opportunities":2,"project_phases":1,"projects":1,"journal_entries":1,"inventory_adjustments":1,"fixed_assets":2,"asset_maintenance":1,"order_lines":2,"employee_training":1,"project_expenses":1,"goods_receipts":1,"project_tasks":1},"top_columns_per_table":{"sales_orders":[{"column":"status","similarity":0.8126679915790036},{"column":"order_date","similarity":0.7078984846645195},{"column":"ship_date","similarity":0.6929006763015985}],"purchase_orders":[{"column":"status","similarity":0.770838550445989},{"column":"order_date","similarity":0.6497285521212871},{"column":"po_number","similarity":0.6445881341176289}],"sales_quotes":[{"column":"status","similarity":0.7105128416768823}],"vendor_invoices":[{"column":"status","similarity":0.6915681497187584},{"column":"due_date","similarity":0.5983254925630166},{"column":"po_id","similarity":0.5978553329024192}],"purchase_requisitions":[{"column":"status","similarity":0.6886346020649313}],"stock_transfers":[{"column":"status","similarity":0.6613621118756833}],"timesheets":[{"column":"status","similarity":0.6425710565758574}],"leave_requests":[{"column":"status","similarity":0.6303639699021262}],"sales_opportunities":[{"column":"expected_close_date","similarity":0.6291685056430228},{"column":"actual_close_date","similarity":0.6262923756162083}],"project_phases":[{"column":"status","similarity":0.6275085851720199}],"projects":[{"column":"status","similarity":0.6256287411296566}],"journal_entries":[{"column":"status","similarity":0.6235483153718223}],"inventory_adjustments":[{"column":"status","similarity":0.6208235335633071}],"fixed_assets":[{"column":"status","similarity":0.6168418961639195},{"column":"po_id","similarity":0.6010404984118506}],"asset_maintenance":[{"column":"status","similarity":0.6160182585727294}],"order_lines":[{"column":"quantity_shipped","similarity":0.6148753597061939},{"column":"order_id","similarity":0.6054379790805837}],"employee_training":[{"column":"status","similarity":0.6139587143974272}],"project_expenses":[{"column":"status","similarity":0.6069411878269023}],"goods_receipts":[{"column":"po_id","similarity":0.6057662952497207}],"project_tasks":[{"column":"status","similarity":0.6001730432395295}]},"fused_scores":[{"table":"sales_orders","fused":0.8335207489983198,"table_sim":0.6863020331203206,"col_score":1.0543488228153188},{"table":"purchase_orders","fused":0.7920559728463912,"table_sim":0.6720782086239174,"col_score":0.9720226191801016},{"table":"sales_opportunities","fused":0.7377592203019037,"table_sim":0.601388904869088,"col_score":0.9423146934511271},{"table":"order_lines","fused":0.7029712033580511,"table_sim":0.620432904007153,"col_score":0.8267786523843982},{"table":"vendor_invoices","fused":0.7012608607553557,"table_sim":0.6085185379492049,"col_score":0.840374344964582},{"table":"purchase_requisitions","fused":0.5367807203886648,"table_sim":0.57327171968414,"col_score":0.4820442214454519},{"table":"sales_quotes","fused":0.5329429009865182,"table_sim":0.5566655088616519,"col_score":0.4973589891738176},{"table":"goods_receipts","fused":0.5328358043051082,"table_sim":0.6053687360586439,"col_score":0.42403640667480447},{"table":"po_lines","fused":0.3457312109877972,"table_sim":0.576218684979662,"col_score":0},{"table":"product_suppliers","fused":0.34525528863507515,"table_sim":0.5754254810584586,"col_score":0},{"table":"vendor_invoice_lines","fused":0.3409271142252778,"table_sim":0.5682118570421297,"col_score":0},{"table":"sales_territories","fused":0.3407389742988049,"table_sim":0.5678982904980082,"col_score":0},{"table":"receipt_lines","fused":0.3396317728352168,"table_sim":0.5660529547253613,"col_score":0},{"table":"vendors","fused":0.3395481978225607,"table_sim":0.5659136630376012,"col_score":0},{"table":"reorder_rules","fused":0.33408335546076134,"table_sim":0.5568055924346023,"col_score":0}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendors","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":17,"total_retrieval_latency_ms":23,"sql_generated":"SELECT COUNT(*) FROM sales_orders WHERE status = 'pending';","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":496}
{"timestamp":"2026-01-29T19:45:18.450Z","query_id":"76c20f09-7f83-439b-935a-8b4204476997","question":"List all products in the Electronics category","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["products","asset_categories","product_categories","product_suppliers","inventory_levels","purchase_orders","project_budgets","fixed_assets","order_lines","goods_receipts","inventory_transactions","purchase_requisitions"],"tables_from_table_retrieval":15,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"product_categories","similarity":0.7247710633179223},{"table":"products","similarity":0.6925442846427379},{"table":"asset_categories","similarity":0.6732299389573608},{"table":"product_suppliers","similarity":0.6030261734368682},{"table":"inventory_levels","similarity":0.5983462217768915},{"table":"fixed_assets","similarity":0.5837780825065988},{"table":"order_lines","similarity":0.579950725989159},{"table":"benefit_types","similarity":0.5783320444020242},{"table":"goods_receipts","similarity":0.5716501955638699},{"table":"inventory_transactions","similarity":0.5662070064714834},{"table":"purchase_orders","similarity":0.5640672157629032},{"table":"reorder_rules","similarity":0.5631110139120176},{"table":"sales_orders","similarity":0.5610178986822795},{"table":"project_budgets","similarity":0.5604683231309531},{"table":"receipt_lines","similarity":0.5589477791069778}],"column_hits_per_table":{"product_categories":5,"products":11,"asset_categories":5,"fixed_assets":1,"project_expenses":1,"project_budgets":1,"inventory_levels":3,"product_suppliers":6,"goods_receipts":1,"inventory_transactions":1,"receipt_lines":1,"purchase_orders":3,"order_lines":1,"purchase_requisitions":2,"sales_orders":1,"requisition_lines":1,"po_lines":1,"transfer_lines":1,"projects":1,"reorder_rules":1,"vendors":1,"project_milestones":1},"top_columns_per_table":{"product_categories":[{"column":"description","similarity":0.7744734798782056},{"column":"is_active","similarity":0.764103621998991},{"column":"category_id","similarity":0.7400673790806138}],"products":[{"column":"category_id","similarity":0.7448968885002062},{"column":"weight","similarity":0.7338384533236261},{"column":"description","similarity":0.7270322585700298}],"asset_categories":[{"column":"category_id","similarity":0.6720113269687207},{"column":"name","similarity":0.6440506484802837},{"column":"useful_life_years","similarity":0.6436763776718329}],"fixed_assets":[{"column":"category_id","similarity":0.6687988929895817}],"project_expenses":[{"column":"category","similarity":0.6580372401808694}],"project_budgets":[{"column":"category","similarity":0.6411736891011891}],"inventory_levels":[{"column":"product_id","similarity":0.6383729329618826},{"column":"quantity_available","similarity":0.6195689232836453},{"column":"quantity_reserved","similarity":0.6150070840715671}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6357396016111654},{"column":"is_preferred","similarity":0.6352037703917482},{"column":"product_id","similarity":0.6350232984655001}],"goods_receipts":[{"column":"notes","similarity":0.6342701892167845}],"inventory_transactions":[{"column":"product_id","similarity":0.6285109886489371}],"receipt_lines":[{"column":"product_id","similarity":0.6251008787738574}],"purchase_orders":[{"column":"status","similarity":0.6246767013236649},{"column":"subtotal","similarity":0.6129627891245971},{"column":"total","similarity":0.6109546136413169}],"order_lines":[{"column":"product_id","similarity":0.6228405864995272}],"purchase_requisitions":[{"column":"notes","similarity":0.6219501766292409},{"column":"status","similarity":0.6143404481217759}],"sales_orders":[{"column":"status","similarity":0.6179542401442183}],"requisition_lines":[{"column":"product_id","similarity":0.6178394374568797}],"po_lines":[{"column":"product_id","similarity":0.6141691155677201}],"transfer_lines":[{"column":"product_id","similarity":0.6137213514394801}],"projects":[{"column":"description","similarity":0.6114423632244014}],"reorder_rules":[{"column":"product_id","similarity":0.6112855739301208}],"vendors":[{"column":"website","similarity":0.6078254177271813}],"project_milestones":[{"column":"description","similarity":0.6073811792561313}]},"fused_scores":[{"table":"products","fused":0.84960555792291,"table_sim":0.6925442846427379,"col_score":1.0851974678431684},{"table":"asset_categories","fused":0.785802907667366,"table_sim":0.6732299389573608,"col_score":0.9546623607323738},{"table":"product_categories","fused":0.7586897194365096,"table_sim":0.7247710633179223,"col_score":0.8095677036143907},{"table":"product_suppliers","fused":0.7431522987849367,"table_sim":0.6030261734368682,"col_score":0.9533414868070396},{"table":"inventory_levels","fused":0.7298367191939065,"table_sim":0.5983462217768915,"col_score":0.9270724653194289},{"table":"purchase_orders","fused":0.7058163678358441,"table_sim":0.5640672157629032,"col_score":0.9184400959452556},{"table":"project_budgets","fused":0.5927504695190475,"table_sim":0.5604683231309531,"col_score":0.6411736891011891},{"table":"fixed_assets","fused":0.5375305395410421,"table_sim":0.5837780825065988,"col_score":0.4681592250927072},{"table":"order_lines","fused":0.5223657998133631,"table_sim":0.579950725989159,"col_score":0.435988410549669},{"table":"goods_receipts","fused":0.5205857703190215,"table_sim":0.5716501955638699,"col_score":0.4439891324517491},{"table":"inventory_transactions","fused":0.5157072807045924,"table_sim":0.5662070064714834,"col_score":0.4399576920542559},{"table":"receipt_lines","fused":0.5103969135208668,"table_sim":0.5589477791069778,"col_score":0.4375706151417002},{"table":"sales_orders","fused":0.5096379264497488,"table_sim":0.5610178986822795,"col_score":0.43256796810095277},{"table":"reorder_rules","fused":0.5090265690476443,"table_sim":0.5631110139120176,"col_score":0.42789990175108455},{"table":"benefit_types","fused":0.3469992266412145,"table_sim":0.5783320444020242,"col_score":0}],"fk_expansion_candidates":23,"fk_expansion_added":2,"fk_expansion_blocked_count":17,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"max_tables"},{"table":"reorder_rules","reason":"max_tables"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"max_tables"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":14,"total_retrieval_latency_ms":20,"sql_generated":"SELECT p.name AS product_name, p.sku, pc.category_id, pc.name AS category_name FROM products p INNER JOIN product_categories pc ON p.category_id = pc.category_id WHERE pc.name = 'Electronics';","tables_used_in_sql":[],"explain_result":"success","rows_returned":62,"total_latency_ms":973}
{"timestamp":"2026-01-29T19:45:19.424Z","query_id":"b757b2f1-1ccb-405d-905a-53ac4f62f5c5","question":"What are the names of all warehouses?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["warehouse_locations","warehouses","asset_locations","inventory_levels","stock_transfers","vendors","product_suppliers","inventory_transactions","goods_receipts","receipt_lines","addresses","adjustment_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":14,"tables_from_fk_expansion":2,"table_scores":[{"table":"warehouse_locations","similarity":0.7285498737313786},{"table":"warehouses","similarity":0.6792134543197855},{"table":"inventory_levels","similarity":0.6028416640616783},{"table":"stock_transfers","similarity":0.5855227429535015},{"table":"asset_locations","similarity":0.5811905860356016},{"table":"inventory_transactions","similarity":0.5741447160112193},{"table":"goods_receipts","similarity":0.562857185642988},{"table":"receipt_lines","similarity":0.5455584769843732},{"table":"inventory_adjustments","similarity":0.5426259114305894},{"table":"departments","similarity":0.5313134558364061},{"table":"business_units","similarity":0.5244981901049215},{"table":"asset_categories","similarity":0.5238562017802103},{"table":"product_suppliers","similarity":0.5237894596417773},{"table":"vendors","similarity":0.5237362245698947},{"table":"adjustment_lines","similarity":0.5220765049120273}],"column_hits_per_table":{"warehouses":6,"warehouse_locations":7,"stock_transfers":2,"goods_receipts":1,"inventory_levels":2,"inventory_transactions":2,"receipt_lines":1,"departments":1,"vendors":2,"inventory_adjustments":1,"adjustment_lines":1,"asset_locations":6,"cities":1,"reorder_rules":1,"business_units":1,"cost_centers":1,"sales_territories":1,"products":1,"sales_regions":1,"projects":1,"currencies":1,"product_categories":1,"budgets":1,"product_suppliers":2,"units_of_measure":1,"project_phases":1,"vendor_contacts":1,"asset_categories":1,"addresses":1},"top_columns_per_table":{"warehouses":[{"column":"name","similarity":0.8306423755557336},{"column":"code","similarity":0.7512829316334283},{"column":"warehouse_id","similarity":0.7425092729476251}],"warehouse_locations":[{"column":"rack","similarity":0.7298143500706573},{"column":"bin","similarity":0.7297344203964418},{"column":"aisle","similarity":0.7247238571215294}],"stock_transfers":[{"column":"to_warehouse_id","similarity":0.6377076065867383},{"column":"from_warehouse_id","similarity":0.6282759066468376}],"goods_receipts":[{"column":"warehouse_id","similarity":0.6325079254457334}],"inventory_levels":[{"column":"warehouse_id","similarity":0.623490938233287},{"column":"location_id","similarity":0.6197290277532869}],"inventory_transactions":[{"column":"warehouse_id","similarity":0.6172355443974565},{"column":"location_id","similarity":0.6163600073929221}],"receipt_lines":[{"column":"location_id","similarity":0.6086776313817097}],"departments":[{"column":"name","similarity":0.6046172861965688}],"vendors":[{"column":"name","similarity":0.6006474572761235},{"column":"website","similarity":0.5429020150551502}],"inventory_adjustments":[{"column":"warehouse_id","similarity":0.5962150819746229}],"adjustment_lines":[{"column":"location_id","similarity":0.5953390531464773}],"asset_locations":[{"column":"name","similarity":0.59252797863612},{"column":"building","similarity":0.5687769385352075},{"column":"description","similarity":0.568123307445186}],"cities":[{"column":"name","similarity":0.5913925051006355}],"reorder_rules":[{"column":"warehouse_id","similarity":0.5860961886053743}],"business_units":[{"column":"name","similarity":0.5855760360515111}],"cost_centers":[{"column":"name","similarity":0.5796551031766091}],"sales_territories":[{"column":"name","similarity":0.5739343094189399}],"products":[{"column":"name","similarity":0.5715109515395136}],"sales_regions":[{"column":"name","similarity":0.5686881306616351}],"projects":[{"column":"name","similarity":0.5628106374186854}],"currencies":[{"column":"name","similarity":0.5599164983958906}],"product_categories":[{"column":"name","similarity":0.5543220703341668}],"budgets":[{"column":"name","similarity":0.5506764127199264}],"product_suppliers":[{"column":"supplier_id","similarity":0.5505276328361339},{"column":"is_preferred","similarity":0.545694199708335}],"units_of_measure":[{"column":"name","similarity":0.5498315512937682}],"project_phases":[{"column":"name","similarity":0.5455907198882759}],"vendor_contacts":[{"column":"first_name","similarity":0.5438345209961394}],"asset_categories":[{"column":"name","similarity":0.5437632464112468}],"addresses":[{"column":"street1","similarity":0.5425795221955373}]},"fused_scores":[{"table":"warehouse_locations","fused":0.8750025483463784,"table_sim":0.7285498737313786,"col_score":1.0946815602688782},{"table":"warehouses","fused":0.8243311778230453,"table_sim":0.6792134543197855,"col_score":1.042007763077935},{"table":"asset_locations","fused":0.6856831018359026,"table_sim":0.5811905860356016,"col_score":0.8424218755363542},{"table":"inventory_levels","fused":0.6230445250277874,"table_sim":0.6028416640616783,"col_score":0.6533488164769513},{"table":"stock_transfers","fused":0.6178304025469449,"table_sim":0.5855227429535015,"col_score":0.6662918919371099},{"table":"vendors","fused":0.6154931847826541,"table_sim":0.5237362245698947,"col_score":0.7531286251017935},{"table":"product_suppliers","fused":0.6096252242654591,"table_sim":0.5237894596417773,"col_score":0.7383788712009819},{"table":"inventory_transactions","fused":0.6036031830730284,"table_sim":0.5741447160112193,"col_score":0.6477908836657422},{"table":"goods_receipts","fused":0.5148165305105982,"table_sim":0.562857185642988,"col_score":0.4427555478120134},{"table":"receipt_lines","fused":0.49776482297750263,"table_sim":0.5455584769843732,"col_score":0.4260743419671968},{"table":"inventory_adjustments","fused":0.492515769811248,"table_sim":0.5426259114305894,"col_score":0.41735055738223603},{"table":"departments","fused":0.4880809136368829,"table_sim":0.5313134558364061,"col_score":0.42323210033759817},{"table":"adjustment_lines","fused":0.47994083782823005,"table_sim":0.5220765049120273,"col_score":0.4167373372025341},{"table":"business_units","fused":0.478660204157376,"table_sim":0.5244981901049215,"col_score":0.40990322523605777},{"table":"asset_categories","fused":0.4665674300632753,"table_sim":0.5238562017802103,"col_score":0.3806342724878728}],"fk_expansion_candidates":15,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"max_tables"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"vendor_contacts","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":37,"total_retrieval_latency_ms":44,"sql_generated":"SELECT w.name FROM warehouses AS w;","tables_used_in_sql":[],"explain_result":"success","rows_returned":5,"total_latency_ms":425}
{"timestamp":"2026-01-29T19:45:19.849Z","query_id":"0885fabc-af56-4318-b456-0d4ab28b8c14","question":"List all active vendors","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["vendors","vendor_contacts","vendor_invoices","product_suppliers","vendor_invoice_lines","purchase_orders","warehouses","sales_orders","asset_maintenance","positions","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":1,"table_scores":[{"table":"vendors","similarity":0.6880006513779018},{"table":"vendor_invoices","similarity":0.6543823921120047},{"table":"vendor_contacts","similarity":0.6543707733450305},{"table":"product_suppliers","similarity":0.6368613960189783},{"table":"purchase_orders","similarity":0.6046285681195724},{"table":"warehouses","similarity":0.598149679590252},{"table":"vendor_invoice_lines","similarity":0.5838401301268009},{"table":"sales_orders","similarity":0.5640201838810418},{"table":"employee_certifications","similarity":0.551813660527373},{"table":"positions","similarity":0.5516308950343896},{"table":"goods_receipts","similarity":0.546132532397609},{"table":"certifications","similarity":0.5422578536384377},{"table":"business_units","similarity":0.5370141517568868},{"table":"sales_opportunities","similarity":0.5364263200685896},{"table":"asset_maintenance","similarity":0.5360709301261409}],"column_hits_per_table":{"vendors":12,"vendor_invoices":11,"product_suppliers":3,"vendor_contacts":8,"fixed_assets":1,"customers":1,"employees":1,"products":1,"asset_maintenance":1,"purchase_orders":1,"warehouses":1,"vendor_invoice_lines":4,"business_units":1,"positions":1,"sales_orders":1,"product_categories":1,"bank_accounts":1},"top_columns_per_table":{"vendors":[{"column":"is_active","similarity":0.8155853373692737},{"column":"vendor_id","similarity":0.7047968333046998},{"column":"website","similarity":0.7047070539914414}],"vendor_invoices":[{"column":"status","similarity":0.6853007949330985},{"column":"total","similarity":0.6625184230380687},{"column":"vendor_id","similarity":0.658515810844043}],"product_suppliers":[{"column":"vendor_id","similarity":0.6663864141204237},{"column":"vendor_sku","similarity":0.6217787251674654},{"column":"is_preferred","similarity":0.6033063105449389}],"vendor_contacts":[{"column":"vendor_id","similarity":0.666362862060921},{"column":"is_primary","similarity":0.6648517274867396},{"column":"contact_id","similarity":0.6527908754111679}],"fixed_assets":[{"column":"vendor_id","similarity":0.6576219040714807}],"customers":[{"column":"is_active","similarity":0.6545248955843614}],"employees":[{"column":"is_active","similarity":0.649190940172776}],"products":[{"column":"is_active","similarity":0.6479807345635332}],"asset_maintenance":[{"column":"vendor_id","similarity":0.6479581638128978}],"purchase_orders":[{"column":"vendor_id","similarity":0.6472967761083289}],"warehouses":[{"column":"is_active","similarity":0.6446855549903335}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.6230871843854703},{"column":"invoice_id","similarity":0.6101244773591274},{"column":"line_id","similarity":0.609089375870349}],"business_units":[{"column":"is_active","similarity":0.6149605862492391}],"positions":[{"column":"is_active","similarity":0.6137399762218805}],"sales_orders":[{"column":"status","similarity":0.6081473914740269}],"product_categories":[{"column":"is_active","similarity":0.6076608572400397}],"bank_accounts":[{"column":"is_active","similarity":0.6030985737718401}]},"fused_scores":[{"table":"vendors","fused":0.8340562331865453,"table_sim":0.6880006513779018,"col_score":1.0531396058995104},{"table":"vendor_contacts","fused":0.7889592560034033,"table_sim":0.6543707733450305,"col_score":0.9908419799909627},{"table":"vendor_invoices","fused":0.7879374726767754,"table_sim":0.6543823921120047,"col_score":0.9882700935239312},{"table":"product_suppliers","fused":0.751489589787361,"table_sim":0.6368613960189783,"col_score":0.9234318804399348},{"table":"vendor_invoice_lines","fused":0.7211190259203175,"table_sim":0.5838401301268009,"col_score":0.9270373696105922},{"table":"purchase_orders","fused":0.5440202381820756,"table_sim":0.6046285681195724,"col_score":0.4531077432758302},{"table":"warehouses","fused":0.5394017631514445,"table_sim":0.598149679590252,"col_score":0.4512798884932334},{"table":"sales_orders","fused":0.5086933799413526,"table_sim":0.5640201838810418,"col_score":0.4257031740318188},{"table":"asset_maintenance","fused":0.5030708439432959,"table_sim":0.5360709301261409,"col_score":0.45357071466902843},{"table":"positions","fused":0.5028257303627602,"table_sim":0.5516308950343896,"col_score":0.4296179833553163},{"table":"business_units","fused":0.49439745520391903,"table_sim":0.5370141517568868,"col_score":0.4304724103744674},{"table":"employee_certifications","fused":0.3310881963164238,"table_sim":0.551813660527373,"col_score":0},{"table":"goods_receipts","fused":0.3276795194385654,"table_sim":0.546132532397609,"col_score":0},{"table":"certifications","fused":0.3253547121830626,"table_sim":0.5422578536384377,"col_score":0},{"table":"sales_opportunities","fused":0.3218557920411537,"table_sim":0.5364263200685896,"col_score":0}],"fk_expansion_candidates":20,"fk_expansion_added":1,"fk_expansion_blocked_count":19,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":55,"total_retrieval_latency_ms":61,"sql_generated":"SELECT v.vendor_id, v.vendor_number, v.name FROM vendors AS v WHERE v.is_active = TRUE;","tables_used_in_sql":[],"explain_result":"success","rows_returned":200,"total_latency_ms":651}
{"timestamp":"2026-01-29T19:45:20.501Z","query_id":"9e34e347-42e0-4403-8bbb-ee52ec6b0c73","question":"What are the different account types in the chart of accounts?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["account_types","chart_of_accounts","bank_accounts","bank_transactions","asset_categories","audit_log","benefit_types","journal_lines","vendor_invoice_lines","budget_lines","currencies","employee_benefits"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"chart_of_accounts","similarity":0.819203299985527},{"table":"account_types","similarity":0.7962345365841693},{"table":"bank_accounts","similarity":0.724679255065619},{"table":"journal_lines","similarity":0.625444495321535},{"table":"asset_categories","similarity":0.618359452764169},{"table":"benefit_types","similarity":0.6179653147868353},{"table":"bank_transactions","similarity":0.6154557182401941},{"table":"vendor_invoice_lines","similarity":0.6040685769049701},{"table":"budget_lines","similarity":0.5976766494889552},{"table":"customers","similarity":0.594854133582724},{"table":"leave_types","similarity":0.584850284339393},{"table":"audit_log","similarity":0.5826141715666185},{"table":"maintenance_types","similarity":0.5755860970964287},{"table":"currencies","similarity":0.5740346669434278},{"table":"certifications","similarity":0.5726437402506039}],"column_hits_per_table":{"chart_of_accounts":8,"account_types":4,"bank_accounts":8,"journal_lines":1,"budget_lines":1,"vendor_invoice_lines":1,"bank_transactions":3,"inventory_transactions":2,"asset_categories":3,"audit_log":2,"benefit_types":4,"document_attachments":1,"sales_orders":1,"employee_certifications":1,"journal_entries":1,"maintenance_types":1,"employee_benefits":2,"goods_receipts":1,"leave_types":1,"sales_regions":1,"stock_transfers":1,"employment_history":1,"product_categories":1},"top_columns_per_table":{"chart_of_accounts":[{"column":"account_number","similarity":0.8096926316994187},{"column":"account_type_id","similarity":0.7968800422254282},{"column":"name","similarity":0.7787449565502012}],"account_types":[{"column":"category","similarity":0.8060382831667645},{"column":"name","similarity":0.7816311319186199},{"column":"normal_balance","similarity":0.771440158430953}],"bank_accounts":[{"column":"account_number","similarity":0.7265786276491443},{"column":"gl_account_id","similarity":0.7192429462418238},{"column":"account_name","similarity":0.7122946577731373}],"journal_lines":[{"column":"account_id","similarity":0.6967143979052984}],"budget_lines":[{"column":"account_id","similarity":0.684445613990559}],"vendor_invoice_lines":[{"column":"account_id","similarity":0.6840058160952801}],"bank_transactions":[{"column":"transaction_type","similarity":0.6518087698648707},{"column":"bank_account_id","similarity":0.6061370977618293},{"column":"reference","similarity":0.5906710248731557}],"inventory_transactions":[{"column":"transaction_type","similarity":0.6495161080312447},{"column":"reference_type","similarity":0.6175642629967973}],"asset_categories":[{"column":"name","similarity":0.6338625869508345},{"column":"depreciation_method","similarity":0.6289044257771695},{"column":"category_id","similarity":0.6034748261864737}],"audit_log":[{"column":"table_name","similarity":0.6323776797561055},{"column":"action","similarity":0.6264802121253557}],"benefit_types":[{"column":"name","similarity":0.631265442053339},{"column":"benefit_type_id","similarity":0.5989631957377372},{"column":"description","similarity":0.5970070919798401}],"document_attachments":[{"column":"entity_type","similarity":0.610129485144327}],"sales_orders":[{"column":"order_number","similarity":0.6014897520147031}],"employee_certifications":[{"column":"certificate_number","similarity":0.6014221103097243}],"journal_entries":[{"column":"entry_number","similarity":0.5960303492351093}],"maintenance_types":[{"column":"name","similarity":0.5941881078938602}],"employee_benefits":[{"column":"coverage_level","similarity":0.59406931034147},{"column":"benefit_type_id","similarity":0.5920431573893533}],"goods_receipts":[{"column":"receipt_number","similarity":0.5921999581294917}],"leave_types":[{"column":"name","similarity":0.590925842666314}],"sales_regions":[{"column":"name","similarity":0.5908831690426579}],"stock_transfers":[{"column":"transfer_number","similarity":0.5905182588855986}],"employment_history":[{"column":"position","similarity":0.5900957722493421}],"product_categories":[{"column":"name","similarity":0.5900660138884373}]},"fused_scores":[{"table":"account_types","fused":0.954444066903398,"table_sim":0.7962345365841693,"col_score":1.191758362382241},{"table":"chart_of_accounts","fused":0.9269622385826437,"table_sim":0.819203299985527,"col_score":1.0886006464783187},{"table":"bank_accounts","fused":0.8505843245377838,"table_sim":0.724679255065619,"col_score":1.0394419287460308},{"table":"bank_transactions","fused":0.7481311438646958,"table_sim":0.6154557182401941,"col_score":0.9471442823014485},{"table":"asset_categories","fused":0.7113182041424861,"table_sim":0.618359452764169,"col_score":0.8507563312099616},{"table":"audit_log","fused":0.6886934629559682,"table_sim":0.5826141715666185,"col_score":0.8478124000399926},{"table":"benefit_types","fused":0.6313883600503192,"table_sim":0.6179653147868353,"col_score":0.6515229279455452},{"table":"journal_lines","fused":0.5703467286064046,"table_sim":0.625444495321535,"col_score":0.4877000785337089},{"table":"vendor_invoice_lines","fused":0.5539627746496605,"table_sim":0.6040685769049701,"col_score":0.47880407126669605},{"table":"budget_lines","fused":0.5502507616107296,"table_sim":0.5976766494889552,"col_score":0.4791119297933913},{"table":"leave_types","fused":0.5163694065502037,"table_sim":0.584850284339393,"col_score":0.41364808986641977},{"table":"maintenance_types","fused":0.5117243284681381,"table_sim":0.5755860970964287,"col_score":0.41593167552570215},{"table":"inventory_transactions","fused":0.38331929581185736,"table_sim":0,"col_score":0.9582982395296433},{"table":"customers","fused":0.3569124801496344,"table_sim":0.594854133582724,"col_score":0},{"table":"currencies","fused":0.34442080016605664,"table_sim":0.5740346669434278,"col_score":0}],"fk_expansion_candidates":9,"fk_expansion_added":2,"fk_expansion_blocked_count":7,"fk_expansion_blocked":[{"table":"budgets","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":30,"total_retrieval_latency_ms":36,"sql_generated":"SELECT DISTINCT at.name AS AccountType FROM account_types at;","tables_used_in_sql":[],"explain_result":"success","rows_returned":25,"total_latency_ms":436}
{"timestamp":"2026-01-29T19:45:20.938Z","query_id":"a0812824-d35e-4e64-b5f9-2ce8a5286679","question":"List all bank accounts and their current balances","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["bank_accounts","bank_transactions","account_types","chart_of_accounts","depreciation_entries","currencies","budgets","asset_maintenance","fixed_assets","budget_lines","asset_categories","asset_transfers"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"bank_accounts","similarity":0.7329690151560269},{"table":"bank_transactions","similarity":0.6432688918493359},{"table":"account_types","similarity":0.631508179872346},{"table":"chart_of_accounts","similarity":0.6020063005251778},{"table":"budget_lines","similarity":0.5651962639440569},{"table":"customers","similarity":0.5535278665609116},{"table":"asset_categories","similarity":0.5521572577010813},{"table":"asset_maintenance","similarity":0.5475464914896694},{"table":"fixed_assets","similarity":0.542263585011133},{"table":"depreciation_entries","similarity":0.540207110520008},{"table":"depreciation_schedules","similarity":0.5389700501296238},{"table":"budgets","similarity":0.5356853372102878},{"table":"audit_log","similarity":0.5355796554212624},{"table":"currencies","similarity":0.5347534603370891},{"table":"asset_transfers","similarity":0.5308786114003121}],"column_hits_per_table":{"bank_accounts":8,"account_types":4,"bank_transactions":8,"chart_of_accounts":7,"budget_lines":1,"budgets":2,"asset_maintenance":4,"fixed_assets":3,"departments":1,"stock_transfers":1,"purchase_orders":1,"inventory_adjustments":1,"sales_orders":1,"depreciation_entries":3,"asset_transfers":1,"po_lines":1,"currencies":2,"order_lines":1},"top_columns_per_table":{"bank_accounts":[{"column":"current_balance","similarity":0.8131918868327234},{"column":"bank_name","similarity":0.6859971206500465},{"column":"is_active","similarity":0.6856206372857585}],"account_types":[{"column":"normal_balance","similarity":0.651680429614802},{"column":"name","similarity":0.5702821319602579},{"column":"category","similarity":0.5677375251541499}],"bank_transactions":[{"column":"bank_account_id","similarity":0.6394080898784963},{"column":"amount","similarity":0.6276211603986331},{"column":"reconciled","similarity":0.6180619655169489}],"chart_of_accounts":[{"column":"account_number","similarity":0.6009438246638642},{"column":"is_active","similarity":0.5880663435274229},{"column":"description","similarity":0.5864624123051488}],"budget_lines":[{"column":"account_id","similarity":0.5958013856129102}],"budgets":[{"column":"status","similarity":0.5911631228971014},{"column":"total_amount","similarity":0.5869858538327237}],"asset_maintenance":[{"column":"status","similarity":0.5877659188337945},{"column":"cost","similarity":0.5661365628191241},{"column":"notes","similarity":0.5650870530420457}],"fixed_assets":[{"column":"status","similarity":0.5876108236636884},{"column":"purchase_cost","similarity":0.5561615272534075},{"column":"po_id","similarity":0.5498653271915838}],"departments":[{"column":"budget","similarity":0.5809728059571625}],"stock_transfers":[{"column":"status","similarity":0.5709511656558833}],"purchase_orders":[{"column":"total","similarity":0.5687313472919212}],"inventory_adjustments":[{"column":"status","similarity":0.5683037201005342}],"sales_orders":[{"column":"total","similarity":0.5660190484076101}],"depreciation_entries":[{"column":"accumulated_depreciation","similarity":0.5614194260846443},{"column":"amount","similarity":0.555260116269063},{"column":"asset_id","similarity":0.5551633641468458}],"asset_transfers":[{"column":"asset_id","similarity":0.5602763924959059}],"po_lines":[{"column":"line_total","similarity":0.5571370270411418}],"currencies":[{"column":"symbol","similarity":0.5502956016313811},{"column":"code","similarity":0.5500909502155655}],"order_lines":[{"column":"line_total","similarity":0.5495504183282629}]},"fused_scores":[{"table":"bank_accounts","fused":0.902177471523772,"table_sim":0.7329690151560269,"col_score":1.1559901560753896},{"table":"bank_transactions","fused":0.7606221923724445,"table_sim":0.6432688918493359,"col_score":0.9366521431571075},{"table":"account_types","fused":0.7531245848001584,"table_sim":0.631508179872346,"col_score":0.9355491921918769},{"table":"chart_of_accounts","fused":0.6839105982744915,"table_sim":0.6020063005251778,"col_score":0.8067670448984622},{"table":"depreciation_entries","fused":0.6597440599996751,"table_sim":0.540207110520008,"col_score":0.8390494842191758},{"table":"currencies","fused":0.6509885068979191,"table_sim":0.5347534603370891,"col_score":0.8253410767391639},{"table":"budgets","fused":0.6389683810648563,"table_sim":0.5356853372102878,"col_score":0.7938929468467092},{"table":"asset_maintenance","fused":0.6372697486581825,"table_sim":0.5475464914896694,"col_score":0.7718546344109521},{"table":"fixed_assets","fused":0.6300882772209593,"table_sim":0.542263585011133,"col_score":0.7618253155356984},{"table":"budget_lines","fused":0.5059421463380489,"table_sim":0.5651962639440569,"col_score":0.41706096992903713},{"table":"asset_transfers","fused":0.4754045567390409,"table_sim":0.5308786114003121,"col_score":0.3921934747471341},{"table":"customers","fused":0.33211671993654696,"table_sim":0.5535278665609116,"col_score":0},{"table":"asset_categories","fused":0.33129435462064877,"table_sim":0.5521572577010813,"col_score":0},{"table":"depreciation_schedules","fused":0.3233820300777743,"table_sim":0.5389700501296238,"col_score":0},{"table":"audit_log","fused":0.3213477932527574,"table_sim":0.5355796554212624,"col_score":0}],"fk_expansion_candidates":15,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"asset_locations","reason":"no_evidence"},{"table":"customers","reason":"max_tables"},{"table":"departments","reason":"max_tables"},{"table":"depreciation_schedules","reason":"max_tables"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"purchase_orders","reason":"max_tables"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":44,"total_retrieval_latency_ms":50,"sql_generated":"SELECT ba.account_number AS \"Account Number\", ba.account_name AS \"Account Name\", ba.current_balance AS \"Current Balance\" FROM fixed_assets fa INNER JOIN bank_accounts ba ON fa.asset_id = ba.bank_account_id WHERE fa.category_id IN (SELECT category_id FROM asset_categories WHERE name = 'Fixed Assets');","tables_used_in_sql":[],"explain_result":"success","rows_returned":0,"total_latency_ms":1283}
{"timestamp":"2026-01-29T19:45:22.222Z","query_id":"fa9eb9af-5e07-4444-947c-6829d259487f","question":"How many projects are currently active?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["project_tasks","projects","project_milestones","project_phases","project_resources","project_expenses","positions","product_categories","warehouses","cost_centers","project_budgets","task_assignments"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_tasks","similarity":0.6324363750327547},{"table":"project_milestones","similarity":0.6170314556998037},{"table":"project_phases","similarity":0.6128862225489412},{"table":"projects","similarity":0.6020298260872147},{"table":"project_resources","similarity":0.6015867769428557},{"table":"project_budgets","similarity":0.5892063991800344},{"table":"project_expenses","similarity":0.5696442071698902},{"table":"positions","similarity":0.5644568182612411},{"table":"opportunity_stages","similarity":0.5589162087700763},{"table":"warehouses","similarity":0.5509035131365505},{"table":"cost_centers","similarity":0.548129265267962},{"table":"task_assignments","similarity":0.5450320760647058},{"table":"product_categories","similarity":0.539820939875771},{"table":"asset_maintenance","similarity":0.52313956323239},{"table":"business_units","similarity":0.5210598083671529}],"column_hits_per_table":{"projects":11,"project_phases":8,"project_tasks":9,"products":1,"project_milestones":7,"product_categories":1,"positions":1,"project_expenses":1,"project_resources":3,"training_courses":1,"employees":1,"warehouses":1,"business_units":1,"cost_centers":1,"vendors":1,"bank_accounts":1,"customers":1},"top_columns_per_table":{"projects":[{"column":"status","similarity":0.7039586739514128},{"column":"start_date","similarity":0.6607094006164724},{"column":"project_number","similarity":0.6518983609724518}],"project_phases":[{"column":"status","similarity":0.6689746254874316},{"column":"start_date","similarity":0.6271086432862566},{"column":"project_id","similarity":0.6166614910327677}],"project_tasks":[{"column":"status","similarity":0.6676901253189378},{"column":"completed_date","similarity":0.6374421602481329},{"column":"actual_hours","similarity":0.6316381487867313}],"products":[{"column":"is_active","similarity":0.6425708119490484}],"project_milestones":[{"column":"completed_date","similarity":0.6325660468867274},{"column":"is_billable","similarity":0.6124934562333328},{"column":"project_id","similarity":0.6076897771208767}],"product_categories":[{"column":"is_active","similarity":0.6317144051457637}],"positions":[{"column":"is_active","similarity":0.6252475888035075}],"project_expenses":[{"column":"status","similarity":0.622364299630185}],"project_resources":[{"column":"start_date","similarity":0.6206371456319261},{"column":"end_date","similarity":0.6084386815140401},{"column":"project_id","similarity":0.5910943352806449}],"training_courses":[{"column":"is_active","similarity":0.6141042575011056}],"employees":[{"column":"is_active","similarity":0.6117702012307417}],"warehouses":[{"column":"is_active","similarity":0.6079254385625211}],"business_units":[{"column":"is_active","similarity":0.6021027569519785}],"cost_centers":[{"column":"is_active","similarity":0.597901030459316}],"vendors":[{"column":"is_active","similarity":0.5950232278262507}],"bank_accounts":[{"column":"is_active","similarity":0.5888223633904216}],"customers":[{"column":"is_active","similarity":0.5831120305694527}]},"fused_scores":[{"table":"project_tasks","fused":0.7607663188762523,"table_sim":0.6324363750327547,"col_score":0.9532612346414986},{"table":"projects","fused":0.7558813280934082,"table_sim":0.6020298260872147,"col_score":0.9866585811026983},{"table":"project_milestones","fused":0.7457439834212397,"table_sim":0.6170314556998037,"col_score":0.9388127750033938},{"table":"project_phases","fused":0.7418687116489029,"table_sim":0.6128862225489412,"col_score":0.9353424452988452},{"table":"project_resources","fused":0.7308946607212918,"table_sim":0.6015867769428557,"col_score":0.9248564863889461},{"table":"project_expenses","fused":0.5160485281983859,"table_sim":0.5696442071698902,"col_score":0.4356550097411295},{"table":"positions","fused":0.5137434158217267,"table_sim":0.5644568182612411,"col_score":0.4376733121624552},{"table":"product_categories","fused":0.5007725973662764,"table_sim":0.539820939875771,"col_score":0.44220008360203455},{"table":"warehouses","fused":0.5007612306794362,"table_sim":0.5509035131365505,"col_score":0.42554780699376477},{"table":"cost_centers","fused":0.49628984768938567,"table_sim":0.548129265267962,"col_score":0.41853072132152114},{"table":"business_units","fused":0.48122465696684574,"table_sim":0.5210598083671529,"col_score":0.4214719298663849},{"table":"project_budgets","fused":0.35352383950802063,"table_sim":0.5892063991800344,"col_score":0},{"table":"opportunity_stages","fused":0.33534972526204576,"table_sim":0.5589162087700763,"col_score":0},{"table":"task_assignments","fused":0.3270192456388235,"table_sim":0.5450320760647058,"col_score":0},{"table":"asset_maintenance","fused":0.31388373793943397,"table_sim":0.52313956323239,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":14,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":26,"total_retrieval_latency_ms":31,"sql_generated":"SELECT COUNT(*) FROM projects WHERE status = 'active';","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":352}
{"timestamp":"2026-01-29T19:45:22.574Z","query_id":"5dc074d9-6c07-4b9f-be54-7d9e4bdb7a59","question":"List all fixed assets with their purchase cost","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["fixed_assets","asset_maintenance","purchase_orders","asset_transfers","project_budgets","project_expenses","asset_categories","purchase_requisitions","depreciation_schedules","depreciation_entries","asset_locations","maintenance_types"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"fixed_assets","similarity":0.7209497053888301},{"table":"asset_maintenance","similarity":0.6308058404117752},{"table":"asset_categories","similarity":0.5912281177120349},{"table":"depreciation_schedules","similarity":0.5814813777494169},{"table":"asset_transfers","similarity":0.5810308594815269},{"table":"purchase_requisitions","similarity":0.5569747421146416},{"table":"purchase_orders","similarity":0.5506831817049027},{"table":"depreciation_entries","similarity":0.5454814933769311},{"table":"asset_locations","similarity":0.545468446655189},{"table":"requisition_lines","similarity":0.5406198549845527},{"table":"project_expenses","similarity":0.5394520045423311},{"table":"project_budgets","similarity":0.5162048498656928},{"table":"inventory_adjustments","similarity":0.5159531035642008},{"table":"sales_territories","similarity":0.5074635447871859},{"table":"adjustment_lines","similarity":0.5062944760482943}],"column_hits_per_table":{"fixed_assets":17,"asset_maintenance":8,"asset_transfers":2,"purchase_orders":5,"maintenance_types":1,"depreciation_entries":1,"depreciation_schedules":1,"products":2,"purchase_requisitions":2,"asset_categories":1,"project_expenses":2,"project_budgets":2,"sales_orders":2,"product_suppliers":1,"projects":1,"vendor_invoices":1,"budgets":1},"top_columns_per_table":{"fixed_assets":[{"column":"purchase_cost","similarity":0.8423448992143113},{"column":"purchase_date","similarity":0.7689166463133373},{"column":"disposal_amount","similarity":0.7227764959896598}],"asset_maintenance":[{"column":"cost","similarity":0.7099171439402068},{"column":"asset_id","similarity":0.6516176549413301},{"column":"status","similarity":0.6280454782739386}],"asset_transfers":[{"column":"asset_id","similarity":0.6460511870752553},{"column":"reason","similarity":0.5978803089362457}],"purchase_orders":[{"column":"total","similarity":0.6344593910735148},{"column":"shipping_cost","similarity":0.6188978318886464},{"column":"subtotal","similarity":0.6026448016407694}],"maintenance_types":[{"column":"estimated_cost","similarity":0.6142507699404941}],"depreciation_entries":[{"column":"asset_id","similarity":0.609651147848969}],"depreciation_schedules":[{"column":"asset_id","similarity":0.6056651094167285}],"products":[{"column":"unit_cost","similarity":0.6018845518779156},{"column":"list_price","similarity":0.5829432045610968}],"purchase_requisitions":[{"column":"status","similarity":0.6006593595483197},{"column":"notes","similarity":0.580625013783363}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.5981101161213059}],"project_expenses":[{"column":"amount","similarity":0.5845721523119052},{"column":"status","similarity":0.5742178119977871}],"project_budgets":[{"column":"actual_amount","similarity":0.5819665579953361},{"column":"planned_amount","similarity":0.5770144160331034}],"sales_orders":[{"column":"total","similarity":0.5794698766565994},{"column":"shipping_cost","similarity":0.5723923913919466}],"product_suppliers":[{"column":"unit_cost","similarity":0.5781850879817803}],"projects":[{"column":"budget","similarity":0.5753357955995387}],"vendor_invoices":[{"column":"total","similarity":0.5747822939355819}],"budgets":[{"column":"total_amount","similarity":0.5743122120825542}]},"fused_scores":[{"table":"fixed_assets","fused":0.92329111218169,"table_sim":0.7209497053888301,"col_score":1.22680322237098},{"table":"asset_maintenance","fused":0.7860559067350223,"table_sim":0.6308058404117752,"col_score":1.0189310062198929},{"table":"purchase_orders","fused":0.7079732318300769,"table_sim":0.5506831817049027,"col_score":0.943908307017838},{"table":"asset_transfers","fused":0.67821780545395,"table_sim":0.5810308594815269,"col_score":0.823998224412585},{"table":"project_budgets","fused":0.6579124163241709,"table_sim":0.5162048498656928,"col_score":0.8704737660118879},{"table":"project_expenses","fused":0.637890557329851,"table_sim":0.5394520045423311,"col_score":0.7855483865111307},{"table":"asset_categories","fused":0.5939809170757433,"table_sim":0.5912281177120349,"col_score":0.5981101161213059},{"table":"purchase_requisitions","fused":0.5836569678719853,"table_sim":0.5569747421146416,"col_score":0.6236803065080008},{"table":"depreciation_schedules","fused":0.5184750572863341,"table_sim":0.5814813777494169,"col_score":0.4239655765917099},{"table":"depreciation_entries","fused":0.49799121742387,"table_sim":0.5454814933769311,"col_score":0.4267558034942783},{"table":"products","fused":0.3573424616633856,"table_sim":0,"col_score":0.893356154158464},{"table":"sales_orders","fused":0.3462664289410291,"table_sim":0,"col_score":0.8656660723525728},{"table":"asset_locations","fused":0.3272810679931134,"table_sim":0.545468446655189,"col_score":0},{"table":"requisition_lines","fused":0.3243719129907316,"table_sim":0.5406198549845527,"col_score":0},{"table":"inventory_adjustments","fused":0.30957186213852045,"table_sim":0.5159531035642008,"col_score":0}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"projects","reason":"max_tables"},{"table":"requisition_lines","reason":"max_tables"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":21,"total_retrieval_latency_ms":27,"sql_generated":"SELECT fa.asset_id AS asset_id, fa.name AS name, fa.purchase_cost AS purchase_cost FROM fixed_assets fa;","tables_used_in_sql":[],"explain_result":"success","rows_returned":500,"total_latency_ms":685}
{"timestamp":"2026-01-29T19:45:23.259Z","query_id":"263048d2-73ac-40ae-b605-4e7f74adcd6e","question":"What are all the available leave types?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["leave_types","leave_requests","maintenance_types","account_types","employment_history","benefit_types","employees","positions","employee_benefits","asset_maintenance","chart_of_accounts","sales_territories"],"tables_from_table_retrieval":15,"tables_from_column_only":9,"tables_from_fk_expansion":2,"table_scores":[{"table":"leave_types","similarity":0.7907961003152969},{"table":"leave_requests","similarity":0.7143778015997992},{"table":"maintenance_types","similarity":0.6481400096068088},{"table":"benefit_types","similarity":0.6269933285396667},{"table":"account_types","similarity":0.6192881819056906},{"table":"positions","similarity":0.5752929625327803},{"table":"employee_benefits","similarity":0.5713679218642078},{"table":"employment_history","similarity":0.5660594097075526},{"table":"employees","similarity":0.5660053394491918},{"table":"asset_maintenance","similarity":0.5543920873977978},{"table":"chart_of_accounts","similarity":0.5502530849823464},{"table":"sales_territories","similarity":0.5497748598255436},{"table":"sales_opportunities","similarity":0.5460540206653771},{"table":"training_courses","similarity":0.5421204605814522},{"table":"asset_categories","similarity":0.537612536880944}],"column_hits_per_table":{"leave_types":5,"leave_requests":10,"maintenance_types":5,"benefit_types":5,"employment_history":2,"account_types":4,"employee_training":1,"asset_maintenance":2,"timesheets":1,"sales_orders":1,"employee_benefits":2,"positions":2,"fixed_assets":1,"employees":2,"vendor_invoices":1,"sales_opportunities":1,"purchase_requisitions":1,"stock_transfers":1,"inventory_adjustments":1,"sales_quotes":1,"sales_territories":1},"top_columns_per_table":{"leave_types":[{"column":"days_allowed","similarity":0.7686500345965878},{"column":"is_paid","similarity":0.7623841534239336},{"column":"name","similarity":0.7406312254921097}],"leave_requests":[{"column":"status","similarity":0.7444703766728187},{"column":"leave_type_id","similarity":0.7158957943298758},{"column":"days_requested","similarity":0.6957721236459536}],"maintenance_types":[{"column":"description","similarity":0.6377767194823566},{"column":"name","similarity":0.631136316452077},{"column":"type_id","similarity":0.6167514426103488}],"benefit_types":[{"column":"is_active","similarity":0.6269473121389368},{"column":"name","similarity":0.6220834198328969},{"column":"description","similarity":0.6122108465746717}],"employment_history":[{"column":"reason_for_leaving","similarity":0.6243515506921076},{"column":"position","similarity":0.5714253900200132}],"account_types":[{"column":"normal_balance","similarity":0.6149563569549518},{"column":"category","similarity":0.6045207339251893},{"column":"name","similarity":0.5905785819022606}],"employee_training":[{"column":"status","similarity":0.6084208038692348}],"asset_maintenance":[{"column":"status","similarity":0.5961072885143408},{"column":"maintenance_type_id","similarity":0.5889166627027309}],"timesheets":[{"column":"status","similarity":0.5896684755702837}],"sales_orders":[{"column":"status","similarity":0.5833814673451871}],"employee_benefits":[{"column":"benefit_type_id","similarity":0.5820988681778586},{"column":"coverage_level","similarity":0.563402375606914}],"positions":[{"column":"is_active","similarity":0.5815402830311333},{"column":"title","similarity":0.5780125325936805}],"fixed_assets":[{"column":"status","similarity":0.5779508245109969}],"employees":[{"column":"termination_date","similarity":0.5720522989676154},{"column":"gender","similarity":0.5661719915149735}],"vendor_invoices":[{"column":"status","similarity":0.5694778387064632}],"sales_opportunities":[{"column":"source","similarity":0.5693960477309942}],"purchase_requisitions":[{"column":"status","similarity":0.5692240149966709}],"stock_transfers":[{"column":"status","similarity":0.5691483787100361}],"inventory_adjustments":[{"column":"status","similarity":0.566032834035236}],"sales_quotes":[{"column":"status","similarity":0.5648321255084394}],"sales_territories":[{"column":"name","similarity":0.5628683783439146}]},"fused_scores":[{"table":"leave_types","fused":0.9271541516976758,"table_sim":0.7907961003152969,"col_score":1.131691228771244},{"table":"leave_requests","fused":0.8425926840869853,"table_sim":0.7143778015997992,"col_score":1.0349150078177645},{"table":"maintenance_types","fused":0.7488967046422195,"table_sim":0.6481400096068088,"col_score":0.9000317471953356},{"table":"account_types","fused":0.738459598710433,"table_sim":0.6192881819056906,"col_score":0.9172167239175464},{"table":"employment_history","fused":0.7036613441053773,"table_sim":0.5660594097075526,"col_score":0.9100642457021142},{"table":"benefit_types","fused":0.6888048802259811,"table_sim":0.6269933285396667,"col_score":0.7815222077554526},{"table":"employees","fused":0.6816585215595561,"table_sim":0.5660053394491918,"col_score":0.8551382947251023},{"table":"positions","fused":0.657796430181499,"table_sim":0.5752929625327803,"col_score":0.7815516316545771},{"table":"employee_benefits","fused":0.6496755449061905,"table_sim":0.5713679218642078,"col_score":0.7671369794691645},{"table":"asset_maintenance","fused":0.5819936260010764,"table_sim":0.5543920873977978,"col_score":0.6233959339059943},{"table":"sales_opportunities","fused":0.5553908314916239,"table_sim":0.5460540206653771,"col_score":0.5693960477309942},{"table":"sales_territories","fused":0.4874680618316223,"table_sim":0.5497748598255436,"col_score":0.3940078648407402},{"table":"chart_of_accounts","fused":0.3301518509894078,"table_sim":0.5502530849823464,"col_score":0},{"table":"training_courses","fused":0.32527227634887135,"table_sim":0.5421204605814522,"col_score":0},{"table":"asset_categories","fused":0.3225675221285664,"table_sim":0.537612536880944,"col_score":0}],"fk_expansion_candidates":32,"fk_expansion_added":2,"fk_expansion_blocked_count":29,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":42,"total_retrieval_latency_ms":48,"sql_generated":"SELECT lt.name FROM leave_types AS lt;","tables_used_in_sql":[],"explain_result":"success","rows_returned":8,"total_latency_ms":418}
{"timestamp":"2026-01-29T19:45:23.677Z","query_id":"0c65c542-edb4-4886-af68-3e8bf856c16d","question":"List all training courses that are mandatory","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["training_courses","employee_training","certifications","employee_certifications","leave_types","maintenance_types","purchase_requisitions","emergency_contacts","units_of_measure","business_units","asset_maintenance","employees"],"tables_from_table_retrieval":15,"tables_from_column_only":12,"tables_from_fk_expansion":2,"table_scores":[{"table":"training_courses","similarity":0.7832587829851695},{"table":"employee_training","similarity":0.6570057454586046},{"table":"certifications","similarity":0.5900939338505992},{"table":"employee_certifications","similarity":0.5760162077924663},{"table":"maintenance_types","similarity":0.49281971341629327},{"table":"leave_types","similarity":0.49016105575765045},{"table":"emergency_contacts","similarity":0.4738555676585048},{"table":"account_types","similarity":0.47279576060367634},{"table":"business_units","similarity":0.47237885502957644},{"table":"units_of_measure","similarity":0.46939263092633876},{"table":"asset_maintenance","similarity":0.4667394047579505},{"table":"purchase_requisitions","similarity":0.4654660756610647},{"table":"employees","similarity":0.4617701057229451},{"table":"positions","similarity":0.46160419508462314},{"table":"countries","similarity":0.46045896330476366}],"column_hits_per_table":{"training_courses":7,"employee_training":7,"certifications":5,"employee_certifications":6,"leave_types":3,"sales_orders":1,"purchase_requisitions":2,"maintenance_types":4,"emergency_contacts":1,"project_milestones":2,"benefit_types":1,"business_units":1,"requisition_lines":1,"product_suppliers":1,"project_resources":1,"project_tasks":1,"reorder_rules":1,"units_of_measure":1,"projects":1,"employee_benefits":1,"inventory_levels":1,"vendor_contacts":1},"top_columns_per_table":{"training_courses":[{"column":"is_mandatory","similarity":0.8183425520777443},{"column":"description","similarity":0.7152546556290251},{"column":"cost","similarity":0.703103057924051}],"employee_training":[{"column":"course_id","similarity":0.6726632190515707},{"column":"scheduled_date","similarity":0.6406033902015907},{"column":"completion_date","similarity":0.6314212095563025}],"certifications":[{"column":"description","similarity":0.6043807811754061},{"column":"issuing_body","similarity":0.5890949692558212},{"column":"validity_years","similarity":0.5683544613271275}],"employee_certifications":[{"column":"certification_id","similarity":0.5641935913194706},{"column":"cert_id","similarity":0.5530637459134944},{"column":"certificate_number","similarity":0.5527992455216449}],"leave_types":[{"column":"requires_approval","similarity":0.5414363431590249},{"column":"is_paid","similarity":0.5069584623421746},{"column":"days_allowed","similarity":0.48500668213425}],"sales_orders":[{"column":"required_date","similarity":0.522537932147881}],"purchase_requisitions":[{"column":"required_date","similarity":0.5198974320372106},{"column":"notes","similarity":0.48367699787532503}],"maintenance_types":[{"column":"description","similarity":0.515090472968373},{"column":"frequency_months","similarity":0.49330482595376823},{"column":"estimated_cost","similarity":0.49293759341419907}],"emergency_contacts":[{"column":"is_primary","similarity":0.5039578758679507}],"project_milestones":[{"column":"is_billable","similarity":0.49776557203974603},{"column":"description","similarity":0.4804638717229941}],"benefit_types":[{"column":"is_active","similarity":0.494470742028722}],"business_units":[{"column":"is_active","similarity":0.4928108442926942}],"requisition_lines":[{"column":"quantity","similarity":0.4922188905326943}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.48865331705843196}],"project_resources":[{"column":"hourly_rate","similarity":0.4852972701989151}],"project_tasks":[{"column":"priority","similarity":0.4836687970545305}],"reorder_rules":[{"column":"max_quantity","similarity":0.4829698043754158}],"units_of_measure":[{"column":"abbreviation","similarity":0.4823545888550096}],"projects":[{"column":"priority","similarity":0.48215945015056816}],"employee_benefits":[{"column":"coverage_level","similarity":0.48183762318937706}],"inventory_levels":[{"column":"quantity_reserved","similarity":0.48177652205374843}],"vendor_contacts":[{"column":"is_primary","similarity":0.4800372811419217}]},"fused_scores":[{"table":"training_courses","fused":0.9379129022070096,"table_sim":0.7832587829851695,"col_score":1.1698940810397698},{"table":"employee_training","fused":0.7767290452670595,"table_sim":0.6570057454586046,"col_score":0.956313994979742},{"table":"certifications","fused":0.7033652402781134,"table_sim":0.5900939338505992,"col_score":0.8732721999193849},{"table":"employee_certifications","fused":0.6746819403171497,"table_sim":0.5760162077924663,"col_score":0.8226805391041746},{"table":"leave_types","fused":0.6076725071450502,"table_sim":0.49016105575765045,"col_score":0.7839396842261499},{"table":"maintenance_types","fused":0.591601277114123,"table_sim":0.49281971341629327,"col_score":0.7397736226608678},{"table":"purchase_requisitions","fused":0.5549533979140686,"table_sim":0.4654660756610647,"col_score":0.6891843812935744},{"table":"emergency_contacts","fused":0.48589649094228315,"table_sim":0.4738555676585048,"col_score":0.5039578758679507},{"table":"units_of_measure","fused":0.47457741409780707,"table_sim":0.46939263092633876,"col_score":0.4823545888550096},{"table":"business_units","fused":0.42141434941970024,"table_sim":0.47237885502957644,"col_score":0.3449675910048859},{"table":"account_types","fused":0.2836774563622058,"table_sim":0.47279576060367634,"col_score":0},{"table":"asset_maintenance","fused":0.2800436428547703,"table_sim":0.4667394047579505,"col_score":0},{"table":"employees","fused":0.27706206343376705,"table_sim":0.4617701057229451,"col_score":0},{"table":"positions","fused":0.27696251705077385,"table_sim":0.46160419508462314,"col_score":0},{"table":"countries","fused":0.2762753779828582,"table_sim":0.46045896330476366,"col_score":0}],"fk_expansion_candidates":7,"fk_expansion_added":2,"fk_expansion_blocked_count":5,"fk_expansion_blocked":[{"table":"departments","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":32,"total_retrieval_latency_ms":37,"sql_generated":"SELECT tc.name AS course_name, tc.duration_hours, tc.cost, tc.is_active FROM training_courses tc WHERE tc.is_mandatory = TRUE;","tables_used_in_sql":[],"explain_result":"success","rows_returned":4,"total_latency_ms":806}
{"timestamp":"2026-01-29T19:45:24.484Z","query_id":"710c40f7-6f96-416d-9e5b-aacdc653c839","question":"What are the different opportunity stages?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["opportunity_stages","sales_opportunities","project_phases","project_tasks","sales_quotes","positions","employment_history","vendor_contacts","task_assignments","benefit_types","projects","timesheet_entries"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"opportunity_stages","similarity":0.8221357699980866},{"table":"sales_opportunities","similarity":0.705452578214936},{"table":"project_phases","similarity":0.5910011427333453},{"table":"project_tasks","similarity":0.5856436723604402},{"table":"positions","similarity":0.5399052196547368},{"table":"asset_categories","similarity":0.5283525308586682},{"table":"benefit_types","similarity":0.5259100173290491},{"table":"project_milestones","similarity":0.5171558130474864},{"table":"inventory_levels","similarity":0.5163777584176084},{"table":"vendor_contacts","similarity":0.5161594726009905},{"table":"task_assignments","similarity":0.5159234125463281},{"table":"sales_quotes","similarity":0.5145326653191699},{"table":"timesheet_entries","similarity":0.5109343321958333},{"table":"employment_history","similarity":0.5109304894618054},{"table":"vendors","similarity":0.509941756909679}],"column_hits_per_table":{"opportunity_stages":6,"sales_opportunities":11,"project_phases":8,"sales_quotes":2,"project_tasks":4,"projects":3,"positions":1,"employment_history":1,"stock_transfers":1,"vendor_invoices":1,"vendor_contacts":1,"sales_orders":1,"performance_reviews":1,"purchase_requisitions":1,"task_assignments":1,"employee_training":1,"timesheets":1,"project_milestones":1,"journal_entries":1,"purchase_orders":1,"benefit_types":1,"warehouse_locations":1},"top_columns_per_table":{"opportunity_stages":[{"column":"name","similarity":0.8022669439071034},{"column":"sequence","similarity":0.7826323931295351},{"column":"probability","similarity":0.7818078987294276}],"sales_opportunities":[{"column":"stage_id","similarity":0.7199852660162092},{"column":"source","similarity":0.6694163213892567},{"column":"name","similarity":0.6490089853551896}],"project_phases":[{"column":"status","similarity":0.6164785012384887},{"column":"start_date","similarity":0.6071014985723452},{"column":"description","similarity":0.599519601414315}],"sales_quotes":[{"column":"opportunity_id","similarity":0.613132018194432},{"column":"status","similarity":0.5429687740505206}],"project_tasks":[{"column":"priority","similarity":0.5861525983204229},{"column":"phase_id","similarity":0.5727236988248975},{"column":"status","similarity":0.5679605460087266}],"projects":[{"column":"priority","similarity":0.5824136089158493},{"column":"status","similarity":0.5614455668233992},{"column":"start_date","similarity":0.5455112148719066}],"positions":[{"column":"title","similarity":0.570845518096384}],"employment_history":[{"column":"position","similarity":0.5638653453378809}],"stock_transfers":[{"column":"status","similarity":0.5612083430408489}],"vendor_invoices":[{"column":"status","similarity":0.5583699388667535}],"vendor_contacts":[{"column":"title","similarity":0.555419734524806}],"sales_orders":[{"column":"status","similarity":0.5534662786155742}],"performance_reviews":[{"column":"review_period_start","similarity":0.5523942655144478}],"purchase_requisitions":[{"column":"status","similarity":0.5523731471352765}],"task_assignments":[{"column":"role","similarity":0.5518232752608079}],"employee_training":[{"column":"status","similarity":0.5505061546622828}],"timesheets":[{"column":"status","similarity":0.5501145087173305}],"project_milestones":[{"column":"name","similarity":0.5480794501954276}],"journal_entries":[{"column":"status","similarity":0.5450907789109756}],"purchase_orders":[{"column":"status","similarity":0.5448321917989046}],"benefit_types":[{"column":"name","similarity":0.5417057889558006}],"warehouse_locations":[{"column":"aisle","similarity":0.541280937948999}]},"fused_scores":[{"table":"opportunity_stages","fused":0.9626959989965516,"table_sim":0.8221357699980866,"col_score":1.1735363424942489},{"table":"sales_opportunities","fused":0.8201333553810458,"table_sim":0.705452578214936,"col_score":0.9921545211302105},{"table":"project_phases","fused":0.7145727552551784,"table_sim":0.5910011427333453,"col_score":0.899930174037928},{"table":"project_tasks","fused":0.6963386277407597,"table_sim":0.5856436723604402,"col_score":0.8623810608112388},{"table":"sales_quotes","fused":0.5564121926530157,"table_sim":0.5145326653191699,"col_score":0.6192314836537846},{"table":"positions","fused":0.5522813390313956,"table_sim":0.5399052196547368,"col_score":0.570845518096384},{"table":"employment_history","fused":0.5321044318122357,"table_sim":0.5109304894618054,"col_score":0.5638653453378809},{"table":"vendor_contacts","fused":0.5318635773705167,"table_sim":0.5161594726009905,"col_score":0.555419734524806},{"table":"task_assignments","fused":0.53028335763212,"table_sim":0.5159234125463281,"col_score":0.5518232752608079},{"table":"benefit_types","fused":0.46722363130505357,"table_sim":0.5259100173290491,"col_score":0.3791940522690604},{"table":"project_milestones","fused":0.46375573388321156,"table_sim":0.5171558130474864,"col_score":0.3836556151367993},{"table":"projects","fused":0.34206768654072106,"table_sim":0,"col_score":0.8551692163518025},{"table":"asset_categories","fused":0.3170115185152009,"table_sim":0.5283525308586682,"col_score":0},{"table":"inventory_levels","fused":0.309826655050565,"table_sim":0.5163777584176084,"col_score":0},{"table":"timesheet_entries","fused":0.30656059931749996,"table_sim":0.5109343321958333,"col_score":0}],"fk_expansion_candidates":9,"fk_expansion_added":2,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"vendors","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":45,"total_retrieval_latency_ms":51,"sql_generated":"SELECT o.name AS stage_name FROM sales_opportunities s JOIN opportunity_stages o ON s.stage_id = o.stage_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":500,"total_latency_ms":673}
{"timestamp":"2026-01-29T19:45:25.157Z","query_id":"92da2982-1985-42ca-8ca1-7635537a7884","question":"List all countries in the system","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["countries","states_provinces","currencies","tax_rates","sales_regions","fiscal_periods","certifications","cities","opportunity_stages","bank_accounts","bank_transactions","chart_of_accounts"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"countries","similarity":0.7008865097920517},{"table":"states_provinces","similarity":0.6734638308582259},{"table":"tax_rates","similarity":0.6116670532927957},{"table":"sales_territories","similarity":0.5947794602061558},{"table":"currencies","similarity":0.5771716778997639},{"table":"sales_regions","similarity":0.5687569498363646},{"table":"cities","similarity":0.5643183199830137},{"table":"bank_accounts","similarity":0.5493286779600007},{"table":"customers","similarity":0.5473386397932745},{"table":"fiscal_periods","similarity":0.5354796670765565},{"table":"budgets","similarity":0.5305192103519173},{"table":"units_of_measure","similarity":0.530053961527814},{"table":"chart_of_accounts","similarity":0.5269687220084575},{"table":"certifications","similarity":0.5251628602461479},{"table":"opportunity_stages","similarity":0.516133383734989}],"column_hits_per_table":{"countries":4,"states_provinces":4,"tax_rates":3,"currencies":5,"sales_regions":4,"sales_territories":3,"cities":2,"departments":2,"fiscal_periods":4,"bank_accounts":2,"certifications":2,"opportunity_stages":3,"customers":1,"bank_transactions":2,"purchase_orders":1,"employee_certifications":1,"depreciation_schedules":1,"purchase_requisitions":1,"budgets":2,"sales_orders":1,"chart_of_accounts":1,"units_of_measure":1},"top_columns_per_table":{"countries":[{"column":"iso_code","similarity":0.7094552565742085},{"column":"country_id","similarity":0.7034508481088982},{"column":"phone_code","similarity":0.6971526730933061}],"states_provinces":[{"column":"country_id","similarity":0.6585897097894581},{"column":"abbreviation","similarity":0.6227531297693802},{"column":"state_id","similarity":0.615041526003746}],"tax_rates":[{"column":"country_id","similarity":0.6476800041509223},{"column":"tax_type","similarity":0.5346619654310693},{"column":"is_active","similarity":0.5310671397615585}],"currencies":[{"column":"symbol","similarity":0.6017932772414536},{"column":"code","similarity":0.5922775211340294},{"column":"exchange_rate","similarity":0.5871891787003841}],"sales_regions":[{"column":"region_id","similarity":0.5979708903249663},{"column":"target_revenue","similarity":0.5885873954148771},{"column":"name","similarity":0.5800101337735474}],"sales_territories":[{"column":"region_id","similarity":0.5886237086003984},{"column":"territory_id","similarity":0.5882437418814783},{"column":"name","similarity":0.5535958855949109}],"cities":[{"column":"state_id","similarity":0.5632563689816771},{"column":"postal_code","similarity":0.5457995889050259}],"departments":[{"column":"budget","similarity":0.5599421293881339},{"column":"department_id","similarity":0.5287387143275804}],"fiscal_periods":[{"column":"period_id","similarity":0.5574490774711056},{"column":"period_number","similarity":0.5426208530973385},{"column":"is_closed","similarity":0.5359946713020163}],"bank_accounts":[{"column":"currency_id","similarity":0.5528259934931027},{"column":"account_number","similarity":0.527840068757793}],"certifications":[{"column":"issuing_body","similarity":0.5492583443931628},{"column":"validity_years","similarity":0.5292809185879692}],"opportunity_stages":[{"column":"is_won","similarity":0.5445577792640248},{"column":"stage_id","similarity":0.5312529758785186},{"column":"is_closed","similarity":0.5279107666014274}],"customers":[{"column":"currency_id","similarity":0.5418522210198313}],"bank_transactions":[{"column":"reconciled","similarity":0.5412872186561721},{"column":"reference","similarity":0.5335321048989391}],"purchase_orders":[{"column":"total","similarity":0.5378236017835311}],"employee_certifications":[{"column":"certificate_number","similarity":0.5358775279065638}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5330783009686003}],"purchase_requisitions":[{"column":"requisition_number","similarity":0.5326439676865584}],"budgets":[{"column":"total_amount","similarity":0.5320906832758429},{"column":"status","similarity":0.5283826109384306}],"sales_orders":[{"column":"total","similarity":0.5319665810732878}],"chart_of_accounts":[{"column":"account_number","similarity":0.5295972929492838}],"units_of_measure":[{"column":"abbreviation","similarity":0.5291537257765798}]},"fused_scores":[{"table":"countries","fused":0.8437445431235756,"table_sim":0.7008865097920517,"col_score":1.0580315931208615},{"table":"states_provinces","fused":0.7453821097932118,"table_sim":0.6734638308582259,"col_score":0.8532595281956905},{"table":"currencies","fused":0.7054758218632456,"table_sim":0.5771716778997639,"col_score":0.8979320378084683},{"table":"tax_rates","fused":0.6715402187292342,"table_sim":0.6116670532927957,"col_score":0.761349966883892},{"table":"sales_regions","fused":0.6604050527132649,"table_sim":0.5687569498363646,"col_score":0.7978772070286153},{"table":"fiscal_periods","fused":0.6455350757452726,"table_sim":0.5354796670765565,"col_score":0.8106181887483467},{"table":"certifications","fused":0.6406572376225477,"table_sim":0.5251628602461479,"col_score":0.8138988036871474},{"table":"cities","fused":0.6357667192092533,"table_sim":0.5643183199830137,"col_score":0.7429393180486128},{"table":"opportunity_stages","fused":0.6330852952668888,"table_sim":0.516133383734989,"col_score":0.8085131625647386},{"table":"bank_accounts","fused":0.618128873368152,"table_sim":0.5493286779600007,"col_score":0.7213291664803789},{"table":"budgets","fused":0.6051213650528678,"table_sim":0.5305192103519173,"col_score":0.7170245971042936},{"table":"sales_territories","fused":0.6040364383952119,"table_sim":0.5947794602061558,"col_score":0.6179219056787962},{"table":"units_of_measure","fused":0.5296938672273204,"table_sim":0.530053961527814,"col_score":0.5291537257765798},{"table":"chart_of_accounts","fused":0.528020150384788,"table_sim":0.5269687220084575,"col_score":0.5295972929492838},{"table":"customers","fused":0.4801218057615174,"table_sim":0.5473386397932745,"col_score":0.3792965547138819}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":8,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"customers","reason":"max_tables"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"max_tables"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_territories","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":45,"total_retrieval_latency_ms":50,"sql_generated":"SELECT c.name AS country_name FROM countries c;","tables_used_in_sql":[],"explain_result":"success","rows_returned":10,"total_latency_ms":361}
{"timestamp":"2026-01-29T19:45:25.518Z","query_id":"11622c50-b5ac-49bd-a038-d25f0a47ec4a","question":"How many departments are there?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["departments","inventory_levels","warehouse_locations","employees","asset_categories","states_provinces","sales_territories","business_units","sales_regions","goods_receipts","cost_centers","budgets"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"departments","similarity":0.6407681888721862},{"table":"positions","similarity":0.5909863911053447},{"table":"cost_centers","similarity":0.574249226454042},{"table":"inventory_levels","similarity":0.5635818909554858},{"table":"budgets","similarity":0.5602507290061229},{"table":"sales_territories","similarity":0.5569437466660422},{"table":"employees","similarity":0.5540635075766074},{"table":"asset_categories","similarity":0.5524861703308546},{"table":"sales_regions","similarity":0.5484119711938432},{"table":"business_units","similarity":0.5474055608256236},{"table":"warehouse_locations","similarity":0.5405733104094866},{"table":"warehouses","similarity":0.5397302827647444},{"table":"receipt_lines","similarity":0.5366200658119428},{"table":"states_provinces","similarity":0.5358430398633552},{"table":"goods_receipts","similarity":0.5302924907564094}],"column_hits_per_table":{"departments":6,"positions":1,"budgets":1,"purchase_requisitions":1,"cost_centers":1,"employees":3,"warehouse_locations":5,"inventory_levels":5,"business_units":2,"sales_orders":1,"countries":2,"receipt_lines":1,"sales_territories":2,"states_provinces":2,"asset_categories":4,"employee_certifications":1,"goods_receipts":1,"inventory_transactions":1,"product_categories":2,"asset_locations":1,"sales_regions":2,"journal_entries":1,"warehouses":1,"chart_of_accounts":1,"account_types":1,"fixed_assets":1},"top_columns_per_table":{"departments":[{"column":"name","similarity":0.6941972522780406},{"column":"department_id","similarity":0.6602069080482118},{"column":"budget","similarity":0.6469841378823648}],"positions":[{"column":"department_id","similarity":0.6231663015950821}],"budgets":[{"column":"department_id","similarity":0.593281818376156}],"purchase_requisitions":[{"column":"department_id","similarity":0.5925097694857517}],"cost_centers":[{"column":"department_id","similarity":0.5899520016540825}],"employees":[{"column":"department_id","similarity":0.5869672961244217},{"column":"employee_number","similarity":0.5336637347597826},{"column":"phone","similarity":0.5302169880417581}],"warehouse_locations":[{"column":"capacity","similarity":0.5585006436523671},{"column":"aisle","similarity":0.5402403475702542},{"column":"bin","similarity":0.5395965062528575}],"inventory_levels":[{"column":"quantity_available","similarity":0.5536773605505522},{"column":"location_id","similarity":0.5478183684084642},{"column":"warehouse_id","similarity":0.5386657375761456}],"business_units":[{"column":"is_active","similarity":0.5483697953425726},{"column":"name","similarity":0.5312957563157671}],"sales_orders":[{"column":"order_number","similarity":0.5443598297457732}],"countries":[{"column":"name","similarity":0.5423505833277624},{"column":"iso_code","similarity":0.5306770884511268}],"receipt_lines":[{"column":"location_id","similarity":0.541901303657067}],"sales_territories":[{"column":"territory_id","similarity":0.5409487686207964},{"column":"name","similarity":0.5343562590819858}],"states_provinces":[{"column":"abbreviation","similarity":0.5407121012597066},{"column":"name","similarity":0.531882867182094}],"asset_categories":[{"column":"category_id","similarity":0.5392003897260558},{"column":"depreciation_method","similarity":0.5319818505729739},{"column":"name","similarity":0.5291238140761095}],"employee_certifications":[{"column":"certificate_number","similarity":0.5373080593402337}],"goods_receipts":[{"column":"receipt_number","similarity":0.5364792634452933}],"inventory_transactions":[{"column":"location_id","similarity":0.5361046916920993}],"product_categories":[{"column":"is_active","similarity":0.5347372390015604},{"column":"category_id","similarity":0.5276640423111497}],"asset_locations":[{"column":"room","similarity":0.5344524415418452}],"sales_regions":[{"column":"manager_id","similarity":0.5307027431815718},{"column":"name","similarity":0.5263871057906565}],"journal_entries":[{"column":"entry_number","similarity":0.5287182520724618}],"warehouses":[{"column":"is_active","similarity":0.5286972556869094}],"chart_of_accounts":[{"column":"account_number","similarity":0.5279529362943834}],"account_types":[{"column":"category","similarity":0.526499449669073}],"fixed_assets":[{"column":"category_id","similarity":0.5261865346648418}]},"fused_scores":[{"table":"departments","fused":0.7404421837951833,"table_sim":0.6407681888721862,"col_score":0.889953176179679},{"table":"inventory_levels","fused":0.6669469201400264,"table_sim":0.5635818909554858,"col_score":0.8219944639168373},{"table":"warehouse_locations","fused":0.6557923132206898,"table_sim":0.5405733104094866,"col_score":0.8286208174374942},{"table":"employees","fused":0.651946996058229,"table_sim":0.5540635075766074,"col_score":0.7987722287806616},{"table":"asset_categories","fused":0.6495296324944673,"table_sim":0.5524861703308546,"col_score":0.7950948257398862},{"table":"states_provinces","fused":0.612254265827389,"table_sim":0.5358430398633552,"col_score":0.7268711047734395},{"table":"sales_territories","fused":0.5604417794849264,"table_sim":0.5569437466660422,"col_score":0.5656888287132525},{"table":"business_units","fused":0.5563682850755018,"table_sim":0.5474055608256236,"col_score":0.5698123714503193},{"table":"sales_regions","fused":0.5513381456178379,"table_sim":0.5484119711938432,"col_score":0.5557274072538301},{"table":"goods_receipts","fused":0.532767199831963,"table_sim":0.5302924907564094,"col_score":0.5364792634452933},{"table":"positions","fused":0.5290783991098298,"table_sim":0.5909863911053447,"col_score":0.43621641111655746},{"table":"cost_centers","fused":0.5097360963355683,"table_sim":0.574249226454042,"col_score":0.4129664011578577},{"table":"budgets","fused":0.5022693465489974,"table_sim":0.5602507290061229,"col_score":0.4152972728633092},{"table":"receipt_lines","fused":0.4737044045111444,"table_sim":0.5366200658119428,"col_score":0.3793309125599469},{"table":"warehouses","fused":0.47187340125118127,"table_sim":0.5397302827647444,"col_score":0.37008807898083657}],"fk_expansion_candidates":36,"fk_expansion_added":2,"fk_expansion_blocked_count":28,"fk_expansion_blocked":[{"table":"employment_history","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"warehouses","reason":"max_tables"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"countries","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"max_tables"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"cities","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"receipt_lines","reason":"max_tables"},{"table":"products","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":17,"total_retrieval_latency_ms":23,"sql_generated":"SELECT COUNT(*) FROM departments;","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":323}
{"timestamp":"2026-01-29T19:45:25.841Z","query_id":"a2c54ed3-67b3-4fab-bf2d-a6b5b663fd09","question":"List all units of measure","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["units_of_measure","products","requisition_lines","currencies","sales_orders","adjustment_lines","business_units","sales_regions","asset_categories","states_provinces","countries","inventory_adjustments"],"tables_from_table_retrieval":15,"tables_from_column_only":13,"tables_from_fk_expansion":2,"table_scores":[{"table":"units_of_measure","similarity":0.8089934324181249},{"table":"products","similarity":0.6263866411837252},{"table":"business_units","similarity":0.6082946070315649},{"table":"currencies","similarity":0.5785280842826401},{"table":"sales_regions","similarity":0.5709271404332362},{"table":"sales_territories","similarity":0.5693966691739235},{"table":"countries","similarity":0.5676275319870521},{"table":"asset_categories","similarity":0.5659467183764512},{"table":"states_provinces","similarity":0.5592331745887797},{"table":"requisition_lines","similarity":0.5583095777203371},{"table":"certifications","similarity":0.5559645378048772},{"table":"tax_rates","similarity":0.5510295392649189},{"table":"adjustment_lines","similarity":0.5399153135407744},{"table":"sales_orders","similarity":0.5334992405089671},{"table":"inventory_adjustments","similarity":0.5331747868814581}],"column_hits_per_table":{"units_of_measure":5,"products":3,"business_units":5,"requisition_lines":3,"purchase_orders":3,"sales_orders":3,"currencies":3,"product_suppliers":1,"departments":1,"vendor_invoice_lines":1,"sales_regions":1,"inventory_transactions":1,"order_lines":3,"po_lines":1,"quote_lines":3,"adjustment_lines":3,"inventory_levels":3,"asset_categories":1,"tax_rates":1,"budgets":1,"sales_quotes":1,"transfer_lines":1,"project_milestones":1,"states_provinces":1},"top_columns_per_table":{"units_of_measure":[{"column":"abbreviation","similarity":0.7908596870464625},{"column":"conversion_factor","similarity":0.7888286633130566},{"column":"base_uom_id","similarity":0.7640196738182461}],"products":[{"column":"uom_id","similarity":0.7066301376353167},{"column":"unit_cost","similarity":0.645047938032986},{"column":"weight","similarity":0.5991041081015385}],"business_units":[{"column":"unit_id","similarity":0.641535708551069},{"column":"name","similarity":0.619264219383008},{"column":"parent_unit_id","similarity":0.6183248611809289}],"requisition_lines":[{"column":"estimated_unit_cost","similarity":0.6408702119064383},{"column":"quantity","similarity":0.60563150403585},{"column":"estimated_total","similarity":0.6022013259478313}],"purchase_orders":[{"column":"total","similarity":0.6185750233926293},{"column":"tax_amount","similarity":0.6044881564028687},{"column":"subtotal","similarity":0.5921825679677115}],"sales_orders":[{"column":"total","similarity":0.6151081698617773},{"column":"tax_amount","similarity":0.5989576895110381},{"column":"subtotal","similarity":0.5899469028603763}],"currencies":[{"column":"exchange_rate","similarity":0.6121012209509241},{"column":"code","similarity":0.5831850755185266},{"column":"symbol","similarity":0.5817000993637726}],"product_suppliers":[{"column":"unit_cost","similarity":0.6086576309378499}],"departments":[{"column":"budget","similarity":0.6073768063072543}],"vendor_invoice_lines":[{"column":"unit_cost","similarity":0.6069149029756971}],"sales_regions":[{"column":"target_revenue","similarity":0.6030903855357957}],"inventory_transactions":[{"column":"quantity","similarity":0.6014447625236534}],"order_lines":[{"column":"unit_price","similarity":0.6010852874698508},{"column":"line_total","similarity":0.5898125509820846},{"column":"quantity","similarity":0.5808820575005385}],"po_lines":[{"column":"unit_cost","similarity":0.5994543665297027}],"quote_lines":[{"column":"unit_price","similarity":0.5969998512857845},{"column":"quantity","similarity":0.5845299298536462},{"column":"line_total","similarity":0.5817307536871642}],"adjustment_lines":[{"column":"quantity_before","similarity":0.59599905061019},{"column":"quantity_change","similarity":0.5898155994713205},{"column":"quantity_after","similarity":0.5894162707009223}],"inventory_levels":[{"column":"quantity_available","similarity":0.5953692846871987},{"column":"quantity_reserved","similarity":0.5953692437147827},{"column":"quantity_on_hand","similarity":0.5833133095093345}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.5917112785912468}],"tax_rates":[{"column":"rate","similarity":0.5877911896124333}],"budgets":[{"column":"total_amount","similarity":0.5860142614107526}],"sales_quotes":[{"column":"total","similarity":0.5855133877859668}],"transfer_lines":[{"column":"quantity_transferred","similarity":0.5854636892263618}],"project_milestones":[{"column":"amount","similarity":0.5846729861578354}],"states_provinces":[{"column":"abbreviation","similarity":0.5831025103571312}]},"fused_scores":[{"table":"units_of_measure","fused":0.9595056669320713,"table_sim":0.8089934324181249,"col_score":1.1852740187029909},{"table":"products","fused":0.7536719815437372,"table_sim":0.6263866411837252,"col_score":0.9445999920837552},{"table":"requisition_lines","fused":0.7124601322019475,"table_sim":0.5583095777203371,"col_score":0.9436859639243633},{"table":"currencies","fused":0.708594354053659,"table_sim":0.5785280842826401,"col_score":0.9036937587101874},{"table":"sales_orders","fused":0.6859343501522988,"table_sim":0.5334992405089671,"col_score":0.9145870146172963},{"table":"adjustment_lines","fused":0.6803119282628047,"table_sim":0.5399153135407744,"col_score":0.8909068503458502},{"table":"business_units","fused":0.6313037533268594,"table_sim":0.6082946070315649,"col_score":0.6658174727698011},{"table":"sales_regions","fused":0.5837924384742601,"table_sim":0.5709271404332362,"col_score":0.6030903855357957},{"table":"asset_categories","fused":0.5762525424623695,"table_sim":0.5659467183764512,"col_score":0.5917112785912468},{"table":"states_provinces","fused":0.5687809088961203,"table_sim":0.5592331745887797,"col_score":0.5831025103571312},{"table":"tax_rates","fused":0.5657341994039247,"table_sim":0.5510295392649189,"col_score":0.5877911896124333},{"table":"purchase_orders","fused":0.36832764063762546,"table_sim":0,"col_score":0.9208191015940637},{"table":"order_lines","fused":0.3583966251843573,"table_sim":0,"col_score":0.8959915629608931},{"table":"inventory_levels","fused":0.3572215626178361,"table_sim":0,"col_score":0.8930539065445902},{"table":"quote_lines","fused":0.35570592648504307,"table_sim":0,"col_score":0.8892648162126076}],"fk_expansion_candidates":23,"fk_expansion_added":2,"fk_expansion_blocked_count":16,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"bank_accounts","reason":"no_evidence"},{"table":"cities","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"inventory_levels","reason":"max_tables"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"order_lines","reason":"max_tables"},{"table":"po_lines","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"product_suppliers","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"quote_lines","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_territories","reason":"max_tables"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":40,"total_retrieval_latency_ms":45,"sql_generated":"SELECT uom.name AS unit_of_measure_name FROM units_of_measure uom;","tables_used_in_sql":[],"explain_result":"success","rows_returned":11,"total_latency_ms":468}
{"timestamp":"2026-01-29T19:45:26.309Z","query_id":"85d22c17-4001-477b-8746-23bac704f86a","question":"What fiscal years exist in the system?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["fiscal_years","fiscal_periods","budgets","depreciation_schedules","depreciation_entries","budget_lines","project_budgets","project_expenses","departments","project_milestones","journal_entries","projects"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"fiscal_years","similarity":0.7923960498118316},{"table":"fiscal_periods","similarity":0.7616670856526071},{"table":"budgets","similarity":0.6911637589323553},{"table":"journal_entries","similarity":0.6269724979465695},{"table":"budget_lines","similarity":0.6218203134963756},{"table":"depreciation_entries","similarity":0.6167782937248956},{"table":"depreciation_schedules","similarity":0.5985836737050324},{"table":"tax_rates","similarity":0.5716127675571235},{"table":"project_budgets","similarity":0.5656182034505703},{"table":"departments","similarity":0.5523947282192829},{"table":"opportunity_stages","similarity":0.5504537485994739},{"table":"sales_regions","similarity":0.5448968436545046},{"table":"project_expenses","similarity":0.5436618291443818},{"table":"project_milestones","similarity":0.5414688649545092},{"table":"timesheet_entries","similarity":0.5409769768138163}],"column_hits_per_table":{"fiscal_years":5,"fiscal_periods":7,"budgets":7,"budget_lines":3,"depreciation_entries":3,"journal_entries":1,"depreciation_schedules":7,"departments":1,"project_expenses":2,"project_budgets":5,"tax_rates":1,"goods_receipts":1,"projects":1,"project_milestones":1,"timesheet_entries":1,"certifications":1,"performance_reviews":1,"asset_categories":1,"opportunity_stages":1},"top_columns_per_table":{"fiscal_years":[{"column":"year","similarity":0.79289185497887},{"column":"start_date","similarity":0.7915481870907012},{"column":"is_closed","similarity":0.7687751840462032}],"fiscal_periods":[{"column":"start_date","similarity":0.7659921609127918},{"column":"period_number","similarity":0.7503599279176923},{"column":"fiscal_year_id","similarity":0.7427677986256532}],"budgets":[{"column":"fiscal_year_id","similarity":0.7119377164190824},{"column":"status","similarity":0.6301145472980343},{"column":"total_amount","similarity":0.6173246359192148}],"budget_lines":[{"column":"period_id","similarity":0.6801393090386698},{"column":"amount","similarity":0.5964392433040447},{"column":"budget_id","similarity":0.5771887798868078}],"depreciation_entries":[{"column":"period_id","similarity":0.6644590594465214},{"column":"entry_date","similarity":0.6182044744233723},{"column":"accumulated_depreciation","similarity":0.591719344216716}],"journal_entries":[{"column":"period_id","similarity":0.6584803744495903}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.6374273471660927},{"column":"start_date","similarity":0.6327992496100886},{"column":"useful_life_months","similarity":0.6309634564637141}],"departments":[{"column":"budget","similarity":0.6251109583075001}],"project_expenses":[{"column":"expense_date","similarity":0.6152948115721372},{"column":"is_billable","similarity":0.6022943783818646}],"project_budgets":[{"column":"category","similarity":0.6108356164669405},{"column":"actual_amount","similarity":0.604739033656996},{"column":"planned_amount","similarity":0.5906958847025185}],"tax_rates":[{"column":"is_active","similarity":0.6102719456894563}],"goods_receipts":[{"column":"receipt_date","similarity":0.6033126792490972}],"projects":[{"column":"budget","similarity":0.5988151518250451}],"project_milestones":[{"column":"is_billable","similarity":0.5985840177634407}],"timesheet_entries":[{"column":"is_billable","similarity":0.5976425797634352}],"certifications":[{"column":"validity_years","similarity":0.5951280377775735}],"performance_reviews":[{"column":"review_period_start","similarity":0.5797933929886745}],"asset_categories":[{"column":"useful_life_years","similarity":0.5756856657958654}],"opportunity_stages":[{"column":"is_closed","similarity":0.5741087121255803}]},"fused_scores":[{"table":"fiscal_years","fused":0.9509040092967873,"table_sim":0.7923960498118316,"col_score":1.1886659485242206},{"table":"fiscal_periods","fused":0.9134691013402194,"table_sim":0.7616670856526071,"col_score":1.141172124871638},{"table":"budgets","fused":0.7612993900257706,"table_sim":0.6911637589323553,"col_score":0.8665028366658937},{"table":"depreciation_schedules","fused":0.7406809930114742,"table_sim":0.5985836737050324,"col_score":0.953826971971137},{"table":"depreciation_entries","fused":0.7356926348476295,"table_sim":0.6167782937248956,"col_score":0.9140641465317303},{"table":"budget_lines","fused":0.706887388684857,"table_sim":0.6218203134963756,"col_score":0.8344880014675792},{"table":"project_budgets","fused":0.7046529753885176,"table_sim":0.5656182034505703,"col_score":0.9132051332954385},{"table":"project_expenses","fused":0.6927738977918569,"table_sim":0.5436618291443818,"col_score":0.9164420007630695},{"table":"departments","fused":0.5814812202545698,"table_sim":0.5523947282192829,"col_score":0.6251109583075001},{"table":"project_milestones","fused":0.5643149260780818,"table_sim":0.5414688649545092,"col_score":0.5985840177634407},{"table":"timesheet_entries","fused":0.5636432179936639,"table_sim":0.5409769768138163,"col_score":0.5976425797634352},{"table":"journal_entries","fused":0.560558003613827,"table_sim":0.6269724979465695,"col_score":0.46093626211471317},{"table":"opportunity_stages","fused":0.5599157340099165,"table_sim":0.5504537485994739,"col_score":0.5741087121255803},{"table":"tax_rates","fused":0.5138438053273219,"table_sim":0.5716127675571235,"col_score":0.4271903619826194},{"table":"sales_regions","fused":0.32693810619270275,"table_sim":0.5448968436545046,"col_score":0}],"fk_expansion_candidates":8,"fk_expansion_added":2,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":21,"total_retrieval_latency_ms":27,"sql_generated":"SELECT DISTINCT fiscal_years.fiscal_year FROM fiscal_years;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column fiscal_years.fiscal_year does not exist","autocorrect_attempted":false,"autocorrect_success":false,"autocorrect_failure_reason":"Could not parse undefined column from error message","total_latency_ms":1163,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column fiscal_years.fiscal_year does not exist"}
{"timestamp":"2026-01-29T19:45:27.472Z","query_id":"99bd90a0-2aac-4332-bc22-b1414cb1a221","question":"What are the different asset categories?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["asset_categories","fixed_assets","asset_locations","account_types","asset_transfers","asset_maintenance","benefit_types","product_categories","depreciation_entries","products","chart_of_accounts","depreciation_schedules"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"asset_categories","similarity":0.8168827711422647},{"table":"fixed_assets","similarity":0.6620037919617541},{"table":"asset_locations","similarity":0.6390829860060242},{"table":"account_types","similarity":0.6334397842726383},{"table":"product_categories","similarity":0.622177487707741},{"table":"asset_maintenance","similarity":0.621270551657517},{"table":"benefit_types","similarity":0.5903668937249158},{"table":"asset_transfers","similarity":0.5862689042988987},{"table":"depreciation_entries","similarity":0.5805433634197894},{"table":"products","similarity":0.5538274728539676},{"table":"depreciation_schedules","similarity":0.552160929389354},{"table":"chart_of_accounts","similarity":0.5427108945847197},{"table":"bank_accounts","similarity":0.5321134297281863},{"table":"countries","similarity":0.5281213098174355},{"table":"maintenance_types","similarity":0.5272099691279456}],"column_hits_per_table":{"asset_categories":5,"fixed_assets":9,"account_types":4,"asset_locations":6,"product_categories":5,"asset_transfers":6,"asset_maintenance":6,"project_budgets":1,"project_expenses":1,"depreciation_entries":1,"benefit_types":4,"products":1,"inventory_transactions":1},"top_columns_per_table":{"asset_categories":[{"column":"name","similarity":0.7875780707525062},{"column":"depreciation_method","similarity":0.7603448714847105},{"column":"category_id","similarity":0.758482100045761}],"fixed_assets":[{"column":"category_id","similarity":0.7014273982200495},{"column":"asset_tag","similarity":0.6626698663454819},{"column":"asset_id","similarity":0.6413881206539997}],"account_types":[{"column":"category","similarity":0.6881378304861365},{"column":"name","similarity":0.5992168172839945},{"column":"normal_balance","similarity":0.5947116865094776}],"asset_locations":[{"column":"building","similarity":0.6559618510281601},{"column":"description","similarity":0.6470926594735155},{"column":"floor","similarity":0.6470899039825275}],"product_categories":[{"column":"name","similarity":0.652576873610378},{"column":"description","similarity":0.6503788706671084},{"column":"category_id","similarity":0.6420597581466748}],"asset_transfers":[{"column":"reason","similarity":0.6473230015974661},{"column":"asset_id","similarity":0.6282032799433002},{"column":"transfer_id","similarity":0.6154246196195988}],"asset_maintenance":[{"column":"status","similarity":0.6334546005541394},{"column":"asset_id","similarity":0.6105732245848465},{"column":"maintenance_type_id","similarity":0.6070052571550042}],"project_budgets":[{"column":"category","similarity":0.6288554954539255}],"project_expenses":[{"column":"category","similarity":0.626992700689606}],"depreciation_entries":[{"column":"asset_id","similarity":0.6187898293393472}],"benefit_types":[{"column":"name","similarity":0.5974204688811928},{"column":"is_active","similarity":0.5896744133334022},{"column":"description","similarity":0.5883422456276791}],"products":[{"column":"category_id","similarity":0.5858403992443696}],"inventory_transactions":[{"column":"transaction_type","similarity":0.5816690816812632}]},"fused_scores":[{"table":"asset_categories","fused":0.9416071891617808,"table_sim":0.8168827711422647,"col_score":1.1286938161910547},{"table":"fixed_assets","fused":0.7846998038830493,"table_sim":0.6620037919617541,"col_score":0.9687438217649922},{"table":"asset_locations","fused":0.7752525128113841,"table_sim":0.6390829860060242,"col_score":0.9795068030194238},{"table":"account_types","fused":0.7742613400599331,"table_sim":0.6334397842726383,"col_score":0.9854936737408753},{"table":"asset_transfers","fused":0.7270812848332002,"table_sim":0.5862689042988987,"col_score":0.9382998556346527},{"table":"asset_maintenance","fused":0.6976709678451112,"table_sim":0.621270551657517,"col_score":0.8122715921265024},{"table":"benefit_types","fused":0.6707121036646139,"table_sim":0.5903668937249158,"col_score":0.7912299185741609},{"table":"product_categories","fused":0.6470810591289455,"table_sim":0.622177487707741,"col_score":0.6844364162607525},{"table":"depreciation_entries","fused":0.5215871702668908,"table_sim":0.5805433634197894,"col_score":0.43315288053754303},{"table":"products","fused":0.4963317955008041,"table_sim":0.5538274728539676,"col_score":0.4100882794710587},{"table":"depreciation_schedules","fused":0.3312965576336124,"table_sim":0.552160929389354,"col_score":0},{"table":"chart_of_accounts","fused":0.3256265367508318,"table_sim":0.5427108945847197,"col_score":0},{"table":"bank_accounts","fused":0.31926805783691176,"table_sim":0.5321134297281863,"col_score":0},{"table":"countries","fused":0.3168727858904613,"table_sim":0.5281213098174355,"col_score":0},{"table":"maintenance_types","fused":0.3163259814767673,"table_sim":0.5272099691279456,"col_score":0}],"fk_expansion_candidates":21,"fk_expansion_added":2,"fk_expansion_blocked_count":17,"fk_expansion_blocked":[{"table":"adjustment_lines","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"inventory_transactions","reason":"max_tables"},{"table":"journal_entries","reason":"no_evidence"},{"table":"maintenance_types","reason":"max_tables"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"product_suppliers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":19,"total_retrieval_latency_ms":24,"sql_generated":"SELECT DISTINCT ac.name AS AssetCategory FROM asset_categories ac;","tables_used_in_sql":[],"explain_result":"success","rows_returned":7,"total_latency_ms":452}
{"timestamp":"2026-01-29T19:45:27.925Z","query_id":"2ec9c1fb-fece-4dd2-8ebc-629c2d5754dc","question":"Find employees who have been with the company for more than 5 years and earn above $100,000","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_salaries","employees","employee_certifications","employee_benefits","employment_history","project_expenses","employee_training","positions","sales_opportunities","sales_regions","budgets","customers"],"tables_from_table_retrieval":15,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_salaries","similarity":0.6596309142898193},{"table":"employees","similarity":0.6117387326317625},{"table":"employee_certifications","similarity":0.6063101517291073},{"table":"employment_history","similarity":0.6006272540139823},{"table":"employee_benefits","similarity":0.588385638564704},{"table":"sales_quotes","similarity":0.5847288131119626},{"table":"project_expenses","similarity":0.5811440306100932},{"table":"positions","similarity":0.5783549710101321},{"table":"employee_training","similarity":0.5764842814424564},{"table":"sales_regions","similarity":0.5670236882958988},{"table":"sales_opportunities","similarity":0.5660664544581816},{"table":"timesheets","similarity":0.5640662437739868},{"table":"budgets","similarity":0.5625706029614268},{"table":"purchase_requisitions","similarity":0.5609922414021342},{"table":"performance_reviews","similarity":0.5599055606275851}],"column_hits_per_table":{"employees":14,"employee_salaries":7,"positions":1,"employee_benefits":4,"employee_training":3,"employee_certifications":4,"project_expenses":2,"certifications":1,"sales_opportunities":1,"employment_history":4,"departments":1,"sales_territories":1,"sales_regions":1,"fixed_assets":1,"performance_reviews":1,"business_units":1,"asset_transfers":1,"customers":1,"asset_maintenance":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.6754855997136985},{"column":"employee_number","similarity":0.6230502501184026},{"column":"last_name","similarity":0.6053409230190048}],"employee_salaries":[{"column":"amount","similarity":0.6329359756226043},{"column":"approved_by","similarity":0.6321375616232344},{"column":"change_reason","similarity":0.6316069528404761}],"positions":[{"column":"max_salary","similarity":0.6142693265161863}],"employee_benefits":[{"column":"employee_id","similarity":0.6006536688890698},{"column":"coverage_level","similarity":0.5965968421979039},{"column":"end_date","similarity":0.586557123942836}],"employee_training":[{"column":"score","similarity":0.6001910014859368},{"column":"status","similarity":0.5788237982645894},{"column":"employee_id","similarity":0.5766309092930753}],"employee_certifications":[{"column":"employee_id","similarity":0.5974403532583366},{"column":"certificate_number","similarity":0.5892450502925397},{"column":"expiry_date","similarity":0.578236416981715}],"project_expenses":[{"column":"employee_id","similarity":0.5944299421640671},{"column":"approved_by","similarity":0.5909885243295638}],"certifications":[{"column":"validity_years","similarity":0.589664761360241}],"sales_opportunities":[{"column":"owner_id","similarity":0.5895000558969312}],"employment_history":[{"column":"company_name","similarity":0.5883478253463156},{"column":"employee_id","similarity":0.5824689633275649},{"column":"reason_for_leaving","similarity":0.5723476282964999}],"departments":[{"column":"manager_id","similarity":0.5793473377308171}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5787575753820128}],"sales_regions":[{"column":"manager_id","similarity":0.5775817103737491}],"fixed_assets":[{"column":"assigned_to","similarity":0.5758011214737297}],"performance_reviews":[{"column":"employee_id","similarity":0.5751238749562096}],"business_units":[{"column":"manager_id","similarity":0.5736554784472759}],"asset_transfers":[{"column":"from_employee_id","similarity":0.5735387092093984}],"customers":[{"column":"credit_limit","similarity":0.5730323963896138}],"asset_maintenance":[{"column":"performed_by","similarity":0.5729277114702274}]},"fused_scores":[{"table":"employee_salaries","fused":0.7753804511475801,"table_sim":0.6596309142898193,"col_score":0.9490047564342214},{"table":"employees","fused":0.7618475294882174,"table_sim":0.6117387326317625,"col_score":0.9870107247728999},{"table":"employee_certifications","fused":0.7151313945508233,"table_sim":0.6063101517291073,"col_score":0.8783632587833972},{"table":"employee_benefits","fused":0.7089815448065512,"table_sim":0.588385638564704,"col_score":0.8898754041693219},{"table":"employment_history","fused":0.703710893427009,"table_sim":0.6006272540139823,"col_score":0.8583363525465489},{"table":"project_expenses","fused":0.6683020200008508,"table_sim":0.5811440306100932,"col_score":0.7990390040869872},{"table":"employee_training","fused":0.6670023012168911,"table_sim":0.5764842814424564,"col_score":0.8027793308785431},{"table":"positions","fused":0.5927207132125538,"table_sim":0.5783549710101321,"col_score":0.6142693265161863},{"table":"sales_opportunities","fused":0.5046998883260497,"table_sim":0.5660664544581816,"col_score":0.4126500391278518},{"table":"sales_regions","fused":0.501937091882189,"table_sim":0.5670236882958988,"col_score":0.40430719726162434},{"table":"performance_reviews","fused":0.49697802136428976,"table_sim":0.5599055606275851,"col_score":0.40258671246934674},{"table":"sales_quotes","fused":0.35083728786717755,"table_sim":0.5847288131119626,"col_score":0},{"table":"timesheets","fused":0.3384397462643921,"table_sim":0.5640662437739868,"col_score":0},{"table":"budgets","fused":0.3375423617768561,"table_sim":0.5625706029614268,"col_score":0},{"table":"purchase_requisitions","fused":0.3365953448412805,"table_sim":0.5609922414021342,"col_score":0}],"fk_expansion_candidates":31,"fk_expansion_added":2,"fk_expansion_blocked_count":22,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"max_tables"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"max_tables"},{"table":"sales_quotes","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"max_tables"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":65,"total_retrieval_latency_ms":71,"sql_generated":"SELECT e.employee_id, e.first_name, e.last_name, s.salary FROM employees e JOIN employee_salaries s ON e.employee_id = s.employee_id WHERE e.hire_date <= (CURRENT_DATE - INTERVAL '5 years') AND s.amount > 100000;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column s.salary does not exist","autocorrect_attempted":false,"autocorrect_success":false,"autocorrect_failure_reason":"Could not parse undefined column from error message","total_latency_ms":3230,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column s.salary does not exist"}
{"timestamp":"2026-01-29T19:45:31.155Z","query_id":"9bf724f2-62f5-4501-8db5-667e78cd0418","question":"List employees and their managers' names","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employees","employee_salaries","departments","business_units","employment_history","warehouses","projects","employee_training","sales_territories","sales_regions","positions","employee_certifications"],"tables_from_table_retrieval":15,"tables_from_column_only":10,"tables_from_fk_expansion":2,"table_scores":[{"table":"employees","similarity":0.6739271388388655},{"table":"departments","similarity":0.657958333696202},{"table":"sales_regions","similarity":0.6410429290818445},{"table":"business_units","similarity":0.629302299806744},{"table":"employee_salaries","similarity":0.6291178543786463},{"table":"employment_history","similarity":0.628562523709621},{"table":"employee_training","similarity":0.6078450125905032},{"table":"projects","similarity":0.5966184746740394},{"table":"warehouses","similarity":0.595741492988575},{"table":"task_assignments","similarity":0.5956561215476265},{"table":"employee_certifications","similarity":0.5943810266860687},{"table":"sales_territories","similarity":0.5939624260861468},{"table":"timesheets","similarity":0.593138331963305},{"table":"positions","similarity":0.5879685656690451},{"table":"project_expenses","similarity":0.5830402792835349}],"column_hits_per_table":{"employees":17,"departments":2,"business_units":2,"employment_history":2,"warehouses":2,"customers":1,"sales_regions":1,"projects":2,"vendors":1,"sales_territories":2,"task_assignments":1,"certifications":1,"budgets":1,"employee_salaries":4,"timesheets":1,"currencies":1,"project_expenses":1,"stock_transfers":1,"employee_training":2,"employee_certifications":1,"vendor_contacts":1,"products":1,"customer_contacts":1,"project_milestones":1},"top_columns_per_table":{"employees":[{"column":"first_name","similarity":0.7714769709454768},{"column":"last_name","similarity":0.7704055105478298},{"column":"manager_id","similarity":0.7110305691223358}],"departments":[{"column":"manager_id","similarity":0.6915417829685028},{"column":"name","similarity":0.6751242206298983}],"business_units":[{"column":"manager_id","similarity":0.685040091181477},{"column":"name","similarity":0.6765828714174584}],"employment_history":[{"column":"company_name","similarity":0.6822662804075768},{"column":"employee_id","similarity":0.6295340898954124}],"warehouses":[{"column":"manager_id","similarity":0.6735483038590064},{"column":"name","similarity":0.6503195755374178}],"customers":[{"column":"name","similarity":0.6648112452254289}],"sales_regions":[{"column":"manager_id","similarity":0.6593627275777447}],"projects":[{"column":"project_manager_id","similarity":0.6562692578689777},{"column":"name","similarity":0.6475203407196208}],"vendors":[{"column":"name","similarity":0.648693073851878}],"sales_territories":[{"column":"name","similarity":0.6439679107921524},{"column":"assigned_rep_id","similarity":0.6207235426752916}],"task_assignments":[{"column":"employee_id","similarity":0.6386435460734429}],"certifications":[{"column":"name","similarity":0.6377896783299257}],"budgets":[{"column":"name","similarity":0.6363211543819098}],"employee_salaries":[{"column":"end_date","similarity":0.6318747182049583},{"column":"employee_id","similarity":0.6248337519632055},{"column":"effective_date","similarity":0.621871367825837}],"timesheets":[{"column":"employee_id","similarity":0.6280174573982042}],"currencies":[{"column":"name","similarity":0.6277037825883155}],"project_expenses":[{"column":"employee_id","similarity":0.6275598151007045}],"stock_transfers":[{"column":"created_by","similarity":0.6244881174510047}],"employee_training":[{"column":"employee_id","similarity":0.6237522782008402},{"column":"status","similarity":0.6219333593573583}],"employee_certifications":[{"column":"employee_id","similarity":0.6229468191069418}],"vendor_contacts":[{"column":"last_name","similarity":0.6219521334137906}],"products":[{"column":"name","similarity":0.6178261993575316}],"customer_contacts":[{"column":"last_name","similarity":0.6163147653808325}],"project_milestones":[{"column":"name","similarity":0.6158954282593042}]},"fused_scores":[{"table":"employees","fused":0.8285238994112679,"table_sim":0.6739271388388655,"col_score":1.0604190402698717},{"table":"employee_salaries","fused":0.7545948734743385,"table_sim":0.6291178543786463,"col_score":0.9428104021178768},{"table":"departments","fused":0.6829240903370877,"table_sim":0.657958333696202,"col_score":0.7203727252984162},{"table":"business_units","fused":0.6641142074133042,"table_sim":0.629302299806744,"col_score":0.7163320688231443},{"table":"employment_history","fused":0.6563068453252519,"table_sim":0.628562523709621,"col_score":0.697923327748698},{"table":"warehouses","fused":0.6370831614489053,"table_sim":0.595741492988575,"col_score":0.6990956641394007},{"table":"projects","fused":0.6323793247084843,"table_sim":0.5966184746740394,"col_score":0.6860205997601516},{"table":"employee_training","fused":0.6264283157605673,"table_sim":0.6078450125905032,"col_score":0.6543032705156635},{"table":"sales_territories","fused":0.6235897666480316,"table_sim":0.5939624260861468,"col_score":0.6680307774908587},{"table":"sales_regions","fused":0.5692473211708752,"table_sim":0.6410429290818445,"col_score":0.46155390930442125},{"table":"task_assignments","fused":0.5362138658291399,"table_sim":0.5956561215476265,"col_score":0.44705048225141},{"table":"timesheets","fused":0.5317278872494802,"table_sim":0.593138331963305,"col_score":0.43961222017874296},{"table":"employee_certifications","fused":0.531053725361585,"table_sim":0.5943810266860687,"col_score":0.43606277337485927},{"table":"project_expenses","fused":0.5255409157983182,"table_sim":0.5830402792835349,"col_score":0.43929187057049307},{"table":"positions","fused":0.352781139401427,"table_sim":0.5879685656690451,"col_score":0}],"fk_expansion_candidates":36,"fk_expansion_added":2,"fk_expansion_blocked_count":31,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"project_budgets","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"max_tables"},{"table":"project_milestones","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":44,"total_retrieval_latency_ms":50,"sql_generated":"SELECT e.employee_id AS employee_id, e.first_name || ' ' || e.last_name AS employee_name, m.first_name || ' ' || m.last_name AS manager_name FROM employees e INNER JOIN employees m ON e.manager_id = m.employee_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":499,"total_latency_ms":1085}
{"timestamp":"2026-01-29T19:45:32.240Z","query_id":"212f7cc2-168d-4733-9eaf-9b4170cb76ba","question":"Which employees have pending leave requests?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["leave_requests","employees","leave_types","purchase_requisitions","employee_salaries","employee_training","employment_history","timesheets","employee_certifications","goods_receipts","sales_territories","positions"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"leave_requests","similarity":0.7600790941142384},{"table":"employees","similarity":0.6318821970092333},{"table":"leave_types","similarity":0.6243053165161109},{"table":"employment_history","similarity":0.6232974261189369},{"table":"purchase_requisitions","similarity":0.5939119628114023},{"table":"timesheets","similarity":0.5786251968824939},{"table":"employee_training","similarity":0.5750839227740789},{"table":"employee_certifications","similarity":0.5743962867871555},{"table":"goods_receipts","similarity":0.5718610848354152},{"table":"task_assignments","similarity":0.5706152949131827},{"table":"sales_territories","similarity":0.5614078081373084},{"table":"positions","similarity":0.5597262073340161},{"table":"projects","similarity":0.5534503002083008},{"table":"sales_opportunities","similarity":0.5512834500880964},{"table":"employee_salaries","similarity":0.5491897540036026}],"column_hits_per_table":{"leave_requests":10,"employee_training":2,"employees":12,"employment_history":1,"timesheets":2,"leave_types":3,"sales_orders":1,"purchase_requisitions":2,"vendor_invoices":1,"project_tasks":1,"asset_maintenance":1,"employee_benefits":1,"projects":1,"purchase_orders":1,"stock_transfers":1,"sales_quotes":1,"project_expenses":1,"fixed_assets":1,"employee_certifications":1,"task_assignments":1,"goods_receipts":1,"employee_salaries":2,"sales_territories":1,"project_phases":1},"top_columns_per_table":{"leave_requests":[{"column":"status","similarity":0.7848719368682063},{"column":"employee_id","similarity":0.7576636579687751},{"column":"days_requested","similarity":0.7398783151100068}],"employee_training":[{"column":"status","similarity":0.6651923522652087},{"column":"scheduled_date","similarity":0.5942999900390922}],"employees":[{"column":"termination_date","similarity":0.6457696051473769},{"column":"email","similarity":0.6346475885363552},{"column":"last_name","similarity":0.6289095722388175}],"employment_history":[{"column":"reason_for_leaving","similarity":0.6361385453486292}],"timesheets":[{"column":"status","similarity":0.6339196627014697},{"column":"employee_id","similarity":0.5914292311259354}],"leave_types":[{"column":"is_paid","similarity":0.6210462067937735},{"column":"days_allowed","similarity":0.6179268957404154},{"column":"requires_approval","similarity":0.6015299391142729}],"sales_orders":[{"column":"status","similarity":0.6210060419850735}],"purchase_requisitions":[{"column":"status","similarity":0.6193300474461643},{"column":"requested_by","similarity":0.6053096443813046}],"vendor_invoices":[{"column":"status","similarity":0.6155310542664321}],"project_tasks":[{"column":"status","similarity":0.6119107629795923}],"asset_maintenance":[{"column":"status","similarity":0.6085158795953126}],"employee_benefits":[{"column":"end_date","similarity":0.6074126091020398}],"projects":[{"column":"status","similarity":0.6062843845135029}],"purchase_orders":[{"column":"status","similarity":0.6056490490407618}],"stock_transfers":[{"column":"status","similarity":0.6050219711376368}],"sales_quotes":[{"column":"status","similarity":0.6049360812469786}],"project_expenses":[{"column":"status","similarity":0.6029918860858492}],"fixed_assets":[{"column":"status","similarity":0.6000566812603433}],"employee_certifications":[{"column":"expiry_date","similarity":0.5947566615407769}],"task_assignments":[{"column":"employee_id","similarity":0.5916098874816911}],"goods_receipts":[{"column":"received_by","similarity":0.5906067416911127}],"employee_salaries":[{"column":"change_reason","similarity":0.5843630753678524},{"column":"end_date","similarity":0.579293919815319}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5811710599296118}],"project_phases":[{"column":"status","similarity":0.5807882110700618}]},"fused_scores":[{"table":"leave_requests","fused":0.8980468193115467,"table_sim":0.7600790941142384,"col_score":1.1049984071075094},{"table":"employees","fused":0.7643666779717617,"table_sim":0.6318821970092333,"col_score":0.9630933994155545},{"table":"leave_types","fused":0.7420599360286873,"table_sim":0.6243053165161109,"col_score":0.9186918652975518},{"table":"purchase_requisitions","fused":0.6851772420818263,"table_sim":0.5939119628114023,"col_score":0.8220751609874621},{"table":"employee_salaries","fused":0.6791178665123663,"table_sim":0.5491897540036026,"col_score":0.8740100352755118},{"table":"employee_training","fused":0.6758972789972135,"table_sim":0.5750839227740789,"col_score":0.8271173133319152},{"table":"employment_history","fused":0.6284338738108138,"table_sim":0.6232974261189369,"col_score":0.6361385453486292},{"table":"timesheets","fused":0.6074727160435388,"table_sim":0.5786251968824939,"col_score":0.6507439947851061},{"table":"employee_certifications","fused":0.582540436688604,"table_sim":0.5743962867871555,"col_score":0.5947566615407769},{"table":"goods_receipts","fused":0.5793593475776941,"table_sim":0.5718610848354152,"col_score":0.5906067416911127},{"table":"task_assignments","fused":0.5080199454427832,"table_sim":0.5706152949131827,"col_score":0.41412692123718375},{"table":"projects","fused":0.5018298077887613,"table_sim":0.5534503002083008,"col_score":0.42439906915945197},{"table":"sales_territories","fused":0.4995725816626763,"table_sim":0.5614078081373084,"col_score":0.40681974195072823},{"table":"positions","fused":0.33583572440040965,"table_sim":0.5597262073340161,"col_score":0},{"table":"sales_opportunities","fused":0.33077007005285786,"table_sim":0.5512834500880964,"col_score":0}],"fk_expansion_candidates":32,"fk_expansion_added":2,"fk_expansion_blocked_count":26,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"projects","reason":"max_tables"},{"table":"task_assignments","reason":"max_tables"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":23,"total_retrieval_latency_ms":28,"sql_generated":"SELECT DISTINCT e.employee_id, e.first_name || ' ' || e.last_name AS employee_full_name FROM employees e JOIN leave_requests lr ON e.employee_id = lr.employee_id WHERE lr.status = 'pending';","tables_used_in_sql":[],"explain_result":"success","rows_returned":194,"total_latency_ms":1007}
{"timestamp":"2026-01-29T19:45:33.247Z","query_id":"40034589-8034-47c9-95f8-a7074ef5e543","question":"Show the number of employees per position title","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["positions","employees","employee_salaries","employee_certifications","employment_history","employee_benefits","employee_training","sales_opportunities","sales_territories","sales_regions","departments","business_units"],"tables_from_table_retrieval":15,"tables_from_column_only":4,"tables_from_fk_expansion":2,"table_scores":[{"table":"positions","similarity":0.6979534676247563},{"table":"employee_salaries","similarity":0.659392658582788},{"table":"employees","similarity":0.659318915501233},{"table":"sales_territories","similarity":0.6544391487399293},{"table":"sales_regions","similarity":0.6428263414246281},{"table":"employee_benefits","similarity":0.6167866650759656},{"table":"employee_certifications","similarity":0.6148750377920306},{"table":"employee_training","similarity":0.6083683642118161},{"table":"task_assignments","similarity":0.6071839885197421},{"table":"employment_history","similarity":0.6045972357575983},{"table":"project_resources","similarity":0.6042586180893913},{"table":"departments","similarity":0.6032642584988918},{"table":"business_units","similarity":0.5965911322333207},{"table":"sales_opportunities","similarity":0.5891548833734075},{"table":"certifications","similarity":0.5841777359403402}],"column_hits_per_table":{"employees":15,"positions":6,"employee_salaries":7,"sales_territories":3,"employment_history":2,"employee_certifications":2,"sales_regions":1,"departments":1,"sales_opportunities":2,"customer_contacts":1,"employee_benefits":2,"vendor_contacts":1,"task_assignments":1,"employee_training":2,"business_units":1,"projects":1,"project_resources":1,"sales_orders":1},"top_columns_per_table":{"employees":[{"column":"employee_number","similarity":0.7303595134380423},{"column":"position_id","similarity":0.7050286662527804},{"column":"phone","similarity":0.6945610240790868}],"positions":[{"column":"title","similarity":0.7249937097183676},{"column":"min_salary","similarity":0.675429773675748},{"column":"max_salary","similarity":0.6680713515907781}],"employee_salaries":[{"column":"amount","similarity":0.7000523422305518},{"column":"approved_by","similarity":0.653674871570882},{"column":"effective_date","similarity":0.6502266185759468}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.658183355036331},{"column":"name","similarity":0.6164997394497986},{"column":"territory_id","similarity":0.6102010119398675}],"employment_history":[{"column":"position","similarity":0.6510937516674971},{"column":"company_name","similarity":0.6218123772540076}],"employee_certifications":[{"column":"certificate_number","similarity":0.650658466369623},{"column":"employee_id","similarity":0.6302169951877866}],"sales_regions":[{"column":"manager_id","similarity":0.6438605230157461}],"departments":[{"column":"manager_id","similarity":0.6436672453371529}],"sales_opportunities":[{"column":"owner_id","similarity":0.6408450104060457},{"column":"amount","similarity":0.6062432822580913}],"customer_contacts":[{"column":"title","similarity":0.6381955329460534}],"employee_benefits":[{"column":"coverage_level","similarity":0.6345844389817726},{"column":"employee_id","similarity":0.6161187768667185}],"vendor_contacts":[{"column":"title","similarity":0.6324837364697313}],"task_assignments":[{"column":"employee_id","similarity":0.6251972033262657}],"employee_training":[{"column":"status","similarity":0.6240127994623852},{"column":"score","similarity":0.6193167530282054}],"business_units":[{"column":"manager_id","similarity":0.6238411740584191}],"projects":[{"column":"project_manager_id","similarity":0.6212958877659998}],"project_resources":[{"column":"employee_id","similarity":0.6133242706799946}],"sales_orders":[{"column":"sales_rep_id","similarity":0.6111916781312563}]},"fused_scores":[{"table":"positions","fused":0.8438555191973505,"table_sim":0.6979534676247563,"col_score":1.0627085965562415},{"table":"employees","fused":0.8266473594917741,"table_sim":0.659318915501233,"col_score":1.0776400254775858},{"table":"employee_salaries","fused":0.8063915063560698,"table_sim":0.659392658582788,"col_score":1.0268897780159927},{"table":"employee_certifications","fused":0.7174187885493577,"table_sim":0.6148750377920306,"col_score":0.8712344146853483},{"table":"employment_history","fused":0.7102495749371189,"table_sim":0.6045972357575983,"col_score":0.8687280837063998},{"table":"employee_benefits","fused":0.710162403399629,"table_sim":0.6167866650759656,"col_score":0.8502260108851241},{"table":"employee_training","fused":0.7001095116631058,"table_sim":0.6083683642118161,"col_score":0.8377212328400403},{"table":"sales_opportunities","fused":0.6857085443841274,"table_sim":0.5891548833734075,"col_score":0.8305390359002073},{"table":"sales_territories","fused":0.663264792177102,"table_sim":0.6544391487399293,"col_score":0.6765032573328611},{"table":"sales_regions","fused":0.5659767512991858,"table_sim":0.6428263414246281,"col_score":0.45070236611102227},{"table":"departments","fused":0.5421853837937378,"table_sim":0.6032642584988918,"col_score":0.450567071736007},{"table":"task_assignments","fused":0.5393656100431996,"table_sim":0.6071839885197421,"col_score":0.437638042328386},{"table":"project_resources","fused":0.5342859666440333,"table_sim":0.6042586180893913,"col_score":0.42932698947599623},{"table":"business_units","fused":0.5326302080763498,"table_sim":0.5965911322333207,"col_score":0.43668882184089336},{"table":"certifications","fused":0.3505066415642041,"table_sim":0.5841777359403402,"col_score":0}],"fk_expansion_candidates":31,"fk_expansion_added":2,"fk_expansion_blocked_count":26,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"certifications","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":20,"total_retrieval_latency_ms":25,"sql_generated":"SELECT p.title AS PositionTitle, COUNT(e.employee_id) AS NumberOfEmployees FROM positions p JOIN employees e ON p.position_id = e.position_id GROUP BY p.title;","tables_used_in_sql":[],"explain_result":"success","rows_returned":40,"total_latency_ms":801}
{"timestamp":"2026-01-29T19:45:34.048Z","query_id":"2e98d1b3-2643-4d3b-ad87-e4644643cb20","question":"Find employees with expiring certifications in the next 6 months","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_certifications","certifications","employee_training","employee_salaries","employees","employee_benefits","employment_history","timesheets","leave_requests","sales_opportunities","training_courses","sales_territories"],"tables_from_table_retrieval":15,"tables_from_column_only":4,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_certifications","similarity":0.7706241362613744},{"table":"certifications","similarity":0.6802005917779511},{"table":"employee_training","similarity":0.6440443171141977},{"table":"employee_salaries","similarity":0.6217356175142155},{"table":"employment_history","similarity":0.6209800232699798},{"table":"employees","similarity":0.6208808332740605},{"table":"employee_benefits","similarity":0.6045338983482451},{"table":"leave_requests","similarity":0.5952468212261783},{"table":"timesheets","similarity":0.5895561171146715},{"table":"sales_opportunities","similarity":0.589247250067302},{"table":"sales_territories","similarity":0.5761976363181674},{"table":"sales_regions","similarity":0.571597497122778},{"table":"positions","similarity":0.5699853206265957},{"table":"sales_quotes","similarity":0.5692719307537125},{"table":"asset_maintenance","similarity":0.5679247260279}],"column_hits_per_table":{"employee_certifications":6,"certifications":5,"employee_training":7,"employee_benefits":4,"employee_salaries":4,"employees":13,"employment_history":2,"fixed_assets":1,"sales_territories":1,"leave_requests":1,"training_courses":1,"vendor_invoices":1,"sales_opportunities":1,"sales_orders":1,"timesheets":2},"top_columns_per_table":{"employee_certifications":[{"column":"expiry_date","similarity":0.8223290744223847},{"column":"obtained_date","similarity":0.7048571438609317},{"column":"certificate_number","similarity":0.6844066837361532}],"certifications":[{"column":"validity_years","similarity":0.6831497753418977},{"column":"issuing_body","similarity":0.6675689252914252},{"column":"name","similarity":0.6347875203520511}],"employee_training":[{"column":"status","similarity":0.6694247428105495},{"column":"completion_date","similarity":0.6500543987668643},{"column":"scheduled_date","similarity":0.634378567942575}],"employee_benefits":[{"column":"end_date","similarity":0.668980015269604},{"column":"start_date","similarity":0.6167647109848691},{"column":"employee_id","similarity":0.5890360373550575}],"employee_salaries":[{"column":"end_date","similarity":0.6663230094391236},{"column":"effective_date","similarity":0.6275928989730601},{"column":"approved_by","similarity":0.5920076491340375}],"employees":[{"column":"termination_date","similarity":0.6634096387400048},{"column":"birth_date","similarity":0.6208623682963734},{"column":"hire_date","similarity":0.6131267334537116}],"employment_history":[{"column":"end_date","similarity":0.6255999760444128},{"column":"reason_for_leaving","similarity":0.5952886604965791}],"fixed_assets":[{"column":"warranty_expiry","similarity":0.6127536708511256}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6119690793074023}],"leave_requests":[{"column":"approved_by","similarity":0.597799056732442}],"training_courses":[{"column":"duration_hours","similarity":0.5941472157411798}],"vendor_invoices":[{"column":"status","similarity":0.5930757702064392}],"sales_opportunities":[{"column":"owner_id","similarity":0.5882909136312094}],"sales_orders":[{"column":"sales_rep_id","similarity":0.5865686529713344}],"timesheets":[{"column":"employee_id","similarity":0.5831337158577651},{"column":"approved_by","similarity":0.5831119950290864}]},"fused_scores":[{"table":"employee_certifications","fused":0.9322775402979648,"table_sim":0.7706241362613744,"col_score":1.1747576463528504},{"table":"certifications","fused":0.8148940502618147,"table_sim":0.6802005917779511,"col_score":1.0169342379876103},{"table":"employee_training","fused":0.7733240633637795,"table_sim":0.6440443171141977,"col_score":0.9672436827381519},{"table":"employee_salaries","fused":0.7650891540787907,"table_sim":0.6217356175142155,"col_score":0.9801194589256537},{"table":"employees","fused":0.762064829119713,"table_sim":0.6208808332740605,"col_score":0.9738408228881915},{"table":"employee_benefits","fused":0.7536652873137626,"table_sim":0.6045338983482451,"col_score":0.9773623707620386},{"table":"employment_history","fused":0.7418857364790687,"table_sim":0.6209800232699798,"col_score":0.9232443062927023},{"table":"timesheets","fused":0.6686171885005245,"table_sim":0.5895561171146715,"col_score":0.7872087955793041},{"table":"leave_requests","fused":0.5962677154286837,"table_sim":0.5952468212261783,"col_score":0.597799056732442},{"table":"sales_opportunities","fused":0.5182698058571198,"table_sim":0.589247250067302,"col_score":0.41180363954184657},{"table":"sales_territories","fused":0.5170699239969732,"table_sim":0.5761976363181674,"col_score":0.4283783555151816},{"table":"sales_regions","fused":0.34295849827366676,"table_sim":0.571597497122778,"col_score":0},{"table":"positions","fused":0.3419911923759574,"table_sim":0.5699853206265957,"col_score":0},{"table":"sales_quotes","fused":0.3415631584522275,"table_sim":0.5692719307537125,"col_score":0},{"table":"asset_maintenance","fused":0.34075483561673997,"table_sim":0.5679247260279,"col_score":0}],"fk_expansion_candidates":33,"fk_expansion_added":2,"fk_expansion_blocked_count":26,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"sales_regions","reason":"max_tables"},{"table":"customers","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"leave_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":30,"total_retrieval_latency_ms":36,"sql_generated":"SELECT e.employee_id, CONCAT(e.first_name, ' ', e.last_name) AS employee_full_name, c.certification_id, c.name AS certification_name, DATEDIFF(c.expiry_date, CURRENT_DATE) AS days_until_expiration FROM employees e JOIN employee_certifications ec ON e.employee_id = ec.employee_id JOIN certifications c ON ec.certification_id = c.certification_id WHERE c.validity_years > 0 AND DATEDIFF(c.expiry_date, CURRENT_DATE) <= 180;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column c.expiry_date does not exist","autocorrect_attempted":false,"autocorrect_success":false,"autocorrect_failure_reason":"Could not parse undefined column from error message","total_latency_ms":5774,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column c.expiry_date does not exist"}
{"timestamp":"2026-01-29T19:45:39.822Z","query_id":"02bf03cf-09e8-45ce-b9e7-34d52e636c11","question":"What is the total sales amount by customer for 2024?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_orders","sales_quotes","purchase_orders","sales_opportunities","vendor_invoices","customers","sales_regions","product_suppliers","inventory_transactions","sales_territories","customer_contacts","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.6661782372338159},{"table":"sales_regions","similarity":0.6466539195201415},{"table":"purchase_orders","similarity":0.6425639839861694},{"table":"sales_quotes","similarity":0.6323684030188},{"table":"customers","similarity":0.6254829877818046},{"table":"goods_receipts","similarity":0.624224700776992},{"table":"sales_territories","similarity":0.6219383160682438},{"table":"sales_opportunities","similarity":0.6198918716472263},{"table":"vendor_invoices","similarity":0.6044007553511245},{"table":"product_suppliers","similarity":0.6040993020059657},{"table":"vendors","similarity":0.603297637986599},{"table":"inventory_transactions","similarity":0.5961752149477293},{"table":"customer_contacts","similarity":0.5960659744690372},{"table":"purchase_requisitions","similarity":0.5958567238927183},{"table":"vendor_contacts","similarity":0.5956298644510378}],"column_hits_per_table":{"sales_orders":11,"sales_quotes":8,"purchase_orders":4,"vendor_invoices":4,"sales_regions":2,"sales_opportunities":5,"budgets":1,"vendor_invoice_lines":3,"sales_territories":1,"customers":5,"product_suppliers":2,"inventory_transactions":1,"products":1,"employee_salaries":1,"requisition_lines":1},"top_columns_per_table":{"sales_orders":[{"column":"total","similarity":0.7244313172120884},{"column":"tax_amount","similarity":0.6762874622688556},{"column":"shipping_cost","similarity":0.6612432272072928}],"sales_quotes":[{"column":"total","similarity":0.6950563806491997},{"column":"tax_amount","similarity":0.6549934606699467},{"column":"customer_id","similarity":0.633022609028069}],"purchase_orders":[{"column":"total","similarity":0.6785298093212636},{"column":"tax_amount","similarity":0.6404349276520235},{"column":"shipping_cost","similarity":0.6240185552956755}],"vendor_invoices":[{"column":"total","similarity":0.6747261791238827},{"column":"amount_paid","similarity":0.6298159797552111},{"column":"tax_amount","similarity":0.6272011861089813}],"sales_regions":[{"column":"target_revenue","similarity":0.669211801482299},{"column":"manager_id","similarity":0.6277573682655309}],"sales_opportunities":[{"column":"amount","similarity":0.655450458562276},{"column":"customer_id","similarity":0.6322500352926682},{"column":"actual_close_date","similarity":0.6246929093287042}],"budgets":[{"column":"total_amount","similarity":0.6518162432576314}],"vendor_invoice_lines":[{"column":"amount","similarity":0.6403394670021465},{"column":"quantity","similarity":0.6220633545661067},{"column":"unit_cost","similarity":0.6142783559425501}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6329827875367418}],"customers":[{"column":"customer_number","similarity":0.6307526305965028},{"column":"is_active","similarity":0.6279434554243903},{"column":"payment_terms","similarity":0.6271025683088002}],"product_suppliers":[{"column":"unit_cost","similarity":0.6238036188844898},{"column":"lead_time_days","similarity":0.6148470142139506}],"inventory_transactions":[{"column":"quantity","similarity":0.6205086265646853}],"products":[{"column":"unit_cost","similarity":0.6167414295269279}],"employee_salaries":[{"column":"amount","similarity":0.6161656413500942}],"requisition_lines":[{"column":"estimated_total","similarity":0.6121816423535696}]},"fused_scores":[{"table":"sales_orders","fused":0.824736961678896,"table_sim":0.6661782372338159,"col_score":1.0625750483465162},{"table":"sales_quotes","fused":0.7884422862049492,"table_sim":0.6323684030188,"col_score":1.022553110984173},{"table":"purchase_orders","fused":0.7850372996506118,"table_sim":0.6425639839861694,"col_score":0.9987472731472753},{"table":"sales_opportunities","fused":0.759053888278987,"table_sim":0.6198918716472263,"col_score":0.9677969132266282},{"table":"vendor_invoices","fused":0.757971162082024,"table_sim":0.6044007553511245,"col_score":0.9883267721783733},{"table":"customers","fused":0.753011358569444,"table_sim":0.6254829877818046,"col_score":0.9443039147509029},{"table":"sales_regions","fused":0.7435631038621788,"table_sim":0.6466539195201415,"col_score":0.8889268803752348},{"table":"product_suppliers","fused":0.7349504316001654,"table_sim":0.6040993020059657,"col_score":0.9312271259914651},{"table":"inventory_transactions","fused":0.6059085795945116,"table_sim":0.5961752149477293,"col_score":0.6205086265646853},{"table":"sales_territories","fused":0.5503981701512339,"table_sim":0.6219383160682438,"col_score":0.4430879512757192},{"table":"vendor_invoice_lines","fused":0.38054845771407997,"table_sim":0,"col_score":0.9513711442851999},{"table":"goods_receipts","fused":0.3745348204661952,"table_sim":0.624224700776992,"col_score":0},{"table":"vendors","fused":0.3619785827919594,"table_sim":0.603297637986599,"col_score":0},{"table":"customer_contacts","fused":0.3576395846814223,"table_sim":0.5960659744690372,"col_score":0},{"table":"purchase_requisitions","fused":0.35751403433563095,"table_sim":0.5958567238927183,"col_score":0}],"fk_expansion_candidates":17,"fk_expansion_added":2,"fk_expansion_blocked_count":11,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendors","reason":"max_tables"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":28,"total_retrieval_latency_ms":34,"sql_generated":"SELECT c.customer_id AS \"CustomerID\", SUM(so.total) AS \"TotalSalesAmount\" FROM customers c JOIN sales_orders so ON c.customer_id = so.customer_id AND EXTRACT(YEAR FROM so.order_date) = 2024 GROUP BY c.customer_id;","tables_used_in_sql":[],"total_latency_ms":3157,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T19:45:42.979Z","query_id":"bb41ad7a-670f-46cd-9083-4ed7cb1104d6","question":"List the top 10 customers by total order value","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["sales_orders","order_lines","purchase_orders","customers","vendor_invoices","po_lines","vendor_invoice_lines","vendors","product_suppliers","customer_contacts","goods_receipts","receipt_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.6473006572264755},{"table":"order_lines","similarity":0.6399839764362797},{"table":"purchase_orders","similarity":0.6359216236921361},{"table":"customers","similarity":0.6198957604307753},{"table":"product_suppliers","similarity":0.5995729306104617},{"table":"vendor_invoices","similarity":0.5943908353227434},{"table":"customer_contacts","similarity":0.5842306673122464},{"table":"vendor_invoice_lines","similarity":0.5801466694219243},{"table":"po_lines","similarity":0.5791417572195606},{"table":"goods_receipts","similarity":0.5753336348446236},{"table":"vendors","similarity":0.5707400907082698},{"table":"vendor_contacts","similarity":0.5696902100114021},{"table":"sales_quotes","similarity":0.5666705909907517},{"table":"sales_regions","similarity":0.5613559842608495},{"table":"performance_reviews","similarity":0.5612444859070587}],"column_hits_per_table":{"sales_orders":9,"purchase_orders":9,"order_lines":6,"customers":8,"vendor_invoices":3,"po_lines":4,"product_suppliers":1,"vendor_invoice_lines":3,"sales_quotes":1,"vendors":2,"reorder_rules":1,"receipt_lines":1,"customer_contacts":1,"vendor_contacts":1},"top_columns_per_table":{"sales_orders":[{"column":"total","similarity":0.7020817260367288},{"column":"order_number","similarity":0.6685298882909628},{"column":"subtotal","similarity":0.6524962304627586}],"purchase_orders":[{"column":"total","similarity":0.6939612306511255},{"column":"subtotal","similarity":0.6468882375379221},{"column":"po_number","similarity":0.6405494499482387}],"order_lines":[{"column":"line_total","similarity":0.6813706573979386},{"column":"quantity_shipped","similarity":0.6606623309473539},{"column":"unit_price","similarity":0.653638874407219}],"customers":[{"column":"phone","similarity":0.6678457692494831},{"column":"customer_number","similarity":0.667508576224813},{"column":"website","similarity":0.6440350067780187}],"vendor_invoices":[{"column":"total","similarity":0.6547235618821576},{"column":"subtotal","similarity":0.6165793862971071},{"column":"amount_paid","similarity":0.5994096139826286}],"po_lines":[{"column":"line_total","similarity":0.6452038022349394},{"column":"quantity_received","similarity":0.6360841424690086},{"column":"quantity","similarity":0.6154123203857146}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6405471009596841}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.6302050357488331},{"column":"amount","similarity":0.6254578473792903},{"column":"unit_cost","similarity":0.6160639087242643}],"sales_quotes":[{"column":"total","similarity":0.6256755187649439}],"vendors":[{"column":"phone","similarity":0.6250325024206392},{"column":"vendor_number","similarity":0.5980532008806005}],"reorder_rules":[{"column":"max_quantity","similarity":0.6123863797677381}],"receipt_lines":[{"column":"quantity_received","similarity":0.6046309435687143}],"customer_contacts":[{"column":"phone","similarity":0.602251378896717}],"vendor_contacts":[{"column":"phone","similarity":0.5990225595345888}]},"fused_scores":[{"table":"sales_orders","fused":0.8029190624087694,"table_sim":0.6473006572264755,"col_score":1.0363466701822102},{"table":"order_lines","fused":0.788671115010414,"table_sim":0.6399839764362797,"col_score":1.0117018228716155},{"table":"purchase_orders","fused":0.7885151139833163,"table_sim":0.6359216236921361,"col_score":1.0174053494200865},{"table":"customers","fused":0.7725774792032212,"table_sim":0.6198957604307753,"col_score":1.0016000573618897},{"table":"vendor_invoices","fused":0.7418398032059306,"table_sim":0.5943908353227434,"col_score":0.9630132550307111},{"table":"po_lines","fused":0.7327834037195139,"table_sim":0.5791417572195606,"col_score":0.9632458734694438},{"table":"vendor_invoice_lines","fused":0.7252615854285459,"table_sim":0.5801466694219243,"col_score":0.9429339594384782},{"table":"vendors","fused":0.7120676955693377,"table_sim":0.5707400907082698,"col_score":0.9240591028609395},{"table":"product_suppliers","fused":0.6159625987501507,"table_sim":0.5995729306104617,"col_score":0.6405471009596841},{"table":"customer_contacts","fused":0.5914389519460346,"table_sim":0.5842306673122464,"col_score":0.602251378896717},{"table":"sales_quotes","fused":0.5902725621004286,"table_sim":0.5666705909907517,"col_score":0.6256755187649439},{"table":"vendor_contacts","fused":0.5814231498206768,"table_sim":0.5696902100114021,"col_score":0.5990225595345888},{"table":"goods_receipts","fused":0.3452001809067742,"table_sim":0.5753336348446236,"col_score":0},{"table":"sales_regions","fused":0.3368135905565097,"table_sim":0.5613559842608495,"col_score":0},{"table":"performance_reviews","fused":0.3367466915442352,"table_sim":0.5612444859070587,"col_score":0}],"fk_expansion_candidates":14,"fk_expansion_added":2,"fk_expansion_blocked_count":10,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"vendor_contacts","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":27,"total_retrieval_latency_ms":32,"sql_generated":"SELECT c.customer_id, SUM(s.total) AS total_order_value FROM customers c JOIN sales_orders s ON c.customer_id = s.customer_id GROUP BY c.customer_id ORDER BY total_order_value DESC LIMIT 10;","tables_used_in_sql":[],"explain_result":"success","rows_returned":10,"total_latency_ms":1020}
{"timestamp":"2026-01-29T19:45:43.999Z","query_id":"de2823d4-4a32-4cd0-a163-a18389f4efb5","question":"Show sales opportunities in the Negotiation stage worth over $50,000","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["sales_opportunities","opportunity_stages","sales_quotes","sales_orders","vendor_invoices","purchase_orders","positions","sales_regions","sales_territories","inventory_levels","fixed_assets","purchase_requisitions"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_opportunities","similarity":0.6992078050992712},{"table":"opportunity_stages","similarity":0.6655732816251885},{"table":"sales_quotes","similarity":0.5966843975960908},{"table":"sales_orders","similarity":0.5593486033229518},{"table":"sales_regions","similarity":0.5589767008926408},{"table":"sales_territories","similarity":0.5454458212189293},{"table":"purchase_orders","similarity":0.5420364894792326},{"table":"inventory_levels","similarity":0.5351174798622741},{"table":"positions","similarity":0.5335687678148762},{"table":"vendor_invoices","similarity":0.530033951859159},{"table":"purchase_requisitions","similarity":0.52468395466863},{"table":"fixed_assets","similarity":0.5210852939306287},{"table":"vendors","similarity":0.5206051380901591},{"table":"product_suppliers","similarity":0.5180116953474874},{"table":"stock_transfers","similarity":0.5145653894331007}],"column_hits_per_table":{"sales_opportunities":11,"sales_quotes":8,"opportunity_stages":6,"sales_orders":6,"sales_regions":2,"vendor_invoices":3,"project_milestones":2,"purchase_orders":3,"positions":2,"sales_territories":2,"fixed_assets":1,"vendor_invoice_lines":1,"inventory_levels":1,"purchase_requisitions":1,"vendors":1},"top_columns_per_table":{"sales_opportunities":[{"column":"amount","similarity":0.7218839163082612},{"column":"stage_id","similarity":0.716924419509995},{"column":"actual_close_date","similarity":0.6885771934035502}],"sales_quotes":[{"column":"opportunity_id","similarity":0.647441890535683},{"column":"total","similarity":0.6155916414203653},{"column":"subtotal","similarity":0.6055615457364606}],"opportunity_stages":[{"column":"sequence","similarity":0.6454142500136325},{"column":"is_won","similarity":0.6341237265976897},{"column":"probability","similarity":0.6324889797951576}],"sales_orders":[{"column":"total","similarity":0.620187694899569},{"column":"subtotal","similarity":0.6117656440801068},{"column":"shipping_cost","similarity":0.5821513623432988}],"sales_regions":[{"column":"target_revenue","similarity":0.5974090175243022},{"column":"name","similarity":0.555083452385604}],"vendor_invoices":[{"column":"total","similarity":0.5954243361867875},{"column":"subtotal","similarity":0.5865062592640437},{"column":"amount_paid","similarity":0.5632369336559707}],"project_milestones":[{"column":"amount","similarity":0.5837677671992427},{"column":"description","similarity":0.5491146358499412}],"purchase_orders":[{"column":"total","similarity":0.5819183589116524},{"column":"subtotal","similarity":0.5743568254746039},{"column":"tax_amount","similarity":0.5472165237974967}],"positions":[{"column":"max_salary","similarity":0.5779609042142907},{"column":"min_salary","similarity":0.5600539081817787}],"sales_territories":[{"column":"name","similarity":0.5672149440546744},{"column":"territory_id","similarity":0.5529670061701181}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5581280439698661}],"vendor_invoice_lines":[{"column":"amount","similarity":0.5566794113536152}],"inventory_levels":[{"column":"quantity_available","similarity":0.5552607980814753}],"purchase_requisitions":[{"column":"status","similarity":0.5540663995768337}],"vendors":[{"column":"payment_terms","similarity":0.5485963499255753}]},"fused_scores":[{"table":"sales_opportunities","fused":0.8459936882635772,"table_sim":0.6992078050992712,"col_score":1.0661725130100363},{"table":"opportunity_stages","fused":0.7843344143001041,"table_sim":0.6655732816251885,"col_score":0.9624761133124773},{"table":"sales_quotes","fused":0.7253596042730928,"table_sim":0.5966843975960908,"col_score":0.9183724142885956},{"table":"sales_orders","fused":0.70603736876962,"table_sim":0.5593486033229518,"col_score":0.9260705169396224},{"table":"vendor_invoices","fused":0.6734913574430191,"table_sim":0.530033951859159,"col_score":0.8886774658188092},{"table":"purchase_orders","fused":0.6728606023471213,"table_sim":0.5420364894792326,"col_score":0.8690967716489544},{"table":"positions","fused":0.6633364040109977,"table_sim":0.5335687678148762,"col_score":0.8579878583051801},{"table":"sales_regions","fused":0.6520613108792899,"table_sim":0.5589767008926408,"col_score":0.7916882258592636},{"table":"sales_territories","fused":0.5635030579304829,"table_sim":0.5454458212189293,"col_score":0.5905889129978134},{"table":"inventory_levels","fused":0.5431748071499546,"table_sim":0.5351174798622741,"col_score":0.5552607980814753},{"table":"fixed_assets","fused":0.5359023939463237,"table_sim":0.5210852939306287,"col_score":0.5581280439698661},{"table":"vendors","fused":0.5318016228243255,"table_sim":0.5206051380901591,"col_score":0.5485963499255753},{"table":"purchase_requisitions","fused":0.46994896468269143,"table_sim":0.52468395466863,"col_score":0.38784647970378355},{"table":"product_suppliers","fused":0.3108070172084924,"table_sim":0.5180116953474874,"col_score":0},{"table":"project_milestones","fused":0.31038315589868887,"table_sim":0,"col_score":0.7759578897467221}],"fk_expansion_candidates":15,"fk_expansion_added":2,"fk_expansion_blocked_count":11,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendors","reason":"max_tables"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":31,"total_retrieval_latency_ms":36,"sql_generated":"SELECT so.name AS opportunity_name, os.stage_id, os.probability FROM sales_opportunities so JOIN opportunity_stages os ON so.stage_id = os.stage_id WHERE so.amount > 50000 AND os.name = 'Negotiation';","tables_used_in_sql":[],"explain_result":"success","rows_returned":69,"total_latency_ms":1111}
{"timestamp":"2026-01-29T19:45:45.111Z","query_id":"0768aa24-456c-4e26-a046-08b6b451adad","question":"What is the conversion rate from quotes to orders?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["quote_lines","sales_quotes","sales_orders","order_lines","purchase_orders","po_lines","product_suppliers","vendor_invoice_lines","tax_rates","units_of_measure","goods_receipts","vendor_invoices"],"tables_from_table_retrieval":15,"tables_from_column_only":1,"tables_from_fk_expansion":2,"table_scores":[{"table":"quote_lines","similarity":0.6904269230356019},{"table":"sales_orders","similarity":0.6835641897302034},{"table":"sales_quotes","similarity":0.6684713746648914},{"table":"order_lines","similarity":0.6535630831611231},{"table":"purchase_orders","similarity":0.6306886393929901},{"table":"po_lines","similarity":0.6176945995415711},{"table":"product_suppliers","similarity":0.5906242515558167},{"table":"vendor_invoices","similarity":0.5859545887931735},{"table":"vendor_invoice_lines","similarity":0.5830820632852473},{"table":"goods_receipts","similarity":0.5790884419628168},{"table":"tax_rates","similarity":0.5718192537871447},{"table":"requisition_lines","similarity":0.5712220355781},{"table":"transfer_lines","similarity":0.5636706691019312},{"table":"units_of_measure","similarity":0.562966241975057},{"table":"performance_reviews","similarity":0.5624540759938077}],"column_hits_per_table":{"sales_orders":9,"quote_lines":6,"sales_quotes":11,"order_lines":6,"purchase_orders":9,"currencies":1,"product_suppliers":1,"po_lines":4,"vendor_invoice_lines":1,"tax_rates":1,"units_of_measure":1},"top_columns_per_table":{"sales_orders":[{"column":"quote_id","similarity":0.7232829089173333},{"column":"total","similarity":0.6782515905024311},{"column":"subtotal","similarity":0.6564656490145492}],"quote_lines":[{"column":"discount_percent","similarity":0.7208835983271276},{"column":"unit_price","similarity":0.704483517001721},{"column":"line_total","similarity":0.6863137629261619}],"sales_quotes":[{"column":"total","similarity":0.706142441581424},{"column":"quote_number","similarity":0.6925940339842922},{"column":"subtotal","similarity":0.6772561289459981}],"order_lines":[{"column":"discount_percent","similarity":0.6959860752364422},{"column":"unit_price","similarity":0.6669167849132327},{"column":"line_total","similarity":0.6535000947209797}],"purchase_orders":[{"column":"total","similarity":0.6835774808972174},{"column":"subtotal","similarity":0.6633148180662753},{"column":"shipping_cost","similarity":0.6595759377904514}],"currencies":[{"column":"exchange_rate","similarity":0.6420843010647603}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6294891258816252}],"po_lines":[{"column":"line_total","similarity":0.6268290778076593},{"column":"unit_cost","similarity":0.6264313657632602},{"column":"quantity_received","similarity":0.6234182435733836}],"vendor_invoice_lines":[{"column":"unit_cost","similarity":0.622062223414914}],"tax_rates":[{"column":"rate","similarity":0.6139738053543071}],"units_of_measure":[{"column":"conversion_factor","similarity":0.6098054698975929}]},"fused_scores":[{"table":"quote_lines","fused":0.8435062965525564,"table_sim":0.6904269230356019,"col_score":1.0731253568279882},{"table":"sales_quotes","fused":0.822058608228363,"table_sim":0.6684713746648914,"col_score":1.0524394585735701},{"table":"sales_orders","fused":0.8127322798420042,"table_sim":0.6835641897302034,"col_score":1.0064844150097056},{"table":"order_lines","fused":0.8039156369738973,"table_sim":0.6535630831611231,"col_score":1.0294444676930585},{"table":"purchase_orders","fused":0.7845071396079362,"table_sim":0.6306886393929901,"col_score":1.0152348899303552},{"table":"po_lines","fused":0.7466346640006585,"table_sim":0.6176945995415711,"col_score":0.9400447606892894},{"table":"product_suppliers","fused":0.6061702012861401,"table_sim":0.5906242515558167,"col_score":0.6294891258816252},{"table":"vendor_invoice_lines","fused":0.598674127337114,"table_sim":0.5830820632852473,"col_score":0.622062223414914},{"table":"tax_rates","fused":0.5886810744140096,"table_sim":0.5718192537871447,"col_score":0.6139738053543071},{"table":"units_of_measure","fused":0.5817019331440714,"table_sim":0.562966241975057,"col_score":0.6098054698975929},{"table":"vendor_invoices","fused":0.3515727532759041,"table_sim":0.5859545887931735,"col_score":0},{"table":"goods_receipts","fused":0.3474530651776901,"table_sim":0.5790884419628168,"col_score":0},{"table":"requisition_lines","fused":0.34273322134686,"table_sim":0.5712220355781,"col_score":0},{"table":"transfer_lines","fused":0.3382024014611587,"table_sim":0.5636706691019312,"col_score":0},{"table":"performance_reviews","fused":0.3374724455962846,"table_sim":0.5624540759938077,"col_score":0}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":11,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"countries","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":40,"total_retrieval_latency_ms":45,"sql_generated":"SELECT COUNT(sales_orders.order_id) / NULLIF(COUNT(quote_lines.line_id), 0) AS conversion_rate FROM sales_quotes JOIN quote_lines ON sales_quotes.quote_id = quote_lines.quote_id JOIN sales_orders ON quote_lines.order_id = sales_orders.order_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column quote_lines.order_id does not exist","autocorrect_attempted":false,"autocorrect_success":false,"autocorrect_failure_reason":"Could not parse undefined column from error message","total_latency_ms":3337,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column quote_lines.order_id does not exist"}
{"timestamp":"2026-01-29T19:45:48.448Z","query_id":"93b40671-dcea-48d9-8194-939d02627a5d","question":"List sales orders by sales representative with their totals","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_orders","purchase_orders","order_lines","sales_quotes","po_lines","sales_regions","vendor_invoices","receipt_lines","vendor_invoice_lines","product_suppliers","goods_receipts","quote_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.758754229471184},{"table":"purchase_orders","similarity":0.6987531686909988},{"table":"order_lines","similarity":0.6881373549198537},{"table":"goods_receipts","similarity":0.6456282553665884},{"table":"sales_quotes","similarity":0.6444526679613465},{"table":"sales_territories","similarity":0.6375070500401926},{"table":"sales_regions","similarity":0.6277211189501499},{"table":"vendor_invoices","similarity":0.6246861185869929},{"table":"po_lines","similarity":0.6084083791424837},{"table":"receipt_lines","similarity":0.6068971146953636},{"table":"product_suppliers","similarity":0.6062359599284572},{"table":"quote_lines","similarity":0.6037562036512956},{"table":"vendor_invoice_lines","similarity":0.6029372840473417},{"table":"inventory_levels","similarity":0.591644735010043},{"table":"requisition_lines","similarity":0.5902331648645791}],"column_hits_per_table":{"sales_orders":15,"purchase_orders":13,"sales_quotes":6,"order_lines":5,"sales_regions":1,"sales_territories":1,"vendor_invoices":1,"receipt_lines":1,"po_lines":2,"vendor_invoice_lines":1,"goods_receipts":1,"sales_opportunities":1,"product_suppliers":1,"inventory_transactions":1},"top_columns_per_table":{"sales_orders":[{"column":"total","similarity":0.7998245354916855},{"column":"tax_amount","similarity":0.7409304914795294},{"column":"subtotal","similarity":0.7386795928063996}],"purchase_orders":[{"column":"total","similarity":0.7369898987643527},{"column":"tax_amount","similarity":0.6880914687154579},{"column":"subtotal","similarity":0.6805274523503672}],"sales_quotes":[{"column":"total","similarity":0.7000946313237136},{"column":"status","similarity":0.6570352148347643},{"column":"tax_amount","similarity":0.6496185243884612}],"order_lines":[{"column":"quantity_shipped","similarity":0.6754287630112775},{"column":"line_total","similarity":0.6747818022026829},{"column":"order_id","similarity":0.6500926353163158}],"sales_regions":[{"column":"target_revenue","similarity":0.6609566639968198}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6507336012447592}],"vendor_invoices":[{"column":"total","similarity":0.6490968088980056}],"receipt_lines":[{"column":"quantity_received","similarity":0.6403091638652453}],"po_lines":[{"column":"line_total","similarity":0.633906772238869},{"column":"quantity_received","similarity":0.619669544018957}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.6318424746468201}],"goods_receipts":[{"column":"po_id","similarity":0.6305521343448763}],"sales_opportunities":[{"column":"amount","similarity":0.6247832200658987}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6242146192079842}],"inventory_transactions":[{"column":"quantity","similarity":0.6183812252695141}]},"fused_scores":[{"table":"sales_orders","fused":0.9233684501752903,"table_sim":0.758754229471184,"col_score":1.17028978123145},{"table":"purchase_orders","fused":0.8516661544634319,"table_sim":0.6987531686909988,"col_score":1.0810356331220816},{"table":"order_lines","fused":0.8180102785969599,"table_sim":0.6881373549198537,"col_score":1.012819664112619},{"table":"sales_quotes","fused":0.7966331581839856,"table_sim":0.6444526679613465,"col_score":1.0249038935179442},{"table":"po_lines","fused":0.7425416451848292,"table_sim":0.6084083791424837,"col_score":0.9437415442483476},{"table":"sales_regions","fused":0.6410153369688179,"table_sim":0.6277211189501499,"col_score":0.6609566639968198},{"table":"vendor_invoices","fused":0.634450394711398,"table_sim":0.6246861185869929,"col_score":0.6490968088980056},{"table":"receipt_lines","fused":0.6202619343633162,"table_sim":0.6068971146953636,"col_score":0.6403091638652453},{"table":"vendor_invoice_lines","fused":0.6144993602871331,"table_sim":0.6029372840473417,"col_score":0.6318424746468201},{"table":"product_suppliers","fused":0.613427423640268,"table_sim":0.6062359599284572,"col_score":0.6242146192079842},{"table":"sales_territories","fused":0.5647096383726481,"table_sim":0.6375070500401926,"col_score":0.4555135208713314},{"table":"goods_receipts","fused":0.5639315508365184,"table_sim":0.6456282553665884,"col_score":0.4413864940414134},{"table":"quote_lines","fused":0.36225372219077734,"table_sim":0.6037562036512956,"col_score":0},{"table":"inventory_levels","fused":0.3549868410060258,"table_sim":0.591644735010043,"col_score":0},{"table":"requisition_lines","fused":0.3541398989187475,"table_sim":0.5902331648645791,"col_score":0}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"sales_territories","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":18,"total_retrieval_latency_ms":24,"sql_generated":"SELECT sr.name, SUM(so.total) AS total_sales FROM sales_orders so JOIN sales_regions sr ON so.sales_rep_id = sr.employee_id GROUP BY sr.name;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column sr.employee_id does not exist","autocorrect_attempted":false,"autocorrect_success":false,"autocorrect_failure_reason":"Could not parse undefined column from error message","total_latency_ms":2333,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column sr.employee_id does not exist"}
{"timestamp":"2026-01-29T19:45:50.781Z","query_id":"c6d3977e-708a-4a9e-abc0-a8f4aa94bf57","question":"Which products have inventory below their reorder point?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["inventory_levels","reorder_rules","order_lines","purchase_orders","sales_orders","inventory_transactions","inventory_adjustments","products","product_suppliers","po_lines","adjustment_lines","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_levels","similarity":0.7070801714571546},{"table":"reorder_rules","similarity":0.6993615141081165},{"table":"order_lines","similarity":0.6642088827606001},{"table":"purchase_orders","similarity":0.6443483426703897},{"table":"inventory_transactions","similarity":0.6416382343377212},{"table":"products","similarity":0.6294483845877934},{"table":"sales_orders","similarity":0.6263982770622627},{"table":"inventory_adjustments","similarity":0.625212937166316},{"table":"product_suppliers","similarity":0.6251606663311581},{"table":"adjustment_lines","similarity":0.6130209514155518},{"table":"po_lines","similarity":0.6120042387827147},{"table":"requisition_lines","similarity":0.6038701680112407},{"table":"goods_receipts","similarity":0.6006720578725578},{"table":"product_categories","similarity":0.5982652346826921},{"table":"vendor_invoice_lines","similarity":0.5939487288947369}],"column_hits_per_table":{"inventory_levels":8,"reorder_rules":6,"order_lines":4,"sales_orders":6,"inventory_transactions":6,"po_lines":1,"inventory_adjustments":6,"purchase_orders":5,"requisition_lines":1,"product_suppliers":1,"warehouse_locations":1,"purchase_requisitions":2,"products":2,"receipt_lines":1},"top_columns_per_table":{"inventory_levels":[{"column":"product_id","similarity":0.6933487635392793},{"column":"last_count_date","similarity":0.6823075362329812},{"column":"quantity_reserved","similarity":0.6757460490667979}],"reorder_rules":[{"column":"product_id","similarity":0.6926440847612831},{"column":"reorder_quantity","similarity":0.6606737830959721},{"column":"max_quantity","similarity":0.6520065510249886}],"order_lines":[{"column":"product_id","similarity":0.6859094375448689},{"column":"quantity_shipped","similarity":0.6455034843795919},{"column":"quantity","similarity":0.6334487398094706}],"sales_orders":[{"column":"order_number","similarity":0.6639517787797891},{"column":"status","similarity":0.6466630830274546},{"column":"order_date","similarity":0.639183860244724}],"inventory_transactions":[{"column":"product_id","similarity":0.6577299676888266},{"column":"location_id","similarity":0.6475618823542578},{"column":"quantity","similarity":0.6407976916150718}],"po_lines":[{"column":"product_id","similarity":0.6572816867979093}],"inventory_adjustments":[{"column":"status","similarity":0.6508806959470139},{"column":"reason","similarity":0.6489151000391595},{"column":"adjustment_number","similarity":0.6357746244949577}],"purchase_orders":[{"column":"po_number","similarity":0.6499714608427599},{"column":"status","similarity":0.6425932566416922},{"column":"expected_date","similarity":0.6284413308063352}],"requisition_lines":[{"column":"product_id","similarity":0.6451053156263248}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.644742435890616}],"warehouse_locations":[{"column":"aisle","similarity":0.6337557011841548}],"purchase_requisitions":[{"column":"requisition_number","similarity":0.6250413268166893},{"column":"status","similarity":0.6175422714713268}],"products":[{"column":"list_price","similarity":0.623827175050673},{"column":"category_id","similarity":0.6206202221080743}],"receipt_lines":[{"column":"product_id","similarity":0.6141560834320862}]},"fused_scores":[{"table":"inventory_levels","fused":0.8323203271808449,"table_sim":0.7070801714571546,"col_score":1.0201805607663803},{"table":"reorder_rules","fused":0.8142877319082565,"table_sim":0.6993615141081165,"col_score":0.9866770586084664},{"table":"order_lines","fused":0.783416471370091,"table_sim":0.6642088827606001,"col_score":0.9622278542843272},{"table":"purchase_orders","fused":0.7722858561006047,"table_sim":0.6443483426703897,"col_score":0.9641921262459275},{"table":"sales_orders","fused":0.7692564497982181,"table_sim":0.6263982770622627,"col_score":0.983543708902151},{"table":"inventory_transactions","fused":0.7669992320885244,"table_sim":0.6416382343377212,"col_score":0.9550407287147291},{"table":"inventory_adjustments","fused":0.761848727214445,"table_sim":0.625212937166316,"col_score":0.9668024122866383},{"table":"products","fused":0.7140867318680757,"table_sim":0.6294483845877934,"col_score":0.8410442527884989},{"table":"product_suppliers","fused":0.6329933741549413,"table_sim":0.6251606663311581,"col_score":0.644742435890616},{"table":"po_lines","fused":0.5512414155730434,"table_sim":0.6120042387827147,"col_score":0.4600971807585365},{"table":"requisition_lines","fused":0.5429515891821154,"table_sim":0.6038701680112407,"col_score":0.4515737209384273},{"table":"adjustment_lines","fused":0.36781257084933106,"table_sim":0.6130209514155518,"col_score":0},{"table":"goods_receipts","fused":0.3604032347235347,"table_sim":0.6006720578725578,"col_score":0},{"table":"product_categories","fused":0.3589591408096153,"table_sim":0.5982652346826921,"col_score":0},{"table":"vendor_invoice_lines","fused":0.35636923733684217,"table_sim":0.5939487288947369,"col_score":0}],"fk_expansion_candidates":19,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"product_categories","reason":"max_tables"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":20,"total_retrieval_latency_ms":26,"sql_generated":"SELECT p.product_id, p.name FROM products p JOIN inventory_levels il ON p.product_id = il.product_id JOIN reorder_rules rr ON p.product_id = rr.product_id WHERE il.quantity_available < rr.min_quantity;","tables_used_in_sql":[],"explain_result":"success","rows_returned":41,"total_latency_ms":1092}
{"timestamp":"2026-01-29T19:45:51.874Z","query_id":"c2dbc975-2a76-4bf8-b270-f6b13a68e8e6","question":"Show total inventory value by warehouse","attempt_count":2,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["inventory_levels","warehouse_locations","inventory_transactions","warehouses","inventory_adjustments","sales_orders","stock_transfers","purchase_orders","fixed_assets","product_suppliers","goods_receipts","reorder_rules"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_levels","similarity":0.7104203582862987},{"table":"inventory_transactions","similarity":0.680757846413893},{"table":"warehouse_locations","similarity":0.6688272683283106},{"table":"inventory_adjustments","similarity":0.6606002830367331},{"table":"warehouses","similarity":0.6556396900395098},{"table":"goods_receipts","similarity":0.6485940357294664},{"table":"stock_transfers","similarity":0.6361222068277603},{"table":"receipt_lines","similarity":0.599261793575482},{"table":"fixed_assets","similarity":0.5815202009406938},{"table":"purchase_orders","similarity":0.572969973940203},{"table":"asset_categories","similarity":0.5669210401950147},{"table":"asset_maintenance","similarity":0.5650580534060331},{"table":"product_suppliers","similarity":0.5642200983640595},{"table":"sales_orders","similarity":0.5616335878669071},{"table":"reorder_rules","similarity":0.5613905707653182}],"column_hits_per_table":{"inventory_levels":8,"inventory_transactions":7,"inventory_adjustments":2,"goods_receipts":1,"warehouses":6,"stock_transfers":2,"warehouse_locations":7,"sales_orders":3,"vendor_invoices":2,"purchase_orders":1,"budgets":1,"sales_quotes":1,"departments":1,"receipt_lines":1,"product_suppliers":1,"reorder_rules":1,"depreciation_entries":2,"products":2,"fixed_assets":1},"top_columns_per_table":{"inventory_levels":[{"column":"warehouse_id","similarity":0.7245152932924512},{"column":"location_id","similarity":0.670229449220733},{"column":"quantity_available","similarity":0.6634243412325281}],"inventory_transactions":[{"column":"warehouse_id","similarity":0.7126219801719647},{"column":"quantity","similarity":0.6882665247995969},{"column":"location_id","similarity":0.6644472601923928}],"inventory_adjustments":[{"column":"warehouse_id","similarity":0.7000232196630412},{"column":"adjusted_by","similarity":0.6038072357651799}],"goods_receipts":[{"column":"warehouse_id","similarity":0.6983268325646605}],"warehouses":[{"column":"warehouse_id","similarity":0.6884846242517689},{"column":"code","similarity":0.666009086549763},{"column":"manager_id","similarity":0.6602922237598574}],"stock_transfers":[{"column":"to_warehouse_id","similarity":0.68127907076134},{"column":"from_warehouse_id","similarity":0.6749809961693801}],"warehouse_locations":[{"column":"capacity","similarity":0.6795034389771706},{"column":"warehouse_id","similarity":0.6699168364120748},{"column":"aisle","similarity":0.6398304684247763}],"sales_orders":[{"column":"total","similarity":0.6721682901729499},{"column":"tax_amount","similarity":0.6091494655585886},{"column":"shipping_cost","similarity":0.6058838567040926}],"vendor_invoices":[{"column":"total","similarity":0.6677524443677078},{"column":"subtotal","similarity":0.600674989172044}],"purchase_orders":[{"column":"total","similarity":0.6534737529838377}],"budgets":[{"column":"total_amount","similarity":0.6378055154758845}],"sales_quotes":[{"column":"total","similarity":0.623918506647635}],"departments":[{"column":"budget","similarity":0.6201249087174965}],"receipt_lines":[{"column":"location_id","similarity":0.6169512352230854}],"product_suppliers":[{"column":"unit_cost","similarity":0.6157369492414859}],"reorder_rules":[{"column":"warehouse_id","similarity":0.6106322891909687}],"depreciation_entries":[{"column":"amount","similarity":0.6082306456614778},{"column":"book_value","similarity":0.6060019840891933}],"products":[{"column":"unit_cost","similarity":0.6081881272182337},{"column":"list_price","similarity":0.6022375697293547}],"fixed_assets":[{"column":"disposal_amount","similarity":0.6045093113587248}]},"fused_scores":[{"table":"inventory_levels","fused":0.8234550149369311,"table_sim":0.7104203582862987,"col_score":0.9930069999128798},{"table":"warehouse_locations","fused":0.8010638302728099,"table_sim":0.6688272683283106,"col_score":0.9994186731895587},{"table":"inventory_transactions","fused":0.7835283949922496,"table_sim":0.680757846413893,"col_score":0.9376842178597845},{"table":"warehouses","fused":0.7561752960388588,"table_sim":0.6556396900395098,"col_score":0.9069787050378821},{"table":"inventory_adjustments","fused":0.7358863148809376,"table_sim":0.6606002830367331,"col_score":0.8488153626472443},{"table":"sales_orders","fused":0.7276773619010419,"table_sim":0.5616335878669071,"col_score":0.9767430229522442},{"table":"stock_transfers","fused":0.6669288033735445,"table_sim":0.6361222068277603,"col_score":0.713138698192221},{"table":"purchase_orders","fused":0.6051714855576569,"table_sim":0.572969973940203,"col_score":0.6534737529838377},{"table":"fixed_assets","fused":0.5907158451079062,"table_sim":0.5815202009406938,"col_score":0.6045093113587248},{"table":"product_suppliers","fused":0.58482683871503,"table_sim":0.5642200983640595,"col_score":0.6157369492414859},{"table":"goods_receipts","fused":0.5846879345557847,"table_sim":0.6485940357294664,"col_score":0.4888287827952624},{"table":"receipt_lines","fused":0.5323034220077532,"table_sim":0.599261793575482,"col_score":0.4318658646561597},{"table":"reorder_rules","fused":0.5078113834326621,"table_sim":0.5613905707653182,"col_score":0.42744260243367804},{"table":"vendor_invoices","fused":0.3872359755814919,"table_sim":0,"col_score":0.9680899389537297},{"table":"depreciation_entries","fused":0.3644926550824298,"table_sim":0,"col_score":0.9112316377060744}],"fk_expansion_candidates":21,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"employees","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_categories","reason":"max_tables"},{"table":"order_lines","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"vendor_invoices","reason":"max_tables"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"receipt_lines","reason":"max_tables"},{"table":"products","reason":"max_tables"},{"table":"customers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"max_tables"},{"table":"sales_quotes","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":25,"total_retrieval_latency_ms":31,"sql_generated":"","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column w.location_id does not exist","autocorrect_attempted":false,"autocorrect_success":false,"autocorrect_failure_reason":"Could not parse undefined column from error message","total_latency_ms":1941,"failure_type":"execution_error","failure_details":"Model did not generate SELECT statement"}
{"timestamp":"2026-01-29T19:45:53.815Z","query_id":"3127b627-bab0-45b7-874d-c96f388f8166","question":"List products that had stock transfers in the last 30 days","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["stock_transfers","asset_transfers","product_suppliers","transfer_lines","products","sales_orders","purchase_orders","sales_opportunities","inventory_transactions","bank_transactions","goods_receipts","inventory_levels"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"stock_transfers","similarity":0.7091850354041176},{"table":"transfer_lines","similarity":0.646870577681612},{"table":"asset_transfers","similarity":0.59288750153646},{"table":"product_suppliers","similarity":0.5817884382151997},{"table":"goods_receipts","similarity":0.5680812156740983},{"table":"products","similarity":0.5634067444500328},{"table":"inventory_transactions","similarity":0.5602292192430635},{"table":"purchase_orders","similarity":0.5596151991091506},{"table":"fixed_assets","similarity":0.5580960077160902},{"table":"sales_orders","similarity":0.5561090865394333},{"table":"sales_opportunities","similarity":0.5491462356670244},{"table":"asset_maintenance","similarity":0.5473904753072384},{"table":"purchase_requisitions","similarity":0.5332712706373074},{"table":"bank_transactions","similarity":0.5331448467569079},{"table":"inventory_adjustments","similarity":0.530733629333142}],"column_hits_per_table":{"stock_transfers":9,"asset_transfers":4,"product_suppliers":2,"products":7,"fixed_assets":1,"transfer_lines":3,"sales_orders":3,"goods_receipts":2,"sales_opportunities":2,"purchase_orders":3,"inventory_transactions":2,"bank_transactions":3,"inventory_adjustments":2,"sales_quotes":2,"asset_maintenance":1,"purchase_requisitions":2,"inventory_levels":1,"vendor_invoices":1},"top_columns_per_table":{"stock_transfers":[{"column":"transfer_date","similarity":0.7569744068757143},{"column":"requested_date","similarity":0.7407780240698681},{"column":"status","similarity":0.7336388205522848}],"asset_transfers":[{"column":"transfer_date","similarity":0.6801557927296986},{"column":"reason","similarity":0.636937017402658},{"column":"transferred_by","similarity":0.591261555474914}],"product_suppliers":[{"column":"lead_time_days","similarity":0.6325433597312592},{"column":"vendor_sku","similarity":0.5983939107153067}],"products":[{"column":"weight","similarity":0.6269164154643503},{"column":"sku","similarity":0.6128165683332525},{"column":"name","similarity":0.6112501339273688}],"fixed_assets":[{"column":"purchase_date","similarity":0.6194298336524596}],"transfer_lines":[{"column":"transfer_id","similarity":0.616838099560071},{"column":"product_id","similarity":0.6124982850699332},{"column":"quantity_transferred","similarity":0.5929855373409126}],"sales_orders":[{"column":"ship_date","similarity":0.6139033315106148},{"column":"status","similarity":0.5980018171133202},{"column":"order_date","similarity":0.5881191497886654}],"goods_receipts":[{"column":"receipt_date","similarity":0.6086781538927446},{"column":"notes","similarity":0.5962651293145639}],"sales_opportunities":[{"column":"actual_close_date","similarity":0.6071636494672776},{"column":"expected_close_date","similarity":0.5912239207558383}],"purchase_orders":[{"column":"status","similarity":0.6014695517939539},{"column":"expected_date","similarity":0.5942592923069729},{"column":"order_date","similarity":0.5880912431098863}],"inventory_transactions":[{"column":"transaction_date","similarity":0.5945769623932919},{"column":"reference_type","similarity":0.5800879925710923}],"bank_transactions":[{"column":"transaction_date","similarity":0.5929428887812874},{"column":"reference","similarity":0.5783350592316007},{"column":"reconciled","similarity":0.5781446888114008}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.5902712511353371},{"column":"status","similarity":0.5772237526402182}],"sales_quotes":[{"column":"valid_until","similarity":0.5888547647382517},{"column":"status","similarity":0.587261164996558}],"asset_maintenance":[{"column":"completed_date","similarity":0.586704390488891}],"purchase_requisitions":[{"column":"status","similarity":0.5849457914930625},{"column":"approved_date","similarity":0.5749663116518828}],"inventory_levels":[{"column":"last_count_date","similarity":0.5761760152247924}],"vendor_invoices":[{"column":"status","similarity":0.5752789063344165}]},"fused_scores":[{"table":"stock_transfers","fused":0.8764563888067298,"table_sim":0.7091850354041176,"col_score":1.1273634189106483},{"table":"asset_transfers","fused":0.755182221494287,"table_sim":0.59288750153646,"col_score":0.9986243014310277},{"table":"product_suppliers","fused":0.7217691889646848,"table_sim":0.5817884382151997,"col_score":0.9317403150889125},{"table":"transfer_lines","fused":0.7116738954837423,"table_sim":0.646870577681612,"col_score":0.8088788721869374},{"table":"products","fused":0.7113739265224104,"table_sim":0.5634067444500328,"col_score":0.9333246996309765},{"table":"sales_orders","fused":0.696850614485639,"table_sim":0.5561090865394333,"col_score":0.9079629064049475},{"table":"purchase_orders","fused":0.6910910850102567,"table_sim":0.5596151991091506,"col_score":0.8883049138619161},{"table":"sales_opportunities","fused":0.6905979853382933,"table_sim":0.5491462356670244,"col_score":0.9027756098451968},{"table":"inventory_transactions","fused":0.6899859150173733,"table_sim":0.5602292192430635,"col_score":0.884620958678838},{"table":"bank_transactions","fused":0.6727310754129798,"table_sim":0.5331448467569079,"col_score":0.8821104183970878},{"table":"goods_receipts","fused":0.6677971090655958,"table_sim":0.5680812156740983,"col_score":0.8173709491528419},{"table":"inventory_adjustments","fused":0.6353600034236506,"table_sim":0.530733629333142,"col_score":0.7922995645594134},{"table":"purchase_requisitions","fused":0.6318416978521664,"table_sim":0.5332712706373074,"col_score":0.7796973386744547},{"table":"fixed_assets","fused":0.582629538090638,"table_sim":0.5580960077160902,"col_score":0.6194298336524596},{"table":"asset_maintenance","fused":0.5631160413798995,"table_sim":0.5473904753072384,"col_score":0.586704390488891}],"fk_expansion_candidates":24,"fk_expansion_added":2,"fk_expansion_blocked_count":19,"fk_expansion_blocked":[{"table":"employees","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"sales_quotes","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"bank_accounts","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":15,"total_retrieval_latency_ms":20,"sql_generated":"SELECT DISTINCT p.product_id, p.name FROM products AS p JOIN inventory_transactions AS it ON p.product_id = it.product_id AND it.transaction_date >= CURRENT_DATE - INTERVAL '30 days' WHERE EXISTS (SELECT 1 FROM stock_transfers st WHERE st.product_id = p.product_id);","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column st.product_id does not exist","autocorrect_attempted":false,"autocorrect_success":false,"autocorrect_failure_reason":"Could not parse undefined column from error message","total_latency_ms":3491,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column st.product_id does not exist"}
{"timestamp":"2026-01-29T19:45:57.306Z","query_id":"79fc49a2-8f3f-4186-90aa-ab8006a6f86f","question":"What is the total spend by vendor this year?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["vendor_invoices","purchase_orders","vendors","project_expenses","vendor_invoice_lines","budgets","project_budgets","sales_orders","product_suppliers","purchase_requisitions","budget_lines","fiscal_years"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"vendor_invoices","similarity":0.639424435349415},{"table":"vendors","similarity":0.6244918790926227},{"table":"purchase_orders","similarity":0.6177456671712362},{"table":"product_suppliers","similarity":0.598703660216106},{"table":"fiscal_years","similarity":0.5958886040093712},{"table":"project_expenses","similarity":0.5917559199865416},{"table":"vendor_contacts","similarity":0.5871352454607119},{"table":"project_budgets","similarity":0.5783111700735831},{"table":"vendor_invoice_lines","similarity":0.5735528102960924},{"table":"budgets","similarity":0.5729808761794307},{"table":"sales_orders","similarity":0.558652322840589},{"table":"purchase_requisitions","similarity":0.5504399922373249},{"table":"fiscal_periods","similarity":0.5474194111304026},{"table":"goods_receipts","similarity":0.5455071550265284},{"table":"cost_centers","similarity":0.5407092339260996}],"column_hits_per_table":{"vendor_invoices":10,"budgets":2,"purchase_orders":5,"vendor_invoice_lines":3,"vendors":9,"project_expenses":3,"project_budgets":2,"sales_orders":2,"product_suppliers":2,"sales_quotes":2,"projects":1,"fixed_assets":3,"asset_maintenance":1,"budget_lines":1,"products":1,"depreciation_schedules":1,"purchase_requisitions":1,"cost_centers":1},"top_columns_per_table":{"vendor_invoices":[{"column":"total","similarity":0.7074726026964867},{"column":"tax_amount","similarity":0.6649497692347739},{"column":"amount_paid","similarity":0.6613394434119355}],"budgets":[{"column":"total_amount","similarity":0.6614983036750417},{"column":"approved_by","similarity":0.5947070667678063}],"purchase_orders":[{"column":"total","similarity":0.6515245249628966},{"column":"tax_amount","similarity":0.6241597829948147},{"column":"vendor_id","similarity":0.6143595728723519}],"vendor_invoice_lines":[{"column":"unit_cost","similarity":0.6418835765382308},{"column":"amount","similarity":0.640406660125043},{"column":"quantity","similarity":0.6011977568369454}],"vendors":[{"column":"payment_terms","similarity":0.6369764670557316},{"column":"vendor_number","similarity":0.6217316370349235},{"column":"phone","similarity":0.6164215736258496}],"project_expenses":[{"column":"expense_date","similarity":0.6340219496762818},{"column":"amount","similarity":0.6226087404303633},{"column":"approved_by","similarity":0.5951826173297748}],"project_budgets":[{"column":"actual_amount","similarity":0.6339228432560066},{"column":"planned_amount","similarity":0.6124397686150321}],"sales_orders":[{"column":"total","similarity":0.6331667607848637},{"column":"tax_amount","similarity":0.5979011469280059}],"product_suppliers":[{"column":"unit_cost","similarity":0.627453917704397},{"column":"vendor_id","similarity":0.6081443532598847}],"sales_quotes":[{"column":"total","similarity":0.6239159141661016},{"column":"tax_amount","similarity":0.5928428446380807}],"projects":[{"column":"budget","similarity":0.6156140380189964}],"fixed_assets":[{"column":"vendor_id","similarity":0.6143746297105622},{"column":"purchase_cost","similarity":0.6016807292507821},{"column":"purchase_date","similarity":0.5932914020371511}],"asset_maintenance":[{"column":"vendor_id","similarity":0.6041941466937952}],"budget_lines":[{"column":"amount","similarity":0.6028914729549076}],"products":[{"column":"unit_cost","similarity":0.59947881070682}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5989680887270853}],"purchase_requisitions":[{"column":"approved_date","similarity":0.5937593260844434}],"cost_centers":[{"column":"is_active","similarity":0.5896614020585967}]},"fused_scores":[{"table":"vendor_invoices","fused":0.7996336561351984,"table_sim":0.639424435349415,"col_score":1.0399474873138737},{"table":"purchase_orders","fused":0.7560891668868633,"table_sim":0.6177456671712362,"col_score":0.9636044164603039},{"table":"vendors","fused":0.753832041684851,"table_sim":0.6244918790926227,"col_score":0.9478422855731934},{"table":"project_expenses","fused":0.7331840799485103,"table_sim":0.5917559199865416,"col_score":0.9453263198914634},{"table":"vendor_invoice_lines","fused":0.7289664488179564,"table_sim":0.5735528102960924,"col_score":0.9620869066007522},{"table":"budgets","fused":0.7273292605312365,"table_sim":0.5729808761794307,"col_score":0.9588518370589448},{"table":"project_budgets","fused":0.723043793069559,"table_sim":0.5783111700735831,"col_score":0.9401427275635226},{"table":"sales_orders","fused":0.7080383274039,"table_sim":0.558652322840589,"col_score":0.9321173342488667},{"table":"product_suppliers","fused":0.6953439726678063,"table_sim":0.598703660216106,"col_score":0.8403044413453566},{"table":"purchase_requisitions","fused":0.5677677257761723,"table_sim":0.5504399922373249,"col_score":0.5937593260844434},{"table":"cost_centers","fused":0.48953073293206684,"table_sim":0.5407092339260996,"col_score":0.4127629814410177},{"table":"sales_quotes","fused":0.3681349345940568,"table_sim":0,"col_score":0.9203373364851419},{"table":"fixed_assets","fused":0.3593305721077431,"table_sim":0,"col_score":0.8983264302693577},{"table":"fiscal_years","fused":0.35753316240562266,"table_sim":0.5958886040093712,"col_score":0},{"table":"vendor_contacts","fused":0.3522811472764272,"table_sim":0.5871352454607119,"col_score":0}],"fk_expansion_candidates":18,"fk_expansion_added":2,"fk_expansion_blocked_count":10,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"goods_receipts","reason":"max_tables"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"max_tables"},{"table":"projects","reason":"max_tables"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"vendor_contacts","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":28,"total_retrieval_latency_ms":33,"sql_generated":"SELECT v.vendor_id, SUM(vi.amount) AS total_spend FROM vendor_invoices vi JOIN vendors v ON vi.vendor_id = v.vendor_id WHERE EXTRACT(YEAR FROM vi.invoice_date) = EXTRACT(YEAR FROM CURRENT_DATE) GROUP BY v.vendor_id;","tables_used_in_sql":[],"total_latency_ms":3466,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T19:46:00.772Z","query_id":"051c7a1b-94e7-44ff-b948-86bdbf479e7d","question":"List purchase orders that are overdue (expected date passed but not received)","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["purchase_orders","sales_orders","purchase_requisitions","vendor_invoices","goods_receipts","order_lines","performance_reviews","po_lines","timesheets","stock_transfers","fixed_assets","receipt_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"purchase_orders","similarity":0.6892780734130105},{"table":"sales_orders","similarity":0.6436897773327827},{"table":"goods_receipts","similarity":0.6352418457409176},{"table":"purchase_requisitions","similarity":0.6320653594363884},{"table":"order_lines","similarity":0.6266578306760409},{"table":"vendor_invoices","similarity":0.6080136686064002},{"table":"po_lines","similarity":0.6011866959038077},{"table":"requisition_lines","similarity":0.5693577300655596},{"table":"receipt_lines","similarity":0.5677454518528996},{"table":"product_suppliers","similarity":0.5615090637021368},{"table":"stock_transfers","similarity":0.5602310027454163},{"table":"timesheets","similarity":0.5554457572922294},{"table":"sales_opportunities","similarity":0.545868201128478},{"table":"performance_reviews","similarity":0.5450261489382808},{"table":"vendor_invoice_lines","similarity":0.5442160951221834}],"column_hits_per_table":{"purchase_orders":15,"sales_orders":8,"purchase_requisitions":6,"vendor_invoices":3,"fixed_assets":1,"stock_transfers":1,"performance_reviews":3,"order_lines":3,"goods_receipts":2,"sales_opportunities":1,"sales_quotes":2,"po_lines":2,"inventory_transactions":1,"timesheets":2},"top_columns_per_table":{"purchase_orders":[{"column":"expected_date","similarity":0.7928880554606059},{"column":"order_date","similarity":0.7657440492397745},{"column":"status","similarity":0.7519184819415597}],"sales_orders":[{"column":"order_date","similarity":0.7211283730098031},{"column":"required_date","similarity":0.7169867205643441},{"column":"ship_date","similarity":0.709284550816042}],"purchase_requisitions":[{"column":"approved_date","similarity":0.6836791699738378},{"column":"request_date","similarity":0.6834968678419967},{"column":"required_date","similarity":0.6788387331991973}],"vendor_invoices":[{"column":"due_date","similarity":0.6486593581769071},{"column":"status","similarity":0.6338796222049127},{"column":"invoice_date","similarity":0.6295602886682071}],"fixed_assets":[{"column":"purchase_date","similarity":0.6430714322189274}],"stock_transfers":[{"column":"requested_date","similarity":0.637706246401799}],"performance_reviews":[{"column":"review_date","similarity":0.6367120823797185},{"column":"review_period_end","similarity":0.6226937978004472},{"column":"review_period_start","similarity":0.6126884795240689}],"order_lines":[{"column":"quantity_shipped","similarity":0.6309090622279526},{"column":"order_id","similarity":0.615272097850357},{"column":"product_id","similarity":0.6125179904480164}],"goods_receipts":[{"column":"po_id","similarity":0.6298071972797271},{"column":"receipt_date","similarity":0.6286410440687602}],"sales_opportunities":[{"column":"expected_close_date","similarity":0.6266064464168489}],"sales_quotes":[{"column":"status","similarity":0.6252578342715298},{"column":"valid_until","similarity":0.6173297581247675}],"po_lines":[{"column":"po_id","similarity":0.6215991718566652},{"column":"quantity_received","similarity":0.6148659346007377}],"inventory_transactions":[{"column":"transaction_date","similarity":0.6171947868805752}],"timesheets":[{"column":"status","similarity":0.6144646954961696},{"column":"approved_date","similarity":0.6115859961900876}]},"fused_scores":[{"table":"purchase_orders","fused":0.8838708760800036,"table_sim":0.6892780734130105,"col_score":1.1757600800804933},{"table":"sales_orders","fused":0.8180625597164597,"table_sim":0.6436897773327827,"col_score":1.079621733291975},{"table":"purchase_requisitions","fused":0.7894102572197675,"table_sim":0.6320653594363884,"col_score":1.0254276038948362},{"table":"vendor_invoices","fused":0.7501840021682444,"table_sim":0.6080136686064002,"col_score":0.9634395025110107},{"table":"goods_receipts","fused":0.7207745326912165,"table_sim":0.6352418457409176,"col_score":0.8490735631166647},{"table":"order_lines","fused":0.7144964169958555,"table_sim":0.6266578306760409,"col_score":0.8462542964755775},{"table":"performance_reviews","fused":0.7062392818749454,"table_sim":0.5450261489382808,"col_score":0.9480589812799421},{"table":"po_lines","fused":0.6936822754425128,"table_sim":0.6011866959038077,"col_score":0.8324256447505705},{"table":"timesheets","fused":0.6639269102208365,"table_sim":0.5554457572922294,"col_score":0.8266486396137469},{"table":"stock_transfers","fused":0.5912211002079693,"table_sim":0.5602310027454163,"col_score":0.637706246401799},{"table":"sales_opportunities","fused":0.5781634992438264,"table_sim":0.545868201128478,"col_score":0.6266064464168489},{"table":"requisition_lines","fused":0.3416146380393357,"table_sim":0.5693577300655596,"col_score":0},{"table":"receipt_lines","fused":0.34064727111173976,"table_sim":0.5677454518528996,"col_score":0},{"table":"product_suppliers","fused":0.3369054382212821,"table_sim":0.5615090637021368,"col_score":0},{"table":"sales_quotes","fused":0.3344680000479212,"table_sim":0,"col_score":0.8361700001198029}],"fk_expansion_candidates":14,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"requisition_lines","reason":"max_tables"},{"table":"sales_quotes","reason":"max_tables"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":31,"total_retrieval_latency_ms":37,"sql_generated":"SELECT po.po_id AS \"Purchase Order ID\", po.po_number AS \"Purchase Order Number\", po.order_date, po.required_date, po.status AS \"Status\" FROM purchase_orders po JOIN goods_receipts gr ON po.po_id = gr.po_id AND gr.receipt_date > CURRENT_DATE WHERE po.expected_date < CURRENT_DATE;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column po.required_date does not exist","autocorrect_attempted":false,"autocorrect_success":false,"autocorrect_failure_reason":"Could not parse undefined column from error message","total_latency_ms":3951,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column po.required_date does not exist"}
{"timestamp":"2026-01-29T19:46:04.723Z","query_id":"4d5884f3-e8d8-40bc-b300-ff0a1c680759","question":"Show the approval rate for purchase requisitions","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["purchase_requisitions","purchase_orders","requisition_lines","performance_reviews","sales_orders","inventory_adjustments","employee_salaries","vendor_invoices","tax_rates","product_suppliers","fixed_assets","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"purchase_requisitions","similarity":0.7144537875190509},{"table":"purchase_orders","similarity":0.6754585362390629},{"table":"requisition_lines","similarity":0.6526067337493826},{"table":"performance_reviews","similarity":0.5761025171829891},{"table":"vendor_invoices","similarity":0.5620813724541878},{"table":"sales_orders","similarity":0.5600540620423634},{"table":"inventory_adjustments","similarity":0.5560987141173879},{"table":"tax_rates","similarity":0.5556126665897644},{"table":"goods_receipts","similarity":0.5543356866163649},{"table":"certifications","similarity":0.5535315897541819},{"table":"product_suppliers","similarity":0.5532001558068573},{"table":"employee_salaries","similarity":0.5514561137792826},{"table":"po_lines","similarity":0.5507992972695006},{"table":"sales_territories","similarity":0.5472861793239767},{"table":"products","similarity":0.5453782545044963}],"column_hits_per_table":{"purchase_requisitions":11,"purchase_orders":12,"requisition_lines":5,"inventory_adjustments":1,"budgets":1,"performance_reviews":2,"employee_salaries":1,"project_expenses":1,"fixed_assets":2,"order_lines":1,"sales_orders":5,"timesheets":2,"tax_rates":1,"vendor_invoices":1,"project_resources":1,"quote_lines":1,"leave_requests":1,"product_suppliers":1},"top_columns_per_table":{"purchase_requisitions":[{"column":"approved_date","similarity":0.7767304385632029},{"column":"approved_by","similarity":0.7409449955495064},{"column":"requisition_number","similarity":0.7030808814464901}],"purchase_orders":[{"column":"approved_by","similarity":0.6946429533793925},{"column":"requisition_id","similarity":0.6718178582077006},{"column":"total","similarity":0.6683455402204478}],"requisition_lines":[{"column":"requisition_id","similarity":0.6376933087031063},{"column":"estimated_unit_cost","similarity":0.6333969557807274},{"column":"estimated_total","similarity":0.6312495690965759}],"inventory_adjustments":[{"column":"approved_by","similarity":0.6329021901958755}],"budgets":[{"column":"approved_by","similarity":0.6302903790830208}],"performance_reviews":[{"column":"goals_met_percent","similarity":0.6188795533101473},{"column":"rating","similarity":0.5953158785793504}],"employee_salaries":[{"column":"approved_by","similarity":0.6123122319484439}],"project_expenses":[{"column":"approved_by","similarity":0.6113584792040475}],"fixed_assets":[{"column":"purchase_cost","similarity":0.6112437587362358},{"column":"purchase_date","similarity":0.5752418077647418}],"order_lines":[{"column":"discount_percent","similarity":0.6107292969296323}],"sales_orders":[{"column":"total","similarity":0.607277665069308},{"column":"tax_amount","similarity":0.5855697288885665},{"column":"shipping_cost","similarity":0.5854713890413684}],"timesheets":[{"column":"approved_by","similarity":0.6059821911915741},{"column":"approved_date","similarity":0.5902187567696575}],"tax_rates":[{"column":"rate","similarity":0.5848985367091032}],"vendor_invoices":[{"column":"total","similarity":0.5829198135909294}],"project_resources":[{"column":"hourly_rate","similarity":0.5785087387167567}],"quote_lines":[{"column":"discount_percent","similarity":0.5783180170181821}],"leave_requests":[{"column":"approved_by","similarity":0.5782476386378983}],"product_suppliers":[{"column":"unit_cost","similarity":0.5763419254825446}]},"fused_scores":[{"table":"purchase_requisitions","fused":0.887553447046613,"table_sim":0.7144537875190509,"col_score":1.1472029363379561},{"table":"purchase_orders","fused":0.8168014111392844,"table_sim":0.6754585362390629,"col_score":1.0288157234896165},{"table":"requisition_lines","fused":0.7711727363812357,"table_sim":0.6526067337493826,"col_score":0.9490217403290153},{"table":"performance_reviews","fused":0.7122765073497226,"table_sim":0.5761025171829891,"col_score":0.9165374925998225},{"table":"sales_orders","fused":0.6960574490308546,"table_sim":0.5600540620423634,"col_score":0.9000625295135913},{"table":"inventory_adjustments","fused":0.5868201045487829,"table_sim":0.5560987141173879,"col_score":0.6329021901958755},{"table":"employee_salaries","fused":0.5757985610469472,"table_sim":0.5514561137792826,"col_score":0.6123122319484439},{"table":"vendor_invoices","fused":0.5704167489088845,"table_sim":0.5620813724541878,"col_score":0.5829198135909294},{"table":"tax_rates","fused":0.5673270146374999,"table_sim":0.5556126665897644,"col_score":0.5848985367091032},{"table":"product_suppliers","fused":0.5624568636771322,"table_sim":0.5532001558068573,"col_score":0.5763419254825446},{"table":"timesheets","fused":0.3604366278305612,"table_sim":0,"col_score":0.9010915695764029},{"table":"fixed_assets","fused":0.35954586504744274,"table_sim":0,"col_score":0.8988646626186068},{"table":"goods_receipts","fused":0.3326014119698189,"table_sim":0.5543356866163649,"col_score":0},{"table":"certifications","fused":0.33211895385250917,"table_sim":0.5535315897541819,"col_score":0},{"table":"po_lines","fused":0.33047957836170033,"table_sim":0.5507992972695006,"col_score":0}],"fk_expansion_candidates":15,"fk_expansion_added":2,"fk_expansion_blocked_count":10,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"countries","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"order_lines","reason":"max_tables"},{"table":"po_lines","reason":"max_tables"},{"table":"products","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":46,"total_retrieval_latency_ms":52,"sql_generated":"SELECT COUNT(DISTINCT p.po_id) AS approved_requisitions, COUNT(*) AS total_requisitions FROM purchase_orders p JOIN purchase_requisitions pr ON p.po_id = pr.requisition_id WHERE pr.status = 'approved' GROUP BY p.po_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":109,"total_latency_ms":1139}
{"timestamp":"2026-01-29T19:46:05.862Z","query_id":"24e4690c-ae51-4f95-9cc2-7954c9eb6a0f","question":"What is the total debit and credit for each account in the current period?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["bank_accounts","depreciation_entries","depreciation_schedules","bank_transactions","project_budgets","budgets","budget_lines","asset_categories","chart_of_accounts","customers","account_types","currencies"],"tables_from_table_retrieval":15,"tables_from_column_only":14,"tables_from_fk_expansion":2,"table_scores":[{"table":"bank_accounts","similarity":0.6774767745272873},{"table":"depreciation_entries","similarity":0.6479655202571633},{"table":"depreciation_schedules","similarity":0.6391071490249879},{"table":"bank_transactions","similarity":0.6215432609525777},{"table":"fiscal_periods","similarity":0.6118740658020915},{"table":"chart_of_accounts","similarity":0.6113283904518393},{"table":"customers","similarity":0.6110220975215452},{"table":"budget_lines","similarity":0.6048243661703417},{"table":"asset_categories","similarity":0.6023939402123736},{"table":"fiscal_years","similarity":0.5978109896942982},{"table":"account_types","similarity":0.5864823487782337},{"table":"budgets","similarity":0.5831943330024605},{"table":"project_budgets","similarity":0.5816505947654121},{"table":"project_milestones","similarity":0.5761644998941425},{"table":"currencies","similarity":0.5748021002449325}],"column_hits_per_table":{"bank_accounts":7,"depreciation_entries":7,"depreciation_schedules":7,"budgets":2,"purchase_orders":1,"bank_transactions":2,"vendor_invoices":1,"sales_orders":1,"asset_categories":1,"timesheets":1,"project_budgets":2,"po_lines":1,"departments":1,"requisition_lines":1,"order_lines":1,"sales_quotes":1,"journal_lines":1,"chart_of_accounts":1,"quote_lines":1,"customers":1,"fiscal_periods":1,"project_milestones":1,"budget_lines":2,"projects":1,"account_types":1,"project_expenses":2,"fixed_assets":1},"top_columns_per_table":{"bank_accounts":[{"column":"current_balance","similarity":0.7120054679865145},{"column":"account_number","similarity":0.6364628577177703},{"column":"is_active","similarity":0.632098349114848}],"depreciation_entries":[{"column":"amount","similarity":0.6892663698793005},{"column":"accumulated_depreciation","similarity":0.6791254877457136},{"column":"period_id","similarity":0.6601758928161718}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.6787718767673881},{"column":"monthly_amount","similarity":0.6713352089955611},{"column":"start_date","similarity":0.6503470632369572}],"budgets":[{"column":"total_amount","similarity":0.6681667214131277},{"column":"status","similarity":0.6095485585752322}],"purchase_orders":[{"column":"total","similarity":0.6434681983394138}],"bank_transactions":[{"column":"amount","similarity":0.6348031550733443},{"column":"transaction_date","similarity":0.5964424364374886}],"vendor_invoices":[{"column":"total","similarity":0.6257147661276886}],"sales_orders":[{"column":"total","similarity":0.6246642633195769}],"asset_categories":[{"column":"depreciation_method","similarity":0.6243470467444369}],"timesheets":[{"column":"total_hours","similarity":0.622973004430975}],"project_budgets":[{"column":"actual_amount","similarity":0.6207060762728754},{"column":"planned_amount","similarity":0.5975993619104593}],"po_lines":[{"column":"line_total","similarity":0.618555602548407}],"departments":[{"column":"budget","similarity":0.6174730859005904}],"requisition_lines":[{"column":"estimated_total","similarity":0.6165631045407493}],"order_lines":[{"column":"line_total","similarity":0.613699532542915}],"sales_quotes":[{"column":"total","similarity":0.6116576686122673}],"journal_lines":[{"column":"debit","similarity":0.6112275365658976}],"chart_of_accounts":[{"column":"account_number","similarity":0.6099549185272944}],"quote_lines":[{"column":"line_total","similarity":0.608422423187917}],"customers":[{"column":"credit_limit","similarity":0.6083072987668613}],"fiscal_periods":[{"column":"period_number","similarity":0.606657627375224}],"project_milestones":[{"column":"amount","similarity":0.6040594662589831}],"budget_lines":[{"column":"account_id","similarity":0.6034178781484847},{"column":"amount","similarity":0.600705481796664}],"projects":[{"column":"budget","similarity":0.6025614577990223}],"account_types":[{"column":"normal_balance","similarity":0.6015543450293432}],"project_expenses":[{"column":"amount","similarity":0.6014681875671599},{"column":"status","similarity":0.5964895591217514}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5971563516971157}]},"fused_scores":[{"table":"bank_accounts","fused":0.8185808234545322,"table_sim":0.6774767745272873,"col_score":1.0302368968453997},{"table":"depreciation_entries","fused":0.8003109576551608,"table_sim":0.6479655202571633,"col_score":1.0288291137521572},{"table":"depreciation_schedules","fused":0.7892400819210602,"table_sim":0.6391071490249879,"col_score":1.0144394812651687},{"table":"bank_transactions","fused":0.7461357058883822,"table_sim":0.6215432609525777,"col_score":0.9330243732920886},{"table":"project_budgets","fused":0.7167926597504893,"table_sim":0.5816505947654121,"col_score":0.9195057572281051},{"table":"budgets","fused":0.7025200865672598,"table_sim":0.5831943330024605,"col_score":0.881508716914459},{"table":"budget_lines","fused":0.6876553153616585,"table_sim":0.6048243661703417,"col_score":0.8119017391486336},{"table":"asset_categories","fused":0.6111751828251989,"table_sim":0.6023939402123736,"col_score":0.6243470467444369},{"table":"chart_of_accounts","fused":0.6107790016820214,"table_sim":0.6113283904518393,"col_score":0.6099549185272944},{"table":"customers","fused":0.6099361780196717,"table_sim":0.6110220975215452,"col_score":0.6083072987668613},{"table":"fiscal_periods","fused":0.6097874904313445,"table_sim":0.6118740658020915,"col_score":0.606657627375224},{"table":"account_types","fused":0.5925111472786775,"table_sim":0.5864823487782337,"col_score":0.6015543450293432},{"table":"project_milestones","fused":0.5873224864400788,"table_sim":0.5761644998941425,"col_score":0.6040594662589831},{"table":"fiscal_years","fused":0.3586865938165789,"table_sim":0.5978109896942982,"col_score":0},{"table":"currencies","fused":0.34488126014695947,"table_sim":0.5748021002449325,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":11,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"max_tables"},{"table":"fiscal_years","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":46,"total_retrieval_latency_ms":51,"sql_generated":"SELECT ca.account_id, SUM(bt.amount) AS total_debit, SUM(at.amount) AS total_credit FROM chart_of_accounts ca LEFT JOIN bank_transactions bt ON ca.account_id = bt.bank_account_id AND bt.transaction_type = 'Debit' AND bt.reconciled = TRUE AND bt.created_at >= CURRENT_DATE - INTERVAL '1 month' LEFT JOIN account_types at ON ca.account_type_id = at.type_id WHERE ca.is_active = TRUE GROUP BY ca.account_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column at.amount does not exist","autocorrect_attempted":false,"autocorrect_success":false,"autocorrect_failure_reason":"Could not parse undefined column from error message","total_latency_ms":5510,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column at.amount does not exist"}
{"timestamp":"2026-01-29T19:46:11.372Z","query_id":"04d45dd5-54c6-4346-bb51-8b47be206808","question":"List all posted journal entries for the current month","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["journal_entries","journal_lines","depreciation_entries","timesheet_entries","depreciation_schedules","performance_reviews","goods_receipts","project_milestones","timesheets","purchase_orders","chart_of_accounts","fiscal_periods"],"tables_from_table_retrieval":15,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"journal_entries","similarity":0.7371200347881697},{"table":"depreciation_entries","similarity":0.6388628310824237},{"table":"journal_lines","similarity":0.6381042717949331},{"table":"timesheet_entries","similarity":0.591409348833156},{"table":"fiscal_years","similarity":0.5469848742333804},{"table":"depreciation_schedules","similarity":0.5458362894331688},{"table":"goods_receipts","similarity":0.5400655622918485},{"table":"fiscal_periods","similarity":0.5399686868510553},{"table":"audit_log","similarity":0.5390638198818073},{"table":"budget_lines","similarity":0.5319608633212602},{"table":"project_milestones","similarity":0.5228205781898283},{"table":"performance_reviews","similarity":0.5210833445978394},{"table":"chart_of_accounts","similarity":0.5176304204490154},{"table":"asset_categories","similarity":0.5110443557995631},{"table":"project_phases","similarity":0.5032511717491329}],"column_hits_per_table":{"journal_entries":9,"journal_lines":7,"depreciation_entries":5,"timesheet_entries":7,"goods_receipts":2,"timesheets":3,"performance_reviews":3,"depreciation_schedules":3,"purchase_orders":2,"project_budgets":1,"sales_orders":2,"asset_maintenance":1,"maintenance_types":1,"project_expenses":1,"inventory_adjustments":1,"project_milestones":2},"top_columns_per_table":{"journal_entries":[{"column":"entry_date","similarity":0.7704936692205318},{"column":"status","similarity":0.7328960805042452},{"column":"posted_by","similarity":0.7019037298711207}],"journal_lines":[{"column":"debit","similarity":0.6580411774438369},{"column":"entry_id","similarity":0.6510961590410065},{"column":"credit","similarity":0.6359552498526305}],"depreciation_entries":[{"column":"entry_date","similarity":0.654431660506666},{"column":"journal_entry_id","similarity":0.6411698211827205},{"column":"period_id","similarity":0.5838462892330042}],"timesheet_entries":[{"column":"entry_date","similarity":0.6446211675734115},{"column":"description","similarity":0.5882230085427652},{"column":"entry_id","similarity":0.5722846831520506}],"goods_receipts":[{"column":"receipt_date","similarity":0.6047305754742575},{"column":"notes","similarity":0.5914014074550097}],"timesheets":[{"column":"submitted_date","similarity":0.6034062021491217},{"column":"status","similarity":0.5605065629261864},{"column":"approved_date","similarity":0.5574665928060918}],"performance_reviews":[{"column":"review_date","similarity":0.5928778431249968},{"column":"review_period_end","similarity":0.5846942408306532},{"column":"review_period_start","similarity":0.5843927700621266}],"depreciation_schedules":[{"column":"end_date","similarity":0.5723218581493166},{"column":"start_date","similarity":0.5661921664416115},{"column":"useful_life_months","similarity":0.5592927836677546}],"purchase_orders":[{"column":"expected_date","similarity":0.5705593782125117},{"column":"order_date","similarity":0.5577237956734042}],"project_budgets":[{"column":"notes","similarity":0.5704481753860894}],"sales_orders":[{"column":"order_date","similarity":0.5574635444979215},{"column":"ship_date","similarity":0.5551436110758307}],"asset_maintenance":[{"column":"completed_date","similarity":0.5574353291980277}],"maintenance_types":[{"column":"frequency_months","similarity":0.5568999551121173}],"project_expenses":[{"column":"expense_date","similarity":0.5566292234027648}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.556301592294009}],"project_milestones":[{"column":"due_date","similarity":0.5548577873367307},{"column":"completed_date","similarity":0.5539763120091956}]},"fused_scores":[{"table":"journal_entries","fused":0.8908502345353386,"table_sim":0.7371200347881697,"col_score":1.121445534156092},{"table":"journal_lines","fused":0.7732700840250207,"table_sim":0.6381042717949331,"col_score":0.9760188023701521},{"table":"depreciation_entries","fused":0.7611368329631072,"table_sim":0.6388628310824237,"col_score":0.9445478357841326},{"table":"timesheet_entries","fused":0.7271270215198551,"table_sim":0.591409348833156,"col_score":0.9307035305499038},{"table":"depreciation_schedules","fused":0.6696689502079503,"table_sim":0.5458362894331688,"col_score":0.8554179413701224},{"table":"performance_reviews","fused":0.666739992174833,"table_sim":0.5210833445978394,"col_score":0.8852249635403234},{"table":"goods_receipts","fused":0.6487277646085134,"table_sim":0.5400655622918485,"col_score":0.8117210680835109},{"table":"project_milestones","fused":0.6464307242504284,"table_sim":0.5228205781898283,"col_score":0.8318459433413286},{"table":"timesheets","fused":0.35285579942086703,"table_sim":0,"col_score":0.8821394985521676},{"table":"purchase_orders","fused":0.33976851041968553,"table_sim":0,"col_score":0.8494212760492138},{"table":"sales_orders","fused":0.3340141400143347,"table_sim":0,"col_score":0.8350353500358367},{"table":"fiscal_years","fused":0.32819092454002824,"table_sim":0.5469848742333804,"col_score":0},{"table":"fiscal_periods","fused":0.32398121211063313,"table_sim":0.5399686868510553,"col_score":0},{"table":"audit_log","fused":0.32343829192908435,"table_sim":0.5390638198818073,"col_score":0},{"table":"budget_lines","fused":0.31917651799275615,"table_sim":0.5319608633212602,"col_score":0}],"fk_expansion_candidates":14,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":14,"total_retrieval_latency_ms":20,"sql_generated":"SELECT j.entry_id AS entry_id, j.entry_number AS entry_number, j.entry_date AS entry_date, jl.debit AS debit, jl.credit AS credit FROM journal_entries j JOIN journal_lines jl ON j.entry_id = jl.entry_id WHERE EXTRACT(MONTH FROM CURRENT_DATE) = EXTRACT(MONTH FROM j.entry_date);","tables_used_in_sql":[],"total_latency_ms":4551,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T19:46:15.923Z","query_id":"18fa4caa-7809-415a-8c92-f328612a41de","question":"Show budget vs actual spending by department","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["budgets","project_budgets","departments","project_expenses","budget_lines","fiscal_periods","cost_centers","fiscal_years","depreciation_schedules","purchase_requisitions","depreciation_entries","fixed_assets"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"budgets","similarity":0.6743467953278661},{"table":"project_budgets","similarity":0.6399342167994372},{"table":"budget_lines","similarity":0.6120027063639643},{"table":"departments","similarity":0.6078621456074449},{"table":"cost_centers","similarity":0.5976264909955187},{"table":"project_expenses","similarity":0.5925480261881607},{"table":"fiscal_periods","similarity":0.5508242618316114},{"table":"fiscal_years","similarity":0.5297470824133431},{"table":"purchase_requisitions","similarity":0.5091655209627607},{"table":"positions","similarity":0.5048661154254893},{"table":"depreciation_entries","similarity":0.49557827959519485},{"table":"depreciation_schedules","similarity":0.48960068033897763},{"table":"business_units","similarity":0.4799656071405569},{"table":"bank_accounts","similarity":0.47991777986203277},{"table":"employee_salaries","similarity":0.4787495684544676}],"column_hits_per_table":{"departments":5,"budgets":8,"project_budgets":6,"cost_centers":3,"budget_lines":5,"projects":1,"project_expenses":10,"purchase_requisitions":1,"fiscal_periods":4,"employees":1,"fiscal_years":1,"positions":1,"fixed_assets":1,"journal_lines":1,"depreciation_schedules":1,"asset_maintenance":1},"top_columns_per_table":{"departments":[{"column":"budget","similarity":0.7508816231830893},{"column":"name","similarity":0.5807613926469624},{"column":"parent_department_id","similarity":0.576838586583815}],"budgets":[{"column":"department_id","similarity":0.7124132689447956},{"column":"total_amount","similarity":0.6738486234633608},{"column":"status","similarity":0.6545539781274986}],"project_budgets":[{"column":"actual_amount","similarity":0.6727544749805415},{"column":"category","similarity":0.6432702298136043},{"column":"planned_amount","similarity":0.6345451040343791}],"cost_centers":[{"column":"department_id","similarity":0.6447254284668595},{"column":"is_active","similarity":0.5741948148052456},{"column":"code","similarity":0.5336285679368914}],"budget_lines":[{"column":"amount","similarity":0.6347292734898708},{"column":"budget_id","similarity":0.6254333624544377},{"column":"period_id","similarity":0.6014529896644097}],"projects":[{"column":"budget","similarity":0.6320788528452682}],"project_expenses":[{"column":"amount","similarity":0.6129047067883163},{"column":"category","similarity":0.6079498441831898},{"column":"is_billable","similarity":0.6033626054361303}],"purchase_requisitions":[{"column":"department_id","similarity":0.5964169191021919}],"fiscal_periods":[{"column":"period_number","similarity":0.5636129011166751},{"column":"is_closed","similarity":0.5509300436603198},{"column":"fiscal_year_id","similarity":0.5466861860533114}],"employees":[{"column":"department_id","similarity":0.5532234163970625}],"fiscal_years":[{"column":"year","similarity":0.545470788921557}],"positions":[{"column":"department_id","similarity":0.5428918958420113}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5418088384489079}],"journal_lines":[{"column":"cost_center_id","similarity":0.5382510765684452}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5363986996551952}],"asset_maintenance":[{"column":"cost","similarity":0.5334437301670096}]},"fused_scores":[{"table":"budgets","fused":0.7999004207313699,"table_sim":0.6743467953278661,"col_score":0.9882308588366255},{"table":"project_budgets","fused":0.7817163660345998,"table_sim":0.6399342167994372,"col_score":0.9943895898873436},{"table":"departments","fused":0.7463765316082773,"table_sim":0.6078621456074449,"col_score":0.9541481106095261},{"table":"project_expenses","fused":0.722280667264861,"table_sim":0.5925480261881607,"col_score":0.9168796288799113},{"table":"budget_lines","fused":0.7086540039579482,"table_sim":0.6120027063639643,"col_score":0.853630950348924},{"table":"fiscal_periods","fused":0.6661257262777008,"table_sim":0.5508242618316114,"col_score":0.839077922946835},{"table":"cost_centers","fused":0.6622888817574282,"table_sim":0.5976264909955187,"col_score":0.7592824679002922},{"table":"fiscal_years","fused":0.5360365650166287,"table_sim":0.5297470824133431,"col_score":0.545470788921557},{"table":"depreciation_schedules","fused":0.5083198880654647,"table_sim":0.48960068033897763,"col_score":0.5363986996551952},{"table":"purchase_requisitions","fused":0.47249604992627015,"table_sim":0.5091655209627607,"col_score":0.4174918433715343},{"table":"positions","fused":0.45492940009105676,"table_sim":0.5048661154254893,"col_score":0.38002432708940787},{"table":"depreciation_entries","fused":0.2973469677571169,"table_sim":0.49557827959519485,"col_score":0},{"table":"business_units","fused":0.2879793642843341,"table_sim":0.4799656071405569,"col_score":0},{"table":"bank_accounts","fused":0.2879506679172196,"table_sim":0.47991777986203277,"col_score":0},{"table":"employee_salaries","fused":0.28724974107268053,"table_sim":0.4787495684544676,"col_score":0}],"fk_expansion_candidates":10,"fk_expansion_added":2,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"projects","reason":"max_tables"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":14,"total_retrieval_latency_ms":20,"sql_generated":"SELECT d.name AS department_name, b.total_amount AS planned_budget, SUM(p.actual_amount) AS total_spent FROM departments d LEFT JOIN budgets b ON d.department_id = b.department_id AND b.status = 'approved' LEFT JOIN project_expenses p ON d.department_id = p.employee_id GROUP BY d.name, b.total_amount;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column p.actual_amount does not exist","autocorrect_attempted":false,"autocorrect_success":false,"autocorrect_failure_reason":"Could not parse undefined column from error message","total_latency_ms":3906,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column p.actual_amount does not exist"}
{"timestamp":"2026-01-29T19:46:19.829Z","query_id":"213a9f7e-9872-4991-b94c-0ed3214b26af","question":"What is the total expense amount per project?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["project_expenses","project_budgets","projects","project_resources","project_milestones","project_tasks","requisition_lines","budgets","budget_lines","asset_maintenance","departments","fixed_assets"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_expenses","similarity":0.7357232557396823},{"table":"project_budgets","similarity":0.7124927404351951},{"table":"project_milestones","similarity":0.6341783562502439},{"table":"project_resources","similarity":0.6177078775243305},{"table":"projects","similarity":0.6089962100611707},{"table":"budgets","similarity":0.5874735154116857},{"table":"project_tasks","similarity":0.5836295939230792},{"table":"cost_centers","similarity":0.5743886856767211},{"table":"budget_lines","similarity":0.5692401404171281},{"table":"requisition_lines","similarity":0.568809612012397},{"table":"asset_maintenance","similarity":0.556437308171321},{"table":"project_phases","similarity":0.5544923606039343},{"table":"task_assignments","similarity":0.5542662222237488},{"table":"timesheet_entries","similarity":0.5468607200699919},{"table":"fixed_assets","similarity":0.5442529432134882}],"column_hits_per_table":{"project_expenses":10,"project_budgets":6,"budgets":1,"projects":3,"project_milestones":2,"budget_lines":1,"project_resources":4,"vendor_invoices":3,"project_tasks":2,"asset_maintenance":1,"requisition_lines":2,"purchase_orders":2,"product_suppliers":1,"departments":1,"depreciation_schedules":2,"maintenance_types":1,"depreciation_entries":1,"products":1,"employee_salaries":1,"sales_orders":1,"cost_centers":1,"timesheet_entries":1,"bank_transactions":1,"fixed_assets":1},"top_columns_per_table":{"project_expenses":[{"column":"amount","similarity":0.8069321519691274},{"column":"project_id","similarity":0.72552329592717},{"column":"expense_date","similarity":0.7111753013108498}],"project_budgets":[{"column":"actual_amount","similarity":0.7596350428313324},{"column":"planned_amount","similarity":0.756194071700628},{"column":"project_id","similarity":0.6872231807270061}],"budgets":[{"column":"total_amount","similarity":0.736235837789576}],"projects":[{"column":"budget","similarity":0.7109411424450727},{"column":"project_number","similarity":0.6484869706692974},{"column":"project_manager_id","similarity":0.6124675981962671}],"project_milestones":[{"column":"amount","similarity":0.6962307559454693},{"column":"project_id","similarity":0.6186499569204351}],"budget_lines":[{"column":"amount","similarity":0.6588860854730665}],"project_resources":[{"column":"allocation_percent","similarity":0.6505585041718224},{"column":"hourly_rate","similarity":0.6430651988923763},{"column":"project_id","similarity":0.6237055733666395}],"vendor_invoices":[{"column":"total","similarity":0.6370818584397956},{"column":"tax_amount","similarity":0.6095802423276043},{"column":"amount_paid","similarity":0.6062572726654026}],"project_tasks":[{"column":"estimated_hours","similarity":0.6346881176571489},{"column":"actual_hours","similarity":0.6292081296520667}],"asset_maintenance":[{"column":"cost","similarity":0.6306740793355671}],"requisition_lines":[{"column":"estimated_total","similarity":0.6280439105312469},{"column":"estimated_unit_cost","similarity":0.6261921396116479}],"purchase_orders":[{"column":"total","similarity":0.6236388264470599},{"column":"tax_amount","similarity":0.6030458658029251}],"product_suppliers":[{"column":"unit_cost","similarity":0.6212103289525712}],"departments":[{"column":"budget","similarity":0.6194099003255832}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.6193889490585814},{"column":"monthly_amount","similarity":0.6106697348487319}],"maintenance_types":[{"column":"estimated_cost","similarity":0.6191118273829425}],"depreciation_entries":[{"column":"amount","similarity":0.618608716083846}],"products":[{"column":"unit_cost","similarity":0.616078462844906}],"employee_salaries":[{"column":"amount","similarity":0.6156937669224968}],"sales_orders":[{"column":"total","similarity":0.6156140321020656}],"cost_centers":[{"column":"department_id","similarity":0.6124823312623927}],"timesheet_entries":[{"column":"project_id","similarity":0.6111509757246523}],"bank_transactions":[{"column":"amount","similarity":0.6045668994400772}],"fixed_assets":[{"column":"purchase_cost","similarity":0.604319708746374}]},"fused_scores":[{"table":"project_expenses","fused":0.9064418744936302,"table_sim":0.7357232557396823,"col_score":1.1625198026245522},{"table":"project_budgets","fused":0.8825884757337756,"table_sim":0.7124927404351951,"col_score":1.1377320786816465},{"table":"projects","fused":0.7794715771485909,"table_sim":0.6089962100611707,"col_score":1.0351846277797214},{"table":"project_resources","fused":0.7594611679618026,"table_sim":0.6177078775243305,"col_score":0.9720911036180105},{"table":"project_milestones","fused":0.7456103100971949,"table_sim":0.6341783562502439,"col_score":0.9127582408676216},{"table":"project_tasks","fused":0.7298946293471205,"table_sim":0.5836295939230792,"col_score":0.9492921824831824},{"table":"requisition_lines","fused":0.7177417593422666,"table_sim":0.568809612012397,"col_score":0.9411399803370708},{"table":"budgets","fused":0.6469784443628418,"table_sim":0.5874735154116857,"col_score":0.736235837789576},{"table":"budget_lines","fused":0.6050985184395035,"table_sim":0.5692401404171281,"col_score":0.6588860854730665},{"table":"asset_maintenance","fused":0.5861320166370194,"table_sim":0.556437308171321,"col_score":0.6306740793355671},{"table":"fixed_assets","fused":0.5682796494266424,"table_sim":0.5442529432134882,"col_score":0.604319708746374},{"table":"cost_centers","fused":0.5161282641595026,"table_sim":0.5743886856767211,"col_score":0.42873763188367486},{"table":"timesheet_entries","fused":0.4992387052448977,"table_sim":0.5468607200699919,"col_score":0.4278056830072566},{"table":"vendor_invoices","fused":0.3767487918414391,"table_sim":0,"col_score":0.9418719796035977},{"table":"purchase_orders","fused":0.370064703739409,"table_sim":0,"col_score":0.9251617593485224}],"fk_expansion_candidates":14,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"project_phases","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"timesheet_entries","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":15,"total_retrieval_latency_ms":20,"sql_generated":"SELECT p.project_id AS \"ProjectID\", SUM(pe.amount) AS \"TotalExpenses\" FROM projects p JOIN project_expenses pe ON p.project_id = pe.project_id GROUP BY p.project_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":100,"total_latency_ms":867}
{"timestamp":"2026-01-29T19:46:20.696Z","query_id":"35284159-eb88-48ea-ac84-541b80e1fd7a","question":"List projects that are over budget","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["project_budgets","project_expenses","projects","budgets","project_milestones","project_tasks","budget_lines","project_resources","project_phases","fiscal_years","departments","fiscal_periods"],"tables_from_table_retrieval":15,"tables_from_column_only":1,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_budgets","similarity":0.722964742520668},{"table":"project_expenses","similarity":0.6612139885640923},{"table":"project_milestones","similarity":0.6086742516860566},{"table":"projects","similarity":0.603119867291799},{"table":"project_resources","similarity":0.597322584800267},{"table":"budgets","similarity":0.5947407234206143},{"table":"budget_lines","similarity":0.5904803818054072},{"table":"project_tasks","similarity":0.5884491523727073},{"table":"project_phases","similarity":0.5493907834321079},{"table":"fiscal_years","similarity":0.5452244254955425},{"table":"task_assignments","similarity":0.5358507865308998},{"table":"cost_centers","similarity":0.5300586157001256},{"table":"fixed_assets","similarity":0.5211915048085144},{"table":"fiscal_periods","similarity":0.5200179964407323},{"table":"timesheet_entries","similarity":0.5184037353129961}],"column_hits_per_table":{"projects":10,"project_budgets":6,"project_expenses":10,"budget_lines":4,"budgets":7,"project_milestones":3,"project_tasks":7,"project_resources":2,"departments":1},"top_columns_per_table":{"projects":[{"column":"budget","similarity":0.7157873289228214},{"column":"project_number","similarity":0.6227578683249603},{"column":"planned_end_date","similarity":0.6218592852232092}],"project_budgets":[{"column":"notes","similarity":0.6968840628162604},{"column":"category","similarity":0.6884936581170534},{"column":"actual_amount","similarity":0.6874342070196099}],"project_expenses":[{"column":"is_billable","similarity":0.6524172642922237},{"column":"category","similarity":0.6511394078973038},{"column":"project_id","similarity":0.647913399771598}],"budget_lines":[{"column":"budget_id","similarity":0.6293825469960025},{"column":"amount","similarity":0.61759755130803},{"column":"line_id","similarity":0.5958899978657357}],"budgets":[{"column":"total_amount","similarity":0.6262049969711166},{"column":"status","similarity":0.6201964717884159},{"column":"budget_id","similarity":0.6068251516570441}],"project_milestones":[{"column":"is_billable","similarity":0.6084169219661417},{"column":"amount","similarity":0.5975950101730785},{"column":"project_id","similarity":0.5848627807484997}],"project_tasks":[{"column":"estimated_hours","similarity":0.6059234425364802},{"column":"actual_hours","similarity":0.6011409876391675},{"column":"due_date","similarity":0.5987032301443584}],"project_resources":[{"column":"allocation_percent","similarity":0.6000177528652653},{"column":"project_id","similarity":0.598286675045282}],"departments":[{"column":"budget","similarity":0.5873981545218923}]},"fused_scores":[{"table":"project_budgets","fused":0.8466631501631441,"table_sim":0.722964742520668,"col_score":1.0322107616268583},{"table":"project_expenses","fused":0.7879231804348057,"table_sim":0.6612139885640923,"col_score":0.9779869682408756},{"table":"projects","fused":0.7727384256092,"table_sim":0.603119867291799,"col_score":1.0271662630853016},{"table":"budgets","fused":0.728543662215791,"table_sim":0.5947407234206143,"col_score":0.9292480704085562},{"table":"project_milestones","fused":0.7280903218327064,"table_sim":0.6086742516860566,"col_score":0.907214427052681},{"table":"project_tasks","fused":0.71566706596605,"table_sim":0.5884491523727073,"col_score":0.906493936356064},{"table":"budget_lines","fused":0.6894408061858966,"table_sim":0.5904803818054072,"col_score":0.8378814427566308},{"table":"project_resources","fused":0.6821607865326058,"table_sim":0.597322584800267,"col_score":0.809418089131114},{"table":"project_phases","fused":0.3296344700592647,"table_sim":0.5493907834321079,"col_score":0},{"table":"fiscal_years","fused":0.3271346552973255,"table_sim":0.5452244254955425,"col_score":0},{"table":"task_assignments","fused":0.3215104719185399,"table_sim":0.5358507865308998,"col_score":0},{"table":"cost_centers","fused":0.3180351694200753,"table_sim":0.5300586157001256,"col_score":0},{"table":"fixed_assets","fused":0.3127149028851086,"table_sim":0.5211915048085144,"col_score":0},{"table":"fiscal_periods","fused":0.31201079786443936,"table_sim":0.5200179964407323,"col_score":0},{"table":"timesheet_entries","fused":0.31104224118779766,"table_sim":0.5184037353129961,"col_score":0}],"fk_expansion_candidates":7,"fk_expansion_added":2,"fk_expansion_blocked_count":3,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"timesheet_entries","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":20,"total_retrieval_latency_ms":26,"sql_generated":"SELECT p.project_id, p.name AS project_name, b.total_amount AS total_budget, SUM(pl.actual_hours) AS total_actual_hours FROM projects p JOIN budgets b ON p.project_id = b.project_id AND p.status = 'Completed' GROUP BY p.project_id HAVING b.total_amount > (SELECT budget FROM project_tasks pt WHERE pt.project_id = p.project_id AND status = 'Completed');","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column b.project_id does not exist","autocorrect_attempted":false,"autocorrect_success":false,"autocorrect_failure_reason":"Could not parse undefined column from error message","total_latency_ms":4380,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column b.project_id does not exist"}
{"timestamp":"2026-01-29T19:46:25.076Z","query_id":"90fad7f0-cdff-4347-a1c5-b7ae5d1fd612","question":"Show project resources and their allocation percentages","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["project_resources","project_budgets","projects","project_expenses","project_milestones","project_tasks","project_phases","asset_categories","budgets","task_assignments","fixed_assets"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":1,"table_scores":[{"table":"project_resources","similarity":0.7742133717857291},{"table":"project_budgets","similarity":0.65507694472865},{"table":"project_expenses","similarity":0.6350034671876015},{"table":"projects","similarity":0.6288717870995568},{"table":"task_assignments","similarity":0.6137701156863598},{"table":"project_tasks","similarity":0.6095803048417692},{"table":"project_milestones","similarity":0.6065393117891723},{"table":"project_phases","similarity":0.5813826774295057},{"table":"asset_categories","similarity":0.5802555044855668},{"table":"fixed_assets","similarity":0.5796101268148289},{"table":"asset_transfers","similarity":0.5721318726014173},{"table":"depreciation_schedules","similarity":0.5658856974088946},{"table":"budgets","similarity":0.5649618658822126},{"table":"asset_locations","similarity":0.5604079986432478},{"table":"asset_maintenance","similarity":0.5602754972355342}],"column_hits_per_table":{"project_resources":8,"project_budgets":6,"projects":11,"project_milestones":4,"asset_categories":1,"project_expenses":8,"project_tasks":6,"project_phases":2,"budgets":1,"order_lines":1,"tax_rates":1,"quote_lines":1},"top_columns_per_table":{"project_resources":[{"column":"allocation_percent","similarity":0.8685852466461004},{"column":"hourly_rate","similarity":0.7723593844044561},{"column":"role","similarity":0.7018377644717824}],"project_budgets":[{"column":"actual_amount","similarity":0.6714805333867944},{"column":"planned_amount","similarity":0.664720071485919},{"column":"category","similarity":0.6492185172720708}],"projects":[{"column":"project_number","similarity":0.656031184151131},{"column":"budget","similarity":0.6549834266944344},{"column":"priority","similarity":0.6516089082532873}],"project_milestones":[{"column":"amount","similarity":0.6479447985267763},{"column":"due_date","similarity":0.6055954050810288},{"column":"project_id","similarity":0.5966197964252259}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.6459444435919715}],"project_expenses":[{"column":"amount","similarity":0.6362161613290699},{"column":"category","similarity":0.6270742962995741},{"column":"approved_by","similarity":0.625320544399457}],"project_tasks":[{"column":"priority","similarity":0.6309783351056274},{"column":"actual_hours","similarity":0.624564831852771},{"column":"estimated_hours","similarity":0.6124485167486019}],"project_phases":[{"column":"project_id","similarity":0.598085263443172},{"column":"sequence","similarity":0.5916139582579132}],"budgets":[{"column":"total_amount","similarity":0.5970528201563468}],"order_lines":[{"column":"discount_percent","similarity":0.5946420250920916}],"tax_rates":[{"column":"rate","similarity":0.5907462944083454}],"quote_lines":[{"column":"discount_percent","similarity":0.590710827201031}]},"fused_scores":[{"table":"project_resources","fused":0.9664339986107688,"table_sim":0.7742133717857291,"col_score":1.2547649388483284},{"table":"project_budgets","fused":0.7945823944890915,"table_sim":0.65507694472865,"col_score":1.0038405691297538},{"table":"projects","fused":0.7707322312590734,"table_sim":0.6288717870995568,"col_score":0.9835228974983483},{"table":"project_expenses","fused":0.7609034041041036,"table_sim":0.6350034671876015,"col_score":0.9497533094788569},{"table":"project_milestones","fused":0.7442205875004198,"table_sim":0.6065393117891723,"col_score":0.9507425010672907},{"table":"project_tasks","fused":0.7430524833178667,"table_sim":0.6095803048417692,"col_score":0.9432607510320129},{"table":"project_phases","fused":0.6692071266429127,"table_sim":0.5813826774295057,"col_score":0.8009438004630234},{"table":"asset_categories","fused":0.6065310801281287,"table_sim":0.5802555044855668,"col_score":0.6459444435919715},{"table":"budgets","fused":0.5777982475918663,"table_sim":0.5649618658822126,"col_score":0.5970528201563468},{"table":"task_assignments","fused":0.36826206941181583,"table_sim":0.6137701156863598,"col_score":0},{"table":"fixed_assets","fused":0.34776607608889737,"table_sim":0.5796101268148289,"col_score":0},{"table":"asset_transfers","fused":0.3432791235608504,"table_sim":0.5721318726014173,"col_score":0},{"table":"depreciation_schedules","fused":0.33953141844533674,"table_sim":0.5658856974088946,"col_score":0},{"table":"asset_locations","fused":0.33624479918594863,"table_sim":0.5604079986432478,"col_score":0},{"table":"asset_maintenance","fused":0.3361652983413205,"table_sim":0.5602754972355342,"col_score":0}],"fk_expansion_candidates":7,"fk_expansion_added":1,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"budget_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":19,"total_retrieval_latency_ms":25,"sql_generated":"SELECT p.project_id AS \"ProjectID\", p.name AS \"ProjectName\", prr.role AS \"Role\", prr.allocation_percent AS \"AllocationPercent\" FROM projects p INNER JOIN task_assignments ta ON p.project_id = ta.task_id INNER JOIN project_resources prr ON ta.task_id = prr.task_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column prr.task_id does not exist","autocorrect_attempted":false,"autocorrect_success":false,"autocorrect_failure_reason":"Could not parse undefined column from error message","total_latency_ms":3329,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column prr.task_id does not exist"}
{"timestamp":"2026-01-29T19:46:28.405Z","query_id":"f4ccb17d-132f-4911-a300-07dc2038c13f","question":"List fixed assets by category with their total purchase cost","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["fixed_assets","asset_categories","asset_maintenance","purchase_orders","products","project_expenses","project_budgets","depreciation_entries","purchase_requisitions","depreciation_schedules","maintenance_types","asset_locations"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"fixed_assets","similarity":0.7654083493676195},{"table":"asset_categories","similarity":0.7259858085236982},{"table":"asset_maintenance","similarity":0.6539211907012796},{"table":"products","similarity":0.614929355062545},{"table":"depreciation_schedules","similarity":0.6121354509873786},{"table":"depreciation_entries","similarity":0.6111894897108928},{"table":"purchase_requisitions","similarity":0.6015411064384415},{"table":"asset_transfers","similarity":0.5999948343167759},{"table":"requisition_lines","similarity":0.598284604803533},{"table":"purchase_orders","similarity":0.5960128957667012},{"table":"product_categories","similarity":0.5957745495088865},{"table":"project_expenses","similarity":0.5957623792479935},{"table":"asset_locations","similarity":0.5883070142348943},{"table":"project_budgets","similarity":0.585024592918525},{"table":"inventory_adjustments","similarity":0.5679064338841272}],"column_hits_per_table":{"fixed_assets":17,"asset_maintenance":5,"asset_categories":5,"purchase_orders":4,"asset_transfers":1,"project_expenses":2,"products":2,"depreciation_entries":2,"project_budgets":2,"maintenance_types":1,"sales_orders":1,"purchase_requisitions":3,"depreciation_schedules":1,"budgets":1,"departments":1,"product_suppliers":1,"product_categories":1},"top_columns_per_table":{"fixed_assets":[{"column":"purchase_cost","similarity":0.8279308768975289},{"column":"purchase_date","similarity":0.7577653682683902},{"column":"category_id","similarity":0.7449419823541632}],"asset_maintenance":[{"column":"cost","similarity":0.7038940050431838},{"column":"asset_id","similarity":0.6625276747232278},{"column":"status","similarity":0.6405651323240275}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.6927722364184671},{"column":"depreciation_method","similarity":0.6801647903942473},{"column":"name","similarity":0.6771577193336439}],"purchase_orders":[{"column":"total","similarity":0.6821806774581558},{"column":"shipping_cost","similarity":0.6472948486879604},{"column":"subtotal","similarity":0.6467974357625007}],"asset_transfers":[{"column":"asset_id","similarity":0.6577812240991375}],"project_expenses":[{"column":"category","similarity":0.6549899614084438},{"column":"amount","similarity":0.6178431697050689}],"products":[{"column":"unit_cost","similarity":0.6544733850469636},{"column":"list_price","similarity":0.6424553009766624}],"depreciation_entries":[{"column":"asset_id","similarity":0.6541755757135573},{"column":"accumulated_depreciation","similarity":0.6149445842426364}],"project_budgets":[{"column":"category","similarity":0.637658039961106},{"column":"actual_amount","similarity":0.6203506032041255}],"maintenance_types":[{"column":"estimated_cost","similarity":0.637101104417595}],"sales_orders":[{"column":"total","similarity":0.6367743689772688}],"purchase_requisitions":[{"column":"status","similarity":0.633131401798049},{"column":"notes","similarity":0.618262755877266},{"column":"requisition_number","similarity":0.6168697281232403}],"depreciation_schedules":[{"column":"asset_id","similarity":0.6326055924552645}],"budgets":[{"column":"total_amount","similarity":0.6276622882196059}],"departments":[{"column":"budget","similarity":0.6267573083396116}],"product_suppliers":[{"column":"unit_cost","similarity":0.6215020235372517}],"product_categories":[{"column":"description","similarity":0.6177248433123641}]},"fused_scores":[{"table":"fixed_assets","fused":0.9419704340332613,"table_sim":0.7654083493676195,"col_score":1.206813561031724},{"table":"asset_categories","fused":0.8487333377604551,"table_sim":0.7259858085236982,"col_score":1.0328546316155907},{"table":"asset_maintenance","fused":0.7989303920007285,"table_sim":0.6539211907012796,"col_score":1.0164441939499018},{"table":"purchase_orders","fused":0.7599389781808752,"table_sim":0.5960128957667012,"col_score":1.005828101802136},{"table":"products","fused":0.759238027251645,"table_sim":0.614929355062545,"col_score":0.9757010355352949},{"table":"project_expenses","fused":0.7430220460531873,"table_sim":0.5957623792479935,"col_score":0.9639115462609782},{"table":"project_budgets","fused":0.7301480923763826,"table_sim":0.585024592918525,"col_score":0.9478333415631688},{"table":"depreciation_entries","fused":0.7042761081234883,"table_sim":0.6111894897108928,"col_score":0.8439060357423815},{"table":"purchase_requisitions","fused":0.6963109513640878,"table_sim":0.6015411064384415,"col_score":0.8384657187525574},{"table":"depreciation_schedules","fused":0.5444108364799012,"table_sim":0.6121354509873786,"col_score":0.4428239147186851},{"table":"asset_transfers","fused":0.5441756433378241,"table_sim":0.5999948343167759,"col_score":0.46044685686939624},{"table":"product_categories","fused":0.5304276858327939,"table_sim":0.5957745495088865,"col_score":0.4324073903186548},{"table":"requisition_lines","fused":0.35897076288211976,"table_sim":0.598284604803533,"col_score":0},{"table":"asset_locations","fused":0.35298420854093654,"table_sim":0.5883070142348943,"col_score":0},{"table":"inventory_adjustments","fused":0.3407438603304763,"table_sim":0.5679064338841272,"col_score":0}],"fk_expansion_candidates":25,"fk_expansion_added":2,"fk_expansion_blocked_count":18,"fk_expansion_blocked":[{"table":"employees","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"product_categories","reason":"max_tables"},{"table":"order_lines","reason":"no_evidence"},{"table":"asset_transfers","reason":"max_tables"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"departments","reason":"max_tables"},{"table":"product_suppliers","reason":"max_tables"},{"table":"requisition_lines","reason":"max_tables"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":25,"total_retrieval_latency_ms":31,"sql_generated":"SELECT af.category_id, SUM(af.purchase_cost) AS total_purchase_cost FROM fixed_assets af JOIN asset_categories ac ON af.category_id = ac.category_id GROUP BY af.category_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":7,"total_latency_ms":893}
{"timestamp":"2026-01-29T19:46:29.298Z","query_id":"29ba89dd-f455-4cb8-991b-b54a117e9e14","question":"List assets due for maintenance in the next 30 days","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["asset_maintenance","fixed_assets","depreciation_schedules","asset_transfers","maintenance_types","depreciation_entries","project_expenses","inventory_adjustments","asset_categories","purchase_requisitions","asset_locations","fiscal_periods"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"asset_maintenance","similarity":0.6994637000895678},{"table":"fixed_assets","similarity":0.6764596229184475},{"table":"depreciation_schedules","similarity":0.6273221911861584},{"table":"asset_transfers","similarity":0.5971719320807494},{"table":"maintenance_types","similarity":0.5961062154680403},{"table":"depreciation_entries","similarity":0.5910746016967453},{"table":"asset_categories","similarity":0.5862300624031879},{"table":"asset_locations","similarity":0.5513908244688821},{"table":"project_expenses","similarity":0.5503523574219773},{"table":"purchase_requisitions","similarity":0.5454859792595109},{"table":"inventory_adjustments","similarity":0.5399910580674154},{"table":"fiscal_years","similarity":0.5310443766821534},{"table":"budget_lines","similarity":0.5280863149217051},{"table":"fiscal_periods","similarity":0.5266541206042973},{"table":"timesheets","similarity":0.5246699967869528}],"column_hits_per_table":{"asset_maintenance":10,"fixed_assets":17,"depreciation_schedules":5,"asset_transfers":4,"maintenance_types":2,"project_expenses":2,"depreciation_entries":3,"inventory_adjustments":2,"budgets":1,"project_tasks":1,"asset_categories":1,"stock_transfers":1,"purchase_requisitions":1},"top_columns_per_table":{"asset_maintenance":[{"column":"scheduled_date","similarity":0.7417912113410527},{"column":"completed_date","similarity":0.7325656662634175},{"column":"status","similarity":0.7129849821736637}],"fixed_assets":[{"column":"purchase_date","similarity":0.6895387616643497},{"column":"disposal_date","similarity":0.6881990364899336},{"column":"warranty_expiry","similarity":0.6800725876800275}],"depreciation_schedules":[{"column":"asset_id","similarity":0.6418619860179837},{"column":"end_date","similarity":0.6048026719079262},{"column":"start_date","similarity":0.5849730629741445}],"asset_transfers":[{"column":"transfer_date","similarity":0.6313435579208717},{"column":"asset_id","similarity":0.6184906613618536},{"column":"reason","similarity":0.5842991078068315}],"maintenance_types":[{"column":"estimated_cost","similarity":0.6166092757884718},{"column":"frequency_months","similarity":0.571291123217713}],"project_expenses":[{"column":"expense_date","similarity":0.6092598391867935},{"column":"status","similarity":0.5937348318403063}],"depreciation_entries":[{"column":"asset_id","similarity":0.6063098011675734},{"column":"accumulated_depreciation","similarity":0.576951693037312},{"column":"entry_date","similarity":0.5752337993503969}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.5889427730753104},{"column":"status","similarity":0.5820136892950087}],"budgets":[{"column":"status","similarity":0.5735098092516532}],"project_tasks":[{"column":"due_date","similarity":0.5689652748773603}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.5684797119021113}],"stock_transfers":[{"column":"status","similarity":0.5664045909553878}],"purchase_requisitions":[{"column":"status","similarity":0.5661977643706151}]},"fused_scores":[{"table":"asset_maintenance","fused":0.8629078378428453,"table_sim":0.6994637000895678,"col_score":1.1080740444727615},{"table":"fixed_assets","fused":0.8193310857147951,"table_sim":0.6764596229184475,"col_score":1.0336382799093164},{"table":"depreciation_schedules","fused":0.7353089960696945,"table_sim":0.6273221911861584,"col_score":0.8972892033949985},{"table":"asset_transfers","fused":0.7277004039781647,"table_sim":0.5971719320807494,"col_score":0.9234931118242875},{"table":"maintenance_types","fused":0.7185656642397555,"table_sim":0.5961062154680403,"col_score":0.9022548373973283},{"table":"depreciation_entries","fused":0.7004721981030513,"table_sim":0.5910746016967453,"col_score":0.8645685927125104},{"table":"project_expenses","fused":0.6570382265855467,"table_sim":0.5503523574219773,"col_score":0.8170670303309007},{"table":"inventory_adjustments","fused":0.6410536605718746,"table_sim":0.5399910580674154,"col_score":0.7926475643285634},{"table":"asset_categories","fused":0.5791299222027573,"table_sim":0.5862300624031879,"col_score":0.5684797119021113},{"table":"purchase_requisitions","fused":0.4858269615794788,"table_sim":0.5454859792595109,"col_score":0.39633843505943056},{"table":"asset_locations","fused":0.33083449468132925,"table_sim":0.5513908244688821,"col_score":0},{"table":"fiscal_years","fused":0.31862662600929204,"table_sim":0.5310443766821534,"col_score":0},{"table":"budget_lines","fused":0.3168517889530231,"table_sim":0.5280863149217051,"col_score":0},{"table":"fiscal_periods","fused":0.3159924723625784,"table_sim":0.5266541206042973,"col_score":0},{"table":"timesheets","fused":0.3148019980721717,"table_sim":0.5246699967869528,"col_score":0}],"fk_expansion_candidates":11,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"adjustment_lines","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":33,"total_retrieval_latency_ms":39,"sql_generated":"SELECT f.asset_id, f.name AS asset_name, l.location_id, l.name AS location_name, m.maintenance_type_id, mt.name AS maintenance_type_name FROM fixed_assets f INNER JOIN asset_locations l ON f.location_id = l.location_id INNER JOIN asset_maintenance m ON f.asset_id = m.asset_id INNER JOIN maintenance_types mt ON m.maintenance_type_id = mt.type_id WHERE m.completed_date IS NULL OR m.completed_date > CURRENT_DATE + INTERVAL '30 days';","tables_used_in_sql":[],"explain_result":"success","rows_returned":87,"total_latency_ms":2090}
{"timestamp":"2026-01-29T19:46:31.389Z","query_id":"28643ee4-6df5-4773-8dbd-1bd4d0dc763a","question":"How many documents are attached to each entity type?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["document_attachments","account_types","asset_categories","certifications","employee_certifications","maintenance_types","benefit_types","product_categories","chart_of_accounts","asset_maintenance","employees","fixed_assets"],"tables_from_table_retrieval":15,"tables_from_column_only":9,"tables_from_fk_expansion":2,"table_scores":[{"table":"document_attachments","similarity":0.7352812742665428},{"table":"asset_categories","similarity":0.5753411818367143},{"table":"account_types","similarity":0.5738443826637069},{"table":"maintenance_types","similarity":0.5636991742375136},{"table":"certifications","similarity":0.5624603819375077},{"table":"benefit_types","similarity":0.5571719369096676},{"table":"product_categories","similarity":0.5551556948057476},{"table":"asset_maintenance","similarity":0.554815914599242},{"table":"employee_certifications","similarity":0.5476424522677461},{"table":"warehouses","similarity":0.5474998114755597},{"table":"leave_types","similarity":0.5434934031567049},{"table":"chart_of_accounts","similarity":0.5411038635038822},{"table":"emergency_contacts","similarity":0.5384920463137224},{"table":"fixed_assets","similarity":0.5383241951125345},{"table":"sales_regions","similarity":0.5350244939156515}],"column_hits_per_table":{"document_attachments":9,"inventory_transactions":3,"account_types":3,"maintenance_types":3,"asset_maintenance":1,"employee_certifications":4,"asset_categories":3,"benefit_types":3,"chart_of_accounts":2,"certifications":2,"departments":3,"employee_benefits":1,"product_categories":3,"business_units":1,"warehouses":1,"sales_regions":1,"asset_locations":1,"fixed_assets":1,"inventory_levels":1,"asset_transfers":1,"leave_types":1,"employees":1,"journal_entries":1},"top_columns_per_table":{"document_attachments":[{"column":"entity_type","similarity":0.7987800419578387},{"column":"entity_id","similarity":0.7594287577919462},{"column":"attachment_id","similarity":0.6546651468230587}],"inventory_transactions":[{"column":"reference_type","similarity":0.5903517205097364},{"column":"transaction_type","similarity":0.5635711569434013},{"column":"created_by","similarity":0.5430876646210533}],"account_types":[{"column":"category","similarity":0.5878690848429569},{"column":"type_id","similarity":0.5794665493145994},{"column":"name","similarity":0.5496137466279906}],"maintenance_types":[{"column":"description","similarity":0.58653779494252},{"column":"type_id","similarity":0.5733718593835123},{"column":"name","similarity":0.5496422533175911}],"asset_maintenance":[{"column":"maintenance_type_id","similarity":0.5827125041473765}],"employee_certifications":[{"column":"certificate_number","similarity":0.5784702110774266},{"column":"cert_id","similarity":0.5612347494814258},{"column":"employee_id","similarity":0.5577094740003373}],"asset_categories":[{"column":"category_id","similarity":0.5723224544867809},{"column":"name","similarity":0.5502669316091798},{"column":"depreciation_method","similarity":0.5473548891396472}],"benefit_types":[{"column":"description","similarity":0.5715454999053485},{"column":"benefit_type_id","similarity":0.5575648471383446},{"column":"name","similarity":0.5484642483573043}],"chart_of_accounts":[{"column":"account_type_id","similarity":0.5685465519383057},{"column":"description","similarity":0.5451128268059807}],"certifications":[{"column":"issuing_body","similarity":0.5640710083272336},{"column":"description","similarity":0.5596023143932606}],"departments":[{"column":"manager_id","similarity":0.5633707821725658},{"column":"department_id","similarity":0.5584502786611573},{"column":"parent_department_id","similarity":0.5566654794357809}],"employee_benefits":[{"column":"benefit_type_id","similarity":0.5570972140176393}],"product_categories":[{"column":"description","similarity":0.5540848765000548},{"column":"category_id","similarity":0.5510211593166828},{"column":"parent_category_id","similarity":0.5473730420164726}],"business_units":[{"column":"manager_id","similarity":0.5532691118392093}],"warehouses":[{"column":"manager_id","similarity":0.5519942538973842}],"sales_regions":[{"column":"manager_id","similarity":0.5505126067891188}],"asset_locations":[{"column":"description","similarity":0.5499214775178357}],"fixed_assets":[{"column":"category_id","similarity":0.5477120144110509}],"inventory_levels":[{"column":"quantity_available","similarity":0.5458319122564639}],"asset_transfers":[{"column":"to_employee_id","similarity":0.5432260682616717}],"leave_types":[{"column":"leave_type_id","similarity":0.543068609508208}],"employees":[{"column":"email","similarity":0.5421198830413347}],"journal_entries":[{"column":"reference","similarity":0.5407169542507763}]},"fused_scores":[{"table":"document_attachments","fused":0.8904731915406621,"table_sim":0.7352812742665428,"col_score":1.1232610674518408},{"table":"account_types","fused":0.6605795804394508,"table_sim":0.5738443826637069,"col_score":0.7906823771030667},{"table":"asset_categories","fused":0.6442718083860368,"table_sim":0.5753411818367143,"col_score":0.7476677482100206},{"table":"certifications","fused":0.6414489565084545,"table_sim":0.5624603819375077,"col_score":0.7599318183648748},{"table":"employee_certifications","fused":0.6385464207190179,"table_sim":0.5476424522677461,"col_score":0.7749023733959256},{"table":"maintenance_types","fused":0.5827221474401055,"table_sim":0.5636991742375136,"col_score":0.6112566072439933},{"table":"benefit_types","fused":0.5723949807186663,"table_sim":0.5571719369096676,"col_score":0.5952295464321646},{"table":"product_categories","fused":0.5653801446077995,"table_sim":0.5551556948057476,"col_score":0.5807168193108774},{"table":"chart_of_accounts","fused":0.5601711483978922,"table_sim":0.5411038635038822,"col_score":0.5887720757389072},{"table":"asset_maintenance","fused":0.4960490499208106,"table_sim":0.554815914599242,"col_score":0.4078987529031635},{"table":"warehouses","fused":0.4830582779766034,"table_sim":0.5474998114755597,"col_score":0.3863959777281689},{"table":"leave_types","fused":0.4781552525563212,"table_sim":0.5434934031567049,"col_score":0.3801480266557456},{"table":"fixed_assets","fused":0.47635388110261495,"table_sim":0.5383241951125345,"col_score":0.3833984100877356},{"table":"sales_regions","fused":0.47515822625034415,"table_sim":0.5350244939156515,"col_score":0.38535882475238314},{"table":"inventory_transactions","fused":0.34885491959257486,"table_sim":0,"col_score":0.8721372989814371}],"fk_expansion_candidates":9,"fk_expansion_added":2,"fk_expansion_blocked_count":7,"fk_expansion_blocked":[{"table":"bank_accounts","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":16,"total_retrieval_latency_ms":22,"sql_generated":"SELECT d.entity_type, COUNT(da.file_id) AS num_documents FROM document_attachments da JOIN entities d ON da.uploaded_by = d.employee_id GROUP BY d.entity_type;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column e.name does not exist","autocorrect_attempted":false,"autocorrect_success":false,"autocorrect_failure_reason":"Could not parse undefined column from error message","total_latency_ms":2145,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T19:46:33.534Z","query_id":"9eedb055-b519-4b7f-9ace-3dafcf5d8b4b","question":"Calculate employee turnover rate by department for 2024","attempt_count":1,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employees","employee_salaries","employee_training","departments","sales_regions","employee_certifications","employment_history","performance_reviews","goods_receipts","asset_maintenance","budgets","inventory_adjustments"],"tables_from_table_retrieval":15,"tables_from_column_only":9,"tables_from_fk_expansion":2,"table_scores":[{"table":"employees","similarity":0.6359658673732379},{"table":"employee_salaries","similarity":0.6137332929756416},{"table":"departments","similarity":0.6101103038853555},{"table":"positions","similarity":0.5999463882310814},{"table":"sales_territories","similarity":0.5983156084770043},{"table":"sales_regions","similarity":0.5955253694234874},{"table":"budgets","similarity":0.5922652556433196},{"table":"employee_training","similarity":0.5866463738638922},{"table":"employment_history","similarity":0.5855835073288157},{"table":"goods_receipts","similarity":0.585472710203539},{"table":"performance_reviews","similarity":0.5822186192352505},{"table":"purchase_requisitions","similarity":0.578406876111481},{"table":"employee_certifications","similarity":0.5730496448155384},{"table":"inventory_adjustments","similarity":0.5687781234041399},{"table":"asset_maintenance","similarity":0.5668142582852698}],"column_hits_per_table":{"departments":3,"employees":9,"sales_territories":1,"employee_salaries":7,"positions":1,"employee_training":4,"performance_reviews":2,"goods_receipts":1,"sales_orders":1,"sales_regions":2,"asset_maintenance":1,"budgets":1,"employee_certifications":2,"cost_centers":1,"asset_transfers":3,"employee_benefits":2,"purchase_requisitions":1,"inventory_adjustments":1,"currencies":1,"timesheets":1,"sales_opportunities":1,"business_units":1,"employment_history":2,"depreciation_schedules":1},"top_columns_per_table":{"departments":[{"column":"budget","similarity":0.6210989680192394},{"column":"manager_id","similarity":0.5985166795002035},{"column":"created_at","similarity":0.5685222125719833}],"employees":[{"column":"department_id","similarity":0.6200778238440748},{"column":"salary","similarity":0.6038131058150359},{"column":"termination_date","similarity":0.5992766261325304}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6104279964881703}],"employee_salaries":[{"column":"end_date","similarity":0.6057663883190686},{"column":"amount","similarity":0.5994586464671279},{"column":"effective_date","similarity":0.5945383601215039}],"positions":[{"column":"department_id","similarity":0.6049413744489532}],"employee_training":[{"column":"score","similarity":0.5927300142082687},{"column":"scheduled_date","similarity":0.578764520059517},{"column":"status","similarity":0.5718497030719976}],"performance_reviews":[{"column":"employee_id","similarity":0.5849706759238356},{"column":"reviewer_id","similarity":0.5653092836188883}],"goods_receipts":[{"column":"received_by","similarity":0.580378092857111}],"sales_orders":[{"column":"sales_rep_id","similarity":0.5799791205111346}],"sales_regions":[{"column":"manager_id","similarity":0.5785309405554578},{"column":"target_revenue","similarity":0.5570052981646593}],"asset_maintenance":[{"column":"performed_by","similarity":0.577414569986232}],"budgets":[{"column":"department_id","similarity":0.5749997772800637}],"employee_certifications":[{"column":"employee_id","similarity":0.5740569827698636},{"column":"expiry_date","similarity":0.5696332852761125}],"cost_centers":[{"column":"department_id","similarity":0.5739824047413312}],"asset_transfers":[{"column":"transferred_by","similarity":0.5726316663319801},{"column":"to_employee_id","similarity":0.5708185051700986},{"column":"from_employee_id","similarity":0.5690345365953042}],"employee_benefits":[{"column":"end_date","similarity":0.5715674244638516},{"column":"employee_id","similarity":0.562908633973355}],"purchase_requisitions":[{"column":"department_id","similarity":0.5688527878379692}],"inventory_adjustments":[{"column":"adjusted_by","similarity":0.5657897970795053}],"currencies":[{"column":"exchange_rate","similarity":0.5652318119936446}],"timesheets":[{"column":"employee_id","similarity":0.5598968526380919}],"sales_opportunities":[{"column":"owner_id","similarity":0.5589945818871924}],"business_units":[{"column":"manager_id","similarity":0.5578038204905201}],"employment_history":[{"column":"employee_id","similarity":0.5568703170476632},{"column":"reason_for_leaving","similarity":0.5563939133984841}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5567581861316643}]},"fused_scores":[{"table":"employees","fused":0.7429600879764632,"table_sim":0.6359658673732379,"col_score":0.9034514188813011},{"table":"employee_salaries","fused":0.730438260406438,"table_sim":0.6137332929756416,"col_score":0.9054957115526325},{"table":"employee_training","fused":0.7048327340135462,"table_sim":0.5866463738638922,"col_score":0.8821122742380272},{"table":"departments","fused":0.6982981046689376,"table_sim":0.6101103038853555,"col_score":0.8305798058443106},{"table":"sales_regions","fused":0.6611116725977203,"table_sim":0.5955253694234874,"col_score":0.7594911273590695},{"table":"employee_certifications","fused":0.6520510785875488,"table_sim":0.5730496448155384,"col_score":0.7705532292455647},{"table":"employment_history","fused":0.6518695141433559,"table_sim":0.5855835073288157,"col_score":0.7512985243651662},{"table":"performance_reviews","fused":0.5922662605064686,"table_sim":0.5822186192352505,"col_score":0.6073377224132958},{"table":"goods_receipts","fused":0.5834348632649677,"table_sim":0.585472710203539,"col_score":0.580378092857111},{"table":"asset_maintenance","fused":0.5710543829656547,"table_sim":0.5668142582852698,"col_score":0.577414569986232},{"table":"inventory_adjustments","fused":0.567582792874286,"table_sim":0.5687781234041399,"col_score":0.5657897970795053},{"table":"sales_territories","fused":0.5299092041028902,"table_sim":0.5983156084770043,"col_score":0.42729959754171914},{"table":"positions","fused":0.5293514177843557,"table_sim":0.5999463882310814,"col_score":0.42345896211426726},{"table":"budgets","fused":0.5163590910244096,"table_sim":0.5922652556433196,"col_score":0.40249984409604456},{"table":"purchase_requisitions","fused":0.50632290626152,"table_sim":0.578406876111481,"col_score":0.3981969514865784}],"fk_expansion_candidates":32,"fk_expansion_added":2,"fk_expansion_blocked_count":25,"fk_expansion_blocked":[{"table":"maintenance_types","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"sales_territories","reason":"max_tables"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"max_tables"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":23,"total_retrieval_latency_ms":28,"sql_generated":"","tables_used_in_sql":[],"total_latency_ms":2763,"failure_type":"execution_error","failure_details":"Model generated invalid output (gibberish detected)"}
{"timestamp":"2026-01-29T19:46:36.297Z","query_id":"4827acde-1a1d-489d-938f-b0259fe41c0e","question":"Find the salary percentile ranking for each employee within their department","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_salaries","employees","positions","departments","performance_reviews","employee_training","employee_benefits","employee_certifications","sales_regions","sales_territories","employment_history","budgets"],"tables_from_table_retrieval":15,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_salaries","similarity":0.708947353388894},{"table":"positions","similarity":0.673242751719371},{"table":"employees","similarity":0.6495295179488771},{"table":"departments","similarity":0.64741802797087},{"table":"sales_regions","similarity":0.6247633430026287},{"table":"performance_reviews","similarity":0.6201770986480979},{"table":"budgets","similarity":0.6059422475297072},{"table":"employee_training","similarity":0.605724513187425},{"table":"sales_territories","similarity":0.603501429588932},{"table":"employee_benefits","similarity":0.59838723625395},{"table":"employee_certifications","similarity":0.5971601397111606},{"table":"purchase_requisitions","similarity":0.5927866150381371},{"table":"business_units","similarity":0.5911989355111648},{"table":"units_of_measure","similarity":0.5855786477919521},{"table":"employment_history","similarity":0.5846118164259523}],"column_hits_per_table":{"employees":9,"employee_salaries":7,"departments":4,"positions":3,"employee_training":2,"project_resources":2,"sales_orders":4,"order_lines":1,"performance_reviews":4,"sales_territories":1,"employee_benefits":2,"currencies":1,"tax_rates":1,"employee_certifications":2,"vendor_invoices":3,"sales_regions":1,"purchase_orders":1,"asset_categories":1,"business_units":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.7574782269751729},{"column":"employee_number","similarity":0.6492182366482667},{"column":"department_id","similarity":0.6395368153433474}],"employee_salaries":[{"column":"amount","similarity":0.7359583527234096},{"column":"approved_by","similarity":0.6926943474739576},{"column":"employee_id","similarity":0.676986467510318}],"departments":[{"column":"budget","similarity":0.6829775530024116},{"column":"manager_id","similarity":0.6397221630770776},{"column":"parent_department_id","similarity":0.6254065117903628}],"positions":[{"column":"min_salary","similarity":0.6777126447106386},{"column":"max_salary","similarity":0.6724570189361891},{"column":"department_id","similarity":0.6427390436680331}],"employee_training":[{"column":"score","similarity":0.6590553174224684},{"column":"status","similarity":0.6029782499051857}],"project_resources":[{"column":"hourly_rate","similarity":0.6466943832186318},{"column":"allocation_percent","similarity":0.6196500675265969}],"sales_orders":[{"column":"total","similarity":0.6356725867073684},{"column":"subtotal","similarity":0.6267418575329986},{"column":"tax_amount","similarity":0.6063888395862791}],"order_lines":[{"column":"discount_percent","similarity":0.6264197871171734}],"performance_reviews":[{"column":"employee_id","similarity":0.6263614751745396},{"column":"goals_met_percent","similarity":0.6239844557794996},{"column":"reviewer_id","similarity":0.6213599775398778}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6241225270384395}],"employee_benefits":[{"column":"coverage_level","similarity":0.6222756439662573},{"column":"employee_id","similarity":0.6153391648759183}],"currencies":[{"column":"exchange_rate","similarity":0.6203188576134201}],"tax_rates":[{"column":"rate","similarity":0.6188638790317935}],"employee_certifications":[{"column":"certificate_number","similarity":0.614080794353629},{"column":"employee_id","similarity":0.6138517170268198}],"vendor_invoices":[{"column":"total","similarity":0.6120628382001947},{"column":"subtotal","similarity":0.610881078873543},{"column":"amount_paid","similarity":0.6062315858747155}],"sales_regions":[{"column":"manager_id","similarity":0.6115942597940399}],"purchase_orders":[{"column":"total","similarity":0.6092847852619704}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.6026361592860408}],"business_units":[{"column":"manager_id","similarity":0.6025430641596784}]},"fused_scores":[{"table":"employee_salaries","fused":0.8582906226174918,"table_sim":0.708947353388894,"col_score":1.0823055264603885},{"table":"employees","fused":0.8225526488890488,"table_sim":0.6495295179488771,"col_score":1.0820873452993063},{"table":"positions","fused":0.8095221127031159,"table_sim":0.673242751719371,"col_score":1.0139411541787333},{"table":"departments","fused":0.7512029408142775,"table_sim":0.64741802797087,"col_score":0.9068803100793887},{"table":"performance_reviews","fused":0.742790981718875,"table_sim":0.6201770986480979,"col_score":0.9267118063250408},{"table":"employee_training","fused":0.7114737898681683,"table_sim":0.605724513187425,"col_score":0.8700977048892833},{"table":"employee_benefits","fused":0.6940900824215015,"table_sim":0.59838723625395,"col_score":0.8376443516728287},{"table":"employee_certifications","fused":0.6898676419519026,"table_sim":0.5971601397111606,"col_score":0.8289288953130158},{"table":"sales_regions","fused":0.5461043985439084,"table_sim":0.6247633430026287,"col_score":0.42811598185582794},{"table":"sales_territories","fused":0.5368551653241223,"table_sim":0.603501429588932,"col_score":0.4368857689269076},{"table":"business_units","fused":0.5234314192714088,"table_sim":0.5911989355111648,"col_score":0.42178014491177485},{"table":"project_resources","fused":0.3826077667927721,"table_sim":0,"col_score":0.9565194169819302},{"table":"sales_orders","fused":0.3796174061895471,"table_sim":0,"col_score":0.9490435154738677},{"table":"vendor_invoices","fused":0.3670013510547865,"table_sim":0,"col_score":0.9175033776369662},{"table":"budgets","fused":0.3635653485178243,"table_sim":0.6059422475297072,"col_score":0}],"fk_expansion_candidates":30,"fk_expansion_added":2,"fk_expansion_blocked_count":24,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":19,"total_retrieval_latency_ms":25,"sql_generated":"SELECT e.employee_id, CONCAT(e.first_name, ' ', e.last_name) AS full_name, d.department_id, p.position_id, s.salary, RANK() OVER (PARTITION BY d.department_id ORDER BY s.salary) as salary_percentile FROM employees e JOIN departments d ON e.department_id = d.department_id JOIN positions p ON e.position_id = p.position_id JOIN employee_salaries s ON e.employee_id = s.employee_id ORDER BY full_name, salary_percentile;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column s.salary does not exist","autocorrect_attempted":false,"autocorrect_success":false,"autocorrect_failure_reason":"Could not parse undefined column from error message","total_latency_ms":5671,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column s.salary does not exist"}
{"timestamp":"2026-01-29T19:46:41.968Z","query_id":"e3fae12b-7152-41c4-bee3-b40b4ab13016","question":"Identify employees who have not completed mandatory training","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employee_training","training_courses","employee_certifications","employees","employee_salaries","certifications","employee_benefits","leave_requests","task_assignments","business_units","employment_history","departments"],"tables_from_table_retrieval":15,"tables_from_column_only":4,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_training","similarity":0.6889099730779654},{"table":"training_courses","similarity":0.6502538829600134},{"table":"employee_certifications","similarity":0.622622468299915},{"table":"employees","similarity":0.5856498095746774},{"table":"leave_requests","similarity":0.562719264388909},{"table":"employee_salaries","similarity":0.5560241204386787},{"table":"certifications","similarity":0.5525137082028069},{"table":"employment_history","similarity":0.5480613869817784},{"table":"business_units","similarity":0.5439038631444495},{"table":"task_assignments","similarity":0.5397934296806453},{"table":"employee_benefits","similarity":0.5344393398297539},{"table":"timesheets","similarity":0.5319406753449695},{"table":"emergency_contacts","similarity":0.5318968233375349},{"table":"departments","similarity":0.5263789627125498},{"table":"positions","similarity":0.5263070089098566}],"column_hits_per_table":{"employee_training":7,"training_courses":7,"employees":15,"employee_certifications":6,"task_assignments":1,"employee_salaries":2,"leave_requests":1,"leave_types":1,"certifications":2,"business_units":1,"departments":1,"emergency_contacts":1,"fixed_assets":1,"sales_territories":1,"employee_benefits":1,"timesheets":1,"warehouses":1},"top_columns_per_table":{"employee_training":[{"column":"completion_date","similarity":0.7168978136285726},{"column":"status","similarity":0.7028985160111028},{"column":"scheduled_date","similarity":0.6960973950291245}],"training_courses":[{"column":"is_mandatory","similarity":0.7023171508593787},{"column":"is_active","similarity":0.633360326144161},{"column":"duration_hours","similarity":0.6170672809188396}],"employees":[{"column":"is_active","similarity":0.6234608396623087},{"column":"hire_date","similarity":0.5874512415515796},{"column":"employee_id","similarity":0.5844803651068503}],"employee_certifications":[{"column":"employee_id","similarity":0.6135493904138725},{"column":"obtained_date","similarity":0.6060985739368497},{"column":"expiry_date","similarity":0.5959077655676795}],"task_assignments":[{"column":"employee_id","similarity":0.5819777223310592}],"employee_salaries":[{"column":"effective_date","similarity":0.573895057820439},{"column":"end_date","similarity":0.5725676252235854}],"leave_requests":[{"column":"employee_id","similarity":0.5678540613812961}],"leave_types":[{"column":"is_paid","similarity":0.562989201901735}],"certifications":[{"column":"description","similarity":0.5609446922689106},{"column":"validity_years","similarity":0.5539678539563746}],"business_units":[{"column":"manager_id","similarity":0.5596404860633486}],"departments":[{"column":"manager_id","similarity":0.5580853205909431}],"emergency_contacts":[{"column":"employee_id","similarity":0.5579377142447549}],"fixed_assets":[{"column":"assigned_to","similarity":0.5574586620303502}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5565974280594508}],"employee_benefits":[{"column":"end_date","similarity":0.5556804750501676}],"timesheets":[{"column":"employee_id","similarity":0.555561707512954}],"warehouses":[{"column":"manager_id","similarity":0.5551779442719302}]},"fused_scores":[{"table":"employee_training","fused":0.8393245883040332,"table_sim":0.6889099730779654,"col_score":1.0649465111431349},{"table":"training_courses","fused":0.7944926463035276,"table_sim":0.6502538829600134,"col_score":1.0108507913187985},{"table":"employee_certifications","fused":0.7351944636682248,"table_sim":0.622622468299915,"col_score":0.9040524567206896},{"table":"employees","fused":0.7032367749145099,"table_sim":0.5856498095746774,"col_score":0.8796172229242586},{"table":"employee_salaries","fused":0.6776860204360999,"table_sim":0.5560241204386787,"col_score":0.8601788704322317},{"table":"certifications","fused":0.6316276234218814,"table_sim":0.5525137082028069,"col_score":0.7502984962504933},{"table":"employee_benefits","fused":0.5429357939179194,"table_sim":0.5344393398297539,"col_score":0.5556804750501676},{"table":"leave_requests","fused":0.4966306958201083,"table_sim":0.562719264388909,"col_score":0.39749784296690727},{"table":"task_assignments","fused":0.48682982006108366,"table_sim":0.5397934296806453,"col_score":0.4073844056317414},{"table":"business_units","fused":0.4830416539844073,"table_sim":0.5439038631444495,"col_score":0.391748340244344},{"table":"emergency_contacts","fused":0.4753606539910523,"table_sim":0.5318968233375349,"col_score":0.3905563999713284},{"table":"timesheets","fused":0.4747216833106088,"table_sim":0.5319406753449695,"col_score":0.38889319525906774},{"table":"departments","fused":0.47209126739299395,"table_sim":0.5263789627125498,"col_score":0.39065972441366015},{"table":"employment_history","fused":0.32883683218906706,"table_sim":0.5480613869817784,"col_score":0},{"table":"positions","fused":0.31578420534591395,"table_sim":0.5263070089098566,"col_score":0}],"fk_expansion_candidates":31,"fk_expansion_added":2,"fk_expansion_blocked_count":25,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"sales_regions","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"leave_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"max_tables"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":38,"total_retrieval_latency_ms":43,"sql_generated":"SELECT e.employee_id, e.first_name || ' ' || e.last_name AS employee_full_name FROM employees e LEFT JOIN employee_training et ON e.employee_id = et.employee_id AND et.status = 'completed' WHERE et.course_id IN (SELECT course_id FROM training_courses WHERE is_mandatory = TRUE) AND et.employee_id IS NULL;","tables_used_in_sql":[],"explain_result":"success","rows_returned":0,"total_latency_ms":1370}
{"timestamp":"2026-01-29T19:46:43.338Z","query_id":"2803b015-d631-4ad4-b6e4-e64472c66da2","question":"Calculate month-over-month sales growth rate for the past 12 months","attempt_count":1,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_opportunities","sales_orders","sales_quotes","project_milestones","performance_reviews","purchase_orders","sales_regions","sales_territories","goods_receipts","fiscal_years","fiscal_periods","fixed_assets"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_opportunities","similarity":0.6157116926794552},{"table":"sales_orders","similarity":0.6006459034551404},{"table":"sales_regions","similarity":0.5852419849044662},{"table":"sales_quotes","similarity":0.5842211564145057},{"table":"project_milestones","similarity":0.570290032024122},{"table":"purchase_orders","similarity":0.5671901529888976},{"table":"performance_reviews","similarity":0.5664270760489215},{"table":"sales_territories","similarity":0.5642407853687107},{"table":"stock_transfers","similarity":0.5587294182734618},{"table":"goods_receipts","similarity":0.5586981186050166},{"table":"fiscal_periods","similarity":0.557865710059711},{"table":"fiscal_years","similarity":0.5484906283130861},{"table":"purchase_requisitions","similarity":0.5400891317424515},{"table":"inventory_adjustments","similarity":0.5400433012210731},{"table":"tax_rates","similarity":0.5390929131193718}],"column_hits_per_table":{"sales_opportunities":10,"sales_regions":2,"sales_orders":10,"sales_quotes":8,"maintenance_types":1,"performance_reviews":2,"project_milestones":3,"product_suppliers":1,"sales_territories":2,"depreciation_schedules":2,"purchase_orders":3,"inventory_adjustments":1,"goods_receipts":1,"fixed_assets":1,"project_resources":1,"fiscal_years":1,"inventory_levels":1},"top_columns_per_table":{"sales_opportunities":[{"column":"expected_close_date","similarity":0.6349920466572413},{"column":"actual_close_date","similarity":0.6306604293774668},{"column":"probability","similarity":0.6115666602689689}],"sales_regions":[{"column":"target_revenue","similarity":0.6246528697952606},{"column":"name","similarity":0.5895328709845001}],"sales_orders":[{"column":"order_date","similarity":0.6066547704969023},{"column":"total","similarity":0.596441977736594},{"column":"ship_date","similarity":0.5930488071352698}],"sales_quotes":[{"column":"quote_date","similarity":0.6043144886073183},{"column":"valid_until","similarity":0.5926742142050333},{"column":"status","similarity":0.58861972419265}],"maintenance_types":[{"column":"frequency_months","similarity":0.6025393190667295}],"performance_reviews":[{"column":"goals_met_percent","similarity":0.5879927707908889},{"column":"review_period_start","similarity":0.5628892649507783}],"project_milestones":[{"column":"amount","similarity":0.5831571816642501},{"column":"completed_date","similarity":0.5731111906139561},{"column":"due_date","similarity":0.5646006206164285}],"product_suppliers":[{"column":"lead_time_days","similarity":0.5824107328736775}],"sales_territories":[{"column":"name","similarity":0.5815838973769365},{"column":"region_id","similarity":0.5606403725985879}],"depreciation_schedules":[{"column":"monthly_amount","similarity":0.5809365473284506},{"column":"useful_life_months","similarity":0.5752368480135198}],"purchase_orders":[{"column":"expected_date","similarity":0.5807594956317658},{"column":"total","similarity":0.5587034043259257},{"column":"order_date","similarity":0.5574665711216267}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.5689704746812687}],"goods_receipts":[{"column":"receipt_date","similarity":0.5649131464666418}],"fixed_assets":[{"column":"purchase_date","similarity":0.5640514088105937}],"project_resources":[{"column":"hourly_rate","similarity":0.5639674847646822}],"fiscal_years":[{"column":"year","similarity":0.5622418074015364}],"inventory_levels":[{"column":"last_count_date","similarity":0.5583066702397402}]},"fused_scores":[{"table":"sales_opportunities","fused":0.7495559201460631,"table_sim":0.6157116926794552,"col_score":0.9503222613459748},{"table":"sales_orders","fused":0.7223378458191639,"table_sim":0.6006459034551404,"col_score":0.9048757593651993},{"table":"sales_quotes","fused":0.7107933321326374,"table_sim":0.5842211564145057,"col_score":0.9006515957098349},{"table":"project_milestones","fused":0.6900591300029644,"table_sim":0.570290032024122,"col_score":0.8697127769712282},{"table":"performance_reviews","fused":0.6876312069358641,"table_sim":0.5664270760489215,"col_score":0.8694374032662779},{"table":"purchase_orders","fused":0.6843585709112301,"table_sim":0.5671901529888976,"col_score":0.8601111977947287},{"table":"sales_regions","fused":0.6835409407986139,"table_sim":0.5852419849044662,"col_score":0.8309893746398356},{"table":"sales_territories","fused":0.5798776146505709,"table_sim":0.5642407853687107,"col_score":0.6033328585733613},{"table":"goods_receipts","fused":0.5611841297496667,"table_sim":0.5586981186050166,"col_score":0.5649131464666418},{"table":"fiscal_years","fused":0.5539910999484663,"table_sim":0.5484906283130861,"col_score":0.5622418074015364},{"table":"inventory_adjustments","fused":0.5516141706051514,"table_sim":0.5400433012210731,"col_score":0.5689704746812687},{"table":"depreciation_schedules","fused":0.34742198853408424,"table_sim":0,"col_score":0.8685549713352105},{"table":"stock_transfers","fused":0.33523765096407704,"table_sim":0.5587294182734618,"col_score":0},{"table":"fiscal_periods","fused":0.33471942603582655,"table_sim":0.557865710059711,"col_score":0},{"table":"purchase_requisitions","fused":0.32405347904547094,"table_sim":0.5400891317424515,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":13,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":41,"total_retrieval_latency_ms":47,"sql_generated":"","tables_used_in_sql":[],"total_latency_ms":2771,"failure_type":"execution_error","failure_details":"Model generated invalid output (gibberish detected)"}
{"timestamp":"2026-01-29T19:46:46.110Z","query_id":"6d471aab-a73f-4fa4-b46a-7696e138dce5","question":"Find the average order value and order frequency for each customer segment based on credit limit","attempt_count":2,"retry_succeeded":true,"execution_success":true,"retriever_version":"V2","tables_retrieved":["customers","order_lines","sales_orders","purchase_orders","po_lines","inventory_levels","vendor_invoice_lines","product_suppliers","vendor_invoices","requisition_lines","customer_contacts","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"customers","similarity":0.6806365809432632},{"table":"order_lines","similarity":0.6612582093852053},{"table":"sales_orders","similarity":0.6503570787641184},{"table":"purchase_orders","similarity":0.6350119894518774},{"table":"po_lines","similarity":0.6239700790357152},{"table":"sales_opportunities","similarity":0.6079639266361453},{"table":"inventory_levels","similarity":0.6033202031698347},{"table":"sales_regions","similarity":0.5939454770122685},{"table":"vendor_invoice_lines","similarity":0.5937575753832759},{"table":"requisition_lines","similarity":0.590502871726471},{"table":"goods_receipts","similarity":0.5885428783810364},{"table":"product_suppliers","similarity":0.5881326527582414},{"table":"purchase_requisitions","similarity":0.5870519262773803},{"table":"customer_contacts","similarity":0.5862288727557493},{"table":"vendor_invoices","similarity":0.5856337339498445}],"column_hits_per_table":{"customers":6,"order_lines":8,"purchase_orders":9,"sales_orders":7,"po_lines":5,"reorder_rules":2,"vendor_invoice_lines":3,"product_suppliers":1,"inventory_levels":4,"vendor_invoices":1,"customer_contacts":1,"requisition_lines":1,"quote_lines":1,"budget_lines":1},"top_columns_per_table":{"customers":[{"column":"credit_limit","similarity":0.7585186196959948},{"column":"customer_number","similarity":0.6580317654044683},{"column":"phone","similarity":0.6535915529702684}],"order_lines":[{"column":"line_total","similarity":0.6948388698124641},{"column":"unit_price","similarity":0.6806419895725467},{"column":"discount_percent","similarity":0.6754620796934562}],"purchase_orders":[{"column":"total","similarity":0.6852668855656413},{"column":"shipping_cost","similarity":0.6529784604621701},{"column":"po_number","similarity":0.6529416456054898}],"sales_orders":[{"column":"total","similarity":0.6806848320717455},{"column":"order_number","similarity":0.6663157017306066},{"column":"shipping_cost","similarity":0.6460324115150056}],"po_lines":[{"column":"line_total","similarity":0.6613663843065055},{"column":"unit_cost","similarity":0.634997889978794},{"column":"quantity_received","similarity":0.6333850871020219}],"reorder_rules":[{"column":"max_quantity","similarity":0.6390768169493309},{"column":"min_quantity","similarity":0.613671491916226}],"vendor_invoice_lines":[{"column":"amount","similarity":0.6368350345890655},{"column":"unit_cost","similarity":0.6252213762445078},{"column":"quantity","similarity":0.6211936807432661}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6355194003397301}],"inventory_levels":[{"column":"quantity_reserved","similarity":0.6278756626527294},{"column":"last_count_date","similarity":0.6173098741422713},{"column":"quantity_on_hand","similarity":0.6152745260367936}],"vendor_invoices":[{"column":"total","similarity":0.6233351375751739}],"customer_contacts":[{"column":"phone","similarity":0.6135336030884168}],"requisition_lines":[{"column":"estimated_total","similarity":0.6134905613297535}],"quote_lines":[{"column":"line_total","similarity":0.6131735766593597}],"budget_lines":[{"column":"amount","similarity":0.6095658159713937}]},"fused_scores":[{"table":"customers","fused":0.8433957495252495,"table_sim":0.6806365809432632,"col_score":1.087534502398229},{"table":"order_lines","fused":0.8108188714706182,"table_sim":0.6612582093852053,"col_score":1.0351598645987374},{"table":"sales_orders","fused":0.7957513204332907,"table_sim":0.6503570787641184,"col_score":1.0138426829370488},{"table":"purchase_orders","fused":0.785709639989817,"table_sim":0.6350119894518774,"col_score":1.0117561157967263},{"table":"po_lines","fused":0.7659281791397902,"table_sim":0.6239700790357152,"col_score":0.9788653292959025},{"table":"inventory_levels","fused":0.7366043617914468,"table_sim":0.6033202031698347,"col_score":0.9365305997238651},{"table":"vendor_invoice_lines","fused":0.7360328343144933,"table_sim":0.5937575753832759,"col_score":0.9494457227113194},{"table":"product_suppliers","fused":0.6070873517908368,"table_sim":0.5881326527582414,"col_score":0.6355194003397301},{"table":"vendor_invoices","fused":0.6007142953999762,"table_sim":0.5856337339498445,"col_score":0.6233351375751739},{"table":"requisition_lines","fused":0.599697947567784,"table_sim":0.590502871726471,"col_score":0.6134905613297535},{"table":"customer_contacts","fused":0.5971507648888162,"table_sim":0.5862288727557493,"col_score":0.6135336030884168},{"table":"reorder_rules","fused":0.3783650251629776,"table_sim":0,"col_score":0.945912562907444},{"table":"sales_opportunities","fused":0.3647783559816872,"table_sim":0.6079639266361453,"col_score":0},{"table":"sales_regions","fused":0.3563672862073611,"table_sim":0.5939454770122685,"col_score":0},{"table":"goods_receipts","fused":0.3531257270286218,"table_sim":0.5885428783810364,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":38,"total_retrieval_latency_ms":44,"sql_generated":"SELECT c.credit_limit, AVG(s.total) AS avg_order_value, COUNT(*) / 365.0 AS order_frequency FROM customers c JOIN sales_orders s ON c.customer_id = s.customer_id GROUP BY c.credit_limit;","tables_used_in_sql":[],"explain_result":"success","sqlstate":"42703","error_message":"column c.segment does not exist","autocorrect_attempted":false,"autocorrect_success":false,"autocorrect_failure_reason":"Could not parse undefined column from error message","rows_returned":5,"total_latency_ms":1902}
{"timestamp":"2026-01-29T19:46:48.012Z","query_id":"e8c2068c-3e91-43a0-b467-ec7554f76e01","question":"What is the sales pipeline weighted value by stage and expected close month?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_opportunities","sales_orders","vendor_invoices","opportunity_stages","vendor_invoice_lines","purchase_orders","sales_quotes","sales_regions","project_phases","product_suppliers","order_lines","products"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_opportunities","similarity":0.6054695442586654},{"table":"opportunity_stages","similarity":0.5878194026125775},{"table":"purchase_orders","similarity":0.569620040129231},{"table":"sales_orders","similarity":0.5672773314428301},{"table":"vendor_invoices","similarity":0.5653986063661894},{"table":"vendor_invoice_lines","similarity":0.5524555005656138},{"table":"sales_quotes","similarity":0.550409683101325},{"table":"product_suppliers","similarity":0.5461777322512522},{"table":"sales_regions","similarity":0.5358537079732489},{"table":"inventory_levels","similarity":0.533856062475615},{"table":"stock_transfers","similarity":0.5326603234644891},{"table":"project_phases","similarity":0.5278052692037372},{"table":"order_lines","similarity":0.5277084897192255},{"table":"vendor_contacts","similarity":0.5244207269459633},{"table":"fiscal_years","similarity":0.5214777441208323}],"column_hits_per_table":{"sales_opportunities":6,"sales_orders":8,"sales_quotes":7,"vendor_invoices":7,"vendor_invoice_lines":3,"products":1,"purchase_orders":4,"opportunity_stages":2,"project_phases":2,"sales_regions":2,"depreciation_schedules":2,"product_suppliers":1,"project_milestones":1,"performance_reviews":1,"inventory_levels":1,"projects":1,"order_lines":1},"top_columns_per_table":{"sales_opportunities":[{"column":"expected_close_date","similarity":0.6672378848884489},{"column":"actual_close_date","similarity":0.634399953849031},{"column":"amount","similarity":0.5735263838442387}],"sales_orders":[{"column":"total","similarity":0.5926957958092102},{"column":"subtotal","similarity":0.5919476684332582},{"column":"shipping_cost","similarity":0.5804098809281995}],"sales_quotes":[{"column":"status","similarity":0.5911942655396014},{"column":"total","similarity":0.5841523851755166},{"column":"subtotal","similarity":0.5810304737355192}],"vendor_invoices":[{"column":"subtotal","similarity":0.5904633340627892},{"column":"total","similarity":0.58918482827673},{"column":"status","similarity":0.5659596977000683}],"vendor_invoice_lines":[{"column":"amount","similarity":0.587921854927484},{"column":"unit_cost","similarity":0.5805145112553433},{"column":"quantity","similarity":0.5740191375367586}],"products":[{"column":"weight","similarity":0.5793059408002791}],"purchase_orders":[{"column":"expected_date","similarity":0.5712405322677854},{"column":"total","similarity":0.55843434508497},{"column":"subtotal","similarity":0.5557966692183937}],"opportunity_stages":[{"column":"is_closed","similarity":0.5687914662845237},{"column":"probability","similarity":0.554174542810227}],"project_phases":[{"column":"end_date","similarity":0.5684419996726171},{"column":"status","similarity":0.5441275392901614}],"sales_regions":[{"column":"target_revenue","similarity":0.5671305047519016},{"column":"name","similarity":0.5466568514473741}],"depreciation_schedules":[{"column":"monthly_amount","similarity":0.5656288481399},{"column":"annual_amount","similarity":0.544202460241292}],"product_suppliers":[{"column":"lead_time_days","similarity":0.5635593957356553}],"project_milestones":[{"column":"amount","similarity":0.5574234871213531}],"performance_reviews":[{"column":"review_period_end","similarity":0.5567893896705155}],"inventory_levels":[{"column":"last_count_date","similarity":0.5552187328325828}],"projects":[{"column":"planned_end_date","similarity":0.5474865766090119}],"order_lines":[{"column":"discount_percent","similarity":0.5465995943119437}]},"fused_scores":[{"table":"sales_opportunities","fused":0.7570568712803851,"table_sim":0.6054695442586654,"col_score":0.9844378618129644},{"table":"sales_orders","fused":0.6958342508760338,"table_sim":0.5672773314428301,"col_score":0.8886696300258392},{"table":"vendor_invoices","fused":0.6932614631001753,"table_sim":0.5653986063661894,"col_score":0.8850557482011542},{"table":"opportunity_stages","fused":0.6910431366434013,"table_sim":0.5878194026125775,"col_score":0.8458787376896373},{"table":"vendor_invoice_lines","fused":0.6827449445614305,"table_sim":0.5524555005656138,"col_score":0.8781791105551557},{"table":"purchase_orders","fused":0.6819551060016467,"table_sim":0.569620040129231,"col_score":0.8504577048102704},{"table":"sales_quotes","fused":0.6801128586781056,"table_sim":0.550409683101325,"col_score":0.8746676220432762},{"table":"sales_regions","fused":0.6248963858873424,"table_sim":0.5358537079732489,"col_score":0.7584604027584826},{"table":"project_phases","fused":0.6202378168919118,"table_sim":0.5278052692037372,"col_score":0.7588866384241736},{"table":"product_suppliers","fused":0.5531303976450135,"table_sim":0.5461777322512522,"col_score":0.5635593957356553},{"table":"inventory_levels","fused":0.5424011306184021,"table_sim":0.533856062475615,"col_score":0.5552187328325828},{"table":"order_lines","fused":0.5352649315563127,"table_sim":0.5277084897192255,"col_score":0.5465995943119437},{"table":"depreciation_schedules","fused":0.33509203130421844,"table_sim":0,"col_score":0.837730078260546},{"table":"stock_transfers","fused":0.31959619407869344,"table_sim":0.5326603234644891,"col_score":0},{"table":"vendor_contacts","fused":0.314652436167578,"table_sim":0.5244207269459633,"col_score":0}],"fk_expansion_candidates":15,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"projects","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":49,"total_retrieval_latency_ms":55,"sql_generated":"","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column os.order_id does not exist","autocorrect_attempted":false,"autocorrect_success":false,"autocorrect_failure_reason":"Could not parse undefined column from error message","total_latency_ms":6520,"failure_type":"execution_error","failure_details":"Model did not generate SELECT statement"}
{"timestamp":"2026-01-29T19:46:54.532Z","query_id":"ea073381-5aca-4bb7-b63c-ff5f625a3913","question":"Calculate inventory turnover ratio by product category","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["inventory_levels","inventory_transactions","asset_categories","products","inventory_adjustments","product_suppliers","sales_orders","reorder_rules","receipt_lines","product_categories","fixed_assets","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":1,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_levels","similarity":0.6747561713408694},{"table":"products","similarity":0.6673866757064916},{"table":"asset_categories","similarity":0.6658822163690923},{"table":"inventory_transactions","similarity":0.6584332771076702},{"table":"product_categories","similarity":0.6501703787798785},{"table":"reorder_rules","similarity":0.6320804286370688},{"table":"inventory_adjustments","similarity":0.631066892629761},{"table":"goods_receipts","similarity":0.6155086832245751},{"table":"asset_maintenance","similarity":0.6045690515376625},{"table":"fixed_assets","similarity":0.6018441701160724},{"table":"product_suppliers","similarity":0.6013426853614583},{"table":"receipt_lines","similarity":0.596972482520933},{"table":"sales_orders","similarity":0.5904178851402269},{"table":"depreciation_entries","similarity":0.586520590552934},{"table":"order_lines","similarity":0.5853842956573193}],"column_hits_per_table":{"inventory_transactions":8,"inventory_levels":7,"asset_categories":4,"products":7,"product_categories":5,"sales_orders":4,"fixed_assets":1,"inventory_adjustments":5,"reorder_rules":2,"product_suppliers":2,"sales_regions":1,"depreciation_entries":1,"receipt_lines":2,"goods_receipts":1},"top_columns_per_table":{"inventory_transactions":[{"column":"quantity","similarity":0.6865537352744734},{"column":"transaction_type","similarity":0.6508604601013612},{"column":"product_id","similarity":0.6488474271833253}],"inventory_levels":[{"column":"quantity_reserved","similarity":0.6807736099760374},{"column":"quantity_available","similarity":0.6752817875893032},{"column":"product_id","similarity":0.6665316206818281}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.6677845311404557},{"column":"depreciation_method","similarity":0.636435148844442},{"column":"useful_life_years","similarity":0.6246456594520073}],"products":[{"column":"category_id","similarity":0.6569412387377351},{"column":"weight","similarity":0.6437332914835887},{"column":"unit_cost","similarity":0.6272328353575076}],"product_categories":[{"column":"category_id","similarity":0.6539744060156725},{"column":"description","similarity":0.6525521507615628},{"column":"is_active","similarity":0.6498264325617669}],"sales_orders":[{"column":"total","similarity":0.6251835363649095},{"column":"order_number","similarity":0.6053905248062422},{"column":"subtotal","similarity":0.6052825411110333}],"fixed_assets":[{"column":"category_id","similarity":0.6200942331147149}],"inventory_adjustments":[{"column":"adjustment_number","similarity":0.6158389191950121},{"column":"adjusted_by","similarity":0.6148750217624924},{"column":"status","similarity":0.6081076578124999}],"reorder_rules":[{"column":"product_id","similarity":0.6137559004977273},{"column":"reorder_quantity","similarity":0.6086116987509864}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6128603706932287},{"column":"unit_cost","similarity":0.5980571455291517}],"sales_regions":[{"column":"target_revenue","similarity":0.6085079266346386}],"depreciation_entries":[{"column":"accumulated_depreciation","similarity":0.6077181065202967}],"receipt_lines":[{"column":"product_id","similarity":0.6076761642596111},{"column":"quantity_received","similarity":0.6073129685640721}],"goods_receipts":[{"column":"receipt_number","similarity":0.6055856654540261}]},"fused_scores":[{"table":"inventory_levels","fused":0.8122195043127973,"table_sim":0.6747561713408694,"col_score":1.018414503770689},{"table":"inventory_transactions","fused":0.7998535523946637,"table_sim":0.6584332771076702,"col_score":1.011983965325154},{"table":"asset_categories","fused":0.7939301720465259,"table_sim":0.6658822163690923,"col_score":0.9860021055626766},{"table":"products","fused":0.7833718890888319,"table_sim":0.6673866757064916,"col_score":0.9573497091623425},{"table":"inventory_adjustments","fused":0.74795070760836,"table_sim":0.631066892629761,"col_score":0.9232764300762584},{"table":"product_suppliers","fused":0.7255611885999969,"table_sim":0.6013426853614583,"col_score":0.9118889434578046},{"table":"sales_orders","fused":0.7254022505913484,"table_sim":0.5904178851402269,"col_score":0.9278787987680306},{"table":"reorder_rules","fused":0.7086187627523177,"table_sim":0.6320804286370688,"col_score":0.823426263925191},{"table":"receipt_lines","fused":0.6861833399345343,"table_sim":0.596972482520933,"col_score":0.819999626054936},{"table":"product_categories","fused":0.6645723620589341,"table_sim":0.6501703787798785,"col_score":0.6861753369775176},{"table":"goods_receipts","fused":0.6115394761163555,"table_sim":0.6155086832245751,"col_score":0.6055856654540261},{"table":"depreciation_entries","fused":0.5949995969398791,"table_sim":0.586520590552934,"col_score":0.6077181065202967},{"table":"fixed_assets","fused":0.5347328873417636,"table_sim":0.6018441701160724,"col_score":0.4340659631803004},{"table":"asset_maintenance","fused":0.3627414309225975,"table_sim":0.6045690515376625,"col_score":0},{"table":"order_lines","fused":0.35123057739439156,"table_sim":0.5853842956573193,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":13,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"order_lines","reason":"max_tables"},{"table":"po_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":17,"total_retrieval_latency_ms":23,"sql_generated":"SELECT pc.name AS product_category, SUM(il.quantity_on_hand) / AVG(il.quantity_available) AS inventory_turnover_ratio FROM inventory_levels il JOIN products p ON il.product_id = p.product_id JOIN product_categories pc ON p.category_id = pc.category_id GROUP BY pc.name;","tables_used_in_sql":[],"explain_result":"success","rows_returned":30,"total_latency_ms":1281}
{"timestamp":"2026-01-29T19:46:55.813Z","query_id":"57099cee-fd1e-471d-8a92-e2ea5cef6f74","question":"Identify products with significant inventory discrepancies (adjustment > 10% of stock)","attempt_count":2,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["inventory_adjustments","adjustment_lines","inventory_transactions","inventory_levels","products","fixed_assets","asset_categories","stock_transfers","sales_orders","product_suppliers","asset_maintenance","order_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_adjustments","similarity":0.6958975386244389},{"table":"adjustment_lines","similarity":0.651007722195867},{"table":"fixed_assets","similarity":0.5955860146307721},{"table":"inventory_levels","similarity":0.5926011478403523},{"table":"products","similarity":0.578715845938642},{"table":"stock_transfers","similarity":0.5760981592349576},{"table":"inventory_transactions","similarity":0.5750206157907899},{"table":"asset_categories","similarity":0.5623112702235089},{"table":"asset_maintenance","similarity":0.5600794494972439},{"table":"product_suppliers","similarity":0.5588750264521751},{"table":"sales_orders","similarity":0.5479311734009632},{"table":"order_lines","similarity":0.5473705995587962},{"table":"purchase_orders","similarity":0.546212124678954},{"table":"product_categories","similarity":0.5459325805601473},{"table":"reorder_rules","similarity":0.5325202996518776}],"column_hits_per_table":{"inventory_adjustments":8,"adjustment_lines":5,"inventory_transactions":4,"products":5,"inventory_levels":5,"stock_transfers":2,"product_categories":1,"sales_orders":2,"product_suppliers":1,"asset_categories":3,"fixed_assets":4,"warehouse_locations":1,"goods_receipts":1,"project_expenses":1,"purchase_requisitions":1,"asset_locations":1,"asset_maintenance":1,"sales_opportunities":1,"vendor_invoices":2,"purchase_orders":1},"top_columns_per_table":{"inventory_adjustments":[{"column":"adjustment_number","similarity":0.7379814171122983},{"column":"reason","similarity":0.727925874735162},{"column":"status","similarity":0.7097133930935916}],"adjustment_lines":[{"column":"quantity_change","similarity":0.6459437862491665},{"column":"quantity_before","similarity":0.638065129258906},{"column":"quantity_after","similarity":0.636824144296085}],"inventory_transactions":[{"column":"transaction_type","similarity":0.6388771360730054},{"column":"reference_type","similarity":0.6379927241845618},{"column":"quantity","similarity":0.611413004161695}],"products":[{"column":"sku","similarity":0.6166735172572736},{"column":"name","similarity":0.6049081894916613},{"column":"weight","similarity":0.6002742783527346}],"inventory_levels":[{"column":"quantity_on_hand","similarity":0.6143345114617179},{"column":"quantity_available","similarity":0.6136312184002083},{"column":"quantity_reserved","similarity":0.6127891253033684}],"stock_transfers":[{"column":"transfer_number","similarity":0.6121115337226785},{"column":"status","similarity":0.6084281897334642}],"product_categories":[{"column":"name","similarity":0.6105471170007082}],"sales_orders":[{"column":"order_number","similarity":0.6049937069135132},{"column":"status","similarity":0.5883288690803906}],"product_suppliers":[{"column":"vendor_sku","similarity":0.6005565436728285}],"asset_categories":[{"column":"depreciation_method","similarity":0.5998811628635573},{"column":"name","similarity":0.5815804725674092},{"column":"salvage_value_percent","similarity":0.5811592495285139}],"fixed_assets":[{"column":"serial_number","similarity":0.5963742863000839},{"column":"asset_tag","similarity":0.5892195830987257},{"column":"name","similarity":0.5797471569989101}],"warehouse_locations":[{"column":"aisle","similarity":0.5865692348819901}],"goods_receipts":[{"column":"receipt_number","similarity":0.5864837088793964}],"project_expenses":[{"column":"category","similarity":0.5843825285695107}],"purchase_requisitions":[{"column":"requisition_number","similarity":0.5771490096202545}],"asset_locations":[{"column":"floor","similarity":0.5759538723637104}],"asset_maintenance":[{"column":"status","similarity":0.5750561706184214}],"sales_opportunities":[{"column":"source","similarity":0.5748716289995487}],"vendor_invoices":[{"column":"invoice_number","similarity":0.5743499698456791},{"column":"status","similarity":0.5674179154395642}],"purchase_orders":[{"column":"status","similarity":0.5739475463327183}]},"fused_scores":[{"table":"inventory_adjustments","fused":0.8583162649666151,"table_sim":0.6958975386244389,"col_score":1.1019443544798793},{"table":"adjustment_lines","fused":0.776595173668968,"table_sim":0.651007722195867,"col_score":0.9649763508786195},{"table":"inventory_transactions","fused":0.7281617687405886,"table_sim":0.5750206157907899,"col_score":0.9578734981652863},{"table":"inventory_levels","fused":0.7240207369689402,"table_sim":0.5926011478403523,"col_score":0.921150120661822},{"table":"products","fused":0.7139537701366416,"table_sim":0.578715845938642,"col_score":0.9168106564336409},{"table":"fixed_assets","fused":0.713745239918242,"table_sim":0.5955860146307721,"col_score":0.8909840778494468},{"table":"asset_categories","fused":0.693571077185231,"table_sim":0.5623112702235089,"col_score":0.8904607876278143},{"table":"stock_transfers","fused":0.6756834555927309,"table_sim":0.5760981592349576,"col_score":0.825061400129391},{"table":"sales_orders","fused":0.6531222284772379,"table_sim":0.5479311734009632,"col_score":0.8109088110916499},{"table":"product_suppliers","fused":0.5755476333404366,"table_sim":0.5588750264521751,"col_score":0.6005565436728285},{"table":"product_categories","fused":0.4985127410962866,"table_sim":0.5459325805601473,"col_score":0.42738298190049573},{"table":"asset_maintenance","fused":0.4970633974715043,"table_sim":0.5600794494972439,"col_score":0.40253931943289495},{"table":"purchase_orders","fused":0.48843258778053344,"table_sim":0.546212124678954,"col_score":0.40176328243290277},{"table":"order_lines","fused":0.3284223597352777,"table_sim":0.5473705995587962,"col_score":0},{"table":"reorder_rules","fused":0.31951217979112656,"table_sim":0.5325202996518776,"col_score":0}],"fk_expansion_candidates":22,"fk_expansion_added":2,"fk_expansion_blocked_count":16,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"product_categories","reason":"max_tables"},{"table":"purchase_orders","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"max_tables"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":28,"total_retrieval_latency_ms":34,"sql_generated":"","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42601","error_message":"syntax error at or near \"LIMIT\"","total_latency_ms":5410,"failure_type":"execution_error","failure_details":"Model did not generate SELECT statement"}
{"timestamp":"2026-01-29T19:47:01.223Z","query_id":"eab078bb-6600-4355-a03f-be01c785f501","question":"Calculate vendor performance score based on on-time delivery and invoice accuracy","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["vendor_invoices","performance_reviews","vendors","vendor_invoice_lines","product_suppliers","vendor_contacts","sales_orders","purchase_orders","goods_receipts","customers","order_lines","purchase_requisitions"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"vendor_invoices","similarity":0.6955551654807471},{"table":"performance_reviews","similarity":0.6709085810677549},{"table":"purchase_orders","similarity":0.6347301134279532},{"table":"vendors","similarity":0.630909375510322},{"table":"product_suppliers","similarity":0.6192498236848171},{"table":"vendor_invoice_lines","similarity":0.6085569773940885},{"table":"vendor_contacts","similarity":0.5997141827932857},{"table":"sales_orders","similarity":0.5961588710632616},{"table":"goods_receipts","similarity":0.5661835877563559},{"table":"customers","similarity":0.5465937183932046},{"table":"sales_opportunities","similarity":0.5460555777323932},{"table":"timesheets","similarity":0.5442791382718302},{"table":"order_lines","similarity":0.5315126832995996},{"table":"purchase_requisitions","similarity":0.5282778311071779},{"table":"employee_certifications","similarity":0.5262320271658971}],"column_hits_per_table":{"vendor_invoices":12,"vendor_invoice_lines":6,"vendors":10,"performance_reviews":9,"purchase_orders":2,"vendor_contacts":4,"product_suppliers":3,"fixed_assets":1,"sales_orders":2,"asset_maintenance":1},"top_columns_per_table":{"vendor_invoices":[{"column":"invoice_date","similarity":0.6820971378162017},{"column":"total","similarity":0.6809847435881535},{"column":"amount_paid","similarity":0.6702202083428355}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.6465337363568044},{"column":"amount","similarity":0.6406576732483038},{"column":"unit_cost","similarity":0.6290973902712709}],"vendors":[{"column":"vendor_number","similarity":0.6392790672289599},{"column":"phone","similarity":0.632615514334186},{"column":"website","similarity":0.6187955062109327}],"performance_reviews":[{"column":"review_date","similarity":0.6391298059120761},{"column":"goals_met_percent","similarity":0.6348897232221123},{"column":"employee_id","similarity":0.6192794816779427}],"purchase_orders":[{"column":"vendor_id","similarity":0.6082240149448},{"column":"shipping_cost","similarity":0.5758565410529615}],"vendor_contacts":[{"column":"phone","similarity":0.6061779393166513},{"column":"title","similarity":0.5932972624562619},{"column":"email","similarity":0.5917429339564875}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6044250768889664},{"column":"lead_time_days","similarity":0.6030466911489025},{"column":"vendor_id","similarity":0.5943087874293309}],"fixed_assets":[{"column":"vendor_id","similarity":0.5842101591334125}],"sales_orders":[{"column":"shipping_cost","similarity":0.5793358176930354},{"column":"total","similarity":0.5764972250136845}],"asset_maintenance":[{"column":"vendor_id","similarity":0.5782090997352557}]},"fused_scores":[{"table":"vendor_invoices","fused":0.8263689031325596,"table_sim":0.6955551654807471,"col_score":1.0225895096102784},{"table":"performance_reviews","fused":0.7851750156499058,"table_sim":0.6709085810677549,"col_score":0.9565746675231324},{"table":"vendors","fused":0.7607803550646144,"table_sim":0.630909375510322,"col_score":0.9555868243960528},{"table":"vendor_invoice_lines","fused":0.7518792156288356,"table_sim":0.6085569773940885,"col_score":0.9668625729809563},{"table":"product_suppliers","fused":0.7339292631962573,"table_sim":0.6192498236848171,"col_score":0.9059484224634177},{"table":"vendor_contacts","fused":0.7209591378938843,"table_sim":0.5997141827932857,"col_score":0.9028265705447822},{"table":"sales_orders","fused":0.704729094717908,"table_sim":0.5961588710632616,"col_score":0.8675844301998776},{"table":"purchase_orders","fused":0.6963320465702285,"table_sim":0.6347301134279532,"col_score":0.7887349462836415},{"table":"goods_receipts","fused":0.33971015265381355,"table_sim":0.5661835877563559,"col_score":0},{"table":"customers","fused":0.32795623103592275,"table_sim":0.5465937183932046,"col_score":0},{"table":"sales_opportunities","fused":0.32763334663943594,"table_sim":0.5460555777323932,"col_score":0},{"table":"timesheets","fused":0.32656748296309807,"table_sim":0.5442791382718302,"col_score":0},{"table":"order_lines","fused":0.3189076099797597,"table_sim":0.5315126832995996,"col_score":0},{"table":"purchase_requisitions","fused":0.3169666986643067,"table_sim":0.5282778311071779,"col_score":0},{"table":"employee_certifications","fused":0.3157392162995383,"table_sim":0.5262320271658971,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":13,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":26,"total_retrieval_latency_ms":32,"sql_generated":"SELECT v.vendor_id, AVG(CASE WHEN g.received_by IS NOT NULL THEN 1 ELSE 0 END) AS on_time_delivery_score, AVG(CASE WHEN ivl.amount = vr.total THEN 1 ELSE 0 END) AS invoice_accuracy_score FROM vendors v LEFT JOIN goods_receipts g ON v.vendor_id = g.po_id AND g.received_by IS NOT NULL LEFT JOIN vendor_invoices iv ON v.vendor_id = iv.vendor_id LEFT JOIN vendor_invoice_lines ivl ON iv.invoice_id = ivl.invoice_id GROUP BY v.vendor_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42P01","error_message":"missing FROM-clause entry for table \"vr\"","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_failure_reason":"Alias 'vr' not defined. Possible table: vendor_invoices. Define alias in FROM/JOIN clause.","total_latency_ms":6391,"failure_type":"join_path_miss","failure_details":"Database error after 3 attempts: missing FROM-clause entry for table \"vr\""}
{"timestamp":"2026-01-29T19:47:07.614Z","query_id":"1f679375-fa33-4017-a071-794f3d3f578e","question":"Generate a trial balance for the current period showing debits and credits by account category","attempt_count":2,"retry_succeeded":true,"execution_success":true,"retriever_version":"V2","tables_retrieved":["bank_accounts","account_types","depreciation_entries","depreciation_schedules","asset_categories","bank_transactions","fiscal_periods","budget_lines","project_budgets","budgets","chart_of_accounts","departments"],"tables_from_table_retrieval":15,"tables_from_column_only":10,"tables_from_fk_expansion":2,"table_scores":[{"table":"bank_accounts","similarity":0.6367900839880641},{"table":"asset_categories","similarity":0.6346535809758647},{"table":"account_types","similarity":0.6272285653729832},{"table":"depreciation_entries","similarity":0.6225511215159643},{"table":"depreciation_schedules","similarity":0.6165057393727287},{"table":"bank_transactions","similarity":0.6150962404412702},{"table":"fiscal_periods","similarity":0.6041900407507028},{"table":"chart_of_accounts","similarity":0.6007482259075341},{"table":"budget_lines","similarity":0.593425377594523},{"table":"customers","similarity":0.5828336551027367},{"table":"certifications","similarity":0.5762638622043766},{"table":"benefit_types","similarity":0.5715028878009876},{"table":"employee_benefits","similarity":0.5708097023317666},{"table":"project_budgets","similarity":0.5699587952178357},{"table":"budgets","similarity":0.568767701756073}],"column_hits_per_table":{"bank_accounts":4,"account_types":2,"depreciation_schedules":7,"depreciation_entries":5,"asset_categories":2,"benefit_types":1,"fiscal_periods":4,"project_budgets":2,"journal_lines":2,"project_expenses":1,"bank_transactions":4,"budgets":2,"departments":1,"asset_maintenance":1,"timesheets":1,"projects":1,"chart_of_accounts":1,"purchase_orders":2,"customers":1,"vendor_invoices":2,"currencies":1,"budget_lines":2,"inventory_adjustments":1},"top_columns_per_table":{"bank_accounts":[{"column":"current_balance","similarity":0.6869151637984203},{"column":"account_name","similarity":0.6080144236924266},{"column":"bank_name","similarity":0.6066260579567178}],"account_types":[{"column":"normal_balance","similarity":0.6484160338759071},{"column":"category","similarity":0.6238956196601739}],"depreciation_schedules":[{"column":"monthly_amount","similarity":0.6460216272986022},{"column":"annual_amount","similarity":0.6435863787386237},{"column":"start_date","similarity":0.6178549858715044}],"depreciation_entries":[{"column":"amount","similarity":0.6460096782233629},{"column":"period_id","similarity":0.6401048650864071},{"column":"accumulated_depreciation","similarity":0.6398491695651559}],"asset_categories":[{"column":"depreciation_method","similarity":0.6399578806467106},{"column":"salvage_value_percent","similarity":0.5906692564768835}],"benefit_types":[{"column":"annual_cost","similarity":0.614857236154928}],"fiscal_periods":[{"column":"name","similarity":0.6146000724463977},{"column":"period_id","similarity":0.5997794756800909},{"column":"start_date","similarity":0.5958425893901163}],"project_budgets":[{"column":"category","similarity":0.6144822335998272},{"column":"notes","similarity":0.5865421018912569}],"journal_lines":[{"column":"debit","similarity":0.6131519383994092},{"column":"credit","similarity":0.5929067215683504}],"project_expenses":[{"column":"category","similarity":0.6127356317273961}],"bank_transactions":[{"column":"amount","similarity":0.6081752093881687},{"column":"reference","similarity":0.5996793168104082},{"column":"reconciled","similarity":0.5871486254020114}],"budgets":[{"column":"status","similarity":0.5989844575610859},{"column":"total_amount","similarity":0.5890036805604402}],"departments":[{"column":"budget","similarity":0.5980463108867591}],"asset_maintenance":[{"column":"cost","similarity":0.5961138617057076}],"timesheets":[{"column":"total_hours","similarity":0.5956067219737295}],"projects":[{"column":"budget","similarity":0.5946377463056134}],"chart_of_accounts":[{"column":"description","similarity":0.5928520596952875}],"purchase_orders":[{"column":"total","similarity":0.5920004066122796},{"column":"subtotal","similarity":0.589720753994531}],"customers":[{"column":"credit_limit","similarity":0.5915804628924816}],"vendor_invoices":[{"column":"subtotal","similarity":0.5901699024505791},{"column":"total","similarity":0.5854052260141052}],"currencies":[{"column":"symbol","similarity":0.5869910028334465}],"budget_lines":[{"column":"period_id","similarity":0.5869648406526051},{"column":"amount","similarity":0.5853230300290301}],"inventory_adjustments":[{"column":"status","similarity":0.5842747186783505}]},"fused_scores":[{"table":"bank_accounts","fused":0.777472853583897,"table_sim":0.6367900839880641,"col_score":0.9884970079776462},{"table":"account_types","fused":0.7604826767061876,"table_sim":0.6272285653729832,"col_score":0.960363843705994},{"table":"depreciation_entries","fused":0.7599043781119549,"table_sim":0.6225511215159643,"col_score":0.9659342630059409},{"table":"depreciation_schedules","fused":0.7570293702908029,"table_sim":0.6165057393727287,"col_score":0.9678148166679141},{"table":"asset_categories","fused":0.7549091521395797,"table_sim":0.6346535809758647,"col_score":0.9352925088851523},{"table":"bank_transactions","fused":0.7322636913821112,"table_sim":0.6150962404412702,"col_score":0.9080148677933728},{"table":"fiscal_periods","fused":0.7188051953965271,"table_sim":0.6041900407507028,"col_score":0.8907279273652635},{"table":"budget_lines","fused":0.6723595162596906,"table_sim":0.593425377594523,"col_score":0.7907607242574419},{"table":"project_budgets","fused":0.6698840648354083,"table_sim":0.5699587952178357,"col_score":0.8197719692617671},{"table":"budgets","fused":0.6607199173363719,"table_sim":0.568767701756073,"col_score":0.7986482407068203},{"table":"benefit_types","fused":0.5888446271425638,"table_sim":0.5715028878009876,"col_score":0.614857236154928},{"table":"customers","fused":0.5863323782186346,"table_sim":0.5828336551027367,"col_score":0.5915804628924816},{"table":"chart_of_accounts","fused":0.526447512259201,"table_sim":0.6007482259075341,"col_score":0.41499644178670125},{"table":"journal_lines","fused":0.3638421196734338,"table_sim":0,"col_score":0.9096052991835843},{"table":"purchase_orders","fused":0.35474431344381807,"table_sim":0,"col_score":0.8868607836095451}],"fk_expansion_candidates":8,"fk_expansion_added":2,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":28,"total_retrieval_latency_ms":34,"sql_generated":"SELECT ca.name AS \"Account Category\", SUM(bl.amount) AS \"Debit Total\" FROM budgets b JOIN budget_lines bl ON b.budget_id = bl.budget_id AND bl.period_id IN (SELECT period_id FROM fiscal_periods WHERE fiscal_year_id = 2023 AND is_closed = TRUE) JOIN chart_of_accounts ca ON bl.account_id = ca.account_id GROUP BY ca.name;","tables_used_in_sql":[],"explain_result":"success","sqlstate":"42703","error_message":"column b.amount does not exist","autocorrect_attempted":false,"autocorrect_success":false,"autocorrect_failure_reason":"Could not parse undefined column from error message","rows_returned":0,"total_latency_ms":2949}
{"timestamp":"2026-01-29T19:47:10.563Z","query_id":"b3fe51a6-4fb3-428f-9124-10b04c8eaae5","question":"Calculate cash flow from bank transactions grouped by transaction type and month","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["bank_transactions","bank_accounts","inventory_transactions","account_types","depreciation_entries","depreciation_schedules","asset_transfers","vendor_invoices","asset_categories","stock_transfers","currencies"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":1,"table_scores":[{"table":"bank_transactions","similarity":0.7232703691525166},{"table":"bank_accounts","similarity":0.6412885484513536},{"table":"inventory_transactions","similarity":0.6130368701918206},{"table":"account_types","similarity":0.5746397921552414},{"table":"depreciation_entries","similarity":0.5609169011076522},{"table":"stock_transfers","similarity":0.5608182762969601},{"table":"asset_categories","similarity":0.5603941855250653},{"table":"asset_transfers","similarity":0.557070516037654},{"table":"goods_receipts","similarity":0.5570340666097445},{"table":"asset_maintenance","similarity":0.5550122446563767},{"table":"timesheet_entries","similarity":0.5547038308987016},{"table":"customers","similarity":0.5536205739048321},{"table":"depreciation_schedules","similarity":0.5510145110305125},{"table":"budget_lines","similarity":0.5501439459081744},{"table":"vendor_invoices","similarity":0.5501234090713347}],"column_hits_per_table":{"bank_transactions":9,"inventory_transactions":6,"bank_accounts":8,"depreciation_schedules":2,"account_types":2,"depreciation_entries":4,"asset_transfers":4,"benefit_types":1,"sales_orders":1,"vendor_invoices":2,"departments":1,"project_budgets":3,"asset_categories":1,"budgets":1,"currencies":3,"projects":1,"stock_transfers":1},"top_columns_per_table":{"bank_transactions":[{"column":"transaction_type","similarity":0.7226031453519327},{"column":"transaction_date","similarity":0.7197948108865876},{"column":"amount","similarity":0.6937932229170158}],"inventory_transactions":[{"column":"transaction_type","similarity":0.6273448250719428},{"column":"transaction_date","similarity":0.5883515821242886},{"column":"reference_type","similarity":0.5870442032650763}],"bank_accounts":[{"column":"bank_name","similarity":0.6206916343579985},{"column":"currency_id","similarity":0.6080233956923218},{"column":"account_name","similarity":0.6062681595576817}],"depreciation_schedules":[{"column":"monthly_amount","similarity":0.59447656917774},{"column":"annual_amount","similarity":0.5604557333370965}],"account_types":[{"column":"category","similarity":0.5767477686638358},{"column":"normal_balance","similarity":0.553298547454127}],"depreciation_entries":[{"column":"entry_date","similarity":0.5764456999460359},{"column":"amount","similarity":0.5712923688967707},{"column":"accumulated_depreciation","similarity":0.5593081810441107}],"asset_transfers":[{"column":"transfer_date","similarity":0.5753286251599586},{"column":"reason","similarity":0.5680950655456624},{"column":"transferred_by","similarity":0.557655111028576}],"benefit_types":[{"column":"annual_cost","similarity":0.5690702206996687}],"sales_orders":[{"column":"subtotal","similarity":0.5690246047374201}],"vendor_invoices":[{"column":"subtotal","similarity":0.5667884131380803},{"column":"amount_paid","similarity":0.5537916195948072}],"departments":[{"column":"budget","similarity":0.56620715274516}],"project_budgets":[{"column":"category","similarity":0.5630575145165342},{"column":"notes","similarity":0.5566774782603028},{"column":"planned_amount","similarity":0.5539083156532728}],"asset_categories":[{"column":"depreciation_method","similarity":0.5617474146945006}],"budgets":[{"column":"status","similarity":0.5601445371969136}],"currencies":[{"column":"symbol","similarity":0.5600491754665113},{"column":"code","similarity":0.5571181350069567},{"column":"name","similarity":0.5532051640223443}],"projects":[{"column":"budget","similarity":0.5548004632768436}],"stock_transfers":[{"column":"status","similarity":0.5540703957924323}]},"fused_scores":[{"table":"bank_transactions","fused":0.8669624418096007,"table_sim":0.7232703691525166,"col_score":1.0825005507952266},{"table":"bank_accounts","fused":0.7438459153666748,"table_sim":0.6412885484513536,"col_score":0.8976819657396565},{"table":"inventory_transactions","fused":0.7364303685687272,"table_sim":0.6130368701918206,"col_score":0.9215206161340871},{"table":"account_types","fused":0.6861426922495046,"table_sim":0.5746397921552414,"col_score":0.8533970423908993},{"table":"depreciation_entries","fused":0.6813868944223598,"table_sim":0.5609169011076522,"col_score":0.8620918843944212},{"table":"depreciation_schedules","fused":0.6804904809568229,"table_sim":0.5510145110305125,"col_score":0.8747044358462883},{"table":"asset_transfers","fused":0.6779927727957084,"table_sim":0.557070516037654,"col_score":0.8593761579327899},{"table":"vendor_invoices","fused":0.634320237441306,"table_sim":0.5501234090713347,"col_score":0.7606154799962628},{"table":"asset_categories","fused":0.5609354771928394,"table_sim":0.5603941855250653,"col_score":0.5617474146945006},{"table":"stock_transfers","fused":0.4916306766000571,"table_sim":0.5608182762969601,"col_score":0.3878492770547026},{"table":"project_budgets","fused":0.3360046689372682,"table_sim":0,"col_score":0.8400116723431705},{"table":"currencies","fused":0.3354432971879959,"table_sim":0,"col_score":0.8386082429699897},{"table":"goods_receipts","fused":0.3342204399658467,"table_sim":0.5570340666097445,"col_score":0},{"table":"asset_maintenance","fused":0.333007346793826,"table_sim":0.5550122446563767,"col_score":0},{"table":"timesheet_entries","fused":0.3328222985392209,"table_sim":0.5547038308987016,"col_score":0}],"fk_expansion_candidates":14,"fk_expansion_added":1,"fk_expansion_blocked_count":13,"fk_expansion_blocked":[{"table":"asset_locations","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":20,"total_retrieval_latency_ms":25,"sql_generated":"SELECT transaction_type, EXTRACT(MONTH FROM transaction_date) AS month, SUM(amount) as cash_flow \nFROM bank_accounts ba JOIN bank_transactions bt ON ba.bank_account_id = bt.bank_account_id \nGROUP BY transaction_type, month;","tables_used_in_sql":[],"total_latency_ms":3125,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T19:47:13.688Z","query_id":"63eb6a00-d12d-478c-90f4-ad1983f7a0d0","question":"Calculate project profitability comparing budget vs actual expenses","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["project_budgets","project_expenses","budgets","projects","project_resources","project_milestones","project_tasks","budget_lines","depreciation_schedules","cost_centers","departments","fiscal_periods"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_budgets","similarity":0.6969020680342091},{"table":"project_expenses","similarity":0.6901643358621746},{"table":"budgets","similarity":0.6054710146643664},{"table":"project_resources","similarity":0.5884392614999969},{"table":"budget_lines","similarity":0.5713392587016516},{"table":"project_milestones","similarity":0.5640452185585958},{"table":"projects","similarity":0.5566750316098611},{"table":"project_tasks","similarity":0.5430288007477744},{"table":"fiscal_periods","similarity":0.5421955610342155},{"table":"cost_centers","similarity":0.5334843814345405},{"table":"fiscal_years","similarity":0.5330512679525921},{"table":"timesheet_entries","similarity":0.5277321533499411},{"table":"depreciation_schedules","similarity":0.5161348636193235},{"table":"task_assignments","similarity":0.5090218924299275},{"table":"project_phases","similarity":0.5086822303322549}],"column_hits_per_table":{"project_budgets":6,"project_expenses":10,"projects":4,"budgets":8,"departments":1,"budget_lines":3,"project_resources":4,"project_milestones":2,"project_tasks":3,"product_suppliers":1,"products":1,"asset_maintenance":1,"fixed_assets":1,"depreciation_schedules":2,"requisition_lines":1,"cost_centers":1,"benefit_types":1},"top_columns_per_table":{"project_budgets":[{"column":"actual_amount","similarity":0.732381284281357},{"column":"planned_amount","similarity":0.7077655279095464},{"column":"category","similarity":0.6837344583515939}],"project_expenses":[{"column":"amount","similarity":0.719310515063275},{"column":"is_billable","similarity":0.6944071710464874},{"column":"status","similarity":0.6819235762798355}],"projects":[{"column":"budget","similarity":0.7010305666750449},{"column":"project_number","similarity":0.58156128942889},{"column":"status","similarity":0.5727418455053092}],"budgets":[{"column":"total_amount","similarity":0.6566540327671284},{"column":"status","similarity":0.6352662167542227},{"column":"name","similarity":0.6054909942282356}],"departments":[{"column":"budget","similarity":0.6264870674058582}],"budget_lines":[{"column":"amount","similarity":0.6204819952699552},{"column":"budget_id","similarity":0.5789661588581666},{"column":"period_id","similarity":0.5466449934647022}],"project_resources":[{"column":"hourly_rate","similarity":0.6071134658167074},{"column":"allocation_percent","similarity":0.5838131867437651},{"column":"project_id","similarity":0.5594873197213137}],"project_milestones":[{"column":"amount","similarity":0.5947539124725684},{"column":"is_billable","similarity":0.5868460872676451}],"project_tasks":[{"column":"actual_hours","similarity":0.5942692351392902},{"column":"estimated_hours","similarity":0.5851366658523576},{"column":"status","similarity":0.5591681405321435}],"product_suppliers":[{"column":"unit_cost","similarity":0.5658746967491194}],"products":[{"column":"unit_cost","similarity":0.5580213602692399}],"asset_maintenance":[{"column":"cost","similarity":0.5577313360447209}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5575179107884427}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5573270992269892},{"column":"monthly_amount","similarity":0.5518789639204239}],"requisition_lines":[{"column":"estimated_unit_cost","similarity":0.5519709664483464}],"cost_centers":[{"column":"is_active","similarity":0.5514522094975285}],"benefit_types":[{"column":"annual_cost","similarity":0.5454524684838336}]},"fused_scores":[{"table":"project_budgets","fused":0.8526468601149775,"table_sim":0.6969020680342091,"col_score":1.08626404823613},{"table":"project_expenses","fused":0.8407042417519124,"table_sim":0.6901643358621746,"col_score":1.0665141005865189},{"table":"budgets","fused":0.7410467725305158,"table_sim":0.6054710146643664,"col_score":0.9444104093297399},{"table":"projects","fused":0.7307295035217127,"table_sim":0.5566750316098611,"col_score":0.9918112113894899},{"table":"project_resources","fused":0.7126715805754341,"table_sim":0.5884392614999969,"col_score":0.89902005918859},{"table":"project_milestones","fused":0.6936979135777139,"table_sim":0.5640452185585958,"col_score":0.8881769561063909},{"table":"project_tasks","fused":0.6805523076748522,"table_sim":0.5430288007477744,"col_score":0.886837568065469},{"table":"budget_lines","fused":0.6720516155691163,"table_sim":0.5713392587016516,"col_score":0.8231201508703134},{"table":"depreciation_schedules","fused":0.6429875506464746,"table_sim":0.5161348636193235,"col_score":0.8332665811872011},{"table":"cost_centers","fused":0.4744972475200322,"table_sim":0.5334843814345405,"col_score":0.3860165466482699},{"table":"fiscal_periods","fused":0.3253173366205293,"table_sim":0.5421955610342155,"col_score":0},{"table":"fiscal_years","fused":0.3198307607715552,"table_sim":0.5330512679525921,"col_score":0},{"table":"timesheet_entries","fused":0.3166392920099646,"table_sim":0.5277321533499411,"col_score":0},{"table":"task_assignments","fused":0.30541313545795645,"table_sim":0.5090218924299275,"col_score":0},{"table":"project_phases","fused":0.3052093381993529,"table_sim":0.5086822303322549,"col_score":0}],"fk_expansion_candidates":11,"fk_expansion_added":2,"fk_expansion_blocked_count":4,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"max_tables"},{"table":"fixed_assets","reason":"max_tables"},{"table":"journal_lines","reason":"no_evidence"},{"table":"project_phases","reason":"max_tables"},{"table":"task_assignments","reason":"max_tables"},{"table":"timesheet_entries","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":15,"total_retrieval_latency_ms":20,"sql_generated":"SELECT p.project_id, p.name AS project_name, b.budget_amount, e.actual_expense_amount, (b.budget_amount - e.actual_expense_amount) AS profitability FROM projects p INNER JOIN budgets b ON p.project_id = b.project_id INNER JOIN project_expenses e ON p.project_id = e.project_id WHERE p.status = 'Completed' AND e.is_billable = TRUE;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column b.project_id does not exist","autocorrect_attempted":false,"autocorrect_success":false,"autocorrect_failure_reason":"Could not parse undefined column from error message","total_latency_ms":4329,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column b.project_id does not exist"}
{"timestamp":"2026-01-29T19:47:18.018Z","query_id":"1264d490-cbfc-4d86-a8f0-33fd1f5c8411","question":"Find resource allocation by employee across all active projects","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["project_resources","project_expenses","projects","employees","asset_transfers","employee_benefits","timesheets","employee_salaries","asset_maintenance","fixed_assets","budgets","inventory_adjustments"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_resources","similarity":0.7731177943741443},{"table":"task_assignments","similarity":0.6903320131383612},{"table":"project_expenses","similarity":0.6860669651962393},{"table":"projects","similarity":0.6699593096880756},{"table":"employee_salaries","similarity":0.6405071946271549},{"table":"employees","similarity":0.6339025803715616},{"table":"asset_transfers","similarity":0.6295509823374746},{"table":"employee_benefits","similarity":0.6252896926971302},{"table":"asset_maintenance","similarity":0.6144814119310266},{"table":"project_budgets","similarity":0.6127056548770882},{"table":"employee_training","similarity":0.6115716788056256},{"table":"timesheets","similarity":0.6110953610179598},{"table":"fixed_assets","similarity":0.6034608172484828},{"table":"positions","similarity":0.6004520720571301},{"table":"sales_regions","similarity":0.6000624479697053}],"column_hits_per_table":{"project_resources":8,"projects":6,"project_expenses":5,"task_assignments":1,"fixed_assets":1,"asset_maintenance":1,"asset_transfers":3,"project_tasks":4,"employees":9,"budgets":1,"sales_territories":1,"employee_salaries":1,"employee_benefits":2,"leave_requests":1,"project_budgets":1,"inventory_adjustments":2,"departments":1,"timesheets":2},"top_columns_per_table":{"project_resources":[{"column":"allocation_percent","similarity":0.7387995135432864},{"column":"employee_id","similarity":0.736788358139023},{"column":"role","similarity":0.6871253102146296}],"projects":[{"column":"project_manager_id","similarity":0.6950658215815594},{"column":"project_number","similarity":0.6486471523682797},{"column":"priority","similarity":0.647905091409848}],"project_expenses":[{"column":"employee_id","similarity":0.6892341968361351},{"column":"approved_by","similarity":0.6866501279538427},{"column":"status","similarity":0.6365220668607481}],"task_assignments":[{"column":"employee_id","similarity":0.6715931803692717}],"fixed_assets":[{"column":"assigned_to","similarity":0.6693605355449325}],"asset_maintenance":[{"column":"performed_by","similarity":0.6594150176106053}],"asset_transfers":[{"column":"transferred_by","similarity":0.649976405491491},{"column":"to_employee_id","similarity":0.6468918681465957},{"column":"from_employee_id","similarity":0.6392912984449377}],"project_tasks":[{"column":"actual_hours","similarity":0.6431585243015517},{"column":"status","similarity":0.6399283690314367},{"column":"priority","similarity":0.6368769410502637}],"employees":[{"column":"employee_number","similarity":0.6411927718149272},{"column":"position_id","similarity":0.6387230138414012},{"column":"manager_id","similarity":0.6334603651967811}],"budgets":[{"column":"approved_by","similarity":0.6329697386525807}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6317471325498781}],"employee_salaries":[{"column":"approved_by","similarity":0.6297852265264874}],"employee_benefits":[{"column":"employee_id","similarity":0.6282013304971424},{"column":"coverage_level","similarity":0.6209091178386659}],"leave_requests":[{"column":"approved_by","similarity":0.6245063356176883}],"project_budgets":[{"column":"category","similarity":0.6241016561022017}],"inventory_adjustments":[{"column":"approved_by","similarity":0.6219786416053619},{"column":"adjusted_by","similarity":0.6198166093236963}],"departments":[{"column":"manager_id","similarity":0.6208493633226347}],"timesheets":[{"column":"employee_id","similarity":0.6185415592033615},{"column":"approved_by","similarity":0.6172975203434086}]},"fused_scores":[{"table":"project_resources","fused":0.8968155440847271,"table_sim":0.7731177943741443,"col_score":1.0823621686506013},{"table":"project_expenses","fused":0.8105738212591131,"table_sim":0.6860669651962393,"col_score":0.9973341053534239},{"table":"projects","fused":0.7910154650421268,"table_sim":0.6699593096880756,"col_score":0.9725996980732037},{"table":"employees","fused":0.762404804064732,"table_sim":0.6339025803715616,"col_score":0.9551581396044875},{"table":"asset_transfers","fused":0.7282860131396046,"table_sim":0.6295509823374746,"col_score":0.8763885593427996},{"table":"employee_benefits","fused":0.7114856490233444,"table_sim":0.6252896926971302,"col_score":0.8407795835126657},{"table":"timesheets","fused":0.70017204303661,"table_sim":0.6110953610179598,"col_score":0.8337870660645851},{"table":"employee_salaries","fused":0.6362184073868878,"table_sim":0.6405071946271549,"col_score":0.6297852265264874},{"table":"asset_maintenance","fused":0.6324548542028581,"table_sim":0.6144814119310266,"col_score":0.6594150176106053},{"table":"fixed_assets","fused":0.6298207045670627,"table_sim":0.6034608172484828,"col_score":0.6693605355449325},{"table":"project_budgets","fused":0.6172640553671336,"table_sim":0.6127056548770882,"col_score":0.6241016561022017},{"table":"task_assignments","fused":0.6022452983864128,"table_sim":0.6903320131383612,"col_score":0.47011522625849017},{"table":"project_tasks","fused":0.38463879793067346,"table_sim":0,"col_score":0.9615969948266836},{"table":"inventory_adjustments","fused":0.37275477850688404,"table_sim":0,"col_score":0.93188694626721},{"table":"employee_training","fused":0.3669430072833753,"table_sim":0.6115716788056256,"col_score":0}],"fk_expansion_candidates":38,"fk_expansion_added":2,"fk_expansion_blocked_count":30,"fk_expansion_blocked":[{"table":"maintenance_types","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"project_budgets","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"sales_regions","reason":"max_tables"},{"table":"customers","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"employee_training","reason":"max_tables"},{"table":"project_milestones","reason":"no_evidence"},{"table":"leave_requests","reason":"max_tables"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":33,"total_retrieval_latency_ms":39,"sql_generated":"SELECT e.employee_id AS EmployeeID, SUM(pr.hourly_rate) AS TotalHourlyRate FROM project_resources pr JOIN employees e ON pr.employee_id = e.employee_id WHERE p.status = 'active' GROUP BY e.employee_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42P01","error_message":"missing FROM-clause entry for table \"p\"","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_failure_reason":"Alias 'p' not defined. Possible table: project_resources. Define alias in FROM/JOIN clause.","total_latency_ms":2786,"failure_type":"join_path_miss","failure_details":"Database error after 3 attempts: missing FROM-clause entry for table \"p\""}
{"timestamp":"2026-01-29T19:47:20.804Z","query_id":"a0dd8144-3ae2-45e6-94b3-7b1b3eb53f19","question":"List all fixed assets with their assigned employees and current locations","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["fixed_assets","asset_locations","asset_maintenance","asset_transfers","employees","sales_territories","depreciation_schedules","sales_regions","employee_salaries","departments","inventory_adjustments","positions"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"fixed_assets","similarity":0.7199454700518836},{"table":"asset_locations","similarity":0.6993840670281728},{"table":"asset_transfers","similarity":0.6681876163750934},{"table":"asset_maintenance","similarity":0.6662441365446851},{"table":"sales_territories","similarity":0.6138568966711586},{"table":"employees","similarity":0.6041748893811374},{"table":"sales_regions","similarity":0.5905113043845756},{"table":"employee_salaries","similarity":0.584781640529263},{"table":"departments","similarity":0.5839722838487205},{"table":"task_assignments","similarity":0.5833995895060854},{"table":"positions","similarity":0.5818633468828208},{"table":"depreciation_schedules","similarity":0.5769154426781498},{"table":"project_resources","similarity":0.573391179917491},{"table":"inventory_adjustments","similarity":0.5728570248654077},{"table":"projects","similarity":0.5679182735225474}],"column_hits_per_table":{"fixed_assets":17,"asset_locations":6,"asset_maintenance":8,"asset_transfers":6,"employees":9,"sales_territories":1,"depreciation_schedules":1,"adjustment_lines":1,"stock_transfers":1},"top_columns_per_table":{"fixed_assets":[{"column":"assigned_to","similarity":0.7610359291813483},{"column":"location_id","similarity":0.7571020804502957},{"column":"status","similarity":0.7351464311922252}],"asset_locations":[{"column":"building","similarity":0.6990298555075612},{"column":"floor","similarity":0.6887653641924915},{"column":"room","similarity":0.678024829035518}],"asset_maintenance":[{"column":"status","similarity":0.6675279258856094},{"column":"asset_id","similarity":0.6617322335301026},{"column":"performed_by","similarity":0.6585231704982136}],"asset_transfers":[{"column":"to_location_id","similarity":0.6668886725808255},{"column":"from_location_id","similarity":0.655575636389779},{"column":"asset_id","similarity":0.6507564493646987}],"employees":[{"column":"email","similarity":0.6306117604539891},{"column":"is_active","similarity":0.6160821371149121},{"column":"created_at","similarity":0.6135709206507636}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6185197898085313}],"depreciation_schedules":[{"column":"asset_id","similarity":0.6108849923785906}],"adjustment_lines":[{"column":"location_id","similarity":0.6013885968583933}],"stock_transfers":[{"column":"created_by","similarity":0.5967870656956826}]},"fused_scores":[{"table":"fixed_assets","fused":0.8768614293329463,"table_sim":0.7199454700518836,"col_score":1.1122353682545403},{"table":"asset_locations","fused":0.8369954552584264,"table_sim":0.6993840670281728,"col_score":1.043412537603807},{"table":"asset_maintenance","fused":0.7896490335594094,"table_sim":0.6662441365446851,"col_score":0.9747563790814959},{"table":"asset_transfers","fused":0.7514669899829727,"table_sim":0.6681876163750934,"col_score":0.8763860503947918},{"table":"employees","fused":0.7358947124042898,"table_sim":0.6041748893811374,"col_score":0.9334744469390185},{"table":"sales_territories","fused":0.5414996791490839,"table_sim":0.6138568966711586,"col_score":0.4329638528659719},{"table":"depreciation_schedules","fused":0.5171970634728953,"table_sim":0.5769154426781498,"col_score":0.4276194946650134},{"table":"sales_regions","fused":0.35430678263074533,"table_sim":0.5905113043845756,"col_score":0},{"table":"employee_salaries","fused":0.35086898431755775,"table_sim":0.584781640529263,"col_score":0},{"table":"departments","fused":0.3503833703092323,"table_sim":0.5839722838487205,"col_score":0},{"table":"task_assignments","fused":0.3500397537036512,"table_sim":0.5833995895060854,"col_score":0},{"table":"positions","fused":0.34911800812969246,"table_sim":0.5818633468828208,"col_score":0},{"table":"project_resources","fused":0.34403470795049457,"table_sim":0.573391179917491,"col_score":0},{"table":"inventory_adjustments","fused":0.3437142149192446,"table_sim":0.5728570248654077,"col_score":0},{"table":"projects","fused":0.34075096411352845,"table_sim":0.5679182735225474,"col_score":0}],"fk_expansion_candidates":33,"fk_expansion_added":2,"fk_expansion_blocked_count":28,"fk_expansion_blocked":[{"table":"maintenance_types","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"project_resources","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"max_tables"},{"table":"task_assignments","reason":"max_tables"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":18,"total_retrieval_latency_ms":24,"sql_generated":"SELECT fa.asset_id AS AssetID, fa.name AS Name, fa.location_id AS LocationID, fa.assigned_to AS AssignedEmployeeID FROM fixed_assets fa JOIN asset_locations al ON fa.location_id = al.location_id JOIN employees e ON fa.assigned_to = e.employee_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":0,"total_latency_ms":1260}
{"timestamp":"2026-01-29T19:47:22.064Z","query_id":"2c9a3cb4-908a-4bcd-aad1-09f103f0af41","question":"Create a comprehensive employee cost report including salary and benefits by department","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_salaries","employee_benefits","employees","project_expenses","budgets","departments","project_resources","benefit_types","goods_receipts","employee_training","employment_history","positions"],"tables_from_table_retrieval":15,"tables_from_column_only":10,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_benefits","similarity":0.7033203083522601},{"table":"employee_salaries","similarity":0.7004330807404299},{"table":"project_expenses","similarity":0.6709016284087207},{"table":"employees","similarity":0.6573833023433696},{"table":"departments","similarity":0.6467717005028588},{"table":"budgets","similarity":0.6459628498185659},{"table":"purchase_requisitions","similarity":0.6331051084254513},{"table":"sales_regions","similarity":0.6301038851943551},{"table":"employment_history","similarity":0.6247225842183777},{"table":"employee_training","similarity":0.6143787031418324},{"table":"goods_receipts","similarity":0.6134314016075626},{"table":"benefit_types","similarity":0.6103800368440171},{"table":"timesheets","similarity":0.608646580767154},{"table":"positions","similarity":0.6060295054142851},{"table":"project_resources","similarity":0.6058652615663651}],"column_hits_per_table":{"employees":5,"employee_salaries":7,"employee_benefits":6,"departments":2,"project_expenses":4,"benefit_types":1,"cost_centers":1,"project_resources":2,"asset_maintenance":1,"budgets":3,"goods_receipts":1,"positions":1,"performance_reviews":1,"vendor_invoices":4,"employee_training":1,"product_suppliers":1,"employee_certifications":1,"project_budgets":3,"sales_territories":1,"employment_history":1,"sales_regions":1,"depreciation_schedules":1,"requisition_lines":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.7353273158370108},{"column":"department_id","similarity":0.6458933199793105},{"column":"employee_number","similarity":0.6339488054951704}],"employee_salaries":[{"column":"amount","similarity":0.7343697506197728},{"column":"effective_date","similarity":0.6773602786138204},{"column":"employee_id","similarity":0.6719030284173544}],"employee_benefits":[{"column":"coverage_level","similarity":0.692206009981684},{"column":"employee_id","similarity":0.691334472450722},{"column":"benefit_type_id","similarity":0.6825998512347974}],"departments":[{"column":"budget","similarity":0.6845753677360407},{"column":"manager_id","similarity":0.633688934613717}],"project_expenses":[{"column":"employee_id","similarity":0.6753839678754537},{"column":"approved_by","similarity":0.6566797227751197},{"column":"amount","similarity":0.6540423770585583}],"benefit_types":[{"column":"annual_cost","similarity":0.6681632995082879}],"cost_centers":[{"column":"department_id","similarity":0.6444791546112041}],"project_resources":[{"column":"hourly_rate","similarity":0.6330708854761284},{"column":"employee_id","similarity":0.6180596074892039}],"asset_maintenance":[{"column":"cost","similarity":0.6294383521509798}],"budgets":[{"column":"total_amount","similarity":0.627433899620325},{"column":"approved_by","similarity":0.626054957549584},{"column":"department_id","similarity":0.6202588727965219}],"goods_receipts":[{"column":"received_by","similarity":0.6273408234197417}],"positions":[{"column":"min_salary","similarity":0.6249941700853083}],"performance_reviews":[{"column":"employee_id","similarity":0.6248478988858465}],"vendor_invoices":[{"column":"subtotal","similarity":0.6240930475878483},{"column":"amount_paid","similarity":0.6227761450723656},{"column":"total","similarity":0.6214874696934888}],"employee_training":[{"column":"score","similarity":0.6203977331351577}],"product_suppliers":[{"column":"unit_cost","similarity":0.6202977267547164}],"employee_certifications":[{"column":"employee_id","similarity":0.620067204342498}],"project_budgets":[{"column":"planned_amount","similarity":0.620044228211653},{"column":"actual_amount","similarity":0.618194603133217},{"column":"notes","similarity":0.6165560316383816}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6195472423349481}],"employment_history":[{"column":"employee_id","similarity":0.6193544167665219}],"sales_regions":[{"column":"manager_id","similarity":0.6180082092187474}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.6170760765215243}],"requisition_lines":[{"column":"estimated_unit_cost","similarity":0.6170521107439255}]},"fused_scores":[{"table":"employee_salaries","fused":0.8494798044149312,"table_sim":0.7004330807404299,"col_score":1.0730498899266832},{"table":"employee_benefits","fused":0.8321855077820437,"table_sim":0.7033203083522601,"col_score":1.025483306926719},{"table":"employees","fused":0.8153506688398602,"table_sim":0.6573833023433696,"col_score":1.052301718584596},{"table":"project_expenses","fused":0.7960213415669919,"table_sim":0.6709016284087207,"col_score":0.9837009113043989},{"table":"budgets","fused":0.7637622612491863,"table_sim":0.6459628498185659,"col_score":0.940461378395117},{"table":"departments","fused":0.750609618242052,"table_sim":0.6467717005028588,"col_score":0.9063664948508416},{"table":"project_resources","fused":0.703275856178759,"table_sim":0.6058652615663651,"col_score":0.8493917480973497},{"table":"benefit_types","fused":0.6334933419097255,"table_sim":0.6103800368440171,"col_score":0.6681632995082879},{"table":"goods_receipts","fused":0.6189951703324343,"table_sim":0.6134314016075626,"col_score":0.6273408234197417},{"table":"employee_training","fused":0.6167863151391625,"table_sim":0.6143787031418324,"col_score":0.6203977331351577},{"table":"positions","fused":0.6136153712826944,"table_sim":0.6060295054142851,"col_score":0.6249941700853083},{"table":"sales_regions","fused":0.5511046296978623,"table_sim":0.6301038851943551,"col_score":0.43260574645312316},{"table":"employment_history","fused":0.5482527872256527,"table_sim":0.6247225842183777,"col_score":0.43354809173656533},{"table":"purchase_requisitions","fused":0.3798630650552708,"table_sim":0.6331051084254513,"col_score":0},{"table":"vendor_invoices","fused":0.37393471297383707,"table_sim":0,"col_score":0.9348367824345927}],"fk_expansion_candidates":32,"fk_expansion_added":2,"fk_expansion_blocked_count":26,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"sales_regions","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"max_tables"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":49,"total_retrieval_latency_ms":54,"sql_generated":"SELECT d.name AS department_name, SUM(bs.amount) + COALESCE(SUM(eb.annual_cost), 0) AS total_employee_cost FROM departments d LEFT JOIN budgets bs ON d.department_id = bs.department_id AND bs.status = 'approved' LEFT JOIN employee_benefits eb ON d.department_id = eb.department_id GROUP BY d.name;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column eb.department_id does not exist","autocorrect_attempted":false,"autocorrect_success":false,"autocorrect_failure_reason":"Could not parse undefined column from error message","total_latency_ms":3821,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column eb.department_id does not exist"}
{"timestamp":"2026-01-29T20:37:06.341Z","query_id":"b3f38629-0f32-44d2-ad02-72122e6cdc5e","question":"What fiscal years exist in the system?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["fiscal_years","fiscal_periods","budgets","depreciation_schedules","depreciation_entries","budget_lines","project_budgets","project_expenses","departments","project_milestones","journal_entries","projects"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"fiscal_years","similarity":0.7923960498118316},{"table":"fiscal_periods","similarity":0.7616670856526071},{"table":"budgets","similarity":0.6911637589323553},{"table":"journal_entries","similarity":0.6269724979465695},{"table":"budget_lines","similarity":0.6218203134963756},{"table":"depreciation_entries","similarity":0.6167782937248956},{"table":"depreciation_schedules","similarity":0.5985836737050324},{"table":"tax_rates","similarity":0.5716127675571235},{"table":"project_budgets","similarity":0.5656182034505703},{"table":"departments","similarity":0.5523947282192829},{"table":"opportunity_stages","similarity":0.5504537485994739},{"table":"sales_regions","similarity":0.5448968436545046},{"table":"project_expenses","similarity":0.5436618291443818},{"table":"project_milestones","similarity":0.5414688649545092},{"table":"timesheet_entries","similarity":0.5409769768138163}],"column_hits_per_table":{"fiscal_years":5,"fiscal_periods":7,"budgets":7,"budget_lines":3,"depreciation_entries":3,"journal_entries":1,"depreciation_schedules":7,"departments":1,"project_expenses":2,"project_budgets":5,"tax_rates":1,"goods_receipts":1,"projects":1,"project_milestones":1,"timesheet_entries":1,"certifications":1,"performance_reviews":1,"asset_categories":1,"opportunity_stages":1},"top_columns_per_table":{"fiscal_years":[{"column":"year","similarity":0.79289185497887},{"column":"start_date","similarity":0.7915481870907012},{"column":"is_closed","similarity":0.7687751840462032}],"fiscal_periods":[{"column":"start_date","similarity":0.7659921609127918},{"column":"period_number","similarity":0.7503599279176923},{"column":"fiscal_year_id","similarity":0.7427677986256532}],"budgets":[{"column":"fiscal_year_id","similarity":0.7119377164190824},{"column":"status","similarity":0.6301145472980343},{"column":"total_amount","similarity":0.6173246359192148}],"budget_lines":[{"column":"period_id","similarity":0.6801393090386698},{"column":"amount","similarity":0.5964392433040447},{"column":"budget_id","similarity":0.5771887798868078}],"depreciation_entries":[{"column":"period_id","similarity":0.6644590594465214},{"column":"entry_date","similarity":0.6182044744233723},{"column":"accumulated_depreciation","similarity":0.591719344216716}],"journal_entries":[{"column":"period_id","similarity":0.6584803744495903}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.6374273471660927},{"column":"start_date","similarity":0.6327992496100886},{"column":"useful_life_months","similarity":0.6309634564637141}],"departments":[{"column":"budget","similarity":0.6251109583075001}],"project_expenses":[{"column":"expense_date","similarity":0.6152948115721372},{"column":"is_billable","similarity":0.6022943783818646}],"project_budgets":[{"column":"category","similarity":0.6108356164669405},{"column":"actual_amount","similarity":0.604739033656996},{"column":"planned_amount","similarity":0.5906958847025185}],"tax_rates":[{"column":"is_active","similarity":0.6102719456894563}],"goods_receipts":[{"column":"receipt_date","similarity":0.6033126792490972}],"projects":[{"column":"budget","similarity":0.5988151518250451}],"project_milestones":[{"column":"is_billable","similarity":0.5985840177634407}],"timesheet_entries":[{"column":"is_billable","similarity":0.5976425797634352}],"certifications":[{"column":"validity_years","similarity":0.5951280377775735}],"performance_reviews":[{"column":"review_period_start","similarity":0.5797933929886745}],"asset_categories":[{"column":"useful_life_years","similarity":0.5756856657958654}],"opportunity_stages":[{"column":"is_closed","similarity":0.5741087121255803}]},"fused_scores":[{"table":"fiscal_years","fused":0.9509040092967873,"table_sim":0.7923960498118316,"col_score":1.1886659485242206},{"table":"fiscal_periods","fused":0.9134691013402194,"table_sim":0.7616670856526071,"col_score":1.141172124871638},{"table":"budgets","fused":0.7612993900257706,"table_sim":0.6911637589323553,"col_score":0.8665028366658937},{"table":"depreciation_schedules","fused":0.7406809930114742,"table_sim":0.5985836737050324,"col_score":0.953826971971137},{"table":"depreciation_entries","fused":0.7356926348476295,"table_sim":0.6167782937248956,"col_score":0.9140641465317303},{"table":"budget_lines","fused":0.706887388684857,"table_sim":0.6218203134963756,"col_score":0.8344880014675792},{"table":"project_budgets","fused":0.7046529753885176,"table_sim":0.5656182034505703,"col_score":0.9132051332954385},{"table":"project_expenses","fused":0.6927738977918569,"table_sim":0.5436618291443818,"col_score":0.9164420007630695},{"table":"departments","fused":0.5814812202545698,"table_sim":0.5523947282192829,"col_score":0.6251109583075001},{"table":"project_milestones","fused":0.5643149260780818,"table_sim":0.5414688649545092,"col_score":0.5985840177634407},{"table":"timesheet_entries","fused":0.5636432179936639,"table_sim":0.5409769768138163,"col_score":0.5976425797634352},{"table":"journal_entries","fused":0.560558003613827,"table_sim":0.6269724979465695,"col_score":0.46093626211471317},{"table":"opportunity_stages","fused":0.5599157340099165,"table_sim":0.5504537485994739,"col_score":0.5741087121255803},{"table":"tax_rates","fused":0.5138438053273219,"table_sim":0.5716127675571235,"col_score":0.4271903619826194},{"table":"sales_regions","fused":0.32693810619270275,"table_sim":0.5448968436545046,"col_score":0}],"fk_expansion_candidates":8,"fk_expansion_added":2,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":1227,"total_retrieval_latency_ms":1261,"sql_generated":"SELECT DISTINCT fiscal_years.fiscal_year FROM fiscal_years LIMIT 1000;","tables_used_in_sql":[],"explain_result":"success","sqlstate":"42703","error_message":"column fiscal_years.fiscal_year does not exist","autocorrect_attempted":true,"autocorrect_success":true,"autocorrect_candidates":4,"autocorrect_failure_reason":"Best candidate 'fiscal_years.fiscal_year_id' has score 0.70 < threshold 0.75","autocorrect_correction":"Replaced 'fiscal_year' with 'fiscal_year_id' (prefix, score: 0.85)","total_latency_ms":5194,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column fiscal_years.fiscal_year does not exist"}
{"timestamp":"2026-01-29T20:40:50.175Z","query_id":"de7c2718-aa24-40e3-a33b-29b630800803","question":"What fiscal years exist in the system?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["fiscal_years","fiscal_periods","budgets","depreciation_schedules","depreciation_entries","budget_lines","project_budgets","project_expenses","departments","project_milestones","journal_entries","projects"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"fiscal_years","similarity":0.7923960498118316},{"table":"fiscal_periods","similarity":0.7616670856526071},{"table":"budgets","similarity":0.6911637589323553},{"table":"journal_entries","similarity":0.6269724979465695},{"table":"budget_lines","similarity":0.6218203134963756},{"table":"depreciation_entries","similarity":0.6167782937248956},{"table":"depreciation_schedules","similarity":0.5985836737050324},{"table":"tax_rates","similarity":0.5716127675571235},{"table":"project_budgets","similarity":0.5656182034505703},{"table":"departments","similarity":0.5523947282192829},{"table":"opportunity_stages","similarity":0.5504537485994739},{"table":"sales_regions","similarity":0.5448968436545046},{"table":"project_expenses","similarity":0.5436618291443818},{"table":"project_milestones","similarity":0.5414688649545092},{"table":"timesheet_entries","similarity":0.5409769768138163}],"column_hits_per_table":{"fiscal_years":5,"fiscal_periods":7,"budgets":7,"budget_lines":3,"depreciation_entries":3,"journal_entries":1,"depreciation_schedules":7,"departments":1,"project_expenses":2,"project_budgets":5,"tax_rates":1,"goods_receipts":1,"projects":1,"project_milestones":1,"timesheet_entries":1,"certifications":1,"performance_reviews":1,"asset_categories":1,"opportunity_stages":1},"top_columns_per_table":{"fiscal_years":[{"column":"year","similarity":0.79289185497887},{"column":"start_date","similarity":0.7915481870907012},{"column":"is_closed","similarity":0.7687751840462032}],"fiscal_periods":[{"column":"start_date","similarity":0.7659921609127918},{"column":"period_number","similarity":0.7503599279176923},{"column":"fiscal_year_id","similarity":0.7427677986256532}],"budgets":[{"column":"fiscal_year_id","similarity":0.7119377164190824},{"column":"status","similarity":0.6301145472980343},{"column":"total_amount","similarity":0.6173246359192148}],"budget_lines":[{"column":"period_id","similarity":0.6801393090386698},{"column":"amount","similarity":0.5964392433040447},{"column":"budget_id","similarity":0.5771887798868078}],"depreciation_entries":[{"column":"period_id","similarity":0.6644590594465214},{"column":"entry_date","similarity":0.6182044744233723},{"column":"accumulated_depreciation","similarity":0.591719344216716}],"journal_entries":[{"column":"period_id","similarity":0.6584803744495903}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.6374273471660927},{"column":"start_date","similarity":0.6327992496100886},{"column":"useful_life_months","similarity":0.6309634564637141}],"departments":[{"column":"budget","similarity":0.6251109583075001}],"project_expenses":[{"column":"expense_date","similarity":0.6152948115721372},{"column":"is_billable","similarity":0.6022943783818646}],"project_budgets":[{"column":"category","similarity":0.6108356164669405},{"column":"actual_amount","similarity":0.604739033656996},{"column":"planned_amount","similarity":0.5906958847025185}],"tax_rates":[{"column":"is_active","similarity":0.6102719456894563}],"goods_receipts":[{"column":"receipt_date","similarity":0.6033126792490972}],"projects":[{"column":"budget","similarity":0.5988151518250451}],"project_milestones":[{"column":"is_billable","similarity":0.5985840177634407}],"timesheet_entries":[{"column":"is_billable","similarity":0.5976425797634352}],"certifications":[{"column":"validity_years","similarity":0.5951280377775735}],"performance_reviews":[{"column":"review_period_start","similarity":0.5797933929886745}],"asset_categories":[{"column":"useful_life_years","similarity":0.5756856657958654}],"opportunity_stages":[{"column":"is_closed","similarity":0.5741087121255803}]},"fused_scores":[{"table":"fiscal_years","fused":0.9509040092967873,"table_sim":0.7923960498118316,"col_score":1.1886659485242206},{"table":"fiscal_periods","fused":0.9134691013402194,"table_sim":0.7616670856526071,"col_score":1.141172124871638},{"table":"budgets","fused":0.7612993900257706,"table_sim":0.6911637589323553,"col_score":0.8665028366658937},{"table":"depreciation_schedules","fused":0.7406809930114742,"table_sim":0.5985836737050324,"col_score":0.953826971971137},{"table":"depreciation_entries","fused":0.7356926348476295,"table_sim":0.6167782937248956,"col_score":0.9140641465317303},{"table":"budget_lines","fused":0.706887388684857,"table_sim":0.6218203134963756,"col_score":0.8344880014675792},{"table":"project_budgets","fused":0.7046529753885176,"table_sim":0.5656182034505703,"col_score":0.9132051332954385},{"table":"project_expenses","fused":0.6927738977918569,"table_sim":0.5436618291443818,"col_score":0.9164420007630695},{"table":"departments","fused":0.5814812202545698,"table_sim":0.5523947282192829,"col_score":0.6251109583075001},{"table":"project_milestones","fused":0.5643149260780818,"table_sim":0.5414688649545092,"col_score":0.5985840177634407},{"table":"timesheet_entries","fused":0.5636432179936639,"table_sim":0.5409769768138163,"col_score":0.5976425797634352},{"table":"journal_entries","fused":0.560558003613827,"table_sim":0.6269724979465695,"col_score":0.46093626211471317},{"table":"opportunity_stages","fused":0.5599157340099165,"table_sim":0.5504537485994739,"col_score":0.5741087121255803},{"table":"tax_rates","fused":0.5138438053273219,"table_sim":0.5716127675571235,"col_score":0.4271903619826194},{"table":"sales_regions","fused":0.32693810619270275,"table_sim":0.5448968436545046,"col_score":0}],"fk_expansion_candidates":8,"fk_expansion_added":2,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":88,"total_retrieval_latency_ms":111,"sql_generated":"SELECT DISTINCT fiscal_years.fiscal_year_id FROM fiscal_years LIMIT 1000;","tables_used_in_sql":[],"explain_result":"success","sqlstate":"42703","error_message":"column fiscal_years.fiscal_year does not exist","autocorrect_attempted":true,"autocorrect_success":true,"autocorrect_candidates":4,"autocorrect_failure_reason":"Best candidate 'fiscal_years.fiscal_year_id' has score 0.70 < threshold 0.75","autocorrect_correction":"Replaced 'fiscal_year' with 'fiscal_year_id' (prefix, score: 0.85)","total_latency_ms":1190,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column fiscal_years.fiscal_year does not exist"}
{"timestamp":"2026-01-29T20:43:00.468Z","query_id":"b602abfe-2f8b-4e69-88ed-1c63a2abbfba","question":"What fiscal years exist in the system?","attempt_count":2,"retry_succeeded":true,"execution_success":true,"retriever_version":"V2","tables_retrieved":["fiscal_years","fiscal_periods","budgets","depreciation_schedules","depreciation_entries","budget_lines","project_budgets","project_expenses","departments","project_milestones","journal_entries","projects"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"fiscal_years","similarity":0.7923960498118316},{"table":"fiscal_periods","similarity":0.7616670856526071},{"table":"budgets","similarity":0.6911637589323553},{"table":"journal_entries","similarity":0.6269724979465695},{"table":"budget_lines","similarity":0.6218203134963756},{"table":"depreciation_entries","similarity":0.6167782937248956},{"table":"depreciation_schedules","similarity":0.5985836737050324},{"table":"tax_rates","similarity":0.5716127675571235},{"table":"project_budgets","similarity":0.5656182034505703},{"table":"departments","similarity":0.5523947282192829},{"table":"opportunity_stages","similarity":0.5504537485994739},{"table":"sales_regions","similarity":0.5448968436545046},{"table":"project_expenses","similarity":0.5436618291443818},{"table":"project_milestones","similarity":0.5414688649545092},{"table":"timesheet_entries","similarity":0.5409769768138163}],"column_hits_per_table":{"fiscal_years":5,"fiscal_periods":7,"budgets":7,"budget_lines":3,"depreciation_entries":3,"journal_entries":1,"depreciation_schedules":7,"departments":1,"project_expenses":2,"project_budgets":5,"tax_rates":1,"goods_receipts":1,"projects":1,"project_milestones":1,"timesheet_entries":1,"certifications":1,"performance_reviews":1,"asset_categories":1,"opportunity_stages":1},"top_columns_per_table":{"fiscal_years":[{"column":"year","similarity":0.79289185497887},{"column":"start_date","similarity":0.7915481870907012},{"column":"is_closed","similarity":0.7687751840462032}],"fiscal_periods":[{"column":"start_date","similarity":0.7659921609127918},{"column":"period_number","similarity":0.7503599279176923},{"column":"fiscal_year_id","similarity":0.7427677986256532}],"budgets":[{"column":"fiscal_year_id","similarity":0.7119377164190824},{"column":"status","similarity":0.6301145472980343},{"column":"total_amount","similarity":0.6173246359192148}],"budget_lines":[{"column":"period_id","similarity":0.6801393090386698},{"column":"amount","similarity":0.5964392433040447},{"column":"budget_id","similarity":0.5771887798868078}],"depreciation_entries":[{"column":"period_id","similarity":0.6644590594465214},{"column":"entry_date","similarity":0.6182044744233723},{"column":"accumulated_depreciation","similarity":0.591719344216716}],"journal_entries":[{"column":"period_id","similarity":0.6584803744495903}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.6374273471660927},{"column":"start_date","similarity":0.6327992496100886},{"column":"useful_life_months","similarity":0.6309634564637141}],"departments":[{"column":"budget","similarity":0.6251109583075001}],"project_expenses":[{"column":"expense_date","similarity":0.6152948115721372},{"column":"is_billable","similarity":0.6022943783818646}],"project_budgets":[{"column":"category","similarity":0.6108356164669405},{"column":"actual_amount","similarity":0.604739033656996},{"column":"planned_amount","similarity":0.5906958847025185}],"tax_rates":[{"column":"is_active","similarity":0.6102719456894563}],"goods_receipts":[{"column":"receipt_date","similarity":0.6033126792490972}],"projects":[{"column":"budget","similarity":0.5988151518250451}],"project_milestones":[{"column":"is_billable","similarity":0.5985840177634407}],"timesheet_entries":[{"column":"is_billable","similarity":0.5976425797634352}],"certifications":[{"column":"validity_years","similarity":0.5951280377775735}],"performance_reviews":[{"column":"review_period_start","similarity":0.5797933929886745}],"asset_categories":[{"column":"useful_life_years","similarity":0.5756856657958654}],"opportunity_stages":[{"column":"is_closed","similarity":0.5741087121255803}]},"fused_scores":[{"table":"fiscal_years","fused":0.9509040092967873,"table_sim":0.7923960498118316,"col_score":1.1886659485242206},{"table":"fiscal_periods","fused":0.9134691013402194,"table_sim":0.7616670856526071,"col_score":1.141172124871638},{"table":"budgets","fused":0.7612993900257706,"table_sim":0.6911637589323553,"col_score":0.8665028366658937},{"table":"depreciation_schedules","fused":0.7406809930114742,"table_sim":0.5985836737050324,"col_score":0.953826971971137},{"table":"depreciation_entries","fused":0.7356926348476295,"table_sim":0.6167782937248956,"col_score":0.9140641465317303},{"table":"budget_lines","fused":0.706887388684857,"table_sim":0.6218203134963756,"col_score":0.8344880014675792},{"table":"project_budgets","fused":0.7046529753885176,"table_sim":0.5656182034505703,"col_score":0.9132051332954385},{"table":"project_expenses","fused":0.6927738977918569,"table_sim":0.5436618291443818,"col_score":0.9164420007630695},{"table":"departments","fused":0.5814812202545698,"table_sim":0.5523947282192829,"col_score":0.6251109583075001},{"table":"project_milestones","fused":0.5643149260780818,"table_sim":0.5414688649545092,"col_score":0.5985840177634407},{"table":"timesheet_entries","fused":0.5636432179936639,"table_sim":0.5409769768138163,"col_score":0.5976425797634352},{"table":"journal_entries","fused":0.560558003613827,"table_sim":0.6269724979465695,"col_score":0.46093626211471317},{"table":"opportunity_stages","fused":0.5599157340099165,"table_sim":0.5504537485994739,"col_score":0.5741087121255803},{"table":"tax_rates","fused":0.5138438053273219,"table_sim":0.5716127675571235,"col_score":0.4271903619826194},{"table":"sales_regions","fused":0.32693810619270275,"table_sim":0.5448968436545046,"col_score":0}],"fk_expansion_candidates":8,"fk_expansion_added":2,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":90,"total_retrieval_latency_ms":114,"sql_generated":"SELECT DISTINCT fiscal_years.fiscal_year_id FROM fiscal_years LIMIT 1000;","tables_used_in_sql":[],"explain_result":"success","sqlstate":"42703","error_message":"column fiscal_years.fiscal_year does not exist","autocorrect_attempted":true,"autocorrect_success":true,"autocorrect_candidates":4,"autocorrect_failure_reason":"Best candidate 'fiscal_years.fiscal_year_id' has score 0.70 < threshold 0.75","autocorrect_correction":"Replaced 'fiscal_year' with 'fiscal_year_id' (prefix, score: 0.85)","rows_returned":4,"total_latency_ms":946}
{"timestamp":"2026-01-29T20:43:23.858Z","query_id":"52ffd069-40dd-431e-aea5-8687d5fab47c","question":"What fiscal years exist in the system?","attempt_count":2,"retry_succeeded":true,"execution_success":true,"retriever_version":"V2","tables_retrieved":["fiscal_years","fiscal_periods","budgets","depreciation_schedules","depreciation_entries","budget_lines","project_budgets","project_expenses","departments","project_milestones","journal_entries","projects"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"fiscal_years","similarity":0.7923960498118316},{"table":"fiscal_periods","similarity":0.7616670856526071},{"table":"budgets","similarity":0.6911637589323553},{"table":"journal_entries","similarity":0.6269724979465695},{"table":"budget_lines","similarity":0.6218203134963756},{"table":"depreciation_entries","similarity":0.6167782937248956},{"table":"depreciation_schedules","similarity":0.5985836737050324},{"table":"tax_rates","similarity":0.5716127675571235},{"table":"project_budgets","similarity":0.5656182034505703},{"table":"departments","similarity":0.5523947282192829},{"table":"opportunity_stages","similarity":0.5504537485994739},{"table":"sales_regions","similarity":0.5448968436545046},{"table":"project_expenses","similarity":0.5436618291443818},{"table":"project_milestones","similarity":0.5414688649545092},{"table":"timesheet_entries","similarity":0.5409769768138163}],"column_hits_per_table":{"fiscal_years":5,"fiscal_periods":7,"budgets":7,"budget_lines":3,"depreciation_entries":3,"journal_entries":1,"depreciation_schedules":7,"departments":1,"project_expenses":2,"project_budgets":5,"tax_rates":1,"goods_receipts":1,"projects":1,"project_milestones":1,"timesheet_entries":1,"certifications":1,"performance_reviews":1,"asset_categories":1,"opportunity_stages":1},"top_columns_per_table":{"fiscal_years":[{"column":"year","similarity":0.79289185497887},{"column":"start_date","similarity":0.7915481870907012},{"column":"is_closed","similarity":0.7687751840462032}],"fiscal_periods":[{"column":"start_date","similarity":0.7659921609127918},{"column":"period_number","similarity":0.7503599279176923},{"column":"fiscal_year_id","similarity":0.7427677986256532}],"budgets":[{"column":"fiscal_year_id","similarity":0.7119377164190824},{"column":"status","similarity":0.6301145472980343},{"column":"total_amount","similarity":0.6173246359192148}],"budget_lines":[{"column":"period_id","similarity":0.6801393090386698},{"column":"amount","similarity":0.5964392433040447},{"column":"budget_id","similarity":0.5771887798868078}],"depreciation_entries":[{"column":"period_id","similarity":0.6644590594465214},{"column":"entry_date","similarity":0.6182044744233723},{"column":"accumulated_depreciation","similarity":0.591719344216716}],"journal_entries":[{"column":"period_id","similarity":0.6584803744495903}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.6374273471660927},{"column":"start_date","similarity":0.6327992496100886},{"column":"useful_life_months","similarity":0.6309634564637141}],"departments":[{"column":"budget","similarity":0.6251109583075001}],"project_expenses":[{"column":"expense_date","similarity":0.6152948115721372},{"column":"is_billable","similarity":0.6022943783818646}],"project_budgets":[{"column":"category","similarity":0.6108356164669405},{"column":"actual_amount","similarity":0.604739033656996},{"column":"planned_amount","similarity":0.5906958847025185}],"tax_rates":[{"column":"is_active","similarity":0.6102719456894563}],"goods_receipts":[{"column":"receipt_date","similarity":0.6033126792490972}],"projects":[{"column":"budget","similarity":0.5988151518250451}],"project_milestones":[{"column":"is_billable","similarity":0.5985840177634407}],"timesheet_entries":[{"column":"is_billable","similarity":0.5976425797634352}],"certifications":[{"column":"validity_years","similarity":0.5951280377775735}],"performance_reviews":[{"column":"review_period_start","similarity":0.5797933929886745}],"asset_categories":[{"column":"useful_life_years","similarity":0.5756856657958654}],"opportunity_stages":[{"column":"is_closed","similarity":0.5741087121255803}]},"fused_scores":[{"table":"fiscal_years","fused":0.9509040092967873,"table_sim":0.7923960498118316,"col_score":1.1886659485242206},{"table":"fiscal_periods","fused":0.9134691013402194,"table_sim":0.7616670856526071,"col_score":1.141172124871638},{"table":"budgets","fused":0.7612993900257706,"table_sim":0.6911637589323553,"col_score":0.8665028366658937},{"table":"depreciation_schedules","fused":0.7406809930114742,"table_sim":0.5985836737050324,"col_score":0.953826971971137},{"table":"depreciation_entries","fused":0.7356926348476295,"table_sim":0.6167782937248956,"col_score":0.9140641465317303},{"table":"budget_lines","fused":0.706887388684857,"table_sim":0.6218203134963756,"col_score":0.8344880014675792},{"table":"project_budgets","fused":0.7046529753885176,"table_sim":0.5656182034505703,"col_score":0.9132051332954385},{"table":"project_expenses","fused":0.6927738977918569,"table_sim":0.5436618291443818,"col_score":0.9164420007630695},{"table":"departments","fused":0.5814812202545698,"table_sim":0.5523947282192829,"col_score":0.6251109583075001},{"table":"project_milestones","fused":0.5643149260780818,"table_sim":0.5414688649545092,"col_score":0.5985840177634407},{"table":"timesheet_entries","fused":0.5636432179936639,"table_sim":0.5409769768138163,"col_score":0.5976425797634352},{"table":"journal_entries","fused":0.560558003613827,"table_sim":0.6269724979465695,"col_score":0.46093626211471317},{"table":"opportunity_stages","fused":0.5599157340099165,"table_sim":0.5504537485994739,"col_score":0.5741087121255803},{"table":"tax_rates","fused":0.5138438053273219,"table_sim":0.5716127675571235,"col_score":0.4271903619826194},{"table":"sales_regions","fused":0.32693810619270275,"table_sim":0.5448968436545046,"col_score":0}],"fk_expansion_candidates":8,"fk_expansion_added":2,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":105,"total_retrieval_latency_ms":125,"sql_generated":"SELECT DISTINCT fiscal_years.fiscal_year_id FROM fiscal_years LIMIT 1000;","tables_used_in_sql":[],"explain_result":"success","sqlstate":"42703","error_message":"column fiscal_years.fiscal_year does not exist","autocorrect_attempted":true,"autocorrect_success":true,"autocorrect_candidates":4,"autocorrect_failure_reason":"Best candidate 'fiscal_years.fiscal_year_id' has score 0.70 < threshold 0.75","autocorrect_correction":"Replaced 'fiscal_year' with 'fiscal_year_id' (prefix, score: 0.85)","rows_returned":4,"total_latency_ms":939}
{"timestamp":"2026-01-29T20:43:43.931Z","query_id":"a8b7a0bf-18e4-41cd-96c9-320a690fd1be","question":"List all employees in the Sales department","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employees","departments","employee_salaries","employee_certifications","goods_receipts","positions","sales_regions","business_units","budgets","sales_territories","employment_history","employee_training"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"departments","similarity":0.7018819264422769},{"table":"employees","similarity":0.6963141569337209},{"table":"positions","similarity":0.6581594168559208},{"table":"employee_salaries","similarity":0.639257259916862},{"table":"sales_regions","similarity":0.6312030956746659},{"table":"business_units","similarity":0.6239684491575331},{"table":"employee_certifications","similarity":0.6229972990181882},{"table":"budgets","similarity":0.617459472791645},{"table":"sales_territories","similarity":0.6102039592511826},{"table":"employment_history","similarity":0.6101413897607149},{"table":"purchase_requisitions","similarity":0.6097607241658892},{"table":"employee_benefits","similarity":0.6082385664329927},{"table":"employee_training","similarity":0.6047853289798245},{"table":"goods_receipts","similarity":0.6024016522018802},{"table":"emergency_contacts","similarity":0.6009863587594317}],"column_hits_per_table":{"employees":16,"departments":6,"positions":1,"employee_certifications":2,"goods_receipts":1,"business_units":1,"sales_territories":1,"sales_orders":1,"budgets":1,"sales_regions":1,"asset_maintenance":1,"employee_salaries":2,"project_expenses":2,"employee_benefits":1,"purchase_requisitions":1,"sales_opportunities":1,"task_assignments":1,"emergency_contacts":1,"timesheets":1,"employment_history":1,"employee_training":1,"cost_centers":1,"asset_transfers":2,"project_resources":1,"warehouses":1,"performance_reviews":1},"top_columns_per_table":{"employees":[{"column":"department_id","similarity":0.7438378780959836},{"column":"is_active","similarity":0.6898514430157328},{"column":"phone","similarity":0.6884781654193587}],"departments":[{"column":"manager_id","similarity":0.7148098723176987},{"column":"department_id","similarity":0.6802234045695587},{"column":"budget","similarity":0.6768568604597922}],"positions":[{"column":"department_id","similarity":0.6885987208242758}],"employee_certifications":[{"column":"employee_id","similarity":0.6617681978427804},{"column":"certification_id","similarity":0.6311135283463721}],"goods_receipts":[{"column":"received_by","similarity":0.6583117635667177}],"business_units":[{"column":"manager_id","similarity":0.6545196306469504}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6512458142884996}],"sales_orders":[{"column":"sales_rep_id","similarity":0.6499960316755506}],"budgets":[{"column":"department_id","similarity":0.6460822382776508}],"sales_regions":[{"column":"manager_id","similarity":0.6439326618471962}],"asset_maintenance":[{"column":"performed_by","similarity":0.6437090997046176}],"employee_salaries":[{"column":"employee_id","similarity":0.6423794415726771},{"column":"approved_by","similarity":0.6339811095593604}],"project_expenses":[{"column":"employee_id","similarity":0.641830403107342},{"column":"approved_by","similarity":0.6256513564368459}],"employee_benefits":[{"column":"employee_id","similarity":0.641816911740203}],"purchase_requisitions":[{"column":"department_id","similarity":0.6412971471190316}],"sales_opportunities":[{"column":"owner_id","similarity":0.6380140640371665}],"task_assignments":[{"column":"employee_id","similarity":0.6368520287345143}],"emergency_contacts":[{"column":"employee_id","similarity":0.6359115695387068}],"timesheets":[{"column":"employee_id","similarity":0.6333688009401329}],"employment_history":[{"column":"employee_id","similarity":0.6321379482184605}],"employee_training":[{"column":"employee_id","similarity":0.6321176608254997}],"cost_centers":[{"column":"department_id","similarity":0.6314138263804895}],"asset_transfers":[{"column":"to_employee_id","similarity":0.6311987237616232},{"column":"transferred_by","similarity":0.6249766402000394}],"project_resources":[{"column":"employee_id","similarity":0.6300298241419464}],"warehouses":[{"column":"manager_id","similarity":0.6284950025854869}],"performance_reviews":[{"column":"employee_id","similarity":0.6283937123860818}]},"fused_scores":[{"table":"employees","fused":0.8298251093085066,"table_sim":0.6963141569337209,"col_score":1.0300915378706852},{"table":"departments","fused":0.7919452821737608,"table_sim":0.7018819264422769,"col_score":0.9270403157709868},{"table":"employee_salaries","fused":0.7270799215940361,"table_sim":0.639257259916862,"col_score":0.8588139141097973},{"table":"employee_certifications","fused":0.6474493687753835,"table_sim":0.6229972990181882,"col_score":0.6841274734111765},{"table":"goods_receipts","fused":0.6247656967478152,"table_sim":0.6024016522018802,"col_score":0.6583117635667177},{"table":"positions","fused":0.5877032919443497,"table_sim":0.6581594168559208,"col_score":0.482019104576993},{"table":"sales_regions","fused":0.5590230027220144,"table_sim":0.6312030956746659,"col_score":0.4507528632930373},{"table":"business_units","fused":0.557646566075666,"table_sim":0.6239684491575331,"col_score":0.45816374145286526},{"table":"budgets","fused":0.5513787103927292,"table_sim":0.617459472791645,"col_score":0.4522575667943555},{"table":"sales_territories","fused":0.5484712035514895,"table_sim":0.6102039592511826,"col_score":0.4558720700019497},{"table":"purchase_requisitions","fused":0.5454196356928624,"table_sim":0.6097607241658892,"col_score":0.4489080029833221},{"table":"employee_benefits","fused":0.5446518751470524,"table_sim":0.6082385664329927,"col_score":0.4492718382181421},{"table":"employment_history","fused":0.5430834593575978,"table_sim":0.6101413897607149,"col_score":0.4424965637529223},{"table":"employee_training","fused":0.5398641424190346,"table_sim":0.6047853289798245,"col_score":0.44248236257784973},{"table":"emergency_contacts","fused":0.538647054726497,"table_sim":0.6009863587594317,"col_score":0.4451380986770947}],"fk_expansion_candidates":31,"fk_expansion_added":2,"fk_expansion_blocked_count":23,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"project_expenses","reason":"max_tables"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"emergency_contacts","reason":"max_tables"},{"table":"asset_transfers","reason":"max_tables"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":87,"total_retrieval_latency_ms":109,"sql_generated":"SELECT e.employee_id, e.first_name || ' ' || e.last_name AS employee_full_name FROM employees e JOIN departments d ON e.department_id = d.department_id WHERE d.name = 'Sales';","tables_used_in_sql":[],"explain_result":"success","rows_returned":63,"total_latency_ms":1183}
{"timestamp":"2026-01-29T20:43:45.114Z","query_id":"c124ce32-217c-414f-9c71-5741a35b4aa9","question":"How many employees were hired in 2024?","attempt_count":2,"retry_succeeded":true,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employees","employee_salaries","employment_history","employee_certifications","employee_training","employee_benefits","timesheets","purchase_requisitions","budgets","sales_regions","sales_territories","positions"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"employees","similarity":0.6144292223525214},{"table":"employment_history","similarity":0.5990869260811272},{"table":"employee_salaries","similarity":0.5957232611905978},{"table":"employee_certifications","similarity":0.5847149077570227},{"table":"timesheets","similarity":0.575594643141534},{"table":"sales_regions","similarity":0.5687908420029388},{"table":"purchase_requisitions","similarity":0.5664402915390976},{"table":"positions","similarity":0.5658085475279547},{"table":"sales_opportunities","similarity":0.5639075817288894},{"table":"task_assignments","similarity":0.562680711321946},{"table":"employee_training","similarity":0.5619832232346038},{"table":"employee_benefits","similarity":0.5521280809074093},{"table":"sales_territories","similarity":0.5514528346239352},{"table":"budgets","similarity":0.5403087942053312},{"table":"sales_quotes","similarity":0.5393048811827968}],"column_hits_per_table":{"employees":16,"employee_salaries":6,"employee_certifications":4,"employment_history":6,"employee_training":5,"employee_benefits":2,"timesheets":2,"sales_regions":1,"stock_transfers":1,"sales_territories":1,"departments":1,"task_assignments":1,"business_units":1,"purchase_requisitions":1,"budgets":1,"sales_quotes":1},"top_columns_per_table":{"employees":[{"column":"hire_date","similarity":0.7106559818290373},{"column":"birth_date","similarity":0.6517135742797255},{"column":"employee_number","similarity":0.633121778910481}],"employee_salaries":[{"column":"effective_date","similarity":0.6296154988591133},{"column":"end_date","similarity":0.609101620634113},{"column":"approved_by","similarity":0.5761653893037841}],"employee_certifications":[{"column":"obtained_date","similarity":0.6094607553884445},{"column":"expiry_date","similarity":0.6007861744748104},{"column":"certificate_number","similarity":0.5633632316465422}],"employment_history":[{"column":"start_date","similarity":0.6071257631385101},{"column":"end_date","similarity":0.5989153405055726},{"column":"position","similarity":0.5890884348995125}],"employee_training":[{"column":"scheduled_date","similarity":0.6029307116623341},{"column":"completion_date","similarity":0.6028518248589481},{"column":"status","similarity":0.5708936159109197}],"employee_benefits":[{"column":"start_date","similarity":0.5952623658369748},{"column":"end_date","similarity":0.5732788329636184}],"timesheets":[{"column":"approved_by","similarity":0.5691747597184825},{"column":"employee_id","similarity":0.5581640185946611}],"sales_regions":[{"column":"manager_id","similarity":0.5671745315621484}],"stock_transfers":[{"column":"created_by","similarity":0.562232812523577}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5618670479918372}],"departments":[{"column":"manager_id","similarity":0.5617735539821376}],"task_assignments":[{"column":"employee_id","similarity":0.5576232667870425}],"business_units":[{"column":"manager_id","similarity":0.5563961234903366}],"purchase_requisitions":[{"column":"approved_by","similarity":0.5556539730090067}],"budgets":[{"column":"approved_by","similarity":0.5516931281633284}],"sales_quotes":[{"column":"created_by","similarity":0.5460264622486979}]},"fused_scores":[{"table":"employees","fused":0.7832626409990728,"table_sim":0.6144292223525214,"col_score":1.0365127689689002},{"table":"employee_salaries","fused":0.7311004803848267,"table_sim":0.5957232611905978,"col_score":0.9341663091761698},{"table":"employment_history","fused":0.7220855290051948,"table_sim":0.5990869260811272,"col_score":0.9065834333912963},{"table":"employee_certifications","fused":0.7147704817045535,"table_sim":0.5847149077570227,"col_score":0.9098538426258497},{"table":"employee_training","fused":0.6989325835774856,"table_sim":0.5619832232346038,"col_score":0.9043566240918082},{"table":"employee_benefits","fused":0.6840375614719592,"table_sim":0.5521280809074093,"col_score":0.881901782318784},{"table":"timesheets","fused":0.6511696523755659,"table_sim":0.575594643141534,"col_score":0.7645321662266139},{"table":"purchase_requisitions","fused":0.5621257641270612,"table_sim":0.5664402915390976,"col_score":0.5556539730090067},{"table":"budgets","fused":0.5448625277885301,"table_sim":0.5403087942053312,"col_score":0.5516931281633284},{"table":"sales_regions","fused":0.5000833740391648,"table_sim":0.5687908420029388,"col_score":0.3970221720935038},{"table":"task_assignments","fused":0.4937429414935395,"table_sim":0.562680711321946,"col_score":0.39033628675092974},{"table":"sales_territories","fused":0.4881944742120755,"table_sim":0.5514528346239352,"col_score":0.393306933594286},{"table":"sales_quotes","fused":0.4764703381393135,"table_sim":0.5393048811827968,"col_score":0.3822185235740885},{"table":"positions","fused":0.3394851285167728,"table_sim":0.5658085475279547,"col_score":0},{"table":"sales_opportunities","fused":0.33834454903733363,"table_sim":0.5639075817288894,"col_score":0}],"fk_expansion_candidates":33,"fk_expansion_added":2,"fk_expansion_blocked_count":28,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":57,"total_retrieval_latency_ms":64,"sql_generated":"SELECT COUNT(*) FROM employees WHERE hire_date BETWEEN '2024-01-01' AND '2024-12-31';","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":1177}
{"timestamp":"2026-01-29T20:43:46.291Z","query_id":"7bfbfeb8-3f6c-40d6-9eee-93209f30b433","question":"What is the average salary by department?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["positions","employee_salaries","employees","departments","budgets","goods_receipts","employee_benefits","journal_entries","employment_history","project_expenses","cost_centers","sales_territories"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"positions","similarity":0.6472399264470684},{"table":"employee_salaries","similarity":0.6163489777991259},{"table":"departments","similarity":0.6143006157633061},{"table":"employees","similarity":0.5843710762372889},{"table":"cost_centers","similarity":0.5579264629700211},{"table":"budgets","similarity":0.5571964787833181},{"table":"sales_regions","similarity":0.5364724383376334},{"table":"sales_territories","similarity":0.5299492722581486},{"table":"journal_entries","similarity":0.526534036172237},{"table":"purchase_requisitions","similarity":0.5238763225772829},{"table":"project_expenses","similarity":0.5181308895485073},{"table":"employee_benefits","similarity":0.5174411519669776},{"table":"goods_receipts","similarity":0.5160018389560823},{"table":"task_assignments","similarity":0.513087451687374},{"table":"employment_history","similarity":0.5120203905454107}],"column_hits_per_table":{"employees":8,"departments":6,"employee_salaries":7,"positions":4,"cost_centers":1,"budgets":2,"employee_benefits":1,"purchase_requisitions":1,"requisition_lines":2,"project_resources":1,"employment_history":1,"sales_orders":2,"project_budgets":1,"employee_training":1,"currencies":1,"vendor_invoices":2,"goods_receipts":2,"product_suppliers":1,"project_expenses":1,"journal_entries":1,"depreciation_schedules":1,"employee_certifications":1,"sales_quotes":1,"sales_territories":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.6714025402580912},{"column":"department_id","similarity":0.584700343354732},{"column":"employee_number","similarity":0.5532682108483173}],"departments":[{"column":"budget","similarity":0.6693178899525953},{"column":"name","similarity":0.6171203083627336},{"column":"parent_department_id","similarity":0.5878888275901532}],"employee_salaries":[{"column":"amount","similarity":0.6538497128830203},{"column":"effective_date","similarity":0.6119174466610072},{"column":"salary_id","similarity":0.6029067593645321}],"positions":[{"column":"department_id","similarity":0.6330316284547595},{"column":"max_salary","similarity":0.6298490831807669},{"column":"min_salary","similarity":0.6262751289068413}],"cost_centers":[{"column":"department_id","similarity":0.5944196229868914}],"budgets":[{"column":"department_id","similarity":0.57844391567942},{"column":"total_amount","similarity":0.5345358880503847}],"employee_benefits":[{"column":"coverage_level","similarity":0.5592633154028713}],"purchase_requisitions":[{"column":"department_id","similarity":0.5579053225850302}],"requisition_lines":[{"column":"estimated_total","similarity":0.5575389137165062},{"column":"estimated_unit_cost","similarity":0.5432548724783238}],"project_resources":[{"column":"hourly_rate","similarity":0.5507729867753033}],"employment_history":[{"column":"position","similarity":0.546923389654957}],"sales_orders":[{"column":"total","similarity":0.5456325341224678},{"column":"subtotal","similarity":0.5256028180358103}],"project_budgets":[{"column":"actual_amount","similarity":0.5389410727850935}],"employee_training":[{"column":"score","similarity":0.5351809226270803}],"currencies":[{"column":"exchange_rate","similarity":0.5339462316729515}],"vendor_invoices":[{"column":"amount_paid","similarity":0.5331812479989457},{"column":"total","similarity":0.5302071561700523}],"goods_receipts":[{"column":"received_by","similarity":0.5319872343080682},{"column":"receipt_number","similarity":0.523270196493927}],"product_suppliers":[{"column":"unit_cost","similarity":0.5297268931690184}],"project_expenses":[{"column":"amount","similarity":0.5280982333276214}],"journal_entries":[{"column":"posted_by","similarity":0.5260241851684003}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5257318815448632}],"employee_certifications":[{"column":"certificate_number","similarity":0.5236560179787567}],"sales_quotes":[{"column":"total","similarity":0.5236132162689948}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5204418572284772}]},"fused_scores":[{"table":"positions","fused":0.7655386149219161,"table_sim":0.6472399264470684,"col_score":0.9429866476341876},{"table":"employee_salaries","fused":0.7537327611648852,"table_sim":0.6163489777991259,"col_score":0.959808436213524},{"table":"employees","fused":0.7298373040152732,"table_sim":0.5843710762372889,"col_score":0.9480366456822499},{"table":"departments","fused":0.7227043686098045,"table_sim":0.6143006157633061,"col_score":0.8853099978795521},{"table":"budgets","fused":0.6291143906852635,"table_sim":0.5571964787833181,"col_score":0.7369912585381817},{"table":"goods_receipts","fused":0.6270500363956621,"table_sim":0.5160018389560823,"col_score":0.7936223325550317},{"table":"employee_benefits","fused":0.5341700173413351,"table_sim":0.5174411519669776,"col_score":0.5592633154028713},{"table":"journal_entries","fused":0.5263300957707023,"table_sim":0.526534036172237,"col_score":0.5260241851684003},{"table":"employment_history","fused":0.5259815901892293,"table_sim":0.5120203905454107,"col_score":0.546923389654957},{"table":"project_expenses","fused":0.522117827060153,"table_sim":0.5181308895485073,"col_score":0.5280982333276214},{"table":"cost_centers","fused":0.5011933722183423,"table_sim":0.5579264629700211,"col_score":0.416093736090824},{"table":"purchase_requisitions","fused":0.4705392838701782,"table_sim":0.5238763225772829,"col_score":0.3905337258095211},{"table":"sales_territories","fused":0.46369328337886273,"table_sim":0.5299492722581486,"col_score":0.36430930005993406},{"table":"requisition_lines","fused":0.33166653998226725,"table_sim":0,"col_score":0.8291663499556681},{"table":"sales_orders","fused":0.32337357725614924,"table_sim":0,"col_score":0.808433943140373}],"fk_expansion_candidates":34,"fk_expansion_added":2,"fk_expansion_blocked_count":27,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"sales_regions","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"benefit_types","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":43,"total_retrieval_latency_ms":49,"sql_generated":"SELECT d.name AS department_name, AVG(e.salary) AS avg_salary FROM departments d JOIN employees e ON d.department_id = e.department_id GROUP BY d.name;","tables_used_in_sql":[],"explain_result":"success","rows_returned":19,"total_latency_ms":923}
{"timestamp":"2026-01-29T20:43:47.214Z","query_id":"84d20789-f72d-49a1-ac1f-6547fdeb2a96","question":"List all customers with credit limit over $100,000","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["customers","customer_contacts","bank_accounts","sales_quotes","certifications","budget_lines","purchase_requisitions","project_expenses","budgets","cost_centers","bank_transactions","employee_certifications"],"tables_from_table_retrieval":15,"tables_from_column_only":15,"tables_from_fk_expansion":2,"table_scores":[{"table":"customers","similarity":0.6422232823454113},{"table":"customer_contacts","similarity":0.5702946339617082},{"table":"sales_regions","similarity":0.5667997703273866},{"table":"certifications","similarity":0.5571072107976042},{"table":"sales_quotes","similarity":0.5491541498727729},{"table":"purchase_requisitions","similarity":0.5478589409950445},{"table":"budget_lines","similarity":0.5454449382794198},{"table":"bank_accounts","similarity":0.5447528216147618},{"table":"cost_centers","similarity":0.540959333993602},{"table":"employee_certifications","similarity":0.5407552237950306},{"table":"projects","similarity":0.5406308106386197},{"table":"project_expenses","similarity":0.5396310315886659},{"table":"fixed_assets","similarity":0.5381704816225558},{"table":"vendor_invoice_lines","similarity":0.5372813385528225},{"table":"budgets","similarity":0.5364846137863498}],"column_hits_per_table":{"customers":11,"projects":1,"customer_contacts":7,"sales_opportunities":1,"sales_quotes":2,"sales_orders":2,"reorder_rules":1,"budgets":1,"vendor_invoices":1,"project_expenses":1,"quote_lines":1,"certifications":1,"purchase_orders":3,"budget_lines":1,"bank_accounts":2,"bank_transactions":2,"journal_lines":1,"purchase_requisitions":1,"order_lines":1,"vendor_invoice_lines":1,"positions":1,"sales_regions":1,"po_lines":1,"cost_centers":1,"project_budgets":1,"project_milestones":1,"warehouse_locations":1,"requisition_lines":1},"top_columns_per_table":{"customers":[{"column":"credit_limit","similarity":0.8290390589962461},{"column":"payment_terms","similarity":0.6650377871997543},{"column":"customer_number","similarity":0.6415139612300956}],"projects":[{"column":"customer_id","similarity":0.6113530297711885}],"customer_contacts":[{"column":"phone","similarity":0.6040484167837853},{"column":"customer_id","similarity":0.6035386821269575},{"column":"contact_id","similarity":0.5998404377039879}],"sales_opportunities":[{"column":"customer_id","similarity":0.5973351705123849}],"sales_quotes":[{"column":"customer_id","similarity":0.5961691774985171},{"column":"total","similarity":0.5659883632982617}],"sales_orders":[{"column":"customer_id","similarity":0.58549970245739},{"column":"total","similarity":0.5683405933157465}],"reorder_rules":[{"column":"max_quantity","similarity":0.5844362539863144}],"budgets":[{"column":"approved_by","similarity":0.5826134824645886}],"vendor_invoices":[{"column":"total","similarity":0.5814502781366767}],"project_expenses":[{"column":"approved_by","similarity":0.5806637778484305}],"quote_lines":[{"column":"line_total","similarity":0.5801896505180127}],"certifications":[{"column":"validity_years","similarity":0.5798577433614027}],"purchase_orders":[{"column":"total","similarity":0.5778492143323815},{"column":"approved_by","similarity":0.5753364140452711},{"column":"buyer_id","similarity":0.5681572281535011}],"budget_lines":[{"column":"amount","similarity":0.5775415147969544}],"bank_accounts":[{"column":"current_balance","similarity":0.5767501897962805},{"column":"account_number","similarity":0.5703853537704927}],"bank_transactions":[{"column":"amount","similarity":0.5760624192982815},{"column":"reference","similarity":0.566440413697339}],"journal_lines":[{"column":"credit","similarity":0.5758582782262962}],"purchase_requisitions":[{"column":"approved_by","similarity":0.573497894904601}],"order_lines":[{"column":"line_total","similarity":0.5724929640076355}],"vendor_invoice_lines":[{"column":"amount","similarity":0.5692283162401672}],"positions":[{"column":"max_salary","similarity":0.5687679838535561}],"sales_regions":[{"column":"manager_id","similarity":0.5681024224683461}],"po_lines":[{"column":"line_total","similarity":0.5673570249509682}],"cost_centers":[{"column":"code","similarity":0.5669986563600412}],"project_budgets":[{"column":"actual_amount","similarity":0.566506927799081}],"project_milestones":[{"column":"amount","similarity":0.5661535207015114}],"warehouse_locations":[{"column":"capacity","similarity":0.5659576253370232}],"requisition_lines":[{"column":"estimated_total","similarity":0.5640113461906648}]},"fused_scores":[{"table":"customers","fused":0.8499571504456961,"table_sim":0.6422232823454113,"col_score":1.1615579525961233},{"table":"customer_contacts","fused":0.7028167334530704,"table_sim":0.5702946339617082,"col_score":0.9015998826901137},{"table":"bank_accounts","fused":0.6716288396414678,"table_sim":0.5447528216147618,"col_score":0.8619428666815268},{"table":"sales_quotes","fused":0.6393515200927609,"table_sim":0.5491541498727729,"col_score":0.7746475754227427},{"table":"certifications","fused":0.5662074238231236,"table_sim":0.5571072107976042,"col_score":0.5798577433614027},{"table":"budget_lines","fused":0.5582835688864336,"table_sim":0.5454449382794198,"col_score":0.5775415147969544},{"table":"purchase_requisitions","fused":0.5581145225588671,"table_sim":0.5478589409950445,"col_score":0.573497894904601},{"table":"project_expenses","fused":0.5560441300925718,"table_sim":0.5396310315886659,"col_score":0.5806637778484305},{"table":"budgets","fused":0.5549361612576453,"table_sim":0.5364846137863498,"col_score":0.5826134824645886},{"table":"cost_centers","fused":0.5513750629401777,"table_sim":0.540959333993602,"col_score":0.5669986563600412},{"table":"vendor_invoice_lines","fused":0.5500601296277604,"table_sim":0.5372813385528225,"col_score":0.5692283162401672},{"table":"sales_regions","fused":0.49914854048756885,"table_sim":0.5667997703273866,"col_score":0.3976716957278422},{"table":"projects","fused":0.4955573347191046,"table_sim":0.5406308106386197,"col_score":0.42794712083983194},{"table":"purchase_orders","fused":0.34620696854200683,"table_sim":0,"col_score":0.865517421355017},{"table":"bank_transactions","fused":0.3437130504587804,"table_sim":0,"col_score":0.8592826261469511}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":11,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"projects","reason":"max_tables"},{"table":"purchase_orders","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":59,"total_retrieval_latency_ms":65,"sql_generated":"SELECT c.customer_id, c.name AS customer_name, c.email, c.phone, c.credit_limit FROM customers c WHERE c.credit_limit > 100000;","tables_used_in_sql":[],"explain_result":"success","rows_returned":206,"total_latency_ms":869}
{"timestamp":"2026-01-29T20:43:48.084Z","query_id":"2ae088a9-422f-45c9-9a72-4aaaea251d37","question":"How many sales orders are in pending status?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["sales_orders","purchase_orders","sales_opportunities","order_lines","vendor_invoices","purchase_requisitions","sales_quotes","goods_receipts","po_lines","product_suppliers","fixed_assets","receipt_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":12,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.6863020331203206},{"table":"purchase_orders","similarity":0.6720782086239174},{"table":"order_lines","similarity":0.620432904007153},{"table":"vendor_invoices","similarity":0.6085185379492049},{"table":"goods_receipts","similarity":0.6053687360586439},{"table":"sales_opportunities","similarity":0.601388904869088},{"table":"po_lines","similarity":0.576218684979662},{"table":"product_suppliers","similarity":0.5754254810584586},{"table":"purchase_requisitions","similarity":0.57327171968414},{"table":"vendor_invoice_lines","similarity":0.5682118570421297},{"table":"sales_territories","similarity":0.5678982904980082},{"table":"receipt_lines","similarity":0.5660529547253613},{"table":"vendors","similarity":0.5659136630376012},{"table":"reorder_rules","similarity":0.5568055924346023},{"table":"sales_quotes","similarity":0.5566655088616519}],"column_hits_per_table":{"sales_orders":14,"purchase_orders":13,"sales_quotes":1,"vendor_invoices":3,"purchase_requisitions":1,"stock_transfers":1,"timesheets":1,"leave_requests":1,"sales_opportunities":2,"project_phases":1,"projects":1,"journal_entries":1,"inventory_adjustments":1,"fixed_assets":2,"asset_maintenance":1,"order_lines":2,"employee_training":1,"project_expenses":1,"goods_receipts":1,"project_tasks":1},"top_columns_per_table":{"sales_orders":[{"column":"status","similarity":0.8126679915790036},{"column":"order_date","similarity":0.7078984846645195},{"column":"ship_date","similarity":0.6929006763015985}],"purchase_orders":[{"column":"status","similarity":0.770838550445989},{"column":"order_date","similarity":0.6497285521212871},{"column":"po_number","similarity":0.6445881341176289}],"sales_quotes":[{"column":"status","similarity":0.7105128416768823}],"vendor_invoices":[{"column":"status","similarity":0.6915681497187584},{"column":"due_date","similarity":0.5983254925630166},{"column":"po_id","similarity":0.5978553329024192}],"purchase_requisitions":[{"column":"status","similarity":0.6886346020649313}],"stock_transfers":[{"column":"status","similarity":0.6613621118756833}],"timesheets":[{"column":"status","similarity":0.6425710565758574}],"leave_requests":[{"column":"status","similarity":0.6303639699021262}],"sales_opportunities":[{"column":"expected_close_date","similarity":0.6291685056430228},{"column":"actual_close_date","similarity":0.6262923756162083}],"project_phases":[{"column":"status","similarity":0.6275085851720199}],"projects":[{"column":"status","similarity":0.6256287411296566}],"journal_entries":[{"column":"status","similarity":0.6235483153718223}],"inventory_adjustments":[{"column":"status","similarity":0.6208235335633071}],"fixed_assets":[{"column":"status","similarity":0.6168418961639195},{"column":"po_id","similarity":0.6010404984118506}],"asset_maintenance":[{"column":"status","similarity":0.6160182585727294}],"order_lines":[{"column":"quantity_shipped","similarity":0.6148753597061939},{"column":"order_id","similarity":0.6054379790805837}],"employee_training":[{"column":"status","similarity":0.6139587143974272}],"project_expenses":[{"column":"status","similarity":0.6069411878269023}],"goods_receipts":[{"column":"po_id","similarity":0.6057662952497207}],"project_tasks":[{"column":"status","similarity":0.6001730432395295}]},"fused_scores":[{"table":"sales_orders","fused":0.8335207489983198,"table_sim":0.6863020331203206,"col_score":1.0543488228153188},{"table":"purchase_orders","fused":0.7920559728463912,"table_sim":0.6720782086239174,"col_score":0.9720226191801016},{"table":"sales_opportunities","fused":0.7377592203019037,"table_sim":0.601388904869088,"col_score":0.9423146934511271},{"table":"order_lines","fused":0.7029712033580511,"table_sim":0.620432904007153,"col_score":0.8267786523843982},{"table":"vendor_invoices","fused":0.7012608607553557,"table_sim":0.6085185379492049,"col_score":0.840374344964582},{"table":"purchase_requisitions","fused":0.5367807203886648,"table_sim":0.57327171968414,"col_score":0.4820442214454519},{"table":"sales_quotes","fused":0.5329429009865182,"table_sim":0.5566655088616519,"col_score":0.4973589891738176},{"table":"goods_receipts","fused":0.5328358043051082,"table_sim":0.6053687360586439,"col_score":0.42403640667480447},{"table":"po_lines","fused":0.3457312109877972,"table_sim":0.576218684979662,"col_score":0},{"table":"product_suppliers","fused":0.34525528863507515,"table_sim":0.5754254810584586,"col_score":0},{"table":"vendor_invoice_lines","fused":0.3409271142252778,"table_sim":0.5682118570421297,"col_score":0},{"table":"sales_territories","fused":0.3407389742988049,"table_sim":0.5678982904980082,"col_score":0},{"table":"receipt_lines","fused":0.3396317728352168,"table_sim":0.5660529547253613,"col_score":0},{"table":"vendors","fused":0.3395481978225607,"table_sim":0.5659136630376012,"col_score":0},{"table":"reorder_rules","fused":0.33408335546076134,"table_sim":0.5568055924346023,"col_score":0}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendors","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":31,"total_retrieval_latency_ms":38,"sql_generated":"SELECT COUNT(*) FROM sales_orders WHERE status = 'pending';","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":526}
{"timestamp":"2026-01-29T20:43:48.609Z","query_id":"358e7da8-bb13-48a8-99ff-b32bae15d140","question":"List all products in the Electronics category","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["products","asset_categories","product_categories","product_suppliers","inventory_levels","purchase_orders","project_budgets","fixed_assets","order_lines","goods_receipts","inventory_transactions","purchase_requisitions"],"tables_from_table_retrieval":15,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"product_categories","similarity":0.7247710633179223},{"table":"products","similarity":0.6925442846427379},{"table":"asset_categories","similarity":0.6732299389573608},{"table":"product_suppliers","similarity":0.6030261734368682},{"table":"inventory_levels","similarity":0.5983462217768915},{"table":"fixed_assets","similarity":0.5837780825065988},{"table":"order_lines","similarity":0.579950725989159},{"table":"benefit_types","similarity":0.5783320444020242},{"table":"goods_receipts","similarity":0.5716501955638699},{"table":"inventory_transactions","similarity":0.5662070064714834},{"table":"purchase_orders","similarity":0.5640672157629032},{"table":"reorder_rules","similarity":0.5631110139120176},{"table":"sales_orders","similarity":0.5610178986822795},{"table":"project_budgets","similarity":0.5604683231309531},{"table":"receipt_lines","similarity":0.5589477791069778}],"column_hits_per_table":{"product_categories":5,"products":11,"asset_categories":5,"fixed_assets":1,"project_expenses":1,"project_budgets":1,"inventory_levels":3,"product_suppliers":6,"goods_receipts":1,"inventory_transactions":1,"receipt_lines":1,"purchase_orders":3,"order_lines":1,"purchase_requisitions":2,"sales_orders":1,"requisition_lines":1,"po_lines":1,"transfer_lines":1,"projects":1,"reorder_rules":1,"vendors":1,"project_milestones":1},"top_columns_per_table":{"product_categories":[{"column":"description","similarity":0.7744734798782056},{"column":"is_active","similarity":0.764103621998991},{"column":"category_id","similarity":0.7400673790806138}],"products":[{"column":"category_id","similarity":0.7448968885002062},{"column":"weight","similarity":0.7338384533236261},{"column":"description","similarity":0.7270322585700298}],"asset_categories":[{"column":"category_id","similarity":0.6720113269687207},{"column":"name","similarity":0.6440506484802837},{"column":"useful_life_years","similarity":0.6436763776718329}],"fixed_assets":[{"column":"category_id","similarity":0.6687988929895817}],"project_expenses":[{"column":"category","similarity":0.6580372401808694}],"project_budgets":[{"column":"category","similarity":0.6411736891011891}],"inventory_levels":[{"column":"product_id","similarity":0.6383729329618826},{"column":"quantity_available","similarity":0.6195689232836453},{"column":"quantity_reserved","similarity":0.6150070840715671}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6357396016111654},{"column":"is_preferred","similarity":0.6352037703917482},{"column":"product_id","similarity":0.6350232984655001}],"goods_receipts":[{"column":"notes","similarity":0.6342701892167845}],"inventory_transactions":[{"column":"product_id","similarity":0.6285109886489371}],"receipt_lines":[{"column":"product_id","similarity":0.6251008787738574}],"purchase_orders":[{"column":"status","similarity":0.6246767013236649},{"column":"subtotal","similarity":0.6129627891245971},{"column":"total","similarity":0.6109546136413169}],"order_lines":[{"column":"product_id","similarity":0.6228405864995272}],"purchase_requisitions":[{"column":"notes","similarity":0.6219501766292409},{"column":"status","similarity":0.6143404481217759}],"sales_orders":[{"column":"status","similarity":0.6179542401442183}],"requisition_lines":[{"column":"product_id","similarity":0.6178394374568797}],"po_lines":[{"column":"product_id","similarity":0.6141691155677201}],"transfer_lines":[{"column":"product_id","similarity":0.6137213514394801}],"projects":[{"column":"description","similarity":0.6114423632244014}],"reorder_rules":[{"column":"product_id","similarity":0.6112855739301208}],"vendors":[{"column":"website","similarity":0.6078254177271813}],"project_milestones":[{"column":"description","similarity":0.6073811792561313}]},"fused_scores":[{"table":"products","fused":0.84960555792291,"table_sim":0.6925442846427379,"col_score":1.0851974678431684},{"table":"asset_categories","fused":0.785802907667366,"table_sim":0.6732299389573608,"col_score":0.9546623607323738},{"table":"product_categories","fused":0.7586897194365096,"table_sim":0.7247710633179223,"col_score":0.8095677036143907},{"table":"product_suppliers","fused":0.7431522987849367,"table_sim":0.6030261734368682,"col_score":0.9533414868070396},{"table":"inventory_levels","fused":0.7298367191939065,"table_sim":0.5983462217768915,"col_score":0.9270724653194289},{"table":"purchase_orders","fused":0.7058163678358441,"table_sim":0.5640672157629032,"col_score":0.9184400959452556},{"table":"project_budgets","fused":0.5927504695190475,"table_sim":0.5604683231309531,"col_score":0.6411736891011891},{"table":"fixed_assets","fused":0.5375305395410421,"table_sim":0.5837780825065988,"col_score":0.4681592250927072},{"table":"order_lines","fused":0.5223657998133631,"table_sim":0.579950725989159,"col_score":0.435988410549669},{"table":"goods_receipts","fused":0.5205857703190215,"table_sim":0.5716501955638699,"col_score":0.4439891324517491},{"table":"inventory_transactions","fused":0.5157072807045924,"table_sim":0.5662070064714834,"col_score":0.4399576920542559},{"table":"receipt_lines","fused":0.5103969135208668,"table_sim":0.5589477791069778,"col_score":0.4375706151417002},{"table":"sales_orders","fused":0.5096379264497488,"table_sim":0.5610178986822795,"col_score":0.43256796810095277},{"table":"reorder_rules","fused":0.5090265690476443,"table_sim":0.5631110139120176,"col_score":0.42789990175108455},{"table":"benefit_types","fused":0.3469992266412145,"table_sim":0.5783320444020242,"col_score":0}],"fk_expansion_candidates":23,"fk_expansion_added":2,"fk_expansion_blocked_count":17,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"max_tables"},{"table":"reorder_rules","reason":"max_tables"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"max_tables"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":39,"total_retrieval_latency_ms":45,"sql_generated":"SELECT p.name AS product_name, p.sku, pc.category_id, pc.name AS category_name FROM products p INNER JOIN product_categories pc ON p.category_id = pc.category_id WHERE pc.name = 'Electronics';","tables_used_in_sql":[],"explain_result":"success","rows_returned":62,"total_latency_ms":1025}
{"timestamp":"2026-01-29T20:43:49.635Z","query_id":"e0b2a868-6154-43bb-9166-da376129d3e0","question":"What are the names of all warehouses?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["warehouse_locations","warehouses","asset_locations","inventory_levels","stock_transfers","vendors","product_suppliers","inventory_transactions","goods_receipts","receipt_lines","addresses","adjustment_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":14,"tables_from_fk_expansion":2,"table_scores":[{"table":"warehouse_locations","similarity":0.7285498737313786},{"table":"warehouses","similarity":0.6792134543197855},{"table":"inventory_levels","similarity":0.6028416640616783},{"table":"stock_transfers","similarity":0.5855227429535015},{"table":"asset_locations","similarity":0.5811905860356016},{"table":"inventory_transactions","similarity":0.5741447160112193},{"table":"goods_receipts","similarity":0.562857185642988},{"table":"receipt_lines","similarity":0.5455584769843732},{"table":"inventory_adjustments","similarity":0.5426259114305894},{"table":"departments","similarity":0.5313134558364061},{"table":"business_units","similarity":0.5244981901049215},{"table":"asset_categories","similarity":0.5238562017802103},{"table":"product_suppliers","similarity":0.5237894596417773},{"table":"vendors","similarity":0.5237362245698947},{"table":"adjustment_lines","similarity":0.5220765049120273}],"column_hits_per_table":{"warehouses":6,"warehouse_locations":7,"stock_transfers":2,"goods_receipts":1,"inventory_levels":2,"inventory_transactions":2,"receipt_lines":1,"departments":1,"vendors":2,"inventory_adjustments":1,"adjustment_lines":1,"asset_locations":6,"cities":1,"reorder_rules":1,"business_units":1,"cost_centers":1,"sales_territories":1,"products":1,"sales_regions":1,"projects":1,"currencies":1,"product_categories":1,"budgets":1,"product_suppliers":2,"units_of_measure":1,"project_phases":1,"vendor_contacts":1,"asset_categories":1,"addresses":1},"top_columns_per_table":{"warehouses":[{"column":"name","similarity":0.8306423755557336},{"column":"code","similarity":0.7512829316334283},{"column":"warehouse_id","similarity":0.7425092729476251}],"warehouse_locations":[{"column":"rack","similarity":0.7298143500706573},{"column":"bin","similarity":0.7297344203964418},{"column":"aisle","similarity":0.7247238571215294}],"stock_transfers":[{"column":"to_warehouse_id","similarity":0.6377076065867383},{"column":"from_warehouse_id","similarity":0.6282759066468376}],"goods_receipts":[{"column":"warehouse_id","similarity":0.6325079254457334}],"inventory_levels":[{"column":"warehouse_id","similarity":0.623490938233287},{"column":"location_id","similarity":0.6197290277532869}],"inventory_transactions":[{"column":"warehouse_id","similarity":0.6172355443974565},{"column":"location_id","similarity":0.6163600073929221}],"receipt_lines":[{"column":"location_id","similarity":0.6086776313817097}],"departments":[{"column":"name","similarity":0.6046172861965688}],"vendors":[{"column":"name","similarity":0.6006474572761235},{"column":"website","similarity":0.5429020150551502}],"inventory_adjustments":[{"column":"warehouse_id","similarity":0.5962150819746229}],"adjustment_lines":[{"column":"location_id","similarity":0.5953390531464773}],"asset_locations":[{"column":"name","similarity":0.59252797863612},{"column":"building","similarity":0.5687769385352075},{"column":"description","similarity":0.568123307445186}],"cities":[{"column":"name","similarity":0.5913925051006355}],"reorder_rules":[{"column":"warehouse_id","similarity":0.5860961886053743}],"business_units":[{"column":"name","similarity":0.5855760360515111}],"cost_centers":[{"column":"name","similarity":0.5796551031766091}],"sales_territories":[{"column":"name","similarity":0.5739343094189399}],"products":[{"column":"name","similarity":0.5715109515395136}],"sales_regions":[{"column":"name","similarity":0.5686881306616351}],"projects":[{"column":"name","similarity":0.5628106374186854}],"currencies":[{"column":"name","similarity":0.5599164983958906}],"product_categories":[{"column":"name","similarity":0.5543220703341668}],"budgets":[{"column":"name","similarity":0.5506764127199264}],"product_suppliers":[{"column":"supplier_id","similarity":0.5505276328361339},{"column":"is_preferred","similarity":0.545694199708335}],"units_of_measure":[{"column":"name","similarity":0.5498315512937682}],"project_phases":[{"column":"name","similarity":0.5455907198882759}],"vendor_contacts":[{"column":"first_name","similarity":0.5438345209961394}],"asset_categories":[{"column":"name","similarity":0.5437632464112468}],"addresses":[{"column":"street1","similarity":0.5425795221955373}]},"fused_scores":[{"table":"warehouse_locations","fused":0.8750025483463784,"table_sim":0.7285498737313786,"col_score":1.0946815602688782},{"table":"warehouses","fused":0.8243311778230453,"table_sim":0.6792134543197855,"col_score":1.042007763077935},{"table":"asset_locations","fused":0.6856831018359026,"table_sim":0.5811905860356016,"col_score":0.8424218755363542},{"table":"inventory_levels","fused":0.6230445250277874,"table_sim":0.6028416640616783,"col_score":0.6533488164769513},{"table":"stock_transfers","fused":0.6178304025469449,"table_sim":0.5855227429535015,"col_score":0.6662918919371099},{"table":"vendors","fused":0.6154931847826541,"table_sim":0.5237362245698947,"col_score":0.7531286251017935},{"table":"product_suppliers","fused":0.6096252242654591,"table_sim":0.5237894596417773,"col_score":0.7383788712009819},{"table":"inventory_transactions","fused":0.6036031830730284,"table_sim":0.5741447160112193,"col_score":0.6477908836657422},{"table":"goods_receipts","fused":0.5148165305105982,"table_sim":0.562857185642988,"col_score":0.4427555478120134},{"table":"receipt_lines","fused":0.49776482297750263,"table_sim":0.5455584769843732,"col_score":0.4260743419671968},{"table":"inventory_adjustments","fused":0.492515769811248,"table_sim":0.5426259114305894,"col_score":0.41735055738223603},{"table":"departments","fused":0.4880809136368829,"table_sim":0.5313134558364061,"col_score":0.42323210033759817},{"table":"adjustment_lines","fused":0.47994083782823005,"table_sim":0.5220765049120273,"col_score":0.4167373372025341},{"table":"business_units","fused":0.478660204157376,"table_sim":0.5244981901049215,"col_score":0.40990322523605777},{"table":"asset_categories","fused":0.4665674300632753,"table_sim":0.5238562017802103,"col_score":0.3806342724878728}],"fk_expansion_candidates":15,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"max_tables"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"vendor_contacts","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":26,"total_retrieval_latency_ms":32,"sql_generated":"SELECT w.name FROM warehouses AS w;","tables_used_in_sql":[],"explain_result":"success","rows_returned":5,"total_latency_ms":422}
{"timestamp":"2026-01-29T20:43:50.057Z","query_id":"7d253962-0ce6-4cd3-82e8-ea60b9002d31","question":"List all active vendors","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["vendors","vendor_contacts","vendor_invoices","product_suppliers","vendor_invoice_lines","purchase_orders","warehouses","sales_orders","asset_maintenance","positions","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":1,"table_scores":[{"table":"vendors","similarity":0.6880006513779018},{"table":"vendor_invoices","similarity":0.6543823921120047},{"table":"vendor_contacts","similarity":0.6543707733450305},{"table":"product_suppliers","similarity":0.6368613960189783},{"table":"purchase_orders","similarity":0.6046285681195724},{"table":"warehouses","similarity":0.598149679590252},{"table":"vendor_invoice_lines","similarity":0.5838401301268009},{"table":"sales_orders","similarity":0.5640201838810418},{"table":"employee_certifications","similarity":0.551813660527373},{"table":"positions","similarity":0.5516308950343896},{"table":"goods_receipts","similarity":0.546132532397609},{"table":"certifications","similarity":0.5422578536384377},{"table":"business_units","similarity":0.5370141517568868},{"table":"sales_opportunities","similarity":0.5364263200685896},{"table":"asset_maintenance","similarity":0.5360709301261409}],"column_hits_per_table":{"vendors":12,"vendor_invoices":11,"product_suppliers":3,"vendor_contacts":8,"fixed_assets":1,"customers":1,"employees":1,"products":1,"asset_maintenance":1,"purchase_orders":1,"warehouses":1,"vendor_invoice_lines":4,"business_units":1,"positions":1,"sales_orders":1,"product_categories":1,"bank_accounts":1},"top_columns_per_table":{"vendors":[{"column":"is_active","similarity":0.8155853373692737},{"column":"vendor_id","similarity":0.7047968333046998},{"column":"website","similarity":0.7047070539914414}],"vendor_invoices":[{"column":"status","similarity":0.6853007949330985},{"column":"total","similarity":0.6625184230380687},{"column":"vendor_id","similarity":0.658515810844043}],"product_suppliers":[{"column":"vendor_id","similarity":0.6663864141204237},{"column":"vendor_sku","similarity":0.6217787251674654},{"column":"is_preferred","similarity":0.6033063105449389}],"vendor_contacts":[{"column":"vendor_id","similarity":0.666362862060921},{"column":"is_primary","similarity":0.6648517274867396},{"column":"contact_id","similarity":0.6527908754111679}],"fixed_assets":[{"column":"vendor_id","similarity":0.6576219040714807}],"customers":[{"column":"is_active","similarity":0.6545248955843614}],"employees":[{"column":"is_active","similarity":0.649190940172776}],"products":[{"column":"is_active","similarity":0.6479807345635332}],"asset_maintenance":[{"column":"vendor_id","similarity":0.6479581638128978}],"purchase_orders":[{"column":"vendor_id","similarity":0.6472967761083289}],"warehouses":[{"column":"is_active","similarity":0.6446855549903335}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.6230871843854703},{"column":"invoice_id","similarity":0.6101244773591274},{"column":"line_id","similarity":0.609089375870349}],"business_units":[{"column":"is_active","similarity":0.6149605862492391}],"positions":[{"column":"is_active","similarity":0.6137399762218805}],"sales_orders":[{"column":"status","similarity":0.6081473914740269}],"product_categories":[{"column":"is_active","similarity":0.6076608572400397}],"bank_accounts":[{"column":"is_active","similarity":0.6030985737718401}]},"fused_scores":[{"table":"vendors","fused":0.8340562331865453,"table_sim":0.6880006513779018,"col_score":1.0531396058995104},{"table":"vendor_contacts","fused":0.7889592560034033,"table_sim":0.6543707733450305,"col_score":0.9908419799909627},{"table":"vendor_invoices","fused":0.7879374726767754,"table_sim":0.6543823921120047,"col_score":0.9882700935239312},{"table":"product_suppliers","fused":0.751489589787361,"table_sim":0.6368613960189783,"col_score":0.9234318804399348},{"table":"vendor_invoice_lines","fused":0.7211190259203175,"table_sim":0.5838401301268009,"col_score":0.9270373696105922},{"table":"purchase_orders","fused":0.5440202381820756,"table_sim":0.6046285681195724,"col_score":0.4531077432758302},{"table":"warehouses","fused":0.5394017631514445,"table_sim":0.598149679590252,"col_score":0.4512798884932334},{"table":"sales_orders","fused":0.5086933799413526,"table_sim":0.5640201838810418,"col_score":0.4257031740318188},{"table":"asset_maintenance","fused":0.5030708439432959,"table_sim":0.5360709301261409,"col_score":0.45357071466902843},{"table":"positions","fused":0.5028257303627602,"table_sim":0.5516308950343896,"col_score":0.4296179833553163},{"table":"business_units","fused":0.49439745520391903,"table_sim":0.5370141517568868,"col_score":0.4304724103744674},{"table":"employee_certifications","fused":0.3310881963164238,"table_sim":0.551813660527373,"col_score":0},{"table":"goods_receipts","fused":0.3276795194385654,"table_sim":0.546132532397609,"col_score":0},{"table":"certifications","fused":0.3253547121830626,"table_sim":0.5422578536384377,"col_score":0},{"table":"sales_opportunities","fused":0.3218557920411537,"table_sim":0.5364263200685896,"col_score":0}],"fk_expansion_candidates":20,"fk_expansion_added":1,"fk_expansion_blocked_count":19,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":52,"total_retrieval_latency_ms":59,"sql_generated":"SELECT v.vendor_id, v.vendor_number, v.name FROM vendors AS v WHERE v.is_active = TRUE;","tables_used_in_sql":[],"explain_result":"success","rows_returned":200,"total_latency_ms":664}
{"timestamp":"2026-01-29T20:43:50.721Z","query_id":"aeac458b-eceb-4ebb-9ecd-11e4e873fbb3","question":"What are the different account types in the chart of accounts?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["account_types","chart_of_accounts","bank_accounts","bank_transactions","asset_categories","audit_log","benefit_types","journal_lines","vendor_invoice_lines","budget_lines","currencies","employee_benefits"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"chart_of_accounts","similarity":0.819203299985527},{"table":"account_types","similarity":0.7962345365841693},{"table":"bank_accounts","similarity":0.724679255065619},{"table":"journal_lines","similarity":0.625444495321535},{"table":"asset_categories","similarity":0.618359452764169},{"table":"benefit_types","similarity":0.6179653147868353},{"table":"bank_transactions","similarity":0.6154557182401941},{"table":"vendor_invoice_lines","similarity":0.6040685769049701},{"table":"budget_lines","similarity":0.5976766494889552},{"table":"customers","similarity":0.594854133582724},{"table":"leave_types","similarity":0.584850284339393},{"table":"audit_log","similarity":0.5826141715666185},{"table":"maintenance_types","similarity":0.5755860970964287},{"table":"currencies","similarity":0.5740346669434278},{"table":"certifications","similarity":0.5726437402506039}],"column_hits_per_table":{"chart_of_accounts":8,"account_types":4,"bank_accounts":8,"journal_lines":1,"budget_lines":1,"vendor_invoice_lines":1,"bank_transactions":3,"inventory_transactions":2,"asset_categories":3,"audit_log":2,"benefit_types":4,"document_attachments":1,"sales_orders":1,"employee_certifications":1,"journal_entries":1,"maintenance_types":1,"employee_benefits":2,"goods_receipts":1,"leave_types":1,"sales_regions":1,"stock_transfers":1,"employment_history":1,"product_categories":1},"top_columns_per_table":{"chart_of_accounts":[{"column":"account_number","similarity":0.8096926316994187},{"column":"account_type_id","similarity":0.7968800422254282},{"column":"name","similarity":0.7787449565502012}],"account_types":[{"column":"category","similarity":0.8060382831667645},{"column":"name","similarity":0.7816311319186199},{"column":"normal_balance","similarity":0.771440158430953}],"bank_accounts":[{"column":"account_number","similarity":0.7265786276491443},{"column":"gl_account_id","similarity":0.7192429462418238},{"column":"account_name","similarity":0.7122946577731373}],"journal_lines":[{"column":"account_id","similarity":0.6967143979052984}],"budget_lines":[{"column":"account_id","similarity":0.684445613990559}],"vendor_invoice_lines":[{"column":"account_id","similarity":0.6840058160952801}],"bank_transactions":[{"column":"transaction_type","similarity":0.6518087698648707},{"column":"bank_account_id","similarity":0.6061370977618293},{"column":"reference","similarity":0.5906710248731557}],"inventory_transactions":[{"column":"transaction_type","similarity":0.6495161080312447},{"column":"reference_type","similarity":0.6175642629967973}],"asset_categories":[{"column":"name","similarity":0.6338625869508345},{"column":"depreciation_method","similarity":0.6289044257771695},{"column":"category_id","similarity":0.6034748261864737}],"audit_log":[{"column":"table_name","similarity":0.6323776797561055},{"column":"action","similarity":0.6264802121253557}],"benefit_types":[{"column":"name","similarity":0.631265442053339},{"column":"benefit_type_id","similarity":0.5989631957377372},{"column":"description","similarity":0.5970070919798401}],"document_attachments":[{"column":"entity_type","similarity":0.610129485144327}],"sales_orders":[{"column":"order_number","similarity":0.6014897520147031}],"employee_certifications":[{"column":"certificate_number","similarity":0.6014221103097243}],"journal_entries":[{"column":"entry_number","similarity":0.5960303492351093}],"maintenance_types":[{"column":"name","similarity":0.5941881078938602}],"employee_benefits":[{"column":"coverage_level","similarity":0.59406931034147},{"column":"benefit_type_id","similarity":0.5920431573893533}],"goods_receipts":[{"column":"receipt_number","similarity":0.5921999581294917}],"leave_types":[{"column":"name","similarity":0.590925842666314}],"sales_regions":[{"column":"name","similarity":0.5908831690426579}],"stock_transfers":[{"column":"transfer_number","similarity":0.5905182588855986}],"employment_history":[{"column":"position","similarity":0.5900957722493421}],"product_categories":[{"column":"name","similarity":0.5900660138884373}]},"fused_scores":[{"table":"account_types","fused":0.954444066903398,"table_sim":0.7962345365841693,"col_score":1.191758362382241},{"table":"chart_of_accounts","fused":0.9269622385826437,"table_sim":0.819203299985527,"col_score":1.0886006464783187},{"table":"bank_accounts","fused":0.8505843245377838,"table_sim":0.724679255065619,"col_score":1.0394419287460308},{"table":"bank_transactions","fused":0.7481311438646958,"table_sim":0.6154557182401941,"col_score":0.9471442823014485},{"table":"asset_categories","fused":0.7113182041424861,"table_sim":0.618359452764169,"col_score":0.8507563312099616},{"table":"audit_log","fused":0.6886934629559682,"table_sim":0.5826141715666185,"col_score":0.8478124000399926},{"table":"benefit_types","fused":0.6313883600503192,"table_sim":0.6179653147868353,"col_score":0.6515229279455452},{"table":"journal_lines","fused":0.5703467286064046,"table_sim":0.625444495321535,"col_score":0.4877000785337089},{"table":"vendor_invoice_lines","fused":0.5539627746496605,"table_sim":0.6040685769049701,"col_score":0.47880407126669605},{"table":"budget_lines","fused":0.5502507616107296,"table_sim":0.5976766494889552,"col_score":0.4791119297933913},{"table":"leave_types","fused":0.5163694065502037,"table_sim":0.584850284339393,"col_score":0.41364808986641977},{"table":"maintenance_types","fused":0.5117243284681381,"table_sim":0.5755860970964287,"col_score":0.41593167552570215},{"table":"inventory_transactions","fused":0.38331929581185736,"table_sim":0,"col_score":0.9582982395296433},{"table":"customers","fused":0.3569124801496344,"table_sim":0.594854133582724,"col_score":0},{"table":"currencies","fused":0.34442080016605664,"table_sim":0.5740346669434278,"col_score":0}],"fk_expansion_candidates":9,"fk_expansion_added":2,"fk_expansion_blocked_count":7,"fk_expansion_blocked":[{"table":"budgets","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":51,"total_retrieval_latency_ms":57,"sql_generated":"SELECT DISTINCT at.name AS AccountType FROM account_types at;","tables_used_in_sql":[],"explain_result":"success","rows_returned":25,"total_latency_ms":466}
{"timestamp":"2026-01-29T20:43:51.187Z","query_id":"751f31c4-5b11-47ac-9d61-af20e4ecad73","question":"List all bank accounts and their current balances","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["bank_accounts","bank_transactions","account_types","chart_of_accounts","depreciation_entries","currencies","budgets","asset_maintenance","fixed_assets","budget_lines","asset_categories","asset_transfers"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"bank_accounts","similarity":0.7329690151560269},{"table":"bank_transactions","similarity":0.6432688918493359},{"table":"account_types","similarity":0.631508179872346},{"table":"chart_of_accounts","similarity":0.6020063005251778},{"table":"budget_lines","similarity":0.5651962639440569},{"table":"customers","similarity":0.5535278665609116},{"table":"asset_categories","similarity":0.5521572577010813},{"table":"asset_maintenance","similarity":0.5475464914896694},{"table":"fixed_assets","similarity":0.542263585011133},{"table":"depreciation_entries","similarity":0.540207110520008},{"table":"depreciation_schedules","similarity":0.5389700501296238},{"table":"budgets","similarity":0.5356853372102878},{"table":"audit_log","similarity":0.5355796554212624},{"table":"currencies","similarity":0.5347534603370891},{"table":"asset_transfers","similarity":0.5308786114003121}],"column_hits_per_table":{"bank_accounts":8,"account_types":4,"bank_transactions":8,"chart_of_accounts":7,"budget_lines":1,"budgets":2,"asset_maintenance":4,"fixed_assets":3,"departments":1,"stock_transfers":1,"purchase_orders":1,"inventory_adjustments":1,"sales_orders":1,"depreciation_entries":3,"asset_transfers":1,"po_lines":1,"currencies":2,"order_lines":1},"top_columns_per_table":{"bank_accounts":[{"column":"current_balance","similarity":0.8131918868327234},{"column":"bank_name","similarity":0.6859971206500465},{"column":"is_active","similarity":0.6856206372857585}],"account_types":[{"column":"normal_balance","similarity":0.651680429614802},{"column":"name","similarity":0.5702821319602579},{"column":"category","similarity":0.5677375251541499}],"bank_transactions":[{"column":"bank_account_id","similarity":0.6394080898784963},{"column":"amount","similarity":0.6276211603986331},{"column":"reconciled","similarity":0.6180619655169489}],"chart_of_accounts":[{"column":"account_number","similarity":0.6009438246638642},{"column":"is_active","similarity":0.5880663435274229},{"column":"description","similarity":0.5864624123051488}],"budget_lines":[{"column":"account_id","similarity":0.5958013856129102}],"budgets":[{"column":"status","similarity":0.5911631228971014},{"column":"total_amount","similarity":0.5869858538327237}],"asset_maintenance":[{"column":"status","similarity":0.5877659188337945},{"column":"cost","similarity":0.5661365628191241},{"column":"notes","similarity":0.5650870530420457}],"fixed_assets":[{"column":"status","similarity":0.5876108236636884},{"column":"purchase_cost","similarity":0.5561615272534075},{"column":"po_id","similarity":0.5498653271915838}],"departments":[{"column":"budget","similarity":0.5809728059571625}],"stock_transfers":[{"column":"status","similarity":0.5709511656558833}],"purchase_orders":[{"column":"total","similarity":0.5687313472919212}],"inventory_adjustments":[{"column":"status","similarity":0.5683037201005342}],"sales_orders":[{"column":"total","similarity":0.5660190484076101}],"depreciation_entries":[{"column":"accumulated_depreciation","similarity":0.5614194260846443},{"column":"amount","similarity":0.555260116269063},{"column":"asset_id","similarity":0.5551633641468458}],"asset_transfers":[{"column":"asset_id","similarity":0.5602763924959059}],"po_lines":[{"column":"line_total","similarity":0.5571370270411418}],"currencies":[{"column":"symbol","similarity":0.5502956016313811},{"column":"code","similarity":0.5500909502155655}],"order_lines":[{"column":"line_total","similarity":0.5495504183282629}]},"fused_scores":[{"table":"bank_accounts","fused":0.902177471523772,"table_sim":0.7329690151560269,"col_score":1.1559901560753896},{"table":"bank_transactions","fused":0.7606221923724445,"table_sim":0.6432688918493359,"col_score":0.9366521431571075},{"table":"account_types","fused":0.7531245848001584,"table_sim":0.631508179872346,"col_score":0.9355491921918769},{"table":"chart_of_accounts","fused":0.6839105982744915,"table_sim":0.6020063005251778,"col_score":0.8067670448984622},{"table":"depreciation_entries","fused":0.6597440599996751,"table_sim":0.540207110520008,"col_score":0.8390494842191758},{"table":"currencies","fused":0.6509885068979191,"table_sim":0.5347534603370891,"col_score":0.8253410767391639},{"table":"budgets","fused":0.6389683810648563,"table_sim":0.5356853372102878,"col_score":0.7938929468467092},{"table":"asset_maintenance","fused":0.6372697486581825,"table_sim":0.5475464914896694,"col_score":0.7718546344109521},{"table":"fixed_assets","fused":0.6300882772209593,"table_sim":0.542263585011133,"col_score":0.7618253155356984},{"table":"budget_lines","fused":0.5059421463380489,"table_sim":0.5651962639440569,"col_score":0.41706096992903713},{"table":"asset_transfers","fused":0.4754045567390409,"table_sim":0.5308786114003121,"col_score":0.3921934747471341},{"table":"customers","fused":0.33211671993654696,"table_sim":0.5535278665609116,"col_score":0},{"table":"asset_categories","fused":0.33129435462064877,"table_sim":0.5521572577010813,"col_score":0},{"table":"depreciation_schedules","fused":0.3233820300777743,"table_sim":0.5389700501296238,"col_score":0},{"table":"audit_log","fused":0.3213477932527574,"table_sim":0.5355796554212624,"col_score":0}],"fk_expansion_candidates":15,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"asset_locations","reason":"no_evidence"},{"table":"customers","reason":"max_tables"},{"table":"departments","reason":"max_tables"},{"table":"depreciation_schedules","reason":"max_tables"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"purchase_orders","reason":"max_tables"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":43,"total_retrieval_latency_ms":49,"sql_generated":"SELECT ba.account_number AS \"Account Number\", ba.account_name AS \"Account Name\", ba.current_balance AS \"Current Balance\" FROM fixed_assets fa INNER JOIN bank_accounts ba ON fa.asset_id = ba.bank_account_id WHERE fa.category_id IN (SELECT category_id FROM asset_categories WHERE name = 'Fixed Assets');","tables_used_in_sql":[],"explain_result":"success","rows_returned":0,"total_latency_ms":1328}
{"timestamp":"2026-01-29T20:43:52.515Z","query_id":"bf25dc94-5bda-4c46-89a3-e43508e838fb","question":"How many projects are currently active?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["project_tasks","projects","project_milestones","project_phases","project_resources","project_expenses","positions","product_categories","warehouses","cost_centers","project_budgets","task_assignments"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_tasks","similarity":0.6324363750327547},{"table":"project_milestones","similarity":0.6170314556998037},{"table":"project_phases","similarity":0.6128862225489412},{"table":"projects","similarity":0.6020298260872147},{"table":"project_resources","similarity":0.6015867769428557},{"table":"project_budgets","similarity":0.5892063991800344},{"table":"project_expenses","similarity":0.5696442071698902},{"table":"positions","similarity":0.5644568182612411},{"table":"opportunity_stages","similarity":0.5589162087700763},{"table":"warehouses","similarity":0.5509035131365505},{"table":"cost_centers","similarity":0.548129265267962},{"table":"task_assignments","similarity":0.5450320760647058},{"table":"product_categories","similarity":0.539820939875771},{"table":"asset_maintenance","similarity":0.52313956323239},{"table":"business_units","similarity":0.5210598083671529}],"column_hits_per_table":{"projects":11,"project_phases":8,"project_tasks":9,"products":1,"project_milestones":7,"product_categories":1,"positions":1,"project_expenses":1,"project_resources":3,"training_courses":1,"employees":1,"warehouses":1,"business_units":1,"cost_centers":1,"vendors":1,"bank_accounts":1,"customers":1},"top_columns_per_table":{"projects":[{"column":"status","similarity":0.7039586739514128},{"column":"start_date","similarity":0.6607094006164724},{"column":"project_number","similarity":0.6518983609724518}],"project_phases":[{"column":"status","similarity":0.6689746254874316},{"column":"start_date","similarity":0.6271086432862566},{"column":"project_id","similarity":0.6166614910327677}],"project_tasks":[{"column":"status","similarity":0.6676901253189378},{"column":"completed_date","similarity":0.6374421602481329},{"column":"actual_hours","similarity":0.6316381487867313}],"products":[{"column":"is_active","similarity":0.6425708119490484}],"project_milestones":[{"column":"completed_date","similarity":0.6325660468867274},{"column":"is_billable","similarity":0.6124934562333328},{"column":"project_id","similarity":0.6076897771208767}],"product_categories":[{"column":"is_active","similarity":0.6317144051457637}],"positions":[{"column":"is_active","similarity":0.6252475888035075}],"project_expenses":[{"column":"status","similarity":0.622364299630185}],"project_resources":[{"column":"start_date","similarity":0.6206371456319261},{"column":"end_date","similarity":0.6084386815140401},{"column":"project_id","similarity":0.5910943352806449}],"training_courses":[{"column":"is_active","similarity":0.6141042575011056}],"employees":[{"column":"is_active","similarity":0.6117702012307417}],"warehouses":[{"column":"is_active","similarity":0.6079254385625211}],"business_units":[{"column":"is_active","similarity":0.6021027569519785}],"cost_centers":[{"column":"is_active","similarity":0.597901030459316}],"vendors":[{"column":"is_active","similarity":0.5950232278262507}],"bank_accounts":[{"column":"is_active","similarity":0.5888223633904216}],"customers":[{"column":"is_active","similarity":0.5831120305694527}]},"fused_scores":[{"table":"project_tasks","fused":0.7607663188762523,"table_sim":0.6324363750327547,"col_score":0.9532612346414986},{"table":"projects","fused":0.7558813280934082,"table_sim":0.6020298260872147,"col_score":0.9866585811026983},{"table":"project_milestones","fused":0.7457439834212397,"table_sim":0.6170314556998037,"col_score":0.9388127750033938},{"table":"project_phases","fused":0.7418687116489029,"table_sim":0.6128862225489412,"col_score":0.9353424452988452},{"table":"project_resources","fused":0.7308946607212918,"table_sim":0.6015867769428557,"col_score":0.9248564863889461},{"table":"project_expenses","fused":0.5160485281983859,"table_sim":0.5696442071698902,"col_score":0.4356550097411295},{"table":"positions","fused":0.5137434158217267,"table_sim":0.5644568182612411,"col_score":0.4376733121624552},{"table":"product_categories","fused":0.5007725973662764,"table_sim":0.539820939875771,"col_score":0.44220008360203455},{"table":"warehouses","fused":0.5007612306794362,"table_sim":0.5509035131365505,"col_score":0.42554780699376477},{"table":"cost_centers","fused":0.49628984768938567,"table_sim":0.548129265267962,"col_score":0.41853072132152114},{"table":"business_units","fused":0.48122465696684574,"table_sim":0.5210598083671529,"col_score":0.4214719298663849},{"table":"project_budgets","fused":0.35352383950802063,"table_sim":0.5892063991800344,"col_score":0},{"table":"opportunity_stages","fused":0.33534972526204576,"table_sim":0.5589162087700763,"col_score":0},{"table":"task_assignments","fused":0.3270192456388235,"table_sim":0.5450320760647058,"col_score":0},{"table":"asset_maintenance","fused":0.31388373793943397,"table_sim":0.52313956323239,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":14,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":29,"total_retrieval_latency_ms":35,"sql_generated":"SELECT COUNT(*) FROM projects WHERE status = 'active';","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":365}
{"timestamp":"2026-01-29T20:43:52.880Z","query_id":"11c564b9-cf0a-49fe-bcf4-5e5771c933a8","question":"List all fixed assets with their purchase cost","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["fixed_assets","asset_maintenance","purchase_orders","asset_transfers","project_budgets","project_expenses","asset_categories","purchase_requisitions","depreciation_schedules","depreciation_entries","asset_locations","maintenance_types"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"fixed_assets","similarity":0.7209497053888301},{"table":"asset_maintenance","similarity":0.6308058404117752},{"table":"asset_categories","similarity":0.5912281177120349},{"table":"depreciation_schedules","similarity":0.5814813777494169},{"table":"asset_transfers","similarity":0.5810308594815269},{"table":"purchase_requisitions","similarity":0.5569747421146416},{"table":"purchase_orders","similarity":0.5506831817049027},{"table":"depreciation_entries","similarity":0.5454814933769311},{"table":"asset_locations","similarity":0.545468446655189},{"table":"requisition_lines","similarity":0.5406198549845527},{"table":"project_expenses","similarity":0.5394520045423311},{"table":"project_budgets","similarity":0.5162048498656928},{"table":"inventory_adjustments","similarity":0.5159531035642008},{"table":"sales_territories","similarity":0.5074635447871859},{"table":"adjustment_lines","similarity":0.5062944760482943}],"column_hits_per_table":{"fixed_assets":17,"asset_maintenance":8,"asset_transfers":2,"purchase_orders":5,"maintenance_types":1,"depreciation_entries":1,"depreciation_schedules":1,"products":2,"purchase_requisitions":2,"asset_categories":1,"project_expenses":2,"project_budgets":2,"sales_orders":2,"product_suppliers":1,"projects":1,"vendor_invoices":1,"budgets":1},"top_columns_per_table":{"fixed_assets":[{"column":"purchase_cost","similarity":0.8423448992143113},{"column":"purchase_date","similarity":0.7689166463133373},{"column":"disposal_amount","similarity":0.7227764959896598}],"asset_maintenance":[{"column":"cost","similarity":0.7099171439402068},{"column":"asset_id","similarity":0.6516176549413301},{"column":"status","similarity":0.6280454782739386}],"asset_transfers":[{"column":"asset_id","similarity":0.6460511870752553},{"column":"reason","similarity":0.5978803089362457}],"purchase_orders":[{"column":"total","similarity":0.6344593910735148},{"column":"shipping_cost","similarity":0.6188978318886464},{"column":"subtotal","similarity":0.6026448016407694}],"maintenance_types":[{"column":"estimated_cost","similarity":0.6142507699404941}],"depreciation_entries":[{"column":"asset_id","similarity":0.609651147848969}],"depreciation_schedules":[{"column":"asset_id","similarity":0.6056651094167285}],"products":[{"column":"unit_cost","similarity":0.6018845518779156},{"column":"list_price","similarity":0.5829432045610968}],"purchase_requisitions":[{"column":"status","similarity":0.6006593595483197},{"column":"notes","similarity":0.580625013783363}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.5981101161213059}],"project_expenses":[{"column":"amount","similarity":0.5845721523119052},{"column":"status","similarity":0.5742178119977871}],"project_budgets":[{"column":"actual_amount","similarity":0.5819665579953361},{"column":"planned_amount","similarity":0.5770144160331034}],"sales_orders":[{"column":"total","similarity":0.5794698766565994},{"column":"shipping_cost","similarity":0.5723923913919466}],"product_suppliers":[{"column":"unit_cost","similarity":0.5781850879817803}],"projects":[{"column":"budget","similarity":0.5753357955995387}],"vendor_invoices":[{"column":"total","similarity":0.5747822939355819}],"budgets":[{"column":"total_amount","similarity":0.5743122120825542}]},"fused_scores":[{"table":"fixed_assets","fused":0.92329111218169,"table_sim":0.7209497053888301,"col_score":1.22680322237098},{"table":"asset_maintenance","fused":0.7860559067350223,"table_sim":0.6308058404117752,"col_score":1.0189310062198929},{"table":"purchase_orders","fused":0.7079732318300769,"table_sim":0.5506831817049027,"col_score":0.943908307017838},{"table":"asset_transfers","fused":0.67821780545395,"table_sim":0.5810308594815269,"col_score":0.823998224412585},{"table":"project_budgets","fused":0.6579124163241709,"table_sim":0.5162048498656928,"col_score":0.8704737660118879},{"table":"project_expenses","fused":0.637890557329851,"table_sim":0.5394520045423311,"col_score":0.7855483865111307},{"table":"asset_categories","fused":0.5939809170757433,"table_sim":0.5912281177120349,"col_score":0.5981101161213059},{"table":"purchase_requisitions","fused":0.5836569678719853,"table_sim":0.5569747421146416,"col_score":0.6236803065080008},{"table":"depreciation_schedules","fused":0.5184750572863341,"table_sim":0.5814813777494169,"col_score":0.4239655765917099},{"table":"depreciation_entries","fused":0.49799121742387,"table_sim":0.5454814933769311,"col_score":0.4267558034942783},{"table":"products","fused":0.3573424616633856,"table_sim":0,"col_score":0.893356154158464},{"table":"sales_orders","fused":0.3462664289410291,"table_sim":0,"col_score":0.8656660723525728},{"table":"asset_locations","fused":0.3272810679931134,"table_sim":0.545468446655189,"col_score":0},{"table":"requisition_lines","fused":0.3243719129907316,"table_sim":0.5406198549845527,"col_score":0},{"table":"inventory_adjustments","fused":0.30957186213852045,"table_sim":0.5159531035642008,"col_score":0}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"projects","reason":"max_tables"},{"table":"requisition_lines","reason":"max_tables"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":29,"total_retrieval_latency_ms":36,"sql_generated":"SELECT fa.asset_id AS asset_id, fa.name AS name, fa.purchase_cost AS purchase_cost FROM fixed_assets fa;","tables_used_in_sql":[],"explain_result":"success","rows_returned":500,"total_latency_ms":714}
{"timestamp":"2026-01-29T20:43:53.594Z","query_id":"8e6b1c7f-9113-42a1-800c-9ecc07e921b1","question":"What are all the available leave types?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["leave_types","leave_requests","maintenance_types","account_types","employment_history","benefit_types","employees","positions","employee_benefits","asset_maintenance","chart_of_accounts","sales_territories"],"tables_from_table_retrieval":15,"tables_from_column_only":9,"tables_from_fk_expansion":2,"table_scores":[{"table":"leave_types","similarity":0.7907961003152969},{"table":"leave_requests","similarity":0.7143778015997992},{"table":"maintenance_types","similarity":0.6481400096068088},{"table":"benefit_types","similarity":0.6269933285396667},{"table":"account_types","similarity":0.6192881819056906},{"table":"positions","similarity":0.5752929625327803},{"table":"employee_benefits","similarity":0.5713679218642078},{"table":"employment_history","similarity":0.5660594097075526},{"table":"employees","similarity":0.5660053394491918},{"table":"asset_maintenance","similarity":0.5543920873977978},{"table":"chart_of_accounts","similarity":0.5502530849823464},{"table":"sales_territories","similarity":0.5497748598255436},{"table":"sales_opportunities","similarity":0.5460540206653771},{"table":"training_courses","similarity":0.5421204605814522},{"table":"asset_categories","similarity":0.537612536880944}],"column_hits_per_table":{"leave_types":5,"leave_requests":10,"maintenance_types":5,"benefit_types":5,"employment_history":2,"account_types":4,"employee_training":1,"asset_maintenance":2,"timesheets":1,"sales_orders":1,"employee_benefits":2,"positions":2,"fixed_assets":1,"employees":2,"vendor_invoices":1,"sales_opportunities":1,"purchase_requisitions":1,"stock_transfers":1,"inventory_adjustments":1,"sales_quotes":1,"sales_territories":1},"top_columns_per_table":{"leave_types":[{"column":"days_allowed","similarity":0.7686500345965878},{"column":"is_paid","similarity":0.7623841534239336},{"column":"name","similarity":0.7406312254921097}],"leave_requests":[{"column":"status","similarity":0.7444703766728187},{"column":"leave_type_id","similarity":0.7158957943298758},{"column":"days_requested","similarity":0.6957721236459536}],"maintenance_types":[{"column":"description","similarity":0.6377767194823566},{"column":"name","similarity":0.631136316452077},{"column":"type_id","similarity":0.6167514426103488}],"benefit_types":[{"column":"is_active","similarity":0.6269473121389368},{"column":"name","similarity":0.6220834198328969},{"column":"description","similarity":0.6122108465746717}],"employment_history":[{"column":"reason_for_leaving","similarity":0.6243515506921076},{"column":"position","similarity":0.5714253900200132}],"account_types":[{"column":"normal_balance","similarity":0.6149563569549518},{"column":"category","similarity":0.6045207339251893},{"column":"name","similarity":0.5905785819022606}],"employee_training":[{"column":"status","similarity":0.6084208038692348}],"asset_maintenance":[{"column":"status","similarity":0.5961072885143408},{"column":"maintenance_type_id","similarity":0.5889166627027309}],"timesheets":[{"column":"status","similarity":0.5896684755702837}],"sales_orders":[{"column":"status","similarity":0.5833814673451871}],"employee_benefits":[{"column":"benefit_type_id","similarity":0.5820988681778586},{"column":"coverage_level","similarity":0.563402375606914}],"positions":[{"column":"is_active","similarity":0.5815402830311333},{"column":"title","similarity":0.5780125325936805}],"fixed_assets":[{"column":"status","similarity":0.5779508245109969}],"employees":[{"column":"termination_date","similarity":0.5720522989676154},{"column":"gender","similarity":0.5661719915149735}],"vendor_invoices":[{"column":"status","similarity":0.5694778387064632}],"sales_opportunities":[{"column":"source","similarity":0.5693960477309942}],"purchase_requisitions":[{"column":"status","similarity":0.5692240149966709}],"stock_transfers":[{"column":"status","similarity":0.5691483787100361}],"inventory_adjustments":[{"column":"status","similarity":0.566032834035236}],"sales_quotes":[{"column":"status","similarity":0.5648321255084394}],"sales_territories":[{"column":"name","similarity":0.5628683783439146}]},"fused_scores":[{"table":"leave_types","fused":0.9271541516976758,"table_sim":0.7907961003152969,"col_score":1.131691228771244},{"table":"leave_requests","fused":0.8425926840869853,"table_sim":0.7143778015997992,"col_score":1.0349150078177645},{"table":"maintenance_types","fused":0.7488967046422195,"table_sim":0.6481400096068088,"col_score":0.9000317471953356},{"table":"account_types","fused":0.738459598710433,"table_sim":0.6192881819056906,"col_score":0.9172167239175464},{"table":"employment_history","fused":0.7036613441053773,"table_sim":0.5660594097075526,"col_score":0.9100642457021142},{"table":"benefit_types","fused":0.6888048802259811,"table_sim":0.6269933285396667,"col_score":0.7815222077554526},{"table":"employees","fused":0.6816585215595561,"table_sim":0.5660053394491918,"col_score":0.8551382947251023},{"table":"positions","fused":0.657796430181499,"table_sim":0.5752929625327803,"col_score":0.7815516316545771},{"table":"employee_benefits","fused":0.6496755449061905,"table_sim":0.5713679218642078,"col_score":0.7671369794691645},{"table":"asset_maintenance","fused":0.5819936260010764,"table_sim":0.5543920873977978,"col_score":0.6233959339059943},{"table":"sales_opportunities","fused":0.5553908314916239,"table_sim":0.5460540206653771,"col_score":0.5693960477309942},{"table":"sales_territories","fused":0.4874680618316223,"table_sim":0.5497748598255436,"col_score":0.3940078648407402},{"table":"chart_of_accounts","fused":0.3301518509894078,"table_sim":0.5502530849823464,"col_score":0},{"table":"training_courses","fused":0.32527227634887135,"table_sim":0.5421204605814522,"col_score":0},{"table":"asset_categories","fused":0.3225675221285664,"table_sim":0.537612536880944,"col_score":0}],"fk_expansion_candidates":32,"fk_expansion_added":2,"fk_expansion_blocked_count":29,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":35,"total_retrieval_latency_ms":41,"sql_generated":"SELECT lt.name FROM leave_types AS lt;","tables_used_in_sql":[],"explain_result":"success","rows_returned":8,"total_latency_ms":426}
{"timestamp":"2026-01-29T20:43:54.020Z","query_id":"ada8096d-a736-48e8-8bc2-35871ae4076a","question":"List all training courses that are mandatory","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["training_courses","employee_training","certifications","employee_certifications","leave_types","maintenance_types","purchase_requisitions","emergency_contacts","units_of_measure","business_units","asset_maintenance","employees"],"tables_from_table_retrieval":15,"tables_from_column_only":12,"tables_from_fk_expansion":2,"table_scores":[{"table":"training_courses","similarity":0.7832587829851695},{"table":"employee_training","similarity":0.6570057454586046},{"table":"certifications","similarity":0.5900939338505992},{"table":"employee_certifications","similarity":0.5760162077924663},{"table":"maintenance_types","similarity":0.49281971341629327},{"table":"leave_types","similarity":0.49016105575765045},{"table":"emergency_contacts","similarity":0.4738555676585048},{"table":"account_types","similarity":0.47279576060367634},{"table":"business_units","similarity":0.47237885502957644},{"table":"units_of_measure","similarity":0.46939263092633876},{"table":"asset_maintenance","similarity":0.4667394047579505},{"table":"purchase_requisitions","similarity":0.4654660756610647},{"table":"employees","similarity":0.4617701057229451},{"table":"positions","similarity":0.46160419508462314},{"table":"countries","similarity":0.46045896330476366}],"column_hits_per_table":{"training_courses":7,"employee_training":7,"certifications":5,"employee_certifications":6,"leave_types":3,"sales_orders":1,"purchase_requisitions":2,"maintenance_types":4,"emergency_contacts":1,"project_milestones":2,"benefit_types":1,"business_units":1,"requisition_lines":1,"product_suppliers":1,"project_resources":1,"project_tasks":1,"reorder_rules":1,"units_of_measure":1,"projects":1,"employee_benefits":1,"inventory_levels":1,"vendor_contacts":1},"top_columns_per_table":{"training_courses":[{"column":"is_mandatory","similarity":0.8183425520777443},{"column":"description","similarity":0.7152546556290251},{"column":"cost","similarity":0.703103057924051}],"employee_training":[{"column":"course_id","similarity":0.6726632190515707},{"column":"scheduled_date","similarity":0.6406033902015907},{"column":"completion_date","similarity":0.6314212095563025}],"certifications":[{"column":"description","similarity":0.6043807811754061},{"column":"issuing_body","similarity":0.5890949692558212},{"column":"validity_years","similarity":0.5683544613271275}],"employee_certifications":[{"column":"certification_id","similarity":0.5641935913194706},{"column":"cert_id","similarity":0.5530637459134944},{"column":"certificate_number","similarity":0.5527992455216449}],"leave_types":[{"column":"requires_approval","similarity":0.5414363431590249},{"column":"is_paid","similarity":0.5069584623421746},{"column":"days_allowed","similarity":0.48500668213425}],"sales_orders":[{"column":"required_date","similarity":0.522537932147881}],"purchase_requisitions":[{"column":"required_date","similarity":0.5198974320372106},{"column":"notes","similarity":0.48367699787532503}],"maintenance_types":[{"column":"description","similarity":0.515090472968373},{"column":"frequency_months","similarity":0.49330482595376823},{"column":"estimated_cost","similarity":0.49293759341419907}],"emergency_contacts":[{"column":"is_primary","similarity":0.5039578758679507}],"project_milestones":[{"column":"is_billable","similarity":0.49776557203974603},{"column":"description","similarity":0.4804638717229941}],"benefit_types":[{"column":"is_active","similarity":0.494470742028722}],"business_units":[{"column":"is_active","similarity":0.4928108442926942}],"requisition_lines":[{"column":"quantity","similarity":0.4922188905326943}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.48865331705843196}],"project_resources":[{"column":"hourly_rate","similarity":0.4852972701989151}],"project_tasks":[{"column":"priority","similarity":0.4836687970545305}],"reorder_rules":[{"column":"max_quantity","similarity":0.4829698043754158}],"units_of_measure":[{"column":"abbreviation","similarity":0.4823545888550096}],"projects":[{"column":"priority","similarity":0.48215945015056816}],"employee_benefits":[{"column":"coverage_level","similarity":0.48183762318937706}],"inventory_levels":[{"column":"quantity_reserved","similarity":0.48177652205374843}],"vendor_contacts":[{"column":"is_primary","similarity":0.4800372811419217}]},"fused_scores":[{"table":"training_courses","fused":0.9379129022070096,"table_sim":0.7832587829851695,"col_score":1.1698940810397698},{"table":"employee_training","fused":0.7767290452670595,"table_sim":0.6570057454586046,"col_score":0.956313994979742},{"table":"certifications","fused":0.7033652402781134,"table_sim":0.5900939338505992,"col_score":0.8732721999193849},{"table":"employee_certifications","fused":0.6746819403171497,"table_sim":0.5760162077924663,"col_score":0.8226805391041746},{"table":"leave_types","fused":0.6076725071450502,"table_sim":0.49016105575765045,"col_score":0.7839396842261499},{"table":"maintenance_types","fused":0.591601277114123,"table_sim":0.49281971341629327,"col_score":0.7397736226608678},{"table":"purchase_requisitions","fused":0.5549533979140686,"table_sim":0.4654660756610647,"col_score":0.6891843812935744},{"table":"emergency_contacts","fused":0.48589649094228315,"table_sim":0.4738555676585048,"col_score":0.5039578758679507},{"table":"units_of_measure","fused":0.47457741409780707,"table_sim":0.46939263092633876,"col_score":0.4823545888550096},{"table":"business_units","fused":0.42141434941970024,"table_sim":0.47237885502957644,"col_score":0.3449675910048859},{"table":"account_types","fused":0.2836774563622058,"table_sim":0.47279576060367634,"col_score":0},{"table":"asset_maintenance","fused":0.2800436428547703,"table_sim":0.4667394047579505,"col_score":0},{"table":"employees","fused":0.27706206343376705,"table_sim":0.4617701057229451,"col_score":0},{"table":"positions","fused":0.27696251705077385,"table_sim":0.46160419508462314,"col_score":0},{"table":"countries","fused":0.2762753779828582,"table_sim":0.46045896330476366,"col_score":0}],"fk_expansion_candidates":7,"fk_expansion_added":2,"fk_expansion_blocked_count":5,"fk_expansion_blocked":[{"table":"departments","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":41,"total_retrieval_latency_ms":47,"sql_generated":"SELECT tc.name AS course_name, tc.duration_hours, tc.cost, tc.is_active FROM training_courses tc WHERE tc.is_mandatory = TRUE;","tables_used_in_sql":[],"explain_result":"success","rows_returned":4,"total_latency_ms":849}
{"timestamp":"2026-01-29T20:43:54.869Z","query_id":"9a927188-4fa8-4b3a-a2ee-ce9f0390206d","question":"What are the different opportunity stages?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["opportunity_stages","sales_opportunities","project_phases","project_tasks","sales_quotes","positions","employment_history","vendor_contacts","task_assignments","benefit_types","projects","timesheet_entries"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"opportunity_stages","similarity":0.8221357699980866},{"table":"sales_opportunities","similarity":0.705452578214936},{"table":"project_phases","similarity":0.5910011427333453},{"table":"project_tasks","similarity":0.5856436723604402},{"table":"positions","similarity":0.5399052196547368},{"table":"asset_categories","similarity":0.5283525308586682},{"table":"benefit_types","similarity":0.5259100173290491},{"table":"project_milestones","similarity":0.5171558130474864},{"table":"inventory_levels","similarity":0.5163777584176084},{"table":"vendor_contacts","similarity":0.5161594726009905},{"table":"task_assignments","similarity":0.5159234125463281},{"table":"sales_quotes","similarity":0.5145326653191699},{"table":"timesheet_entries","similarity":0.5109343321958333},{"table":"employment_history","similarity":0.5109304894618054},{"table":"vendors","similarity":0.509941756909679}],"column_hits_per_table":{"opportunity_stages":6,"sales_opportunities":11,"project_phases":8,"sales_quotes":2,"project_tasks":4,"projects":3,"positions":1,"employment_history":1,"stock_transfers":1,"vendor_invoices":1,"vendor_contacts":1,"sales_orders":1,"performance_reviews":1,"purchase_requisitions":1,"task_assignments":1,"employee_training":1,"timesheets":1,"project_milestones":1,"journal_entries":1,"purchase_orders":1,"benefit_types":1,"warehouse_locations":1},"top_columns_per_table":{"opportunity_stages":[{"column":"name","similarity":0.8022669439071034},{"column":"sequence","similarity":0.7826323931295351},{"column":"probability","similarity":0.7818078987294276}],"sales_opportunities":[{"column":"stage_id","similarity":0.7199852660162092},{"column":"source","similarity":0.6694163213892567},{"column":"name","similarity":0.6490089853551896}],"project_phases":[{"column":"status","similarity":0.6164785012384887},{"column":"start_date","similarity":0.6071014985723452},{"column":"description","similarity":0.599519601414315}],"sales_quotes":[{"column":"opportunity_id","similarity":0.613132018194432},{"column":"status","similarity":0.5429687740505206}],"project_tasks":[{"column":"priority","similarity":0.5861525983204229},{"column":"phase_id","similarity":0.5727236988248975},{"column":"status","similarity":0.5679605460087266}],"projects":[{"column":"priority","similarity":0.5824136089158493},{"column":"status","similarity":0.5614455668233992},{"column":"start_date","similarity":0.5455112148719066}],"positions":[{"column":"title","similarity":0.570845518096384}],"employment_history":[{"column":"position","similarity":0.5638653453378809}],"stock_transfers":[{"column":"status","similarity":0.5612083430408489}],"vendor_invoices":[{"column":"status","similarity":0.5583699388667535}],"vendor_contacts":[{"column":"title","similarity":0.555419734524806}],"sales_orders":[{"column":"status","similarity":0.5534662786155742}],"performance_reviews":[{"column":"review_period_start","similarity":0.5523942655144478}],"purchase_requisitions":[{"column":"status","similarity":0.5523731471352765}],"task_assignments":[{"column":"role","similarity":0.5518232752608079}],"employee_training":[{"column":"status","similarity":0.5505061546622828}],"timesheets":[{"column":"status","similarity":0.5501145087173305}],"project_milestones":[{"column":"name","similarity":0.5480794501954276}],"journal_entries":[{"column":"status","similarity":0.5450907789109756}],"purchase_orders":[{"column":"status","similarity":0.5448321917989046}],"benefit_types":[{"column":"name","similarity":0.5417057889558006}],"warehouse_locations":[{"column":"aisle","similarity":0.541280937948999}]},"fused_scores":[{"table":"opportunity_stages","fused":0.9626959989965516,"table_sim":0.8221357699980866,"col_score":1.1735363424942489},{"table":"sales_opportunities","fused":0.8201333553810458,"table_sim":0.705452578214936,"col_score":0.9921545211302105},{"table":"project_phases","fused":0.7145727552551784,"table_sim":0.5910011427333453,"col_score":0.899930174037928},{"table":"project_tasks","fused":0.6963386277407597,"table_sim":0.5856436723604402,"col_score":0.8623810608112388},{"table":"sales_quotes","fused":0.5564121926530157,"table_sim":0.5145326653191699,"col_score":0.6192314836537846},{"table":"positions","fused":0.5522813390313956,"table_sim":0.5399052196547368,"col_score":0.570845518096384},{"table":"employment_history","fused":0.5321044318122357,"table_sim":0.5109304894618054,"col_score":0.5638653453378809},{"table":"vendor_contacts","fused":0.5318635773705167,"table_sim":0.5161594726009905,"col_score":0.555419734524806},{"table":"task_assignments","fused":0.53028335763212,"table_sim":0.5159234125463281,"col_score":0.5518232752608079},{"table":"benefit_types","fused":0.46722363130505357,"table_sim":0.5259100173290491,"col_score":0.3791940522690604},{"table":"project_milestones","fused":0.46375573388321156,"table_sim":0.5171558130474864,"col_score":0.3836556151367993},{"table":"projects","fused":0.34206768654072106,"table_sim":0,"col_score":0.8551692163518025},{"table":"asset_categories","fused":0.3170115185152009,"table_sim":0.5283525308586682,"col_score":0},{"table":"inventory_levels","fused":0.309826655050565,"table_sim":0.5163777584176084,"col_score":0},{"table":"timesheet_entries","fused":0.30656059931749996,"table_sim":0.5109343321958333,"col_score":0}],"fk_expansion_candidates":9,"fk_expansion_added":2,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"vendors","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":36,"total_retrieval_latency_ms":42,"sql_generated":"SELECT o.name AS stage_name FROM sales_opportunities s JOIN opportunity_stages o ON s.stage_id = o.stage_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":500,"total_latency_ms":683}
{"timestamp":"2026-01-29T20:43:55.552Z","query_id":"d22dda33-5b52-45c7-9e54-a19fafc3d419","question":"List all countries in the system","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["countries","states_provinces","currencies","tax_rates","sales_regions","fiscal_periods","certifications","cities","opportunity_stages","bank_accounts","bank_transactions","chart_of_accounts"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"countries","similarity":0.7008865097920517},{"table":"states_provinces","similarity":0.6734638308582259},{"table":"tax_rates","similarity":0.6116670532927957},{"table":"sales_territories","similarity":0.5947794602061558},{"table":"currencies","similarity":0.5771716778997639},{"table":"sales_regions","similarity":0.5687569498363646},{"table":"cities","similarity":0.5643183199830137},{"table":"bank_accounts","similarity":0.5493286779600007},{"table":"customers","similarity":0.5473386397932745},{"table":"fiscal_periods","similarity":0.5354796670765565},{"table":"budgets","similarity":0.5305192103519173},{"table":"units_of_measure","similarity":0.530053961527814},{"table":"chart_of_accounts","similarity":0.5269687220084575},{"table":"certifications","similarity":0.5251628602461479},{"table":"opportunity_stages","similarity":0.516133383734989}],"column_hits_per_table":{"countries":4,"states_provinces":4,"tax_rates":3,"currencies":5,"sales_regions":4,"sales_territories":3,"cities":2,"departments":2,"fiscal_periods":4,"bank_accounts":2,"certifications":2,"opportunity_stages":3,"customers":1,"bank_transactions":2,"purchase_orders":1,"employee_certifications":1,"depreciation_schedules":1,"purchase_requisitions":1,"budgets":2,"sales_orders":1,"chart_of_accounts":1,"units_of_measure":1},"top_columns_per_table":{"countries":[{"column":"iso_code","similarity":0.7094552565742085},{"column":"country_id","similarity":0.7034508481088982},{"column":"phone_code","similarity":0.6971526730933061}],"states_provinces":[{"column":"country_id","similarity":0.6585897097894581},{"column":"abbreviation","similarity":0.6227531297693802},{"column":"state_id","similarity":0.615041526003746}],"tax_rates":[{"column":"country_id","similarity":0.6476800041509223},{"column":"tax_type","similarity":0.5346619654310693},{"column":"is_active","similarity":0.5310671397615585}],"currencies":[{"column":"symbol","similarity":0.6017932772414536},{"column":"code","similarity":0.5922775211340294},{"column":"exchange_rate","similarity":0.5871891787003841}],"sales_regions":[{"column":"region_id","similarity":0.5979708903249663},{"column":"target_revenue","similarity":0.5885873954148771},{"column":"name","similarity":0.5800101337735474}],"sales_territories":[{"column":"region_id","similarity":0.5886237086003984},{"column":"territory_id","similarity":0.5882437418814783},{"column":"name","similarity":0.5535958855949109}],"cities":[{"column":"state_id","similarity":0.5632563689816771},{"column":"postal_code","similarity":0.5457995889050259}],"departments":[{"column":"budget","similarity":0.5599421293881339},{"column":"department_id","similarity":0.5287387143275804}],"fiscal_periods":[{"column":"period_id","similarity":0.5574490774711056},{"column":"period_number","similarity":0.5426208530973385},{"column":"is_closed","similarity":0.5359946713020163}],"bank_accounts":[{"column":"currency_id","similarity":0.5528259934931027},{"column":"account_number","similarity":0.527840068757793}],"certifications":[{"column":"issuing_body","similarity":0.5492583443931628},{"column":"validity_years","similarity":0.5292809185879692}],"opportunity_stages":[{"column":"is_won","similarity":0.5445577792640248},{"column":"stage_id","similarity":0.5312529758785186},{"column":"is_closed","similarity":0.5279107666014274}],"customers":[{"column":"currency_id","similarity":0.5418522210198313}],"bank_transactions":[{"column":"reconciled","similarity":0.5412872186561721},{"column":"reference","similarity":0.5335321048989391}],"purchase_orders":[{"column":"total","similarity":0.5378236017835311}],"employee_certifications":[{"column":"certificate_number","similarity":0.5358775279065638}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5330783009686003}],"purchase_requisitions":[{"column":"requisition_number","similarity":0.5326439676865584}],"budgets":[{"column":"total_amount","similarity":0.5320906832758429},{"column":"status","similarity":0.5283826109384306}],"sales_orders":[{"column":"total","similarity":0.5319665810732878}],"chart_of_accounts":[{"column":"account_number","similarity":0.5295972929492838}],"units_of_measure":[{"column":"abbreviation","similarity":0.5291537257765798}]},"fused_scores":[{"table":"countries","fused":0.8437445431235756,"table_sim":0.7008865097920517,"col_score":1.0580315931208615},{"table":"states_provinces","fused":0.7453821097932118,"table_sim":0.6734638308582259,"col_score":0.8532595281956905},{"table":"currencies","fused":0.7054758218632456,"table_sim":0.5771716778997639,"col_score":0.8979320378084683},{"table":"tax_rates","fused":0.6715402187292342,"table_sim":0.6116670532927957,"col_score":0.761349966883892},{"table":"sales_regions","fused":0.6604050527132649,"table_sim":0.5687569498363646,"col_score":0.7978772070286153},{"table":"fiscal_periods","fused":0.6455350757452726,"table_sim":0.5354796670765565,"col_score":0.8106181887483467},{"table":"certifications","fused":0.6406572376225477,"table_sim":0.5251628602461479,"col_score":0.8138988036871474},{"table":"cities","fused":0.6357667192092533,"table_sim":0.5643183199830137,"col_score":0.7429393180486128},{"table":"opportunity_stages","fused":0.6330852952668888,"table_sim":0.516133383734989,"col_score":0.8085131625647386},{"table":"bank_accounts","fused":0.618128873368152,"table_sim":0.5493286779600007,"col_score":0.7213291664803789},{"table":"budgets","fused":0.6051213650528678,"table_sim":0.5305192103519173,"col_score":0.7170245971042936},{"table":"sales_territories","fused":0.6040364383952119,"table_sim":0.5947794602061558,"col_score":0.6179219056787962},{"table":"units_of_measure","fused":0.5296938672273204,"table_sim":0.530053961527814,"col_score":0.5291537257765798},{"table":"chart_of_accounts","fused":0.528020150384788,"table_sim":0.5269687220084575,"col_score":0.5295972929492838},{"table":"customers","fused":0.4801218057615174,"table_sim":0.5473386397932745,"col_score":0.3792965547138819}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":8,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"customers","reason":"max_tables"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"max_tables"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_territories","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":56,"total_retrieval_latency_ms":62,"sql_generated":"SELECT c.name AS country_name FROM countries c;","tables_used_in_sql":[],"explain_result":"success","rows_returned":10,"total_latency_ms":380}
{"timestamp":"2026-01-29T20:43:55.932Z","query_id":"ef7cb19e-d530-4ebd-af3a-9f6d4af1a8c0","question":"How many departments are there?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["departments","inventory_levels","warehouse_locations","employees","asset_categories","states_provinces","sales_territories","business_units","sales_regions","goods_receipts","cost_centers","budgets"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"departments","similarity":0.6407681888721862},{"table":"positions","similarity":0.5909863911053447},{"table":"cost_centers","similarity":0.574249226454042},{"table":"inventory_levels","similarity":0.5635818909554858},{"table":"budgets","similarity":0.5602507290061229},{"table":"sales_territories","similarity":0.5569437466660422},{"table":"employees","similarity":0.5540635075766074},{"table":"asset_categories","similarity":0.5524861703308546},{"table":"sales_regions","similarity":0.5484119711938432},{"table":"business_units","similarity":0.5474055608256236},{"table":"warehouse_locations","similarity":0.5405733104094866},{"table":"warehouses","similarity":0.5397302827647444},{"table":"receipt_lines","similarity":0.5366200658119428},{"table":"states_provinces","similarity":0.5358430398633552},{"table":"goods_receipts","similarity":0.5302924907564094}],"column_hits_per_table":{"departments":6,"positions":1,"budgets":1,"purchase_requisitions":1,"cost_centers":1,"employees":3,"warehouse_locations":5,"inventory_levels":5,"business_units":2,"sales_orders":1,"countries":2,"receipt_lines":1,"sales_territories":2,"states_provinces":2,"asset_categories":4,"employee_certifications":1,"goods_receipts":1,"inventory_transactions":1,"product_categories":2,"asset_locations":1,"sales_regions":2,"journal_entries":1,"warehouses":1,"chart_of_accounts":1,"account_types":1,"fixed_assets":1},"top_columns_per_table":{"departments":[{"column":"name","similarity":0.6941972522780406},{"column":"department_id","similarity":0.6602069080482118},{"column":"budget","similarity":0.6469841378823648}],"positions":[{"column":"department_id","similarity":0.6231663015950821}],"budgets":[{"column":"department_id","similarity":0.593281818376156}],"purchase_requisitions":[{"column":"department_id","similarity":0.5925097694857517}],"cost_centers":[{"column":"department_id","similarity":0.5899520016540825}],"employees":[{"column":"department_id","similarity":0.5869672961244217},{"column":"employee_number","similarity":0.5336637347597826},{"column":"phone","similarity":0.5302169880417581}],"warehouse_locations":[{"column":"capacity","similarity":0.5585006436523671},{"column":"aisle","similarity":0.5402403475702542},{"column":"bin","similarity":0.5395965062528575}],"inventory_levels":[{"column":"quantity_available","similarity":0.5536773605505522},{"column":"location_id","similarity":0.5478183684084642},{"column":"warehouse_id","similarity":0.5386657375761456}],"business_units":[{"column":"is_active","similarity":0.5483697953425726},{"column":"name","similarity":0.5312957563157671}],"sales_orders":[{"column":"order_number","similarity":0.5443598297457732}],"countries":[{"column":"name","similarity":0.5423505833277624},{"column":"iso_code","similarity":0.5306770884511268}],"receipt_lines":[{"column":"location_id","similarity":0.541901303657067}],"sales_territories":[{"column":"territory_id","similarity":0.5409487686207964},{"column":"name","similarity":0.5343562590819858}],"states_provinces":[{"column":"abbreviation","similarity":0.5407121012597066},{"column":"name","similarity":0.531882867182094}],"asset_categories":[{"column":"category_id","similarity":0.5392003897260558},{"column":"depreciation_method","similarity":0.5319818505729739},{"column":"name","similarity":0.5291238140761095}],"employee_certifications":[{"column":"certificate_number","similarity":0.5373080593402337}],"goods_receipts":[{"column":"receipt_number","similarity":0.5364792634452933}],"inventory_transactions":[{"column":"location_id","similarity":0.5361046916920993}],"product_categories":[{"column":"is_active","similarity":0.5347372390015604},{"column":"category_id","similarity":0.5276640423111497}],"asset_locations":[{"column":"room","similarity":0.5344524415418452}],"sales_regions":[{"column":"manager_id","similarity":0.5307027431815718},{"column":"name","similarity":0.5263871057906565}],"journal_entries":[{"column":"entry_number","similarity":0.5287182520724618}],"warehouses":[{"column":"is_active","similarity":0.5286972556869094}],"chart_of_accounts":[{"column":"account_number","similarity":0.5279529362943834}],"account_types":[{"column":"category","similarity":0.526499449669073}],"fixed_assets":[{"column":"category_id","similarity":0.5261865346648418}]},"fused_scores":[{"table":"departments","fused":0.7404421837951833,"table_sim":0.6407681888721862,"col_score":0.889953176179679},{"table":"inventory_levels","fused":0.6669469201400264,"table_sim":0.5635818909554858,"col_score":0.8219944639168373},{"table":"warehouse_locations","fused":0.6557923132206898,"table_sim":0.5405733104094866,"col_score":0.8286208174374942},{"table":"employees","fused":0.651946996058229,"table_sim":0.5540635075766074,"col_score":0.7987722287806616},{"table":"asset_categories","fused":0.6495296324944673,"table_sim":0.5524861703308546,"col_score":0.7950948257398862},{"table":"states_provinces","fused":0.612254265827389,"table_sim":0.5358430398633552,"col_score":0.7268711047734395},{"table":"sales_territories","fused":0.5604417794849264,"table_sim":0.5569437466660422,"col_score":0.5656888287132525},{"table":"business_units","fused":0.5563682850755018,"table_sim":0.5474055608256236,"col_score":0.5698123714503193},{"table":"sales_regions","fused":0.5513381456178379,"table_sim":0.5484119711938432,"col_score":0.5557274072538301},{"table":"goods_receipts","fused":0.532767199831963,"table_sim":0.5302924907564094,"col_score":0.5364792634452933},{"table":"positions","fused":0.5290783991098298,"table_sim":0.5909863911053447,"col_score":0.43621641111655746},{"table":"cost_centers","fused":0.5097360963355683,"table_sim":0.574249226454042,"col_score":0.4129664011578577},{"table":"budgets","fused":0.5022693465489974,"table_sim":0.5602507290061229,"col_score":0.4152972728633092},{"table":"receipt_lines","fused":0.4737044045111444,"table_sim":0.5366200658119428,"col_score":0.3793309125599469},{"table":"warehouses","fused":0.47187340125118127,"table_sim":0.5397302827647444,"col_score":0.37008807898083657}],"fk_expansion_candidates":36,"fk_expansion_added":2,"fk_expansion_blocked_count":28,"fk_expansion_blocked":[{"table":"employment_history","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"warehouses","reason":"max_tables"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"countries","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"max_tables"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"cities","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"receipt_lines","reason":"max_tables"},{"table":"products","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":24,"total_retrieval_latency_ms":29,"sql_generated":"SELECT COUNT(*) FROM departments;","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":344}
{"timestamp":"2026-01-29T20:43:56.277Z","query_id":"baa5702b-0fb2-454b-b8bb-d145dcdcf2f5","question":"List all units of measure","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["units_of_measure","products","requisition_lines","currencies","sales_orders","adjustment_lines","business_units","sales_regions","asset_categories","states_provinces","countries","inventory_adjustments"],"tables_from_table_retrieval":15,"tables_from_column_only":13,"tables_from_fk_expansion":2,"table_scores":[{"table":"units_of_measure","similarity":0.8089934324181249},{"table":"products","similarity":0.6263866411837252},{"table":"business_units","similarity":0.6082946070315649},{"table":"currencies","similarity":0.5785280842826401},{"table":"sales_regions","similarity":0.5709271404332362},{"table":"sales_territories","similarity":0.5693966691739235},{"table":"countries","similarity":0.5676275319870521},{"table":"asset_categories","similarity":0.5659467183764512},{"table":"states_provinces","similarity":0.5592331745887797},{"table":"requisition_lines","similarity":0.5583095777203371},{"table":"certifications","similarity":0.5559645378048772},{"table":"tax_rates","similarity":0.5510295392649189},{"table":"adjustment_lines","similarity":0.5399153135407744},{"table":"sales_orders","similarity":0.5334992405089671},{"table":"inventory_adjustments","similarity":0.5331747868814581}],"column_hits_per_table":{"units_of_measure":5,"products":3,"business_units":5,"requisition_lines":3,"purchase_orders":3,"sales_orders":3,"currencies":3,"product_suppliers":1,"departments":1,"vendor_invoice_lines":1,"sales_regions":1,"inventory_transactions":1,"order_lines":3,"po_lines":1,"quote_lines":3,"adjustment_lines":3,"inventory_levels":3,"asset_categories":1,"tax_rates":1,"budgets":1,"sales_quotes":1,"transfer_lines":1,"project_milestones":1,"states_provinces":1},"top_columns_per_table":{"units_of_measure":[{"column":"abbreviation","similarity":0.7908596870464625},{"column":"conversion_factor","similarity":0.7888286633130566},{"column":"base_uom_id","similarity":0.7640196738182461}],"products":[{"column":"uom_id","similarity":0.7066301376353167},{"column":"unit_cost","similarity":0.645047938032986},{"column":"weight","similarity":0.5991041081015385}],"business_units":[{"column":"unit_id","similarity":0.641535708551069},{"column":"name","similarity":0.619264219383008},{"column":"parent_unit_id","similarity":0.6183248611809289}],"requisition_lines":[{"column":"estimated_unit_cost","similarity":0.6408702119064383},{"column":"quantity","similarity":0.60563150403585},{"column":"estimated_total","similarity":0.6022013259478313}],"purchase_orders":[{"column":"total","similarity":0.6185750233926293},{"column":"tax_amount","similarity":0.6044881564028687},{"column":"subtotal","similarity":0.5921825679677115}],"sales_orders":[{"column":"total","similarity":0.6151081698617773},{"column":"tax_amount","similarity":0.5989576895110381},{"column":"subtotal","similarity":0.5899469028603763}],"currencies":[{"column":"exchange_rate","similarity":0.6121012209509241},{"column":"code","similarity":0.5831850755185266},{"column":"symbol","similarity":0.5817000993637726}],"product_suppliers":[{"column":"unit_cost","similarity":0.6086576309378499}],"departments":[{"column":"budget","similarity":0.6073768063072543}],"vendor_invoice_lines":[{"column":"unit_cost","similarity":0.6069149029756971}],"sales_regions":[{"column":"target_revenue","similarity":0.6030903855357957}],"inventory_transactions":[{"column":"quantity","similarity":0.6014447625236534}],"order_lines":[{"column":"unit_price","similarity":0.6010852874698508},{"column":"line_total","similarity":0.5898125509820846},{"column":"quantity","similarity":0.5808820575005385}],"po_lines":[{"column":"unit_cost","similarity":0.5994543665297027}],"quote_lines":[{"column":"unit_price","similarity":0.5969998512857845},{"column":"quantity","similarity":0.5845299298536462},{"column":"line_total","similarity":0.5817307536871642}],"adjustment_lines":[{"column":"quantity_before","similarity":0.59599905061019},{"column":"quantity_change","similarity":0.5898155994713205},{"column":"quantity_after","similarity":0.5894162707009223}],"inventory_levels":[{"column":"quantity_available","similarity":0.5953692846871987},{"column":"quantity_reserved","similarity":0.5953692437147827},{"column":"quantity_on_hand","similarity":0.5833133095093345}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.5917112785912468}],"tax_rates":[{"column":"rate","similarity":0.5877911896124333}],"budgets":[{"column":"total_amount","similarity":0.5860142614107526}],"sales_quotes":[{"column":"total","similarity":0.5855133877859668}],"transfer_lines":[{"column":"quantity_transferred","similarity":0.5854636892263618}],"project_milestones":[{"column":"amount","similarity":0.5846729861578354}],"states_provinces":[{"column":"abbreviation","similarity":0.5831025103571312}]},"fused_scores":[{"table":"units_of_measure","fused":0.9595056669320713,"table_sim":0.8089934324181249,"col_score":1.1852740187029909},{"table":"products","fused":0.7536719815437372,"table_sim":0.6263866411837252,"col_score":0.9445999920837552},{"table":"requisition_lines","fused":0.7124601322019475,"table_sim":0.5583095777203371,"col_score":0.9436859639243633},{"table":"currencies","fused":0.708594354053659,"table_sim":0.5785280842826401,"col_score":0.9036937587101874},{"table":"sales_orders","fused":0.6859343501522988,"table_sim":0.5334992405089671,"col_score":0.9145870146172963},{"table":"adjustment_lines","fused":0.6803119282628047,"table_sim":0.5399153135407744,"col_score":0.8909068503458502},{"table":"business_units","fused":0.6313037533268594,"table_sim":0.6082946070315649,"col_score":0.6658174727698011},{"table":"sales_regions","fused":0.5837924384742601,"table_sim":0.5709271404332362,"col_score":0.6030903855357957},{"table":"asset_categories","fused":0.5762525424623695,"table_sim":0.5659467183764512,"col_score":0.5917112785912468},{"table":"states_provinces","fused":0.5687809088961203,"table_sim":0.5592331745887797,"col_score":0.5831025103571312},{"table":"tax_rates","fused":0.5657341994039247,"table_sim":0.5510295392649189,"col_score":0.5877911896124333},{"table":"purchase_orders","fused":0.36832764063762546,"table_sim":0,"col_score":0.9208191015940637},{"table":"order_lines","fused":0.3583966251843573,"table_sim":0,"col_score":0.8959915629608931},{"table":"inventory_levels","fused":0.3572215626178361,"table_sim":0,"col_score":0.8930539065445902},{"table":"quote_lines","fused":0.35570592648504307,"table_sim":0,"col_score":0.8892648162126076}],"fk_expansion_candidates":23,"fk_expansion_added":2,"fk_expansion_blocked_count":16,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"bank_accounts","reason":"no_evidence"},{"table":"cities","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"inventory_levels","reason":"max_tables"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"order_lines","reason":"max_tables"},{"table":"po_lines","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"product_suppliers","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"quote_lines","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_territories","reason":"max_tables"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":55,"total_retrieval_latency_ms":60,"sql_generated":"SELECT uom.name AS unit_of_measure_name FROM units_of_measure uom;","tables_used_in_sql":[],"explain_result":"success","rows_returned":11,"total_latency_ms":499}
{"timestamp":"2026-01-29T20:43:56.775Z","query_id":"21ba9041-e70c-45b9-b9a0-745f070959cf","question":"What fiscal years exist in the system?","attempt_count":2,"retry_succeeded":true,"execution_success":true,"retriever_version":"V2","tables_retrieved":["fiscal_years","fiscal_periods","budgets","depreciation_schedules","depreciation_entries","budget_lines","project_budgets","project_expenses","departments","project_milestones","journal_entries","projects"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"fiscal_years","similarity":0.7923960498118316},{"table":"fiscal_periods","similarity":0.7616670856526071},{"table":"budgets","similarity":0.6911637589323553},{"table":"journal_entries","similarity":0.6269724979465695},{"table":"budget_lines","similarity":0.6218203134963756},{"table":"depreciation_entries","similarity":0.6167782937248956},{"table":"depreciation_schedules","similarity":0.5985836737050324},{"table":"tax_rates","similarity":0.5716127675571235},{"table":"project_budgets","similarity":0.5656182034505703},{"table":"departments","similarity":0.5523947282192829},{"table":"opportunity_stages","similarity":0.5504537485994739},{"table":"sales_regions","similarity":0.5448968436545046},{"table":"project_expenses","similarity":0.5436618291443818},{"table":"project_milestones","similarity":0.5414688649545092},{"table":"timesheet_entries","similarity":0.5409769768138163}],"column_hits_per_table":{"fiscal_years":5,"fiscal_periods":7,"budgets":7,"budget_lines":3,"depreciation_entries":3,"journal_entries":1,"depreciation_schedules":7,"departments":1,"project_expenses":2,"project_budgets":5,"tax_rates":1,"goods_receipts":1,"projects":1,"project_milestones":1,"timesheet_entries":1,"certifications":1,"performance_reviews":1,"asset_categories":1,"opportunity_stages":1},"top_columns_per_table":{"fiscal_years":[{"column":"year","similarity":0.79289185497887},{"column":"start_date","similarity":0.7915481870907012},{"column":"is_closed","similarity":0.7687751840462032}],"fiscal_periods":[{"column":"start_date","similarity":0.7659921609127918},{"column":"period_number","similarity":0.7503599279176923},{"column":"fiscal_year_id","similarity":0.7427677986256532}],"budgets":[{"column":"fiscal_year_id","similarity":0.7119377164190824},{"column":"status","similarity":0.6301145472980343},{"column":"total_amount","similarity":0.6173246359192148}],"budget_lines":[{"column":"period_id","similarity":0.6801393090386698},{"column":"amount","similarity":0.5964392433040447},{"column":"budget_id","similarity":0.5771887798868078}],"depreciation_entries":[{"column":"period_id","similarity":0.6644590594465214},{"column":"entry_date","similarity":0.6182044744233723},{"column":"accumulated_depreciation","similarity":0.591719344216716}],"journal_entries":[{"column":"period_id","similarity":0.6584803744495903}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.6374273471660927},{"column":"start_date","similarity":0.6327992496100886},{"column":"useful_life_months","similarity":0.6309634564637141}],"departments":[{"column":"budget","similarity":0.6251109583075001}],"project_expenses":[{"column":"expense_date","similarity":0.6152948115721372},{"column":"is_billable","similarity":0.6022943783818646}],"project_budgets":[{"column":"category","similarity":0.6108356164669405},{"column":"actual_amount","similarity":0.604739033656996},{"column":"planned_amount","similarity":0.5906958847025185}],"tax_rates":[{"column":"is_active","similarity":0.6102719456894563}],"goods_receipts":[{"column":"receipt_date","similarity":0.6033126792490972}],"projects":[{"column":"budget","similarity":0.5988151518250451}],"project_milestones":[{"column":"is_billable","similarity":0.5985840177634407}],"timesheet_entries":[{"column":"is_billable","similarity":0.5976425797634352}],"certifications":[{"column":"validity_years","similarity":0.5951280377775735}],"performance_reviews":[{"column":"review_period_start","similarity":0.5797933929886745}],"asset_categories":[{"column":"useful_life_years","similarity":0.5756856657958654}],"opportunity_stages":[{"column":"is_closed","similarity":0.5741087121255803}]},"fused_scores":[{"table":"fiscal_years","fused":0.9509040092967873,"table_sim":0.7923960498118316,"col_score":1.1886659485242206},{"table":"fiscal_periods","fused":0.9134691013402194,"table_sim":0.7616670856526071,"col_score":1.141172124871638},{"table":"budgets","fused":0.7612993900257706,"table_sim":0.6911637589323553,"col_score":0.8665028366658937},{"table":"depreciation_schedules","fused":0.7406809930114742,"table_sim":0.5985836737050324,"col_score":0.953826971971137},{"table":"depreciation_entries","fused":0.7356926348476295,"table_sim":0.6167782937248956,"col_score":0.9140641465317303},{"table":"budget_lines","fused":0.706887388684857,"table_sim":0.6218203134963756,"col_score":0.8344880014675792},{"table":"project_budgets","fused":0.7046529753885176,"table_sim":0.5656182034505703,"col_score":0.9132051332954385},{"table":"project_expenses","fused":0.6927738977918569,"table_sim":0.5436618291443818,"col_score":0.9164420007630695},{"table":"departments","fused":0.5814812202545698,"table_sim":0.5523947282192829,"col_score":0.6251109583075001},{"table":"project_milestones","fused":0.5643149260780818,"table_sim":0.5414688649545092,"col_score":0.5985840177634407},{"table":"timesheet_entries","fused":0.5636432179936639,"table_sim":0.5409769768138163,"col_score":0.5976425797634352},{"table":"journal_entries","fused":0.560558003613827,"table_sim":0.6269724979465695,"col_score":0.46093626211471317},{"table":"opportunity_stages","fused":0.5599157340099165,"table_sim":0.5504537485994739,"col_score":0.5741087121255803},{"table":"tax_rates","fused":0.5138438053273219,"table_sim":0.5716127675571235,"col_score":0.4271903619826194},{"table":"sales_regions","fused":0.32693810619270275,"table_sim":0.5448968436545046,"col_score":0}],"fk_expansion_candidates":8,"fk_expansion_added":2,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":28,"total_retrieval_latency_ms":34,"sql_generated":"SELECT DISTINCT fiscal_years.fiscal_year_id FROM fiscal_years LIMIT 1000;","tables_used_in_sql":[],"explain_result":"success","sqlstate":"42703","error_message":"column fiscal_years.fiscal_year does not exist","autocorrect_attempted":true,"autocorrect_success":true,"autocorrect_candidates":4,"autocorrect_failure_reason":"Best candidate 'fiscal_years.fiscal_year_id' has score 0.70 < threshold 0.75","autocorrect_correction":"Replaced 'fiscal_year' with 'fiscal_year_id' (prefix, score: 0.85)","rows_returned":4,"total_latency_ms":877}
{"timestamp":"2026-01-29T20:43:57.652Z","query_id":"610039d5-4e46-4b9c-9e58-8d1938296565","question":"What are the different asset categories?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["asset_categories","fixed_assets","asset_locations","account_types","asset_transfers","asset_maintenance","benefit_types","product_categories","depreciation_entries","products","chart_of_accounts","depreciation_schedules"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"asset_categories","similarity":0.8168827711422647},{"table":"fixed_assets","similarity":0.6620037919617541},{"table":"asset_locations","similarity":0.6390829860060242},{"table":"account_types","similarity":0.6334397842726383},{"table":"product_categories","similarity":0.622177487707741},{"table":"asset_maintenance","similarity":0.621270551657517},{"table":"benefit_types","similarity":0.5903668937249158},{"table":"asset_transfers","similarity":0.5862689042988987},{"table":"depreciation_entries","similarity":0.5805433634197894},{"table":"products","similarity":0.5538274728539676},{"table":"depreciation_schedules","similarity":0.552160929389354},{"table":"chart_of_accounts","similarity":0.5427108945847197},{"table":"bank_accounts","similarity":0.5321134297281863},{"table":"countries","similarity":0.5281213098174355},{"table":"maintenance_types","similarity":0.5272099691279456}],"column_hits_per_table":{"asset_categories":5,"fixed_assets":9,"account_types":4,"asset_locations":6,"product_categories":5,"asset_transfers":6,"asset_maintenance":6,"project_budgets":1,"project_expenses":1,"depreciation_entries":1,"benefit_types":4,"products":1,"inventory_transactions":1},"top_columns_per_table":{"asset_categories":[{"column":"name","similarity":0.7875780707525062},{"column":"depreciation_method","similarity":0.7603448714847105},{"column":"category_id","similarity":0.758482100045761}],"fixed_assets":[{"column":"category_id","similarity":0.7014273982200495},{"column":"asset_tag","similarity":0.6626698663454819},{"column":"asset_id","similarity":0.6413881206539997}],"account_types":[{"column":"category","similarity":0.6881378304861365},{"column":"name","similarity":0.5992168172839945},{"column":"normal_balance","similarity":0.5947116865094776}],"asset_locations":[{"column":"building","similarity":0.6559618510281601},{"column":"description","similarity":0.6470926594735155},{"column":"floor","similarity":0.6470899039825275}],"product_categories":[{"column":"name","similarity":0.652576873610378},{"column":"description","similarity":0.6503788706671084},{"column":"category_id","similarity":0.6420597581466748}],"asset_transfers":[{"column":"reason","similarity":0.6473230015974661},{"column":"asset_id","similarity":0.6282032799433002},{"column":"transfer_id","similarity":0.6154246196195988}],"asset_maintenance":[{"column":"status","similarity":0.6334546005541394},{"column":"asset_id","similarity":0.6105732245848465},{"column":"maintenance_type_id","similarity":0.6070052571550042}],"project_budgets":[{"column":"category","similarity":0.6288554954539255}],"project_expenses":[{"column":"category","similarity":0.626992700689606}],"depreciation_entries":[{"column":"asset_id","similarity":0.6187898293393472}],"benefit_types":[{"column":"name","similarity":0.5974204688811928},{"column":"is_active","similarity":0.5896744133334022},{"column":"description","similarity":0.5883422456276791}],"products":[{"column":"category_id","similarity":0.5858403992443696}],"inventory_transactions":[{"column":"transaction_type","similarity":0.5816690816812632}]},"fused_scores":[{"table":"asset_categories","fused":0.9416071891617808,"table_sim":0.8168827711422647,"col_score":1.1286938161910547},{"table":"fixed_assets","fused":0.7846998038830493,"table_sim":0.6620037919617541,"col_score":0.9687438217649922},{"table":"asset_locations","fused":0.7752525128113841,"table_sim":0.6390829860060242,"col_score":0.9795068030194238},{"table":"account_types","fused":0.7742613400599331,"table_sim":0.6334397842726383,"col_score":0.9854936737408753},{"table":"asset_transfers","fused":0.7270812848332002,"table_sim":0.5862689042988987,"col_score":0.9382998556346527},{"table":"asset_maintenance","fused":0.6976709678451112,"table_sim":0.621270551657517,"col_score":0.8122715921265024},{"table":"benefit_types","fused":0.6707121036646139,"table_sim":0.5903668937249158,"col_score":0.7912299185741609},{"table":"product_categories","fused":0.6470810591289455,"table_sim":0.622177487707741,"col_score":0.6844364162607525},{"table":"depreciation_entries","fused":0.5215871702668908,"table_sim":0.5805433634197894,"col_score":0.43315288053754303},{"table":"products","fused":0.4963317955008041,"table_sim":0.5538274728539676,"col_score":0.4100882794710587},{"table":"depreciation_schedules","fused":0.3312965576336124,"table_sim":0.552160929389354,"col_score":0},{"table":"chart_of_accounts","fused":0.3256265367508318,"table_sim":0.5427108945847197,"col_score":0},{"table":"bank_accounts","fused":0.31926805783691176,"table_sim":0.5321134297281863,"col_score":0},{"table":"countries","fused":0.3168727858904613,"table_sim":0.5281213098174355,"col_score":0},{"table":"maintenance_types","fused":0.3163259814767673,"table_sim":0.5272099691279456,"col_score":0}],"fk_expansion_candidates":21,"fk_expansion_added":2,"fk_expansion_blocked_count":17,"fk_expansion_blocked":[{"table":"adjustment_lines","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"inventory_transactions","reason":"max_tables"},{"table":"journal_entries","reason":"no_evidence"},{"table":"maintenance_types","reason":"max_tables"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"product_suppliers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":28,"total_retrieval_latency_ms":33,"sql_generated":"SELECT DISTINCT ac.name AS AssetCategory FROM asset_categories ac;","tables_used_in_sql":[],"explain_result":"success","rows_returned":7,"total_latency_ms":477}
{"timestamp":"2026-01-29T20:43:58.130Z","query_id":"e09aa113-51ec-41f5-9008-9e911e56615c","question":"Find employees who have been with the company for more than 5 years and earn above $100,000","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_salaries","employees","employee_certifications","employee_benefits","employment_history","project_expenses","employee_training","positions","sales_opportunities","sales_regions","budgets","customers"],"tables_from_table_retrieval":15,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_salaries","similarity":0.6596309142898193},{"table":"employees","similarity":0.6117387326317625},{"table":"employee_certifications","similarity":0.6063101517291073},{"table":"employment_history","similarity":0.6006272540139823},{"table":"employee_benefits","similarity":0.588385638564704},{"table":"sales_quotes","similarity":0.5847288131119626},{"table":"project_expenses","similarity":0.5811440306100932},{"table":"positions","similarity":0.5783549710101321},{"table":"employee_training","similarity":0.5764842814424564},{"table":"sales_regions","similarity":0.5670236882958988},{"table":"sales_opportunities","similarity":0.5660664544581816},{"table":"timesheets","similarity":0.5640662437739868},{"table":"budgets","similarity":0.5625706029614268},{"table":"purchase_requisitions","similarity":0.5609922414021342},{"table":"performance_reviews","similarity":0.5599055606275851}],"column_hits_per_table":{"employees":14,"employee_salaries":7,"positions":1,"employee_benefits":4,"employee_training":3,"employee_certifications":4,"project_expenses":2,"certifications":1,"sales_opportunities":1,"employment_history":4,"departments":1,"sales_territories":1,"sales_regions":1,"fixed_assets":1,"performance_reviews":1,"business_units":1,"asset_transfers":1,"customers":1,"asset_maintenance":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.6754855997136985},{"column":"employee_number","similarity":0.6230502501184026},{"column":"last_name","similarity":0.6053409230190048}],"employee_salaries":[{"column":"amount","similarity":0.6329359756226043},{"column":"approved_by","similarity":0.6321375616232344},{"column":"change_reason","similarity":0.6316069528404761}],"positions":[{"column":"max_salary","similarity":0.6142693265161863}],"employee_benefits":[{"column":"employee_id","similarity":0.6006536688890698},{"column":"coverage_level","similarity":0.5965968421979039},{"column":"end_date","similarity":0.586557123942836}],"employee_training":[{"column":"score","similarity":0.6001910014859368},{"column":"status","similarity":0.5788237982645894},{"column":"employee_id","similarity":0.5766309092930753}],"employee_certifications":[{"column":"employee_id","similarity":0.5974403532583366},{"column":"certificate_number","similarity":0.5892450502925397},{"column":"expiry_date","similarity":0.578236416981715}],"project_expenses":[{"column":"employee_id","similarity":0.5944299421640671},{"column":"approved_by","similarity":0.5909885243295638}],"certifications":[{"column":"validity_years","similarity":0.589664761360241}],"sales_opportunities":[{"column":"owner_id","similarity":0.5895000558969312}],"employment_history":[{"column":"company_name","similarity":0.5883478253463156},{"column":"employee_id","similarity":0.5824689633275649},{"column":"reason_for_leaving","similarity":0.5723476282964999}],"departments":[{"column":"manager_id","similarity":0.5793473377308171}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5787575753820128}],"sales_regions":[{"column":"manager_id","similarity":0.5775817103737491}],"fixed_assets":[{"column":"assigned_to","similarity":0.5758011214737297}],"performance_reviews":[{"column":"employee_id","similarity":0.5751238749562096}],"business_units":[{"column":"manager_id","similarity":0.5736554784472759}],"asset_transfers":[{"column":"from_employee_id","similarity":0.5735387092093984}],"customers":[{"column":"credit_limit","similarity":0.5730323963896138}],"asset_maintenance":[{"column":"performed_by","similarity":0.5729277114702274}]},"fused_scores":[{"table":"employee_salaries","fused":0.7753804511475801,"table_sim":0.6596309142898193,"col_score":0.9490047564342214},{"table":"employees","fused":0.7618475294882174,"table_sim":0.6117387326317625,"col_score":0.9870107247728999},{"table":"employee_certifications","fused":0.7151313945508233,"table_sim":0.6063101517291073,"col_score":0.8783632587833972},{"table":"employee_benefits","fused":0.7089815448065512,"table_sim":0.588385638564704,"col_score":0.8898754041693219},{"table":"employment_history","fused":0.703710893427009,"table_sim":0.6006272540139823,"col_score":0.8583363525465489},{"table":"project_expenses","fused":0.6683020200008508,"table_sim":0.5811440306100932,"col_score":0.7990390040869872},{"table":"employee_training","fused":0.6670023012168911,"table_sim":0.5764842814424564,"col_score":0.8027793308785431},{"table":"positions","fused":0.5927207132125538,"table_sim":0.5783549710101321,"col_score":0.6142693265161863},{"table":"sales_opportunities","fused":0.5046998883260497,"table_sim":0.5660664544581816,"col_score":0.4126500391278518},{"table":"sales_regions","fused":0.501937091882189,"table_sim":0.5670236882958988,"col_score":0.40430719726162434},{"table":"performance_reviews","fused":0.49697802136428976,"table_sim":0.5599055606275851,"col_score":0.40258671246934674},{"table":"sales_quotes","fused":0.35083728786717755,"table_sim":0.5847288131119626,"col_score":0},{"table":"timesheets","fused":0.3384397462643921,"table_sim":0.5640662437739868,"col_score":0},{"table":"budgets","fused":0.3375423617768561,"table_sim":0.5625706029614268,"col_score":0},{"table":"purchase_requisitions","fused":0.3365953448412805,"table_sim":0.5609922414021342,"col_score":0}],"fk_expansion_candidates":31,"fk_expansion_added":2,"fk_expansion_blocked_count":22,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"max_tables"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"max_tables"},{"table":"sales_quotes","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"max_tables"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":52,"total_retrieval_latency_ms":57,"sql_generated":"SELECT e.employee_id, e.first_name, e.last_name, s.salary FROM employees e JOIN employee_salaries s ON e.employee_id = s.employee_id WHERE e.hire_date <= (CURRENT_DATE - INTERVAL '5 years') AND s.amount > 100000;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column s.salary does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":4,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":3341,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column s.salary does not exist"}
{"timestamp":"2026-01-29T20:44:01.471Z","query_id":"6f699208-209d-4f08-9ee3-286f4dd1f4e4","question":"List employees and their managers' names","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employees","employee_salaries","departments","business_units","employment_history","warehouses","projects","employee_training","sales_territories","sales_regions","positions","employee_certifications"],"tables_from_table_retrieval":15,"tables_from_column_only":10,"tables_from_fk_expansion":2,"table_scores":[{"table":"employees","similarity":0.6739271388388655},{"table":"departments","similarity":0.657958333696202},{"table":"sales_regions","similarity":0.6410429290818445},{"table":"business_units","similarity":0.629302299806744},{"table":"employee_salaries","similarity":0.6291178543786463},{"table":"employment_history","similarity":0.628562523709621},{"table":"employee_training","similarity":0.6078450125905032},{"table":"projects","similarity":0.5966184746740394},{"table":"warehouses","similarity":0.595741492988575},{"table":"task_assignments","similarity":0.5956561215476265},{"table":"employee_certifications","similarity":0.5943810266860687},{"table":"sales_territories","similarity":0.5939624260861468},{"table":"timesheets","similarity":0.593138331963305},{"table":"positions","similarity":0.5879685656690451},{"table":"project_expenses","similarity":0.5830402792835349}],"column_hits_per_table":{"employees":17,"departments":2,"business_units":2,"employment_history":2,"warehouses":2,"customers":1,"sales_regions":1,"projects":2,"vendors":1,"sales_territories":2,"task_assignments":1,"certifications":1,"budgets":1,"employee_salaries":4,"timesheets":1,"currencies":1,"project_expenses":1,"stock_transfers":1,"employee_training":2,"employee_certifications":1,"vendor_contacts":1,"products":1,"customer_contacts":1,"project_milestones":1},"top_columns_per_table":{"employees":[{"column":"first_name","similarity":0.7714769709454768},{"column":"last_name","similarity":0.7704055105478298},{"column":"manager_id","similarity":0.7110305691223358}],"departments":[{"column":"manager_id","similarity":0.6915417829685028},{"column":"name","similarity":0.6751242206298983}],"business_units":[{"column":"manager_id","similarity":0.685040091181477},{"column":"name","similarity":0.6765828714174584}],"employment_history":[{"column":"company_name","similarity":0.6822662804075768},{"column":"employee_id","similarity":0.6295340898954124}],"warehouses":[{"column":"manager_id","similarity":0.6735483038590064},{"column":"name","similarity":0.6503195755374178}],"customers":[{"column":"name","similarity":0.6648112452254289}],"sales_regions":[{"column":"manager_id","similarity":0.6593627275777447}],"projects":[{"column":"project_manager_id","similarity":0.6562692578689777},{"column":"name","similarity":0.6475203407196208}],"vendors":[{"column":"name","similarity":0.648693073851878}],"sales_territories":[{"column":"name","similarity":0.6439679107921524},{"column":"assigned_rep_id","similarity":0.6207235426752916}],"task_assignments":[{"column":"employee_id","similarity":0.6386435460734429}],"certifications":[{"column":"name","similarity":0.6377896783299257}],"budgets":[{"column":"name","similarity":0.6363211543819098}],"employee_salaries":[{"column":"end_date","similarity":0.6318747182049583},{"column":"employee_id","similarity":0.6248337519632055},{"column":"effective_date","similarity":0.621871367825837}],"timesheets":[{"column":"employee_id","similarity":0.6280174573982042}],"currencies":[{"column":"name","similarity":0.6277037825883155}],"project_expenses":[{"column":"employee_id","similarity":0.6275598151007045}],"stock_transfers":[{"column":"created_by","similarity":0.6244881174510047}],"employee_training":[{"column":"employee_id","similarity":0.6237522782008402},{"column":"status","similarity":0.6219333593573583}],"employee_certifications":[{"column":"employee_id","similarity":0.6229468191069418}],"vendor_contacts":[{"column":"last_name","similarity":0.6219521334137906}],"products":[{"column":"name","similarity":0.6178261993575316}],"customer_contacts":[{"column":"last_name","similarity":0.6163147653808325}],"project_milestones":[{"column":"name","similarity":0.6158954282593042}]},"fused_scores":[{"table":"employees","fused":0.8285238994112679,"table_sim":0.6739271388388655,"col_score":1.0604190402698717},{"table":"employee_salaries","fused":0.7545948734743385,"table_sim":0.6291178543786463,"col_score":0.9428104021178768},{"table":"departments","fused":0.6829240903370877,"table_sim":0.657958333696202,"col_score":0.7203727252984162},{"table":"business_units","fused":0.6641142074133042,"table_sim":0.629302299806744,"col_score":0.7163320688231443},{"table":"employment_history","fused":0.6563068453252519,"table_sim":0.628562523709621,"col_score":0.697923327748698},{"table":"warehouses","fused":0.6370831614489053,"table_sim":0.595741492988575,"col_score":0.6990956641394007},{"table":"projects","fused":0.6323793247084843,"table_sim":0.5966184746740394,"col_score":0.6860205997601516},{"table":"employee_training","fused":0.6264283157605673,"table_sim":0.6078450125905032,"col_score":0.6543032705156635},{"table":"sales_territories","fused":0.6235897666480316,"table_sim":0.5939624260861468,"col_score":0.6680307774908587},{"table":"sales_regions","fused":0.5692473211708752,"table_sim":0.6410429290818445,"col_score":0.46155390930442125},{"table":"task_assignments","fused":0.5362138658291399,"table_sim":0.5956561215476265,"col_score":0.44705048225141},{"table":"timesheets","fused":0.5317278872494802,"table_sim":0.593138331963305,"col_score":0.43961222017874296},{"table":"employee_certifications","fused":0.531053725361585,"table_sim":0.5943810266860687,"col_score":0.43606277337485927},{"table":"project_expenses","fused":0.5255409157983182,"table_sim":0.5830402792835349,"col_score":0.43929187057049307},{"table":"positions","fused":0.352781139401427,"table_sim":0.5879685656690451,"col_score":0}],"fk_expansion_candidates":36,"fk_expansion_added":2,"fk_expansion_blocked_count":31,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"project_budgets","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"max_tables"},{"table":"project_milestones","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":40,"total_retrieval_latency_ms":46,"sql_generated":"SELECT e.employee_id AS employee_id, e.first_name || ' ' || e.last_name AS employee_name, m.first_name || ' ' || m.last_name AS manager_name FROM employees e INNER JOIN employees m ON e.manager_id = m.employee_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":499,"total_latency_ms":1127}
{"timestamp":"2026-01-29T20:44:02.598Z","query_id":"888f8297-4bc9-43c5-970b-10864249935e","question":"Which employees have pending leave requests?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["leave_requests","employees","leave_types","purchase_requisitions","employee_salaries","employee_training","employment_history","timesheets","employee_certifications","goods_receipts","sales_territories","positions"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"leave_requests","similarity":0.7600790941142384},{"table":"employees","similarity":0.6318821970092333},{"table":"leave_types","similarity":0.6243053165161109},{"table":"employment_history","similarity":0.6232974261189369},{"table":"purchase_requisitions","similarity":0.5939119628114023},{"table":"timesheets","similarity":0.5786251968824939},{"table":"employee_training","similarity":0.5750839227740789},{"table":"employee_certifications","similarity":0.5743962867871555},{"table":"goods_receipts","similarity":0.5718610848354152},{"table":"task_assignments","similarity":0.5706152949131827},{"table":"sales_territories","similarity":0.5614078081373084},{"table":"positions","similarity":0.5597262073340161},{"table":"projects","similarity":0.5534503002083008},{"table":"sales_opportunities","similarity":0.5512834500880964},{"table":"employee_salaries","similarity":0.5491897540036026}],"column_hits_per_table":{"leave_requests":10,"employee_training":2,"employees":12,"employment_history":1,"timesheets":2,"leave_types":3,"sales_orders":1,"purchase_requisitions":2,"vendor_invoices":1,"project_tasks":1,"asset_maintenance":1,"employee_benefits":1,"projects":1,"purchase_orders":1,"stock_transfers":1,"sales_quotes":1,"project_expenses":1,"fixed_assets":1,"employee_certifications":1,"task_assignments":1,"goods_receipts":1,"employee_salaries":2,"sales_territories":1,"project_phases":1},"top_columns_per_table":{"leave_requests":[{"column":"status","similarity":0.7848719368682063},{"column":"employee_id","similarity":0.7576636579687751},{"column":"days_requested","similarity":0.7398783151100068}],"employee_training":[{"column":"status","similarity":0.6651923522652087},{"column":"scheduled_date","similarity":0.5942999900390922}],"employees":[{"column":"termination_date","similarity":0.6457696051473769},{"column":"email","similarity":0.6346475885363552},{"column":"last_name","similarity":0.6289095722388175}],"employment_history":[{"column":"reason_for_leaving","similarity":0.6361385453486292}],"timesheets":[{"column":"status","similarity":0.6339196627014697},{"column":"employee_id","similarity":0.5914292311259354}],"leave_types":[{"column":"is_paid","similarity":0.6210462067937735},{"column":"days_allowed","similarity":0.6179268957404154},{"column":"requires_approval","similarity":0.6015299391142729}],"sales_orders":[{"column":"status","similarity":0.6210060419850735}],"purchase_requisitions":[{"column":"status","similarity":0.6193300474461643},{"column":"requested_by","similarity":0.6053096443813046}],"vendor_invoices":[{"column":"status","similarity":0.6155310542664321}],"project_tasks":[{"column":"status","similarity":0.6119107629795923}],"asset_maintenance":[{"column":"status","similarity":0.6085158795953126}],"employee_benefits":[{"column":"end_date","similarity":0.6074126091020398}],"projects":[{"column":"status","similarity":0.6062843845135029}],"purchase_orders":[{"column":"status","similarity":0.6056490490407618}],"stock_transfers":[{"column":"status","similarity":0.6050219711376368}],"sales_quotes":[{"column":"status","similarity":0.6049360812469786}],"project_expenses":[{"column":"status","similarity":0.6029918860858492}],"fixed_assets":[{"column":"status","similarity":0.6000566812603433}],"employee_certifications":[{"column":"expiry_date","similarity":0.5947566615407769}],"task_assignments":[{"column":"employee_id","similarity":0.5916098874816911}],"goods_receipts":[{"column":"received_by","similarity":0.5906067416911127}],"employee_salaries":[{"column":"change_reason","similarity":0.5843630753678524},{"column":"end_date","similarity":0.579293919815319}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5811710599296118}],"project_phases":[{"column":"status","similarity":0.5807882110700618}]},"fused_scores":[{"table":"leave_requests","fused":0.8980468193115467,"table_sim":0.7600790941142384,"col_score":1.1049984071075094},{"table":"employees","fused":0.7643666779717617,"table_sim":0.6318821970092333,"col_score":0.9630933994155545},{"table":"leave_types","fused":0.7420599360286873,"table_sim":0.6243053165161109,"col_score":0.9186918652975518},{"table":"purchase_requisitions","fused":0.6851772420818263,"table_sim":0.5939119628114023,"col_score":0.8220751609874621},{"table":"employee_salaries","fused":0.6791178665123663,"table_sim":0.5491897540036026,"col_score":0.8740100352755118},{"table":"employee_training","fused":0.6758972789972135,"table_sim":0.5750839227740789,"col_score":0.8271173133319152},{"table":"employment_history","fused":0.6284338738108138,"table_sim":0.6232974261189369,"col_score":0.6361385453486292},{"table":"timesheets","fused":0.6074727160435388,"table_sim":0.5786251968824939,"col_score":0.6507439947851061},{"table":"employee_certifications","fused":0.582540436688604,"table_sim":0.5743962867871555,"col_score":0.5947566615407769},{"table":"goods_receipts","fused":0.5793593475776941,"table_sim":0.5718610848354152,"col_score":0.5906067416911127},{"table":"task_assignments","fused":0.5080199454427832,"table_sim":0.5706152949131827,"col_score":0.41412692123718375},{"table":"projects","fused":0.5018298077887613,"table_sim":0.5534503002083008,"col_score":0.42439906915945197},{"table":"sales_territories","fused":0.4995725816626763,"table_sim":0.5614078081373084,"col_score":0.40681974195072823},{"table":"positions","fused":0.33583572440040965,"table_sim":0.5597262073340161,"col_score":0},{"table":"sales_opportunities","fused":0.33077007005285786,"table_sim":0.5512834500880964,"col_score":0}],"fk_expansion_candidates":32,"fk_expansion_added":2,"fk_expansion_blocked_count":26,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"projects","reason":"max_tables"},{"table":"task_assignments","reason":"max_tables"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":43,"total_retrieval_latency_ms":50,"sql_generated":"SELECT DISTINCT e.employee_id, e.first_name || ' ' || e.last_name AS employee_full_name FROM employees e JOIN leave_requests lr ON e.employee_id = lr.employee_id WHERE lr.status = 'pending';","tables_used_in_sql":[],"explain_result":"success","rows_returned":194,"total_latency_ms":1080}
{"timestamp":"2026-01-29T20:44:03.678Z","query_id":"692f0d78-ee64-4c93-a6b3-1fdc5603c499","question":"Show the number of employees per position title","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["positions","employees","employee_salaries","employee_certifications","employment_history","employee_benefits","employee_training","sales_opportunities","sales_territories","sales_regions","departments","business_units"],"tables_from_table_retrieval":15,"tables_from_column_only":4,"tables_from_fk_expansion":2,"table_scores":[{"table":"positions","similarity":0.6979534676247563},{"table":"employee_salaries","similarity":0.659392658582788},{"table":"employees","similarity":0.659318915501233},{"table":"sales_territories","similarity":0.6544391487399293},{"table":"sales_regions","similarity":0.6428263414246281},{"table":"employee_benefits","similarity":0.6167866650759656},{"table":"employee_certifications","similarity":0.6148750377920306},{"table":"employee_training","similarity":0.6083683642118161},{"table":"task_assignments","similarity":0.6071839885197421},{"table":"employment_history","similarity":0.6045972357575983},{"table":"project_resources","similarity":0.6042586180893913},{"table":"departments","similarity":0.6032642584988918},{"table":"business_units","similarity":0.5965911322333207},{"table":"sales_opportunities","similarity":0.5891548833734075},{"table":"certifications","similarity":0.5841777359403402}],"column_hits_per_table":{"employees":15,"positions":6,"employee_salaries":7,"sales_territories":3,"employment_history":2,"employee_certifications":2,"sales_regions":1,"departments":1,"sales_opportunities":2,"customer_contacts":1,"employee_benefits":2,"vendor_contacts":1,"task_assignments":1,"employee_training":2,"business_units":1,"projects":1,"project_resources":1,"sales_orders":1},"top_columns_per_table":{"employees":[{"column":"employee_number","similarity":0.7303595134380423},{"column":"position_id","similarity":0.7050286662527804},{"column":"phone","similarity":0.6945610240790868}],"positions":[{"column":"title","similarity":0.7249937097183676},{"column":"min_salary","similarity":0.675429773675748},{"column":"max_salary","similarity":0.6680713515907781}],"employee_salaries":[{"column":"amount","similarity":0.7000523422305518},{"column":"approved_by","similarity":0.653674871570882},{"column":"effective_date","similarity":0.6502266185759468}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.658183355036331},{"column":"name","similarity":0.6164997394497986},{"column":"territory_id","similarity":0.6102010119398675}],"employment_history":[{"column":"position","similarity":0.6510937516674971},{"column":"company_name","similarity":0.6218123772540076}],"employee_certifications":[{"column":"certificate_number","similarity":0.650658466369623},{"column":"employee_id","similarity":0.6302169951877866}],"sales_regions":[{"column":"manager_id","similarity":0.6438605230157461}],"departments":[{"column":"manager_id","similarity":0.6436672453371529}],"sales_opportunities":[{"column":"owner_id","similarity":0.6408450104060457},{"column":"amount","similarity":0.6062432822580913}],"customer_contacts":[{"column":"title","similarity":0.6381955329460534}],"employee_benefits":[{"column":"coverage_level","similarity":0.6345844389817726},{"column":"employee_id","similarity":0.6161187768667185}],"vendor_contacts":[{"column":"title","similarity":0.6324837364697313}],"task_assignments":[{"column":"employee_id","similarity":0.6251972033262657}],"employee_training":[{"column":"status","similarity":0.6240127994623852},{"column":"score","similarity":0.6193167530282054}],"business_units":[{"column":"manager_id","similarity":0.6238411740584191}],"projects":[{"column":"project_manager_id","similarity":0.6212958877659998}],"project_resources":[{"column":"employee_id","similarity":0.6133242706799946}],"sales_orders":[{"column":"sales_rep_id","similarity":0.6111916781312563}]},"fused_scores":[{"table":"positions","fused":0.8438555191973505,"table_sim":0.6979534676247563,"col_score":1.0627085965562415},{"table":"employees","fused":0.8266473594917741,"table_sim":0.659318915501233,"col_score":1.0776400254775858},{"table":"employee_salaries","fused":0.8063915063560698,"table_sim":0.659392658582788,"col_score":1.0268897780159927},{"table":"employee_certifications","fused":0.7174187885493577,"table_sim":0.6148750377920306,"col_score":0.8712344146853483},{"table":"employment_history","fused":0.7102495749371189,"table_sim":0.6045972357575983,"col_score":0.8687280837063998},{"table":"employee_benefits","fused":0.710162403399629,"table_sim":0.6167866650759656,"col_score":0.8502260108851241},{"table":"employee_training","fused":0.7001095116631058,"table_sim":0.6083683642118161,"col_score":0.8377212328400403},{"table":"sales_opportunities","fused":0.6857085443841274,"table_sim":0.5891548833734075,"col_score":0.8305390359002073},{"table":"sales_territories","fused":0.663264792177102,"table_sim":0.6544391487399293,"col_score":0.6765032573328611},{"table":"sales_regions","fused":0.5659767512991858,"table_sim":0.6428263414246281,"col_score":0.45070236611102227},{"table":"departments","fused":0.5421853837937378,"table_sim":0.6032642584988918,"col_score":0.450567071736007},{"table":"task_assignments","fused":0.5393656100431996,"table_sim":0.6071839885197421,"col_score":0.437638042328386},{"table":"project_resources","fused":0.5342859666440333,"table_sim":0.6042586180893913,"col_score":0.42932698947599623},{"table":"business_units","fused":0.5326302080763498,"table_sim":0.5965911322333207,"col_score":0.43668882184089336},{"table":"certifications","fused":0.3505066415642041,"table_sim":0.5841777359403402,"col_score":0}],"fk_expansion_candidates":31,"fk_expansion_added":2,"fk_expansion_blocked_count":26,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"certifications","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":36,"total_retrieval_latency_ms":41,"sql_generated":"SELECT p.title AS PositionTitle, COUNT(e.employee_id) AS NumberOfEmployees FROM positions p JOIN employees e ON p.position_id = e.position_id GROUP BY p.title;","tables_used_in_sql":[],"explain_result":"success","rows_returned":40,"total_latency_ms":864}
{"timestamp":"2026-01-29T20:44:04.542Z","query_id":"3212a654-f367-4b09-acaf-aa9b80e7e221","question":"Find employees with expiring certifications in the next 6 months","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_certifications","certifications","employee_training","employee_salaries","employees","employee_benefits","employment_history","timesheets","leave_requests","sales_opportunities","training_courses","sales_territories"],"tables_from_table_retrieval":15,"tables_from_column_only":4,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_certifications","similarity":0.7706241362613744},{"table":"certifications","similarity":0.6802005917779511},{"table":"employee_training","similarity":0.6440443171141977},{"table":"employee_salaries","similarity":0.6217356175142155},{"table":"employment_history","similarity":0.6209800232699798},{"table":"employees","similarity":0.6208808332740605},{"table":"employee_benefits","similarity":0.6045338983482451},{"table":"leave_requests","similarity":0.5952468212261783},{"table":"timesheets","similarity":0.5895561171146715},{"table":"sales_opportunities","similarity":0.589247250067302},{"table":"sales_territories","similarity":0.5761976363181674},{"table":"sales_regions","similarity":0.571597497122778},{"table":"positions","similarity":0.5699853206265957},{"table":"sales_quotes","similarity":0.5692719307537125},{"table":"asset_maintenance","similarity":0.5679247260279}],"column_hits_per_table":{"employee_certifications":6,"certifications":5,"employee_training":7,"employee_benefits":4,"employee_salaries":4,"employees":13,"employment_history":2,"fixed_assets":1,"sales_territories":1,"leave_requests":1,"training_courses":1,"vendor_invoices":1,"sales_opportunities":1,"sales_orders":1,"timesheets":2},"top_columns_per_table":{"employee_certifications":[{"column":"expiry_date","similarity":0.8223290744223847},{"column":"obtained_date","similarity":0.7048571438609317},{"column":"certificate_number","similarity":0.6844066837361532}],"certifications":[{"column":"validity_years","similarity":0.6831497753418977},{"column":"issuing_body","similarity":0.6675689252914252},{"column":"name","similarity":0.6347875203520511}],"employee_training":[{"column":"status","similarity":0.6694247428105495},{"column":"completion_date","similarity":0.6500543987668643},{"column":"scheduled_date","similarity":0.634378567942575}],"employee_benefits":[{"column":"end_date","similarity":0.668980015269604},{"column":"start_date","similarity":0.6167647109848691},{"column":"employee_id","similarity":0.5890360373550575}],"employee_salaries":[{"column":"end_date","similarity":0.6663230094391236},{"column":"effective_date","similarity":0.6275928989730601},{"column":"approved_by","similarity":0.5920076491340375}],"employees":[{"column":"termination_date","similarity":0.6634096387400048},{"column":"birth_date","similarity":0.6208623682963734},{"column":"hire_date","similarity":0.6131267334537116}],"employment_history":[{"column":"end_date","similarity":0.6255999760444128},{"column":"reason_for_leaving","similarity":0.5952886604965791}],"fixed_assets":[{"column":"warranty_expiry","similarity":0.6127536708511256}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6119690793074023}],"leave_requests":[{"column":"approved_by","similarity":0.597799056732442}],"training_courses":[{"column":"duration_hours","similarity":0.5941472157411798}],"vendor_invoices":[{"column":"status","similarity":0.5930757702064392}],"sales_opportunities":[{"column":"owner_id","similarity":0.5882909136312094}],"sales_orders":[{"column":"sales_rep_id","similarity":0.5865686529713344}],"timesheets":[{"column":"employee_id","similarity":0.5831337158577651},{"column":"approved_by","similarity":0.5831119950290864}]},"fused_scores":[{"table":"employee_certifications","fused":0.9322775402979648,"table_sim":0.7706241362613744,"col_score":1.1747576463528504},{"table":"certifications","fused":0.8148940502618147,"table_sim":0.6802005917779511,"col_score":1.0169342379876103},{"table":"employee_training","fused":0.7733240633637795,"table_sim":0.6440443171141977,"col_score":0.9672436827381519},{"table":"employee_salaries","fused":0.7650891540787907,"table_sim":0.6217356175142155,"col_score":0.9801194589256537},{"table":"employees","fused":0.762064829119713,"table_sim":0.6208808332740605,"col_score":0.9738408228881915},{"table":"employee_benefits","fused":0.7536652873137626,"table_sim":0.6045338983482451,"col_score":0.9773623707620386},{"table":"employment_history","fused":0.7418857364790687,"table_sim":0.6209800232699798,"col_score":0.9232443062927023},{"table":"timesheets","fused":0.6686171885005245,"table_sim":0.5895561171146715,"col_score":0.7872087955793041},{"table":"leave_requests","fused":0.5962677154286837,"table_sim":0.5952468212261783,"col_score":0.597799056732442},{"table":"sales_opportunities","fused":0.5182698058571198,"table_sim":0.589247250067302,"col_score":0.41180363954184657},{"table":"sales_territories","fused":0.5170699239969732,"table_sim":0.5761976363181674,"col_score":0.4283783555151816},{"table":"sales_regions","fused":0.34295849827366676,"table_sim":0.571597497122778,"col_score":0},{"table":"positions","fused":0.3419911923759574,"table_sim":0.5699853206265957,"col_score":0},{"table":"sales_quotes","fused":0.3415631584522275,"table_sim":0.5692719307537125,"col_score":0},{"table":"asset_maintenance","fused":0.34075483561673997,"table_sim":0.5679247260279,"col_score":0}],"fk_expansion_candidates":33,"fk_expansion_added":2,"fk_expansion_blocked_count":26,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"sales_regions","reason":"max_tables"},{"table":"customers","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"leave_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":100,"total_retrieval_latency_ms":108,"sql_generated":"SELECT e.employee_id, CONCAT(e.first_name, ' ', e.last_name) AS employee_full_name, c.certification_id, c.name AS certification_name, DATEDIFF(c.expiry_date, CURRENT_DATE) AS days_until_expiration FROM employees e JOIN employee_certifications ec ON e.employee_id = ec.employee_id JOIN certifications c ON ec.certification_id = c.certification_id WHERE c.validity_years > 0 AND DATEDIFF(c.expiry_date, CURRENT_DATE) <= 180;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column c.expiry_date does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":1,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":6085,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column c.expiry_date does not exist"}
{"timestamp":"2026-01-29T20:44:10.627Z","query_id":"700e20ab-665d-4b34-a5b4-8a593f274daa","question":"What is the total sales amount by customer for 2024?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_orders","sales_quotes","purchase_orders","sales_opportunities","vendor_invoices","customers","sales_regions","product_suppliers","inventory_transactions","sales_territories","customer_contacts","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.6661782372338159},{"table":"sales_regions","similarity":0.6466539195201415},{"table":"purchase_orders","similarity":0.6425639839861694},{"table":"sales_quotes","similarity":0.6323684030188},{"table":"customers","similarity":0.6254829877818046},{"table":"goods_receipts","similarity":0.624224700776992},{"table":"sales_territories","similarity":0.6219383160682438},{"table":"sales_opportunities","similarity":0.6198918716472263},{"table":"vendor_invoices","similarity":0.6044007553511245},{"table":"product_suppliers","similarity":0.6040993020059657},{"table":"vendors","similarity":0.603297637986599},{"table":"inventory_transactions","similarity":0.5961752149477293},{"table":"customer_contacts","similarity":0.5960659744690372},{"table":"purchase_requisitions","similarity":0.5958567238927183},{"table":"vendor_contacts","similarity":0.5956298644510378}],"column_hits_per_table":{"sales_orders":11,"sales_quotes":8,"purchase_orders":4,"vendor_invoices":4,"sales_regions":2,"sales_opportunities":5,"budgets":1,"vendor_invoice_lines":3,"sales_territories":1,"customers":5,"product_suppliers":2,"inventory_transactions":1,"products":1,"employee_salaries":1,"requisition_lines":1},"top_columns_per_table":{"sales_orders":[{"column":"total","similarity":0.7244313172120884},{"column":"tax_amount","similarity":0.6762874622688556},{"column":"shipping_cost","similarity":0.6612432272072928}],"sales_quotes":[{"column":"total","similarity":0.6950563806491997},{"column":"tax_amount","similarity":0.6549934606699467},{"column":"customer_id","similarity":0.633022609028069}],"purchase_orders":[{"column":"total","similarity":0.6785298093212636},{"column":"tax_amount","similarity":0.6404349276520235},{"column":"shipping_cost","similarity":0.6240185552956755}],"vendor_invoices":[{"column":"total","similarity":0.6747261791238827},{"column":"amount_paid","similarity":0.6298159797552111},{"column":"tax_amount","similarity":0.6272011861089813}],"sales_regions":[{"column":"target_revenue","similarity":0.669211801482299},{"column":"manager_id","similarity":0.6277573682655309}],"sales_opportunities":[{"column":"amount","similarity":0.655450458562276},{"column":"customer_id","similarity":0.6322500352926682},{"column":"actual_close_date","similarity":0.6246929093287042}],"budgets":[{"column":"total_amount","similarity":0.6518162432576314}],"vendor_invoice_lines":[{"column":"amount","similarity":0.6403394670021465},{"column":"quantity","similarity":0.6220633545661067},{"column":"unit_cost","similarity":0.6142783559425501}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6329827875367418}],"customers":[{"column":"customer_number","similarity":0.6307526305965028},{"column":"is_active","similarity":0.6279434554243903},{"column":"payment_terms","similarity":0.6271025683088002}],"product_suppliers":[{"column":"unit_cost","similarity":0.6238036188844898},{"column":"lead_time_days","similarity":0.6148470142139506}],"inventory_transactions":[{"column":"quantity","similarity":0.6205086265646853}],"products":[{"column":"unit_cost","similarity":0.6167414295269279}],"employee_salaries":[{"column":"amount","similarity":0.6161656413500942}],"requisition_lines":[{"column":"estimated_total","similarity":0.6121816423535696}]},"fused_scores":[{"table":"sales_orders","fused":0.824736961678896,"table_sim":0.6661782372338159,"col_score":1.0625750483465162},{"table":"sales_quotes","fused":0.7884422862049492,"table_sim":0.6323684030188,"col_score":1.022553110984173},{"table":"purchase_orders","fused":0.7850372996506118,"table_sim":0.6425639839861694,"col_score":0.9987472731472753},{"table":"sales_opportunities","fused":0.759053888278987,"table_sim":0.6198918716472263,"col_score":0.9677969132266282},{"table":"vendor_invoices","fused":0.757971162082024,"table_sim":0.6044007553511245,"col_score":0.9883267721783733},{"table":"customers","fused":0.753011358569444,"table_sim":0.6254829877818046,"col_score":0.9443039147509029},{"table":"sales_regions","fused":0.7435631038621788,"table_sim":0.6466539195201415,"col_score":0.8889268803752348},{"table":"product_suppliers","fused":0.7349504316001654,"table_sim":0.6040993020059657,"col_score":0.9312271259914651},{"table":"inventory_transactions","fused":0.6059085795945116,"table_sim":0.5961752149477293,"col_score":0.6205086265646853},{"table":"sales_territories","fused":0.5503981701512339,"table_sim":0.6219383160682438,"col_score":0.4430879512757192},{"table":"vendor_invoice_lines","fused":0.38054845771407997,"table_sim":0,"col_score":0.9513711442851999},{"table":"goods_receipts","fused":0.3745348204661952,"table_sim":0.624224700776992,"col_score":0},{"table":"vendors","fused":0.3619785827919594,"table_sim":0.603297637986599,"col_score":0},{"table":"customer_contacts","fused":0.3576395846814223,"table_sim":0.5960659744690372,"col_score":0},{"table":"purchase_requisitions","fused":0.35751403433563095,"table_sim":0.5958567238927183,"col_score":0}],"fk_expansion_candidates":17,"fk_expansion_added":2,"fk_expansion_blocked_count":11,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendors","reason":"max_tables"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":39,"total_retrieval_latency_ms":46,"sql_generated":"SELECT c.customer_id AS \"CustomerID\", SUM(so.total) AS \"TotalSalesAmount\" FROM customers c JOIN sales_orders so ON c.customer_id = so.customer_id AND EXTRACT(YEAR FROM so.order_date) = 2024 GROUP BY c.customer_id;","tables_used_in_sql":[],"total_latency_ms":3303,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T20:44:13.930Z","query_id":"21b37666-315d-417b-a27e-c477cfe8e76a","question":"List the top 10 customers by total order value","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["sales_orders","order_lines","purchase_orders","customers","vendor_invoices","po_lines","vendor_invoice_lines","vendors","product_suppliers","customer_contacts","goods_receipts","receipt_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.6473006572264755},{"table":"order_lines","similarity":0.6399839764362797},{"table":"purchase_orders","similarity":0.6359216236921361},{"table":"customers","similarity":0.6198957604307753},{"table":"product_suppliers","similarity":0.5995729306104617},{"table":"vendor_invoices","similarity":0.5943908353227434},{"table":"customer_contacts","similarity":0.5842306673122464},{"table":"vendor_invoice_lines","similarity":0.5801466694219243},{"table":"po_lines","similarity":0.5791417572195606},{"table":"goods_receipts","similarity":0.5753336348446236},{"table":"vendors","similarity":0.5707400907082698},{"table":"vendor_contacts","similarity":0.5696902100114021},{"table":"sales_quotes","similarity":0.5666705909907517},{"table":"sales_regions","similarity":0.5613559842608495},{"table":"performance_reviews","similarity":0.5612444859070587}],"column_hits_per_table":{"sales_orders":9,"purchase_orders":9,"order_lines":6,"customers":8,"vendor_invoices":3,"po_lines":4,"product_suppliers":1,"vendor_invoice_lines":3,"sales_quotes":1,"vendors":2,"reorder_rules":1,"receipt_lines":1,"customer_contacts":1,"vendor_contacts":1},"top_columns_per_table":{"sales_orders":[{"column":"total","similarity":0.7020817260367288},{"column":"order_number","similarity":0.6685298882909628},{"column":"subtotal","similarity":0.6524962304627586}],"purchase_orders":[{"column":"total","similarity":0.6939612306511255},{"column":"subtotal","similarity":0.6468882375379221},{"column":"po_number","similarity":0.6405494499482387}],"order_lines":[{"column":"line_total","similarity":0.6813706573979386},{"column":"quantity_shipped","similarity":0.6606623309473539},{"column":"unit_price","similarity":0.653638874407219}],"customers":[{"column":"phone","similarity":0.6678457692494831},{"column":"customer_number","similarity":0.667508576224813},{"column":"website","similarity":0.6440350067780187}],"vendor_invoices":[{"column":"total","similarity":0.6547235618821576},{"column":"subtotal","similarity":0.6165793862971071},{"column":"amount_paid","similarity":0.5994096139826286}],"po_lines":[{"column":"line_total","similarity":0.6452038022349394},{"column":"quantity_received","similarity":0.6360841424690086},{"column":"quantity","similarity":0.6154123203857146}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6405471009596841}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.6302050357488331},{"column":"amount","similarity":0.6254578473792903},{"column":"unit_cost","similarity":0.6160639087242643}],"sales_quotes":[{"column":"total","similarity":0.6256755187649439}],"vendors":[{"column":"phone","similarity":0.6250325024206392},{"column":"vendor_number","similarity":0.5980532008806005}],"reorder_rules":[{"column":"max_quantity","similarity":0.6123863797677381}],"receipt_lines":[{"column":"quantity_received","similarity":0.6046309435687143}],"customer_contacts":[{"column":"phone","similarity":0.602251378896717}],"vendor_contacts":[{"column":"phone","similarity":0.5990225595345888}]},"fused_scores":[{"table":"sales_orders","fused":0.8029190624087694,"table_sim":0.6473006572264755,"col_score":1.0363466701822102},{"table":"order_lines","fused":0.788671115010414,"table_sim":0.6399839764362797,"col_score":1.0117018228716155},{"table":"purchase_orders","fused":0.7885151139833163,"table_sim":0.6359216236921361,"col_score":1.0174053494200865},{"table":"customers","fused":0.7725774792032212,"table_sim":0.6198957604307753,"col_score":1.0016000573618897},{"table":"vendor_invoices","fused":0.7418398032059306,"table_sim":0.5943908353227434,"col_score":0.9630132550307111},{"table":"po_lines","fused":0.7327834037195139,"table_sim":0.5791417572195606,"col_score":0.9632458734694438},{"table":"vendor_invoice_lines","fused":0.7252615854285459,"table_sim":0.5801466694219243,"col_score":0.9429339594384782},{"table":"vendors","fused":0.7120676955693377,"table_sim":0.5707400907082698,"col_score":0.9240591028609395},{"table":"product_suppliers","fused":0.6159625987501507,"table_sim":0.5995729306104617,"col_score":0.6405471009596841},{"table":"customer_contacts","fused":0.5914389519460346,"table_sim":0.5842306673122464,"col_score":0.602251378896717},{"table":"sales_quotes","fused":0.5902725621004286,"table_sim":0.5666705909907517,"col_score":0.6256755187649439},{"table":"vendor_contacts","fused":0.5814231498206768,"table_sim":0.5696902100114021,"col_score":0.5990225595345888},{"table":"goods_receipts","fused":0.3452001809067742,"table_sim":0.5753336348446236,"col_score":0},{"table":"sales_regions","fused":0.3368135905565097,"table_sim":0.5613559842608495,"col_score":0},{"table":"performance_reviews","fused":0.3367466915442352,"table_sim":0.5612444859070587,"col_score":0}],"fk_expansion_candidates":14,"fk_expansion_added":2,"fk_expansion_blocked_count":10,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"vendor_contacts","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":38,"total_retrieval_latency_ms":43,"sql_generated":"SELECT c.customer_id, SUM(s.total) AS total_order_value FROM customers c JOIN sales_orders s ON c.customer_id = s.customer_id GROUP BY c.customer_id ORDER BY total_order_value DESC LIMIT 10;","tables_used_in_sql":[],"explain_result":"success","rows_returned":10,"total_latency_ms":1067}
{"timestamp":"2026-01-29T20:44:14.997Z","query_id":"af3716d2-f748-427f-bbdb-511d7ba744bb","question":"Show sales opportunities in the Negotiation stage worth over $50,000","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["sales_opportunities","opportunity_stages","sales_quotes","sales_orders","vendor_invoices","purchase_orders","positions","sales_regions","sales_territories","inventory_levels","fixed_assets","purchase_requisitions"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_opportunities","similarity":0.6992078050992712},{"table":"opportunity_stages","similarity":0.6655732816251885},{"table":"sales_quotes","similarity":0.5966843975960908},{"table":"sales_orders","similarity":0.5593486033229518},{"table":"sales_regions","similarity":0.5589767008926408},{"table":"sales_territories","similarity":0.5454458212189293},{"table":"purchase_orders","similarity":0.5420364894792326},{"table":"inventory_levels","similarity":0.5351174798622741},{"table":"positions","similarity":0.5335687678148762},{"table":"vendor_invoices","similarity":0.530033951859159},{"table":"purchase_requisitions","similarity":0.52468395466863},{"table":"fixed_assets","similarity":0.5210852939306287},{"table":"vendors","similarity":0.5206051380901591},{"table":"product_suppliers","similarity":0.5180116953474874},{"table":"stock_transfers","similarity":0.5145653894331007}],"column_hits_per_table":{"sales_opportunities":11,"sales_quotes":8,"opportunity_stages":6,"sales_orders":6,"sales_regions":2,"vendor_invoices":3,"project_milestones":2,"purchase_orders":3,"positions":2,"sales_territories":2,"fixed_assets":1,"vendor_invoice_lines":1,"inventory_levels":1,"purchase_requisitions":1,"vendors":1},"top_columns_per_table":{"sales_opportunities":[{"column":"amount","similarity":0.7218839163082612},{"column":"stage_id","similarity":0.716924419509995},{"column":"actual_close_date","similarity":0.6885771934035502}],"sales_quotes":[{"column":"opportunity_id","similarity":0.647441890535683},{"column":"total","similarity":0.6155916414203653},{"column":"subtotal","similarity":0.6055615457364606}],"opportunity_stages":[{"column":"sequence","similarity":0.6454142500136325},{"column":"is_won","similarity":0.6341237265976897},{"column":"probability","similarity":0.6324889797951576}],"sales_orders":[{"column":"total","similarity":0.620187694899569},{"column":"subtotal","similarity":0.6117656440801068},{"column":"shipping_cost","similarity":0.5821513623432988}],"sales_regions":[{"column":"target_revenue","similarity":0.5974090175243022},{"column":"name","similarity":0.555083452385604}],"vendor_invoices":[{"column":"total","similarity":0.5954243361867875},{"column":"subtotal","similarity":0.5865062592640437},{"column":"amount_paid","similarity":0.5632369336559707}],"project_milestones":[{"column":"amount","similarity":0.5837677671992427},{"column":"description","similarity":0.5491146358499412}],"purchase_orders":[{"column":"total","similarity":0.5819183589116524},{"column":"subtotal","similarity":0.5743568254746039},{"column":"tax_amount","similarity":0.5472165237974967}],"positions":[{"column":"max_salary","similarity":0.5779609042142907},{"column":"min_salary","similarity":0.5600539081817787}],"sales_territories":[{"column":"name","similarity":0.5672149440546744},{"column":"territory_id","similarity":0.5529670061701181}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5581280439698661}],"vendor_invoice_lines":[{"column":"amount","similarity":0.5566794113536152}],"inventory_levels":[{"column":"quantity_available","similarity":0.5552607980814753}],"purchase_requisitions":[{"column":"status","similarity":0.5540663995768337}],"vendors":[{"column":"payment_terms","similarity":0.5485963499255753}]},"fused_scores":[{"table":"sales_opportunities","fused":0.8459936882635772,"table_sim":0.6992078050992712,"col_score":1.0661725130100363},{"table":"opportunity_stages","fused":0.7843344143001041,"table_sim":0.6655732816251885,"col_score":0.9624761133124773},{"table":"sales_quotes","fused":0.7253596042730928,"table_sim":0.5966843975960908,"col_score":0.9183724142885956},{"table":"sales_orders","fused":0.70603736876962,"table_sim":0.5593486033229518,"col_score":0.9260705169396224},{"table":"vendor_invoices","fused":0.6734913574430191,"table_sim":0.530033951859159,"col_score":0.8886774658188092},{"table":"purchase_orders","fused":0.6728606023471213,"table_sim":0.5420364894792326,"col_score":0.8690967716489544},{"table":"positions","fused":0.6633364040109977,"table_sim":0.5335687678148762,"col_score":0.8579878583051801},{"table":"sales_regions","fused":0.6520613108792899,"table_sim":0.5589767008926408,"col_score":0.7916882258592636},{"table":"sales_territories","fused":0.5635030579304829,"table_sim":0.5454458212189293,"col_score":0.5905889129978134},{"table":"inventory_levels","fused":0.5431748071499546,"table_sim":0.5351174798622741,"col_score":0.5552607980814753},{"table":"fixed_assets","fused":0.5359023939463237,"table_sim":0.5210852939306287,"col_score":0.5581280439698661},{"table":"vendors","fused":0.5318016228243255,"table_sim":0.5206051380901591,"col_score":0.5485963499255753},{"table":"purchase_requisitions","fused":0.46994896468269143,"table_sim":0.52468395466863,"col_score":0.38784647970378355},{"table":"product_suppliers","fused":0.3108070172084924,"table_sim":0.5180116953474874,"col_score":0},{"table":"project_milestones","fused":0.31038315589868887,"table_sim":0,"col_score":0.7759578897467221}],"fk_expansion_candidates":15,"fk_expansion_added":2,"fk_expansion_blocked_count":11,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendors","reason":"max_tables"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":37,"total_retrieval_latency_ms":43,"sql_generated":"SELECT so.name AS opportunity_name, os.stage_id, os.probability FROM sales_opportunities so JOIN opportunity_stages os ON so.stage_id = os.stage_id WHERE so.amount > 50000 AND os.name = 'Negotiation';","tables_used_in_sql":[],"explain_result":"success","rows_returned":69,"total_latency_ms":1167}
{"timestamp":"2026-01-29T20:44:16.164Z","query_id":"4df88559-aaf2-49e1-b0ec-e93baefb1f92","question":"What is the conversion rate from quotes to orders?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["quote_lines","sales_quotes","sales_orders","order_lines","purchase_orders","po_lines","product_suppliers","vendor_invoice_lines","tax_rates","units_of_measure","goods_receipts","vendor_invoices"],"tables_from_table_retrieval":15,"tables_from_column_only":1,"tables_from_fk_expansion":2,"table_scores":[{"table":"quote_lines","similarity":0.6904269230356019},{"table":"sales_orders","similarity":0.6835641897302034},{"table":"sales_quotes","similarity":0.6684713746648914},{"table":"order_lines","similarity":0.6535630831611231},{"table":"purchase_orders","similarity":0.6306886393929901},{"table":"po_lines","similarity":0.6176945995415711},{"table":"product_suppliers","similarity":0.5906242515558167},{"table":"vendor_invoices","similarity":0.5859545887931735},{"table":"vendor_invoice_lines","similarity":0.5830820632852473},{"table":"goods_receipts","similarity":0.5790884419628168},{"table":"tax_rates","similarity":0.5718192537871447},{"table":"requisition_lines","similarity":0.5712220355781},{"table":"transfer_lines","similarity":0.5636706691019312},{"table":"units_of_measure","similarity":0.562966241975057},{"table":"performance_reviews","similarity":0.5624540759938077}],"column_hits_per_table":{"sales_orders":9,"quote_lines":6,"sales_quotes":11,"order_lines":6,"purchase_orders":9,"currencies":1,"product_suppliers":1,"po_lines":4,"vendor_invoice_lines":1,"tax_rates":1,"units_of_measure":1},"top_columns_per_table":{"sales_orders":[{"column":"quote_id","similarity":0.7232829089173333},{"column":"total","similarity":0.6782515905024311},{"column":"subtotal","similarity":0.6564656490145492}],"quote_lines":[{"column":"discount_percent","similarity":0.7208835983271276},{"column":"unit_price","similarity":0.704483517001721},{"column":"line_total","similarity":0.6863137629261619}],"sales_quotes":[{"column":"total","similarity":0.706142441581424},{"column":"quote_number","similarity":0.6925940339842922},{"column":"subtotal","similarity":0.6772561289459981}],"order_lines":[{"column":"discount_percent","similarity":0.6959860752364422},{"column":"unit_price","similarity":0.6669167849132327},{"column":"line_total","similarity":0.6535000947209797}],"purchase_orders":[{"column":"total","similarity":0.6835774808972174},{"column":"subtotal","similarity":0.6633148180662753},{"column":"shipping_cost","similarity":0.6595759377904514}],"currencies":[{"column":"exchange_rate","similarity":0.6420843010647603}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6294891258816252}],"po_lines":[{"column":"line_total","similarity":0.6268290778076593},{"column":"unit_cost","similarity":0.6264313657632602},{"column":"quantity_received","similarity":0.6234182435733836}],"vendor_invoice_lines":[{"column":"unit_cost","similarity":0.622062223414914}],"tax_rates":[{"column":"rate","similarity":0.6139738053543071}],"units_of_measure":[{"column":"conversion_factor","similarity":0.6098054698975929}]},"fused_scores":[{"table":"quote_lines","fused":0.8435062965525564,"table_sim":0.6904269230356019,"col_score":1.0731253568279882},{"table":"sales_quotes","fused":0.822058608228363,"table_sim":0.6684713746648914,"col_score":1.0524394585735701},{"table":"sales_orders","fused":0.8127322798420042,"table_sim":0.6835641897302034,"col_score":1.0064844150097056},{"table":"order_lines","fused":0.8039156369738973,"table_sim":0.6535630831611231,"col_score":1.0294444676930585},{"table":"purchase_orders","fused":0.7845071396079362,"table_sim":0.6306886393929901,"col_score":1.0152348899303552},{"table":"po_lines","fused":0.7466346640006585,"table_sim":0.6176945995415711,"col_score":0.9400447606892894},{"table":"product_suppliers","fused":0.6061702012861401,"table_sim":0.5906242515558167,"col_score":0.6294891258816252},{"table":"vendor_invoice_lines","fused":0.598674127337114,"table_sim":0.5830820632852473,"col_score":0.622062223414914},{"table":"tax_rates","fused":0.5886810744140096,"table_sim":0.5718192537871447,"col_score":0.6139738053543071},{"table":"units_of_measure","fused":0.5817019331440714,"table_sim":0.562966241975057,"col_score":0.6098054698975929},{"table":"vendor_invoices","fused":0.3515727532759041,"table_sim":0.5859545887931735,"col_score":0},{"table":"goods_receipts","fused":0.3474530651776901,"table_sim":0.5790884419628168,"col_score":0},{"table":"requisition_lines","fused":0.34273322134686,"table_sim":0.5712220355781,"col_score":0},{"table":"transfer_lines","fused":0.3382024014611587,"table_sim":0.5636706691019312,"col_score":0},{"table":"performance_reviews","fused":0.3374724455962846,"table_sim":0.5624540759938077,"col_score":0}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":11,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"countries","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":32,"total_retrieval_latency_ms":38,"sql_generated":"SELECT COUNT(sales_orders.order_id) / NULLIF(COUNT(quote_lines.line_id), 0) AS conversion_rate FROM sales_quotes JOIN quote_lines ON sales_quotes.quote_id = quote_lines.quote_id JOIN sales_orders ON quote_lines.order_id = sales_orders.order_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column quote_lines.order_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":4,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":3416,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column quote_lines.order_id does not exist"}
{"timestamp":"2026-01-29T20:44:19.580Z","query_id":"bcb782e6-fb63-4ed7-ad7f-9b253482ec0f","question":"List sales orders by sales representative with their totals","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_orders","purchase_orders","order_lines","sales_quotes","po_lines","sales_regions","vendor_invoices","receipt_lines","vendor_invoice_lines","product_suppliers","goods_receipts","quote_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.758754229471184},{"table":"purchase_orders","similarity":0.6987531686909988},{"table":"order_lines","similarity":0.6881373549198537},{"table":"goods_receipts","similarity":0.6456282553665884},{"table":"sales_quotes","similarity":0.6444526679613465},{"table":"sales_territories","similarity":0.6375070500401926},{"table":"sales_regions","similarity":0.6277211189501499},{"table":"vendor_invoices","similarity":0.6246861185869929},{"table":"po_lines","similarity":0.6084083791424837},{"table":"receipt_lines","similarity":0.6068971146953636},{"table":"product_suppliers","similarity":0.6062359599284572},{"table":"quote_lines","similarity":0.6037562036512956},{"table":"vendor_invoice_lines","similarity":0.6029372840473417},{"table":"inventory_levels","similarity":0.591644735010043},{"table":"requisition_lines","similarity":0.5902331648645791}],"column_hits_per_table":{"sales_orders":15,"purchase_orders":13,"sales_quotes":6,"order_lines":5,"sales_regions":1,"sales_territories":1,"vendor_invoices":1,"receipt_lines":1,"po_lines":2,"vendor_invoice_lines":1,"goods_receipts":1,"sales_opportunities":1,"product_suppliers":1,"inventory_transactions":1},"top_columns_per_table":{"sales_orders":[{"column":"total","similarity":0.7998245354916855},{"column":"tax_amount","similarity":0.7409304914795294},{"column":"subtotal","similarity":0.7386795928063996}],"purchase_orders":[{"column":"total","similarity":0.7369898987643527},{"column":"tax_amount","similarity":0.6880914687154579},{"column":"subtotal","similarity":0.6805274523503672}],"sales_quotes":[{"column":"total","similarity":0.7000946313237136},{"column":"status","similarity":0.6570352148347643},{"column":"tax_amount","similarity":0.6496185243884612}],"order_lines":[{"column":"quantity_shipped","similarity":0.6754287630112775},{"column":"line_total","similarity":0.6747818022026829},{"column":"order_id","similarity":0.6500926353163158}],"sales_regions":[{"column":"target_revenue","similarity":0.6609566639968198}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6507336012447592}],"vendor_invoices":[{"column":"total","similarity":0.6490968088980056}],"receipt_lines":[{"column":"quantity_received","similarity":0.6403091638652453}],"po_lines":[{"column":"line_total","similarity":0.633906772238869},{"column":"quantity_received","similarity":0.619669544018957}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.6318424746468201}],"goods_receipts":[{"column":"po_id","similarity":0.6305521343448763}],"sales_opportunities":[{"column":"amount","similarity":0.6247832200658987}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6242146192079842}],"inventory_transactions":[{"column":"quantity","similarity":0.6183812252695141}]},"fused_scores":[{"table":"sales_orders","fused":0.9233684501752903,"table_sim":0.758754229471184,"col_score":1.17028978123145},{"table":"purchase_orders","fused":0.8516661544634319,"table_sim":0.6987531686909988,"col_score":1.0810356331220816},{"table":"order_lines","fused":0.8180102785969599,"table_sim":0.6881373549198537,"col_score":1.012819664112619},{"table":"sales_quotes","fused":0.7966331581839856,"table_sim":0.6444526679613465,"col_score":1.0249038935179442},{"table":"po_lines","fused":0.7425416451848292,"table_sim":0.6084083791424837,"col_score":0.9437415442483476},{"table":"sales_regions","fused":0.6410153369688179,"table_sim":0.6277211189501499,"col_score":0.6609566639968198},{"table":"vendor_invoices","fused":0.634450394711398,"table_sim":0.6246861185869929,"col_score":0.6490968088980056},{"table":"receipt_lines","fused":0.6202619343633162,"table_sim":0.6068971146953636,"col_score":0.6403091638652453},{"table":"vendor_invoice_lines","fused":0.6144993602871331,"table_sim":0.6029372840473417,"col_score":0.6318424746468201},{"table":"product_suppliers","fused":0.613427423640268,"table_sim":0.6062359599284572,"col_score":0.6242146192079842},{"table":"sales_territories","fused":0.5647096383726481,"table_sim":0.6375070500401926,"col_score":0.4555135208713314},{"table":"goods_receipts","fused":0.5639315508365184,"table_sim":0.6456282553665884,"col_score":0.4413864940414134},{"table":"quote_lines","fused":0.36225372219077734,"table_sim":0.6037562036512956,"col_score":0},{"table":"inventory_levels","fused":0.3549868410060258,"table_sim":0.591644735010043,"col_score":0},{"table":"requisition_lines","fused":0.3541398989187475,"table_sim":0.5902331648645791,"col_score":0}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"sales_territories","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":32,"total_retrieval_latency_ms":38,"sql_generated":"SELECT sr.name, SUM(so.total) AS total_sales FROM sales_orders so JOIN sales_regions sr ON so.sales_rep_id = sr.employee_id GROUP BY sr.name;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column sr.employee_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":0,"autocorrect_failure_reason":"No candidates found for column 'employee_id'","total_latency_ms":2379,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column sr.employee_id does not exist"}
{"timestamp":"2026-01-29T20:44:21.959Z","query_id":"2c476ffd-998d-4227-948f-a71b85c9dfd7","question":"Which products have inventory below their reorder point?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["inventory_levels","reorder_rules","order_lines","purchase_orders","sales_orders","inventory_transactions","inventory_adjustments","products","product_suppliers","po_lines","adjustment_lines","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_levels","similarity":0.7070801714571546},{"table":"reorder_rules","similarity":0.6993615141081165},{"table":"order_lines","similarity":0.6642088827606001},{"table":"purchase_orders","similarity":0.6443483426703897},{"table":"inventory_transactions","similarity":0.6416382343377212},{"table":"products","similarity":0.6294483845877934},{"table":"sales_orders","similarity":0.6263982770622627},{"table":"inventory_adjustments","similarity":0.625212937166316},{"table":"product_suppliers","similarity":0.6251606663311581},{"table":"adjustment_lines","similarity":0.6130209514155518},{"table":"po_lines","similarity":0.6120042387827147},{"table":"requisition_lines","similarity":0.6038701680112407},{"table":"goods_receipts","similarity":0.6006720578725578},{"table":"product_categories","similarity":0.5982652346826921},{"table":"vendor_invoice_lines","similarity":0.5939487288947369}],"column_hits_per_table":{"inventory_levels":8,"reorder_rules":6,"order_lines":4,"sales_orders":6,"inventory_transactions":6,"po_lines":1,"inventory_adjustments":6,"purchase_orders":5,"requisition_lines":1,"product_suppliers":1,"warehouse_locations":1,"purchase_requisitions":2,"products":2,"receipt_lines":1},"top_columns_per_table":{"inventory_levels":[{"column":"product_id","similarity":0.6933487635392793},{"column":"last_count_date","similarity":0.6823075362329812},{"column":"quantity_reserved","similarity":0.6757460490667979}],"reorder_rules":[{"column":"product_id","similarity":0.6926440847612831},{"column":"reorder_quantity","similarity":0.6606737830959721},{"column":"max_quantity","similarity":0.6520065510249886}],"order_lines":[{"column":"product_id","similarity":0.6859094375448689},{"column":"quantity_shipped","similarity":0.6455034843795919},{"column":"quantity","similarity":0.6334487398094706}],"sales_orders":[{"column":"order_number","similarity":0.6639517787797891},{"column":"status","similarity":0.6466630830274546},{"column":"order_date","similarity":0.639183860244724}],"inventory_transactions":[{"column":"product_id","similarity":0.6577299676888266},{"column":"location_id","similarity":0.6475618823542578},{"column":"quantity","similarity":0.6407976916150718}],"po_lines":[{"column":"product_id","similarity":0.6572816867979093}],"inventory_adjustments":[{"column":"status","similarity":0.6508806959470139},{"column":"reason","similarity":0.6489151000391595},{"column":"adjustment_number","similarity":0.6357746244949577}],"purchase_orders":[{"column":"po_number","similarity":0.6499714608427599},{"column":"status","similarity":0.6425932566416922},{"column":"expected_date","similarity":0.6284413308063352}],"requisition_lines":[{"column":"product_id","similarity":0.6451053156263248}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.644742435890616}],"warehouse_locations":[{"column":"aisle","similarity":0.6337557011841548}],"purchase_requisitions":[{"column":"requisition_number","similarity":0.6250413268166893},{"column":"status","similarity":0.6175422714713268}],"products":[{"column":"list_price","similarity":0.623827175050673},{"column":"category_id","similarity":0.6206202221080743}],"receipt_lines":[{"column":"product_id","similarity":0.6141560834320862}]},"fused_scores":[{"table":"inventory_levels","fused":0.8323203271808449,"table_sim":0.7070801714571546,"col_score":1.0201805607663803},{"table":"reorder_rules","fused":0.8142877319082565,"table_sim":0.6993615141081165,"col_score":0.9866770586084664},{"table":"order_lines","fused":0.783416471370091,"table_sim":0.6642088827606001,"col_score":0.9622278542843272},{"table":"purchase_orders","fused":0.7722858561006047,"table_sim":0.6443483426703897,"col_score":0.9641921262459275},{"table":"sales_orders","fused":0.7692564497982181,"table_sim":0.6263982770622627,"col_score":0.983543708902151},{"table":"inventory_transactions","fused":0.7669992320885244,"table_sim":0.6416382343377212,"col_score":0.9550407287147291},{"table":"inventory_adjustments","fused":0.761848727214445,"table_sim":0.625212937166316,"col_score":0.9668024122866383},{"table":"products","fused":0.7140867318680757,"table_sim":0.6294483845877934,"col_score":0.8410442527884989},{"table":"product_suppliers","fused":0.6329933741549413,"table_sim":0.6251606663311581,"col_score":0.644742435890616},{"table":"po_lines","fused":0.5512414155730434,"table_sim":0.6120042387827147,"col_score":0.4600971807585365},{"table":"requisition_lines","fused":0.5429515891821154,"table_sim":0.6038701680112407,"col_score":0.4515737209384273},{"table":"adjustment_lines","fused":0.36781257084933106,"table_sim":0.6130209514155518,"col_score":0},{"table":"goods_receipts","fused":0.3604032347235347,"table_sim":0.6006720578725578,"col_score":0},{"table":"product_categories","fused":0.3589591408096153,"table_sim":0.5982652346826921,"col_score":0},{"table":"vendor_invoice_lines","fused":0.35636923733684217,"table_sim":0.5939487288947369,"col_score":0}],"fk_expansion_candidates":19,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"product_categories","reason":"max_tables"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":52,"total_retrieval_latency_ms":59,"sql_generated":"SELECT p.product_id, p.name FROM products p JOIN inventory_levels il ON p.product_id = il.product_id JOIN reorder_rules rr ON p.product_id = rr.product_id WHERE il.quantity_available < rr.min_quantity;","tables_used_in_sql":[],"explain_result":"success","rows_returned":41,"total_latency_ms":1143}
{"timestamp":"2026-01-29T20:44:23.102Z","query_id":"282942ea-5fad-40c5-b9f1-3243999d5a95","question":"Show total inventory value by warehouse","attempt_count":2,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["inventory_levels","warehouse_locations","inventory_transactions","warehouses","inventory_adjustments","sales_orders","stock_transfers","purchase_orders","fixed_assets","product_suppliers","goods_receipts","reorder_rules"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_levels","similarity":0.7104203582862987},{"table":"inventory_transactions","similarity":0.680757846413893},{"table":"warehouse_locations","similarity":0.6688272683283106},{"table":"inventory_adjustments","similarity":0.6606002830367331},{"table":"warehouses","similarity":0.6556396900395098},{"table":"goods_receipts","similarity":0.6485940357294664},{"table":"stock_transfers","similarity":0.6361222068277603},{"table":"receipt_lines","similarity":0.599261793575482},{"table":"fixed_assets","similarity":0.5815202009406938},{"table":"purchase_orders","similarity":0.572969973940203},{"table":"asset_categories","similarity":0.5669210401950147},{"table":"asset_maintenance","similarity":0.5650580534060331},{"table":"product_suppliers","similarity":0.5642200983640595},{"table":"sales_orders","similarity":0.5616335878669071},{"table":"reorder_rules","similarity":0.5613905707653182}],"column_hits_per_table":{"inventory_levels":8,"inventory_transactions":7,"inventory_adjustments":2,"goods_receipts":1,"warehouses":6,"stock_transfers":2,"warehouse_locations":7,"sales_orders":3,"vendor_invoices":2,"purchase_orders":1,"budgets":1,"sales_quotes":1,"departments":1,"receipt_lines":1,"product_suppliers":1,"reorder_rules":1,"depreciation_entries":2,"products":2,"fixed_assets":1},"top_columns_per_table":{"inventory_levels":[{"column":"warehouse_id","similarity":0.7245152932924512},{"column":"location_id","similarity":0.670229449220733},{"column":"quantity_available","similarity":0.6634243412325281}],"inventory_transactions":[{"column":"warehouse_id","similarity":0.7126219801719647},{"column":"quantity","similarity":0.6882665247995969},{"column":"location_id","similarity":0.6644472601923928}],"inventory_adjustments":[{"column":"warehouse_id","similarity":0.7000232196630412},{"column":"adjusted_by","similarity":0.6038072357651799}],"goods_receipts":[{"column":"warehouse_id","similarity":0.6983268325646605}],"warehouses":[{"column":"warehouse_id","similarity":0.6884846242517689},{"column":"code","similarity":0.666009086549763},{"column":"manager_id","similarity":0.6602922237598574}],"stock_transfers":[{"column":"to_warehouse_id","similarity":0.68127907076134},{"column":"from_warehouse_id","similarity":0.6749809961693801}],"warehouse_locations":[{"column":"capacity","similarity":0.6795034389771706},{"column":"warehouse_id","similarity":0.6699168364120748},{"column":"aisle","similarity":0.6398304684247763}],"sales_orders":[{"column":"total","similarity":0.6721682901729499},{"column":"tax_amount","similarity":0.6091494655585886},{"column":"shipping_cost","similarity":0.6058838567040926}],"vendor_invoices":[{"column":"total","similarity":0.6677524443677078},{"column":"subtotal","similarity":0.600674989172044}],"purchase_orders":[{"column":"total","similarity":0.6534737529838377}],"budgets":[{"column":"total_amount","similarity":0.6378055154758845}],"sales_quotes":[{"column":"total","similarity":0.623918506647635}],"departments":[{"column":"budget","similarity":0.6201249087174965}],"receipt_lines":[{"column":"location_id","similarity":0.6169512352230854}],"product_suppliers":[{"column":"unit_cost","similarity":0.6157369492414859}],"reorder_rules":[{"column":"warehouse_id","similarity":0.6106322891909687}],"depreciation_entries":[{"column":"amount","similarity":0.6082306456614778},{"column":"book_value","similarity":0.6060019840891933}],"products":[{"column":"unit_cost","similarity":0.6081881272182337},{"column":"list_price","similarity":0.6022375697293547}],"fixed_assets":[{"column":"disposal_amount","similarity":0.6045093113587248}]},"fused_scores":[{"table":"inventory_levels","fused":0.8234550149369311,"table_sim":0.7104203582862987,"col_score":0.9930069999128798},{"table":"warehouse_locations","fused":0.8010638302728099,"table_sim":0.6688272683283106,"col_score":0.9994186731895587},{"table":"inventory_transactions","fused":0.7835283949922496,"table_sim":0.680757846413893,"col_score":0.9376842178597845},{"table":"warehouses","fused":0.7561752960388588,"table_sim":0.6556396900395098,"col_score":0.9069787050378821},{"table":"inventory_adjustments","fused":0.7358863148809376,"table_sim":0.6606002830367331,"col_score":0.8488153626472443},{"table":"sales_orders","fused":0.7276773619010419,"table_sim":0.5616335878669071,"col_score":0.9767430229522442},{"table":"stock_transfers","fused":0.6669288033735445,"table_sim":0.6361222068277603,"col_score":0.713138698192221},{"table":"purchase_orders","fused":0.6051714855576569,"table_sim":0.572969973940203,"col_score":0.6534737529838377},{"table":"fixed_assets","fused":0.5907158451079062,"table_sim":0.5815202009406938,"col_score":0.6045093113587248},{"table":"product_suppliers","fused":0.58482683871503,"table_sim":0.5642200983640595,"col_score":0.6157369492414859},{"table":"goods_receipts","fused":0.5846879345557847,"table_sim":0.6485940357294664,"col_score":0.4888287827952624},{"table":"receipt_lines","fused":0.5323034220077532,"table_sim":0.599261793575482,"col_score":0.4318658646561597},{"table":"reorder_rules","fused":0.5078113834326621,"table_sim":0.5613905707653182,"col_score":0.42744260243367804},{"table":"vendor_invoices","fused":0.3872359755814919,"table_sim":0,"col_score":0.9680899389537297},{"table":"depreciation_entries","fused":0.3644926550824298,"table_sim":0,"col_score":0.9112316377060744}],"fk_expansion_candidates":21,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"employees","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_categories","reason":"max_tables"},{"table":"order_lines","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"vendor_invoices","reason":"max_tables"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"receipt_lines","reason":"max_tables"},{"table":"products","reason":"max_tables"},{"table":"customers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"max_tables"},{"table":"sales_quotes","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":24,"total_retrieval_latency_ms":31,"sql_generated":"","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column w.location_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":5,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":1960,"failure_type":"execution_error","failure_details":"Model did not generate SELECT statement"}
{"timestamp":"2026-01-29T20:44:25.062Z","query_id":"09badb1e-f344-46b5-948f-0cde024c543e","question":"List products that had stock transfers in the last 30 days","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["stock_transfers","asset_transfers","product_suppliers","transfer_lines","products","sales_orders","purchase_orders","sales_opportunities","inventory_transactions","bank_transactions","goods_receipts","inventory_levels"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"stock_transfers","similarity":0.7091850354041176},{"table":"transfer_lines","similarity":0.646870577681612},{"table":"asset_transfers","similarity":0.59288750153646},{"table":"product_suppliers","similarity":0.5817884382151997},{"table":"goods_receipts","similarity":0.5680812156740983},{"table":"products","similarity":0.5634067444500328},{"table":"inventory_transactions","similarity":0.5602292192430635},{"table":"purchase_orders","similarity":0.5596151991091506},{"table":"fixed_assets","similarity":0.5580960077160902},{"table":"sales_orders","similarity":0.5561090865394333},{"table":"sales_opportunities","similarity":0.5491462356670244},{"table":"asset_maintenance","similarity":0.5473904753072384},{"table":"purchase_requisitions","similarity":0.5332712706373074},{"table":"bank_transactions","similarity":0.5331448467569079},{"table":"inventory_adjustments","similarity":0.530733629333142}],"column_hits_per_table":{"stock_transfers":9,"asset_transfers":4,"product_suppliers":2,"products":7,"fixed_assets":1,"transfer_lines":3,"sales_orders":3,"goods_receipts":2,"sales_opportunities":2,"purchase_orders":3,"inventory_transactions":2,"bank_transactions":3,"inventory_adjustments":2,"sales_quotes":2,"asset_maintenance":1,"purchase_requisitions":2,"inventory_levels":1,"vendor_invoices":1},"top_columns_per_table":{"stock_transfers":[{"column":"transfer_date","similarity":0.7569744068757143},{"column":"requested_date","similarity":0.7407780240698681},{"column":"status","similarity":0.7336388205522848}],"asset_transfers":[{"column":"transfer_date","similarity":0.6801557927296986},{"column":"reason","similarity":0.636937017402658},{"column":"transferred_by","similarity":0.591261555474914}],"product_suppliers":[{"column":"lead_time_days","similarity":0.6325433597312592},{"column":"vendor_sku","similarity":0.5983939107153067}],"products":[{"column":"weight","similarity":0.6269164154643503},{"column":"sku","similarity":0.6128165683332525},{"column":"name","similarity":0.6112501339273688}],"fixed_assets":[{"column":"purchase_date","similarity":0.6194298336524596}],"transfer_lines":[{"column":"transfer_id","similarity":0.616838099560071},{"column":"product_id","similarity":0.6124982850699332},{"column":"quantity_transferred","similarity":0.5929855373409126}],"sales_orders":[{"column":"ship_date","similarity":0.6139033315106148},{"column":"status","similarity":0.5980018171133202},{"column":"order_date","similarity":0.5881191497886654}],"goods_receipts":[{"column":"receipt_date","similarity":0.6086781538927446},{"column":"notes","similarity":0.5962651293145639}],"sales_opportunities":[{"column":"actual_close_date","similarity":0.6071636494672776},{"column":"expected_close_date","similarity":0.5912239207558383}],"purchase_orders":[{"column":"status","similarity":0.6014695517939539},{"column":"expected_date","similarity":0.5942592923069729},{"column":"order_date","similarity":0.5880912431098863}],"inventory_transactions":[{"column":"transaction_date","similarity":0.5945769623932919},{"column":"reference_type","similarity":0.5800879925710923}],"bank_transactions":[{"column":"transaction_date","similarity":0.5929428887812874},{"column":"reference","similarity":0.5783350592316007},{"column":"reconciled","similarity":0.5781446888114008}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.5902712511353371},{"column":"status","similarity":0.5772237526402182}],"sales_quotes":[{"column":"valid_until","similarity":0.5888547647382517},{"column":"status","similarity":0.587261164996558}],"asset_maintenance":[{"column":"completed_date","similarity":0.586704390488891}],"purchase_requisitions":[{"column":"status","similarity":0.5849457914930625},{"column":"approved_date","similarity":0.5749663116518828}],"inventory_levels":[{"column":"last_count_date","similarity":0.5761760152247924}],"vendor_invoices":[{"column":"status","similarity":0.5752789063344165}]},"fused_scores":[{"table":"stock_transfers","fused":0.8764563888067298,"table_sim":0.7091850354041176,"col_score":1.1273634189106483},{"table":"asset_transfers","fused":0.755182221494287,"table_sim":0.59288750153646,"col_score":0.9986243014310277},{"table":"product_suppliers","fused":0.7217691889646848,"table_sim":0.5817884382151997,"col_score":0.9317403150889125},{"table":"transfer_lines","fused":0.7116738954837423,"table_sim":0.646870577681612,"col_score":0.8088788721869374},{"table":"products","fused":0.7113739265224104,"table_sim":0.5634067444500328,"col_score":0.9333246996309765},{"table":"sales_orders","fused":0.696850614485639,"table_sim":0.5561090865394333,"col_score":0.9079629064049475},{"table":"purchase_orders","fused":0.6910910850102567,"table_sim":0.5596151991091506,"col_score":0.8883049138619161},{"table":"sales_opportunities","fused":0.6905979853382933,"table_sim":0.5491462356670244,"col_score":0.9027756098451968},{"table":"inventory_transactions","fused":0.6899859150173733,"table_sim":0.5602292192430635,"col_score":0.884620958678838},{"table":"bank_transactions","fused":0.6727310754129798,"table_sim":0.5331448467569079,"col_score":0.8821104183970878},{"table":"goods_receipts","fused":0.6677971090655958,"table_sim":0.5680812156740983,"col_score":0.8173709491528419},{"table":"inventory_adjustments","fused":0.6353600034236506,"table_sim":0.530733629333142,"col_score":0.7922995645594134},{"table":"purchase_requisitions","fused":0.6318416978521664,"table_sim":0.5332712706373074,"col_score":0.7796973386744547},{"table":"fixed_assets","fused":0.582629538090638,"table_sim":0.5580960077160902,"col_score":0.6194298336524596},{"table":"asset_maintenance","fused":0.5631160413798995,"table_sim":0.5473904753072384,"col_score":0.586704390488891}],"fk_expansion_candidates":24,"fk_expansion_added":2,"fk_expansion_blocked_count":19,"fk_expansion_blocked":[{"table":"employees","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"sales_quotes","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"bank_accounts","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":31,"total_retrieval_latency_ms":37,"sql_generated":"SELECT DISTINCT p.product_id, p.name FROM products AS p JOIN inventory_transactions AS it ON p.product_id = it.product_id AND it.transaction_date >= CURRENT_DATE - INTERVAL '30 days' WHERE EXISTS (SELECT 1 FROM stock_transfers st WHERE st.product_id = p.product_id);","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column st.product_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":5,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":3546,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column st.product_id does not exist"}
{"timestamp":"2026-01-29T20:44:28.608Z","query_id":"9eac0f25-73dd-4f88-865c-151bd263f611","question":"What is the total spend by vendor this year?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["vendor_invoices","purchase_orders","vendors","project_expenses","vendor_invoice_lines","budgets","project_budgets","sales_orders","product_suppliers","purchase_requisitions","budget_lines","fiscal_years"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"vendor_invoices","similarity":0.639424435349415},{"table":"vendors","similarity":0.6244918790926227},{"table":"purchase_orders","similarity":0.6177456671712362},{"table":"product_suppliers","similarity":0.598703660216106},{"table":"fiscal_years","similarity":0.5958886040093712},{"table":"project_expenses","similarity":0.5917559199865416},{"table":"vendor_contacts","similarity":0.5871352454607119},{"table":"project_budgets","similarity":0.5783111700735831},{"table":"vendor_invoice_lines","similarity":0.5735528102960924},{"table":"budgets","similarity":0.5729808761794307},{"table":"sales_orders","similarity":0.558652322840589},{"table":"purchase_requisitions","similarity":0.5504399922373249},{"table":"fiscal_periods","similarity":0.5474194111304026},{"table":"goods_receipts","similarity":0.5455071550265284},{"table":"cost_centers","similarity":0.5407092339260996}],"column_hits_per_table":{"vendor_invoices":10,"budgets":2,"purchase_orders":5,"vendor_invoice_lines":3,"vendors":9,"project_expenses":3,"project_budgets":2,"sales_orders":2,"product_suppliers":2,"sales_quotes":2,"projects":1,"fixed_assets":3,"asset_maintenance":1,"budget_lines":1,"products":1,"depreciation_schedules":1,"purchase_requisitions":1,"cost_centers":1},"top_columns_per_table":{"vendor_invoices":[{"column":"total","similarity":0.7074726026964867},{"column":"tax_amount","similarity":0.6649497692347739},{"column":"amount_paid","similarity":0.6613394434119355}],"budgets":[{"column":"total_amount","similarity":0.6614983036750417},{"column":"approved_by","similarity":0.5947070667678063}],"purchase_orders":[{"column":"total","similarity":0.6515245249628966},{"column":"tax_amount","similarity":0.6241597829948147},{"column":"vendor_id","similarity":0.6143595728723519}],"vendor_invoice_lines":[{"column":"unit_cost","similarity":0.6418835765382308},{"column":"amount","similarity":0.640406660125043},{"column":"quantity","similarity":0.6011977568369454}],"vendors":[{"column":"payment_terms","similarity":0.6369764670557316},{"column":"vendor_number","similarity":0.6217316370349235},{"column":"phone","similarity":0.6164215736258496}],"project_expenses":[{"column":"expense_date","similarity":0.6340219496762818},{"column":"amount","similarity":0.6226087404303633},{"column":"approved_by","similarity":0.5951826173297748}],"project_budgets":[{"column":"actual_amount","similarity":0.6339228432560066},{"column":"planned_amount","similarity":0.6124397686150321}],"sales_orders":[{"column":"total","similarity":0.6331667607848637},{"column":"tax_amount","similarity":0.5979011469280059}],"product_suppliers":[{"column":"unit_cost","similarity":0.627453917704397},{"column":"vendor_id","similarity":0.6081443532598847}],"sales_quotes":[{"column":"total","similarity":0.6239159141661016},{"column":"tax_amount","similarity":0.5928428446380807}],"projects":[{"column":"budget","similarity":0.6156140380189964}],"fixed_assets":[{"column":"vendor_id","similarity":0.6143746297105622},{"column":"purchase_cost","similarity":0.6016807292507821},{"column":"purchase_date","similarity":0.5932914020371511}],"asset_maintenance":[{"column":"vendor_id","similarity":0.6041941466937952}],"budget_lines":[{"column":"amount","similarity":0.6028914729549076}],"products":[{"column":"unit_cost","similarity":0.59947881070682}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5989680887270853}],"purchase_requisitions":[{"column":"approved_date","similarity":0.5937593260844434}],"cost_centers":[{"column":"is_active","similarity":0.5896614020585967}]},"fused_scores":[{"table":"vendor_invoices","fused":0.7996336561351984,"table_sim":0.639424435349415,"col_score":1.0399474873138737},{"table":"purchase_orders","fused":0.7560891668868633,"table_sim":0.6177456671712362,"col_score":0.9636044164603039},{"table":"vendors","fused":0.753832041684851,"table_sim":0.6244918790926227,"col_score":0.9478422855731934},{"table":"project_expenses","fused":0.7331840799485103,"table_sim":0.5917559199865416,"col_score":0.9453263198914634},{"table":"vendor_invoice_lines","fused":0.7289664488179564,"table_sim":0.5735528102960924,"col_score":0.9620869066007522},{"table":"budgets","fused":0.7273292605312365,"table_sim":0.5729808761794307,"col_score":0.9588518370589448},{"table":"project_budgets","fused":0.723043793069559,"table_sim":0.5783111700735831,"col_score":0.9401427275635226},{"table":"sales_orders","fused":0.7080383274039,"table_sim":0.558652322840589,"col_score":0.9321173342488667},{"table":"product_suppliers","fused":0.6953439726678063,"table_sim":0.598703660216106,"col_score":0.8403044413453566},{"table":"purchase_requisitions","fused":0.5677677257761723,"table_sim":0.5504399922373249,"col_score":0.5937593260844434},{"table":"cost_centers","fused":0.48953073293206684,"table_sim":0.5407092339260996,"col_score":0.4127629814410177},{"table":"sales_quotes","fused":0.3681349345940568,"table_sim":0,"col_score":0.9203373364851419},{"table":"fixed_assets","fused":0.3593305721077431,"table_sim":0,"col_score":0.8983264302693577},{"table":"fiscal_years","fused":0.35753316240562266,"table_sim":0.5958886040093712,"col_score":0},{"table":"vendor_contacts","fused":0.3522811472764272,"table_sim":0.5871352454607119,"col_score":0}],"fk_expansion_candidates":18,"fk_expansion_added":2,"fk_expansion_blocked_count":10,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"goods_receipts","reason":"max_tables"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"max_tables"},{"table":"projects","reason":"max_tables"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"vendor_contacts","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":61,"total_retrieval_latency_ms":67,"sql_generated":"SELECT v.vendor_id, SUM(vi.amount) AS total_spend FROM vendor_invoices vi JOIN vendors v ON vi.vendor_id = v.vendor_id WHERE EXTRACT(YEAR FROM vi.invoice_date) = EXTRACT(YEAR FROM CURRENT_DATE) GROUP BY v.vendor_id;","tables_used_in_sql":[],"total_latency_ms":3557,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T20:44:32.166Z","query_id":"5ac5fda1-0212-4672-bae4-5d1a497fbd72","question":"List purchase orders that are overdue (expected date passed but not received)","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["purchase_orders","sales_orders","purchase_requisitions","vendor_invoices","goods_receipts","order_lines","performance_reviews","po_lines","timesheets","stock_transfers","fixed_assets","receipt_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"purchase_orders","similarity":0.6892780734130105},{"table":"sales_orders","similarity":0.6436897773327827},{"table":"goods_receipts","similarity":0.6352418457409176},{"table":"purchase_requisitions","similarity":0.6320653594363884},{"table":"order_lines","similarity":0.6266578306760409},{"table":"vendor_invoices","similarity":0.6080136686064002},{"table":"po_lines","similarity":0.6011866959038077},{"table":"requisition_lines","similarity":0.5693577300655596},{"table":"receipt_lines","similarity":0.5677454518528996},{"table":"product_suppliers","similarity":0.5615090637021368},{"table":"stock_transfers","similarity":0.5602310027454163},{"table":"timesheets","similarity":0.5554457572922294},{"table":"sales_opportunities","similarity":0.545868201128478},{"table":"performance_reviews","similarity":0.5450261489382808},{"table":"vendor_invoice_lines","similarity":0.5442160951221834}],"column_hits_per_table":{"purchase_orders":15,"sales_orders":8,"purchase_requisitions":6,"vendor_invoices":3,"fixed_assets":1,"stock_transfers":1,"performance_reviews":3,"order_lines":3,"goods_receipts":2,"sales_opportunities":1,"sales_quotes":2,"po_lines":2,"inventory_transactions":1,"timesheets":2},"top_columns_per_table":{"purchase_orders":[{"column":"expected_date","similarity":0.7928880554606059},{"column":"order_date","similarity":0.7657440492397745},{"column":"status","similarity":0.7519184819415597}],"sales_orders":[{"column":"order_date","similarity":0.7211283730098031},{"column":"required_date","similarity":0.7169867205643441},{"column":"ship_date","similarity":0.709284550816042}],"purchase_requisitions":[{"column":"approved_date","similarity":0.6836791699738378},{"column":"request_date","similarity":0.6834968678419967},{"column":"required_date","similarity":0.6788387331991973}],"vendor_invoices":[{"column":"due_date","similarity":0.6486593581769071},{"column":"status","similarity":0.6338796222049127},{"column":"invoice_date","similarity":0.6295602886682071}],"fixed_assets":[{"column":"purchase_date","similarity":0.6430714322189274}],"stock_transfers":[{"column":"requested_date","similarity":0.637706246401799}],"performance_reviews":[{"column":"review_date","similarity":0.6367120823797185},{"column":"review_period_end","similarity":0.6226937978004472},{"column":"review_period_start","similarity":0.6126884795240689}],"order_lines":[{"column":"quantity_shipped","similarity":0.6309090622279526},{"column":"order_id","similarity":0.615272097850357},{"column":"product_id","similarity":0.6125179904480164}],"goods_receipts":[{"column":"po_id","similarity":0.6298071972797271},{"column":"receipt_date","similarity":0.6286410440687602}],"sales_opportunities":[{"column":"expected_close_date","similarity":0.6266064464168489}],"sales_quotes":[{"column":"status","similarity":0.6252578342715298},{"column":"valid_until","similarity":0.6173297581247675}],"po_lines":[{"column":"po_id","similarity":0.6215991718566652},{"column":"quantity_received","similarity":0.6148659346007377}],"inventory_transactions":[{"column":"transaction_date","similarity":0.6171947868805752}],"timesheets":[{"column":"status","similarity":0.6144646954961696},{"column":"approved_date","similarity":0.6115859961900876}]},"fused_scores":[{"table":"purchase_orders","fused":0.8838708760800036,"table_sim":0.6892780734130105,"col_score":1.1757600800804933},{"table":"sales_orders","fused":0.8180625597164597,"table_sim":0.6436897773327827,"col_score":1.079621733291975},{"table":"purchase_requisitions","fused":0.7894102572197675,"table_sim":0.6320653594363884,"col_score":1.0254276038948362},{"table":"vendor_invoices","fused":0.7501840021682444,"table_sim":0.6080136686064002,"col_score":0.9634395025110107},{"table":"goods_receipts","fused":0.7207745326912165,"table_sim":0.6352418457409176,"col_score":0.8490735631166647},{"table":"order_lines","fused":0.7144964169958555,"table_sim":0.6266578306760409,"col_score":0.8462542964755775},{"table":"performance_reviews","fused":0.7062392818749454,"table_sim":0.5450261489382808,"col_score":0.9480589812799421},{"table":"po_lines","fused":0.6936822754425128,"table_sim":0.6011866959038077,"col_score":0.8324256447505705},{"table":"timesheets","fused":0.6639269102208365,"table_sim":0.5554457572922294,"col_score":0.8266486396137469},{"table":"stock_transfers","fused":0.5912211002079693,"table_sim":0.5602310027454163,"col_score":0.637706246401799},{"table":"sales_opportunities","fused":0.5781634992438264,"table_sim":0.545868201128478,"col_score":0.6266064464168489},{"table":"requisition_lines","fused":0.3416146380393357,"table_sim":0.5693577300655596,"col_score":0},{"table":"receipt_lines","fused":0.34064727111173976,"table_sim":0.5677454518528996,"col_score":0},{"table":"product_suppliers","fused":0.3369054382212821,"table_sim":0.5615090637021368,"col_score":0},{"table":"sales_quotes","fused":0.3344680000479212,"table_sim":0,"col_score":0.8361700001198029}],"fk_expansion_candidates":14,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"requisition_lines","reason":"max_tables"},{"table":"sales_quotes","reason":"max_tables"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":34,"total_retrieval_latency_ms":40,"sql_generated":"SELECT po.po_id AS \"Purchase Order ID\", po.po_number AS \"Purchase Order Number\", po.order_date, po.required_date, po.status AS \"Status\" FROM purchase_orders po JOIN goods_receipts gr ON po.po_id = gr.po_id AND gr.receipt_date > CURRENT_DATE WHERE po.expected_date < CURRENT_DATE;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column po.required_date does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":5,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":4007,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column po.required_date does not exist"}
{"timestamp":"2026-01-29T20:44:36.174Z","query_id":"f11612ae-0517-40e0-bba9-6a4813060012","question":"Show the approval rate for purchase requisitions","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["purchase_requisitions","purchase_orders","requisition_lines","performance_reviews","sales_orders","inventory_adjustments","employee_salaries","vendor_invoices","tax_rates","product_suppliers","fixed_assets","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"purchase_requisitions","similarity":0.7144537875190509},{"table":"purchase_orders","similarity":0.6754585362390629},{"table":"requisition_lines","similarity":0.6526067337493826},{"table":"performance_reviews","similarity":0.5761025171829891},{"table":"vendor_invoices","similarity":0.5620813724541878},{"table":"sales_orders","similarity":0.5600540620423634},{"table":"inventory_adjustments","similarity":0.5560987141173879},{"table":"tax_rates","similarity":0.5556126665897644},{"table":"goods_receipts","similarity":0.5543356866163649},{"table":"certifications","similarity":0.5535315897541819},{"table":"product_suppliers","similarity":0.5532001558068573},{"table":"employee_salaries","similarity":0.5514561137792826},{"table":"po_lines","similarity":0.5507992972695006},{"table":"sales_territories","similarity":0.5472861793239767},{"table":"products","similarity":0.5453782545044963}],"column_hits_per_table":{"purchase_requisitions":11,"purchase_orders":12,"requisition_lines":5,"inventory_adjustments":1,"budgets":1,"performance_reviews":2,"employee_salaries":1,"project_expenses":1,"fixed_assets":2,"order_lines":1,"sales_orders":5,"timesheets":2,"tax_rates":1,"vendor_invoices":1,"project_resources":1,"quote_lines":1,"leave_requests":1,"product_suppliers":1},"top_columns_per_table":{"purchase_requisitions":[{"column":"approved_date","similarity":0.7767304385632029},{"column":"approved_by","similarity":0.7409449955495064},{"column":"requisition_number","similarity":0.7030808814464901}],"purchase_orders":[{"column":"approved_by","similarity":0.6946429533793925},{"column":"requisition_id","similarity":0.6718178582077006},{"column":"total","similarity":0.6683455402204478}],"requisition_lines":[{"column":"requisition_id","similarity":0.6376933087031063},{"column":"estimated_unit_cost","similarity":0.6333969557807274},{"column":"estimated_total","similarity":0.6312495690965759}],"inventory_adjustments":[{"column":"approved_by","similarity":0.6329021901958755}],"budgets":[{"column":"approved_by","similarity":0.6302903790830208}],"performance_reviews":[{"column":"goals_met_percent","similarity":0.6188795533101473},{"column":"rating","similarity":0.5953158785793504}],"employee_salaries":[{"column":"approved_by","similarity":0.6123122319484439}],"project_expenses":[{"column":"approved_by","similarity":0.6113584792040475}],"fixed_assets":[{"column":"purchase_cost","similarity":0.6112437587362358},{"column":"purchase_date","similarity":0.5752418077647418}],"order_lines":[{"column":"discount_percent","similarity":0.6107292969296323}],"sales_orders":[{"column":"total","similarity":0.607277665069308},{"column":"tax_amount","similarity":0.5855697288885665},{"column":"shipping_cost","similarity":0.5854713890413684}],"timesheets":[{"column":"approved_by","similarity":0.6059821911915741},{"column":"approved_date","similarity":0.5902187567696575}],"tax_rates":[{"column":"rate","similarity":0.5848985367091032}],"vendor_invoices":[{"column":"total","similarity":0.5829198135909294}],"project_resources":[{"column":"hourly_rate","similarity":0.5785087387167567}],"quote_lines":[{"column":"discount_percent","similarity":0.5783180170181821}],"leave_requests":[{"column":"approved_by","similarity":0.5782476386378983}],"product_suppliers":[{"column":"unit_cost","similarity":0.5763419254825446}]},"fused_scores":[{"table":"purchase_requisitions","fused":0.887553447046613,"table_sim":0.7144537875190509,"col_score":1.1472029363379561},{"table":"purchase_orders","fused":0.8168014111392844,"table_sim":0.6754585362390629,"col_score":1.0288157234896165},{"table":"requisition_lines","fused":0.7711727363812357,"table_sim":0.6526067337493826,"col_score":0.9490217403290153},{"table":"performance_reviews","fused":0.7122765073497226,"table_sim":0.5761025171829891,"col_score":0.9165374925998225},{"table":"sales_orders","fused":0.6960574490308546,"table_sim":0.5600540620423634,"col_score":0.9000625295135913},{"table":"inventory_adjustments","fused":0.5868201045487829,"table_sim":0.5560987141173879,"col_score":0.6329021901958755},{"table":"employee_salaries","fused":0.5757985610469472,"table_sim":0.5514561137792826,"col_score":0.6123122319484439},{"table":"vendor_invoices","fused":0.5704167489088845,"table_sim":0.5620813724541878,"col_score":0.5829198135909294},{"table":"tax_rates","fused":0.5673270146374999,"table_sim":0.5556126665897644,"col_score":0.5848985367091032},{"table":"product_suppliers","fused":0.5624568636771322,"table_sim":0.5532001558068573,"col_score":0.5763419254825446},{"table":"timesheets","fused":0.3604366278305612,"table_sim":0,"col_score":0.9010915695764029},{"table":"fixed_assets","fused":0.35954586504744274,"table_sim":0,"col_score":0.8988646626186068},{"table":"goods_receipts","fused":0.3326014119698189,"table_sim":0.5543356866163649,"col_score":0},{"table":"certifications","fused":0.33211895385250917,"table_sim":0.5535315897541819,"col_score":0},{"table":"po_lines","fused":0.33047957836170033,"table_sim":0.5507992972695006,"col_score":0}],"fk_expansion_candidates":15,"fk_expansion_added":2,"fk_expansion_blocked_count":10,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"countries","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"order_lines","reason":"max_tables"},{"table":"po_lines","reason":"max_tables"},{"table":"products","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":39,"total_retrieval_latency_ms":44,"sql_generated":"SELECT COUNT(DISTINCT p.po_id) AS approved_requisitions, COUNT(*) AS total_requisitions FROM purchase_orders p JOIN purchase_requisitions pr ON p.po_id = pr.requisition_id WHERE pr.status = 'approved' GROUP BY p.po_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":109,"total_latency_ms":1145}
{"timestamp":"2026-01-29T20:44:37.320Z","query_id":"195a43b3-6ea9-4cbf-b704-d1d51c2d9f97","question":"What is the total debit and credit for each account in the current period?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["bank_accounts","depreciation_entries","depreciation_schedules","bank_transactions","project_budgets","budgets","budget_lines","asset_categories","chart_of_accounts","customers","account_types","currencies"],"tables_from_table_retrieval":15,"tables_from_column_only":14,"tables_from_fk_expansion":2,"table_scores":[{"table":"bank_accounts","similarity":0.6774767745272873},{"table":"depreciation_entries","similarity":0.6479655202571633},{"table":"depreciation_schedules","similarity":0.6391071490249879},{"table":"bank_transactions","similarity":0.6215432609525777},{"table":"fiscal_periods","similarity":0.6118740658020915},{"table":"chart_of_accounts","similarity":0.6113283904518393},{"table":"customers","similarity":0.6110220975215452},{"table":"budget_lines","similarity":0.6048243661703417},{"table":"asset_categories","similarity":0.6023939402123736},{"table":"fiscal_years","similarity":0.5978109896942982},{"table":"account_types","similarity":0.5864823487782337},{"table":"budgets","similarity":0.5831943330024605},{"table":"project_budgets","similarity":0.5816505947654121},{"table":"project_milestones","similarity":0.5761644998941425},{"table":"currencies","similarity":0.5748021002449325}],"column_hits_per_table":{"bank_accounts":7,"depreciation_entries":7,"depreciation_schedules":7,"budgets":2,"purchase_orders":1,"bank_transactions":2,"vendor_invoices":1,"sales_orders":1,"asset_categories":1,"timesheets":1,"project_budgets":2,"po_lines":1,"departments":1,"requisition_lines":1,"order_lines":1,"sales_quotes":1,"journal_lines":1,"chart_of_accounts":1,"quote_lines":1,"customers":1,"fiscal_periods":1,"project_milestones":1,"budget_lines":2,"projects":1,"account_types":1,"project_expenses":2,"fixed_assets":1},"top_columns_per_table":{"bank_accounts":[{"column":"current_balance","similarity":0.7120054679865145},{"column":"account_number","similarity":0.6364628577177703},{"column":"is_active","similarity":0.632098349114848}],"depreciation_entries":[{"column":"amount","similarity":0.6892663698793005},{"column":"accumulated_depreciation","similarity":0.6791254877457136},{"column":"period_id","similarity":0.6601758928161718}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.6787718767673881},{"column":"monthly_amount","similarity":0.6713352089955611},{"column":"start_date","similarity":0.6503470632369572}],"budgets":[{"column":"total_amount","similarity":0.6681667214131277},{"column":"status","similarity":0.6095485585752322}],"purchase_orders":[{"column":"total","similarity":0.6434681983394138}],"bank_transactions":[{"column":"amount","similarity":0.6348031550733443},{"column":"transaction_date","similarity":0.5964424364374886}],"vendor_invoices":[{"column":"total","similarity":0.6257147661276886}],"sales_orders":[{"column":"total","similarity":0.6246642633195769}],"asset_categories":[{"column":"depreciation_method","similarity":0.6243470467444369}],"timesheets":[{"column":"total_hours","similarity":0.622973004430975}],"project_budgets":[{"column":"actual_amount","similarity":0.6207060762728754},{"column":"planned_amount","similarity":0.5975993619104593}],"po_lines":[{"column":"line_total","similarity":0.618555602548407}],"departments":[{"column":"budget","similarity":0.6174730859005904}],"requisition_lines":[{"column":"estimated_total","similarity":0.6165631045407493}],"order_lines":[{"column":"line_total","similarity":0.613699532542915}],"sales_quotes":[{"column":"total","similarity":0.6116576686122673}],"journal_lines":[{"column":"debit","similarity":0.6112275365658976}],"chart_of_accounts":[{"column":"account_number","similarity":0.6099549185272944}],"quote_lines":[{"column":"line_total","similarity":0.608422423187917}],"customers":[{"column":"credit_limit","similarity":0.6083072987668613}],"fiscal_periods":[{"column":"period_number","similarity":0.606657627375224}],"project_milestones":[{"column":"amount","similarity":0.6040594662589831}],"budget_lines":[{"column":"account_id","similarity":0.6034178781484847},{"column":"amount","similarity":0.600705481796664}],"projects":[{"column":"budget","similarity":0.6025614577990223}],"account_types":[{"column":"normal_balance","similarity":0.6015543450293432}],"project_expenses":[{"column":"amount","similarity":0.6014681875671599},{"column":"status","similarity":0.5964895591217514}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5971563516971157}]},"fused_scores":[{"table":"bank_accounts","fused":0.8185808234545322,"table_sim":0.6774767745272873,"col_score":1.0302368968453997},{"table":"depreciation_entries","fused":0.8003109576551608,"table_sim":0.6479655202571633,"col_score":1.0288291137521572},{"table":"depreciation_schedules","fused":0.7892400819210602,"table_sim":0.6391071490249879,"col_score":1.0144394812651687},{"table":"bank_transactions","fused":0.7461357058883822,"table_sim":0.6215432609525777,"col_score":0.9330243732920886},{"table":"project_budgets","fused":0.7167926597504893,"table_sim":0.5816505947654121,"col_score":0.9195057572281051},{"table":"budgets","fused":0.7025200865672598,"table_sim":0.5831943330024605,"col_score":0.881508716914459},{"table":"budget_lines","fused":0.6876553153616585,"table_sim":0.6048243661703417,"col_score":0.8119017391486336},{"table":"asset_categories","fused":0.6111751828251989,"table_sim":0.6023939402123736,"col_score":0.6243470467444369},{"table":"chart_of_accounts","fused":0.6107790016820214,"table_sim":0.6113283904518393,"col_score":0.6099549185272944},{"table":"customers","fused":0.6099361780196717,"table_sim":0.6110220975215452,"col_score":0.6083072987668613},{"table":"fiscal_periods","fused":0.6097874904313445,"table_sim":0.6118740658020915,"col_score":0.606657627375224},{"table":"account_types","fused":0.5925111472786775,"table_sim":0.5864823487782337,"col_score":0.6015543450293432},{"table":"project_milestones","fused":0.5873224864400788,"table_sim":0.5761644998941425,"col_score":0.6040594662589831},{"table":"fiscal_years","fused":0.3586865938165789,"table_sim":0.5978109896942982,"col_score":0},{"table":"currencies","fused":0.34488126014695947,"table_sim":0.5748021002449325,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":11,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"max_tables"},{"table":"fiscal_years","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":23,"total_retrieval_latency_ms":29,"sql_generated":"SELECT ca.account_id, SUM(bt.amount) AS total_debit, SUM(at.amount) AS total_credit FROM chart_of_accounts ca LEFT JOIN bank_transactions bt ON ca.account_id = bt.bank_account_id AND bt.transaction_type = 'Debit' AND bt.reconciled = TRUE AND bt.created_at >= CURRENT_DATE - INTERVAL '1 month' LEFT JOIN account_types at ON ca.account_type_id = at.type_id WHERE ca.is_active = TRUE GROUP BY ca.account_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column at.amount does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":5,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":5594,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column at.amount does not exist"}
{"timestamp":"2026-01-29T20:44:42.914Z","query_id":"e505e23a-acd2-4aca-9b94-23c57439b27c","question":"List all posted journal entries for the current month","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["journal_entries","journal_lines","depreciation_entries","timesheet_entries","depreciation_schedules","performance_reviews","goods_receipts","project_milestones","timesheets","purchase_orders","chart_of_accounts","fiscal_periods"],"tables_from_table_retrieval":15,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"journal_entries","similarity":0.7371200347881697},{"table":"depreciation_entries","similarity":0.6388628310824237},{"table":"journal_lines","similarity":0.6381042717949331},{"table":"timesheet_entries","similarity":0.591409348833156},{"table":"fiscal_years","similarity":0.5469848742333804},{"table":"depreciation_schedules","similarity":0.5458362894331688},{"table":"goods_receipts","similarity":0.5400655622918485},{"table":"fiscal_periods","similarity":0.5399686868510553},{"table":"audit_log","similarity":0.5390638198818073},{"table":"budget_lines","similarity":0.5319608633212602},{"table":"project_milestones","similarity":0.5228205781898283},{"table":"performance_reviews","similarity":0.5210833445978394},{"table":"chart_of_accounts","similarity":0.5176304204490154},{"table":"asset_categories","similarity":0.5110443557995631},{"table":"project_phases","similarity":0.5032511717491329}],"column_hits_per_table":{"journal_entries":9,"journal_lines":7,"depreciation_entries":5,"timesheet_entries":7,"goods_receipts":2,"timesheets":3,"performance_reviews":3,"depreciation_schedules":3,"purchase_orders":2,"project_budgets":1,"sales_orders":2,"asset_maintenance":1,"maintenance_types":1,"project_expenses":1,"inventory_adjustments":1,"project_milestones":2},"top_columns_per_table":{"journal_entries":[{"column":"entry_date","similarity":0.7704936692205318},{"column":"status","similarity":0.7328960805042452},{"column":"posted_by","similarity":0.7019037298711207}],"journal_lines":[{"column":"debit","similarity":0.6580411774438369},{"column":"entry_id","similarity":0.6510961590410065},{"column":"credit","similarity":0.6359552498526305}],"depreciation_entries":[{"column":"entry_date","similarity":0.654431660506666},{"column":"journal_entry_id","similarity":0.6411698211827205},{"column":"period_id","similarity":0.5838462892330042}],"timesheet_entries":[{"column":"entry_date","similarity":0.6446211675734115},{"column":"description","similarity":0.5882230085427652},{"column":"entry_id","similarity":0.5722846831520506}],"goods_receipts":[{"column":"receipt_date","similarity":0.6047305754742575},{"column":"notes","similarity":0.5914014074550097}],"timesheets":[{"column":"submitted_date","similarity":0.6034062021491217},{"column":"status","similarity":0.5605065629261864},{"column":"approved_date","similarity":0.5574665928060918}],"performance_reviews":[{"column":"review_date","similarity":0.5928778431249968},{"column":"review_period_end","similarity":0.5846942408306532},{"column":"review_period_start","similarity":0.5843927700621266}],"depreciation_schedules":[{"column":"end_date","similarity":0.5723218581493166},{"column":"start_date","similarity":0.5661921664416115},{"column":"useful_life_months","similarity":0.5592927836677546}],"purchase_orders":[{"column":"expected_date","similarity":0.5705593782125117},{"column":"order_date","similarity":0.5577237956734042}],"project_budgets":[{"column":"notes","similarity":0.5704481753860894}],"sales_orders":[{"column":"order_date","similarity":0.5574635444979215},{"column":"ship_date","similarity":0.5551436110758307}],"asset_maintenance":[{"column":"completed_date","similarity":0.5574353291980277}],"maintenance_types":[{"column":"frequency_months","similarity":0.5568999551121173}],"project_expenses":[{"column":"expense_date","similarity":0.5566292234027648}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.556301592294009}],"project_milestones":[{"column":"due_date","similarity":0.5548577873367307},{"column":"completed_date","similarity":0.5539763120091956}]},"fused_scores":[{"table":"journal_entries","fused":0.8908502345353386,"table_sim":0.7371200347881697,"col_score":1.121445534156092},{"table":"journal_lines","fused":0.7732700840250207,"table_sim":0.6381042717949331,"col_score":0.9760188023701521},{"table":"depreciation_entries","fused":0.7611368329631072,"table_sim":0.6388628310824237,"col_score":0.9445478357841326},{"table":"timesheet_entries","fused":0.7271270215198551,"table_sim":0.591409348833156,"col_score":0.9307035305499038},{"table":"depreciation_schedules","fused":0.6696689502079503,"table_sim":0.5458362894331688,"col_score":0.8554179413701224},{"table":"performance_reviews","fused":0.666739992174833,"table_sim":0.5210833445978394,"col_score":0.8852249635403234},{"table":"goods_receipts","fused":0.6487277646085134,"table_sim":0.5400655622918485,"col_score":0.8117210680835109},{"table":"project_milestones","fused":0.6464307242504284,"table_sim":0.5228205781898283,"col_score":0.8318459433413286},{"table":"timesheets","fused":0.35285579942086703,"table_sim":0,"col_score":0.8821394985521676},{"table":"purchase_orders","fused":0.33976851041968553,"table_sim":0,"col_score":0.8494212760492138},{"table":"sales_orders","fused":0.3340141400143347,"table_sim":0,"col_score":0.8350353500358367},{"table":"fiscal_years","fused":0.32819092454002824,"table_sim":0.5469848742333804,"col_score":0},{"table":"fiscal_periods","fused":0.32398121211063313,"table_sim":0.5399686868510553,"col_score":0},{"table":"audit_log","fused":0.32343829192908435,"table_sim":0.5390638198818073,"col_score":0},{"table":"budget_lines","fused":0.31917651799275615,"table_sim":0.5319608633212602,"col_score":0}],"fk_expansion_candidates":14,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":32,"total_retrieval_latency_ms":38,"sql_generated":"SELECT j.entry_id AS entry_id, j.entry_number AS entry_number, j.entry_date AS entry_date, jl.debit AS debit, jl.credit AS credit FROM journal_entries j JOIN journal_lines jl ON j.entry_id = jl.entry_id WHERE EXTRACT(MONTH FROM CURRENT_DATE) = EXTRACT(MONTH FROM j.entry_date);","tables_used_in_sql":[],"total_latency_ms":4632,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T20:44:47.547Z","query_id":"dee32416-17b6-46d5-a2b4-befdaffcbcd8","question":"Show budget vs actual spending by department","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["budgets","project_budgets","departments","project_expenses","budget_lines","fiscal_periods","cost_centers","fiscal_years","depreciation_schedules","purchase_requisitions","depreciation_entries","fixed_assets"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"budgets","similarity":0.6743467953278661},{"table":"project_budgets","similarity":0.6399342167994372},{"table":"budget_lines","similarity":0.6120027063639643},{"table":"departments","similarity":0.6078621456074449},{"table":"cost_centers","similarity":0.5976264909955187},{"table":"project_expenses","similarity":0.5925480261881607},{"table":"fiscal_periods","similarity":0.5508242618316114},{"table":"fiscal_years","similarity":0.5297470824133431},{"table":"purchase_requisitions","similarity":0.5091655209627607},{"table":"positions","similarity":0.5048661154254893},{"table":"depreciation_entries","similarity":0.49557827959519485},{"table":"depreciation_schedules","similarity":0.48960068033897763},{"table":"business_units","similarity":0.4799656071405569},{"table":"bank_accounts","similarity":0.47991777986203277},{"table":"employee_salaries","similarity":0.4787495684544676}],"column_hits_per_table":{"departments":5,"budgets":8,"project_budgets":6,"cost_centers":3,"budget_lines":5,"projects":1,"project_expenses":10,"purchase_requisitions":1,"fiscal_periods":4,"employees":1,"fiscal_years":1,"positions":1,"fixed_assets":1,"journal_lines":1,"depreciation_schedules":1,"asset_maintenance":1},"top_columns_per_table":{"departments":[{"column":"budget","similarity":0.7508816231830893},{"column":"name","similarity":0.5807613926469624},{"column":"parent_department_id","similarity":0.576838586583815}],"budgets":[{"column":"department_id","similarity":0.7124132689447956},{"column":"total_amount","similarity":0.6738486234633608},{"column":"status","similarity":0.6545539781274986}],"project_budgets":[{"column":"actual_amount","similarity":0.6727544749805415},{"column":"category","similarity":0.6432702298136043},{"column":"planned_amount","similarity":0.6345451040343791}],"cost_centers":[{"column":"department_id","similarity":0.6447254284668595},{"column":"is_active","similarity":0.5741948148052456},{"column":"code","similarity":0.5336285679368914}],"budget_lines":[{"column":"amount","similarity":0.6347292734898708},{"column":"budget_id","similarity":0.6254333624544377},{"column":"period_id","similarity":0.6014529896644097}],"projects":[{"column":"budget","similarity":0.6320788528452682}],"project_expenses":[{"column":"amount","similarity":0.6129047067883163},{"column":"category","similarity":0.6079498441831898},{"column":"is_billable","similarity":0.6033626054361303}],"purchase_requisitions":[{"column":"department_id","similarity":0.5964169191021919}],"fiscal_periods":[{"column":"period_number","similarity":0.5636129011166751},{"column":"is_closed","similarity":0.5509300436603198},{"column":"fiscal_year_id","similarity":0.5466861860533114}],"employees":[{"column":"department_id","similarity":0.5532234163970625}],"fiscal_years":[{"column":"year","similarity":0.545470788921557}],"positions":[{"column":"department_id","similarity":0.5428918958420113}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5418088384489079}],"journal_lines":[{"column":"cost_center_id","similarity":0.5382510765684452}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5363986996551952}],"asset_maintenance":[{"column":"cost","similarity":0.5334437301670096}]},"fused_scores":[{"table":"budgets","fused":0.7999004207313699,"table_sim":0.6743467953278661,"col_score":0.9882308588366255},{"table":"project_budgets","fused":0.7817163660345998,"table_sim":0.6399342167994372,"col_score":0.9943895898873436},{"table":"departments","fused":0.7463765316082773,"table_sim":0.6078621456074449,"col_score":0.9541481106095261},{"table":"project_expenses","fused":0.722280667264861,"table_sim":0.5925480261881607,"col_score":0.9168796288799113},{"table":"budget_lines","fused":0.7086540039579482,"table_sim":0.6120027063639643,"col_score":0.853630950348924},{"table":"fiscal_periods","fused":0.6661257262777008,"table_sim":0.5508242618316114,"col_score":0.839077922946835},{"table":"cost_centers","fused":0.6622888817574282,"table_sim":0.5976264909955187,"col_score":0.7592824679002922},{"table":"fiscal_years","fused":0.5360365650166287,"table_sim":0.5297470824133431,"col_score":0.545470788921557},{"table":"depreciation_schedules","fused":0.5083198880654647,"table_sim":0.48960068033897763,"col_score":0.5363986996551952},{"table":"purchase_requisitions","fused":0.47249604992627015,"table_sim":0.5091655209627607,"col_score":0.4174918433715343},{"table":"positions","fused":0.45492940009105676,"table_sim":0.5048661154254893,"col_score":0.38002432708940787},{"table":"depreciation_entries","fused":0.2973469677571169,"table_sim":0.49557827959519485,"col_score":0},{"table":"business_units","fused":0.2879793642843341,"table_sim":0.4799656071405569,"col_score":0},{"table":"bank_accounts","fused":0.2879506679172196,"table_sim":0.47991777986203277,"col_score":0},{"table":"employee_salaries","fused":0.28724974107268053,"table_sim":0.4787495684544676,"col_score":0}],"fk_expansion_candidates":10,"fk_expansion_added":2,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"projects","reason":"max_tables"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":19,"total_retrieval_latency_ms":24,"sql_generated":"SELECT d.name AS department_name, b.total_amount AS planned_budget, SUM(p.actual_amount) AS total_spent FROM departments d LEFT JOIN budgets b ON d.department_id = b.department_id AND b.status = 'approved' LEFT JOIN project_expenses p ON d.department_id = p.employee_id GROUP BY d.name, b.total_amount;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column p.actual_amount does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":5,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":4001,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column p.actual_amount does not exist"}
{"timestamp":"2026-01-29T20:44:51.548Z","query_id":"11f7a3ba-2a5b-4ed7-a37f-c8dad754b947","question":"What is the total expense amount per project?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["project_expenses","project_budgets","projects","project_resources","project_milestones","project_tasks","requisition_lines","budgets","budget_lines","asset_maintenance","departments","fixed_assets"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_expenses","similarity":0.7357232557396823},{"table":"project_budgets","similarity":0.7124927404351951},{"table":"project_milestones","similarity":0.6341783562502439},{"table":"project_resources","similarity":0.6177078775243305},{"table":"projects","similarity":0.6089962100611707},{"table":"budgets","similarity":0.5874735154116857},{"table":"project_tasks","similarity":0.5836295939230792},{"table":"cost_centers","similarity":0.5743886856767211},{"table":"budget_lines","similarity":0.5692401404171281},{"table":"requisition_lines","similarity":0.568809612012397},{"table":"asset_maintenance","similarity":0.556437308171321},{"table":"project_phases","similarity":0.5544923606039343},{"table":"task_assignments","similarity":0.5542662222237488},{"table":"timesheet_entries","similarity":0.5468607200699919},{"table":"fixed_assets","similarity":0.5442529432134882}],"column_hits_per_table":{"project_expenses":10,"project_budgets":6,"budgets":1,"projects":3,"project_milestones":2,"budget_lines":1,"project_resources":4,"vendor_invoices":3,"project_tasks":2,"asset_maintenance":1,"requisition_lines":2,"purchase_orders":2,"product_suppliers":1,"departments":1,"depreciation_schedules":2,"maintenance_types":1,"depreciation_entries":1,"products":1,"employee_salaries":1,"sales_orders":1,"cost_centers":1,"timesheet_entries":1,"bank_transactions":1,"fixed_assets":1},"top_columns_per_table":{"project_expenses":[{"column":"amount","similarity":0.8069321519691274},{"column":"project_id","similarity":0.72552329592717},{"column":"expense_date","similarity":0.7111753013108498}],"project_budgets":[{"column":"actual_amount","similarity":0.7596350428313324},{"column":"planned_amount","similarity":0.756194071700628},{"column":"project_id","similarity":0.6872231807270061}],"budgets":[{"column":"total_amount","similarity":0.736235837789576}],"projects":[{"column":"budget","similarity":0.7109411424450727},{"column":"project_number","similarity":0.6484869706692974},{"column":"project_manager_id","similarity":0.6124675981962671}],"project_milestones":[{"column":"amount","similarity":0.6962307559454693},{"column":"project_id","similarity":0.6186499569204351}],"budget_lines":[{"column":"amount","similarity":0.6588860854730665}],"project_resources":[{"column":"allocation_percent","similarity":0.6505585041718224},{"column":"hourly_rate","similarity":0.6430651988923763},{"column":"project_id","similarity":0.6237055733666395}],"vendor_invoices":[{"column":"total","similarity":0.6370818584397956},{"column":"tax_amount","similarity":0.6095802423276043},{"column":"amount_paid","similarity":0.6062572726654026}],"project_tasks":[{"column":"estimated_hours","similarity":0.6346881176571489},{"column":"actual_hours","similarity":0.6292081296520667}],"asset_maintenance":[{"column":"cost","similarity":0.6306740793355671}],"requisition_lines":[{"column":"estimated_total","similarity":0.6280439105312469},{"column":"estimated_unit_cost","similarity":0.6261921396116479}],"purchase_orders":[{"column":"total","similarity":0.6236388264470599},{"column":"tax_amount","similarity":0.6030458658029251}],"product_suppliers":[{"column":"unit_cost","similarity":0.6212103289525712}],"departments":[{"column":"budget","similarity":0.6194099003255832}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.6193889490585814},{"column":"monthly_amount","similarity":0.6106697348487319}],"maintenance_types":[{"column":"estimated_cost","similarity":0.6191118273829425}],"depreciation_entries":[{"column":"amount","similarity":0.618608716083846}],"products":[{"column":"unit_cost","similarity":0.616078462844906}],"employee_salaries":[{"column":"amount","similarity":0.6156937669224968}],"sales_orders":[{"column":"total","similarity":0.6156140321020656}],"cost_centers":[{"column":"department_id","similarity":0.6124823312623927}],"timesheet_entries":[{"column":"project_id","similarity":0.6111509757246523}],"bank_transactions":[{"column":"amount","similarity":0.6045668994400772}],"fixed_assets":[{"column":"purchase_cost","similarity":0.604319708746374}]},"fused_scores":[{"table":"project_expenses","fused":0.9064418744936302,"table_sim":0.7357232557396823,"col_score":1.1625198026245522},{"table":"project_budgets","fused":0.8825884757337756,"table_sim":0.7124927404351951,"col_score":1.1377320786816465},{"table":"projects","fused":0.7794715771485909,"table_sim":0.6089962100611707,"col_score":1.0351846277797214},{"table":"project_resources","fused":0.7594611679618026,"table_sim":0.6177078775243305,"col_score":0.9720911036180105},{"table":"project_milestones","fused":0.7456103100971949,"table_sim":0.6341783562502439,"col_score":0.9127582408676216},{"table":"project_tasks","fused":0.7298946293471205,"table_sim":0.5836295939230792,"col_score":0.9492921824831824},{"table":"requisition_lines","fused":0.7177417593422666,"table_sim":0.568809612012397,"col_score":0.9411399803370708},{"table":"budgets","fused":0.6469784443628418,"table_sim":0.5874735154116857,"col_score":0.736235837789576},{"table":"budget_lines","fused":0.6050985184395035,"table_sim":0.5692401404171281,"col_score":0.6588860854730665},{"table":"asset_maintenance","fused":0.5861320166370194,"table_sim":0.556437308171321,"col_score":0.6306740793355671},{"table":"fixed_assets","fused":0.5682796494266424,"table_sim":0.5442529432134882,"col_score":0.604319708746374},{"table":"cost_centers","fused":0.5161282641595026,"table_sim":0.5743886856767211,"col_score":0.42873763188367486},{"table":"timesheet_entries","fused":0.4992387052448977,"table_sim":0.5468607200699919,"col_score":0.4278056830072566},{"table":"vendor_invoices","fused":0.3767487918414391,"table_sim":0,"col_score":0.9418719796035977},{"table":"purchase_orders","fused":0.370064703739409,"table_sim":0,"col_score":0.9251617593485224}],"fk_expansion_candidates":14,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"project_phases","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"timesheet_entries","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":24,"total_retrieval_latency_ms":30,"sql_generated":"SELECT p.project_id AS \"ProjectID\", SUM(pe.amount) AS \"TotalExpenses\" FROM projects p JOIN project_expenses pe ON p.project_id = pe.project_id GROUP BY p.project_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":100,"total_latency_ms":883}
{"timestamp":"2026-01-29T20:44:52.431Z","query_id":"36a90c34-1470-4aa9-b8cc-85dfe9fe6cac","question":"List projects that are over budget","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["project_budgets","project_expenses","projects","budgets","project_milestones","project_tasks","budget_lines","project_resources","project_phases","fiscal_years","departments","fiscal_periods"],"tables_from_table_retrieval":15,"tables_from_column_only":1,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_budgets","similarity":0.722964742520668},{"table":"project_expenses","similarity":0.6612139885640923},{"table":"project_milestones","similarity":0.6086742516860566},{"table":"projects","similarity":0.603119867291799},{"table":"project_resources","similarity":0.597322584800267},{"table":"budgets","similarity":0.5947407234206143},{"table":"budget_lines","similarity":0.5904803818054072},{"table":"project_tasks","similarity":0.5884491523727073},{"table":"project_phases","similarity":0.5493907834321079},{"table":"fiscal_years","similarity":0.5452244254955425},{"table":"task_assignments","similarity":0.5358507865308998},{"table":"cost_centers","similarity":0.5300586157001256},{"table":"fixed_assets","similarity":0.5211915048085144},{"table":"fiscal_periods","similarity":0.5200179964407323},{"table":"timesheet_entries","similarity":0.5184037353129961}],"column_hits_per_table":{"projects":10,"project_budgets":6,"project_expenses":10,"budget_lines":4,"budgets":7,"project_milestones":3,"project_tasks":7,"project_resources":2,"departments":1},"top_columns_per_table":{"projects":[{"column":"budget","similarity":0.7157873289228214},{"column":"project_number","similarity":0.6227578683249603},{"column":"planned_end_date","similarity":0.6218592852232092}],"project_budgets":[{"column":"notes","similarity":0.6968840628162604},{"column":"category","similarity":0.6884936581170534},{"column":"actual_amount","similarity":0.6874342070196099}],"project_expenses":[{"column":"is_billable","similarity":0.6524172642922237},{"column":"category","similarity":0.6511394078973038},{"column":"project_id","similarity":0.647913399771598}],"budget_lines":[{"column":"budget_id","similarity":0.6293825469960025},{"column":"amount","similarity":0.61759755130803},{"column":"line_id","similarity":0.5958899978657357}],"budgets":[{"column":"total_amount","similarity":0.6262049969711166},{"column":"status","similarity":0.6201964717884159},{"column":"budget_id","similarity":0.6068251516570441}],"project_milestones":[{"column":"is_billable","similarity":0.6084169219661417},{"column":"amount","similarity":0.5975950101730785},{"column":"project_id","similarity":0.5848627807484997}],"project_tasks":[{"column":"estimated_hours","similarity":0.6059234425364802},{"column":"actual_hours","similarity":0.6011409876391675},{"column":"due_date","similarity":0.5987032301443584}],"project_resources":[{"column":"allocation_percent","similarity":0.6000177528652653},{"column":"project_id","similarity":0.598286675045282}],"departments":[{"column":"budget","similarity":0.5873981545218923}]},"fused_scores":[{"table":"project_budgets","fused":0.8466631501631441,"table_sim":0.722964742520668,"col_score":1.0322107616268583},{"table":"project_expenses","fused":0.7879231804348057,"table_sim":0.6612139885640923,"col_score":0.9779869682408756},{"table":"projects","fused":0.7727384256092,"table_sim":0.603119867291799,"col_score":1.0271662630853016},{"table":"budgets","fused":0.728543662215791,"table_sim":0.5947407234206143,"col_score":0.9292480704085562},{"table":"project_milestones","fused":0.7280903218327064,"table_sim":0.6086742516860566,"col_score":0.907214427052681},{"table":"project_tasks","fused":0.71566706596605,"table_sim":0.5884491523727073,"col_score":0.906493936356064},{"table":"budget_lines","fused":0.6894408061858966,"table_sim":0.5904803818054072,"col_score":0.8378814427566308},{"table":"project_resources","fused":0.6821607865326058,"table_sim":0.597322584800267,"col_score":0.809418089131114},{"table":"project_phases","fused":0.3296344700592647,"table_sim":0.5493907834321079,"col_score":0},{"table":"fiscal_years","fused":0.3271346552973255,"table_sim":0.5452244254955425,"col_score":0},{"table":"task_assignments","fused":0.3215104719185399,"table_sim":0.5358507865308998,"col_score":0},{"table":"cost_centers","fused":0.3180351694200753,"table_sim":0.5300586157001256,"col_score":0},{"table":"fixed_assets","fused":0.3127149028851086,"table_sim":0.5211915048085144,"col_score":0},{"table":"fiscal_periods","fused":0.31201079786443936,"table_sim":0.5200179964407323,"col_score":0},{"table":"timesheet_entries","fused":0.31104224118779766,"table_sim":0.5184037353129961,"col_score":0}],"fk_expansion_candidates":7,"fk_expansion_added":2,"fk_expansion_blocked_count":3,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"timesheet_entries","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":22,"total_retrieval_latency_ms":27,"sql_generated":"SELECT p.project_id, p.name AS project_name, b.total_amount AS total_budget, SUM(pl.actual_hours) AS total_actual_hours FROM projects p JOIN budgets b ON p.project_id = b.project_id AND p.status = 'Completed' GROUP BY p.project_id HAVING b.total_amount > (SELECT budget FROM project_tasks pt WHERE pt.project_id = p.project_id AND status = 'Completed');","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column b.project_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_failure_reason":"Replacement pattern not found in SQL","autocorrect_candidates":5,"total_latency_ms":4428,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column b.project_id does not exist"}
{"timestamp":"2026-01-29T20:44:56.859Z","query_id":"97a7cb30-63ee-43f7-aab3-74ecef3f9121","question":"Show project resources and their allocation percentages","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["project_resources","project_budgets","projects","project_expenses","project_milestones","project_tasks","project_phases","asset_categories","budgets","task_assignments","fixed_assets"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":1,"table_scores":[{"table":"project_resources","similarity":0.7742133717857291},{"table":"project_budgets","similarity":0.65507694472865},{"table":"project_expenses","similarity":0.6350034671876015},{"table":"projects","similarity":0.6288717870995568},{"table":"task_assignments","similarity":0.6137701156863598},{"table":"project_tasks","similarity":0.6095803048417692},{"table":"project_milestones","similarity":0.6065393117891723},{"table":"project_phases","similarity":0.5813826774295057},{"table":"asset_categories","similarity":0.5802555044855668},{"table":"fixed_assets","similarity":0.5796101268148289},{"table":"asset_transfers","similarity":0.5721318726014173},{"table":"depreciation_schedules","similarity":0.5658856974088946},{"table":"budgets","similarity":0.5649618658822126},{"table":"asset_locations","similarity":0.5604079986432478},{"table":"asset_maintenance","similarity":0.5602754972355342}],"column_hits_per_table":{"project_resources":8,"project_budgets":6,"projects":11,"project_milestones":4,"asset_categories":1,"project_expenses":8,"project_tasks":6,"project_phases":2,"budgets":1,"order_lines":1,"tax_rates":1,"quote_lines":1},"top_columns_per_table":{"project_resources":[{"column":"allocation_percent","similarity":0.8685852466461004},{"column":"hourly_rate","similarity":0.7723593844044561},{"column":"role","similarity":0.7018377644717824}],"project_budgets":[{"column":"actual_amount","similarity":0.6714805333867944},{"column":"planned_amount","similarity":0.664720071485919},{"column":"category","similarity":0.6492185172720708}],"projects":[{"column":"project_number","similarity":0.656031184151131},{"column":"budget","similarity":0.6549834266944344},{"column":"priority","similarity":0.6516089082532873}],"project_milestones":[{"column":"amount","similarity":0.6479447985267763},{"column":"due_date","similarity":0.6055954050810288},{"column":"project_id","similarity":0.5966197964252259}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.6459444435919715}],"project_expenses":[{"column":"amount","similarity":0.6362161613290699},{"column":"category","similarity":0.6270742962995741},{"column":"approved_by","similarity":0.625320544399457}],"project_tasks":[{"column":"priority","similarity":0.6309783351056274},{"column":"actual_hours","similarity":0.624564831852771},{"column":"estimated_hours","similarity":0.6124485167486019}],"project_phases":[{"column":"project_id","similarity":0.598085263443172},{"column":"sequence","similarity":0.5916139582579132}],"budgets":[{"column":"total_amount","similarity":0.5970528201563468}],"order_lines":[{"column":"discount_percent","similarity":0.5946420250920916}],"tax_rates":[{"column":"rate","similarity":0.5907462944083454}],"quote_lines":[{"column":"discount_percent","similarity":0.590710827201031}]},"fused_scores":[{"table":"project_resources","fused":0.9664339986107688,"table_sim":0.7742133717857291,"col_score":1.2547649388483284},{"table":"project_budgets","fused":0.7945823944890915,"table_sim":0.65507694472865,"col_score":1.0038405691297538},{"table":"projects","fused":0.7707322312590734,"table_sim":0.6288717870995568,"col_score":0.9835228974983483},{"table":"project_expenses","fused":0.7609034041041036,"table_sim":0.6350034671876015,"col_score":0.9497533094788569},{"table":"project_milestones","fused":0.7442205875004198,"table_sim":0.6065393117891723,"col_score":0.9507425010672907},{"table":"project_tasks","fused":0.7430524833178667,"table_sim":0.6095803048417692,"col_score":0.9432607510320129},{"table":"project_phases","fused":0.6692071266429127,"table_sim":0.5813826774295057,"col_score":0.8009438004630234},{"table":"asset_categories","fused":0.6065310801281287,"table_sim":0.5802555044855668,"col_score":0.6459444435919715},{"table":"budgets","fused":0.5777982475918663,"table_sim":0.5649618658822126,"col_score":0.5970528201563468},{"table":"task_assignments","fused":0.36826206941181583,"table_sim":0.6137701156863598,"col_score":0},{"table":"fixed_assets","fused":0.34776607608889737,"table_sim":0.5796101268148289,"col_score":0},{"table":"asset_transfers","fused":0.3432791235608504,"table_sim":0.5721318726014173,"col_score":0},{"table":"depreciation_schedules","fused":0.33953141844533674,"table_sim":0.5658856974088946,"col_score":0},{"table":"asset_locations","fused":0.33624479918594863,"table_sim":0.5604079986432478,"col_score":0},{"table":"asset_maintenance","fused":0.3361652983413205,"table_sim":0.5602754972355342,"col_score":0}],"fk_expansion_candidates":7,"fk_expansion_added":1,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"budget_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":26,"total_retrieval_latency_ms":31,"sql_generated":"SELECT p.project_id AS \"ProjectID\", p.name AS \"ProjectName\", prr.role AS \"Role\", prr.allocation_percent AS \"AllocationPercent\" FROM projects p INNER JOIN task_assignments ta ON p.project_id = ta.task_id INNER JOIN project_resources prr ON ta.task_id = prr.task_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column prr.task_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":2,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":3362,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column prr.task_id does not exist"}
{"timestamp":"2026-01-29T20:45:00.222Z","query_id":"8ba5670f-6a2f-4ca9-b92d-ec232c1290f8","question":"List fixed assets by category with their total purchase cost","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["fixed_assets","asset_categories","asset_maintenance","purchase_orders","products","project_expenses","project_budgets","depreciation_entries","purchase_requisitions","depreciation_schedules","maintenance_types","asset_locations"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"fixed_assets","similarity":0.7654083493676195},{"table":"asset_categories","similarity":0.7259858085236982},{"table":"asset_maintenance","similarity":0.6539211907012796},{"table":"products","similarity":0.614929355062545},{"table":"depreciation_schedules","similarity":0.6121354509873786},{"table":"depreciation_entries","similarity":0.6111894897108928},{"table":"purchase_requisitions","similarity":0.6015411064384415},{"table":"asset_transfers","similarity":0.5999948343167759},{"table":"requisition_lines","similarity":0.598284604803533},{"table":"purchase_orders","similarity":0.5960128957667012},{"table":"product_categories","similarity":0.5957745495088865},{"table":"project_expenses","similarity":0.5957623792479935},{"table":"asset_locations","similarity":0.5883070142348943},{"table":"project_budgets","similarity":0.585024592918525},{"table":"inventory_adjustments","similarity":0.5679064338841272}],"column_hits_per_table":{"fixed_assets":17,"asset_maintenance":5,"asset_categories":5,"purchase_orders":4,"asset_transfers":1,"project_expenses":2,"products":2,"depreciation_entries":2,"project_budgets":2,"maintenance_types":1,"sales_orders":1,"purchase_requisitions":3,"depreciation_schedules":1,"budgets":1,"departments":1,"product_suppliers":1,"product_categories":1},"top_columns_per_table":{"fixed_assets":[{"column":"purchase_cost","similarity":0.8279308768975289},{"column":"purchase_date","similarity":0.7577653682683902},{"column":"category_id","similarity":0.7449419823541632}],"asset_maintenance":[{"column":"cost","similarity":0.7038940050431838},{"column":"asset_id","similarity":0.6625276747232278},{"column":"status","similarity":0.6405651323240275}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.6927722364184671},{"column":"depreciation_method","similarity":0.6801647903942473},{"column":"name","similarity":0.6771577193336439}],"purchase_orders":[{"column":"total","similarity":0.6821806774581558},{"column":"shipping_cost","similarity":0.6472948486879604},{"column":"subtotal","similarity":0.6467974357625007}],"asset_transfers":[{"column":"asset_id","similarity":0.6577812240991375}],"project_expenses":[{"column":"category","similarity":0.6549899614084438},{"column":"amount","similarity":0.6178431697050689}],"products":[{"column":"unit_cost","similarity":0.6544733850469636},{"column":"list_price","similarity":0.6424553009766624}],"depreciation_entries":[{"column":"asset_id","similarity":0.6541755757135573},{"column":"accumulated_depreciation","similarity":0.6149445842426364}],"project_budgets":[{"column":"category","similarity":0.637658039961106},{"column":"actual_amount","similarity":0.6203506032041255}],"maintenance_types":[{"column":"estimated_cost","similarity":0.637101104417595}],"sales_orders":[{"column":"total","similarity":0.6367743689772688}],"purchase_requisitions":[{"column":"status","similarity":0.633131401798049},{"column":"notes","similarity":0.618262755877266},{"column":"requisition_number","similarity":0.6168697281232403}],"depreciation_schedules":[{"column":"asset_id","similarity":0.6326055924552645}],"budgets":[{"column":"total_amount","similarity":0.6276622882196059}],"departments":[{"column":"budget","similarity":0.6267573083396116}],"product_suppliers":[{"column":"unit_cost","similarity":0.6215020235372517}],"product_categories":[{"column":"description","similarity":0.6177248433123641}]},"fused_scores":[{"table":"fixed_assets","fused":0.9419704340332613,"table_sim":0.7654083493676195,"col_score":1.206813561031724},{"table":"asset_categories","fused":0.8487333377604551,"table_sim":0.7259858085236982,"col_score":1.0328546316155907},{"table":"asset_maintenance","fused":0.7989303920007285,"table_sim":0.6539211907012796,"col_score":1.0164441939499018},{"table":"purchase_orders","fused":0.7599389781808752,"table_sim":0.5960128957667012,"col_score":1.005828101802136},{"table":"products","fused":0.759238027251645,"table_sim":0.614929355062545,"col_score":0.9757010355352949},{"table":"project_expenses","fused":0.7430220460531873,"table_sim":0.5957623792479935,"col_score":0.9639115462609782},{"table":"project_budgets","fused":0.7301480923763826,"table_sim":0.585024592918525,"col_score":0.9478333415631688},{"table":"depreciation_entries","fused":0.7042761081234883,"table_sim":0.6111894897108928,"col_score":0.8439060357423815},{"table":"purchase_requisitions","fused":0.6963109513640878,"table_sim":0.6015411064384415,"col_score":0.8384657187525574},{"table":"depreciation_schedules","fused":0.5444108364799012,"table_sim":0.6121354509873786,"col_score":0.4428239147186851},{"table":"asset_transfers","fused":0.5441756433378241,"table_sim":0.5999948343167759,"col_score":0.46044685686939624},{"table":"product_categories","fused":0.5304276858327939,"table_sim":0.5957745495088865,"col_score":0.4324073903186548},{"table":"requisition_lines","fused":0.35897076288211976,"table_sim":0.598284604803533,"col_score":0},{"table":"asset_locations","fused":0.35298420854093654,"table_sim":0.5883070142348943,"col_score":0},{"table":"inventory_adjustments","fused":0.3407438603304763,"table_sim":0.5679064338841272,"col_score":0}],"fk_expansion_candidates":25,"fk_expansion_added":2,"fk_expansion_blocked_count":18,"fk_expansion_blocked":[{"table":"employees","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"product_categories","reason":"max_tables"},{"table":"order_lines","reason":"no_evidence"},{"table":"asset_transfers","reason":"max_tables"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"departments","reason":"max_tables"},{"table":"product_suppliers","reason":"max_tables"},{"table":"requisition_lines","reason":"max_tables"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":30,"total_retrieval_latency_ms":36,"sql_generated":"SELECT af.category_id, SUM(af.purchase_cost) AS total_purchase_cost FROM fixed_assets af JOIN asset_categories ac ON af.category_id = ac.category_id GROUP BY af.category_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":7,"total_latency_ms":902}
{"timestamp":"2026-01-29T20:45:01.124Z","query_id":"a1c4a21e-d2db-41db-903c-a2e6f189a688","question":"List assets due for maintenance in the next 30 days","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["asset_maintenance","fixed_assets","depreciation_schedules","asset_transfers","maintenance_types","depreciation_entries","project_expenses","inventory_adjustments","asset_categories","purchase_requisitions","asset_locations","fiscal_periods"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"asset_maintenance","similarity":0.6994637000895678},{"table":"fixed_assets","similarity":0.6764596229184475},{"table":"depreciation_schedules","similarity":0.6273221911861584},{"table":"asset_transfers","similarity":0.5971719320807494},{"table":"maintenance_types","similarity":0.5961062154680403},{"table":"depreciation_entries","similarity":0.5910746016967453},{"table":"asset_categories","similarity":0.5862300624031879},{"table":"asset_locations","similarity":0.5513908244688821},{"table":"project_expenses","similarity":0.5503523574219773},{"table":"purchase_requisitions","similarity":0.5454859792595109},{"table":"inventory_adjustments","similarity":0.5399910580674154},{"table":"fiscal_years","similarity":0.5310443766821534},{"table":"budget_lines","similarity":0.5280863149217051},{"table":"fiscal_periods","similarity":0.5266541206042973},{"table":"timesheets","similarity":0.5246699967869528}],"column_hits_per_table":{"asset_maintenance":10,"fixed_assets":17,"depreciation_schedules":5,"asset_transfers":4,"maintenance_types":2,"project_expenses":2,"depreciation_entries":3,"inventory_adjustments":2,"budgets":1,"project_tasks":1,"asset_categories":1,"stock_transfers":1,"purchase_requisitions":1},"top_columns_per_table":{"asset_maintenance":[{"column":"scheduled_date","similarity":0.7417912113410527},{"column":"completed_date","similarity":0.7325656662634175},{"column":"status","similarity":0.7129849821736637}],"fixed_assets":[{"column":"purchase_date","similarity":0.6895387616643497},{"column":"disposal_date","similarity":0.6881990364899336},{"column":"warranty_expiry","similarity":0.6800725876800275}],"depreciation_schedules":[{"column":"asset_id","similarity":0.6418619860179837},{"column":"end_date","similarity":0.6048026719079262},{"column":"start_date","similarity":0.5849730629741445}],"asset_transfers":[{"column":"transfer_date","similarity":0.6313435579208717},{"column":"asset_id","similarity":0.6184906613618536},{"column":"reason","similarity":0.5842991078068315}],"maintenance_types":[{"column":"estimated_cost","similarity":0.6166092757884718},{"column":"frequency_months","similarity":0.571291123217713}],"project_expenses":[{"column":"expense_date","similarity":0.6092598391867935},{"column":"status","similarity":0.5937348318403063}],"depreciation_entries":[{"column":"asset_id","similarity":0.6063098011675734},{"column":"accumulated_depreciation","similarity":0.576951693037312},{"column":"entry_date","similarity":0.5752337993503969}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.5889427730753104},{"column":"status","similarity":0.5820136892950087}],"budgets":[{"column":"status","similarity":0.5735098092516532}],"project_tasks":[{"column":"due_date","similarity":0.5689652748773603}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.5684797119021113}],"stock_transfers":[{"column":"status","similarity":0.5664045909553878}],"purchase_requisitions":[{"column":"status","similarity":0.5661977643706151}]},"fused_scores":[{"table":"asset_maintenance","fused":0.8629078378428453,"table_sim":0.6994637000895678,"col_score":1.1080740444727615},{"table":"fixed_assets","fused":0.8193310857147951,"table_sim":0.6764596229184475,"col_score":1.0336382799093164},{"table":"depreciation_schedules","fused":0.7353089960696945,"table_sim":0.6273221911861584,"col_score":0.8972892033949985},{"table":"asset_transfers","fused":0.7277004039781647,"table_sim":0.5971719320807494,"col_score":0.9234931118242875},{"table":"maintenance_types","fused":0.7185656642397555,"table_sim":0.5961062154680403,"col_score":0.9022548373973283},{"table":"depreciation_entries","fused":0.7004721981030513,"table_sim":0.5910746016967453,"col_score":0.8645685927125104},{"table":"project_expenses","fused":0.6570382265855467,"table_sim":0.5503523574219773,"col_score":0.8170670303309007},{"table":"inventory_adjustments","fused":0.6410536605718746,"table_sim":0.5399910580674154,"col_score":0.7926475643285634},{"table":"asset_categories","fused":0.5791299222027573,"table_sim":0.5862300624031879,"col_score":0.5684797119021113},{"table":"purchase_requisitions","fused":0.4858269615794788,"table_sim":0.5454859792595109,"col_score":0.39633843505943056},{"table":"asset_locations","fused":0.33083449468132925,"table_sim":0.5513908244688821,"col_score":0},{"table":"fiscal_years","fused":0.31862662600929204,"table_sim":0.5310443766821534,"col_score":0},{"table":"budget_lines","fused":0.3168517889530231,"table_sim":0.5280863149217051,"col_score":0},{"table":"fiscal_periods","fused":0.3159924723625784,"table_sim":0.5266541206042973,"col_score":0},{"table":"timesheets","fused":0.3148019980721717,"table_sim":0.5246699967869528,"col_score":0}],"fk_expansion_candidates":11,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"adjustment_lines","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":26,"total_retrieval_latency_ms":32,"sql_generated":"SELECT f.asset_id, f.name AS asset_name, l.location_id, l.name AS location_name, m.maintenance_type_id, mt.name AS maintenance_type_name FROM fixed_assets f INNER JOIN asset_locations l ON f.location_id = l.location_id INNER JOIN asset_maintenance m ON f.asset_id = m.asset_id INNER JOIN maintenance_types mt ON m.maintenance_type_id = mt.type_id WHERE m.completed_date IS NULL OR m.completed_date > CURRENT_DATE + INTERVAL '30 days';","tables_used_in_sql":[],"explain_result":"success","rows_returned":87,"total_latency_ms":2099}
{"timestamp":"2026-01-29T20:45:03.223Z","query_id":"3c8193f3-3e30-4ff9-816f-e5295a1c81dd","question":"How many documents are attached to each entity type?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["document_attachments","account_types","asset_categories","certifications","employee_certifications","maintenance_types","benefit_types","product_categories","chart_of_accounts","asset_maintenance","employees","fixed_assets"],"tables_from_table_retrieval":15,"tables_from_column_only":9,"tables_from_fk_expansion":2,"table_scores":[{"table":"document_attachments","similarity":0.7352812742665428},{"table":"asset_categories","similarity":0.5753411818367143},{"table":"account_types","similarity":0.5738443826637069},{"table":"maintenance_types","similarity":0.5636991742375136},{"table":"certifications","similarity":0.5624603819375077},{"table":"benefit_types","similarity":0.5571719369096676},{"table":"product_categories","similarity":0.5551556948057476},{"table":"asset_maintenance","similarity":0.554815914599242},{"table":"employee_certifications","similarity":0.5476424522677461},{"table":"warehouses","similarity":0.5474998114755597},{"table":"leave_types","similarity":0.5434934031567049},{"table":"chart_of_accounts","similarity":0.5411038635038822},{"table":"emergency_contacts","similarity":0.5384920463137224},{"table":"fixed_assets","similarity":0.5383241951125345},{"table":"sales_regions","similarity":0.5350244939156515}],"column_hits_per_table":{"document_attachments":9,"inventory_transactions":3,"account_types":3,"maintenance_types":3,"asset_maintenance":1,"employee_certifications":4,"asset_categories":3,"benefit_types":3,"chart_of_accounts":2,"certifications":2,"departments":3,"employee_benefits":1,"product_categories":3,"business_units":1,"warehouses":1,"sales_regions":1,"asset_locations":1,"fixed_assets":1,"inventory_levels":1,"asset_transfers":1,"leave_types":1,"employees":1,"journal_entries":1},"top_columns_per_table":{"document_attachments":[{"column":"entity_type","similarity":0.7987800419578387},{"column":"entity_id","similarity":0.7594287577919462},{"column":"attachment_id","similarity":0.6546651468230587}],"inventory_transactions":[{"column":"reference_type","similarity":0.5903517205097364},{"column":"transaction_type","similarity":0.5635711569434013},{"column":"created_by","similarity":0.5430876646210533}],"account_types":[{"column":"category","similarity":0.5878690848429569},{"column":"type_id","similarity":0.5794665493145994},{"column":"name","similarity":0.5496137466279906}],"maintenance_types":[{"column":"description","similarity":0.58653779494252},{"column":"type_id","similarity":0.5733718593835123},{"column":"name","similarity":0.5496422533175911}],"asset_maintenance":[{"column":"maintenance_type_id","similarity":0.5827125041473765}],"employee_certifications":[{"column":"certificate_number","similarity":0.5784702110774266},{"column":"cert_id","similarity":0.5612347494814258},{"column":"employee_id","similarity":0.5577094740003373}],"asset_categories":[{"column":"category_id","similarity":0.5723224544867809},{"column":"name","similarity":0.5502669316091798},{"column":"depreciation_method","similarity":0.5473548891396472}],"benefit_types":[{"column":"description","similarity":0.5715454999053485},{"column":"benefit_type_id","similarity":0.5575648471383446},{"column":"name","similarity":0.5484642483573043}],"chart_of_accounts":[{"column":"account_type_id","similarity":0.5685465519383057},{"column":"description","similarity":0.5451128268059807}],"certifications":[{"column":"issuing_body","similarity":0.5640710083272336},{"column":"description","similarity":0.5596023143932606}],"departments":[{"column":"manager_id","similarity":0.5633707821725658},{"column":"department_id","similarity":0.5584502786611573},{"column":"parent_department_id","similarity":0.5566654794357809}],"employee_benefits":[{"column":"benefit_type_id","similarity":0.5570972140176393}],"product_categories":[{"column":"description","similarity":0.5540848765000548},{"column":"category_id","similarity":0.5510211593166828},{"column":"parent_category_id","similarity":0.5473730420164726}],"business_units":[{"column":"manager_id","similarity":0.5532691118392093}],"warehouses":[{"column":"manager_id","similarity":0.5519942538973842}],"sales_regions":[{"column":"manager_id","similarity":0.5505126067891188}],"asset_locations":[{"column":"description","similarity":0.5499214775178357}],"fixed_assets":[{"column":"category_id","similarity":0.5477120144110509}],"inventory_levels":[{"column":"quantity_available","similarity":0.5458319122564639}],"asset_transfers":[{"column":"to_employee_id","similarity":0.5432260682616717}],"leave_types":[{"column":"leave_type_id","similarity":0.543068609508208}],"employees":[{"column":"email","similarity":0.5421198830413347}],"journal_entries":[{"column":"reference","similarity":0.5407169542507763}]},"fused_scores":[{"table":"document_attachments","fused":0.8904731915406621,"table_sim":0.7352812742665428,"col_score":1.1232610674518408},{"table":"account_types","fused":0.6605795804394508,"table_sim":0.5738443826637069,"col_score":0.7906823771030667},{"table":"asset_categories","fused":0.6442718083860368,"table_sim":0.5753411818367143,"col_score":0.7476677482100206},{"table":"certifications","fused":0.6414489565084545,"table_sim":0.5624603819375077,"col_score":0.7599318183648748},{"table":"employee_certifications","fused":0.6385464207190179,"table_sim":0.5476424522677461,"col_score":0.7749023733959256},{"table":"maintenance_types","fused":0.5827221474401055,"table_sim":0.5636991742375136,"col_score":0.6112566072439933},{"table":"benefit_types","fused":0.5723949807186663,"table_sim":0.5571719369096676,"col_score":0.5952295464321646},{"table":"product_categories","fused":0.5653801446077995,"table_sim":0.5551556948057476,"col_score":0.5807168193108774},{"table":"chart_of_accounts","fused":0.5601711483978922,"table_sim":0.5411038635038822,"col_score":0.5887720757389072},{"table":"asset_maintenance","fused":0.4960490499208106,"table_sim":0.554815914599242,"col_score":0.4078987529031635},{"table":"warehouses","fused":0.4830582779766034,"table_sim":0.5474998114755597,"col_score":0.3863959777281689},{"table":"leave_types","fused":0.4781552525563212,"table_sim":0.5434934031567049,"col_score":0.3801480266557456},{"table":"fixed_assets","fused":0.47635388110261495,"table_sim":0.5383241951125345,"col_score":0.3833984100877356},{"table":"sales_regions","fused":0.47515822625034415,"table_sim":0.5350244939156515,"col_score":0.38535882475238314},{"table":"inventory_transactions","fused":0.34885491959257486,"table_sim":0,"col_score":0.8721372989814371}],"fk_expansion_candidates":9,"fk_expansion_added":2,"fk_expansion_blocked_count":7,"fk_expansion_blocked":[{"table":"bank_accounts","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":19,"total_retrieval_latency_ms":25,"sql_generated":"SELECT d.entity_type, COUNT(da.file_id) AS num_documents FROM document_attachments da JOIN entities d ON da.uploaded_by = d.employee_id GROUP BY d.entity_type;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column e.name does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":5,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":2173,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T20:45:05.396Z","query_id":"f72f95e5-2a25-4845-a873-2d65071934a4","question":"Calculate employee turnover rate by department for 2024","attempt_count":1,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employees","employee_salaries","employee_training","departments","sales_regions","employee_certifications","employment_history","performance_reviews","goods_receipts","asset_maintenance","budgets","inventory_adjustments"],"tables_from_table_retrieval":15,"tables_from_column_only":9,"tables_from_fk_expansion":2,"table_scores":[{"table":"employees","similarity":0.6359658673732379},{"table":"employee_salaries","similarity":0.6137332929756416},{"table":"departments","similarity":0.6101103038853555},{"table":"positions","similarity":0.5999463882310814},{"table":"sales_territories","similarity":0.5983156084770043},{"table":"sales_regions","similarity":0.5955253694234874},{"table":"budgets","similarity":0.5922652556433196},{"table":"employee_training","similarity":0.5866463738638922},{"table":"employment_history","similarity":0.5855835073288157},{"table":"goods_receipts","similarity":0.585472710203539},{"table":"performance_reviews","similarity":0.5822186192352505},{"table":"purchase_requisitions","similarity":0.578406876111481},{"table":"employee_certifications","similarity":0.5730496448155384},{"table":"inventory_adjustments","similarity":0.5687781234041399},{"table":"asset_maintenance","similarity":0.5668142582852698}],"column_hits_per_table":{"departments":3,"employees":9,"sales_territories":1,"employee_salaries":7,"positions":1,"employee_training":4,"performance_reviews":2,"goods_receipts":1,"sales_orders":1,"sales_regions":2,"asset_maintenance":1,"budgets":1,"employee_certifications":2,"cost_centers":1,"asset_transfers":3,"employee_benefits":2,"purchase_requisitions":1,"inventory_adjustments":1,"currencies":1,"timesheets":1,"sales_opportunities":1,"business_units":1,"employment_history":2,"depreciation_schedules":1},"top_columns_per_table":{"departments":[{"column":"budget","similarity":0.6210989680192394},{"column":"manager_id","similarity":0.5985166795002035},{"column":"created_at","similarity":0.5685222125719833}],"employees":[{"column":"department_id","similarity":0.6200778238440748},{"column":"salary","similarity":0.6038131058150359},{"column":"termination_date","similarity":0.5992766261325304}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6104279964881703}],"employee_salaries":[{"column":"end_date","similarity":0.6057663883190686},{"column":"amount","similarity":0.5994586464671279},{"column":"effective_date","similarity":0.5945383601215039}],"positions":[{"column":"department_id","similarity":0.6049413744489532}],"employee_training":[{"column":"score","similarity":0.5927300142082687},{"column":"scheduled_date","similarity":0.578764520059517},{"column":"status","similarity":0.5718497030719976}],"performance_reviews":[{"column":"employee_id","similarity":0.5849706759238356},{"column":"reviewer_id","similarity":0.5653092836188883}],"goods_receipts":[{"column":"received_by","similarity":0.580378092857111}],"sales_orders":[{"column":"sales_rep_id","similarity":0.5799791205111346}],"sales_regions":[{"column":"manager_id","similarity":0.5785309405554578},{"column":"target_revenue","similarity":0.5570052981646593}],"asset_maintenance":[{"column":"performed_by","similarity":0.577414569986232}],"budgets":[{"column":"department_id","similarity":0.5749997772800637}],"employee_certifications":[{"column":"employee_id","similarity":0.5740569827698636},{"column":"expiry_date","similarity":0.5696332852761125}],"cost_centers":[{"column":"department_id","similarity":0.5739824047413312}],"asset_transfers":[{"column":"transferred_by","similarity":0.5726316663319801},{"column":"to_employee_id","similarity":0.5708185051700986},{"column":"from_employee_id","similarity":0.5690345365953042}],"employee_benefits":[{"column":"end_date","similarity":0.5715674244638516},{"column":"employee_id","similarity":0.562908633973355}],"purchase_requisitions":[{"column":"department_id","similarity":0.5688527878379692}],"inventory_adjustments":[{"column":"adjusted_by","similarity":0.5657897970795053}],"currencies":[{"column":"exchange_rate","similarity":0.5652318119936446}],"timesheets":[{"column":"employee_id","similarity":0.5598968526380919}],"sales_opportunities":[{"column":"owner_id","similarity":0.5589945818871924}],"business_units":[{"column":"manager_id","similarity":0.5578038204905201}],"employment_history":[{"column":"employee_id","similarity":0.5568703170476632},{"column":"reason_for_leaving","similarity":0.5563939133984841}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5567581861316643}]},"fused_scores":[{"table":"employees","fused":0.7429600879764632,"table_sim":0.6359658673732379,"col_score":0.9034514188813011},{"table":"employee_salaries","fused":0.730438260406438,"table_sim":0.6137332929756416,"col_score":0.9054957115526325},{"table":"employee_training","fused":0.7048327340135462,"table_sim":0.5866463738638922,"col_score":0.8821122742380272},{"table":"departments","fused":0.6982981046689376,"table_sim":0.6101103038853555,"col_score":0.8305798058443106},{"table":"sales_regions","fused":0.6611116725977203,"table_sim":0.5955253694234874,"col_score":0.7594911273590695},{"table":"employee_certifications","fused":0.6520510785875488,"table_sim":0.5730496448155384,"col_score":0.7705532292455647},{"table":"employment_history","fused":0.6518695141433559,"table_sim":0.5855835073288157,"col_score":0.7512985243651662},{"table":"performance_reviews","fused":0.5922662605064686,"table_sim":0.5822186192352505,"col_score":0.6073377224132958},{"table":"goods_receipts","fused":0.5834348632649677,"table_sim":0.585472710203539,"col_score":0.580378092857111},{"table":"asset_maintenance","fused":0.5710543829656547,"table_sim":0.5668142582852698,"col_score":0.577414569986232},{"table":"inventory_adjustments","fused":0.567582792874286,"table_sim":0.5687781234041399,"col_score":0.5657897970795053},{"table":"sales_territories","fused":0.5299092041028902,"table_sim":0.5983156084770043,"col_score":0.42729959754171914},{"table":"positions","fused":0.5293514177843557,"table_sim":0.5999463882310814,"col_score":0.42345896211426726},{"table":"budgets","fused":0.5163590910244096,"table_sim":0.5922652556433196,"col_score":0.40249984409604456},{"table":"purchase_requisitions","fused":0.50632290626152,"table_sim":0.578406876111481,"col_score":0.3981969514865784}],"fk_expansion_candidates":32,"fk_expansion_added":2,"fk_expansion_blocked_count":25,"fk_expansion_blocked":[{"table":"maintenance_types","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"sales_territories","reason":"max_tables"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"max_tables"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":24,"total_retrieval_latency_ms":30,"sql_generated":"","tables_used_in_sql":[],"total_latency_ms":2827,"failure_type":"execution_error","failure_details":"Model generated invalid output (gibberish detected)"}
{"timestamp":"2026-01-29T20:45:08.224Z","query_id":"6efc3332-69bf-4c81-a6a6-920fd95cae0d","question":"Find the salary percentile ranking for each employee within their department","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_salaries","employees","positions","departments","performance_reviews","employee_training","employee_benefits","employee_certifications","sales_regions","sales_territories","employment_history","budgets"],"tables_from_table_retrieval":15,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_salaries","similarity":0.708947353388894},{"table":"positions","similarity":0.673242751719371},{"table":"employees","similarity":0.6495295179488771},{"table":"departments","similarity":0.64741802797087},{"table":"sales_regions","similarity":0.6247633430026287},{"table":"performance_reviews","similarity":0.6201770986480979},{"table":"budgets","similarity":0.6059422475297072},{"table":"employee_training","similarity":0.605724513187425},{"table":"sales_territories","similarity":0.603501429588932},{"table":"employee_benefits","similarity":0.59838723625395},{"table":"employee_certifications","similarity":0.5971601397111606},{"table":"purchase_requisitions","similarity":0.5927866150381371},{"table":"business_units","similarity":0.5911989355111648},{"table":"units_of_measure","similarity":0.5855786477919521},{"table":"employment_history","similarity":0.5846118164259523}],"column_hits_per_table":{"employees":9,"employee_salaries":7,"departments":4,"positions":3,"employee_training":2,"project_resources":2,"sales_orders":4,"order_lines":1,"performance_reviews":4,"sales_territories":1,"employee_benefits":2,"currencies":1,"tax_rates":1,"employee_certifications":2,"vendor_invoices":3,"sales_regions":1,"purchase_orders":1,"asset_categories":1,"business_units":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.7574782269751729},{"column":"employee_number","similarity":0.6492182366482667},{"column":"department_id","similarity":0.6395368153433474}],"employee_salaries":[{"column":"amount","similarity":0.7359583527234096},{"column":"approved_by","similarity":0.6926943474739576},{"column":"employee_id","similarity":0.676986467510318}],"departments":[{"column":"budget","similarity":0.6829775530024116},{"column":"manager_id","similarity":0.6397221630770776},{"column":"parent_department_id","similarity":0.6254065117903628}],"positions":[{"column":"min_salary","similarity":0.6777126447106386},{"column":"max_salary","similarity":0.6724570189361891},{"column":"department_id","similarity":0.6427390436680331}],"employee_training":[{"column":"score","similarity":0.6590553174224684},{"column":"status","similarity":0.6029782499051857}],"project_resources":[{"column":"hourly_rate","similarity":0.6466943832186318},{"column":"allocation_percent","similarity":0.6196500675265969}],"sales_orders":[{"column":"total","similarity":0.6356725867073684},{"column":"subtotal","similarity":0.6267418575329986},{"column":"tax_amount","similarity":0.6063888395862791}],"order_lines":[{"column":"discount_percent","similarity":0.6264197871171734}],"performance_reviews":[{"column":"employee_id","similarity":0.6263614751745396},{"column":"goals_met_percent","similarity":0.6239844557794996},{"column":"reviewer_id","similarity":0.6213599775398778}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6241225270384395}],"employee_benefits":[{"column":"coverage_level","similarity":0.6222756439662573},{"column":"employee_id","similarity":0.6153391648759183}],"currencies":[{"column":"exchange_rate","similarity":0.6203188576134201}],"tax_rates":[{"column":"rate","similarity":0.6188638790317935}],"employee_certifications":[{"column":"certificate_number","similarity":0.614080794353629},{"column":"employee_id","similarity":0.6138517170268198}],"vendor_invoices":[{"column":"total","similarity":0.6120628382001947},{"column":"subtotal","similarity":0.610881078873543},{"column":"amount_paid","similarity":0.6062315858747155}],"sales_regions":[{"column":"manager_id","similarity":0.6115942597940399}],"purchase_orders":[{"column":"total","similarity":0.6092847852619704}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.6026361592860408}],"business_units":[{"column":"manager_id","similarity":0.6025430641596784}]},"fused_scores":[{"table":"employee_salaries","fused":0.8582906226174918,"table_sim":0.708947353388894,"col_score":1.0823055264603885},{"table":"employees","fused":0.8225526488890488,"table_sim":0.6495295179488771,"col_score":1.0820873452993063},{"table":"positions","fused":0.8095221127031159,"table_sim":0.673242751719371,"col_score":1.0139411541787333},{"table":"departments","fused":0.7512029408142775,"table_sim":0.64741802797087,"col_score":0.9068803100793887},{"table":"performance_reviews","fused":0.742790981718875,"table_sim":0.6201770986480979,"col_score":0.9267118063250408},{"table":"employee_training","fused":0.7114737898681683,"table_sim":0.605724513187425,"col_score":0.8700977048892833},{"table":"employee_benefits","fused":0.6940900824215015,"table_sim":0.59838723625395,"col_score":0.8376443516728287},{"table":"employee_certifications","fused":0.6898676419519026,"table_sim":0.5971601397111606,"col_score":0.8289288953130158},{"table":"sales_regions","fused":0.5461043985439084,"table_sim":0.6247633430026287,"col_score":0.42811598185582794},{"table":"sales_territories","fused":0.5368551653241223,"table_sim":0.603501429588932,"col_score":0.4368857689269076},{"table":"business_units","fused":0.5234314192714088,"table_sim":0.5911989355111648,"col_score":0.42178014491177485},{"table":"project_resources","fused":0.3826077667927721,"table_sim":0,"col_score":0.9565194169819302},{"table":"sales_orders","fused":0.3796174061895471,"table_sim":0,"col_score":0.9490435154738677},{"table":"vendor_invoices","fused":0.3670013510547865,"table_sim":0,"col_score":0.9175033776369662},{"table":"budgets","fused":0.3635653485178243,"table_sim":0.6059422475297072,"col_score":0}],"fk_expansion_candidates":30,"fk_expansion_added":2,"fk_expansion_blocked_count":24,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":25,"total_retrieval_latency_ms":30,"sql_generated":"SELECT e.employee_id, CONCAT(e.first_name, ' ', e.last_name) AS full_name, d.department_id, p.position_id, s.salary, RANK() OVER (PARTITION BY d.department_id ORDER BY s.salary) as salary_percentile FROM employees e JOIN departments d ON e.department_id = d.department_id JOIN positions p ON e.position_id = p.position_id JOIN employee_salaries s ON e.employee_id = s.employee_id ORDER BY full_name, salary_percentile;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column s.salary does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":4,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":5855,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column s.salary does not exist"}
{"timestamp":"2026-01-29T20:45:14.079Z","query_id":"c93bb986-8a70-454b-8f8b-37c64672bcc6","question":"Identify employees who have not completed mandatory training","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employee_training","training_courses","employee_certifications","employees","employee_salaries","certifications","employee_benefits","leave_requests","task_assignments","business_units","employment_history","departments"],"tables_from_table_retrieval":15,"tables_from_column_only":4,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_training","similarity":0.6889099730779654},{"table":"training_courses","similarity":0.6502538829600134},{"table":"employee_certifications","similarity":0.622622468299915},{"table":"employees","similarity":0.5856498095746774},{"table":"leave_requests","similarity":0.562719264388909},{"table":"employee_salaries","similarity":0.5560241204386787},{"table":"certifications","similarity":0.5525137082028069},{"table":"employment_history","similarity":0.5480613869817784},{"table":"business_units","similarity":0.5439038631444495},{"table":"task_assignments","similarity":0.5397934296806453},{"table":"employee_benefits","similarity":0.5344393398297539},{"table":"timesheets","similarity":0.5319406753449695},{"table":"emergency_contacts","similarity":0.5318968233375349},{"table":"departments","similarity":0.5263789627125498},{"table":"positions","similarity":0.5263070089098566}],"column_hits_per_table":{"employee_training":7,"training_courses":7,"employees":15,"employee_certifications":6,"task_assignments":1,"employee_salaries":2,"leave_requests":1,"leave_types":1,"certifications":2,"business_units":1,"departments":1,"emergency_contacts":1,"fixed_assets":1,"sales_territories":1,"employee_benefits":1,"timesheets":1,"warehouses":1},"top_columns_per_table":{"employee_training":[{"column":"completion_date","similarity":0.7168978136285726},{"column":"status","similarity":0.7028985160111028},{"column":"scheduled_date","similarity":0.6960973950291245}],"training_courses":[{"column":"is_mandatory","similarity":0.7023171508593787},{"column":"is_active","similarity":0.633360326144161},{"column":"duration_hours","similarity":0.6170672809188396}],"employees":[{"column":"is_active","similarity":0.6234608396623087},{"column":"hire_date","similarity":0.5874512415515796},{"column":"employee_id","similarity":0.5844803651068503}],"employee_certifications":[{"column":"employee_id","similarity":0.6135493904138725},{"column":"obtained_date","similarity":0.6060985739368497},{"column":"expiry_date","similarity":0.5959077655676795}],"task_assignments":[{"column":"employee_id","similarity":0.5819777223310592}],"employee_salaries":[{"column":"effective_date","similarity":0.573895057820439},{"column":"end_date","similarity":0.5725676252235854}],"leave_requests":[{"column":"employee_id","similarity":0.5678540613812961}],"leave_types":[{"column":"is_paid","similarity":0.562989201901735}],"certifications":[{"column":"description","similarity":0.5609446922689106},{"column":"validity_years","similarity":0.5539678539563746}],"business_units":[{"column":"manager_id","similarity":0.5596404860633486}],"departments":[{"column":"manager_id","similarity":0.5580853205909431}],"emergency_contacts":[{"column":"employee_id","similarity":0.5579377142447549}],"fixed_assets":[{"column":"assigned_to","similarity":0.5574586620303502}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5565974280594508}],"employee_benefits":[{"column":"end_date","similarity":0.5556804750501676}],"timesheets":[{"column":"employee_id","similarity":0.555561707512954}],"warehouses":[{"column":"manager_id","similarity":0.5551779442719302}]},"fused_scores":[{"table":"employee_training","fused":0.8393245883040332,"table_sim":0.6889099730779654,"col_score":1.0649465111431349},{"table":"training_courses","fused":0.7944926463035276,"table_sim":0.6502538829600134,"col_score":1.0108507913187985},{"table":"employee_certifications","fused":0.7351944636682248,"table_sim":0.622622468299915,"col_score":0.9040524567206896},{"table":"employees","fused":0.7032367749145099,"table_sim":0.5856498095746774,"col_score":0.8796172229242586},{"table":"employee_salaries","fused":0.6776860204360999,"table_sim":0.5560241204386787,"col_score":0.8601788704322317},{"table":"certifications","fused":0.6316276234218814,"table_sim":0.5525137082028069,"col_score":0.7502984962504933},{"table":"employee_benefits","fused":0.5429357939179194,"table_sim":0.5344393398297539,"col_score":0.5556804750501676},{"table":"leave_requests","fused":0.4966306958201083,"table_sim":0.562719264388909,"col_score":0.39749784296690727},{"table":"task_assignments","fused":0.48682982006108366,"table_sim":0.5397934296806453,"col_score":0.4073844056317414},{"table":"business_units","fused":0.4830416539844073,"table_sim":0.5439038631444495,"col_score":0.391748340244344},{"table":"emergency_contacts","fused":0.4753606539910523,"table_sim":0.5318968233375349,"col_score":0.3905563999713284},{"table":"timesheets","fused":0.4747216833106088,"table_sim":0.5319406753449695,"col_score":0.38889319525906774},{"table":"departments","fused":0.47209126739299395,"table_sim":0.5263789627125498,"col_score":0.39065972441366015},{"table":"employment_history","fused":0.32883683218906706,"table_sim":0.5480613869817784,"col_score":0},{"table":"positions","fused":0.31578420534591395,"table_sim":0.5263070089098566,"col_score":0}],"fk_expansion_candidates":31,"fk_expansion_added":2,"fk_expansion_blocked_count":25,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"sales_regions","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"leave_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"max_tables"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":21,"total_retrieval_latency_ms":27,"sql_generated":"SELECT e.employee_id, e.first_name || ' ' || e.last_name AS employee_full_name FROM employees e LEFT JOIN employee_training et ON e.employee_id = et.employee_id AND et.status = 'completed' WHERE et.course_id IN (SELECT course_id FROM training_courses WHERE is_mandatory = TRUE) AND et.employee_id IS NULL;","tables_used_in_sql":[],"explain_result":"success","rows_returned":0,"total_latency_ms":1391}
{"timestamp":"2026-01-29T20:45:15.471Z","query_id":"846e27a1-03a3-445c-8104-f33c20d35ee1","question":"Calculate month-over-month sales growth rate for the past 12 months","attempt_count":1,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_opportunities","sales_orders","sales_quotes","project_milestones","performance_reviews","purchase_orders","sales_regions","sales_territories","goods_receipts","fiscal_years","fiscal_periods","fixed_assets"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_opportunities","similarity":0.6157116926794552},{"table":"sales_orders","similarity":0.6006459034551404},{"table":"sales_regions","similarity":0.5852419849044662},{"table":"sales_quotes","similarity":0.5842211564145057},{"table":"project_milestones","similarity":0.570290032024122},{"table":"purchase_orders","similarity":0.5671901529888976},{"table":"performance_reviews","similarity":0.5664270760489215},{"table":"sales_territories","similarity":0.5642407853687107},{"table":"stock_transfers","similarity":0.5587294182734618},{"table":"goods_receipts","similarity":0.5586981186050166},{"table":"fiscal_periods","similarity":0.557865710059711},{"table":"fiscal_years","similarity":0.5484906283130861},{"table":"purchase_requisitions","similarity":0.5400891317424515},{"table":"inventory_adjustments","similarity":0.5400433012210731},{"table":"tax_rates","similarity":0.5390929131193718}],"column_hits_per_table":{"sales_opportunities":10,"sales_regions":2,"sales_orders":10,"sales_quotes":8,"maintenance_types":1,"performance_reviews":2,"project_milestones":3,"product_suppliers":1,"sales_territories":2,"depreciation_schedules":2,"purchase_orders":3,"inventory_adjustments":1,"goods_receipts":1,"fixed_assets":1,"project_resources":1,"fiscal_years":1,"inventory_levels":1},"top_columns_per_table":{"sales_opportunities":[{"column":"expected_close_date","similarity":0.6349920466572413},{"column":"actual_close_date","similarity":0.6306604293774668},{"column":"probability","similarity":0.6115666602689689}],"sales_regions":[{"column":"target_revenue","similarity":0.6246528697952606},{"column":"name","similarity":0.5895328709845001}],"sales_orders":[{"column":"order_date","similarity":0.6066547704969023},{"column":"total","similarity":0.596441977736594},{"column":"ship_date","similarity":0.5930488071352698}],"sales_quotes":[{"column":"quote_date","similarity":0.6043144886073183},{"column":"valid_until","similarity":0.5926742142050333},{"column":"status","similarity":0.58861972419265}],"maintenance_types":[{"column":"frequency_months","similarity":0.6025393190667295}],"performance_reviews":[{"column":"goals_met_percent","similarity":0.5879927707908889},{"column":"review_period_start","similarity":0.5628892649507783}],"project_milestones":[{"column":"amount","similarity":0.5831571816642501},{"column":"completed_date","similarity":0.5731111906139561},{"column":"due_date","similarity":0.5646006206164285}],"product_suppliers":[{"column":"lead_time_days","similarity":0.5824107328736775}],"sales_territories":[{"column":"name","similarity":0.5815838973769365},{"column":"region_id","similarity":0.5606403725985879}],"depreciation_schedules":[{"column":"monthly_amount","similarity":0.5809365473284506},{"column":"useful_life_months","similarity":0.5752368480135198}],"purchase_orders":[{"column":"expected_date","similarity":0.5807594956317658},{"column":"total","similarity":0.5587034043259257},{"column":"order_date","similarity":0.5574665711216267}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.5689704746812687}],"goods_receipts":[{"column":"receipt_date","similarity":0.5649131464666418}],"fixed_assets":[{"column":"purchase_date","similarity":0.5640514088105937}],"project_resources":[{"column":"hourly_rate","similarity":0.5639674847646822}],"fiscal_years":[{"column":"year","similarity":0.5622418074015364}],"inventory_levels":[{"column":"last_count_date","similarity":0.5583066702397402}]},"fused_scores":[{"table":"sales_opportunities","fused":0.7495559201460631,"table_sim":0.6157116926794552,"col_score":0.9503222613459748},{"table":"sales_orders","fused":0.7223378458191639,"table_sim":0.6006459034551404,"col_score":0.9048757593651993},{"table":"sales_quotes","fused":0.7107933321326374,"table_sim":0.5842211564145057,"col_score":0.9006515957098349},{"table":"project_milestones","fused":0.6900591300029644,"table_sim":0.570290032024122,"col_score":0.8697127769712282},{"table":"performance_reviews","fused":0.6876312069358641,"table_sim":0.5664270760489215,"col_score":0.8694374032662779},{"table":"purchase_orders","fused":0.6843585709112301,"table_sim":0.5671901529888976,"col_score":0.8601111977947287},{"table":"sales_regions","fused":0.6835409407986139,"table_sim":0.5852419849044662,"col_score":0.8309893746398356},{"table":"sales_territories","fused":0.5798776146505709,"table_sim":0.5642407853687107,"col_score":0.6033328585733613},{"table":"goods_receipts","fused":0.5611841297496667,"table_sim":0.5586981186050166,"col_score":0.5649131464666418},{"table":"fiscal_years","fused":0.5539910999484663,"table_sim":0.5484906283130861,"col_score":0.5622418074015364},{"table":"inventory_adjustments","fused":0.5516141706051514,"table_sim":0.5400433012210731,"col_score":0.5689704746812687},{"table":"depreciation_schedules","fused":0.34742198853408424,"table_sim":0,"col_score":0.8685549713352105},{"table":"stock_transfers","fused":0.33523765096407704,"table_sim":0.5587294182734618,"col_score":0},{"table":"fiscal_periods","fused":0.33471942603582655,"table_sim":0.557865710059711,"col_score":0},{"table":"purchase_requisitions","fused":0.32405347904547094,"table_sim":0.5400891317424515,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":13,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":58,"total_retrieval_latency_ms":64,"sql_generated":"","tables_used_in_sql":[],"total_latency_ms":2882,"failure_type":"execution_error","failure_details":"Model generated invalid output (gibberish detected)"}
{"timestamp":"2026-01-29T20:45:18.353Z","query_id":"6e245c48-b50e-4442-b70b-327b88254f25","question":"Find the average order value and order frequency for each customer segment based on credit limit","attempt_count":2,"retry_succeeded":true,"execution_success":true,"retriever_version":"V2","tables_retrieved":["customers","order_lines","sales_orders","purchase_orders","po_lines","inventory_levels","vendor_invoice_lines","product_suppliers","vendor_invoices","requisition_lines","customer_contacts","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"customers","similarity":0.6806365809432632},{"table":"order_lines","similarity":0.6612582093852053},{"table":"sales_orders","similarity":0.6503570787641184},{"table":"purchase_orders","similarity":0.6350119894518774},{"table":"po_lines","similarity":0.6239700790357152},{"table":"sales_opportunities","similarity":0.6079639266361453},{"table":"inventory_levels","similarity":0.6033202031698347},{"table":"sales_regions","similarity":0.5939454770122685},{"table":"vendor_invoice_lines","similarity":0.5937575753832759},{"table":"requisition_lines","similarity":0.590502871726471},{"table":"goods_receipts","similarity":0.5885428783810364},{"table":"product_suppliers","similarity":0.5881326527582414},{"table":"purchase_requisitions","similarity":0.5870519262773803},{"table":"customer_contacts","similarity":0.5862288727557493},{"table":"vendor_invoices","similarity":0.5856337339498445}],"column_hits_per_table":{"customers":6,"order_lines":8,"purchase_orders":9,"sales_orders":7,"po_lines":5,"reorder_rules":2,"vendor_invoice_lines":3,"product_suppliers":1,"inventory_levels":4,"vendor_invoices":1,"customer_contacts":1,"requisition_lines":1,"quote_lines":1,"budget_lines":1},"top_columns_per_table":{"customers":[{"column":"credit_limit","similarity":0.7585186196959948},{"column":"customer_number","similarity":0.6580317654044683},{"column":"phone","similarity":0.6535915529702684}],"order_lines":[{"column":"line_total","similarity":0.6948388698124641},{"column":"unit_price","similarity":0.6806419895725467},{"column":"discount_percent","similarity":0.6754620796934562}],"purchase_orders":[{"column":"total","similarity":0.6852668855656413},{"column":"shipping_cost","similarity":0.6529784604621701},{"column":"po_number","similarity":0.6529416456054898}],"sales_orders":[{"column":"total","similarity":0.6806848320717455},{"column":"order_number","similarity":0.6663157017306066},{"column":"shipping_cost","similarity":0.6460324115150056}],"po_lines":[{"column":"line_total","similarity":0.6613663843065055},{"column":"unit_cost","similarity":0.634997889978794},{"column":"quantity_received","similarity":0.6333850871020219}],"reorder_rules":[{"column":"max_quantity","similarity":0.6390768169493309},{"column":"min_quantity","similarity":0.613671491916226}],"vendor_invoice_lines":[{"column":"amount","similarity":0.6368350345890655},{"column":"unit_cost","similarity":0.6252213762445078},{"column":"quantity","similarity":0.6211936807432661}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6355194003397301}],"inventory_levels":[{"column":"quantity_reserved","similarity":0.6278756626527294},{"column":"last_count_date","similarity":0.6173098741422713},{"column":"quantity_on_hand","similarity":0.6152745260367936}],"vendor_invoices":[{"column":"total","similarity":0.6233351375751739}],"customer_contacts":[{"column":"phone","similarity":0.6135336030884168}],"requisition_lines":[{"column":"estimated_total","similarity":0.6134905613297535}],"quote_lines":[{"column":"line_total","similarity":0.6131735766593597}],"budget_lines":[{"column":"amount","similarity":0.6095658159713937}]},"fused_scores":[{"table":"customers","fused":0.8433957495252495,"table_sim":0.6806365809432632,"col_score":1.087534502398229},{"table":"order_lines","fused":0.8108188714706182,"table_sim":0.6612582093852053,"col_score":1.0351598645987374},{"table":"sales_orders","fused":0.7957513204332907,"table_sim":0.6503570787641184,"col_score":1.0138426829370488},{"table":"purchase_orders","fused":0.785709639989817,"table_sim":0.6350119894518774,"col_score":1.0117561157967263},{"table":"po_lines","fused":0.7659281791397902,"table_sim":0.6239700790357152,"col_score":0.9788653292959025},{"table":"inventory_levels","fused":0.7366043617914468,"table_sim":0.6033202031698347,"col_score":0.9365305997238651},{"table":"vendor_invoice_lines","fused":0.7360328343144933,"table_sim":0.5937575753832759,"col_score":0.9494457227113194},{"table":"product_suppliers","fused":0.6070873517908368,"table_sim":0.5881326527582414,"col_score":0.6355194003397301},{"table":"vendor_invoices","fused":0.6007142953999762,"table_sim":0.5856337339498445,"col_score":0.6233351375751739},{"table":"requisition_lines","fused":0.599697947567784,"table_sim":0.590502871726471,"col_score":0.6134905613297535},{"table":"customer_contacts","fused":0.5971507648888162,"table_sim":0.5862288727557493,"col_score":0.6135336030884168},{"table":"reorder_rules","fused":0.3783650251629776,"table_sim":0,"col_score":0.945912562907444},{"table":"sales_opportunities","fused":0.3647783559816872,"table_sim":0.6079639266361453,"col_score":0},{"table":"sales_regions","fused":0.3563672862073611,"table_sim":0.5939454770122685,"col_score":0},{"table":"goods_receipts","fused":0.3531257270286218,"table_sim":0.5885428783810364,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":17,"total_retrieval_latency_ms":22,"sql_generated":"SELECT c.credit_limit, AVG(s.total) AS avg_order_value, COUNT(*) / 365.0 AS order_frequency FROM customers c JOIN sales_orders s ON c.customer_id = s.customer_id GROUP BY c.credit_limit;","tables_used_in_sql":[],"explain_result":"success","sqlstate":"42703","error_message":"column c.segment does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":0,"autocorrect_failure_reason":"No candidates found for column 'segment'","rows_returned":5,"total_latency_ms":1950}
{"timestamp":"2026-01-29T20:45:20.303Z","query_id":"b6c7e449-1311-4e74-8c5f-a1bddd99772b","question":"What is the sales pipeline weighted value by stage and expected close month?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_opportunities","sales_orders","vendor_invoices","opportunity_stages","vendor_invoice_lines","purchase_orders","sales_quotes","sales_regions","project_phases","product_suppliers","order_lines","products"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_opportunities","similarity":0.6054695442586654},{"table":"opportunity_stages","similarity":0.5878194026125775},{"table":"purchase_orders","similarity":0.569620040129231},{"table":"sales_orders","similarity":0.5672773314428301},{"table":"vendor_invoices","similarity":0.5653986063661894},{"table":"vendor_invoice_lines","similarity":0.5524555005656138},{"table":"sales_quotes","similarity":0.550409683101325},{"table":"product_suppliers","similarity":0.5461777322512522},{"table":"sales_regions","similarity":0.5358537079732489},{"table":"inventory_levels","similarity":0.533856062475615},{"table":"stock_transfers","similarity":0.5326603234644891},{"table":"project_phases","similarity":0.5278052692037372},{"table":"order_lines","similarity":0.5277084897192255},{"table":"vendor_contacts","similarity":0.5244207269459633},{"table":"fiscal_years","similarity":0.5214777441208323}],"column_hits_per_table":{"sales_opportunities":6,"sales_orders":8,"sales_quotes":7,"vendor_invoices":7,"vendor_invoice_lines":3,"products":1,"purchase_orders":4,"opportunity_stages":2,"project_phases":2,"sales_regions":2,"depreciation_schedules":2,"product_suppliers":1,"project_milestones":1,"performance_reviews":1,"inventory_levels":1,"projects":1,"order_lines":1},"top_columns_per_table":{"sales_opportunities":[{"column":"expected_close_date","similarity":0.6672378848884489},{"column":"actual_close_date","similarity":0.634399953849031},{"column":"amount","similarity":0.5735263838442387}],"sales_orders":[{"column":"total","similarity":0.5926957958092102},{"column":"subtotal","similarity":0.5919476684332582},{"column":"shipping_cost","similarity":0.5804098809281995}],"sales_quotes":[{"column":"status","similarity":0.5911942655396014},{"column":"total","similarity":0.5841523851755166},{"column":"subtotal","similarity":0.5810304737355192}],"vendor_invoices":[{"column":"subtotal","similarity":0.5904633340627892},{"column":"total","similarity":0.58918482827673},{"column":"status","similarity":0.5659596977000683}],"vendor_invoice_lines":[{"column":"amount","similarity":0.587921854927484},{"column":"unit_cost","similarity":0.5805145112553433},{"column":"quantity","similarity":0.5740191375367586}],"products":[{"column":"weight","similarity":0.5793059408002791}],"purchase_orders":[{"column":"expected_date","similarity":0.5712405322677854},{"column":"total","similarity":0.55843434508497},{"column":"subtotal","similarity":0.5557966692183937}],"opportunity_stages":[{"column":"is_closed","similarity":0.5687914662845237},{"column":"probability","similarity":0.554174542810227}],"project_phases":[{"column":"end_date","similarity":0.5684419996726171},{"column":"status","similarity":0.5441275392901614}],"sales_regions":[{"column":"target_revenue","similarity":0.5671305047519016},{"column":"name","similarity":0.5466568514473741}],"depreciation_schedules":[{"column":"monthly_amount","similarity":0.5656288481399},{"column":"annual_amount","similarity":0.544202460241292}],"product_suppliers":[{"column":"lead_time_days","similarity":0.5635593957356553}],"project_milestones":[{"column":"amount","similarity":0.5574234871213531}],"performance_reviews":[{"column":"review_period_end","similarity":0.5567893896705155}],"inventory_levels":[{"column":"last_count_date","similarity":0.5552187328325828}],"projects":[{"column":"planned_end_date","similarity":0.5474865766090119}],"order_lines":[{"column":"discount_percent","similarity":0.5465995943119437}]},"fused_scores":[{"table":"sales_opportunities","fused":0.7570568712803851,"table_sim":0.6054695442586654,"col_score":0.9844378618129644},{"table":"sales_orders","fused":0.6958342508760338,"table_sim":0.5672773314428301,"col_score":0.8886696300258392},{"table":"vendor_invoices","fused":0.6932614631001753,"table_sim":0.5653986063661894,"col_score":0.8850557482011542},{"table":"opportunity_stages","fused":0.6910431366434013,"table_sim":0.5878194026125775,"col_score":0.8458787376896373},{"table":"vendor_invoice_lines","fused":0.6827449445614305,"table_sim":0.5524555005656138,"col_score":0.8781791105551557},{"table":"purchase_orders","fused":0.6819551060016467,"table_sim":0.569620040129231,"col_score":0.8504577048102704},{"table":"sales_quotes","fused":0.6801128586781056,"table_sim":0.550409683101325,"col_score":0.8746676220432762},{"table":"sales_regions","fused":0.6248963858873424,"table_sim":0.5358537079732489,"col_score":0.7584604027584826},{"table":"project_phases","fused":0.6202378168919118,"table_sim":0.5278052692037372,"col_score":0.7588866384241736},{"table":"product_suppliers","fused":0.5531303976450135,"table_sim":0.5461777322512522,"col_score":0.5635593957356553},{"table":"inventory_levels","fused":0.5424011306184021,"table_sim":0.533856062475615,"col_score":0.5552187328325828},{"table":"order_lines","fused":0.5352649315563127,"table_sim":0.5277084897192255,"col_score":0.5465995943119437},{"table":"depreciation_schedules","fused":0.33509203130421844,"table_sim":0,"col_score":0.837730078260546},{"table":"stock_transfers","fused":0.31959619407869344,"table_sim":0.5326603234644891,"col_score":0},{"table":"vendor_contacts","fused":0.314652436167578,"table_sim":0.5244207269459633,"col_score":0}],"fk_expansion_candidates":15,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"projects","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":31,"total_retrieval_latency_ms":37,"sql_generated":"","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column os.order_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":3,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":6705,"failure_type":"execution_error","failure_details":"Model did not generate SELECT statement"}
{"timestamp":"2026-01-29T20:45:27.008Z","query_id":"f3299c89-a840-4892-bcc0-84bdfe46bf1c","question":"Calculate inventory turnover ratio by product category","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["inventory_levels","inventory_transactions","asset_categories","products","inventory_adjustments","product_suppliers","sales_orders","reorder_rules","receipt_lines","product_categories","fixed_assets","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":1,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_levels","similarity":0.6747561713408694},{"table":"products","similarity":0.6673866757064916},{"table":"asset_categories","similarity":0.6658822163690923},{"table":"inventory_transactions","similarity":0.6584332771076702},{"table":"product_categories","similarity":0.6501703787798785},{"table":"reorder_rules","similarity":0.6320804286370688},{"table":"inventory_adjustments","similarity":0.631066892629761},{"table":"goods_receipts","similarity":0.6155086832245751},{"table":"asset_maintenance","similarity":0.6045690515376625},{"table":"fixed_assets","similarity":0.6018441701160724},{"table":"product_suppliers","similarity":0.6013426853614583},{"table":"receipt_lines","similarity":0.596972482520933},{"table":"sales_orders","similarity":0.5904178851402269},{"table":"depreciation_entries","similarity":0.586520590552934},{"table":"order_lines","similarity":0.5853842956573193}],"column_hits_per_table":{"inventory_transactions":8,"inventory_levels":7,"asset_categories":4,"products":7,"product_categories":5,"sales_orders":4,"fixed_assets":1,"inventory_adjustments":5,"reorder_rules":2,"product_suppliers":2,"sales_regions":1,"depreciation_entries":1,"receipt_lines":2,"goods_receipts":1},"top_columns_per_table":{"inventory_transactions":[{"column":"quantity","similarity":0.6865537352744734},{"column":"transaction_type","similarity":0.6508604601013612},{"column":"product_id","similarity":0.6488474271833253}],"inventory_levels":[{"column":"quantity_reserved","similarity":0.6807736099760374},{"column":"quantity_available","similarity":0.6752817875893032},{"column":"product_id","similarity":0.6665316206818281}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.6677845311404557},{"column":"depreciation_method","similarity":0.636435148844442},{"column":"useful_life_years","similarity":0.6246456594520073}],"products":[{"column":"category_id","similarity":0.6569412387377351},{"column":"weight","similarity":0.6437332914835887},{"column":"unit_cost","similarity":0.6272328353575076}],"product_categories":[{"column":"category_id","similarity":0.6539744060156725},{"column":"description","similarity":0.6525521507615628},{"column":"is_active","similarity":0.6498264325617669}],"sales_orders":[{"column":"total","similarity":0.6251835363649095},{"column":"order_number","similarity":0.6053905248062422},{"column":"subtotal","similarity":0.6052825411110333}],"fixed_assets":[{"column":"category_id","similarity":0.6200942331147149}],"inventory_adjustments":[{"column":"adjustment_number","similarity":0.6158389191950121},{"column":"adjusted_by","similarity":0.6148750217624924},{"column":"status","similarity":0.6081076578124999}],"reorder_rules":[{"column":"product_id","similarity":0.6137559004977273},{"column":"reorder_quantity","similarity":0.6086116987509864}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6128603706932287},{"column":"unit_cost","similarity":0.5980571455291517}],"sales_regions":[{"column":"target_revenue","similarity":0.6085079266346386}],"depreciation_entries":[{"column":"accumulated_depreciation","similarity":0.6077181065202967}],"receipt_lines":[{"column":"product_id","similarity":0.6076761642596111},{"column":"quantity_received","similarity":0.6073129685640721}],"goods_receipts":[{"column":"receipt_number","similarity":0.6055856654540261}]},"fused_scores":[{"table":"inventory_levels","fused":0.8122195043127973,"table_sim":0.6747561713408694,"col_score":1.018414503770689},{"table":"inventory_transactions","fused":0.7998535523946637,"table_sim":0.6584332771076702,"col_score":1.011983965325154},{"table":"asset_categories","fused":0.7939301720465259,"table_sim":0.6658822163690923,"col_score":0.9860021055626766},{"table":"products","fused":0.7833718890888319,"table_sim":0.6673866757064916,"col_score":0.9573497091623425},{"table":"inventory_adjustments","fused":0.74795070760836,"table_sim":0.631066892629761,"col_score":0.9232764300762584},{"table":"product_suppliers","fused":0.7255611885999969,"table_sim":0.6013426853614583,"col_score":0.9118889434578046},{"table":"sales_orders","fused":0.7254022505913484,"table_sim":0.5904178851402269,"col_score":0.9278787987680306},{"table":"reorder_rules","fused":0.7086187627523177,"table_sim":0.6320804286370688,"col_score":0.823426263925191},{"table":"receipt_lines","fused":0.6861833399345343,"table_sim":0.596972482520933,"col_score":0.819999626054936},{"table":"product_categories","fused":0.6645723620589341,"table_sim":0.6501703787798785,"col_score":0.6861753369775176},{"table":"goods_receipts","fused":0.6115394761163555,"table_sim":0.6155086832245751,"col_score":0.6055856654540261},{"table":"depreciation_entries","fused":0.5949995969398791,"table_sim":0.586520590552934,"col_score":0.6077181065202967},{"table":"fixed_assets","fused":0.5347328873417636,"table_sim":0.6018441701160724,"col_score":0.4340659631803004},{"table":"asset_maintenance","fused":0.3627414309225975,"table_sim":0.6045690515376625,"col_score":0},{"table":"order_lines","fused":0.35123057739439156,"table_sim":0.5853842956573193,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":13,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"order_lines","reason":"max_tables"},{"table":"po_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":19,"total_retrieval_latency_ms":25,"sql_generated":"SELECT pc.name AS product_category, SUM(il.quantity_on_hand) / AVG(il.quantity_available) AS inventory_turnover_ratio FROM inventory_levels il JOIN products p ON il.product_id = p.product_id JOIN product_categories pc ON p.category_id = pc.category_id GROUP BY pc.name;","tables_used_in_sql":[],"explain_result":"success","rows_returned":30,"total_latency_ms":1322}
{"timestamp":"2026-01-29T20:45:28.330Z","query_id":"a27883a1-4278-41b3-8831-ef3d417a090f","question":"Identify products with significant inventory discrepancies (adjustment > 10% of stock)","attempt_count":2,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["inventory_adjustments","adjustment_lines","inventory_transactions","inventory_levels","products","fixed_assets","asset_categories","stock_transfers","sales_orders","product_suppliers","asset_maintenance","order_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_adjustments","similarity":0.6958975386244389},{"table":"adjustment_lines","similarity":0.651007722195867},{"table":"fixed_assets","similarity":0.5955860146307721},{"table":"inventory_levels","similarity":0.5926011478403523},{"table":"products","similarity":0.578715845938642},{"table":"stock_transfers","similarity":0.5760981592349576},{"table":"inventory_transactions","similarity":0.5750206157907899},{"table":"asset_categories","similarity":0.5623112702235089},{"table":"asset_maintenance","similarity":0.5600794494972439},{"table":"product_suppliers","similarity":0.5588750264521751},{"table":"sales_orders","similarity":0.5479311734009632},{"table":"order_lines","similarity":0.5473705995587962},{"table":"purchase_orders","similarity":0.546212124678954},{"table":"product_categories","similarity":0.5459325805601473},{"table":"reorder_rules","similarity":0.5325202996518776}],"column_hits_per_table":{"inventory_adjustments":8,"adjustment_lines":5,"inventory_transactions":4,"products":5,"inventory_levels":5,"stock_transfers":2,"product_categories":1,"sales_orders":2,"product_suppliers":1,"asset_categories":3,"fixed_assets":4,"warehouse_locations":1,"goods_receipts":1,"project_expenses":1,"purchase_requisitions":1,"asset_locations":1,"asset_maintenance":1,"sales_opportunities":1,"vendor_invoices":2,"purchase_orders":1},"top_columns_per_table":{"inventory_adjustments":[{"column":"adjustment_number","similarity":0.7379814171122983},{"column":"reason","similarity":0.727925874735162},{"column":"status","similarity":0.7097133930935916}],"adjustment_lines":[{"column":"quantity_change","similarity":0.6459437862491665},{"column":"quantity_before","similarity":0.638065129258906},{"column":"quantity_after","similarity":0.636824144296085}],"inventory_transactions":[{"column":"transaction_type","similarity":0.6388771360730054},{"column":"reference_type","similarity":0.6379927241845618},{"column":"quantity","similarity":0.611413004161695}],"products":[{"column":"sku","similarity":0.6166735172572736},{"column":"name","similarity":0.6049081894916613},{"column":"weight","similarity":0.6002742783527346}],"inventory_levels":[{"column":"quantity_on_hand","similarity":0.6143345114617179},{"column":"quantity_available","similarity":0.6136312184002083},{"column":"quantity_reserved","similarity":0.6127891253033684}],"stock_transfers":[{"column":"transfer_number","similarity":0.6121115337226785},{"column":"status","similarity":0.6084281897334642}],"product_categories":[{"column":"name","similarity":0.6105471170007082}],"sales_orders":[{"column":"order_number","similarity":0.6049937069135132},{"column":"status","similarity":0.5883288690803906}],"product_suppliers":[{"column":"vendor_sku","similarity":0.6005565436728285}],"asset_categories":[{"column":"depreciation_method","similarity":0.5998811628635573},{"column":"name","similarity":0.5815804725674092},{"column":"salvage_value_percent","similarity":0.5811592495285139}],"fixed_assets":[{"column":"serial_number","similarity":0.5963742863000839},{"column":"asset_tag","similarity":0.5892195830987257},{"column":"name","similarity":0.5797471569989101}],"warehouse_locations":[{"column":"aisle","similarity":0.5865692348819901}],"goods_receipts":[{"column":"receipt_number","similarity":0.5864837088793964}],"project_expenses":[{"column":"category","similarity":0.5843825285695107}],"purchase_requisitions":[{"column":"requisition_number","similarity":0.5771490096202545}],"asset_locations":[{"column":"floor","similarity":0.5759538723637104}],"asset_maintenance":[{"column":"status","similarity":0.5750561706184214}],"sales_opportunities":[{"column":"source","similarity":0.5748716289995487}],"vendor_invoices":[{"column":"invoice_number","similarity":0.5743499698456791},{"column":"status","similarity":0.5674179154395642}],"purchase_orders":[{"column":"status","similarity":0.5739475463327183}]},"fused_scores":[{"table":"inventory_adjustments","fused":0.8583162649666151,"table_sim":0.6958975386244389,"col_score":1.1019443544798793},{"table":"adjustment_lines","fused":0.776595173668968,"table_sim":0.651007722195867,"col_score":0.9649763508786195},{"table":"inventory_transactions","fused":0.7281617687405886,"table_sim":0.5750206157907899,"col_score":0.9578734981652863},{"table":"inventory_levels","fused":0.7240207369689402,"table_sim":0.5926011478403523,"col_score":0.921150120661822},{"table":"products","fused":0.7139537701366416,"table_sim":0.578715845938642,"col_score":0.9168106564336409},{"table":"fixed_assets","fused":0.713745239918242,"table_sim":0.5955860146307721,"col_score":0.8909840778494468},{"table":"asset_categories","fused":0.693571077185231,"table_sim":0.5623112702235089,"col_score":0.8904607876278143},{"table":"stock_transfers","fused":0.6756834555927309,"table_sim":0.5760981592349576,"col_score":0.825061400129391},{"table":"sales_orders","fused":0.6531222284772379,"table_sim":0.5479311734009632,"col_score":0.8109088110916499},{"table":"product_suppliers","fused":0.5755476333404366,"table_sim":0.5588750264521751,"col_score":0.6005565436728285},{"table":"product_categories","fused":0.4985127410962866,"table_sim":0.5459325805601473,"col_score":0.42738298190049573},{"table":"asset_maintenance","fused":0.4970633974715043,"table_sim":0.5600794494972439,"col_score":0.40253931943289495},{"table":"purchase_orders","fused":0.48843258778053344,"table_sim":0.546212124678954,"col_score":0.40176328243290277},{"table":"order_lines","fused":0.3284223597352777,"table_sim":0.5473705995587962,"col_score":0},{"table":"reorder_rules","fused":0.31951217979112656,"table_sim":0.5325202996518776,"col_score":0}],"fk_expansion_candidates":22,"fk_expansion_added":2,"fk_expansion_blocked_count":16,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"product_categories","reason":"max_tables"},{"table":"purchase_orders","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"max_tables"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":19,"total_retrieval_latency_ms":25,"sql_generated":"","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42601","error_message":"syntax error at or near \"LIMIT\"","total_latency_ms":5559,"failure_type":"execution_error","failure_details":"Model did not generate SELECT statement"}
{"timestamp":"2026-01-29T20:45:33.889Z","query_id":"c429dd5d-8266-44e3-ac04-10553d4df5d7","question":"Calculate vendor performance score based on on-time delivery and invoice accuracy","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["vendor_invoices","performance_reviews","vendors","vendor_invoice_lines","product_suppliers","vendor_contacts","sales_orders","purchase_orders","goods_receipts","customers","order_lines","purchase_requisitions"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"vendor_invoices","similarity":0.6955551654807471},{"table":"performance_reviews","similarity":0.6709085810677549},{"table":"purchase_orders","similarity":0.6347301134279532},{"table":"vendors","similarity":0.630909375510322},{"table":"product_suppliers","similarity":0.6192498236848171},{"table":"vendor_invoice_lines","similarity":0.6085569773940885},{"table":"vendor_contacts","similarity":0.5997141827932857},{"table":"sales_orders","similarity":0.5961588710632616},{"table":"goods_receipts","similarity":0.5661835877563559},{"table":"customers","similarity":0.5465937183932046},{"table":"sales_opportunities","similarity":0.5460555777323932},{"table":"timesheets","similarity":0.5442791382718302},{"table":"order_lines","similarity":0.5315126832995996},{"table":"purchase_requisitions","similarity":0.5282778311071779},{"table":"employee_certifications","similarity":0.5262320271658971}],"column_hits_per_table":{"vendor_invoices":12,"vendor_invoice_lines":6,"vendors":10,"performance_reviews":9,"purchase_orders":2,"vendor_contacts":4,"product_suppliers":3,"fixed_assets":1,"sales_orders":2,"asset_maintenance":1},"top_columns_per_table":{"vendor_invoices":[{"column":"invoice_date","similarity":0.6820971378162017},{"column":"total","similarity":0.6809847435881535},{"column":"amount_paid","similarity":0.6702202083428355}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.6465337363568044},{"column":"amount","similarity":0.6406576732483038},{"column":"unit_cost","similarity":0.6290973902712709}],"vendors":[{"column":"vendor_number","similarity":0.6392790672289599},{"column":"phone","similarity":0.632615514334186},{"column":"website","similarity":0.6187955062109327}],"performance_reviews":[{"column":"review_date","similarity":0.6391298059120761},{"column":"goals_met_percent","similarity":0.6348897232221123},{"column":"employee_id","similarity":0.6192794816779427}],"purchase_orders":[{"column":"vendor_id","similarity":0.6082240149448},{"column":"shipping_cost","similarity":0.5758565410529615}],"vendor_contacts":[{"column":"phone","similarity":0.6061779393166513},{"column":"title","similarity":0.5932972624562619},{"column":"email","similarity":0.5917429339564875}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6044250768889664},{"column":"lead_time_days","similarity":0.6030466911489025},{"column":"vendor_id","similarity":0.5943087874293309}],"fixed_assets":[{"column":"vendor_id","similarity":0.5842101591334125}],"sales_orders":[{"column":"shipping_cost","similarity":0.5793358176930354},{"column":"total","similarity":0.5764972250136845}],"asset_maintenance":[{"column":"vendor_id","similarity":0.5782090997352557}]},"fused_scores":[{"table":"vendor_invoices","fused":0.8263689031325596,"table_sim":0.6955551654807471,"col_score":1.0225895096102784},{"table":"performance_reviews","fused":0.7851750156499058,"table_sim":0.6709085810677549,"col_score":0.9565746675231324},{"table":"vendors","fused":0.7607803550646144,"table_sim":0.630909375510322,"col_score":0.9555868243960528},{"table":"vendor_invoice_lines","fused":0.7518792156288356,"table_sim":0.6085569773940885,"col_score":0.9668625729809563},{"table":"product_suppliers","fused":0.7339292631962573,"table_sim":0.6192498236848171,"col_score":0.9059484224634177},{"table":"vendor_contacts","fused":0.7209591378938843,"table_sim":0.5997141827932857,"col_score":0.9028265705447822},{"table":"sales_orders","fused":0.704729094717908,"table_sim":0.5961588710632616,"col_score":0.8675844301998776},{"table":"purchase_orders","fused":0.6963320465702285,"table_sim":0.6347301134279532,"col_score":0.7887349462836415},{"table":"goods_receipts","fused":0.33971015265381355,"table_sim":0.5661835877563559,"col_score":0},{"table":"customers","fused":0.32795623103592275,"table_sim":0.5465937183932046,"col_score":0},{"table":"sales_opportunities","fused":0.32763334663943594,"table_sim":0.5460555777323932,"col_score":0},{"table":"timesheets","fused":0.32656748296309807,"table_sim":0.5442791382718302,"col_score":0},{"table":"order_lines","fused":0.3189076099797597,"table_sim":0.5315126832995996,"col_score":0},{"table":"purchase_requisitions","fused":0.3169666986643067,"table_sim":0.5282778311071779,"col_score":0},{"table":"employee_certifications","fused":0.3157392162995383,"table_sim":0.5262320271658971,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":13,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":27,"total_retrieval_latency_ms":34,"sql_generated":"SELECT v.vendor_id, AVG(CASE WHEN g.received_by IS NOT NULL THEN 1 ELSE 0 END) AS on_time_delivery_score, AVG(CASE WHEN ivl.amount = vr.total THEN 1 ELSE 0 END) AS invoice_accuracy_score FROM vendors v LEFT JOIN goods_receipts g ON v.vendor_id = g.po_id AND g.received_by IS NOT NULL LEFT JOIN vendor_invoices iv ON v.vendor_id = iv.vendor_id LEFT JOIN vendor_invoice_lines ivl ON iv.invoice_id = ivl.invoice_id GROUP BY v.vendor_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42P01","error_message":"missing FROM-clause entry for table \"vr\"","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_failure_reason":"Alias 'vr' not defined. Possible table: vendor_invoices. Define alias in FROM/JOIN clause.","total_latency_ms":6530,"failure_type":"join_path_miss","failure_details":"Database error after 3 attempts: missing FROM-clause entry for table \"vr\""}
{"timestamp":"2026-01-29T20:45:40.419Z","query_id":"1c2090c2-dd10-43c9-9a6b-2153694983db","question":"Generate a trial balance for the current period showing debits and credits by account category","attempt_count":2,"retry_succeeded":true,"execution_success":true,"retriever_version":"V2","tables_retrieved":["bank_accounts","account_types","depreciation_entries","depreciation_schedules","asset_categories","bank_transactions","fiscal_periods","budget_lines","project_budgets","budgets","chart_of_accounts","departments"],"tables_from_table_retrieval":15,"tables_from_column_only":10,"tables_from_fk_expansion":2,"table_scores":[{"table":"bank_accounts","similarity":0.6367900839880641},{"table":"asset_categories","similarity":0.6346535809758647},{"table":"account_types","similarity":0.6272285653729832},{"table":"depreciation_entries","similarity":0.6225511215159643},{"table":"depreciation_schedules","similarity":0.6165057393727287},{"table":"bank_transactions","similarity":0.6150962404412702},{"table":"fiscal_periods","similarity":0.6041900407507028},{"table":"chart_of_accounts","similarity":0.6007482259075341},{"table":"budget_lines","similarity":0.593425377594523},{"table":"customers","similarity":0.5828336551027367},{"table":"certifications","similarity":0.5762638622043766},{"table":"benefit_types","similarity":0.5715028878009876},{"table":"employee_benefits","similarity":0.5708097023317666},{"table":"project_budgets","similarity":0.5699587952178357},{"table":"budgets","similarity":0.568767701756073}],"column_hits_per_table":{"bank_accounts":4,"account_types":2,"depreciation_schedules":7,"depreciation_entries":5,"asset_categories":2,"benefit_types":1,"fiscal_periods":4,"project_budgets":2,"journal_lines":2,"project_expenses":1,"bank_transactions":4,"budgets":2,"departments":1,"asset_maintenance":1,"timesheets":1,"projects":1,"chart_of_accounts":1,"purchase_orders":2,"customers":1,"vendor_invoices":2,"currencies":1,"budget_lines":2,"inventory_adjustments":1},"top_columns_per_table":{"bank_accounts":[{"column":"current_balance","similarity":0.6869151637984203},{"column":"account_name","similarity":0.6080144236924266},{"column":"bank_name","similarity":0.6066260579567178}],"account_types":[{"column":"normal_balance","similarity":0.6484160338759071},{"column":"category","similarity":0.6238956196601739}],"depreciation_schedules":[{"column":"monthly_amount","similarity":0.6460216272986022},{"column":"annual_amount","similarity":0.6435863787386237},{"column":"start_date","similarity":0.6178549858715044}],"depreciation_entries":[{"column":"amount","similarity":0.6460096782233629},{"column":"period_id","similarity":0.6401048650864071},{"column":"accumulated_depreciation","similarity":0.6398491695651559}],"asset_categories":[{"column":"depreciation_method","similarity":0.6399578806467106},{"column":"salvage_value_percent","similarity":0.5906692564768835}],"benefit_types":[{"column":"annual_cost","similarity":0.614857236154928}],"fiscal_periods":[{"column":"name","similarity":0.6146000724463977},{"column":"period_id","similarity":0.5997794756800909},{"column":"start_date","similarity":0.5958425893901163}],"project_budgets":[{"column":"category","similarity":0.6144822335998272},{"column":"notes","similarity":0.5865421018912569}],"journal_lines":[{"column":"debit","similarity":0.6131519383994092},{"column":"credit","similarity":0.5929067215683504}],"project_expenses":[{"column":"category","similarity":0.6127356317273961}],"bank_transactions":[{"column":"amount","similarity":0.6081752093881687},{"column":"reference","similarity":0.5996793168104082},{"column":"reconciled","similarity":0.5871486254020114}],"budgets":[{"column":"status","similarity":0.5989844575610859},{"column":"total_amount","similarity":0.5890036805604402}],"departments":[{"column":"budget","similarity":0.5980463108867591}],"asset_maintenance":[{"column":"cost","similarity":0.5961138617057076}],"timesheets":[{"column":"total_hours","similarity":0.5956067219737295}],"projects":[{"column":"budget","similarity":0.5946377463056134}],"chart_of_accounts":[{"column":"description","similarity":0.5928520596952875}],"purchase_orders":[{"column":"total","similarity":0.5920004066122796},{"column":"subtotal","similarity":0.589720753994531}],"customers":[{"column":"credit_limit","similarity":0.5915804628924816}],"vendor_invoices":[{"column":"subtotal","similarity":0.5901699024505791},{"column":"total","similarity":0.5854052260141052}],"currencies":[{"column":"symbol","similarity":0.5869910028334465}],"budget_lines":[{"column":"period_id","similarity":0.5869648406526051},{"column":"amount","similarity":0.5853230300290301}],"inventory_adjustments":[{"column":"status","similarity":0.5842747186783505}]},"fused_scores":[{"table":"bank_accounts","fused":0.777472853583897,"table_sim":0.6367900839880641,"col_score":0.9884970079776462},{"table":"account_types","fused":0.7604826767061876,"table_sim":0.6272285653729832,"col_score":0.960363843705994},{"table":"depreciation_entries","fused":0.7599043781119549,"table_sim":0.6225511215159643,"col_score":0.9659342630059409},{"table":"depreciation_schedules","fused":0.7570293702908029,"table_sim":0.6165057393727287,"col_score":0.9678148166679141},{"table":"asset_categories","fused":0.7549091521395797,"table_sim":0.6346535809758647,"col_score":0.9352925088851523},{"table":"bank_transactions","fused":0.7322636913821112,"table_sim":0.6150962404412702,"col_score":0.9080148677933728},{"table":"fiscal_periods","fused":0.7188051953965271,"table_sim":0.6041900407507028,"col_score":0.8907279273652635},{"table":"budget_lines","fused":0.6723595162596906,"table_sim":0.593425377594523,"col_score":0.7907607242574419},{"table":"project_budgets","fused":0.6698840648354083,"table_sim":0.5699587952178357,"col_score":0.8197719692617671},{"table":"budgets","fused":0.6607199173363719,"table_sim":0.568767701756073,"col_score":0.7986482407068203},{"table":"benefit_types","fused":0.5888446271425638,"table_sim":0.5715028878009876,"col_score":0.614857236154928},{"table":"customers","fused":0.5863323782186346,"table_sim":0.5828336551027367,"col_score":0.5915804628924816},{"table":"chart_of_accounts","fused":0.526447512259201,"table_sim":0.6007482259075341,"col_score":0.41499644178670125},{"table":"journal_lines","fused":0.3638421196734338,"table_sim":0,"col_score":0.9096052991835843},{"table":"purchase_orders","fused":0.35474431344381807,"table_sim":0,"col_score":0.8868607836095451}],"fk_expansion_candidates":8,"fk_expansion_added":2,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":31,"total_retrieval_latency_ms":37,"sql_generated":"SELECT ca.name AS \"Account Category\", SUM(bl.amount) AS \"Debit Total\" FROM budgets b JOIN budget_lines bl ON b.budget_id = bl.budget_id AND bl.period_id IN (SELECT period_id FROM fiscal_periods WHERE fiscal_year_id = 2023 AND is_closed = TRUE) JOIN chart_of_accounts ca ON bl.account_id = ca.account_id GROUP BY ca.name;","tables_used_in_sql":[],"explain_result":"success","sqlstate":"42703","error_message":"column b.amount does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":5,"autocorrect_failure_reason":"Replacement pattern not found in SQL","rows_returned":0,"total_latency_ms":3013}
{"timestamp":"2026-01-29T20:45:43.432Z","query_id":"3be8dd95-8470-4479-a68f-6db110907c4d","question":"Calculate cash flow from bank transactions grouped by transaction type and month","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["bank_transactions","bank_accounts","inventory_transactions","account_types","depreciation_entries","depreciation_schedules","asset_transfers","vendor_invoices","asset_categories","stock_transfers","currencies"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":1,"table_scores":[{"table":"bank_transactions","similarity":0.7232703691525166},{"table":"bank_accounts","similarity":0.6412885484513536},{"table":"inventory_transactions","similarity":0.6130368701918206},{"table":"account_types","similarity":0.5746397921552414},{"table":"depreciation_entries","similarity":0.5609169011076522},{"table":"stock_transfers","similarity":0.5608182762969601},{"table":"asset_categories","similarity":0.5603941855250653},{"table":"asset_transfers","similarity":0.557070516037654},{"table":"goods_receipts","similarity":0.5570340666097445},{"table":"asset_maintenance","similarity":0.5550122446563767},{"table":"timesheet_entries","similarity":0.5547038308987016},{"table":"customers","similarity":0.5536205739048321},{"table":"depreciation_schedules","similarity":0.5510145110305125},{"table":"budget_lines","similarity":0.5501439459081744},{"table":"vendor_invoices","similarity":0.5501234090713347}],"column_hits_per_table":{"bank_transactions":9,"inventory_transactions":6,"bank_accounts":8,"depreciation_schedules":2,"account_types":2,"depreciation_entries":4,"asset_transfers":4,"benefit_types":1,"sales_orders":1,"vendor_invoices":2,"departments":1,"project_budgets":3,"asset_categories":1,"budgets":1,"currencies":3,"projects":1,"stock_transfers":1},"top_columns_per_table":{"bank_transactions":[{"column":"transaction_type","similarity":0.7226031453519327},{"column":"transaction_date","similarity":0.7197948108865876},{"column":"amount","similarity":0.6937932229170158}],"inventory_transactions":[{"column":"transaction_type","similarity":0.6273448250719428},{"column":"transaction_date","similarity":0.5883515821242886},{"column":"reference_type","similarity":0.5870442032650763}],"bank_accounts":[{"column":"bank_name","similarity":0.6206916343579985},{"column":"currency_id","similarity":0.6080233956923218},{"column":"account_name","similarity":0.6062681595576817}],"depreciation_schedules":[{"column":"monthly_amount","similarity":0.59447656917774},{"column":"annual_amount","similarity":0.5604557333370965}],"account_types":[{"column":"category","similarity":0.5767477686638358},{"column":"normal_balance","similarity":0.553298547454127}],"depreciation_entries":[{"column":"entry_date","similarity":0.5764456999460359},{"column":"amount","similarity":0.5712923688967707},{"column":"accumulated_depreciation","similarity":0.5593081810441107}],"asset_transfers":[{"column":"transfer_date","similarity":0.5753286251599586},{"column":"reason","similarity":0.5680950655456624},{"column":"transferred_by","similarity":0.557655111028576}],"benefit_types":[{"column":"annual_cost","similarity":0.5690702206996687}],"sales_orders":[{"column":"subtotal","similarity":0.5690246047374201}],"vendor_invoices":[{"column":"subtotal","similarity":0.5667884131380803},{"column":"amount_paid","similarity":0.5537916195948072}],"departments":[{"column":"budget","similarity":0.56620715274516}],"project_budgets":[{"column":"category","similarity":0.5630575145165342},{"column":"notes","similarity":0.5566774782603028},{"column":"planned_amount","similarity":0.5539083156532728}],"asset_categories":[{"column":"depreciation_method","similarity":0.5617474146945006}],"budgets":[{"column":"status","similarity":0.5601445371969136}],"currencies":[{"column":"symbol","similarity":0.5600491754665113},{"column":"code","similarity":0.5571181350069567},{"column":"name","similarity":0.5532051640223443}],"projects":[{"column":"budget","similarity":0.5548004632768436}],"stock_transfers":[{"column":"status","similarity":0.5540703957924323}]},"fused_scores":[{"table":"bank_transactions","fused":0.8669624418096007,"table_sim":0.7232703691525166,"col_score":1.0825005507952266},{"table":"bank_accounts","fused":0.7438459153666748,"table_sim":0.6412885484513536,"col_score":0.8976819657396565},{"table":"inventory_transactions","fused":0.7364303685687272,"table_sim":0.6130368701918206,"col_score":0.9215206161340871},{"table":"account_types","fused":0.6861426922495046,"table_sim":0.5746397921552414,"col_score":0.8533970423908993},{"table":"depreciation_entries","fused":0.6813868944223598,"table_sim":0.5609169011076522,"col_score":0.8620918843944212},{"table":"depreciation_schedules","fused":0.6804904809568229,"table_sim":0.5510145110305125,"col_score":0.8747044358462883},{"table":"asset_transfers","fused":0.6779927727957084,"table_sim":0.557070516037654,"col_score":0.8593761579327899},{"table":"vendor_invoices","fused":0.634320237441306,"table_sim":0.5501234090713347,"col_score":0.7606154799962628},{"table":"asset_categories","fused":0.5609354771928394,"table_sim":0.5603941855250653,"col_score":0.5617474146945006},{"table":"stock_transfers","fused":0.4916306766000571,"table_sim":0.5608182762969601,"col_score":0.3878492770547026},{"table":"project_budgets","fused":0.3360046689372682,"table_sim":0,"col_score":0.8400116723431705},{"table":"currencies","fused":0.3354432971879959,"table_sim":0,"col_score":0.8386082429699897},{"table":"goods_receipts","fused":0.3342204399658467,"table_sim":0.5570340666097445,"col_score":0},{"table":"asset_maintenance","fused":0.333007346793826,"table_sim":0.5550122446563767,"col_score":0},{"table":"timesheet_entries","fused":0.3328222985392209,"table_sim":0.5547038308987016,"col_score":0}],"fk_expansion_candidates":14,"fk_expansion_added":1,"fk_expansion_blocked_count":13,"fk_expansion_blocked":[{"table":"asset_locations","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":16,"total_retrieval_latency_ms":21,"sql_generated":"SELECT transaction_type, EXTRACT(MONTH FROM transaction_date) AS month, SUM(amount) as cash_flow \nFROM bank_accounts ba JOIN bank_transactions bt ON ba.bank_account_id = bt.bank_account_id \nGROUP BY transaction_type, month;","tables_used_in_sql":[],"total_latency_ms":3181,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T20:45:46.613Z","query_id":"13edd486-5690-46da-b418-cf9a4b914764","question":"Calculate project profitability comparing budget vs actual expenses","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["project_budgets","project_expenses","budgets","projects","project_resources","project_milestones","project_tasks","budget_lines","depreciation_schedules","cost_centers","departments","fiscal_periods"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_budgets","similarity":0.6969020680342091},{"table":"project_expenses","similarity":0.6901643358621746},{"table":"budgets","similarity":0.6054710146643664},{"table":"project_resources","similarity":0.5884392614999969},{"table":"budget_lines","similarity":0.5713392587016516},{"table":"project_milestones","similarity":0.5640452185585958},{"table":"projects","similarity":0.5566750316098611},{"table":"project_tasks","similarity":0.5430288007477744},{"table":"fiscal_periods","similarity":0.5421955610342155},{"table":"cost_centers","similarity":0.5334843814345405},{"table":"fiscal_years","similarity":0.5330512679525921},{"table":"timesheet_entries","similarity":0.5277321533499411},{"table":"depreciation_schedules","similarity":0.5161348636193235},{"table":"task_assignments","similarity":0.5090218924299275},{"table":"project_phases","similarity":0.5086822303322549}],"column_hits_per_table":{"project_budgets":6,"project_expenses":10,"projects":4,"budgets":8,"departments":1,"budget_lines":3,"project_resources":4,"project_milestones":2,"project_tasks":3,"product_suppliers":1,"products":1,"asset_maintenance":1,"fixed_assets":1,"depreciation_schedules":2,"requisition_lines":1,"cost_centers":1,"benefit_types":1},"top_columns_per_table":{"project_budgets":[{"column":"actual_amount","similarity":0.732381284281357},{"column":"planned_amount","similarity":0.7077655279095464},{"column":"category","similarity":0.6837344583515939}],"project_expenses":[{"column":"amount","similarity":0.719310515063275},{"column":"is_billable","similarity":0.6944071710464874},{"column":"status","similarity":0.6819235762798355}],"projects":[{"column":"budget","similarity":0.7010305666750449},{"column":"project_number","similarity":0.58156128942889},{"column":"status","similarity":0.5727418455053092}],"budgets":[{"column":"total_amount","similarity":0.6566540327671284},{"column":"status","similarity":0.6352662167542227},{"column":"name","similarity":0.6054909942282356}],"departments":[{"column":"budget","similarity":0.6264870674058582}],"budget_lines":[{"column":"amount","similarity":0.6204819952699552},{"column":"budget_id","similarity":0.5789661588581666},{"column":"period_id","similarity":0.5466449934647022}],"project_resources":[{"column":"hourly_rate","similarity":0.6071134658167074},{"column":"allocation_percent","similarity":0.5838131867437651},{"column":"project_id","similarity":0.5594873197213137}],"project_milestones":[{"column":"amount","similarity":0.5947539124725684},{"column":"is_billable","similarity":0.5868460872676451}],"project_tasks":[{"column":"actual_hours","similarity":0.5942692351392902},{"column":"estimated_hours","similarity":0.5851366658523576},{"column":"status","similarity":0.5591681405321435}],"product_suppliers":[{"column":"unit_cost","similarity":0.5658746967491194}],"products":[{"column":"unit_cost","similarity":0.5580213602692399}],"asset_maintenance":[{"column":"cost","similarity":0.5577313360447209}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5575179107884427}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5573270992269892},{"column":"monthly_amount","similarity":0.5518789639204239}],"requisition_lines":[{"column":"estimated_unit_cost","similarity":0.5519709664483464}],"cost_centers":[{"column":"is_active","similarity":0.5514522094975285}],"benefit_types":[{"column":"annual_cost","similarity":0.5454524684838336}]},"fused_scores":[{"table":"project_budgets","fused":0.8526468601149775,"table_sim":0.6969020680342091,"col_score":1.08626404823613},{"table":"project_expenses","fused":0.8407042417519124,"table_sim":0.6901643358621746,"col_score":1.0665141005865189},{"table":"budgets","fused":0.7410467725305158,"table_sim":0.6054710146643664,"col_score":0.9444104093297399},{"table":"projects","fused":0.7307295035217127,"table_sim":0.5566750316098611,"col_score":0.9918112113894899},{"table":"project_resources","fused":0.7126715805754341,"table_sim":0.5884392614999969,"col_score":0.89902005918859},{"table":"project_milestones","fused":0.6936979135777139,"table_sim":0.5640452185585958,"col_score":0.8881769561063909},{"table":"project_tasks","fused":0.6805523076748522,"table_sim":0.5430288007477744,"col_score":0.886837568065469},{"table":"budget_lines","fused":0.6720516155691163,"table_sim":0.5713392587016516,"col_score":0.8231201508703134},{"table":"depreciation_schedules","fused":0.6429875506464746,"table_sim":0.5161348636193235,"col_score":0.8332665811872011},{"table":"cost_centers","fused":0.4744972475200322,"table_sim":0.5334843814345405,"col_score":0.3860165466482699},{"table":"fiscal_periods","fused":0.3253173366205293,"table_sim":0.5421955610342155,"col_score":0},{"table":"fiscal_years","fused":0.3198307607715552,"table_sim":0.5330512679525921,"col_score":0},{"table":"timesheet_entries","fused":0.3166392920099646,"table_sim":0.5277321533499411,"col_score":0},{"table":"task_assignments","fused":0.30541313545795645,"table_sim":0.5090218924299275,"col_score":0},{"table":"project_phases","fused":0.3052093381993529,"table_sim":0.5086822303322549,"col_score":0}],"fk_expansion_candidates":11,"fk_expansion_added":2,"fk_expansion_blocked_count":4,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"max_tables"},{"table":"fixed_assets","reason":"max_tables"},{"table":"journal_lines","reason":"no_evidence"},{"table":"project_phases","reason":"max_tables"},{"table":"task_assignments","reason":"max_tables"},{"table":"timesheet_entries","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":14,"total_retrieval_latency_ms":19,"sql_generated":"SELECT p.project_id, p.name AS project_name, b.budget_amount, e.actual_expense_amount, (b.budget_amount - e.actual_expense_amount) AS profitability FROM projects p INNER JOIN budgets b ON p.project_id = b.project_id INNER JOIN project_expenses e ON p.project_id = e.project_id WHERE p.status = 'Completed' AND e.is_billable = TRUE;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column b.project_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":5,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":4407,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column b.project_id does not exist"}
{"timestamp":"2026-01-29T20:45:51.020Z","query_id":"0603684e-5b37-4583-b588-fe30e81b05e7","question":"Find resource allocation by employee across all active projects","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["project_resources","project_expenses","projects","employees","asset_transfers","employee_benefits","timesheets","employee_salaries","asset_maintenance","fixed_assets","budgets","inventory_adjustments"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_resources","similarity":0.7731177943741443},{"table":"task_assignments","similarity":0.6903320131383612},{"table":"project_expenses","similarity":0.6860669651962393},{"table":"projects","similarity":0.6699593096880756},{"table":"employee_salaries","similarity":0.6405071946271549},{"table":"employees","similarity":0.6339025803715616},{"table":"asset_transfers","similarity":0.6295509823374746},{"table":"employee_benefits","similarity":0.6252896926971302},{"table":"asset_maintenance","similarity":0.6144814119310266},{"table":"project_budgets","similarity":0.6127056548770882},{"table":"employee_training","similarity":0.6115716788056256},{"table":"timesheets","similarity":0.6110953610179598},{"table":"fixed_assets","similarity":0.6034608172484828},{"table":"positions","similarity":0.6004520720571301},{"table":"sales_regions","similarity":0.6000624479697053}],"column_hits_per_table":{"project_resources":8,"projects":6,"project_expenses":5,"task_assignments":1,"fixed_assets":1,"asset_maintenance":1,"asset_transfers":3,"project_tasks":4,"employees":9,"budgets":1,"sales_territories":1,"employee_salaries":1,"employee_benefits":2,"leave_requests":1,"project_budgets":1,"inventory_adjustments":2,"departments":1,"timesheets":2},"top_columns_per_table":{"project_resources":[{"column":"allocation_percent","similarity":0.7387995135432864},{"column":"employee_id","similarity":0.736788358139023},{"column":"role","similarity":0.6871253102146296}],"projects":[{"column":"project_manager_id","similarity":0.6950658215815594},{"column":"project_number","similarity":0.6486471523682797},{"column":"priority","similarity":0.647905091409848}],"project_expenses":[{"column":"employee_id","similarity":0.6892341968361351},{"column":"approved_by","similarity":0.6866501279538427},{"column":"status","similarity":0.6365220668607481}],"task_assignments":[{"column":"employee_id","similarity":0.6715931803692717}],"fixed_assets":[{"column":"assigned_to","similarity":0.6693605355449325}],"asset_maintenance":[{"column":"performed_by","similarity":0.6594150176106053}],"asset_transfers":[{"column":"transferred_by","similarity":0.649976405491491},{"column":"to_employee_id","similarity":0.6468918681465957},{"column":"from_employee_id","similarity":0.6392912984449377}],"project_tasks":[{"column":"actual_hours","similarity":0.6431585243015517},{"column":"status","similarity":0.6399283690314367},{"column":"priority","similarity":0.6368769410502637}],"employees":[{"column":"employee_number","similarity":0.6411927718149272},{"column":"position_id","similarity":0.6387230138414012},{"column":"manager_id","similarity":0.6334603651967811}],"budgets":[{"column":"approved_by","similarity":0.6329697386525807}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6317471325498781}],"employee_salaries":[{"column":"approved_by","similarity":0.6297852265264874}],"employee_benefits":[{"column":"employee_id","similarity":0.6282013304971424},{"column":"coverage_level","similarity":0.6209091178386659}],"leave_requests":[{"column":"approved_by","similarity":0.6245063356176883}],"project_budgets":[{"column":"category","similarity":0.6241016561022017}],"inventory_adjustments":[{"column":"approved_by","similarity":0.6219786416053619},{"column":"adjusted_by","similarity":0.6198166093236963}],"departments":[{"column":"manager_id","similarity":0.6208493633226347}],"timesheets":[{"column":"employee_id","similarity":0.6185415592033615},{"column":"approved_by","similarity":0.6172975203434086}]},"fused_scores":[{"table":"project_resources","fused":0.8968155440847271,"table_sim":0.7731177943741443,"col_score":1.0823621686506013},{"table":"project_expenses","fused":0.8105738212591131,"table_sim":0.6860669651962393,"col_score":0.9973341053534239},{"table":"projects","fused":0.7910154650421268,"table_sim":0.6699593096880756,"col_score":0.9725996980732037},{"table":"employees","fused":0.762404804064732,"table_sim":0.6339025803715616,"col_score":0.9551581396044875},{"table":"asset_transfers","fused":0.7282860131396046,"table_sim":0.6295509823374746,"col_score":0.8763885593427996},{"table":"employee_benefits","fused":0.7114856490233444,"table_sim":0.6252896926971302,"col_score":0.8407795835126657},{"table":"timesheets","fused":0.70017204303661,"table_sim":0.6110953610179598,"col_score":0.8337870660645851},{"table":"employee_salaries","fused":0.6362184073868878,"table_sim":0.6405071946271549,"col_score":0.6297852265264874},{"table":"asset_maintenance","fused":0.6324548542028581,"table_sim":0.6144814119310266,"col_score":0.6594150176106053},{"table":"fixed_assets","fused":0.6298207045670627,"table_sim":0.6034608172484828,"col_score":0.6693605355449325},{"table":"project_budgets","fused":0.6172640553671336,"table_sim":0.6127056548770882,"col_score":0.6241016561022017},{"table":"task_assignments","fused":0.6022452983864128,"table_sim":0.6903320131383612,"col_score":0.47011522625849017},{"table":"project_tasks","fused":0.38463879793067346,"table_sim":0,"col_score":0.9615969948266836},{"table":"inventory_adjustments","fused":0.37275477850688404,"table_sim":0,"col_score":0.93188694626721},{"table":"employee_training","fused":0.3669430072833753,"table_sim":0.6115716788056256,"col_score":0}],"fk_expansion_candidates":38,"fk_expansion_added":2,"fk_expansion_blocked_count":30,"fk_expansion_blocked":[{"table":"maintenance_types","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"project_budgets","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"sales_regions","reason":"max_tables"},{"table":"customers","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"employee_training","reason":"max_tables"},{"table":"project_milestones","reason":"no_evidence"},{"table":"leave_requests","reason":"max_tables"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":43,"total_retrieval_latency_ms":49,"sql_generated":"SELECT e.employee_id AS EmployeeID, SUM(pr.hourly_rate) AS TotalHourlyRate FROM project_resources pr JOIN employees e ON pr.employee_id = e.employee_id WHERE p.status = 'active' GROUP BY e.employee_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42P01","error_message":"missing FROM-clause entry for table \"p\"","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_failure_reason":"Alias 'p' not defined. Possible table: project_resources. Define alias in FROM/JOIN clause.","total_latency_ms":2816,"failure_type":"join_path_miss","failure_details":"Database error after 3 attempts: missing FROM-clause entry for table \"p\""}
{"timestamp":"2026-01-29T20:45:53.836Z","query_id":"75651e8e-6f7a-49b3-8713-2423b5776a5b","question":"List all fixed assets with their assigned employees and current locations","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["fixed_assets","asset_locations","asset_maintenance","asset_transfers","employees","sales_territories","depreciation_schedules","sales_regions","employee_salaries","departments","inventory_adjustments","positions"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"fixed_assets","similarity":0.7199454700518836},{"table":"asset_locations","similarity":0.6993840670281728},{"table":"asset_transfers","similarity":0.6681876163750934},{"table":"asset_maintenance","similarity":0.6662441365446851},{"table":"sales_territories","similarity":0.6138568966711586},{"table":"employees","similarity":0.6041748893811374},{"table":"sales_regions","similarity":0.5905113043845756},{"table":"employee_salaries","similarity":0.584781640529263},{"table":"departments","similarity":0.5839722838487205},{"table":"task_assignments","similarity":0.5833995895060854},{"table":"positions","similarity":0.5818633468828208},{"table":"depreciation_schedules","similarity":0.5769154426781498},{"table":"project_resources","similarity":0.573391179917491},{"table":"inventory_adjustments","similarity":0.5728570248654077},{"table":"projects","similarity":0.5679182735225474}],"column_hits_per_table":{"fixed_assets":17,"asset_locations":6,"asset_maintenance":8,"asset_transfers":6,"employees":9,"sales_territories":1,"depreciation_schedules":1,"adjustment_lines":1,"stock_transfers":1},"top_columns_per_table":{"fixed_assets":[{"column":"assigned_to","similarity":0.7610359291813483},{"column":"location_id","similarity":0.7571020804502957},{"column":"status","similarity":0.7351464311922252}],"asset_locations":[{"column":"building","similarity":0.6990298555075612},{"column":"floor","similarity":0.6887653641924915},{"column":"room","similarity":0.678024829035518}],"asset_maintenance":[{"column":"status","similarity":0.6675279258856094},{"column":"asset_id","similarity":0.6617322335301026},{"column":"performed_by","similarity":0.6585231704982136}],"asset_transfers":[{"column":"to_location_id","similarity":0.6668886725808255},{"column":"from_location_id","similarity":0.655575636389779},{"column":"asset_id","similarity":0.6507564493646987}],"employees":[{"column":"email","similarity":0.6306117604539891},{"column":"is_active","similarity":0.6160821371149121},{"column":"created_at","similarity":0.6135709206507636}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6185197898085313}],"depreciation_schedules":[{"column":"asset_id","similarity":0.6108849923785906}],"adjustment_lines":[{"column":"location_id","similarity":0.6013885968583933}],"stock_transfers":[{"column":"created_by","similarity":0.5967870656956826}]},"fused_scores":[{"table":"fixed_assets","fused":0.8768614293329463,"table_sim":0.7199454700518836,"col_score":1.1122353682545403},{"table":"asset_locations","fused":0.8369954552584264,"table_sim":0.6993840670281728,"col_score":1.043412537603807},{"table":"asset_maintenance","fused":0.7896490335594094,"table_sim":0.6662441365446851,"col_score":0.9747563790814959},{"table":"asset_transfers","fused":0.7514669899829727,"table_sim":0.6681876163750934,"col_score":0.8763860503947918},{"table":"employees","fused":0.7358947124042898,"table_sim":0.6041748893811374,"col_score":0.9334744469390185},{"table":"sales_territories","fused":0.5414996791490839,"table_sim":0.6138568966711586,"col_score":0.4329638528659719},{"table":"depreciation_schedules","fused":0.5171970634728953,"table_sim":0.5769154426781498,"col_score":0.4276194946650134},{"table":"sales_regions","fused":0.35430678263074533,"table_sim":0.5905113043845756,"col_score":0},{"table":"employee_salaries","fused":0.35086898431755775,"table_sim":0.584781640529263,"col_score":0},{"table":"departments","fused":0.3503833703092323,"table_sim":0.5839722838487205,"col_score":0},{"table":"task_assignments","fused":0.3500397537036512,"table_sim":0.5833995895060854,"col_score":0},{"table":"positions","fused":0.34911800812969246,"table_sim":0.5818633468828208,"col_score":0},{"table":"project_resources","fused":0.34403470795049457,"table_sim":0.573391179917491,"col_score":0},{"table":"inventory_adjustments","fused":0.3437142149192446,"table_sim":0.5728570248654077,"col_score":0},{"table":"projects","fused":0.34075096411352845,"table_sim":0.5679182735225474,"col_score":0}],"fk_expansion_candidates":33,"fk_expansion_added":2,"fk_expansion_blocked_count":28,"fk_expansion_blocked":[{"table":"maintenance_types","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"project_resources","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"max_tables"},{"table":"task_assignments","reason":"max_tables"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":16,"total_retrieval_latency_ms":22,"sql_generated":"SELECT fa.asset_id AS AssetID, fa.name AS Name, fa.location_id AS LocationID, fa.assigned_to AS AssignedEmployeeID FROM fixed_assets fa JOIN asset_locations al ON fa.location_id = al.location_id JOIN employees e ON fa.assigned_to = e.employee_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":0,"total_latency_ms":1264}
{"timestamp":"2026-01-29T20:45:55.101Z","query_id":"2c58e260-fbf2-41ae-8ea7-01a1a7409234","question":"Create a comprehensive employee cost report including salary and benefits by department","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_salaries","employee_benefits","employees","project_expenses","budgets","departments","project_resources","benefit_types","goods_receipts","employee_training","employment_history","positions"],"tables_from_table_retrieval":15,"tables_from_column_only":10,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_benefits","similarity":0.7033203083522601},{"table":"employee_salaries","similarity":0.7004330807404299},{"table":"project_expenses","similarity":0.6709016284087207},{"table":"employees","similarity":0.6573833023433696},{"table":"departments","similarity":0.6467717005028588},{"table":"budgets","similarity":0.6459628498185659},{"table":"purchase_requisitions","similarity":0.6331051084254513},{"table":"sales_regions","similarity":0.6301038851943551},{"table":"employment_history","similarity":0.6247225842183777},{"table":"employee_training","similarity":0.6143787031418324},{"table":"goods_receipts","similarity":0.6134314016075626},{"table":"benefit_types","similarity":0.6103800368440171},{"table":"timesheets","similarity":0.608646580767154},{"table":"positions","similarity":0.6060295054142851},{"table":"project_resources","similarity":0.6058652615663651}],"column_hits_per_table":{"employees":5,"employee_salaries":7,"employee_benefits":6,"departments":2,"project_expenses":4,"benefit_types":1,"cost_centers":1,"project_resources":2,"asset_maintenance":1,"budgets":3,"goods_receipts":1,"positions":1,"performance_reviews":1,"vendor_invoices":4,"employee_training":1,"product_suppliers":1,"employee_certifications":1,"project_budgets":3,"sales_territories":1,"employment_history":1,"sales_regions":1,"depreciation_schedules":1,"requisition_lines":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.7353273158370108},{"column":"department_id","similarity":0.6458933199793105},{"column":"employee_number","similarity":0.6339488054951704}],"employee_salaries":[{"column":"amount","similarity":0.7343697506197728},{"column":"effective_date","similarity":0.6773602786138204},{"column":"employee_id","similarity":0.6719030284173544}],"employee_benefits":[{"column":"coverage_level","similarity":0.692206009981684},{"column":"employee_id","similarity":0.691334472450722},{"column":"benefit_type_id","similarity":0.6825998512347974}],"departments":[{"column":"budget","similarity":0.6845753677360407},{"column":"manager_id","similarity":0.633688934613717}],"project_expenses":[{"column":"employee_id","similarity":0.6753839678754537},{"column":"approved_by","similarity":0.6566797227751197},{"column":"amount","similarity":0.6540423770585583}],"benefit_types":[{"column":"annual_cost","similarity":0.6681632995082879}],"cost_centers":[{"column":"department_id","similarity":0.6444791546112041}],"project_resources":[{"column":"hourly_rate","similarity":0.6330708854761284},{"column":"employee_id","similarity":0.6180596074892039}],"asset_maintenance":[{"column":"cost","similarity":0.6294383521509798}],"budgets":[{"column":"total_amount","similarity":0.627433899620325},{"column":"approved_by","similarity":0.626054957549584},{"column":"department_id","similarity":0.6202588727965219}],"goods_receipts":[{"column":"received_by","similarity":0.6273408234197417}],"positions":[{"column":"min_salary","similarity":0.6249941700853083}],"performance_reviews":[{"column":"employee_id","similarity":0.6248478988858465}],"vendor_invoices":[{"column":"subtotal","similarity":0.6240930475878483},{"column":"amount_paid","similarity":0.6227761450723656},{"column":"total","similarity":0.6214874696934888}],"employee_training":[{"column":"score","similarity":0.6203977331351577}],"product_suppliers":[{"column":"unit_cost","similarity":0.6202977267547164}],"employee_certifications":[{"column":"employee_id","similarity":0.620067204342498}],"project_budgets":[{"column":"planned_amount","similarity":0.620044228211653},{"column":"actual_amount","similarity":0.618194603133217},{"column":"notes","similarity":0.6165560316383816}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6195472423349481}],"employment_history":[{"column":"employee_id","similarity":0.6193544167665219}],"sales_regions":[{"column":"manager_id","similarity":0.6180082092187474}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.6170760765215243}],"requisition_lines":[{"column":"estimated_unit_cost","similarity":0.6170521107439255}]},"fused_scores":[{"table":"employee_salaries","fused":0.8494798044149312,"table_sim":0.7004330807404299,"col_score":1.0730498899266832},{"table":"employee_benefits","fused":0.8321855077820437,"table_sim":0.7033203083522601,"col_score":1.025483306926719},{"table":"employees","fused":0.8153506688398602,"table_sim":0.6573833023433696,"col_score":1.052301718584596},{"table":"project_expenses","fused":0.7960213415669919,"table_sim":0.6709016284087207,"col_score":0.9837009113043989},{"table":"budgets","fused":0.7637622612491863,"table_sim":0.6459628498185659,"col_score":0.940461378395117},{"table":"departments","fused":0.750609618242052,"table_sim":0.6467717005028588,"col_score":0.9063664948508416},{"table":"project_resources","fused":0.703275856178759,"table_sim":0.6058652615663651,"col_score":0.8493917480973497},{"table":"benefit_types","fused":0.6334933419097255,"table_sim":0.6103800368440171,"col_score":0.6681632995082879},{"table":"goods_receipts","fused":0.6189951703324343,"table_sim":0.6134314016075626,"col_score":0.6273408234197417},{"table":"employee_training","fused":0.6167863151391625,"table_sim":0.6143787031418324,"col_score":0.6203977331351577},{"table":"positions","fused":0.6136153712826944,"table_sim":0.6060295054142851,"col_score":0.6249941700853083},{"table":"sales_regions","fused":0.5511046296978623,"table_sim":0.6301038851943551,"col_score":0.43260574645312316},{"table":"employment_history","fused":0.5482527872256527,"table_sim":0.6247225842183777,"col_score":0.43354809173656533},{"table":"purchase_requisitions","fused":0.3798630650552708,"table_sim":0.6331051084254513,"col_score":0},{"table":"vendor_invoices","fused":0.37393471297383707,"table_sim":0,"col_score":0.9348367824345927}],"fk_expansion_candidates":32,"fk_expansion_added":2,"fk_expansion_blocked_count":26,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"sales_regions","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"max_tables"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":17,"total_retrieval_latency_ms":23,"sql_generated":"SELECT d.name AS department_name, SUM(bs.amount) + COALESCE(SUM(eb.annual_cost), 0) AS total_employee_cost FROM departments d LEFT JOIN budgets bs ON d.department_id = bs.department_id AND bs.status = 'approved' LEFT JOIN employee_benefits eb ON d.department_id = eb.department_id GROUP BY d.name;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column eb.department_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":5,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":3816,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column eb.department_id does not exist"}
{"timestamp":"2026-01-29T20:48:54.777Z","query_id":"2d4f54c6-7a04-4022-a654-5242eb2b45f3","question":"List all employees in the Sales department","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employees","departments","employee_salaries","employee_certifications","goods_receipts","positions","sales_regions","business_units","budgets","sales_territories","employment_history","employee_training"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"departments","similarity":0.7018819264422769},{"table":"employees","similarity":0.6963141569337209},{"table":"positions","similarity":0.6581594168559208},{"table":"employee_salaries","similarity":0.639257259916862},{"table":"sales_regions","similarity":0.6312030956746659},{"table":"business_units","similarity":0.6239684491575331},{"table":"employee_certifications","similarity":0.6229972990181882},{"table":"budgets","similarity":0.617459472791645},{"table":"sales_territories","similarity":0.6102039592511826},{"table":"employment_history","similarity":0.6101413897607149},{"table":"purchase_requisitions","similarity":0.6097607241658892},{"table":"employee_benefits","similarity":0.6082385664329927},{"table":"employee_training","similarity":0.6047853289798245},{"table":"goods_receipts","similarity":0.6024016522018802},{"table":"emergency_contacts","similarity":0.6009863587594317}],"column_hits_per_table":{"employees":16,"departments":6,"positions":1,"employee_certifications":2,"goods_receipts":1,"business_units":1,"sales_territories":1,"sales_orders":1,"budgets":1,"sales_regions":1,"asset_maintenance":1,"employee_salaries":2,"project_expenses":2,"employee_benefits":1,"purchase_requisitions":1,"sales_opportunities":1,"task_assignments":1,"emergency_contacts":1,"timesheets":1,"employment_history":1,"employee_training":1,"cost_centers":1,"asset_transfers":2,"project_resources":1,"warehouses":1,"performance_reviews":1},"top_columns_per_table":{"employees":[{"column":"department_id","similarity":0.7438378780959836},{"column":"is_active","similarity":0.6898514430157328},{"column":"phone","similarity":0.6884781654193587}],"departments":[{"column":"manager_id","similarity":0.7148098723176987},{"column":"department_id","similarity":0.6802234045695587},{"column":"budget","similarity":0.6768568604597922}],"positions":[{"column":"department_id","similarity":0.6885987208242758}],"employee_certifications":[{"column":"employee_id","similarity":0.6617681978427804},{"column":"certification_id","similarity":0.6311135283463721}],"goods_receipts":[{"column":"received_by","similarity":0.6583117635667177}],"business_units":[{"column":"manager_id","similarity":0.6545196306469504}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6512458142884996}],"sales_orders":[{"column":"sales_rep_id","similarity":0.6499960316755506}],"budgets":[{"column":"department_id","similarity":0.6460822382776508}],"sales_regions":[{"column":"manager_id","similarity":0.6439326618471962}],"asset_maintenance":[{"column":"performed_by","similarity":0.6437090997046176}],"employee_salaries":[{"column":"employee_id","similarity":0.6423794415726771},{"column":"approved_by","similarity":0.6339811095593604}],"project_expenses":[{"column":"employee_id","similarity":0.641830403107342},{"column":"approved_by","similarity":0.6256513564368459}],"employee_benefits":[{"column":"employee_id","similarity":0.641816911740203}],"purchase_requisitions":[{"column":"department_id","similarity":0.6412971471190316}],"sales_opportunities":[{"column":"owner_id","similarity":0.6380140640371665}],"task_assignments":[{"column":"employee_id","similarity":0.6368520287345143}],"emergency_contacts":[{"column":"employee_id","similarity":0.6359115695387068}],"timesheets":[{"column":"employee_id","similarity":0.6333688009401329}],"employment_history":[{"column":"employee_id","similarity":0.6321379482184605}],"employee_training":[{"column":"employee_id","similarity":0.6321176608254997}],"cost_centers":[{"column":"department_id","similarity":0.6314138263804895}],"asset_transfers":[{"column":"to_employee_id","similarity":0.6311987237616232},{"column":"transferred_by","similarity":0.6249766402000394}],"project_resources":[{"column":"employee_id","similarity":0.6300298241419464}],"warehouses":[{"column":"manager_id","similarity":0.6284950025854869}],"performance_reviews":[{"column":"employee_id","similarity":0.6283937123860818}]},"fused_scores":[{"table":"employees","fused":0.8298251093085066,"table_sim":0.6963141569337209,"col_score":1.0300915378706852},{"table":"departments","fused":0.7919452821737608,"table_sim":0.7018819264422769,"col_score":0.9270403157709868},{"table":"employee_salaries","fused":0.7270799215940361,"table_sim":0.639257259916862,"col_score":0.8588139141097973},{"table":"employee_certifications","fused":0.6474493687753835,"table_sim":0.6229972990181882,"col_score":0.6841274734111765},{"table":"goods_receipts","fused":0.6247656967478152,"table_sim":0.6024016522018802,"col_score":0.6583117635667177},{"table":"positions","fused":0.5877032919443497,"table_sim":0.6581594168559208,"col_score":0.482019104576993},{"table":"sales_regions","fused":0.5590230027220144,"table_sim":0.6312030956746659,"col_score":0.4507528632930373},{"table":"business_units","fused":0.557646566075666,"table_sim":0.6239684491575331,"col_score":0.45816374145286526},{"table":"budgets","fused":0.5513787103927292,"table_sim":0.617459472791645,"col_score":0.4522575667943555},{"table":"sales_territories","fused":0.5484712035514895,"table_sim":0.6102039592511826,"col_score":0.4558720700019497},{"table":"purchase_requisitions","fused":0.5454196356928624,"table_sim":0.6097607241658892,"col_score":0.4489080029833221},{"table":"employee_benefits","fused":0.5446518751470524,"table_sim":0.6082385664329927,"col_score":0.4492718382181421},{"table":"employment_history","fused":0.5430834593575978,"table_sim":0.6101413897607149,"col_score":0.4424965637529223},{"table":"employee_training","fused":0.5398641424190346,"table_sim":0.6047853289798245,"col_score":0.44248236257784973},{"table":"emergency_contacts","fused":0.538647054726497,"table_sim":0.6009863587594317,"col_score":0.4451380986770947}],"fk_expansion_candidates":31,"fk_expansion_added":2,"fk_expansion_blocked_count":23,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"project_expenses","reason":"max_tables"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"emergency_contacts","reason":"max_tables"},{"table":"asset_transfers","reason":"max_tables"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":124,"total_retrieval_latency_ms":146,"sql_generated":"SELECT e.employee_id, e.first_name || ' ' || e.last_name AS employee_full_name FROM employees e JOIN departments d ON e.department_id = d.department_id WHERE d.name = 'Sales';","tables_used_in_sql":[],"explain_result":"success","rows_returned":63,"total_latency_ms":1275}
{"timestamp":"2026-01-29T20:48:56.051Z","query_id":"3626ed63-0590-41ea-af11-09d6211bbe0c","question":"How many employees were hired in 2024?","attempt_count":2,"retry_succeeded":true,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employees","employee_salaries","employment_history","employee_certifications","employee_training","employee_benefits","timesheets","purchase_requisitions","budgets","sales_regions","sales_territories","positions"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"employees","similarity":0.6144292223525214},{"table":"employment_history","similarity":0.5990869260811272},{"table":"employee_salaries","similarity":0.5957232611905978},{"table":"employee_certifications","similarity":0.5847149077570227},{"table":"timesheets","similarity":0.575594643141534},{"table":"sales_regions","similarity":0.5687908420029388},{"table":"purchase_requisitions","similarity":0.5664402915390976},{"table":"positions","similarity":0.5658085475279547},{"table":"sales_opportunities","similarity":0.5639075817288894},{"table":"task_assignments","similarity":0.562680711321946},{"table":"employee_training","similarity":0.5619832232346038},{"table":"employee_benefits","similarity":0.5521280809074093},{"table":"sales_territories","similarity":0.5514528346239352},{"table":"budgets","similarity":0.5403087942053312},{"table":"sales_quotes","similarity":0.5393048811827968}],"column_hits_per_table":{"employees":16,"employee_salaries":6,"employee_certifications":4,"employment_history":6,"employee_training":5,"employee_benefits":2,"timesheets":2,"sales_regions":1,"stock_transfers":1,"sales_territories":1,"departments":1,"task_assignments":1,"business_units":1,"purchase_requisitions":1,"budgets":1,"sales_quotes":1},"top_columns_per_table":{"employees":[{"column":"hire_date","similarity":0.7106559818290373},{"column":"birth_date","similarity":0.6517135742797255},{"column":"employee_number","similarity":0.633121778910481}],"employee_salaries":[{"column":"effective_date","similarity":0.6296154988591133},{"column":"end_date","similarity":0.609101620634113},{"column":"approved_by","similarity":0.5761653893037841}],"employee_certifications":[{"column":"obtained_date","similarity":0.6094607553884445},{"column":"expiry_date","similarity":0.6007861744748104},{"column":"certificate_number","similarity":0.5633632316465422}],"employment_history":[{"column":"start_date","similarity":0.6071257631385101},{"column":"end_date","similarity":0.5989153405055726},{"column":"position","similarity":0.5890884348995125}],"employee_training":[{"column":"scheduled_date","similarity":0.6029307116623341},{"column":"completion_date","similarity":0.6028518248589481},{"column":"status","similarity":0.5708936159109197}],"employee_benefits":[{"column":"start_date","similarity":0.5952623658369748},{"column":"end_date","similarity":0.5732788329636184}],"timesheets":[{"column":"approved_by","similarity":0.5691747597184825},{"column":"employee_id","similarity":0.5581640185946611}],"sales_regions":[{"column":"manager_id","similarity":0.5671745315621484}],"stock_transfers":[{"column":"created_by","similarity":0.562232812523577}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5618670479918372}],"departments":[{"column":"manager_id","similarity":0.5617735539821376}],"task_assignments":[{"column":"employee_id","similarity":0.5576232667870425}],"business_units":[{"column":"manager_id","similarity":0.5563961234903366}],"purchase_requisitions":[{"column":"approved_by","similarity":0.5556539730090067}],"budgets":[{"column":"approved_by","similarity":0.5516931281633284}],"sales_quotes":[{"column":"created_by","similarity":0.5460264622486979}]},"fused_scores":[{"table":"employees","fused":0.7832626409990728,"table_sim":0.6144292223525214,"col_score":1.0365127689689002},{"table":"employee_salaries","fused":0.7311004803848267,"table_sim":0.5957232611905978,"col_score":0.9341663091761698},{"table":"employment_history","fused":0.7220855290051948,"table_sim":0.5990869260811272,"col_score":0.9065834333912963},{"table":"employee_certifications","fused":0.7147704817045535,"table_sim":0.5847149077570227,"col_score":0.9098538426258497},{"table":"employee_training","fused":0.6989325835774856,"table_sim":0.5619832232346038,"col_score":0.9043566240918082},{"table":"employee_benefits","fused":0.6840375614719592,"table_sim":0.5521280809074093,"col_score":0.881901782318784},{"table":"timesheets","fused":0.6511696523755659,"table_sim":0.575594643141534,"col_score":0.7645321662266139},{"table":"purchase_requisitions","fused":0.5621257641270612,"table_sim":0.5664402915390976,"col_score":0.5556539730090067},{"table":"budgets","fused":0.5448625277885301,"table_sim":0.5403087942053312,"col_score":0.5516931281633284},{"table":"sales_regions","fused":0.5000833740391648,"table_sim":0.5687908420029388,"col_score":0.3970221720935038},{"table":"task_assignments","fused":0.4937429414935395,"table_sim":0.562680711321946,"col_score":0.39033628675092974},{"table":"sales_territories","fused":0.4881944742120755,"table_sim":0.5514528346239352,"col_score":0.393306933594286},{"table":"sales_quotes","fused":0.4764703381393135,"table_sim":0.5393048811827968,"col_score":0.3822185235740885},{"table":"positions","fused":0.3394851285167728,"table_sim":0.5658085475279547,"col_score":0},{"table":"sales_opportunities","fused":0.33834454903733363,"table_sim":0.5639075817288894,"col_score":0}],"fk_expansion_candidates":33,"fk_expansion_added":2,"fk_expansion_blocked_count":28,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":50,"total_retrieval_latency_ms":57,"sql_generated":"SELECT COUNT(*) FROM employees WHERE hire_date BETWEEN '2024-01-01' AND '2024-12-31';","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":1188}
{"timestamp":"2026-01-29T20:48:57.239Z","query_id":"23530f8f-2b3e-4f19-8747-270c73874c0d","question":"What is the average salary by department?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["positions","employee_salaries","employees","departments","budgets","goods_receipts","employee_benefits","journal_entries","employment_history","project_expenses","cost_centers","sales_territories"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"positions","similarity":0.6472399264470684},{"table":"employee_salaries","similarity":0.6163489777991259},{"table":"departments","similarity":0.6143006157633061},{"table":"employees","similarity":0.5843710762372889},{"table":"cost_centers","similarity":0.5579264629700211},{"table":"budgets","similarity":0.5571964787833181},{"table":"sales_regions","similarity":0.5364724383376334},{"table":"sales_territories","similarity":0.5299492722581486},{"table":"journal_entries","similarity":0.526534036172237},{"table":"purchase_requisitions","similarity":0.5238763225772829},{"table":"project_expenses","similarity":0.5181308895485073},{"table":"employee_benefits","similarity":0.5174411519669776},{"table":"goods_receipts","similarity":0.5160018389560823},{"table":"task_assignments","similarity":0.513087451687374},{"table":"employment_history","similarity":0.5120203905454107}],"column_hits_per_table":{"employees":8,"departments":6,"employee_salaries":7,"positions":4,"cost_centers":1,"budgets":2,"employee_benefits":1,"purchase_requisitions":1,"requisition_lines":2,"project_resources":1,"employment_history":1,"sales_orders":2,"project_budgets":1,"employee_training":1,"currencies":1,"vendor_invoices":2,"goods_receipts":2,"product_suppliers":1,"project_expenses":1,"journal_entries":1,"depreciation_schedules":1,"employee_certifications":1,"sales_quotes":1,"sales_territories":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.6714025402580912},{"column":"department_id","similarity":0.584700343354732},{"column":"employee_number","similarity":0.5532682108483173}],"departments":[{"column":"budget","similarity":0.6693178899525953},{"column":"name","similarity":0.6171203083627336},{"column":"parent_department_id","similarity":0.5878888275901532}],"employee_salaries":[{"column":"amount","similarity":0.6538497128830203},{"column":"effective_date","similarity":0.6119174466610072},{"column":"salary_id","similarity":0.6029067593645321}],"positions":[{"column":"department_id","similarity":0.6330316284547595},{"column":"max_salary","similarity":0.6298490831807669},{"column":"min_salary","similarity":0.6262751289068413}],"cost_centers":[{"column":"department_id","similarity":0.5944196229868914}],"budgets":[{"column":"department_id","similarity":0.57844391567942},{"column":"total_amount","similarity":0.5345358880503847}],"employee_benefits":[{"column":"coverage_level","similarity":0.5592633154028713}],"purchase_requisitions":[{"column":"department_id","similarity":0.5579053225850302}],"requisition_lines":[{"column":"estimated_total","similarity":0.5575389137165062},{"column":"estimated_unit_cost","similarity":0.5432548724783238}],"project_resources":[{"column":"hourly_rate","similarity":0.5507729867753033}],"employment_history":[{"column":"position","similarity":0.546923389654957}],"sales_orders":[{"column":"total","similarity":0.5456325341224678},{"column":"subtotal","similarity":0.5256028180358103}],"project_budgets":[{"column":"actual_amount","similarity":0.5389410727850935}],"employee_training":[{"column":"score","similarity":0.5351809226270803}],"currencies":[{"column":"exchange_rate","similarity":0.5339462316729515}],"vendor_invoices":[{"column":"amount_paid","similarity":0.5331812479989457},{"column":"total","similarity":0.5302071561700523}],"goods_receipts":[{"column":"received_by","similarity":0.5319872343080682},{"column":"receipt_number","similarity":0.523270196493927}],"product_suppliers":[{"column":"unit_cost","similarity":0.5297268931690184}],"project_expenses":[{"column":"amount","similarity":0.5280982333276214}],"journal_entries":[{"column":"posted_by","similarity":0.5260241851684003}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5257318815448632}],"employee_certifications":[{"column":"certificate_number","similarity":0.5236560179787567}],"sales_quotes":[{"column":"total","similarity":0.5236132162689948}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5204418572284772}]},"fused_scores":[{"table":"positions","fused":0.7655386149219161,"table_sim":0.6472399264470684,"col_score":0.9429866476341876},{"table":"employee_salaries","fused":0.7537327611648852,"table_sim":0.6163489777991259,"col_score":0.959808436213524},{"table":"employees","fused":0.7298373040152732,"table_sim":0.5843710762372889,"col_score":0.9480366456822499},{"table":"departments","fused":0.7227043686098045,"table_sim":0.6143006157633061,"col_score":0.8853099978795521},{"table":"budgets","fused":0.6291143906852635,"table_sim":0.5571964787833181,"col_score":0.7369912585381817},{"table":"goods_receipts","fused":0.6270500363956621,"table_sim":0.5160018389560823,"col_score":0.7936223325550317},{"table":"employee_benefits","fused":0.5341700173413351,"table_sim":0.5174411519669776,"col_score":0.5592633154028713},{"table":"journal_entries","fused":0.5263300957707023,"table_sim":0.526534036172237,"col_score":0.5260241851684003},{"table":"employment_history","fused":0.5259815901892293,"table_sim":0.5120203905454107,"col_score":0.546923389654957},{"table":"project_expenses","fused":0.522117827060153,"table_sim":0.5181308895485073,"col_score":0.5280982333276214},{"table":"cost_centers","fused":0.5011933722183423,"table_sim":0.5579264629700211,"col_score":0.416093736090824},{"table":"purchase_requisitions","fused":0.4705392838701782,"table_sim":0.5238763225772829,"col_score":0.3905337258095211},{"table":"sales_territories","fused":0.46369328337886273,"table_sim":0.5299492722581486,"col_score":0.36430930005993406},{"table":"requisition_lines","fused":0.33166653998226725,"table_sim":0,"col_score":0.8291663499556681},{"table":"sales_orders","fused":0.32337357725614924,"table_sim":0,"col_score":0.808433943140373}],"fk_expansion_candidates":34,"fk_expansion_added":2,"fk_expansion_blocked_count":27,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"sales_regions","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"benefit_types","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":19,"total_retrieval_latency_ms":26,"sql_generated":"SELECT d.name AS department_name, AVG(e.salary) AS avg_salary FROM departments d JOIN employees e ON d.department_id = e.department_id GROUP BY d.name;","tables_used_in_sql":[],"explain_result":"success","rows_returned":19,"total_latency_ms":909}
{"timestamp":"2026-01-29T20:48:58.148Z","query_id":"55c17019-6484-4056-80ed-d3f3c119c85d","question":"List all customers with credit limit over $100,000","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["customers","customer_contacts","bank_accounts","sales_quotes","certifications","budget_lines","purchase_requisitions","project_expenses","budgets","cost_centers","bank_transactions","employee_certifications"],"tables_from_table_retrieval":15,"tables_from_column_only":15,"tables_from_fk_expansion":2,"table_scores":[{"table":"customers","similarity":0.6422232823454113},{"table":"customer_contacts","similarity":0.5702946339617082},{"table":"sales_regions","similarity":0.5667997703273866},{"table":"certifications","similarity":0.5571072107976042},{"table":"sales_quotes","similarity":0.5491541498727729},{"table":"purchase_requisitions","similarity":0.5478589409950445},{"table":"budget_lines","similarity":0.5454449382794198},{"table":"bank_accounts","similarity":0.5447528216147618},{"table":"cost_centers","similarity":0.540959333993602},{"table":"employee_certifications","similarity":0.5407552237950306},{"table":"projects","similarity":0.5406308106386197},{"table":"project_expenses","similarity":0.5396310315886659},{"table":"fixed_assets","similarity":0.5381704816225558},{"table":"vendor_invoice_lines","similarity":0.5372813385528225},{"table":"budgets","similarity":0.5364846137863498}],"column_hits_per_table":{"customers":11,"projects":1,"customer_contacts":7,"sales_opportunities":1,"sales_quotes":2,"sales_orders":2,"reorder_rules":1,"budgets":1,"vendor_invoices":1,"project_expenses":1,"quote_lines":1,"certifications":1,"purchase_orders":3,"budget_lines":1,"bank_accounts":2,"bank_transactions":2,"journal_lines":1,"purchase_requisitions":1,"order_lines":1,"vendor_invoice_lines":1,"positions":1,"sales_regions":1,"po_lines":1,"cost_centers":1,"project_budgets":1,"project_milestones":1,"warehouse_locations":1,"requisition_lines":1},"top_columns_per_table":{"customers":[{"column":"credit_limit","similarity":0.8290390589962461},{"column":"payment_terms","similarity":0.6650377871997543},{"column":"customer_number","similarity":0.6415139612300956}],"projects":[{"column":"customer_id","similarity":0.6113530297711885}],"customer_contacts":[{"column":"phone","similarity":0.6040484167837853},{"column":"customer_id","similarity":0.6035386821269575},{"column":"contact_id","similarity":0.5998404377039879}],"sales_opportunities":[{"column":"customer_id","similarity":0.5973351705123849}],"sales_quotes":[{"column":"customer_id","similarity":0.5961691774985171},{"column":"total","similarity":0.5659883632982617}],"sales_orders":[{"column":"customer_id","similarity":0.58549970245739},{"column":"total","similarity":0.5683405933157465}],"reorder_rules":[{"column":"max_quantity","similarity":0.5844362539863144}],"budgets":[{"column":"approved_by","similarity":0.5826134824645886}],"vendor_invoices":[{"column":"total","similarity":0.5814502781366767}],"project_expenses":[{"column":"approved_by","similarity":0.5806637778484305}],"quote_lines":[{"column":"line_total","similarity":0.5801896505180127}],"certifications":[{"column":"validity_years","similarity":0.5798577433614027}],"purchase_orders":[{"column":"total","similarity":0.5778492143323815},{"column":"approved_by","similarity":0.5753364140452711},{"column":"buyer_id","similarity":0.5681572281535011}],"budget_lines":[{"column":"amount","similarity":0.5775415147969544}],"bank_accounts":[{"column":"current_balance","similarity":0.5767501897962805},{"column":"account_number","similarity":0.5703853537704927}],"bank_transactions":[{"column":"amount","similarity":0.5760624192982815},{"column":"reference","similarity":0.566440413697339}],"journal_lines":[{"column":"credit","similarity":0.5758582782262962}],"purchase_requisitions":[{"column":"approved_by","similarity":0.573497894904601}],"order_lines":[{"column":"line_total","similarity":0.5724929640076355}],"vendor_invoice_lines":[{"column":"amount","similarity":0.5692283162401672}],"positions":[{"column":"max_salary","similarity":0.5687679838535561}],"sales_regions":[{"column":"manager_id","similarity":0.5681024224683461}],"po_lines":[{"column":"line_total","similarity":0.5673570249509682}],"cost_centers":[{"column":"code","similarity":0.5669986563600412}],"project_budgets":[{"column":"actual_amount","similarity":0.566506927799081}],"project_milestones":[{"column":"amount","similarity":0.5661535207015114}],"warehouse_locations":[{"column":"capacity","similarity":0.5659576253370232}],"requisition_lines":[{"column":"estimated_total","similarity":0.5640113461906648}]},"fused_scores":[{"table":"customers","fused":0.8499571504456961,"table_sim":0.6422232823454113,"col_score":1.1615579525961233},{"table":"customer_contacts","fused":0.7028167334530704,"table_sim":0.5702946339617082,"col_score":0.9015998826901137},{"table":"bank_accounts","fused":0.6716288396414678,"table_sim":0.5447528216147618,"col_score":0.8619428666815268},{"table":"sales_quotes","fused":0.6393515200927609,"table_sim":0.5491541498727729,"col_score":0.7746475754227427},{"table":"certifications","fused":0.5662074238231236,"table_sim":0.5571072107976042,"col_score":0.5798577433614027},{"table":"budget_lines","fused":0.5582835688864336,"table_sim":0.5454449382794198,"col_score":0.5775415147969544},{"table":"purchase_requisitions","fused":0.5581145225588671,"table_sim":0.5478589409950445,"col_score":0.573497894904601},{"table":"project_expenses","fused":0.5560441300925718,"table_sim":0.5396310315886659,"col_score":0.5806637778484305},{"table":"budgets","fused":0.5549361612576453,"table_sim":0.5364846137863498,"col_score":0.5826134824645886},{"table":"cost_centers","fused":0.5513750629401777,"table_sim":0.540959333993602,"col_score":0.5669986563600412},{"table":"vendor_invoice_lines","fused":0.5500601296277604,"table_sim":0.5372813385528225,"col_score":0.5692283162401672},{"table":"sales_regions","fused":0.49914854048756885,"table_sim":0.5667997703273866,"col_score":0.3976716957278422},{"table":"projects","fused":0.4955573347191046,"table_sim":0.5406308106386197,"col_score":0.42794712083983194},{"table":"purchase_orders","fused":0.34620696854200683,"table_sim":0,"col_score":0.865517421355017},{"table":"bank_transactions","fused":0.3437130504587804,"table_sim":0,"col_score":0.8592826261469511}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":11,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"projects","reason":"max_tables"},{"table":"purchase_orders","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":40,"total_retrieval_latency_ms":46,"sql_generated":"SELECT c.customer_id, c.name AS customer_name, c.email, c.phone, c.credit_limit FROM customers c WHERE c.credit_limit > 100000;","tables_used_in_sql":[],"explain_result":"success","rows_returned":206,"total_latency_ms":866}
{"timestamp":"2026-01-29T20:48:59.014Z","query_id":"c8ebe241-0356-4d4b-ab4a-2f68ddad9e1c","question":"How many sales orders are in pending status?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["sales_orders","purchase_orders","sales_opportunities","order_lines","vendor_invoices","purchase_requisitions","sales_quotes","goods_receipts","po_lines","product_suppliers","fixed_assets","receipt_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":12,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.6863020331203206},{"table":"purchase_orders","similarity":0.6720782086239174},{"table":"order_lines","similarity":0.620432904007153},{"table":"vendor_invoices","similarity":0.6085185379492049},{"table":"goods_receipts","similarity":0.6053687360586439},{"table":"sales_opportunities","similarity":0.601388904869088},{"table":"po_lines","similarity":0.576218684979662},{"table":"product_suppliers","similarity":0.5754254810584586},{"table":"purchase_requisitions","similarity":0.57327171968414},{"table":"vendor_invoice_lines","similarity":0.5682118570421297},{"table":"sales_territories","similarity":0.5678982904980082},{"table":"receipt_lines","similarity":0.5660529547253613},{"table":"vendors","similarity":0.5659136630376012},{"table":"reorder_rules","similarity":0.5568055924346023},{"table":"sales_quotes","similarity":0.5566655088616519}],"column_hits_per_table":{"sales_orders":14,"purchase_orders":13,"sales_quotes":1,"vendor_invoices":3,"purchase_requisitions":1,"stock_transfers":1,"timesheets":1,"leave_requests":1,"sales_opportunities":2,"project_phases":1,"projects":1,"journal_entries":1,"inventory_adjustments":1,"fixed_assets":2,"asset_maintenance":1,"order_lines":2,"employee_training":1,"project_expenses":1,"goods_receipts":1,"project_tasks":1},"top_columns_per_table":{"sales_orders":[{"column":"status","similarity":0.8126679915790036},{"column":"order_date","similarity":0.7078984846645195},{"column":"ship_date","similarity":0.6929006763015985}],"purchase_orders":[{"column":"status","similarity":0.770838550445989},{"column":"order_date","similarity":0.6497285521212871},{"column":"po_number","similarity":0.6445881341176289}],"sales_quotes":[{"column":"status","similarity":0.7105128416768823}],"vendor_invoices":[{"column":"status","similarity":0.6915681497187584},{"column":"due_date","similarity":0.5983254925630166},{"column":"po_id","similarity":0.5978553329024192}],"purchase_requisitions":[{"column":"status","similarity":0.6886346020649313}],"stock_transfers":[{"column":"status","similarity":0.6613621118756833}],"timesheets":[{"column":"status","similarity":0.6425710565758574}],"leave_requests":[{"column":"status","similarity":0.6303639699021262}],"sales_opportunities":[{"column":"expected_close_date","similarity":0.6291685056430228},{"column":"actual_close_date","similarity":0.6262923756162083}],"project_phases":[{"column":"status","similarity":0.6275085851720199}],"projects":[{"column":"status","similarity":0.6256287411296566}],"journal_entries":[{"column":"status","similarity":0.6235483153718223}],"inventory_adjustments":[{"column":"status","similarity":0.6208235335633071}],"fixed_assets":[{"column":"status","similarity":0.6168418961639195},{"column":"po_id","similarity":0.6010404984118506}],"asset_maintenance":[{"column":"status","similarity":0.6160182585727294}],"order_lines":[{"column":"quantity_shipped","similarity":0.6148753597061939},{"column":"order_id","similarity":0.6054379790805837}],"employee_training":[{"column":"status","similarity":0.6139587143974272}],"project_expenses":[{"column":"status","similarity":0.6069411878269023}],"goods_receipts":[{"column":"po_id","similarity":0.6057662952497207}],"project_tasks":[{"column":"status","similarity":0.6001730432395295}]},"fused_scores":[{"table":"sales_orders","fused":0.8335207489983198,"table_sim":0.6863020331203206,"col_score":1.0543488228153188},{"table":"purchase_orders","fused":0.7920559728463912,"table_sim":0.6720782086239174,"col_score":0.9720226191801016},{"table":"sales_opportunities","fused":0.7377592203019037,"table_sim":0.601388904869088,"col_score":0.9423146934511271},{"table":"order_lines","fused":0.7029712033580511,"table_sim":0.620432904007153,"col_score":0.8267786523843982},{"table":"vendor_invoices","fused":0.7012608607553557,"table_sim":0.6085185379492049,"col_score":0.840374344964582},{"table":"purchase_requisitions","fused":0.5367807203886648,"table_sim":0.57327171968414,"col_score":0.4820442214454519},{"table":"sales_quotes","fused":0.5329429009865182,"table_sim":0.5566655088616519,"col_score":0.4973589891738176},{"table":"goods_receipts","fused":0.5328358043051082,"table_sim":0.6053687360586439,"col_score":0.42403640667480447},{"table":"po_lines","fused":0.3457312109877972,"table_sim":0.576218684979662,"col_score":0},{"table":"product_suppliers","fused":0.34525528863507515,"table_sim":0.5754254810584586,"col_score":0},{"table":"vendor_invoice_lines","fused":0.3409271142252778,"table_sim":0.5682118570421297,"col_score":0},{"table":"sales_territories","fused":0.3407389742988049,"table_sim":0.5678982904980082,"col_score":0},{"table":"receipt_lines","fused":0.3396317728352168,"table_sim":0.5660529547253613,"col_score":0},{"table":"vendors","fused":0.3395481978225607,"table_sim":0.5659136630376012,"col_score":0},{"table":"reorder_rules","fused":0.33408335546076134,"table_sim":0.5568055924346023,"col_score":0}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendors","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":41,"total_retrieval_latency_ms":48,"sql_generated":"SELECT COUNT(*) FROM sales_orders WHERE status = 'pending';","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":509}
{"timestamp":"2026-01-29T20:48:59.523Z","query_id":"4c0ecbc6-0ad1-4caa-8131-25f6ec8719ce","question":"List all products in the Electronics category","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["products","asset_categories","product_categories","product_suppliers","inventory_levels","purchase_orders","project_budgets","fixed_assets","order_lines","goods_receipts","inventory_transactions","purchase_requisitions"],"tables_from_table_retrieval":15,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"product_categories","similarity":0.7247710633179223},{"table":"products","similarity":0.6925442846427379},{"table":"asset_categories","similarity":0.6732299389573608},{"table":"product_suppliers","similarity":0.6030261734368682},{"table":"inventory_levels","similarity":0.5983462217768915},{"table":"fixed_assets","similarity":0.5837780825065988},{"table":"order_lines","similarity":0.579950725989159},{"table":"benefit_types","similarity":0.5783320444020242},{"table":"goods_receipts","similarity":0.5716501955638699},{"table":"inventory_transactions","similarity":0.5662070064714834},{"table":"purchase_orders","similarity":0.5640672157629032},{"table":"reorder_rules","similarity":0.5631110139120176},{"table":"sales_orders","similarity":0.5610178986822795},{"table":"project_budgets","similarity":0.5604683231309531},{"table":"receipt_lines","similarity":0.5589477791069778}],"column_hits_per_table":{"product_categories":5,"products":11,"asset_categories":5,"fixed_assets":1,"project_expenses":1,"project_budgets":1,"inventory_levels":3,"product_suppliers":6,"goods_receipts":1,"inventory_transactions":1,"receipt_lines":1,"purchase_orders":3,"order_lines":1,"purchase_requisitions":2,"sales_orders":1,"requisition_lines":1,"po_lines":1,"transfer_lines":1,"projects":1,"reorder_rules":1,"vendors":1,"project_milestones":1},"top_columns_per_table":{"product_categories":[{"column":"description","similarity":0.7744734798782056},{"column":"is_active","similarity":0.764103621998991},{"column":"category_id","similarity":0.7400673790806138}],"products":[{"column":"category_id","similarity":0.7448968885002062},{"column":"weight","similarity":0.7338384533236261},{"column":"description","similarity":0.7270322585700298}],"asset_categories":[{"column":"category_id","similarity":0.6720113269687207},{"column":"name","similarity":0.6440506484802837},{"column":"useful_life_years","similarity":0.6436763776718329}],"fixed_assets":[{"column":"category_id","similarity":0.6687988929895817}],"project_expenses":[{"column":"category","similarity":0.6580372401808694}],"project_budgets":[{"column":"category","similarity":0.6411736891011891}],"inventory_levels":[{"column":"product_id","similarity":0.6383729329618826},{"column":"quantity_available","similarity":0.6195689232836453},{"column":"quantity_reserved","similarity":0.6150070840715671}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6357396016111654},{"column":"is_preferred","similarity":0.6352037703917482},{"column":"product_id","similarity":0.6350232984655001}],"goods_receipts":[{"column":"notes","similarity":0.6342701892167845}],"inventory_transactions":[{"column":"product_id","similarity":0.6285109886489371}],"receipt_lines":[{"column":"product_id","similarity":0.6251008787738574}],"purchase_orders":[{"column":"status","similarity":0.6246767013236649},{"column":"subtotal","similarity":0.6129627891245971},{"column":"total","similarity":0.6109546136413169}],"order_lines":[{"column":"product_id","similarity":0.6228405864995272}],"purchase_requisitions":[{"column":"notes","similarity":0.6219501766292409},{"column":"status","similarity":0.6143404481217759}],"sales_orders":[{"column":"status","similarity":0.6179542401442183}],"requisition_lines":[{"column":"product_id","similarity":0.6178394374568797}],"po_lines":[{"column":"product_id","similarity":0.6141691155677201}],"transfer_lines":[{"column":"product_id","similarity":0.6137213514394801}],"projects":[{"column":"description","similarity":0.6114423632244014}],"reorder_rules":[{"column":"product_id","similarity":0.6112855739301208}],"vendors":[{"column":"website","similarity":0.6078254177271813}],"project_milestones":[{"column":"description","similarity":0.6073811792561313}]},"fused_scores":[{"table":"products","fused":0.84960555792291,"table_sim":0.6925442846427379,"col_score":1.0851974678431684},{"table":"asset_categories","fused":0.785802907667366,"table_sim":0.6732299389573608,"col_score":0.9546623607323738},{"table":"product_categories","fused":0.7586897194365096,"table_sim":0.7247710633179223,"col_score":0.8095677036143907},{"table":"product_suppliers","fused":0.7431522987849367,"table_sim":0.6030261734368682,"col_score":0.9533414868070396},{"table":"inventory_levels","fused":0.7298367191939065,"table_sim":0.5983462217768915,"col_score":0.9270724653194289},{"table":"purchase_orders","fused":0.7058163678358441,"table_sim":0.5640672157629032,"col_score":0.9184400959452556},{"table":"project_budgets","fused":0.5927504695190475,"table_sim":0.5604683231309531,"col_score":0.6411736891011891},{"table":"fixed_assets","fused":0.5375305395410421,"table_sim":0.5837780825065988,"col_score":0.4681592250927072},{"table":"order_lines","fused":0.5223657998133631,"table_sim":0.579950725989159,"col_score":0.435988410549669},{"table":"goods_receipts","fused":0.5205857703190215,"table_sim":0.5716501955638699,"col_score":0.4439891324517491},{"table":"inventory_transactions","fused":0.5157072807045924,"table_sim":0.5662070064714834,"col_score":0.4399576920542559},{"table":"receipt_lines","fused":0.5103969135208668,"table_sim":0.5589477791069778,"col_score":0.4375706151417002},{"table":"sales_orders","fused":0.5096379264497488,"table_sim":0.5610178986822795,"col_score":0.43256796810095277},{"table":"reorder_rules","fused":0.5090265690476443,"table_sim":0.5631110139120176,"col_score":0.42789990175108455},{"table":"benefit_types","fused":0.3469992266412145,"table_sim":0.5783320444020242,"col_score":0}],"fk_expansion_candidates":23,"fk_expansion_added":2,"fk_expansion_blocked_count":17,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"max_tables"},{"table":"reorder_rules","reason":"max_tables"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"max_tables"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":27,"total_retrieval_latency_ms":33,"sql_generated":"SELECT p.name AS product_name, p.sku, pc.category_id, pc.name AS category_name FROM products p INNER JOIN product_categories pc ON p.category_id = pc.category_id WHERE pc.name = 'Electronics';","tables_used_in_sql":[],"explain_result":"success","rows_returned":62,"total_latency_ms":1026}
{"timestamp":"2026-01-29T20:49:00.549Z","query_id":"eaa346ad-731c-457c-8e53-8e2ddb830918","question":"What are the names of all warehouses?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["warehouse_locations","warehouses","asset_locations","inventory_levels","stock_transfers","vendors","product_suppliers","inventory_transactions","goods_receipts","receipt_lines","addresses","adjustment_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":14,"tables_from_fk_expansion":2,"table_scores":[{"table":"warehouse_locations","similarity":0.7285498737313786},{"table":"warehouses","similarity":0.6792134543197855},{"table":"inventory_levels","similarity":0.6028416640616783},{"table":"stock_transfers","similarity":0.5855227429535015},{"table":"asset_locations","similarity":0.5811905860356016},{"table":"inventory_transactions","similarity":0.5741447160112193},{"table":"goods_receipts","similarity":0.562857185642988},{"table":"receipt_lines","similarity":0.5455584769843732},{"table":"inventory_adjustments","similarity":0.5426259114305894},{"table":"departments","similarity":0.5313134558364061},{"table":"business_units","similarity":0.5244981901049215},{"table":"asset_categories","similarity":0.5238562017802103},{"table":"product_suppliers","similarity":0.5237894596417773},{"table":"vendors","similarity":0.5237362245698947},{"table":"adjustment_lines","similarity":0.5220765049120273}],"column_hits_per_table":{"warehouses":6,"warehouse_locations":7,"stock_transfers":2,"goods_receipts":1,"inventory_levels":2,"inventory_transactions":2,"receipt_lines":1,"departments":1,"vendors":2,"inventory_adjustments":1,"adjustment_lines":1,"asset_locations":6,"cities":1,"reorder_rules":1,"business_units":1,"cost_centers":1,"sales_territories":1,"products":1,"sales_regions":1,"projects":1,"currencies":1,"product_categories":1,"budgets":1,"product_suppliers":2,"units_of_measure":1,"project_phases":1,"vendor_contacts":1,"asset_categories":1,"addresses":1},"top_columns_per_table":{"warehouses":[{"column":"name","similarity":0.8306423755557336},{"column":"code","similarity":0.7512829316334283},{"column":"warehouse_id","similarity":0.7425092729476251}],"warehouse_locations":[{"column":"rack","similarity":0.7298143500706573},{"column":"bin","similarity":0.7297344203964418},{"column":"aisle","similarity":0.7247238571215294}],"stock_transfers":[{"column":"to_warehouse_id","similarity":0.6377076065867383},{"column":"from_warehouse_id","similarity":0.6282759066468376}],"goods_receipts":[{"column":"warehouse_id","similarity":0.6325079254457334}],"inventory_levels":[{"column":"warehouse_id","similarity":0.623490938233287},{"column":"location_id","similarity":0.6197290277532869}],"inventory_transactions":[{"column":"warehouse_id","similarity":0.6172355443974565},{"column":"location_id","similarity":0.6163600073929221}],"receipt_lines":[{"column":"location_id","similarity":0.6086776313817097}],"departments":[{"column":"name","similarity":0.6046172861965688}],"vendors":[{"column":"name","similarity":0.6006474572761235},{"column":"website","similarity":0.5429020150551502}],"inventory_adjustments":[{"column":"warehouse_id","similarity":0.5962150819746229}],"adjustment_lines":[{"column":"location_id","similarity":0.5953390531464773}],"asset_locations":[{"column":"name","similarity":0.59252797863612},{"column":"building","similarity":0.5687769385352075},{"column":"description","similarity":0.568123307445186}],"cities":[{"column":"name","similarity":0.5913925051006355}],"reorder_rules":[{"column":"warehouse_id","similarity":0.5860961886053743}],"business_units":[{"column":"name","similarity":0.5855760360515111}],"cost_centers":[{"column":"name","similarity":0.5796551031766091}],"sales_territories":[{"column":"name","similarity":0.5739343094189399}],"products":[{"column":"name","similarity":0.5715109515395136}],"sales_regions":[{"column":"name","similarity":0.5686881306616351}],"projects":[{"column":"name","similarity":0.5628106374186854}],"currencies":[{"column":"name","similarity":0.5599164983958906}],"product_categories":[{"column":"name","similarity":0.5543220703341668}],"budgets":[{"column":"name","similarity":0.5506764127199264}],"product_suppliers":[{"column":"supplier_id","similarity":0.5505276328361339},{"column":"is_preferred","similarity":0.545694199708335}],"units_of_measure":[{"column":"name","similarity":0.5498315512937682}],"project_phases":[{"column":"name","similarity":0.5455907198882759}],"vendor_contacts":[{"column":"first_name","similarity":0.5438345209961394}],"asset_categories":[{"column":"name","similarity":0.5437632464112468}],"addresses":[{"column":"street1","similarity":0.5425795221955373}]},"fused_scores":[{"table":"warehouse_locations","fused":0.8750025483463784,"table_sim":0.7285498737313786,"col_score":1.0946815602688782},{"table":"warehouses","fused":0.8243311778230453,"table_sim":0.6792134543197855,"col_score":1.042007763077935},{"table":"asset_locations","fused":0.6856831018359026,"table_sim":0.5811905860356016,"col_score":0.8424218755363542},{"table":"inventory_levels","fused":0.6230445250277874,"table_sim":0.6028416640616783,"col_score":0.6533488164769513},{"table":"stock_transfers","fused":0.6178304025469449,"table_sim":0.5855227429535015,"col_score":0.6662918919371099},{"table":"vendors","fused":0.6154931847826541,"table_sim":0.5237362245698947,"col_score":0.7531286251017935},{"table":"product_suppliers","fused":0.6096252242654591,"table_sim":0.5237894596417773,"col_score":0.7383788712009819},{"table":"inventory_transactions","fused":0.6036031830730284,"table_sim":0.5741447160112193,"col_score":0.6477908836657422},{"table":"goods_receipts","fused":0.5148165305105982,"table_sim":0.562857185642988,"col_score":0.4427555478120134},{"table":"receipt_lines","fused":0.49776482297750263,"table_sim":0.5455584769843732,"col_score":0.4260743419671968},{"table":"inventory_adjustments","fused":0.492515769811248,"table_sim":0.5426259114305894,"col_score":0.41735055738223603},{"table":"departments","fused":0.4880809136368829,"table_sim":0.5313134558364061,"col_score":0.42323210033759817},{"table":"adjustment_lines","fused":0.47994083782823005,"table_sim":0.5220765049120273,"col_score":0.4167373372025341},{"table":"business_units","fused":0.478660204157376,"table_sim":0.5244981901049215,"col_score":0.40990322523605777},{"table":"asset_categories","fused":0.4665674300632753,"table_sim":0.5238562017802103,"col_score":0.3806342724878728}],"fk_expansion_candidates":15,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"max_tables"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"vendor_contacts","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":44,"total_retrieval_latency_ms":50,"sql_generated":"SELECT w.name FROM warehouses AS w;","tables_used_in_sql":[],"explain_result":"success","rows_returned":5,"total_latency_ms":439}
{"timestamp":"2026-01-29T20:49:00.988Z","query_id":"f7620f47-0dbe-44db-9171-21b11e48cc10","question":"List all active vendors","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["vendors","vendor_contacts","vendor_invoices","product_suppliers","vendor_invoice_lines","purchase_orders","warehouses","sales_orders","asset_maintenance","positions","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":1,"table_scores":[{"table":"vendors","similarity":0.6880006513779018},{"table":"vendor_invoices","similarity":0.6543823921120047},{"table":"vendor_contacts","similarity":0.6543707733450305},{"table":"product_suppliers","similarity":0.6368613960189783},{"table":"purchase_orders","similarity":0.6046285681195724},{"table":"warehouses","similarity":0.598149679590252},{"table":"vendor_invoice_lines","similarity":0.5838401301268009},{"table":"sales_orders","similarity":0.5640201838810418},{"table":"employee_certifications","similarity":0.551813660527373},{"table":"positions","similarity":0.5516308950343896},{"table":"goods_receipts","similarity":0.546132532397609},{"table":"certifications","similarity":0.5422578536384377},{"table":"business_units","similarity":0.5370141517568868},{"table":"sales_opportunities","similarity":0.5364263200685896},{"table":"asset_maintenance","similarity":0.5360709301261409}],"column_hits_per_table":{"vendors":12,"vendor_invoices":11,"product_suppliers":3,"vendor_contacts":8,"fixed_assets":1,"customers":1,"employees":1,"products":1,"asset_maintenance":1,"purchase_orders":1,"warehouses":1,"vendor_invoice_lines":4,"business_units":1,"positions":1,"sales_orders":1,"product_categories":1,"bank_accounts":1},"top_columns_per_table":{"vendors":[{"column":"is_active","similarity":0.8155853373692737},{"column":"vendor_id","similarity":0.7047968333046998},{"column":"website","similarity":0.7047070539914414}],"vendor_invoices":[{"column":"status","similarity":0.6853007949330985},{"column":"total","similarity":0.6625184230380687},{"column":"vendor_id","similarity":0.658515810844043}],"product_suppliers":[{"column":"vendor_id","similarity":0.6663864141204237},{"column":"vendor_sku","similarity":0.6217787251674654},{"column":"is_preferred","similarity":0.6033063105449389}],"vendor_contacts":[{"column":"vendor_id","similarity":0.666362862060921},{"column":"is_primary","similarity":0.6648517274867396},{"column":"contact_id","similarity":0.6527908754111679}],"fixed_assets":[{"column":"vendor_id","similarity":0.6576219040714807}],"customers":[{"column":"is_active","similarity":0.6545248955843614}],"employees":[{"column":"is_active","similarity":0.649190940172776}],"products":[{"column":"is_active","similarity":0.6479807345635332}],"asset_maintenance":[{"column":"vendor_id","similarity":0.6479581638128978}],"purchase_orders":[{"column":"vendor_id","similarity":0.6472967761083289}],"warehouses":[{"column":"is_active","similarity":0.6446855549903335}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.6230871843854703},{"column":"invoice_id","similarity":0.6101244773591274},{"column":"line_id","similarity":0.609089375870349}],"business_units":[{"column":"is_active","similarity":0.6149605862492391}],"positions":[{"column":"is_active","similarity":0.6137399762218805}],"sales_orders":[{"column":"status","similarity":0.6081473914740269}],"product_categories":[{"column":"is_active","similarity":0.6076608572400397}],"bank_accounts":[{"column":"is_active","similarity":0.6030985737718401}]},"fused_scores":[{"table":"vendors","fused":0.8340562331865453,"table_sim":0.6880006513779018,"col_score":1.0531396058995104},{"table":"vendor_contacts","fused":0.7889592560034033,"table_sim":0.6543707733450305,"col_score":0.9908419799909627},{"table":"vendor_invoices","fused":0.7879374726767754,"table_sim":0.6543823921120047,"col_score":0.9882700935239312},{"table":"product_suppliers","fused":0.751489589787361,"table_sim":0.6368613960189783,"col_score":0.9234318804399348},{"table":"vendor_invoice_lines","fused":0.7211190259203175,"table_sim":0.5838401301268009,"col_score":0.9270373696105922},{"table":"purchase_orders","fused":0.5440202381820756,"table_sim":0.6046285681195724,"col_score":0.4531077432758302},{"table":"warehouses","fused":0.5394017631514445,"table_sim":0.598149679590252,"col_score":0.4512798884932334},{"table":"sales_orders","fused":0.5086933799413526,"table_sim":0.5640201838810418,"col_score":0.4257031740318188},{"table":"asset_maintenance","fused":0.5030708439432959,"table_sim":0.5360709301261409,"col_score":0.45357071466902843},{"table":"positions","fused":0.5028257303627602,"table_sim":0.5516308950343896,"col_score":0.4296179833553163},{"table":"business_units","fused":0.49439745520391903,"table_sim":0.5370141517568868,"col_score":0.4304724103744674},{"table":"employee_certifications","fused":0.3310881963164238,"table_sim":0.551813660527373,"col_score":0},{"table":"goods_receipts","fused":0.3276795194385654,"table_sim":0.546132532397609,"col_score":0},{"table":"certifications","fused":0.3253547121830626,"table_sim":0.5422578536384377,"col_score":0},{"table":"sales_opportunities","fused":0.3218557920411537,"table_sim":0.5364263200685896,"col_score":0}],"fk_expansion_candidates":20,"fk_expansion_added":1,"fk_expansion_blocked_count":19,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":25,"total_retrieval_latency_ms":32,"sql_generated":"SELECT v.vendor_id, v.vendor_number, v.name FROM vendors AS v WHERE v.is_active = TRUE;","tables_used_in_sql":[],"explain_result":"success","rows_returned":200,"total_latency_ms":643}
{"timestamp":"2026-01-29T20:49:01.631Z","query_id":"dcdcbe02-db75-4cac-bbb3-aff36ee1a48d","question":"What are the different account types in the chart of accounts?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["account_types","chart_of_accounts","bank_accounts","bank_transactions","asset_categories","audit_log","benefit_types","journal_lines","vendor_invoice_lines","budget_lines","currencies","employee_benefits"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"chart_of_accounts","similarity":0.819203299985527},{"table":"account_types","similarity":0.7962345365841693},{"table":"bank_accounts","similarity":0.724679255065619},{"table":"journal_lines","similarity":0.625444495321535},{"table":"asset_categories","similarity":0.618359452764169},{"table":"benefit_types","similarity":0.6179653147868353},{"table":"bank_transactions","similarity":0.6154557182401941},{"table":"vendor_invoice_lines","similarity":0.6040685769049701},{"table":"budget_lines","similarity":0.5976766494889552},{"table":"customers","similarity":0.594854133582724},{"table":"leave_types","similarity":0.584850284339393},{"table":"audit_log","similarity":0.5826141715666185},{"table":"maintenance_types","similarity":0.5755860970964287},{"table":"currencies","similarity":0.5740346669434278},{"table":"certifications","similarity":0.5726437402506039}],"column_hits_per_table":{"chart_of_accounts":8,"account_types":4,"bank_accounts":8,"journal_lines":1,"budget_lines":1,"vendor_invoice_lines":1,"bank_transactions":3,"inventory_transactions":2,"asset_categories":3,"audit_log":2,"benefit_types":4,"document_attachments":1,"sales_orders":1,"employee_certifications":1,"journal_entries":1,"maintenance_types":1,"employee_benefits":2,"goods_receipts":1,"leave_types":1,"sales_regions":1,"stock_transfers":1,"employment_history":1,"product_categories":1},"top_columns_per_table":{"chart_of_accounts":[{"column":"account_number","similarity":0.8096926316994187},{"column":"account_type_id","similarity":0.7968800422254282},{"column":"name","similarity":0.7787449565502012}],"account_types":[{"column":"category","similarity":0.8060382831667645},{"column":"name","similarity":0.7816311319186199},{"column":"normal_balance","similarity":0.771440158430953}],"bank_accounts":[{"column":"account_number","similarity":0.7265786276491443},{"column":"gl_account_id","similarity":0.7192429462418238},{"column":"account_name","similarity":0.7122946577731373}],"journal_lines":[{"column":"account_id","similarity":0.6967143979052984}],"budget_lines":[{"column":"account_id","similarity":0.684445613990559}],"vendor_invoice_lines":[{"column":"account_id","similarity":0.6840058160952801}],"bank_transactions":[{"column":"transaction_type","similarity":0.6518087698648707},{"column":"bank_account_id","similarity":0.6061370977618293},{"column":"reference","similarity":0.5906710248731557}],"inventory_transactions":[{"column":"transaction_type","similarity":0.6495161080312447},{"column":"reference_type","similarity":0.6175642629967973}],"asset_categories":[{"column":"name","similarity":0.6338625869508345},{"column":"depreciation_method","similarity":0.6289044257771695},{"column":"category_id","similarity":0.6034748261864737}],"audit_log":[{"column":"table_name","similarity":0.6323776797561055},{"column":"action","similarity":0.6264802121253557}],"benefit_types":[{"column":"name","similarity":0.631265442053339},{"column":"benefit_type_id","similarity":0.5989631957377372},{"column":"description","similarity":0.5970070919798401}],"document_attachments":[{"column":"entity_type","similarity":0.610129485144327}],"sales_orders":[{"column":"order_number","similarity":0.6014897520147031}],"employee_certifications":[{"column":"certificate_number","similarity":0.6014221103097243}],"journal_entries":[{"column":"entry_number","similarity":0.5960303492351093}],"maintenance_types":[{"column":"name","similarity":0.5941881078938602}],"employee_benefits":[{"column":"coverage_level","similarity":0.59406931034147},{"column":"benefit_type_id","similarity":0.5920431573893533}],"goods_receipts":[{"column":"receipt_number","similarity":0.5921999581294917}],"leave_types":[{"column":"name","similarity":0.590925842666314}],"sales_regions":[{"column":"name","similarity":0.5908831690426579}],"stock_transfers":[{"column":"transfer_number","similarity":0.5905182588855986}],"employment_history":[{"column":"position","similarity":0.5900957722493421}],"product_categories":[{"column":"name","similarity":0.5900660138884373}]},"fused_scores":[{"table":"account_types","fused":0.954444066903398,"table_sim":0.7962345365841693,"col_score":1.191758362382241},{"table":"chart_of_accounts","fused":0.9269622385826437,"table_sim":0.819203299985527,"col_score":1.0886006464783187},{"table":"bank_accounts","fused":0.8505843245377838,"table_sim":0.724679255065619,"col_score":1.0394419287460308},{"table":"bank_transactions","fused":0.7481311438646958,"table_sim":0.6154557182401941,"col_score":0.9471442823014485},{"table":"asset_categories","fused":0.7113182041424861,"table_sim":0.618359452764169,"col_score":0.8507563312099616},{"table":"audit_log","fused":0.6886934629559682,"table_sim":0.5826141715666185,"col_score":0.8478124000399926},{"table":"benefit_types","fused":0.6313883600503192,"table_sim":0.6179653147868353,"col_score":0.6515229279455452},{"table":"journal_lines","fused":0.5703467286064046,"table_sim":0.625444495321535,"col_score":0.4877000785337089},{"table":"vendor_invoice_lines","fused":0.5539627746496605,"table_sim":0.6040685769049701,"col_score":0.47880407126669605},{"table":"budget_lines","fused":0.5502507616107296,"table_sim":0.5976766494889552,"col_score":0.4791119297933913},{"table":"leave_types","fused":0.5163694065502037,"table_sim":0.584850284339393,"col_score":0.41364808986641977},{"table":"maintenance_types","fused":0.5117243284681381,"table_sim":0.5755860970964287,"col_score":0.41593167552570215},{"table":"inventory_transactions","fused":0.38331929581185736,"table_sim":0,"col_score":0.9582982395296433},{"table":"customers","fused":0.3569124801496344,"table_sim":0.594854133582724,"col_score":0},{"table":"currencies","fused":0.34442080016605664,"table_sim":0.5740346669434278,"col_score":0}],"fk_expansion_candidates":9,"fk_expansion_added":2,"fk_expansion_blocked_count":7,"fk_expansion_blocked":[{"table":"budgets","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":24,"total_retrieval_latency_ms":30,"sql_generated":"SELECT DISTINCT at.name AS AccountType FROM account_types at;","tables_used_in_sql":[],"explain_result":"success","rows_returned":25,"total_latency_ms":437}
{"timestamp":"2026-01-29T20:49:02.068Z","query_id":"c21729a6-bf09-4fea-98cc-28767cabb1a0","question":"List all bank accounts and their current balances","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["bank_accounts","bank_transactions","account_types","chart_of_accounts","depreciation_entries","currencies","budgets","asset_maintenance","fixed_assets","budget_lines","asset_categories","asset_transfers"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"bank_accounts","similarity":0.7329690151560269},{"table":"bank_transactions","similarity":0.6432688918493359},{"table":"account_types","similarity":0.631508179872346},{"table":"chart_of_accounts","similarity":0.6020063005251778},{"table":"budget_lines","similarity":0.5651962639440569},{"table":"customers","similarity":0.5535278665609116},{"table":"asset_categories","similarity":0.5521572577010813},{"table":"asset_maintenance","similarity":0.5475464914896694},{"table":"fixed_assets","similarity":0.542263585011133},{"table":"depreciation_entries","similarity":0.540207110520008},{"table":"depreciation_schedules","similarity":0.5389700501296238},{"table":"budgets","similarity":0.5356853372102878},{"table":"audit_log","similarity":0.5355796554212624},{"table":"currencies","similarity":0.5347534603370891},{"table":"asset_transfers","similarity":0.5308786114003121}],"column_hits_per_table":{"bank_accounts":8,"account_types":4,"bank_transactions":8,"chart_of_accounts":7,"budget_lines":1,"budgets":2,"asset_maintenance":4,"fixed_assets":3,"departments":1,"stock_transfers":1,"purchase_orders":1,"inventory_adjustments":1,"sales_orders":1,"depreciation_entries":3,"asset_transfers":1,"po_lines":1,"currencies":2,"order_lines":1},"top_columns_per_table":{"bank_accounts":[{"column":"current_balance","similarity":0.8131918868327234},{"column":"bank_name","similarity":0.6859971206500465},{"column":"is_active","similarity":0.6856206372857585}],"account_types":[{"column":"normal_balance","similarity":0.651680429614802},{"column":"name","similarity":0.5702821319602579},{"column":"category","similarity":0.5677375251541499}],"bank_transactions":[{"column":"bank_account_id","similarity":0.6394080898784963},{"column":"amount","similarity":0.6276211603986331},{"column":"reconciled","similarity":0.6180619655169489}],"chart_of_accounts":[{"column":"account_number","similarity":0.6009438246638642},{"column":"is_active","similarity":0.5880663435274229},{"column":"description","similarity":0.5864624123051488}],"budget_lines":[{"column":"account_id","similarity":0.5958013856129102}],"budgets":[{"column":"status","similarity":0.5911631228971014},{"column":"total_amount","similarity":0.5869858538327237}],"asset_maintenance":[{"column":"status","similarity":0.5877659188337945},{"column":"cost","similarity":0.5661365628191241},{"column":"notes","similarity":0.5650870530420457}],"fixed_assets":[{"column":"status","similarity":0.5876108236636884},{"column":"purchase_cost","similarity":0.5561615272534075},{"column":"po_id","similarity":0.5498653271915838}],"departments":[{"column":"budget","similarity":0.5809728059571625}],"stock_transfers":[{"column":"status","similarity":0.5709511656558833}],"purchase_orders":[{"column":"total","similarity":0.5687313472919212}],"inventory_adjustments":[{"column":"status","similarity":0.5683037201005342}],"sales_orders":[{"column":"total","similarity":0.5660190484076101}],"depreciation_entries":[{"column":"accumulated_depreciation","similarity":0.5614194260846443},{"column":"amount","similarity":0.555260116269063},{"column":"asset_id","similarity":0.5551633641468458}],"asset_transfers":[{"column":"asset_id","similarity":0.5602763924959059}],"po_lines":[{"column":"line_total","similarity":0.5571370270411418}],"currencies":[{"column":"symbol","similarity":0.5502956016313811},{"column":"code","similarity":0.5500909502155655}],"order_lines":[{"column":"line_total","similarity":0.5495504183282629}]},"fused_scores":[{"table":"bank_accounts","fused":0.902177471523772,"table_sim":0.7329690151560269,"col_score":1.1559901560753896},{"table":"bank_transactions","fused":0.7606221923724445,"table_sim":0.6432688918493359,"col_score":0.9366521431571075},{"table":"account_types","fused":0.7531245848001584,"table_sim":0.631508179872346,"col_score":0.9355491921918769},{"table":"chart_of_accounts","fused":0.6839105982744915,"table_sim":0.6020063005251778,"col_score":0.8067670448984622},{"table":"depreciation_entries","fused":0.6597440599996751,"table_sim":0.540207110520008,"col_score":0.8390494842191758},{"table":"currencies","fused":0.6509885068979191,"table_sim":0.5347534603370891,"col_score":0.8253410767391639},{"table":"budgets","fused":0.6389683810648563,"table_sim":0.5356853372102878,"col_score":0.7938929468467092},{"table":"asset_maintenance","fused":0.6372697486581825,"table_sim":0.5475464914896694,"col_score":0.7718546344109521},{"table":"fixed_assets","fused":0.6300882772209593,"table_sim":0.542263585011133,"col_score":0.7618253155356984},{"table":"budget_lines","fused":0.5059421463380489,"table_sim":0.5651962639440569,"col_score":0.41706096992903713},{"table":"asset_transfers","fused":0.4754045567390409,"table_sim":0.5308786114003121,"col_score":0.3921934747471341},{"table":"customers","fused":0.33211671993654696,"table_sim":0.5535278665609116,"col_score":0},{"table":"asset_categories","fused":0.33129435462064877,"table_sim":0.5521572577010813,"col_score":0},{"table":"depreciation_schedules","fused":0.3233820300777743,"table_sim":0.5389700501296238,"col_score":0},{"table":"audit_log","fused":0.3213477932527574,"table_sim":0.5355796554212624,"col_score":0}],"fk_expansion_candidates":15,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"asset_locations","reason":"no_evidence"},{"table":"customers","reason":"max_tables"},{"table":"departments","reason":"max_tables"},{"table":"depreciation_schedules","reason":"max_tables"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"purchase_orders","reason":"max_tables"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":41,"total_retrieval_latency_ms":47,"sql_generated":"SELECT ba.account_number AS \"Account Number\", ba.account_name AS \"Account Name\", ba.current_balance AS \"Current Balance\" FROM fixed_assets fa INNER JOIN bank_accounts ba ON fa.asset_id = ba.bank_account_id WHERE fa.category_id IN (SELECT category_id FROM asset_categories WHERE name = 'Fixed Assets');","tables_used_in_sql":[],"explain_result":"success","rows_returned":0,"total_latency_ms":1331}
{"timestamp":"2026-01-29T20:49:03.399Z","query_id":"2a8e1211-4f09-4c62-9e6a-3e23e2a52b5d","question":"How many projects are currently active?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["project_tasks","projects","project_milestones","project_phases","project_resources","project_expenses","positions","product_categories","warehouses","cost_centers","project_budgets","task_assignments"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_tasks","similarity":0.6324363750327547},{"table":"project_milestones","similarity":0.6170314556998037},{"table":"project_phases","similarity":0.6128862225489412},{"table":"projects","similarity":0.6020298260872147},{"table":"project_resources","similarity":0.6015867769428557},{"table":"project_budgets","similarity":0.5892063991800344},{"table":"project_expenses","similarity":0.5696442071698902},{"table":"positions","similarity":0.5644568182612411},{"table":"opportunity_stages","similarity":0.5589162087700763},{"table":"warehouses","similarity":0.5509035131365505},{"table":"cost_centers","similarity":0.548129265267962},{"table":"task_assignments","similarity":0.5450320760647058},{"table":"product_categories","similarity":0.539820939875771},{"table":"asset_maintenance","similarity":0.52313956323239},{"table":"business_units","similarity":0.5210598083671529}],"column_hits_per_table":{"projects":11,"project_phases":8,"project_tasks":9,"products":1,"project_milestones":7,"product_categories":1,"positions":1,"project_expenses":1,"project_resources":3,"training_courses":1,"employees":1,"warehouses":1,"business_units":1,"cost_centers":1,"vendors":1,"bank_accounts":1,"customers":1},"top_columns_per_table":{"projects":[{"column":"status","similarity":0.7039586739514128},{"column":"start_date","similarity":0.6607094006164724},{"column":"project_number","similarity":0.6518983609724518}],"project_phases":[{"column":"status","similarity":0.6689746254874316},{"column":"start_date","similarity":0.6271086432862566},{"column":"project_id","similarity":0.6166614910327677}],"project_tasks":[{"column":"status","similarity":0.6676901253189378},{"column":"completed_date","similarity":0.6374421602481329},{"column":"actual_hours","similarity":0.6316381487867313}],"products":[{"column":"is_active","similarity":0.6425708119490484}],"project_milestones":[{"column":"completed_date","similarity":0.6325660468867274},{"column":"is_billable","similarity":0.6124934562333328},{"column":"project_id","similarity":0.6076897771208767}],"product_categories":[{"column":"is_active","similarity":0.6317144051457637}],"positions":[{"column":"is_active","similarity":0.6252475888035075}],"project_expenses":[{"column":"status","similarity":0.622364299630185}],"project_resources":[{"column":"start_date","similarity":0.6206371456319261},{"column":"end_date","similarity":0.6084386815140401},{"column":"project_id","similarity":0.5910943352806449}],"training_courses":[{"column":"is_active","similarity":0.6141042575011056}],"employees":[{"column":"is_active","similarity":0.6117702012307417}],"warehouses":[{"column":"is_active","similarity":0.6079254385625211}],"business_units":[{"column":"is_active","similarity":0.6021027569519785}],"cost_centers":[{"column":"is_active","similarity":0.597901030459316}],"vendors":[{"column":"is_active","similarity":0.5950232278262507}],"bank_accounts":[{"column":"is_active","similarity":0.5888223633904216}],"customers":[{"column":"is_active","similarity":0.5831120305694527}]},"fused_scores":[{"table":"project_tasks","fused":0.7607663188762523,"table_sim":0.6324363750327547,"col_score":0.9532612346414986},{"table":"projects","fused":0.7558813280934082,"table_sim":0.6020298260872147,"col_score":0.9866585811026983},{"table":"project_milestones","fused":0.7457439834212397,"table_sim":0.6170314556998037,"col_score":0.9388127750033938},{"table":"project_phases","fused":0.7418687116489029,"table_sim":0.6128862225489412,"col_score":0.9353424452988452},{"table":"project_resources","fused":0.7308946607212918,"table_sim":0.6015867769428557,"col_score":0.9248564863889461},{"table":"project_expenses","fused":0.5160485281983859,"table_sim":0.5696442071698902,"col_score":0.4356550097411295},{"table":"positions","fused":0.5137434158217267,"table_sim":0.5644568182612411,"col_score":0.4376733121624552},{"table":"product_categories","fused":0.5007725973662764,"table_sim":0.539820939875771,"col_score":0.44220008360203455},{"table":"warehouses","fused":0.5007612306794362,"table_sim":0.5509035131365505,"col_score":0.42554780699376477},{"table":"cost_centers","fused":0.49628984768938567,"table_sim":0.548129265267962,"col_score":0.41853072132152114},{"table":"business_units","fused":0.48122465696684574,"table_sim":0.5210598083671529,"col_score":0.4214719298663849},{"table":"project_budgets","fused":0.35352383950802063,"table_sim":0.5892063991800344,"col_score":0},{"table":"opportunity_stages","fused":0.33534972526204576,"table_sim":0.5589162087700763,"col_score":0},{"table":"task_assignments","fused":0.3270192456388235,"table_sim":0.5450320760647058,"col_score":0},{"table":"asset_maintenance","fused":0.31388373793943397,"table_sim":0.52313956323239,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":14,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":47,"total_retrieval_latency_ms":52,"sql_generated":"SELECT COUNT(*) FROM projects WHERE status = 'active';","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":381}
{"timestamp":"2026-01-29T20:49:03.780Z","query_id":"889615d8-9908-4c2d-b25b-eaa3fb2c3eef","question":"List all fixed assets with their purchase cost","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["fixed_assets","asset_maintenance","purchase_orders","asset_transfers","project_budgets","project_expenses","asset_categories","purchase_requisitions","depreciation_schedules","depreciation_entries","asset_locations","maintenance_types"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"fixed_assets","similarity":0.7209497053888301},{"table":"asset_maintenance","similarity":0.6308058404117752},{"table":"asset_categories","similarity":0.5912281177120349},{"table":"depreciation_schedules","similarity":0.5814813777494169},{"table":"asset_transfers","similarity":0.5810308594815269},{"table":"purchase_requisitions","similarity":0.5569747421146416},{"table":"purchase_orders","similarity":0.5506831817049027},{"table":"depreciation_entries","similarity":0.5454814933769311},{"table":"asset_locations","similarity":0.545468446655189},{"table":"requisition_lines","similarity":0.5406198549845527},{"table":"project_expenses","similarity":0.5394520045423311},{"table":"project_budgets","similarity":0.5162048498656928},{"table":"inventory_adjustments","similarity":0.5159531035642008},{"table":"sales_territories","similarity":0.5074635447871859},{"table":"adjustment_lines","similarity":0.5062944760482943}],"column_hits_per_table":{"fixed_assets":17,"asset_maintenance":8,"asset_transfers":2,"purchase_orders":5,"maintenance_types":1,"depreciation_entries":1,"depreciation_schedules":1,"products":2,"purchase_requisitions":2,"asset_categories":1,"project_expenses":2,"project_budgets":2,"sales_orders":2,"product_suppliers":1,"projects":1,"vendor_invoices":1,"budgets":1},"top_columns_per_table":{"fixed_assets":[{"column":"purchase_cost","similarity":0.8423448992143113},{"column":"purchase_date","similarity":0.7689166463133373},{"column":"disposal_amount","similarity":0.7227764959896598}],"asset_maintenance":[{"column":"cost","similarity":0.7099171439402068},{"column":"asset_id","similarity":0.6516176549413301},{"column":"status","similarity":0.6280454782739386}],"asset_transfers":[{"column":"asset_id","similarity":0.6460511870752553},{"column":"reason","similarity":0.5978803089362457}],"purchase_orders":[{"column":"total","similarity":0.6344593910735148},{"column":"shipping_cost","similarity":0.6188978318886464},{"column":"subtotal","similarity":0.6026448016407694}],"maintenance_types":[{"column":"estimated_cost","similarity":0.6142507699404941}],"depreciation_entries":[{"column":"asset_id","similarity":0.609651147848969}],"depreciation_schedules":[{"column":"asset_id","similarity":0.6056651094167285}],"products":[{"column":"unit_cost","similarity":0.6018845518779156},{"column":"list_price","similarity":0.5829432045610968}],"purchase_requisitions":[{"column":"status","similarity":0.6006593595483197},{"column":"notes","similarity":0.580625013783363}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.5981101161213059}],"project_expenses":[{"column":"amount","similarity":0.5845721523119052},{"column":"status","similarity":0.5742178119977871}],"project_budgets":[{"column":"actual_amount","similarity":0.5819665579953361},{"column":"planned_amount","similarity":0.5770144160331034}],"sales_orders":[{"column":"total","similarity":0.5794698766565994},{"column":"shipping_cost","similarity":0.5723923913919466}],"product_suppliers":[{"column":"unit_cost","similarity":0.5781850879817803}],"projects":[{"column":"budget","similarity":0.5753357955995387}],"vendor_invoices":[{"column":"total","similarity":0.5747822939355819}],"budgets":[{"column":"total_amount","similarity":0.5743122120825542}]},"fused_scores":[{"table":"fixed_assets","fused":0.92329111218169,"table_sim":0.7209497053888301,"col_score":1.22680322237098},{"table":"asset_maintenance","fused":0.7860559067350223,"table_sim":0.6308058404117752,"col_score":1.0189310062198929},{"table":"purchase_orders","fused":0.7079732318300769,"table_sim":0.5506831817049027,"col_score":0.943908307017838},{"table":"asset_transfers","fused":0.67821780545395,"table_sim":0.5810308594815269,"col_score":0.823998224412585},{"table":"project_budgets","fused":0.6579124163241709,"table_sim":0.5162048498656928,"col_score":0.8704737660118879},{"table":"project_expenses","fused":0.637890557329851,"table_sim":0.5394520045423311,"col_score":0.7855483865111307},{"table":"asset_categories","fused":0.5939809170757433,"table_sim":0.5912281177120349,"col_score":0.5981101161213059},{"table":"purchase_requisitions","fused":0.5836569678719853,"table_sim":0.5569747421146416,"col_score":0.6236803065080008},{"table":"depreciation_schedules","fused":0.5184750572863341,"table_sim":0.5814813777494169,"col_score":0.4239655765917099},{"table":"depreciation_entries","fused":0.49799121742387,"table_sim":0.5454814933769311,"col_score":0.4267558034942783},{"table":"products","fused":0.3573424616633856,"table_sim":0,"col_score":0.893356154158464},{"table":"sales_orders","fused":0.3462664289410291,"table_sim":0,"col_score":0.8656660723525728},{"table":"asset_locations","fused":0.3272810679931134,"table_sim":0.545468446655189,"col_score":0},{"table":"requisition_lines","fused":0.3243719129907316,"table_sim":0.5406198549845527,"col_score":0},{"table":"inventory_adjustments","fused":0.30957186213852045,"table_sim":0.5159531035642008,"col_score":0}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"projects","reason":"max_tables"},{"table":"requisition_lines","reason":"max_tables"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":41,"total_retrieval_latency_ms":47,"sql_generated":"SELECT fa.asset_id AS asset_id, fa.name AS name, fa.purchase_cost AS purchase_cost FROM fixed_assets fa;","tables_used_in_sql":[],"explain_result":"success","rows_returned":500,"total_latency_ms":728}
{"timestamp":"2026-01-29T20:49:04.509Z","query_id":"6e9f5051-29a9-4712-9a9d-33f1609ebd9e","question":"What are all the available leave types?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["leave_types","leave_requests","maintenance_types","account_types","employment_history","benefit_types","employees","positions","employee_benefits","asset_maintenance","chart_of_accounts","sales_territories"],"tables_from_table_retrieval":15,"tables_from_column_only":9,"tables_from_fk_expansion":2,"table_scores":[{"table":"leave_types","similarity":0.7907961003152969},{"table":"leave_requests","similarity":0.7143778015997992},{"table":"maintenance_types","similarity":0.6481400096068088},{"table":"benefit_types","similarity":0.6269933285396667},{"table":"account_types","similarity":0.6192881819056906},{"table":"positions","similarity":0.5752929625327803},{"table":"employee_benefits","similarity":0.5713679218642078},{"table":"employment_history","similarity":0.5660594097075526},{"table":"employees","similarity":0.5660053394491918},{"table":"asset_maintenance","similarity":0.5543920873977978},{"table":"chart_of_accounts","similarity":0.5502530849823464},{"table":"sales_territories","similarity":0.5497748598255436},{"table":"sales_opportunities","similarity":0.5460540206653771},{"table":"training_courses","similarity":0.5421204605814522},{"table":"asset_categories","similarity":0.537612536880944}],"column_hits_per_table":{"leave_types":5,"leave_requests":10,"maintenance_types":5,"benefit_types":5,"employment_history":2,"account_types":4,"employee_training":1,"asset_maintenance":2,"timesheets":1,"sales_orders":1,"employee_benefits":2,"positions":2,"fixed_assets":1,"employees":2,"vendor_invoices":1,"sales_opportunities":1,"purchase_requisitions":1,"stock_transfers":1,"inventory_adjustments":1,"sales_quotes":1,"sales_territories":1},"top_columns_per_table":{"leave_types":[{"column":"days_allowed","similarity":0.7686500345965878},{"column":"is_paid","similarity":0.7623841534239336},{"column":"name","similarity":0.7406312254921097}],"leave_requests":[{"column":"status","similarity":0.7444703766728187},{"column":"leave_type_id","similarity":0.7158957943298758},{"column":"days_requested","similarity":0.6957721236459536}],"maintenance_types":[{"column":"description","similarity":0.6377767194823566},{"column":"name","similarity":0.631136316452077},{"column":"type_id","similarity":0.6167514426103488}],"benefit_types":[{"column":"is_active","similarity":0.6269473121389368},{"column":"name","similarity":0.6220834198328969},{"column":"description","similarity":0.6122108465746717}],"employment_history":[{"column":"reason_for_leaving","similarity":0.6243515506921076},{"column":"position","similarity":0.5714253900200132}],"account_types":[{"column":"normal_balance","similarity":0.6149563569549518},{"column":"category","similarity":0.6045207339251893},{"column":"name","similarity":0.5905785819022606}],"employee_training":[{"column":"status","similarity":0.6084208038692348}],"asset_maintenance":[{"column":"status","similarity":0.5961072885143408},{"column":"maintenance_type_id","similarity":0.5889166627027309}],"timesheets":[{"column":"status","similarity":0.5896684755702837}],"sales_orders":[{"column":"status","similarity":0.5833814673451871}],"employee_benefits":[{"column":"benefit_type_id","similarity":0.5820988681778586},{"column":"coverage_level","similarity":0.563402375606914}],"positions":[{"column":"is_active","similarity":0.5815402830311333},{"column":"title","similarity":0.5780125325936805}],"fixed_assets":[{"column":"status","similarity":0.5779508245109969}],"employees":[{"column":"termination_date","similarity":0.5720522989676154},{"column":"gender","similarity":0.5661719915149735}],"vendor_invoices":[{"column":"status","similarity":0.5694778387064632}],"sales_opportunities":[{"column":"source","similarity":0.5693960477309942}],"purchase_requisitions":[{"column":"status","similarity":0.5692240149966709}],"stock_transfers":[{"column":"status","similarity":0.5691483787100361}],"inventory_adjustments":[{"column":"status","similarity":0.566032834035236}],"sales_quotes":[{"column":"status","similarity":0.5648321255084394}],"sales_territories":[{"column":"name","similarity":0.5628683783439146}]},"fused_scores":[{"table":"leave_types","fused":0.9271541516976758,"table_sim":0.7907961003152969,"col_score":1.131691228771244},{"table":"leave_requests","fused":0.8425926840869853,"table_sim":0.7143778015997992,"col_score":1.0349150078177645},{"table":"maintenance_types","fused":0.7488967046422195,"table_sim":0.6481400096068088,"col_score":0.9000317471953356},{"table":"account_types","fused":0.738459598710433,"table_sim":0.6192881819056906,"col_score":0.9172167239175464},{"table":"employment_history","fused":0.7036613441053773,"table_sim":0.5660594097075526,"col_score":0.9100642457021142},{"table":"benefit_types","fused":0.6888048802259811,"table_sim":0.6269933285396667,"col_score":0.7815222077554526},{"table":"employees","fused":0.6816585215595561,"table_sim":0.5660053394491918,"col_score":0.8551382947251023},{"table":"positions","fused":0.657796430181499,"table_sim":0.5752929625327803,"col_score":0.7815516316545771},{"table":"employee_benefits","fused":0.6496755449061905,"table_sim":0.5713679218642078,"col_score":0.7671369794691645},{"table":"asset_maintenance","fused":0.5819936260010764,"table_sim":0.5543920873977978,"col_score":0.6233959339059943},{"table":"sales_opportunities","fused":0.5553908314916239,"table_sim":0.5460540206653771,"col_score":0.5693960477309942},{"table":"sales_territories","fused":0.4874680618316223,"table_sim":0.5497748598255436,"col_score":0.3940078648407402},{"table":"chart_of_accounts","fused":0.3301518509894078,"table_sim":0.5502530849823464,"col_score":0},{"table":"training_courses","fused":0.32527227634887135,"table_sim":0.5421204605814522,"col_score":0},{"table":"asset_categories","fused":0.3225675221285664,"table_sim":0.537612536880944,"col_score":0}],"fk_expansion_candidates":32,"fk_expansion_added":2,"fk_expansion_blocked_count":29,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":41,"total_retrieval_latency_ms":46,"sql_generated":"SELECT lt.name FROM leave_types AS lt;","tables_used_in_sql":[],"explain_result":"success","rows_returned":8,"total_latency_ms":424}
{"timestamp":"2026-01-29T20:49:04.934Z","query_id":"72c62d3f-164d-4b92-8496-0b4e260c115b","question":"List all training courses that are mandatory","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["training_courses","employee_training","certifications","employee_certifications","leave_types","maintenance_types","purchase_requisitions","emergency_contacts","units_of_measure","business_units","asset_maintenance","employees"],"tables_from_table_retrieval":15,"tables_from_column_only":12,"tables_from_fk_expansion":2,"table_scores":[{"table":"training_courses","similarity":0.7832587829851695},{"table":"employee_training","similarity":0.6570057454586046},{"table":"certifications","similarity":0.5900939338505992},{"table":"employee_certifications","similarity":0.5760162077924663},{"table":"maintenance_types","similarity":0.49281971341629327},{"table":"leave_types","similarity":0.49016105575765045},{"table":"emergency_contacts","similarity":0.4738555676585048},{"table":"account_types","similarity":0.47279576060367634},{"table":"business_units","similarity":0.47237885502957644},{"table":"units_of_measure","similarity":0.46939263092633876},{"table":"asset_maintenance","similarity":0.4667394047579505},{"table":"purchase_requisitions","similarity":0.4654660756610647},{"table":"employees","similarity":0.4617701057229451},{"table":"positions","similarity":0.46160419508462314},{"table":"countries","similarity":0.46045896330476366}],"column_hits_per_table":{"training_courses":7,"employee_training":7,"certifications":5,"employee_certifications":6,"leave_types":3,"sales_orders":1,"purchase_requisitions":2,"maintenance_types":4,"emergency_contacts":1,"project_milestones":2,"benefit_types":1,"business_units":1,"requisition_lines":1,"product_suppliers":1,"project_resources":1,"project_tasks":1,"reorder_rules":1,"units_of_measure":1,"projects":1,"employee_benefits":1,"inventory_levels":1,"vendor_contacts":1},"top_columns_per_table":{"training_courses":[{"column":"is_mandatory","similarity":0.8183425520777443},{"column":"description","similarity":0.7152546556290251},{"column":"cost","similarity":0.703103057924051}],"employee_training":[{"column":"course_id","similarity":0.6726632190515707},{"column":"scheduled_date","similarity":0.6406033902015907},{"column":"completion_date","similarity":0.6314212095563025}],"certifications":[{"column":"description","similarity":0.6043807811754061},{"column":"issuing_body","similarity":0.5890949692558212},{"column":"validity_years","similarity":0.5683544613271275}],"employee_certifications":[{"column":"certification_id","similarity":0.5641935913194706},{"column":"cert_id","similarity":0.5530637459134944},{"column":"certificate_number","similarity":0.5527992455216449}],"leave_types":[{"column":"requires_approval","similarity":0.5414363431590249},{"column":"is_paid","similarity":0.5069584623421746},{"column":"days_allowed","similarity":0.48500668213425}],"sales_orders":[{"column":"required_date","similarity":0.522537932147881}],"purchase_requisitions":[{"column":"required_date","similarity":0.5198974320372106},{"column":"notes","similarity":0.48367699787532503}],"maintenance_types":[{"column":"description","similarity":0.515090472968373},{"column":"frequency_months","similarity":0.49330482595376823},{"column":"estimated_cost","similarity":0.49293759341419907}],"emergency_contacts":[{"column":"is_primary","similarity":0.5039578758679507}],"project_milestones":[{"column":"is_billable","similarity":0.49776557203974603},{"column":"description","similarity":0.4804638717229941}],"benefit_types":[{"column":"is_active","similarity":0.494470742028722}],"business_units":[{"column":"is_active","similarity":0.4928108442926942}],"requisition_lines":[{"column":"quantity","similarity":0.4922188905326943}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.48865331705843196}],"project_resources":[{"column":"hourly_rate","similarity":0.4852972701989151}],"project_tasks":[{"column":"priority","similarity":0.4836687970545305}],"reorder_rules":[{"column":"max_quantity","similarity":0.4829698043754158}],"units_of_measure":[{"column":"abbreviation","similarity":0.4823545888550096}],"projects":[{"column":"priority","similarity":0.48215945015056816}],"employee_benefits":[{"column":"coverage_level","similarity":0.48183762318937706}],"inventory_levels":[{"column":"quantity_reserved","similarity":0.48177652205374843}],"vendor_contacts":[{"column":"is_primary","similarity":0.4800372811419217}]},"fused_scores":[{"table":"training_courses","fused":0.9379129022070096,"table_sim":0.7832587829851695,"col_score":1.1698940810397698},{"table":"employee_training","fused":0.7767290452670595,"table_sim":0.6570057454586046,"col_score":0.956313994979742},{"table":"certifications","fused":0.7033652402781134,"table_sim":0.5900939338505992,"col_score":0.8732721999193849},{"table":"employee_certifications","fused":0.6746819403171497,"table_sim":0.5760162077924663,"col_score":0.8226805391041746},{"table":"leave_types","fused":0.6076725071450502,"table_sim":0.49016105575765045,"col_score":0.7839396842261499},{"table":"maintenance_types","fused":0.591601277114123,"table_sim":0.49281971341629327,"col_score":0.7397736226608678},{"table":"purchase_requisitions","fused":0.5549533979140686,"table_sim":0.4654660756610647,"col_score":0.6891843812935744},{"table":"emergency_contacts","fused":0.48589649094228315,"table_sim":0.4738555676585048,"col_score":0.5039578758679507},{"table":"units_of_measure","fused":0.47457741409780707,"table_sim":0.46939263092633876,"col_score":0.4823545888550096},{"table":"business_units","fused":0.42141434941970024,"table_sim":0.47237885502957644,"col_score":0.3449675910048859},{"table":"account_types","fused":0.2836774563622058,"table_sim":0.47279576060367634,"col_score":0},{"table":"asset_maintenance","fused":0.2800436428547703,"table_sim":0.4667394047579505,"col_score":0},{"table":"employees","fused":0.27706206343376705,"table_sim":0.4617701057229451,"col_score":0},{"table":"positions","fused":0.27696251705077385,"table_sim":0.46160419508462314,"col_score":0},{"table":"countries","fused":0.2762753779828582,"table_sim":0.46045896330476366,"col_score":0}],"fk_expansion_candidates":7,"fk_expansion_added":2,"fk_expansion_blocked_count":5,"fk_expansion_blocked":[{"table":"departments","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":36,"total_retrieval_latency_ms":43,"sql_generated":"SELECT tc.name AS course_name, tc.duration_hours, tc.cost, tc.is_active FROM training_courses tc WHERE tc.is_mandatory = TRUE;","tables_used_in_sql":[],"explain_result":"success","rows_returned":4,"total_latency_ms":846}
{"timestamp":"2026-01-29T20:49:05.780Z","query_id":"ce539325-dc7b-4c78-b2d3-de9784e09cad","question":"What are the different opportunity stages?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["opportunity_stages","sales_opportunities","project_phases","project_tasks","sales_quotes","positions","employment_history","vendor_contacts","task_assignments","benefit_types","projects","timesheet_entries"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"opportunity_stages","similarity":0.8221357699980866},{"table":"sales_opportunities","similarity":0.705452578214936},{"table":"project_phases","similarity":0.5910011427333453},{"table":"project_tasks","similarity":0.5856436723604402},{"table":"positions","similarity":0.5399052196547368},{"table":"asset_categories","similarity":0.5283525308586682},{"table":"benefit_types","similarity":0.5259100173290491},{"table":"project_milestones","similarity":0.5171558130474864},{"table":"inventory_levels","similarity":0.5163777584176084},{"table":"vendor_contacts","similarity":0.5161594726009905},{"table":"task_assignments","similarity":0.5159234125463281},{"table":"sales_quotes","similarity":0.5145326653191699},{"table":"timesheet_entries","similarity":0.5109343321958333},{"table":"employment_history","similarity":0.5109304894618054},{"table":"vendors","similarity":0.509941756909679}],"column_hits_per_table":{"opportunity_stages":6,"sales_opportunities":11,"project_phases":8,"sales_quotes":2,"project_tasks":4,"projects":3,"positions":1,"employment_history":1,"stock_transfers":1,"vendor_invoices":1,"vendor_contacts":1,"sales_orders":1,"performance_reviews":1,"purchase_requisitions":1,"task_assignments":1,"employee_training":1,"timesheets":1,"project_milestones":1,"journal_entries":1,"purchase_orders":1,"benefit_types":1,"warehouse_locations":1},"top_columns_per_table":{"opportunity_stages":[{"column":"name","similarity":0.8022669439071034},{"column":"sequence","similarity":0.7826323931295351},{"column":"probability","similarity":0.7818078987294276}],"sales_opportunities":[{"column":"stage_id","similarity":0.7199852660162092},{"column":"source","similarity":0.6694163213892567},{"column":"name","similarity":0.6490089853551896}],"project_phases":[{"column":"status","similarity":0.6164785012384887},{"column":"start_date","similarity":0.6071014985723452},{"column":"description","similarity":0.599519601414315}],"sales_quotes":[{"column":"opportunity_id","similarity":0.613132018194432},{"column":"status","similarity":0.5429687740505206}],"project_tasks":[{"column":"priority","similarity":0.5861525983204229},{"column":"phase_id","similarity":0.5727236988248975},{"column":"status","similarity":0.5679605460087266}],"projects":[{"column":"priority","similarity":0.5824136089158493},{"column":"status","similarity":0.5614455668233992},{"column":"start_date","similarity":0.5455112148719066}],"positions":[{"column":"title","similarity":0.570845518096384}],"employment_history":[{"column":"position","similarity":0.5638653453378809}],"stock_transfers":[{"column":"status","similarity":0.5612083430408489}],"vendor_invoices":[{"column":"status","similarity":0.5583699388667535}],"vendor_contacts":[{"column":"title","similarity":0.555419734524806}],"sales_orders":[{"column":"status","similarity":0.5534662786155742}],"performance_reviews":[{"column":"review_period_start","similarity":0.5523942655144478}],"purchase_requisitions":[{"column":"status","similarity":0.5523731471352765}],"task_assignments":[{"column":"role","similarity":0.5518232752608079}],"employee_training":[{"column":"status","similarity":0.5505061546622828}],"timesheets":[{"column":"status","similarity":0.5501145087173305}],"project_milestones":[{"column":"name","similarity":0.5480794501954276}],"journal_entries":[{"column":"status","similarity":0.5450907789109756}],"purchase_orders":[{"column":"status","similarity":0.5448321917989046}],"benefit_types":[{"column":"name","similarity":0.5417057889558006}],"warehouse_locations":[{"column":"aisle","similarity":0.541280937948999}]},"fused_scores":[{"table":"opportunity_stages","fused":0.9626959989965516,"table_sim":0.8221357699980866,"col_score":1.1735363424942489},{"table":"sales_opportunities","fused":0.8201333553810458,"table_sim":0.705452578214936,"col_score":0.9921545211302105},{"table":"project_phases","fused":0.7145727552551784,"table_sim":0.5910011427333453,"col_score":0.899930174037928},{"table":"project_tasks","fused":0.6963386277407597,"table_sim":0.5856436723604402,"col_score":0.8623810608112388},{"table":"sales_quotes","fused":0.5564121926530157,"table_sim":0.5145326653191699,"col_score":0.6192314836537846},{"table":"positions","fused":0.5522813390313956,"table_sim":0.5399052196547368,"col_score":0.570845518096384},{"table":"employment_history","fused":0.5321044318122357,"table_sim":0.5109304894618054,"col_score":0.5638653453378809},{"table":"vendor_contacts","fused":0.5318635773705167,"table_sim":0.5161594726009905,"col_score":0.555419734524806},{"table":"task_assignments","fused":0.53028335763212,"table_sim":0.5159234125463281,"col_score":0.5518232752608079},{"table":"benefit_types","fused":0.46722363130505357,"table_sim":0.5259100173290491,"col_score":0.3791940522690604},{"table":"project_milestones","fused":0.46375573388321156,"table_sim":0.5171558130474864,"col_score":0.3836556151367993},{"table":"projects","fused":0.34206768654072106,"table_sim":0,"col_score":0.8551692163518025},{"table":"asset_categories","fused":0.3170115185152009,"table_sim":0.5283525308586682,"col_score":0},{"table":"inventory_levels","fused":0.309826655050565,"table_sim":0.5163777584176084,"col_score":0},{"table":"timesheet_entries","fused":0.30656059931749996,"table_sim":0.5109343321958333,"col_score":0}],"fk_expansion_candidates":9,"fk_expansion_added":2,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"vendors","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":41,"total_retrieval_latency_ms":47,"sql_generated":"SELECT o.name AS stage_name FROM sales_opportunities s JOIN opportunity_stages o ON s.stage_id = o.stage_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":500,"total_latency_ms":687}
{"timestamp":"2026-01-29T20:49:06.467Z","query_id":"ee11184f-9407-416a-87e6-ef94d9c5d2f7","question":"List all countries in the system","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["countries","states_provinces","currencies","tax_rates","sales_regions","fiscal_periods","certifications","cities","opportunity_stages","bank_accounts","bank_transactions","chart_of_accounts"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"countries","similarity":0.7008865097920517},{"table":"states_provinces","similarity":0.6734638308582259},{"table":"tax_rates","similarity":0.6116670532927957},{"table":"sales_territories","similarity":0.5947794602061558},{"table":"currencies","similarity":0.5771716778997639},{"table":"sales_regions","similarity":0.5687569498363646},{"table":"cities","similarity":0.5643183199830137},{"table":"bank_accounts","similarity":0.5493286779600007},{"table":"customers","similarity":0.5473386397932745},{"table":"fiscal_periods","similarity":0.5354796670765565},{"table":"budgets","similarity":0.5305192103519173},{"table":"units_of_measure","similarity":0.530053961527814},{"table":"chart_of_accounts","similarity":0.5269687220084575},{"table":"certifications","similarity":0.5251628602461479},{"table":"opportunity_stages","similarity":0.516133383734989}],"column_hits_per_table":{"countries":4,"states_provinces":4,"tax_rates":3,"currencies":5,"sales_regions":4,"sales_territories":3,"cities":2,"departments":2,"fiscal_periods":4,"bank_accounts":2,"certifications":2,"opportunity_stages":3,"customers":1,"bank_transactions":2,"purchase_orders":1,"employee_certifications":1,"depreciation_schedules":1,"purchase_requisitions":1,"budgets":2,"sales_orders":1,"chart_of_accounts":1,"units_of_measure":1},"top_columns_per_table":{"countries":[{"column":"iso_code","similarity":0.7094552565742085},{"column":"country_id","similarity":0.7034508481088982},{"column":"phone_code","similarity":0.6971526730933061}],"states_provinces":[{"column":"country_id","similarity":0.6585897097894581},{"column":"abbreviation","similarity":0.6227531297693802},{"column":"state_id","similarity":0.615041526003746}],"tax_rates":[{"column":"country_id","similarity":0.6476800041509223},{"column":"tax_type","similarity":0.5346619654310693},{"column":"is_active","similarity":0.5310671397615585}],"currencies":[{"column":"symbol","similarity":0.6017932772414536},{"column":"code","similarity":0.5922775211340294},{"column":"exchange_rate","similarity":0.5871891787003841}],"sales_regions":[{"column":"region_id","similarity":0.5979708903249663},{"column":"target_revenue","similarity":0.5885873954148771},{"column":"name","similarity":0.5800101337735474}],"sales_territories":[{"column":"region_id","similarity":0.5886237086003984},{"column":"territory_id","similarity":0.5882437418814783},{"column":"name","similarity":0.5535958855949109}],"cities":[{"column":"state_id","similarity":0.5632563689816771},{"column":"postal_code","similarity":0.5457995889050259}],"departments":[{"column":"budget","similarity":0.5599421293881339},{"column":"department_id","similarity":0.5287387143275804}],"fiscal_periods":[{"column":"period_id","similarity":0.5574490774711056},{"column":"period_number","similarity":0.5426208530973385},{"column":"is_closed","similarity":0.5359946713020163}],"bank_accounts":[{"column":"currency_id","similarity":0.5528259934931027},{"column":"account_number","similarity":0.527840068757793}],"certifications":[{"column":"issuing_body","similarity":0.5492583443931628},{"column":"validity_years","similarity":0.5292809185879692}],"opportunity_stages":[{"column":"is_won","similarity":0.5445577792640248},{"column":"stage_id","similarity":0.5312529758785186},{"column":"is_closed","similarity":0.5279107666014274}],"customers":[{"column":"currency_id","similarity":0.5418522210198313}],"bank_transactions":[{"column":"reconciled","similarity":0.5412872186561721},{"column":"reference","similarity":0.5335321048989391}],"purchase_orders":[{"column":"total","similarity":0.5378236017835311}],"employee_certifications":[{"column":"certificate_number","similarity":0.5358775279065638}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5330783009686003}],"purchase_requisitions":[{"column":"requisition_number","similarity":0.5326439676865584}],"budgets":[{"column":"total_amount","similarity":0.5320906832758429},{"column":"status","similarity":0.5283826109384306}],"sales_orders":[{"column":"total","similarity":0.5319665810732878}],"chart_of_accounts":[{"column":"account_number","similarity":0.5295972929492838}],"units_of_measure":[{"column":"abbreviation","similarity":0.5291537257765798}]},"fused_scores":[{"table":"countries","fused":0.8437445431235756,"table_sim":0.7008865097920517,"col_score":1.0580315931208615},{"table":"states_provinces","fused":0.7453821097932118,"table_sim":0.6734638308582259,"col_score":0.8532595281956905},{"table":"currencies","fused":0.7054758218632456,"table_sim":0.5771716778997639,"col_score":0.8979320378084683},{"table":"tax_rates","fused":0.6715402187292342,"table_sim":0.6116670532927957,"col_score":0.761349966883892},{"table":"sales_regions","fused":0.6604050527132649,"table_sim":0.5687569498363646,"col_score":0.7978772070286153},{"table":"fiscal_periods","fused":0.6455350757452726,"table_sim":0.5354796670765565,"col_score":0.8106181887483467},{"table":"certifications","fused":0.6406572376225477,"table_sim":0.5251628602461479,"col_score":0.8138988036871474},{"table":"cities","fused":0.6357667192092533,"table_sim":0.5643183199830137,"col_score":0.7429393180486128},{"table":"opportunity_stages","fused":0.6330852952668888,"table_sim":0.516133383734989,"col_score":0.8085131625647386},{"table":"bank_accounts","fused":0.618128873368152,"table_sim":0.5493286779600007,"col_score":0.7213291664803789},{"table":"budgets","fused":0.6051213650528678,"table_sim":0.5305192103519173,"col_score":0.7170245971042936},{"table":"sales_territories","fused":0.6040364383952119,"table_sim":0.5947794602061558,"col_score":0.6179219056787962},{"table":"units_of_measure","fused":0.5296938672273204,"table_sim":0.530053961527814,"col_score":0.5291537257765798},{"table":"chart_of_accounts","fused":0.528020150384788,"table_sim":0.5269687220084575,"col_score":0.5295972929492838},{"table":"customers","fused":0.4801218057615174,"table_sim":0.5473386397932745,"col_score":0.3792965547138819}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":8,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"customers","reason":"max_tables"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"max_tables"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_territories","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":24,"total_retrieval_latency_ms":30,"sql_generated":"SELECT c.name AS country_name FROM countries c;","tables_used_in_sql":[],"explain_result":"success","rows_returned":10,"total_latency_ms":337}
{"timestamp":"2026-01-29T20:49:06.804Z","query_id":"576642a0-81c6-4999-bf58-1d89b11c4d05","question":"How many departments are there?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["departments","inventory_levels","warehouse_locations","employees","asset_categories","states_provinces","sales_territories","business_units","sales_regions","goods_receipts","cost_centers","budgets"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"departments","similarity":0.6407681888721862},{"table":"positions","similarity":0.5909863911053447},{"table":"cost_centers","similarity":0.574249226454042},{"table":"inventory_levels","similarity":0.5635818909554858},{"table":"budgets","similarity":0.5602507290061229},{"table":"sales_territories","similarity":0.5569437466660422},{"table":"employees","similarity":0.5540635075766074},{"table":"asset_categories","similarity":0.5524861703308546},{"table":"sales_regions","similarity":0.5484119711938432},{"table":"business_units","similarity":0.5474055608256236},{"table":"warehouse_locations","similarity":0.5405733104094866},{"table":"warehouses","similarity":0.5397302827647444},{"table":"receipt_lines","similarity":0.5366200658119428},{"table":"states_provinces","similarity":0.5358430398633552},{"table":"goods_receipts","similarity":0.5302924907564094}],"column_hits_per_table":{"departments":6,"positions":1,"budgets":1,"purchase_requisitions":1,"cost_centers":1,"employees":3,"warehouse_locations":5,"inventory_levels":5,"business_units":2,"sales_orders":1,"countries":2,"receipt_lines":1,"sales_territories":2,"states_provinces":2,"asset_categories":4,"employee_certifications":1,"goods_receipts":1,"inventory_transactions":1,"product_categories":2,"asset_locations":1,"sales_regions":2,"journal_entries":1,"warehouses":1,"chart_of_accounts":1,"account_types":1,"fixed_assets":1},"top_columns_per_table":{"departments":[{"column":"name","similarity":0.6941972522780406},{"column":"department_id","similarity":0.6602069080482118},{"column":"budget","similarity":0.6469841378823648}],"positions":[{"column":"department_id","similarity":0.6231663015950821}],"budgets":[{"column":"department_id","similarity":0.593281818376156}],"purchase_requisitions":[{"column":"department_id","similarity":0.5925097694857517}],"cost_centers":[{"column":"department_id","similarity":0.5899520016540825}],"employees":[{"column":"department_id","similarity":0.5869672961244217},{"column":"employee_number","similarity":0.5336637347597826},{"column":"phone","similarity":0.5302169880417581}],"warehouse_locations":[{"column":"capacity","similarity":0.5585006436523671},{"column":"aisle","similarity":0.5402403475702542},{"column":"bin","similarity":0.5395965062528575}],"inventory_levels":[{"column":"quantity_available","similarity":0.5536773605505522},{"column":"location_id","similarity":0.5478183684084642},{"column":"warehouse_id","similarity":0.5386657375761456}],"business_units":[{"column":"is_active","similarity":0.5483697953425726},{"column":"name","similarity":0.5312957563157671}],"sales_orders":[{"column":"order_number","similarity":0.5443598297457732}],"countries":[{"column":"name","similarity":0.5423505833277624},{"column":"iso_code","similarity":0.5306770884511268}],"receipt_lines":[{"column":"location_id","similarity":0.541901303657067}],"sales_territories":[{"column":"territory_id","similarity":0.5409487686207964},{"column":"name","similarity":0.5343562590819858}],"states_provinces":[{"column":"abbreviation","similarity":0.5407121012597066},{"column":"name","similarity":0.531882867182094}],"asset_categories":[{"column":"category_id","similarity":0.5392003897260558},{"column":"depreciation_method","similarity":0.5319818505729739},{"column":"name","similarity":0.5291238140761095}],"employee_certifications":[{"column":"certificate_number","similarity":0.5373080593402337}],"goods_receipts":[{"column":"receipt_number","similarity":0.5364792634452933}],"inventory_transactions":[{"column":"location_id","similarity":0.5361046916920993}],"product_categories":[{"column":"is_active","similarity":0.5347372390015604},{"column":"category_id","similarity":0.5276640423111497}],"asset_locations":[{"column":"room","similarity":0.5344524415418452}],"sales_regions":[{"column":"manager_id","similarity":0.5307027431815718},{"column":"name","similarity":0.5263871057906565}],"journal_entries":[{"column":"entry_number","similarity":0.5287182520724618}],"warehouses":[{"column":"is_active","similarity":0.5286972556869094}],"chart_of_accounts":[{"column":"account_number","similarity":0.5279529362943834}],"account_types":[{"column":"category","similarity":0.526499449669073}],"fixed_assets":[{"column":"category_id","similarity":0.5261865346648418}]},"fused_scores":[{"table":"departments","fused":0.7404421837951833,"table_sim":0.6407681888721862,"col_score":0.889953176179679},{"table":"inventory_levels","fused":0.6669469201400264,"table_sim":0.5635818909554858,"col_score":0.8219944639168373},{"table":"warehouse_locations","fused":0.6557923132206898,"table_sim":0.5405733104094866,"col_score":0.8286208174374942},{"table":"employees","fused":0.651946996058229,"table_sim":0.5540635075766074,"col_score":0.7987722287806616},{"table":"asset_categories","fused":0.6495296324944673,"table_sim":0.5524861703308546,"col_score":0.7950948257398862},{"table":"states_provinces","fused":0.612254265827389,"table_sim":0.5358430398633552,"col_score":0.7268711047734395},{"table":"sales_territories","fused":0.5604417794849264,"table_sim":0.5569437466660422,"col_score":0.5656888287132525},{"table":"business_units","fused":0.5563682850755018,"table_sim":0.5474055608256236,"col_score":0.5698123714503193},{"table":"sales_regions","fused":0.5513381456178379,"table_sim":0.5484119711938432,"col_score":0.5557274072538301},{"table":"goods_receipts","fused":0.532767199831963,"table_sim":0.5302924907564094,"col_score":0.5364792634452933},{"table":"positions","fused":0.5290783991098298,"table_sim":0.5909863911053447,"col_score":0.43621641111655746},{"table":"cost_centers","fused":0.5097360963355683,"table_sim":0.574249226454042,"col_score":0.4129664011578577},{"table":"budgets","fused":0.5022693465489974,"table_sim":0.5602507290061229,"col_score":0.4152972728633092},{"table":"receipt_lines","fused":0.4737044045111444,"table_sim":0.5366200658119428,"col_score":0.3793309125599469},{"table":"warehouses","fused":0.47187340125118127,"table_sim":0.5397302827647444,"col_score":0.37008807898083657}],"fk_expansion_candidates":36,"fk_expansion_added":2,"fk_expansion_blocked_count":28,"fk_expansion_blocked":[{"table":"employment_history","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"warehouses","reason":"max_tables"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"countries","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"max_tables"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"cities","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"receipt_lines","reason":"max_tables"},{"table":"products","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":45,"total_retrieval_latency_ms":51,"sql_generated":"SELECT COUNT(*) FROM departments;","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":355}
{"timestamp":"2026-01-29T20:49:07.159Z","query_id":"254e5a8b-7847-4d92-beda-9c8ba15f9d1e","question":"List all units of measure","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["units_of_measure","products","requisition_lines","currencies","sales_orders","adjustment_lines","business_units","sales_regions","asset_categories","states_provinces","countries","inventory_adjustments"],"tables_from_table_retrieval":15,"tables_from_column_only":13,"tables_from_fk_expansion":2,"table_scores":[{"table":"units_of_measure","similarity":0.8089934324181249},{"table":"products","similarity":0.6263866411837252},{"table":"business_units","similarity":0.6082946070315649},{"table":"currencies","similarity":0.5785280842826401},{"table":"sales_regions","similarity":0.5709271404332362},{"table":"sales_territories","similarity":0.5693966691739235},{"table":"countries","similarity":0.5676275319870521},{"table":"asset_categories","similarity":0.5659467183764512},{"table":"states_provinces","similarity":0.5592331745887797},{"table":"requisition_lines","similarity":0.5583095777203371},{"table":"certifications","similarity":0.5559645378048772},{"table":"tax_rates","similarity":0.5510295392649189},{"table":"adjustment_lines","similarity":0.5399153135407744},{"table":"sales_orders","similarity":0.5334992405089671},{"table":"inventory_adjustments","similarity":0.5331747868814581}],"column_hits_per_table":{"units_of_measure":5,"products":3,"business_units":5,"requisition_lines":3,"purchase_orders":3,"sales_orders":3,"currencies":3,"product_suppliers":1,"departments":1,"vendor_invoice_lines":1,"sales_regions":1,"inventory_transactions":1,"order_lines":3,"po_lines":1,"quote_lines":3,"adjustment_lines":3,"inventory_levels":3,"asset_categories":1,"tax_rates":1,"budgets":1,"sales_quotes":1,"transfer_lines":1,"project_milestones":1,"states_provinces":1},"top_columns_per_table":{"units_of_measure":[{"column":"abbreviation","similarity":0.7908596870464625},{"column":"conversion_factor","similarity":0.7888286633130566},{"column":"base_uom_id","similarity":0.7640196738182461}],"products":[{"column":"uom_id","similarity":0.7066301376353167},{"column":"unit_cost","similarity":0.645047938032986},{"column":"weight","similarity":0.5991041081015385}],"business_units":[{"column":"unit_id","similarity":0.641535708551069},{"column":"name","similarity":0.619264219383008},{"column":"parent_unit_id","similarity":0.6183248611809289}],"requisition_lines":[{"column":"estimated_unit_cost","similarity":0.6408702119064383},{"column":"quantity","similarity":0.60563150403585},{"column":"estimated_total","similarity":0.6022013259478313}],"purchase_orders":[{"column":"total","similarity":0.6185750233926293},{"column":"tax_amount","similarity":0.6044881564028687},{"column":"subtotal","similarity":0.5921825679677115}],"sales_orders":[{"column":"total","similarity":0.6151081698617773},{"column":"tax_amount","similarity":0.5989576895110381},{"column":"subtotal","similarity":0.5899469028603763}],"currencies":[{"column":"exchange_rate","similarity":0.6121012209509241},{"column":"code","similarity":0.5831850755185266},{"column":"symbol","similarity":0.5817000993637726}],"product_suppliers":[{"column":"unit_cost","similarity":0.6086576309378499}],"departments":[{"column":"budget","similarity":0.6073768063072543}],"vendor_invoice_lines":[{"column":"unit_cost","similarity":0.6069149029756971}],"sales_regions":[{"column":"target_revenue","similarity":0.6030903855357957}],"inventory_transactions":[{"column":"quantity","similarity":0.6014447625236534}],"order_lines":[{"column":"unit_price","similarity":0.6010852874698508},{"column":"line_total","similarity":0.5898125509820846},{"column":"quantity","similarity":0.5808820575005385}],"po_lines":[{"column":"unit_cost","similarity":0.5994543665297027}],"quote_lines":[{"column":"unit_price","similarity":0.5969998512857845},{"column":"quantity","similarity":0.5845299298536462},{"column":"line_total","similarity":0.5817307536871642}],"adjustment_lines":[{"column":"quantity_before","similarity":0.59599905061019},{"column":"quantity_change","similarity":0.5898155994713205},{"column":"quantity_after","similarity":0.5894162707009223}],"inventory_levels":[{"column":"quantity_available","similarity":0.5953692846871987},{"column":"quantity_reserved","similarity":0.5953692437147827},{"column":"quantity_on_hand","similarity":0.5833133095093345}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.5917112785912468}],"tax_rates":[{"column":"rate","similarity":0.5877911896124333}],"budgets":[{"column":"total_amount","similarity":0.5860142614107526}],"sales_quotes":[{"column":"total","similarity":0.5855133877859668}],"transfer_lines":[{"column":"quantity_transferred","similarity":0.5854636892263618}],"project_milestones":[{"column":"amount","similarity":0.5846729861578354}],"states_provinces":[{"column":"abbreviation","similarity":0.5831025103571312}]},"fused_scores":[{"table":"units_of_measure","fused":0.9595056669320713,"table_sim":0.8089934324181249,"col_score":1.1852740187029909},{"table":"products","fused":0.7536719815437372,"table_sim":0.6263866411837252,"col_score":0.9445999920837552},{"table":"requisition_lines","fused":0.7124601322019475,"table_sim":0.5583095777203371,"col_score":0.9436859639243633},{"table":"currencies","fused":0.708594354053659,"table_sim":0.5785280842826401,"col_score":0.9036937587101874},{"table":"sales_orders","fused":0.6859343501522988,"table_sim":0.5334992405089671,"col_score":0.9145870146172963},{"table":"adjustment_lines","fused":0.6803119282628047,"table_sim":0.5399153135407744,"col_score":0.8909068503458502},{"table":"business_units","fused":0.6313037533268594,"table_sim":0.6082946070315649,"col_score":0.6658174727698011},{"table":"sales_regions","fused":0.5837924384742601,"table_sim":0.5709271404332362,"col_score":0.6030903855357957},{"table":"asset_categories","fused":0.5762525424623695,"table_sim":0.5659467183764512,"col_score":0.5917112785912468},{"table":"states_provinces","fused":0.5687809088961203,"table_sim":0.5592331745887797,"col_score":0.5831025103571312},{"table":"tax_rates","fused":0.5657341994039247,"table_sim":0.5510295392649189,"col_score":0.5877911896124333},{"table":"purchase_orders","fused":0.36832764063762546,"table_sim":0,"col_score":0.9208191015940637},{"table":"order_lines","fused":0.3583966251843573,"table_sim":0,"col_score":0.8959915629608931},{"table":"inventory_levels","fused":0.3572215626178361,"table_sim":0,"col_score":0.8930539065445902},{"table":"quote_lines","fused":0.35570592648504307,"table_sim":0,"col_score":0.8892648162126076}],"fk_expansion_candidates":23,"fk_expansion_added":2,"fk_expansion_blocked_count":16,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"bank_accounts","reason":"no_evidence"},{"table":"cities","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"inventory_levels","reason":"max_tables"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"order_lines","reason":"max_tables"},{"table":"po_lines","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"product_suppliers","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"quote_lines","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_territories","reason":"max_tables"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":24,"total_retrieval_latency_ms":30,"sql_generated":"SELECT uom.name AS unit_of_measure_name FROM units_of_measure uom;","tables_used_in_sql":[],"explain_result":"success","rows_returned":11,"total_latency_ms":455}
{"timestamp":"2026-01-29T20:49:07.615Z","query_id":"104e7996-add8-4b06-b1d5-0e38a0dbf09f","question":"What fiscal years exist in the system?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["fiscal_years","fiscal_periods","budgets","depreciation_schedules","depreciation_entries","budget_lines","project_budgets","project_expenses","departments","project_milestones","journal_entries","projects"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"fiscal_years","similarity":0.7923960498118316},{"table":"fiscal_periods","similarity":0.7616670856526071},{"table":"budgets","similarity":0.6911637589323553},{"table":"journal_entries","similarity":0.6269724979465695},{"table":"budget_lines","similarity":0.6218203134963756},{"table":"depreciation_entries","similarity":0.6167782937248956},{"table":"depreciation_schedules","similarity":0.5985836737050324},{"table":"tax_rates","similarity":0.5716127675571235},{"table":"project_budgets","similarity":0.5656182034505703},{"table":"departments","similarity":0.5523947282192829},{"table":"opportunity_stages","similarity":0.5504537485994739},{"table":"sales_regions","similarity":0.5448968436545046},{"table":"project_expenses","similarity":0.5436618291443818},{"table":"project_milestones","similarity":0.5414688649545092},{"table":"timesheet_entries","similarity":0.5409769768138163}],"column_hits_per_table":{"fiscal_years":5,"fiscal_periods":7,"budgets":7,"budget_lines":3,"depreciation_entries":3,"journal_entries":1,"depreciation_schedules":7,"departments":1,"project_expenses":2,"project_budgets":5,"tax_rates":1,"goods_receipts":1,"projects":1,"project_milestones":1,"timesheet_entries":1,"certifications":1,"performance_reviews":1,"asset_categories":1,"opportunity_stages":1},"top_columns_per_table":{"fiscal_years":[{"column":"year","similarity":0.79289185497887},{"column":"start_date","similarity":0.7915481870907012},{"column":"is_closed","similarity":0.7687751840462032}],"fiscal_periods":[{"column":"start_date","similarity":0.7659921609127918},{"column":"period_number","similarity":0.7503599279176923},{"column":"fiscal_year_id","similarity":0.7427677986256532}],"budgets":[{"column":"fiscal_year_id","similarity":0.7119377164190824},{"column":"status","similarity":0.6301145472980343},{"column":"total_amount","similarity":0.6173246359192148}],"budget_lines":[{"column":"period_id","similarity":0.6801393090386698},{"column":"amount","similarity":0.5964392433040447},{"column":"budget_id","similarity":0.5771887798868078}],"depreciation_entries":[{"column":"period_id","similarity":0.6644590594465214},{"column":"entry_date","similarity":0.6182044744233723},{"column":"accumulated_depreciation","similarity":0.591719344216716}],"journal_entries":[{"column":"period_id","similarity":0.6584803744495903}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.6374273471660927},{"column":"start_date","similarity":0.6327992496100886},{"column":"useful_life_months","similarity":0.6309634564637141}],"departments":[{"column":"budget","similarity":0.6251109583075001}],"project_expenses":[{"column":"expense_date","similarity":0.6152948115721372},{"column":"is_billable","similarity":0.6022943783818646}],"project_budgets":[{"column":"category","similarity":0.6108356164669405},{"column":"actual_amount","similarity":0.604739033656996},{"column":"planned_amount","similarity":0.5906958847025185}],"tax_rates":[{"column":"is_active","similarity":0.6102719456894563}],"goods_receipts":[{"column":"receipt_date","similarity":0.6033126792490972}],"projects":[{"column":"budget","similarity":0.5988151518250451}],"project_milestones":[{"column":"is_billable","similarity":0.5985840177634407}],"timesheet_entries":[{"column":"is_billable","similarity":0.5976425797634352}],"certifications":[{"column":"validity_years","similarity":0.5951280377775735}],"performance_reviews":[{"column":"review_period_start","similarity":0.5797933929886745}],"asset_categories":[{"column":"useful_life_years","similarity":0.5756856657958654}],"opportunity_stages":[{"column":"is_closed","similarity":0.5741087121255803}]},"fused_scores":[{"table":"fiscal_years","fused":0.9509040092967873,"table_sim":0.7923960498118316,"col_score":1.1886659485242206},{"table":"fiscal_periods","fused":0.9134691013402194,"table_sim":0.7616670856526071,"col_score":1.141172124871638},{"table":"budgets","fused":0.7612993900257706,"table_sim":0.6911637589323553,"col_score":0.8665028366658937},{"table":"depreciation_schedules","fused":0.7406809930114742,"table_sim":0.5985836737050324,"col_score":0.953826971971137},{"table":"depreciation_entries","fused":0.7356926348476295,"table_sim":0.6167782937248956,"col_score":0.9140641465317303},{"table":"budget_lines","fused":0.706887388684857,"table_sim":0.6218203134963756,"col_score":0.8344880014675792},{"table":"project_budgets","fused":0.7046529753885176,"table_sim":0.5656182034505703,"col_score":0.9132051332954385},{"table":"project_expenses","fused":0.6927738977918569,"table_sim":0.5436618291443818,"col_score":0.9164420007630695},{"table":"departments","fused":0.5814812202545698,"table_sim":0.5523947282192829,"col_score":0.6251109583075001},{"table":"project_milestones","fused":0.5643149260780818,"table_sim":0.5414688649545092,"col_score":0.5985840177634407},{"table":"timesheet_entries","fused":0.5636432179936639,"table_sim":0.5409769768138163,"col_score":0.5976425797634352},{"table":"journal_entries","fused":0.560558003613827,"table_sim":0.6269724979465695,"col_score":0.46093626211471317},{"table":"opportunity_stages","fused":0.5599157340099165,"table_sim":0.5504537485994739,"col_score":0.5741087121255803},{"table":"tax_rates","fused":0.5138438053273219,"table_sim":0.5716127675571235,"col_score":0.4271903619826194},{"table":"sales_regions","fused":0.32693810619270275,"table_sim":0.5448968436545046,"col_score":0}],"fk_expansion_candidates":8,"fk_expansion_added":2,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":42,"total_retrieval_latency_ms":48,"sql_generated":"SELECT DISTINCT fy.fiscal_year_id FROM fiscal_years AS fy LIMIT 1000;","tables_used_in_sql":[],"explain_result":"success","sqlstate":"42703","error_message":"column fy.fiscal_year does not exist","autocorrect_attempted":true,"autocorrect_success":true,"autocorrect_correction":"Replaced 'fiscal_year' with 'fiscal_year_id' (prefix, score: 0.85)","autocorrect_candidates":4,"rows_returned":4,"total_latency_ms":544}
{"timestamp":"2026-01-29T20:49:08.159Z","query_id":"2afe90d8-ff42-4934-9211-b878f015f262","question":"What are the different asset categories?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["asset_categories","fixed_assets","asset_locations","account_types","asset_transfers","asset_maintenance","benefit_types","product_categories","depreciation_entries","products","chart_of_accounts","depreciation_schedules"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"asset_categories","similarity":0.8168827711422647},{"table":"fixed_assets","similarity":0.6620037919617541},{"table":"asset_locations","similarity":0.6390829860060242},{"table":"account_types","similarity":0.6334397842726383},{"table":"product_categories","similarity":0.622177487707741},{"table":"asset_maintenance","similarity":0.621270551657517},{"table":"benefit_types","similarity":0.5903668937249158},{"table":"asset_transfers","similarity":0.5862689042988987},{"table":"depreciation_entries","similarity":0.5805433634197894},{"table":"products","similarity":0.5538274728539676},{"table":"depreciation_schedules","similarity":0.552160929389354},{"table":"chart_of_accounts","similarity":0.5427108945847197},{"table":"bank_accounts","similarity":0.5321134297281863},{"table":"countries","similarity":0.5281213098174355},{"table":"maintenance_types","similarity":0.5272099691279456}],"column_hits_per_table":{"asset_categories":5,"fixed_assets":9,"account_types":4,"asset_locations":6,"product_categories":5,"asset_transfers":6,"asset_maintenance":6,"project_budgets":1,"project_expenses":1,"depreciation_entries":1,"benefit_types":4,"products":1,"inventory_transactions":1},"top_columns_per_table":{"asset_categories":[{"column":"name","similarity":0.7875780707525062},{"column":"depreciation_method","similarity":0.7603448714847105},{"column":"category_id","similarity":0.758482100045761}],"fixed_assets":[{"column":"category_id","similarity":0.7014273982200495},{"column":"asset_tag","similarity":0.6626698663454819},{"column":"asset_id","similarity":0.6413881206539997}],"account_types":[{"column":"category","similarity":0.6881378304861365},{"column":"name","similarity":0.5992168172839945},{"column":"normal_balance","similarity":0.5947116865094776}],"asset_locations":[{"column":"building","similarity":0.6559618510281601},{"column":"description","similarity":0.6470926594735155},{"column":"floor","similarity":0.6470899039825275}],"product_categories":[{"column":"name","similarity":0.652576873610378},{"column":"description","similarity":0.6503788706671084},{"column":"category_id","similarity":0.6420597581466748}],"asset_transfers":[{"column":"reason","similarity":0.6473230015974661},{"column":"asset_id","similarity":0.6282032799433002},{"column":"transfer_id","similarity":0.6154246196195988}],"asset_maintenance":[{"column":"status","similarity":0.6334546005541394},{"column":"asset_id","similarity":0.6105732245848465},{"column":"maintenance_type_id","similarity":0.6070052571550042}],"project_budgets":[{"column":"category","similarity":0.6288554954539255}],"project_expenses":[{"column":"category","similarity":0.626992700689606}],"depreciation_entries":[{"column":"asset_id","similarity":0.6187898293393472}],"benefit_types":[{"column":"name","similarity":0.5974204688811928},{"column":"is_active","similarity":0.5896744133334022},{"column":"description","similarity":0.5883422456276791}],"products":[{"column":"category_id","similarity":0.5858403992443696}],"inventory_transactions":[{"column":"transaction_type","similarity":0.5816690816812632}]},"fused_scores":[{"table":"asset_categories","fused":0.9416071891617808,"table_sim":0.8168827711422647,"col_score":1.1286938161910547},{"table":"fixed_assets","fused":0.7846998038830493,"table_sim":0.6620037919617541,"col_score":0.9687438217649922},{"table":"asset_locations","fused":0.7752525128113841,"table_sim":0.6390829860060242,"col_score":0.9795068030194238},{"table":"account_types","fused":0.7742613400599331,"table_sim":0.6334397842726383,"col_score":0.9854936737408753},{"table":"asset_transfers","fused":0.7270812848332002,"table_sim":0.5862689042988987,"col_score":0.9382998556346527},{"table":"asset_maintenance","fused":0.6976709678451112,"table_sim":0.621270551657517,"col_score":0.8122715921265024},{"table":"benefit_types","fused":0.6707121036646139,"table_sim":0.5903668937249158,"col_score":0.7912299185741609},{"table":"product_categories","fused":0.6470810591289455,"table_sim":0.622177487707741,"col_score":0.6844364162607525},{"table":"depreciation_entries","fused":0.5215871702668908,"table_sim":0.5805433634197894,"col_score":0.43315288053754303},{"table":"products","fused":0.4963317955008041,"table_sim":0.5538274728539676,"col_score":0.4100882794710587},{"table":"depreciation_schedules","fused":0.3312965576336124,"table_sim":0.552160929389354,"col_score":0},{"table":"chart_of_accounts","fused":0.3256265367508318,"table_sim":0.5427108945847197,"col_score":0},{"table":"bank_accounts","fused":0.31926805783691176,"table_sim":0.5321134297281863,"col_score":0},{"table":"countries","fused":0.3168727858904613,"table_sim":0.5281213098174355,"col_score":0},{"table":"maintenance_types","fused":0.3163259814767673,"table_sim":0.5272099691279456,"col_score":0}],"fk_expansion_candidates":21,"fk_expansion_added":2,"fk_expansion_blocked_count":17,"fk_expansion_blocked":[{"table":"adjustment_lines","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"inventory_transactions","reason":"max_tables"},{"table":"journal_entries","reason":"no_evidence"},{"table":"maintenance_types","reason":"max_tables"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"product_suppliers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":50,"total_retrieval_latency_ms":55,"sql_generated":"SELECT DISTINCT ac.name AS AssetCategory FROM asset_categories ac;","tables_used_in_sql":[],"explain_result":"success","rows_returned":7,"total_latency_ms":482}
{"timestamp":"2026-01-29T20:49:08.641Z","query_id":"e3ad8c86-d293-4b69-a5dc-e15841ad7bde","question":"Find employees who have been with the company for more than 5 years and earn above $100,000","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_salaries","employees","employee_certifications","employee_benefits","employment_history","project_expenses","employee_training","positions","sales_opportunities","sales_regions","budgets","customers"],"tables_from_table_retrieval":15,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_salaries","similarity":0.6596309142898193},{"table":"employees","similarity":0.6117387326317625},{"table":"employee_certifications","similarity":0.6063101517291073},{"table":"employment_history","similarity":0.6006272540139823},{"table":"employee_benefits","similarity":0.588385638564704},{"table":"sales_quotes","similarity":0.5847288131119626},{"table":"project_expenses","similarity":0.5811440306100932},{"table":"positions","similarity":0.5783549710101321},{"table":"employee_training","similarity":0.5764842814424564},{"table":"sales_regions","similarity":0.5670236882958988},{"table":"sales_opportunities","similarity":0.5660664544581816},{"table":"timesheets","similarity":0.5640662437739868},{"table":"budgets","similarity":0.5625706029614268},{"table":"purchase_requisitions","similarity":0.5609922414021342},{"table":"performance_reviews","similarity":0.5599055606275851}],"column_hits_per_table":{"employees":14,"employee_salaries":7,"positions":1,"employee_benefits":4,"employee_training":3,"employee_certifications":4,"project_expenses":2,"certifications":1,"sales_opportunities":1,"employment_history":4,"departments":1,"sales_territories":1,"sales_regions":1,"fixed_assets":1,"performance_reviews":1,"business_units":1,"asset_transfers":1,"customers":1,"asset_maintenance":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.6754855997136985},{"column":"employee_number","similarity":0.6230502501184026},{"column":"last_name","similarity":0.6053409230190048}],"employee_salaries":[{"column":"amount","similarity":0.6329359756226043},{"column":"approved_by","similarity":0.6321375616232344},{"column":"change_reason","similarity":0.6316069528404761}],"positions":[{"column":"max_salary","similarity":0.6142693265161863}],"employee_benefits":[{"column":"employee_id","similarity":0.6006536688890698},{"column":"coverage_level","similarity":0.5965968421979039},{"column":"end_date","similarity":0.586557123942836}],"employee_training":[{"column":"score","similarity":0.6001910014859368},{"column":"status","similarity":0.5788237982645894},{"column":"employee_id","similarity":0.5766309092930753}],"employee_certifications":[{"column":"employee_id","similarity":0.5974403532583366},{"column":"certificate_number","similarity":0.5892450502925397},{"column":"expiry_date","similarity":0.578236416981715}],"project_expenses":[{"column":"employee_id","similarity":0.5944299421640671},{"column":"approved_by","similarity":0.5909885243295638}],"certifications":[{"column":"validity_years","similarity":0.589664761360241}],"sales_opportunities":[{"column":"owner_id","similarity":0.5895000558969312}],"employment_history":[{"column":"company_name","similarity":0.5883478253463156},{"column":"employee_id","similarity":0.5824689633275649},{"column":"reason_for_leaving","similarity":0.5723476282964999}],"departments":[{"column":"manager_id","similarity":0.5793473377308171}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5787575753820128}],"sales_regions":[{"column":"manager_id","similarity":0.5775817103737491}],"fixed_assets":[{"column":"assigned_to","similarity":0.5758011214737297}],"performance_reviews":[{"column":"employee_id","similarity":0.5751238749562096}],"business_units":[{"column":"manager_id","similarity":0.5736554784472759}],"asset_transfers":[{"column":"from_employee_id","similarity":0.5735387092093984}],"customers":[{"column":"credit_limit","similarity":0.5730323963896138}],"asset_maintenance":[{"column":"performed_by","similarity":0.5729277114702274}]},"fused_scores":[{"table":"employee_salaries","fused":0.7753804511475801,"table_sim":0.6596309142898193,"col_score":0.9490047564342214},{"table":"employees","fused":0.7618475294882174,"table_sim":0.6117387326317625,"col_score":0.9870107247728999},{"table":"employee_certifications","fused":0.7151313945508233,"table_sim":0.6063101517291073,"col_score":0.8783632587833972},{"table":"employee_benefits","fused":0.7089815448065512,"table_sim":0.588385638564704,"col_score":0.8898754041693219},{"table":"employment_history","fused":0.703710893427009,"table_sim":0.6006272540139823,"col_score":0.8583363525465489},{"table":"project_expenses","fused":0.6683020200008508,"table_sim":0.5811440306100932,"col_score":0.7990390040869872},{"table":"employee_training","fused":0.6670023012168911,"table_sim":0.5764842814424564,"col_score":0.8027793308785431},{"table":"positions","fused":0.5927207132125538,"table_sim":0.5783549710101321,"col_score":0.6142693265161863},{"table":"sales_opportunities","fused":0.5046998883260497,"table_sim":0.5660664544581816,"col_score":0.4126500391278518},{"table":"sales_regions","fused":0.501937091882189,"table_sim":0.5670236882958988,"col_score":0.40430719726162434},{"table":"performance_reviews","fused":0.49697802136428976,"table_sim":0.5599055606275851,"col_score":0.40258671246934674},{"table":"sales_quotes","fused":0.35083728786717755,"table_sim":0.5847288131119626,"col_score":0},{"table":"timesheets","fused":0.3384397462643921,"table_sim":0.5640662437739868,"col_score":0},{"table":"budgets","fused":0.3375423617768561,"table_sim":0.5625706029614268,"col_score":0},{"table":"purchase_requisitions","fused":0.3365953448412805,"table_sim":0.5609922414021342,"col_score":0}],"fk_expansion_candidates":31,"fk_expansion_added":2,"fk_expansion_blocked_count":22,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"max_tables"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"max_tables"},{"table":"sales_quotes","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"max_tables"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":28,"total_retrieval_latency_ms":34,"sql_generated":"SELECT e.employee_id, e.first_name, e.last_name, s.salary FROM employees e JOIN employee_salaries s ON e.employee_id = s.employee_id WHERE e.hire_date <= (CURRENT_DATE - INTERVAL '5 years') AND s.amount > 100000;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column s.salary does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":4,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":3210,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column s.salary does not exist"}
{"timestamp":"2026-01-29T20:49:11.851Z","query_id":"98a63a66-ace4-4212-b2cf-b1abf8afc124","question":"List employees and their managers' names","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employees","employee_salaries","departments","business_units","employment_history","warehouses","projects","employee_training","sales_territories","sales_regions","positions","employee_certifications"],"tables_from_table_retrieval":15,"tables_from_column_only":10,"tables_from_fk_expansion":2,"table_scores":[{"table":"employees","similarity":0.6739271388388655},{"table":"departments","similarity":0.657958333696202},{"table":"sales_regions","similarity":0.6410429290818445},{"table":"business_units","similarity":0.629302299806744},{"table":"employee_salaries","similarity":0.6291178543786463},{"table":"employment_history","similarity":0.628562523709621},{"table":"employee_training","similarity":0.6078450125905032},{"table":"projects","similarity":0.5966184746740394},{"table":"warehouses","similarity":0.595741492988575},{"table":"task_assignments","similarity":0.5956561215476265},{"table":"employee_certifications","similarity":0.5943810266860687},{"table":"sales_territories","similarity":0.5939624260861468},{"table":"timesheets","similarity":0.593138331963305},{"table":"positions","similarity":0.5879685656690451},{"table":"project_expenses","similarity":0.5830402792835349}],"column_hits_per_table":{"employees":17,"departments":2,"business_units":2,"employment_history":2,"warehouses":2,"customers":1,"sales_regions":1,"projects":2,"vendors":1,"sales_territories":2,"task_assignments":1,"certifications":1,"budgets":1,"employee_salaries":4,"timesheets":1,"currencies":1,"project_expenses":1,"stock_transfers":1,"employee_training":2,"employee_certifications":1,"vendor_contacts":1,"products":1,"customer_contacts":1,"project_milestones":1},"top_columns_per_table":{"employees":[{"column":"first_name","similarity":0.7714769709454768},{"column":"last_name","similarity":0.7704055105478298},{"column":"manager_id","similarity":0.7110305691223358}],"departments":[{"column":"manager_id","similarity":0.6915417829685028},{"column":"name","similarity":0.6751242206298983}],"business_units":[{"column":"manager_id","similarity":0.685040091181477},{"column":"name","similarity":0.6765828714174584}],"employment_history":[{"column":"company_name","similarity":0.6822662804075768},{"column":"employee_id","similarity":0.6295340898954124}],"warehouses":[{"column":"manager_id","similarity":0.6735483038590064},{"column":"name","similarity":0.6503195755374178}],"customers":[{"column":"name","similarity":0.6648112452254289}],"sales_regions":[{"column":"manager_id","similarity":0.6593627275777447}],"projects":[{"column":"project_manager_id","similarity":0.6562692578689777},{"column":"name","similarity":0.6475203407196208}],"vendors":[{"column":"name","similarity":0.648693073851878}],"sales_territories":[{"column":"name","similarity":0.6439679107921524},{"column":"assigned_rep_id","similarity":0.6207235426752916}],"task_assignments":[{"column":"employee_id","similarity":0.6386435460734429}],"certifications":[{"column":"name","similarity":0.6377896783299257}],"budgets":[{"column":"name","similarity":0.6363211543819098}],"employee_salaries":[{"column":"end_date","similarity":0.6318747182049583},{"column":"employee_id","similarity":0.6248337519632055},{"column":"effective_date","similarity":0.621871367825837}],"timesheets":[{"column":"employee_id","similarity":0.6280174573982042}],"currencies":[{"column":"name","similarity":0.6277037825883155}],"project_expenses":[{"column":"employee_id","similarity":0.6275598151007045}],"stock_transfers":[{"column":"created_by","similarity":0.6244881174510047}],"employee_training":[{"column":"employee_id","similarity":0.6237522782008402},{"column":"status","similarity":0.6219333593573583}],"employee_certifications":[{"column":"employee_id","similarity":0.6229468191069418}],"vendor_contacts":[{"column":"last_name","similarity":0.6219521334137906}],"products":[{"column":"name","similarity":0.6178261993575316}],"customer_contacts":[{"column":"last_name","similarity":0.6163147653808325}],"project_milestones":[{"column":"name","similarity":0.6158954282593042}]},"fused_scores":[{"table":"employees","fused":0.8285238994112679,"table_sim":0.6739271388388655,"col_score":1.0604190402698717},{"table":"employee_salaries","fused":0.7545948734743385,"table_sim":0.6291178543786463,"col_score":0.9428104021178768},{"table":"departments","fused":0.6829240903370877,"table_sim":0.657958333696202,"col_score":0.7203727252984162},{"table":"business_units","fused":0.6641142074133042,"table_sim":0.629302299806744,"col_score":0.7163320688231443},{"table":"employment_history","fused":0.6563068453252519,"table_sim":0.628562523709621,"col_score":0.697923327748698},{"table":"warehouses","fused":0.6370831614489053,"table_sim":0.595741492988575,"col_score":0.6990956641394007},{"table":"projects","fused":0.6323793247084843,"table_sim":0.5966184746740394,"col_score":0.6860205997601516},{"table":"employee_training","fused":0.6264283157605673,"table_sim":0.6078450125905032,"col_score":0.6543032705156635},{"table":"sales_territories","fused":0.6235897666480316,"table_sim":0.5939624260861468,"col_score":0.6680307774908587},{"table":"sales_regions","fused":0.5692473211708752,"table_sim":0.6410429290818445,"col_score":0.46155390930442125},{"table":"task_assignments","fused":0.5362138658291399,"table_sim":0.5956561215476265,"col_score":0.44705048225141},{"table":"timesheets","fused":0.5317278872494802,"table_sim":0.593138331963305,"col_score":0.43961222017874296},{"table":"employee_certifications","fused":0.531053725361585,"table_sim":0.5943810266860687,"col_score":0.43606277337485927},{"table":"project_expenses","fused":0.5255409157983182,"table_sim":0.5830402792835349,"col_score":0.43929187057049307},{"table":"positions","fused":0.352781139401427,"table_sim":0.5879685656690451,"col_score":0}],"fk_expansion_candidates":36,"fk_expansion_added":2,"fk_expansion_blocked_count":31,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"project_budgets","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"max_tables"},{"table":"project_milestones","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":38,"total_retrieval_latency_ms":44,"sql_generated":"SELECT e.employee_id AS employee_id, e.first_name || ' ' || e.last_name AS employee_name, m.first_name || ' ' || m.last_name AS manager_name FROM employees e INNER JOIN employees m ON e.manager_id = m.employee_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":499,"total_latency_ms":1091}
{"timestamp":"2026-01-29T20:49:12.943Z","query_id":"621d4d0f-af05-4cd7-ac64-614c42e82607","question":"Which employees have pending leave requests?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["leave_requests","employees","leave_types","purchase_requisitions","employee_salaries","employee_training","employment_history","timesheets","employee_certifications","goods_receipts","sales_territories","positions"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"leave_requests","similarity":0.7600790941142384},{"table":"employees","similarity":0.6318821970092333},{"table":"leave_types","similarity":0.6243053165161109},{"table":"employment_history","similarity":0.6232974261189369},{"table":"purchase_requisitions","similarity":0.5939119628114023},{"table":"timesheets","similarity":0.5786251968824939},{"table":"employee_training","similarity":0.5750839227740789},{"table":"employee_certifications","similarity":0.5743962867871555},{"table":"goods_receipts","similarity":0.5718610848354152},{"table":"task_assignments","similarity":0.5706152949131827},{"table":"sales_territories","similarity":0.5614078081373084},{"table":"positions","similarity":0.5597262073340161},{"table":"projects","similarity":0.5534503002083008},{"table":"sales_opportunities","similarity":0.5512834500880964},{"table":"employee_salaries","similarity":0.5491897540036026}],"column_hits_per_table":{"leave_requests":10,"employee_training":2,"employees":12,"employment_history":1,"timesheets":2,"leave_types":3,"sales_orders":1,"purchase_requisitions":2,"vendor_invoices":1,"project_tasks":1,"asset_maintenance":1,"employee_benefits":1,"projects":1,"purchase_orders":1,"stock_transfers":1,"sales_quotes":1,"project_expenses":1,"fixed_assets":1,"employee_certifications":1,"task_assignments":1,"goods_receipts":1,"employee_salaries":2,"sales_territories":1,"project_phases":1},"top_columns_per_table":{"leave_requests":[{"column":"status","similarity":0.7848719368682063},{"column":"employee_id","similarity":0.7576636579687751},{"column":"days_requested","similarity":0.7398783151100068}],"employee_training":[{"column":"status","similarity":0.6651923522652087},{"column":"scheduled_date","similarity":0.5942999900390922}],"employees":[{"column":"termination_date","similarity":0.6457696051473769},{"column":"email","similarity":0.6346475885363552},{"column":"last_name","similarity":0.6289095722388175}],"employment_history":[{"column":"reason_for_leaving","similarity":0.6361385453486292}],"timesheets":[{"column":"status","similarity":0.6339196627014697},{"column":"employee_id","similarity":0.5914292311259354}],"leave_types":[{"column":"is_paid","similarity":0.6210462067937735},{"column":"days_allowed","similarity":0.6179268957404154},{"column":"requires_approval","similarity":0.6015299391142729}],"sales_orders":[{"column":"status","similarity":0.6210060419850735}],"purchase_requisitions":[{"column":"status","similarity":0.6193300474461643},{"column":"requested_by","similarity":0.6053096443813046}],"vendor_invoices":[{"column":"status","similarity":0.6155310542664321}],"project_tasks":[{"column":"status","similarity":0.6119107629795923}],"asset_maintenance":[{"column":"status","similarity":0.6085158795953126}],"employee_benefits":[{"column":"end_date","similarity":0.6074126091020398}],"projects":[{"column":"status","similarity":0.6062843845135029}],"purchase_orders":[{"column":"status","similarity":0.6056490490407618}],"stock_transfers":[{"column":"status","similarity":0.6050219711376368}],"sales_quotes":[{"column":"status","similarity":0.6049360812469786}],"project_expenses":[{"column":"status","similarity":0.6029918860858492}],"fixed_assets":[{"column":"status","similarity":0.6000566812603433}],"employee_certifications":[{"column":"expiry_date","similarity":0.5947566615407769}],"task_assignments":[{"column":"employee_id","similarity":0.5916098874816911}],"goods_receipts":[{"column":"received_by","similarity":0.5906067416911127}],"employee_salaries":[{"column":"change_reason","similarity":0.5843630753678524},{"column":"end_date","similarity":0.579293919815319}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5811710599296118}],"project_phases":[{"column":"status","similarity":0.5807882110700618}]},"fused_scores":[{"table":"leave_requests","fused":0.8980468193115467,"table_sim":0.7600790941142384,"col_score":1.1049984071075094},{"table":"employees","fused":0.7643666779717617,"table_sim":0.6318821970092333,"col_score":0.9630933994155545},{"table":"leave_types","fused":0.7420599360286873,"table_sim":0.6243053165161109,"col_score":0.9186918652975518},{"table":"purchase_requisitions","fused":0.6851772420818263,"table_sim":0.5939119628114023,"col_score":0.8220751609874621},{"table":"employee_salaries","fused":0.6791178665123663,"table_sim":0.5491897540036026,"col_score":0.8740100352755118},{"table":"employee_training","fused":0.6758972789972135,"table_sim":0.5750839227740789,"col_score":0.8271173133319152},{"table":"employment_history","fused":0.6284338738108138,"table_sim":0.6232974261189369,"col_score":0.6361385453486292},{"table":"timesheets","fused":0.6074727160435388,"table_sim":0.5786251968824939,"col_score":0.6507439947851061},{"table":"employee_certifications","fused":0.582540436688604,"table_sim":0.5743962867871555,"col_score":0.5947566615407769},{"table":"goods_receipts","fused":0.5793593475776941,"table_sim":0.5718610848354152,"col_score":0.5906067416911127},{"table":"task_assignments","fused":0.5080199454427832,"table_sim":0.5706152949131827,"col_score":0.41412692123718375},{"table":"projects","fused":0.5018298077887613,"table_sim":0.5534503002083008,"col_score":0.42439906915945197},{"table":"sales_territories","fused":0.4995725816626763,"table_sim":0.5614078081373084,"col_score":0.40681974195072823},{"table":"positions","fused":0.33583572440040965,"table_sim":0.5597262073340161,"col_score":0},{"table":"sales_opportunities","fused":0.33077007005285786,"table_sim":0.5512834500880964,"col_score":0}],"fk_expansion_candidates":32,"fk_expansion_added":2,"fk_expansion_blocked_count":26,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"projects","reason":"max_tables"},{"table":"task_assignments","reason":"max_tables"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":28,"total_retrieval_latency_ms":34,"sql_generated":"SELECT DISTINCT e.employee_id, e.first_name || ' ' || e.last_name AS employee_full_name FROM employees e JOIN leave_requests lr ON e.employee_id = lr.employee_id WHERE lr.status = 'pending';","tables_used_in_sql":[],"explain_result":"success","rows_returned":194,"total_latency_ms":1019}
{"timestamp":"2026-01-29T20:49:13.963Z","query_id":"16f64ced-c100-4ee5-a7db-9a4e89c8e45d","question":"Show the number of employees per position title","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["positions","employees","employee_salaries","employee_certifications","employment_history","employee_benefits","employee_training","sales_opportunities","sales_territories","sales_regions","departments","business_units"],"tables_from_table_retrieval":15,"tables_from_column_only":4,"tables_from_fk_expansion":2,"table_scores":[{"table":"positions","similarity":0.6979534676247563},{"table":"employee_salaries","similarity":0.659392658582788},{"table":"employees","similarity":0.659318915501233},{"table":"sales_territories","similarity":0.6544391487399293},{"table":"sales_regions","similarity":0.6428263414246281},{"table":"employee_benefits","similarity":0.6167866650759656},{"table":"employee_certifications","similarity":0.6148750377920306},{"table":"employee_training","similarity":0.6083683642118161},{"table":"task_assignments","similarity":0.6071839885197421},{"table":"employment_history","similarity":0.6045972357575983},{"table":"project_resources","similarity":0.6042586180893913},{"table":"departments","similarity":0.6032642584988918},{"table":"business_units","similarity":0.5965911322333207},{"table":"sales_opportunities","similarity":0.5891548833734075},{"table":"certifications","similarity":0.5841777359403402}],"column_hits_per_table":{"employees":15,"positions":6,"employee_salaries":7,"sales_territories":3,"employment_history":2,"employee_certifications":2,"sales_regions":1,"departments":1,"sales_opportunities":2,"customer_contacts":1,"employee_benefits":2,"vendor_contacts":1,"task_assignments":1,"employee_training":2,"business_units":1,"projects":1,"project_resources":1,"sales_orders":1},"top_columns_per_table":{"employees":[{"column":"employee_number","similarity":0.7303595134380423},{"column":"position_id","similarity":0.7050286662527804},{"column":"phone","similarity":0.6945610240790868}],"positions":[{"column":"title","similarity":0.7249937097183676},{"column":"min_salary","similarity":0.675429773675748},{"column":"max_salary","similarity":0.6680713515907781}],"employee_salaries":[{"column":"amount","similarity":0.7000523422305518},{"column":"approved_by","similarity":0.653674871570882},{"column":"effective_date","similarity":0.6502266185759468}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.658183355036331},{"column":"name","similarity":0.6164997394497986},{"column":"territory_id","similarity":0.6102010119398675}],"employment_history":[{"column":"position","similarity":0.6510937516674971},{"column":"company_name","similarity":0.6218123772540076}],"employee_certifications":[{"column":"certificate_number","similarity":0.650658466369623},{"column":"employee_id","similarity":0.6302169951877866}],"sales_regions":[{"column":"manager_id","similarity":0.6438605230157461}],"departments":[{"column":"manager_id","similarity":0.6436672453371529}],"sales_opportunities":[{"column":"owner_id","similarity":0.6408450104060457},{"column":"amount","similarity":0.6062432822580913}],"customer_contacts":[{"column":"title","similarity":0.6381955329460534}],"employee_benefits":[{"column":"coverage_level","similarity":0.6345844389817726},{"column":"employee_id","similarity":0.6161187768667185}],"vendor_contacts":[{"column":"title","similarity":0.6324837364697313}],"task_assignments":[{"column":"employee_id","similarity":0.6251972033262657}],"employee_training":[{"column":"status","similarity":0.6240127994623852},{"column":"score","similarity":0.6193167530282054}],"business_units":[{"column":"manager_id","similarity":0.6238411740584191}],"projects":[{"column":"project_manager_id","similarity":0.6212958877659998}],"project_resources":[{"column":"employee_id","similarity":0.6133242706799946}],"sales_orders":[{"column":"sales_rep_id","similarity":0.6111916781312563}]},"fused_scores":[{"table":"positions","fused":0.8438555191973505,"table_sim":0.6979534676247563,"col_score":1.0627085965562415},{"table":"employees","fused":0.8266473594917741,"table_sim":0.659318915501233,"col_score":1.0776400254775858},{"table":"employee_salaries","fused":0.8063915063560698,"table_sim":0.659392658582788,"col_score":1.0268897780159927},{"table":"employee_certifications","fused":0.7174187885493577,"table_sim":0.6148750377920306,"col_score":0.8712344146853483},{"table":"employment_history","fused":0.7102495749371189,"table_sim":0.6045972357575983,"col_score":0.8687280837063998},{"table":"employee_benefits","fused":0.710162403399629,"table_sim":0.6167866650759656,"col_score":0.8502260108851241},{"table":"employee_training","fused":0.7001095116631058,"table_sim":0.6083683642118161,"col_score":0.8377212328400403},{"table":"sales_opportunities","fused":0.6857085443841274,"table_sim":0.5891548833734075,"col_score":0.8305390359002073},{"table":"sales_territories","fused":0.663264792177102,"table_sim":0.6544391487399293,"col_score":0.6765032573328611},{"table":"sales_regions","fused":0.5659767512991858,"table_sim":0.6428263414246281,"col_score":0.45070236611102227},{"table":"departments","fused":0.5421853837937378,"table_sim":0.6032642584988918,"col_score":0.450567071736007},{"table":"task_assignments","fused":0.5393656100431996,"table_sim":0.6071839885197421,"col_score":0.437638042328386},{"table":"project_resources","fused":0.5342859666440333,"table_sim":0.6042586180893913,"col_score":0.42932698947599623},{"table":"business_units","fused":0.5326302080763498,"table_sim":0.5965911322333207,"col_score":0.43668882184089336},{"table":"certifications","fused":0.3505066415642041,"table_sim":0.5841777359403402,"col_score":0}],"fk_expansion_candidates":31,"fk_expansion_added":2,"fk_expansion_blocked_count":26,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"certifications","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":18,"total_retrieval_latency_ms":24,"sql_generated":"SELECT p.title AS PositionTitle, COUNT(e.employee_id) AS NumberOfEmployees FROM positions p JOIN employees e ON p.position_id = e.position_id GROUP BY p.title;","tables_used_in_sql":[],"explain_result":"success","rows_returned":40,"total_latency_ms":808}
{"timestamp":"2026-01-29T20:49:14.771Z","query_id":"b5c8542a-8c84-4e09-93e6-ea06b8cc8f3b","question":"Find employees with expiring certifications in the next 6 months","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_certifications","certifications","employee_training","employee_salaries","employees","employee_benefits","employment_history","timesheets","leave_requests","sales_opportunities","training_courses","sales_territories"],"tables_from_table_retrieval":15,"tables_from_column_only":4,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_certifications","similarity":0.7706241362613744},{"table":"certifications","similarity":0.6802005917779511},{"table":"employee_training","similarity":0.6440443171141977},{"table":"employee_salaries","similarity":0.6217356175142155},{"table":"employment_history","similarity":0.6209800232699798},{"table":"employees","similarity":0.6208808332740605},{"table":"employee_benefits","similarity":0.6045338983482451},{"table":"leave_requests","similarity":0.5952468212261783},{"table":"timesheets","similarity":0.5895561171146715},{"table":"sales_opportunities","similarity":0.589247250067302},{"table":"sales_territories","similarity":0.5761976363181674},{"table":"sales_regions","similarity":0.571597497122778},{"table":"positions","similarity":0.5699853206265957},{"table":"sales_quotes","similarity":0.5692719307537125},{"table":"asset_maintenance","similarity":0.5679247260279}],"column_hits_per_table":{"employee_certifications":6,"certifications":5,"employee_training":7,"employee_benefits":4,"employee_salaries":4,"employees":13,"employment_history":2,"fixed_assets":1,"sales_territories":1,"leave_requests":1,"training_courses":1,"vendor_invoices":1,"sales_opportunities":1,"sales_orders":1,"timesheets":2},"top_columns_per_table":{"employee_certifications":[{"column":"expiry_date","similarity":0.8223290744223847},{"column":"obtained_date","similarity":0.7048571438609317},{"column":"certificate_number","similarity":0.6844066837361532}],"certifications":[{"column":"validity_years","similarity":0.6831497753418977},{"column":"issuing_body","similarity":0.6675689252914252},{"column":"name","similarity":0.6347875203520511}],"employee_training":[{"column":"status","similarity":0.6694247428105495},{"column":"completion_date","similarity":0.6500543987668643},{"column":"scheduled_date","similarity":0.634378567942575}],"employee_benefits":[{"column":"end_date","similarity":0.668980015269604},{"column":"start_date","similarity":0.6167647109848691},{"column":"employee_id","similarity":0.5890360373550575}],"employee_salaries":[{"column":"end_date","similarity":0.6663230094391236},{"column":"effective_date","similarity":0.6275928989730601},{"column":"approved_by","similarity":0.5920076491340375}],"employees":[{"column":"termination_date","similarity":0.6634096387400048},{"column":"birth_date","similarity":0.6208623682963734},{"column":"hire_date","similarity":0.6131267334537116}],"employment_history":[{"column":"end_date","similarity":0.6255999760444128},{"column":"reason_for_leaving","similarity":0.5952886604965791}],"fixed_assets":[{"column":"warranty_expiry","similarity":0.6127536708511256}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6119690793074023}],"leave_requests":[{"column":"approved_by","similarity":0.597799056732442}],"training_courses":[{"column":"duration_hours","similarity":0.5941472157411798}],"vendor_invoices":[{"column":"status","similarity":0.5930757702064392}],"sales_opportunities":[{"column":"owner_id","similarity":0.5882909136312094}],"sales_orders":[{"column":"sales_rep_id","similarity":0.5865686529713344}],"timesheets":[{"column":"employee_id","similarity":0.5831337158577651},{"column":"approved_by","similarity":0.5831119950290864}]},"fused_scores":[{"table":"employee_certifications","fused":0.9322775402979648,"table_sim":0.7706241362613744,"col_score":1.1747576463528504},{"table":"certifications","fused":0.8148940502618147,"table_sim":0.6802005917779511,"col_score":1.0169342379876103},{"table":"employee_training","fused":0.7733240633637795,"table_sim":0.6440443171141977,"col_score":0.9672436827381519},{"table":"employee_salaries","fused":0.7650891540787907,"table_sim":0.6217356175142155,"col_score":0.9801194589256537},{"table":"employees","fused":0.762064829119713,"table_sim":0.6208808332740605,"col_score":0.9738408228881915},{"table":"employee_benefits","fused":0.7536652873137626,"table_sim":0.6045338983482451,"col_score":0.9773623707620386},{"table":"employment_history","fused":0.7418857364790687,"table_sim":0.6209800232699798,"col_score":0.9232443062927023},{"table":"timesheets","fused":0.6686171885005245,"table_sim":0.5895561171146715,"col_score":0.7872087955793041},{"table":"leave_requests","fused":0.5962677154286837,"table_sim":0.5952468212261783,"col_score":0.597799056732442},{"table":"sales_opportunities","fused":0.5182698058571198,"table_sim":0.589247250067302,"col_score":0.41180363954184657},{"table":"sales_territories","fused":0.5170699239969732,"table_sim":0.5761976363181674,"col_score":0.4283783555151816},{"table":"sales_regions","fused":0.34295849827366676,"table_sim":0.571597497122778,"col_score":0},{"table":"positions","fused":0.3419911923759574,"table_sim":0.5699853206265957,"col_score":0},{"table":"sales_quotes","fused":0.3415631584522275,"table_sim":0.5692719307537125,"col_score":0},{"table":"asset_maintenance","fused":0.34075483561673997,"table_sim":0.5679247260279,"col_score":0}],"fk_expansion_candidates":33,"fk_expansion_added":2,"fk_expansion_blocked_count":26,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"sales_regions","reason":"max_tables"},{"table":"customers","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"leave_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":19,"total_retrieval_latency_ms":24,"sql_generated":"SELECT e.employee_id, CONCAT(e.first_name, ' ', e.last_name) AS employee_full_name, c.certification_id, c.name AS certification_name, DATEDIFF(c.expiry_date, CURRENT_DATE) AS days_until_expiration FROM employees e JOIN employee_certifications ec ON e.employee_id = ec.employee_id JOIN certifications c ON ec.certification_id = c.certification_id WHERE c.validity_years > 0 AND DATEDIFF(c.expiry_date, CURRENT_DATE) <= 180;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column c.expiry_date does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":1,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":5859,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column c.expiry_date does not exist"}
{"timestamp":"2026-01-29T20:49:20.630Z","query_id":"0386d46b-4203-44a9-b618-0b67d6bcd29e","question":"What is the total sales amount by customer for 2024?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_orders","sales_quotes","purchase_orders","sales_opportunities","vendor_invoices","customers","sales_regions","product_suppliers","inventory_transactions","sales_territories","customer_contacts","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.6661782372338159},{"table":"sales_regions","similarity":0.6466539195201415},{"table":"purchase_orders","similarity":0.6425639839861694},{"table":"sales_quotes","similarity":0.6323684030188},{"table":"customers","similarity":0.6254829877818046},{"table":"goods_receipts","similarity":0.624224700776992},{"table":"sales_territories","similarity":0.6219383160682438},{"table":"sales_opportunities","similarity":0.6198918716472263},{"table":"vendor_invoices","similarity":0.6044007553511245},{"table":"product_suppliers","similarity":0.6040993020059657},{"table":"vendors","similarity":0.603297637986599},{"table":"inventory_transactions","similarity":0.5961752149477293},{"table":"customer_contacts","similarity":0.5960659744690372},{"table":"purchase_requisitions","similarity":0.5958567238927183},{"table":"vendor_contacts","similarity":0.5956298644510378}],"column_hits_per_table":{"sales_orders":11,"sales_quotes":8,"purchase_orders":4,"vendor_invoices":4,"sales_regions":2,"sales_opportunities":5,"budgets":1,"vendor_invoice_lines":3,"sales_territories":1,"customers":5,"product_suppliers":2,"inventory_transactions":1,"products":1,"employee_salaries":1,"requisition_lines":1},"top_columns_per_table":{"sales_orders":[{"column":"total","similarity":0.7244313172120884},{"column":"tax_amount","similarity":0.6762874622688556},{"column":"shipping_cost","similarity":0.6612432272072928}],"sales_quotes":[{"column":"total","similarity":0.6950563806491997},{"column":"tax_amount","similarity":0.6549934606699467},{"column":"customer_id","similarity":0.633022609028069}],"purchase_orders":[{"column":"total","similarity":0.6785298093212636},{"column":"tax_amount","similarity":0.6404349276520235},{"column":"shipping_cost","similarity":0.6240185552956755}],"vendor_invoices":[{"column":"total","similarity":0.6747261791238827},{"column":"amount_paid","similarity":0.6298159797552111},{"column":"tax_amount","similarity":0.6272011861089813}],"sales_regions":[{"column":"target_revenue","similarity":0.669211801482299},{"column":"manager_id","similarity":0.6277573682655309}],"sales_opportunities":[{"column":"amount","similarity":0.655450458562276},{"column":"customer_id","similarity":0.6322500352926682},{"column":"actual_close_date","similarity":0.6246929093287042}],"budgets":[{"column":"total_amount","similarity":0.6518162432576314}],"vendor_invoice_lines":[{"column":"amount","similarity":0.6403394670021465},{"column":"quantity","similarity":0.6220633545661067},{"column":"unit_cost","similarity":0.6142783559425501}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6329827875367418}],"customers":[{"column":"customer_number","similarity":0.6307526305965028},{"column":"is_active","similarity":0.6279434554243903},{"column":"payment_terms","similarity":0.6271025683088002}],"product_suppliers":[{"column":"unit_cost","similarity":0.6238036188844898},{"column":"lead_time_days","similarity":0.6148470142139506}],"inventory_transactions":[{"column":"quantity","similarity":0.6205086265646853}],"products":[{"column":"unit_cost","similarity":0.6167414295269279}],"employee_salaries":[{"column":"amount","similarity":0.6161656413500942}],"requisition_lines":[{"column":"estimated_total","similarity":0.6121816423535696}]},"fused_scores":[{"table":"sales_orders","fused":0.824736961678896,"table_sim":0.6661782372338159,"col_score":1.0625750483465162},{"table":"sales_quotes","fused":0.7884422862049492,"table_sim":0.6323684030188,"col_score":1.022553110984173},{"table":"purchase_orders","fused":0.7850372996506118,"table_sim":0.6425639839861694,"col_score":0.9987472731472753},{"table":"sales_opportunities","fused":0.759053888278987,"table_sim":0.6198918716472263,"col_score":0.9677969132266282},{"table":"vendor_invoices","fused":0.757971162082024,"table_sim":0.6044007553511245,"col_score":0.9883267721783733},{"table":"customers","fused":0.753011358569444,"table_sim":0.6254829877818046,"col_score":0.9443039147509029},{"table":"sales_regions","fused":0.7435631038621788,"table_sim":0.6466539195201415,"col_score":0.8889268803752348},{"table":"product_suppliers","fused":0.7349504316001654,"table_sim":0.6040993020059657,"col_score":0.9312271259914651},{"table":"inventory_transactions","fused":0.6059085795945116,"table_sim":0.5961752149477293,"col_score":0.6205086265646853},{"table":"sales_territories","fused":0.5503981701512339,"table_sim":0.6219383160682438,"col_score":0.4430879512757192},{"table":"vendor_invoice_lines","fused":0.38054845771407997,"table_sim":0,"col_score":0.9513711442851999},{"table":"goods_receipts","fused":0.3745348204661952,"table_sim":0.624224700776992,"col_score":0},{"table":"vendors","fused":0.3619785827919594,"table_sim":0.603297637986599,"col_score":0},{"table":"customer_contacts","fused":0.3576395846814223,"table_sim":0.5960659744690372,"col_score":0},{"table":"purchase_requisitions","fused":0.35751403433563095,"table_sim":0.5958567238927183,"col_score":0}],"fk_expansion_candidates":17,"fk_expansion_added":2,"fk_expansion_blocked_count":11,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendors","reason":"max_tables"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":35,"total_retrieval_latency_ms":41,"sql_generated":"SELECT c.customer_id AS \"CustomerID\", SUM(so.total) AS \"TotalSalesAmount\" FROM customers c JOIN sales_orders so ON c.customer_id = so.customer_id AND EXTRACT(YEAR FROM so.order_date) = 2024 GROUP BY c.customer_id;","tables_used_in_sql":[],"total_latency_ms":3293,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T20:49:23.923Z","query_id":"e2620689-a1a0-4226-9e0b-7177f4a549bc","question":"List the top 10 customers by total order value","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["sales_orders","order_lines","purchase_orders","customers","vendor_invoices","po_lines","vendor_invoice_lines","vendors","product_suppliers","customer_contacts","goods_receipts","receipt_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.6473006572264755},{"table":"order_lines","similarity":0.6399839764362797},{"table":"purchase_orders","similarity":0.6359216236921361},{"table":"customers","similarity":0.6198957604307753},{"table":"product_suppliers","similarity":0.5995729306104617},{"table":"vendor_invoices","similarity":0.5943908353227434},{"table":"customer_contacts","similarity":0.5842306673122464},{"table":"vendor_invoice_lines","similarity":0.5801466694219243},{"table":"po_lines","similarity":0.5791417572195606},{"table":"goods_receipts","similarity":0.5753336348446236},{"table":"vendors","similarity":0.5707400907082698},{"table":"vendor_contacts","similarity":0.5696902100114021},{"table":"sales_quotes","similarity":0.5666705909907517},{"table":"sales_regions","similarity":0.5613559842608495},{"table":"performance_reviews","similarity":0.5612444859070587}],"column_hits_per_table":{"sales_orders":9,"purchase_orders":9,"order_lines":6,"customers":8,"vendor_invoices":3,"po_lines":4,"product_suppliers":1,"vendor_invoice_lines":3,"sales_quotes":1,"vendors":2,"reorder_rules":1,"receipt_lines":1,"customer_contacts":1,"vendor_contacts":1},"top_columns_per_table":{"sales_orders":[{"column":"total","similarity":0.7020817260367288},{"column":"order_number","similarity":0.6685298882909628},{"column":"subtotal","similarity":0.6524962304627586}],"purchase_orders":[{"column":"total","similarity":0.6939612306511255},{"column":"subtotal","similarity":0.6468882375379221},{"column":"po_number","similarity":0.6405494499482387}],"order_lines":[{"column":"line_total","similarity":0.6813706573979386},{"column":"quantity_shipped","similarity":0.6606623309473539},{"column":"unit_price","similarity":0.653638874407219}],"customers":[{"column":"phone","similarity":0.6678457692494831},{"column":"customer_number","similarity":0.667508576224813},{"column":"website","similarity":0.6440350067780187}],"vendor_invoices":[{"column":"total","similarity":0.6547235618821576},{"column":"subtotal","similarity":0.6165793862971071},{"column":"amount_paid","similarity":0.5994096139826286}],"po_lines":[{"column":"line_total","similarity":0.6452038022349394},{"column":"quantity_received","similarity":0.6360841424690086},{"column":"quantity","similarity":0.6154123203857146}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6405471009596841}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.6302050357488331},{"column":"amount","similarity":0.6254578473792903},{"column":"unit_cost","similarity":0.6160639087242643}],"sales_quotes":[{"column":"total","similarity":0.6256755187649439}],"vendors":[{"column":"phone","similarity":0.6250325024206392},{"column":"vendor_number","similarity":0.5980532008806005}],"reorder_rules":[{"column":"max_quantity","similarity":0.6123863797677381}],"receipt_lines":[{"column":"quantity_received","similarity":0.6046309435687143}],"customer_contacts":[{"column":"phone","similarity":0.602251378896717}],"vendor_contacts":[{"column":"phone","similarity":0.5990225595345888}]},"fused_scores":[{"table":"sales_orders","fused":0.8029190624087694,"table_sim":0.6473006572264755,"col_score":1.0363466701822102},{"table":"order_lines","fused":0.788671115010414,"table_sim":0.6399839764362797,"col_score":1.0117018228716155},{"table":"purchase_orders","fused":0.7885151139833163,"table_sim":0.6359216236921361,"col_score":1.0174053494200865},{"table":"customers","fused":0.7725774792032212,"table_sim":0.6198957604307753,"col_score":1.0016000573618897},{"table":"vendor_invoices","fused":0.7418398032059306,"table_sim":0.5943908353227434,"col_score":0.9630132550307111},{"table":"po_lines","fused":0.7327834037195139,"table_sim":0.5791417572195606,"col_score":0.9632458734694438},{"table":"vendor_invoice_lines","fused":0.7252615854285459,"table_sim":0.5801466694219243,"col_score":0.9429339594384782},{"table":"vendors","fused":0.7120676955693377,"table_sim":0.5707400907082698,"col_score":0.9240591028609395},{"table":"product_suppliers","fused":0.6159625987501507,"table_sim":0.5995729306104617,"col_score":0.6405471009596841},{"table":"customer_contacts","fused":0.5914389519460346,"table_sim":0.5842306673122464,"col_score":0.602251378896717},{"table":"sales_quotes","fused":0.5902725621004286,"table_sim":0.5666705909907517,"col_score":0.6256755187649439},{"table":"vendor_contacts","fused":0.5814231498206768,"table_sim":0.5696902100114021,"col_score":0.5990225595345888},{"table":"goods_receipts","fused":0.3452001809067742,"table_sim":0.5753336348446236,"col_score":0},{"table":"sales_regions","fused":0.3368135905565097,"table_sim":0.5613559842608495,"col_score":0},{"table":"performance_reviews","fused":0.3367466915442352,"table_sim":0.5612444859070587,"col_score":0}],"fk_expansion_candidates":14,"fk_expansion_added":2,"fk_expansion_blocked_count":10,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"vendor_contacts","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":34,"total_retrieval_latency_ms":40,"sql_generated":"SELECT c.customer_id, SUM(s.total) AS total_order_value FROM customers c JOIN sales_orders s ON c.customer_id = s.customer_id GROUP BY c.customer_id ORDER BY total_order_value DESC LIMIT 10;","tables_used_in_sql":[],"explain_result":"success","rows_returned":10,"total_latency_ms":1035}
{"timestamp":"2026-01-29T20:49:24.959Z","query_id":"50f760a8-36c7-45f2-a938-302d0eed1472","question":"Show sales opportunities in the Negotiation stage worth over $50,000","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["sales_opportunities","opportunity_stages","sales_quotes","sales_orders","vendor_invoices","purchase_orders","positions","sales_regions","sales_territories","inventory_levels","fixed_assets","purchase_requisitions"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_opportunities","similarity":0.6992078050992712},{"table":"opportunity_stages","similarity":0.6655732816251885},{"table":"sales_quotes","similarity":0.5966843975960908},{"table":"sales_orders","similarity":0.5593486033229518},{"table":"sales_regions","similarity":0.5589767008926408},{"table":"sales_territories","similarity":0.5454458212189293},{"table":"purchase_orders","similarity":0.5420364894792326},{"table":"inventory_levels","similarity":0.5351174798622741},{"table":"positions","similarity":0.5335687678148762},{"table":"vendor_invoices","similarity":0.530033951859159},{"table":"purchase_requisitions","similarity":0.52468395466863},{"table":"fixed_assets","similarity":0.5210852939306287},{"table":"vendors","similarity":0.5206051380901591},{"table":"product_suppliers","similarity":0.5180116953474874},{"table":"stock_transfers","similarity":0.5145653894331007}],"column_hits_per_table":{"sales_opportunities":11,"sales_quotes":8,"opportunity_stages":6,"sales_orders":6,"sales_regions":2,"vendor_invoices":3,"project_milestones":2,"purchase_orders":3,"positions":2,"sales_territories":2,"fixed_assets":1,"vendor_invoice_lines":1,"inventory_levels":1,"purchase_requisitions":1,"vendors":1},"top_columns_per_table":{"sales_opportunities":[{"column":"amount","similarity":0.7218839163082612},{"column":"stage_id","similarity":0.716924419509995},{"column":"actual_close_date","similarity":0.6885771934035502}],"sales_quotes":[{"column":"opportunity_id","similarity":0.647441890535683},{"column":"total","similarity":0.6155916414203653},{"column":"subtotal","similarity":0.6055615457364606}],"opportunity_stages":[{"column":"sequence","similarity":0.6454142500136325},{"column":"is_won","similarity":0.6341237265976897},{"column":"probability","similarity":0.6324889797951576}],"sales_orders":[{"column":"total","similarity":0.620187694899569},{"column":"subtotal","similarity":0.6117656440801068},{"column":"shipping_cost","similarity":0.5821513623432988}],"sales_regions":[{"column":"target_revenue","similarity":0.5974090175243022},{"column":"name","similarity":0.555083452385604}],"vendor_invoices":[{"column":"total","similarity":0.5954243361867875},{"column":"subtotal","similarity":0.5865062592640437},{"column":"amount_paid","similarity":0.5632369336559707}],"project_milestones":[{"column":"amount","similarity":0.5837677671992427},{"column":"description","similarity":0.5491146358499412}],"purchase_orders":[{"column":"total","similarity":0.5819183589116524},{"column":"subtotal","similarity":0.5743568254746039},{"column":"tax_amount","similarity":0.5472165237974967}],"positions":[{"column":"max_salary","similarity":0.5779609042142907},{"column":"min_salary","similarity":0.5600539081817787}],"sales_territories":[{"column":"name","similarity":0.5672149440546744},{"column":"territory_id","similarity":0.5529670061701181}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5581280439698661}],"vendor_invoice_lines":[{"column":"amount","similarity":0.5566794113536152}],"inventory_levels":[{"column":"quantity_available","similarity":0.5552607980814753}],"purchase_requisitions":[{"column":"status","similarity":0.5540663995768337}],"vendors":[{"column":"payment_terms","similarity":0.5485963499255753}]},"fused_scores":[{"table":"sales_opportunities","fused":0.8459936882635772,"table_sim":0.6992078050992712,"col_score":1.0661725130100363},{"table":"opportunity_stages","fused":0.7843344143001041,"table_sim":0.6655732816251885,"col_score":0.9624761133124773},{"table":"sales_quotes","fused":0.7253596042730928,"table_sim":0.5966843975960908,"col_score":0.9183724142885956},{"table":"sales_orders","fused":0.70603736876962,"table_sim":0.5593486033229518,"col_score":0.9260705169396224},{"table":"vendor_invoices","fused":0.6734913574430191,"table_sim":0.530033951859159,"col_score":0.8886774658188092},{"table":"purchase_orders","fused":0.6728606023471213,"table_sim":0.5420364894792326,"col_score":0.8690967716489544},{"table":"positions","fused":0.6633364040109977,"table_sim":0.5335687678148762,"col_score":0.8579878583051801},{"table":"sales_regions","fused":0.6520613108792899,"table_sim":0.5589767008926408,"col_score":0.7916882258592636},{"table":"sales_territories","fused":0.5635030579304829,"table_sim":0.5454458212189293,"col_score":0.5905889129978134},{"table":"inventory_levels","fused":0.5431748071499546,"table_sim":0.5351174798622741,"col_score":0.5552607980814753},{"table":"fixed_assets","fused":0.5359023939463237,"table_sim":0.5210852939306287,"col_score":0.5581280439698661},{"table":"vendors","fused":0.5318016228243255,"table_sim":0.5206051380901591,"col_score":0.5485963499255753},{"table":"purchase_requisitions","fused":0.46994896468269143,"table_sim":0.52468395466863,"col_score":0.38784647970378355},{"table":"product_suppliers","fused":0.3108070172084924,"table_sim":0.5180116953474874,"col_score":0},{"table":"project_milestones","fused":0.31038315589868887,"table_sim":0,"col_score":0.7759578897467221}],"fk_expansion_candidates":15,"fk_expansion_added":2,"fk_expansion_blocked_count":11,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendors","reason":"max_tables"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":42,"total_retrieval_latency_ms":48,"sql_generated":"SELECT so.name AS opportunity_name, os.stage_id, os.probability FROM sales_opportunities so JOIN opportunity_stages os ON so.stage_id = os.stage_id WHERE so.amount > 50000 AND os.name = 'Negotiation';","tables_used_in_sql":[],"explain_result":"success","rows_returned":69,"total_latency_ms":1134}
{"timestamp":"2026-01-29T20:49:26.093Z","query_id":"f907255f-3986-4153-b06c-f24fcaf1c16f","question":"What is the conversion rate from quotes to orders?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["quote_lines","sales_quotes","sales_orders","order_lines","purchase_orders","po_lines","product_suppliers","vendor_invoice_lines","tax_rates","units_of_measure","goods_receipts","vendor_invoices"],"tables_from_table_retrieval":15,"tables_from_column_only":1,"tables_from_fk_expansion":2,"table_scores":[{"table":"quote_lines","similarity":0.6904269230356019},{"table":"sales_orders","similarity":0.6835641897302034},{"table":"sales_quotes","similarity":0.6684713746648914},{"table":"order_lines","similarity":0.6535630831611231},{"table":"purchase_orders","similarity":0.6306886393929901},{"table":"po_lines","similarity":0.6176945995415711},{"table":"product_suppliers","similarity":0.5906242515558167},{"table":"vendor_invoices","similarity":0.5859545887931735},{"table":"vendor_invoice_lines","similarity":0.5830820632852473},{"table":"goods_receipts","similarity":0.5790884419628168},{"table":"tax_rates","similarity":0.5718192537871447},{"table":"requisition_lines","similarity":0.5712220355781},{"table":"transfer_lines","similarity":0.5636706691019312},{"table":"units_of_measure","similarity":0.562966241975057},{"table":"performance_reviews","similarity":0.5624540759938077}],"column_hits_per_table":{"sales_orders":9,"quote_lines":6,"sales_quotes":11,"order_lines":6,"purchase_orders":9,"currencies":1,"product_suppliers":1,"po_lines":4,"vendor_invoice_lines":1,"tax_rates":1,"units_of_measure":1},"top_columns_per_table":{"sales_orders":[{"column":"quote_id","similarity":0.7232829089173333},{"column":"total","similarity":0.6782515905024311},{"column":"subtotal","similarity":0.6564656490145492}],"quote_lines":[{"column":"discount_percent","similarity":0.7208835983271276},{"column":"unit_price","similarity":0.704483517001721},{"column":"line_total","similarity":0.6863137629261619}],"sales_quotes":[{"column":"total","similarity":0.706142441581424},{"column":"quote_number","similarity":0.6925940339842922},{"column":"subtotal","similarity":0.6772561289459981}],"order_lines":[{"column":"discount_percent","similarity":0.6959860752364422},{"column":"unit_price","similarity":0.6669167849132327},{"column":"line_total","similarity":0.6535000947209797}],"purchase_orders":[{"column":"total","similarity":0.6835774808972174},{"column":"subtotal","similarity":0.6633148180662753},{"column":"shipping_cost","similarity":0.6595759377904514}],"currencies":[{"column":"exchange_rate","similarity":0.6420843010647603}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6294891258816252}],"po_lines":[{"column":"line_total","similarity":0.6268290778076593},{"column":"unit_cost","similarity":0.6264313657632602},{"column":"quantity_received","similarity":0.6234182435733836}],"vendor_invoice_lines":[{"column":"unit_cost","similarity":0.622062223414914}],"tax_rates":[{"column":"rate","similarity":0.6139738053543071}],"units_of_measure":[{"column":"conversion_factor","similarity":0.6098054698975929}]},"fused_scores":[{"table":"quote_lines","fused":0.8435062965525564,"table_sim":0.6904269230356019,"col_score":1.0731253568279882},{"table":"sales_quotes","fused":0.822058608228363,"table_sim":0.6684713746648914,"col_score":1.0524394585735701},{"table":"sales_orders","fused":0.8127322798420042,"table_sim":0.6835641897302034,"col_score":1.0064844150097056},{"table":"order_lines","fused":0.8039156369738973,"table_sim":0.6535630831611231,"col_score":1.0294444676930585},{"table":"purchase_orders","fused":0.7845071396079362,"table_sim":0.6306886393929901,"col_score":1.0152348899303552},{"table":"po_lines","fused":0.7466346640006585,"table_sim":0.6176945995415711,"col_score":0.9400447606892894},{"table":"product_suppliers","fused":0.6061702012861401,"table_sim":0.5906242515558167,"col_score":0.6294891258816252},{"table":"vendor_invoice_lines","fused":0.598674127337114,"table_sim":0.5830820632852473,"col_score":0.622062223414914},{"table":"tax_rates","fused":0.5886810744140096,"table_sim":0.5718192537871447,"col_score":0.6139738053543071},{"table":"units_of_measure","fused":0.5817019331440714,"table_sim":0.562966241975057,"col_score":0.6098054698975929},{"table":"vendor_invoices","fused":0.3515727532759041,"table_sim":0.5859545887931735,"col_score":0},{"table":"goods_receipts","fused":0.3474530651776901,"table_sim":0.5790884419628168,"col_score":0},{"table":"requisition_lines","fused":0.34273322134686,"table_sim":0.5712220355781,"col_score":0},{"table":"transfer_lines","fused":0.3382024014611587,"table_sim":0.5636706691019312,"col_score":0},{"table":"performance_reviews","fused":0.3374724455962846,"table_sim":0.5624540759938077,"col_score":0}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":11,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"countries","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":42,"total_retrieval_latency_ms":47,"sql_generated":"SELECT COUNT(sales_orders.order_id) / NULLIF(COUNT(quote_lines.line_id), 0) AS conversion_rate FROM sales_quotes JOIN quote_lines ON sales_quotes.quote_id = quote_lines.quote_id JOIN sales_orders ON quote_lines.order_id = sales_orders.order_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column quote_lines.order_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":4,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":3373,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column quote_lines.order_id does not exist"}
{"timestamp":"2026-01-29T20:49:29.467Z","query_id":"632f2b20-9405-4322-b3f8-08488e72e4dd","question":"List sales orders by sales representative with their totals","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_orders","purchase_orders","order_lines","sales_quotes","po_lines","sales_regions","vendor_invoices","receipt_lines","vendor_invoice_lines","product_suppliers","goods_receipts","quote_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.758754229471184},{"table":"purchase_orders","similarity":0.6987531686909988},{"table":"order_lines","similarity":0.6881373549198537},{"table":"goods_receipts","similarity":0.6456282553665884},{"table":"sales_quotes","similarity":0.6444526679613465},{"table":"sales_territories","similarity":0.6375070500401926},{"table":"sales_regions","similarity":0.6277211189501499},{"table":"vendor_invoices","similarity":0.6246861185869929},{"table":"po_lines","similarity":0.6084083791424837},{"table":"receipt_lines","similarity":0.6068971146953636},{"table":"product_suppliers","similarity":0.6062359599284572},{"table":"quote_lines","similarity":0.6037562036512956},{"table":"vendor_invoice_lines","similarity":0.6029372840473417},{"table":"inventory_levels","similarity":0.591644735010043},{"table":"requisition_lines","similarity":0.5902331648645791}],"column_hits_per_table":{"sales_orders":15,"purchase_orders":13,"sales_quotes":6,"order_lines":5,"sales_regions":1,"sales_territories":1,"vendor_invoices":1,"receipt_lines":1,"po_lines":2,"vendor_invoice_lines":1,"goods_receipts":1,"sales_opportunities":1,"product_suppliers":1,"inventory_transactions":1},"top_columns_per_table":{"sales_orders":[{"column":"total","similarity":0.7998245354916855},{"column":"tax_amount","similarity":0.7409304914795294},{"column":"subtotal","similarity":0.7386795928063996}],"purchase_orders":[{"column":"total","similarity":0.7369898987643527},{"column":"tax_amount","similarity":0.6880914687154579},{"column":"subtotal","similarity":0.6805274523503672}],"sales_quotes":[{"column":"total","similarity":0.7000946313237136},{"column":"status","similarity":0.6570352148347643},{"column":"tax_amount","similarity":0.6496185243884612}],"order_lines":[{"column":"quantity_shipped","similarity":0.6754287630112775},{"column":"line_total","similarity":0.6747818022026829},{"column":"order_id","similarity":0.6500926353163158}],"sales_regions":[{"column":"target_revenue","similarity":0.6609566639968198}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6507336012447592}],"vendor_invoices":[{"column":"total","similarity":0.6490968088980056}],"receipt_lines":[{"column":"quantity_received","similarity":0.6403091638652453}],"po_lines":[{"column":"line_total","similarity":0.633906772238869},{"column":"quantity_received","similarity":0.619669544018957}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.6318424746468201}],"goods_receipts":[{"column":"po_id","similarity":0.6305521343448763}],"sales_opportunities":[{"column":"amount","similarity":0.6247832200658987}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6242146192079842}],"inventory_transactions":[{"column":"quantity","similarity":0.6183812252695141}]},"fused_scores":[{"table":"sales_orders","fused":0.9233684501752903,"table_sim":0.758754229471184,"col_score":1.17028978123145},{"table":"purchase_orders","fused":0.8516661544634319,"table_sim":0.6987531686909988,"col_score":1.0810356331220816},{"table":"order_lines","fused":0.8180102785969599,"table_sim":0.6881373549198537,"col_score":1.012819664112619},{"table":"sales_quotes","fused":0.7966331581839856,"table_sim":0.6444526679613465,"col_score":1.0249038935179442},{"table":"po_lines","fused":0.7425416451848292,"table_sim":0.6084083791424837,"col_score":0.9437415442483476},{"table":"sales_regions","fused":0.6410153369688179,"table_sim":0.6277211189501499,"col_score":0.6609566639968198},{"table":"vendor_invoices","fused":0.634450394711398,"table_sim":0.6246861185869929,"col_score":0.6490968088980056},{"table":"receipt_lines","fused":0.6202619343633162,"table_sim":0.6068971146953636,"col_score":0.6403091638652453},{"table":"vendor_invoice_lines","fused":0.6144993602871331,"table_sim":0.6029372840473417,"col_score":0.6318424746468201},{"table":"product_suppliers","fused":0.613427423640268,"table_sim":0.6062359599284572,"col_score":0.6242146192079842},{"table":"sales_territories","fused":0.5647096383726481,"table_sim":0.6375070500401926,"col_score":0.4555135208713314},{"table":"goods_receipts","fused":0.5639315508365184,"table_sim":0.6456282553665884,"col_score":0.4413864940414134},{"table":"quote_lines","fused":0.36225372219077734,"table_sim":0.6037562036512956,"col_score":0},{"table":"inventory_levels","fused":0.3549868410060258,"table_sim":0.591644735010043,"col_score":0},{"table":"requisition_lines","fused":0.3541398989187475,"table_sim":0.5902331648645791,"col_score":0}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"sales_territories","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":47,"total_retrieval_latency_ms":54,"sql_generated":"SELECT sr.name, SUM(so.total) AS total_sales FROM sales_orders so JOIN sales_regions sr ON so.sales_rep_id = sr.employee_id GROUP BY sr.name;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column sr.employee_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":0,"autocorrect_failure_reason":"No candidates found for column 'employee_id'","total_latency_ms":2381,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column sr.employee_id does not exist"}
{"timestamp":"2026-01-29T20:49:31.849Z","query_id":"d3c4c328-7e80-4c33-bbd6-1d3ce6820df6","question":"Which products have inventory below their reorder point?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["inventory_levels","reorder_rules","order_lines","purchase_orders","sales_orders","inventory_transactions","inventory_adjustments","products","product_suppliers","po_lines","adjustment_lines","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_levels","similarity":0.7070801714571546},{"table":"reorder_rules","similarity":0.6993615141081165},{"table":"order_lines","similarity":0.6642088827606001},{"table":"purchase_orders","similarity":0.6443483426703897},{"table":"inventory_transactions","similarity":0.6416382343377212},{"table":"products","similarity":0.6294483845877934},{"table":"sales_orders","similarity":0.6263982770622627},{"table":"inventory_adjustments","similarity":0.625212937166316},{"table":"product_suppliers","similarity":0.6251606663311581},{"table":"adjustment_lines","similarity":0.6130209514155518},{"table":"po_lines","similarity":0.6120042387827147},{"table":"requisition_lines","similarity":0.6038701680112407},{"table":"goods_receipts","similarity":0.6006720578725578},{"table":"product_categories","similarity":0.5982652346826921},{"table":"vendor_invoice_lines","similarity":0.5939487288947369}],"column_hits_per_table":{"inventory_levels":8,"reorder_rules":6,"order_lines":4,"sales_orders":6,"inventory_transactions":6,"po_lines":1,"inventory_adjustments":6,"purchase_orders":5,"requisition_lines":1,"product_suppliers":1,"warehouse_locations":1,"purchase_requisitions":2,"products":2,"receipt_lines":1},"top_columns_per_table":{"inventory_levels":[{"column":"product_id","similarity":0.6933487635392793},{"column":"last_count_date","similarity":0.6823075362329812},{"column":"quantity_reserved","similarity":0.6757460490667979}],"reorder_rules":[{"column":"product_id","similarity":0.6926440847612831},{"column":"reorder_quantity","similarity":0.6606737830959721},{"column":"max_quantity","similarity":0.6520065510249886}],"order_lines":[{"column":"product_id","similarity":0.6859094375448689},{"column":"quantity_shipped","similarity":0.6455034843795919},{"column":"quantity","similarity":0.6334487398094706}],"sales_orders":[{"column":"order_number","similarity":0.6639517787797891},{"column":"status","similarity":0.6466630830274546},{"column":"order_date","similarity":0.639183860244724}],"inventory_transactions":[{"column":"product_id","similarity":0.6577299676888266},{"column":"location_id","similarity":0.6475618823542578},{"column":"quantity","similarity":0.6407976916150718}],"po_lines":[{"column":"product_id","similarity":0.6572816867979093}],"inventory_adjustments":[{"column":"status","similarity":0.6508806959470139},{"column":"reason","similarity":0.6489151000391595},{"column":"adjustment_number","similarity":0.6357746244949577}],"purchase_orders":[{"column":"po_number","similarity":0.6499714608427599},{"column":"status","similarity":0.6425932566416922},{"column":"expected_date","similarity":0.6284413308063352}],"requisition_lines":[{"column":"product_id","similarity":0.6451053156263248}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.644742435890616}],"warehouse_locations":[{"column":"aisle","similarity":0.6337557011841548}],"purchase_requisitions":[{"column":"requisition_number","similarity":0.6250413268166893},{"column":"status","similarity":0.6175422714713268}],"products":[{"column":"list_price","similarity":0.623827175050673},{"column":"category_id","similarity":0.6206202221080743}],"receipt_lines":[{"column":"product_id","similarity":0.6141560834320862}]},"fused_scores":[{"table":"inventory_levels","fused":0.8323203271808449,"table_sim":0.7070801714571546,"col_score":1.0201805607663803},{"table":"reorder_rules","fused":0.8142877319082565,"table_sim":0.6993615141081165,"col_score":0.9866770586084664},{"table":"order_lines","fused":0.783416471370091,"table_sim":0.6642088827606001,"col_score":0.9622278542843272},{"table":"purchase_orders","fused":0.7722858561006047,"table_sim":0.6443483426703897,"col_score":0.9641921262459275},{"table":"sales_orders","fused":0.7692564497982181,"table_sim":0.6263982770622627,"col_score":0.983543708902151},{"table":"inventory_transactions","fused":0.7669992320885244,"table_sim":0.6416382343377212,"col_score":0.9550407287147291},{"table":"inventory_adjustments","fused":0.761848727214445,"table_sim":0.625212937166316,"col_score":0.9668024122866383},{"table":"products","fused":0.7140867318680757,"table_sim":0.6294483845877934,"col_score":0.8410442527884989},{"table":"product_suppliers","fused":0.6329933741549413,"table_sim":0.6251606663311581,"col_score":0.644742435890616},{"table":"po_lines","fused":0.5512414155730434,"table_sim":0.6120042387827147,"col_score":0.4600971807585365},{"table":"requisition_lines","fused":0.5429515891821154,"table_sim":0.6038701680112407,"col_score":0.4515737209384273},{"table":"adjustment_lines","fused":0.36781257084933106,"table_sim":0.6130209514155518,"col_score":0},{"table":"goods_receipts","fused":0.3604032347235347,"table_sim":0.6006720578725578,"col_score":0},{"table":"product_categories","fused":0.3589591408096153,"table_sim":0.5982652346826921,"col_score":0},{"table":"vendor_invoice_lines","fused":0.35636923733684217,"table_sim":0.5939487288947369,"col_score":0}],"fk_expansion_candidates":19,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"product_categories","reason":"max_tables"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":43,"total_retrieval_latency_ms":49,"sql_generated":"SELECT p.product_id, p.name FROM products p JOIN inventory_levels il ON p.product_id = il.product_id JOIN reorder_rules rr ON p.product_id = rr.product_id WHERE il.quantity_available < rr.min_quantity;","tables_used_in_sql":[],"explain_result":"success","rows_returned":41,"total_latency_ms":1126}
{"timestamp":"2026-01-29T20:49:32.975Z","query_id":"3565120c-dd0d-463f-9abd-f5a581307869","question":"Show total inventory value by warehouse","attempt_count":2,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["inventory_levels","warehouse_locations","inventory_transactions","warehouses","inventory_adjustments","sales_orders","stock_transfers","purchase_orders","fixed_assets","product_suppliers","goods_receipts","reorder_rules"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_levels","similarity":0.7104203582862987},{"table":"inventory_transactions","similarity":0.680757846413893},{"table":"warehouse_locations","similarity":0.6688272683283106},{"table":"inventory_adjustments","similarity":0.6606002830367331},{"table":"warehouses","similarity":0.6556396900395098},{"table":"goods_receipts","similarity":0.6485940357294664},{"table":"stock_transfers","similarity":0.6361222068277603},{"table":"receipt_lines","similarity":0.599261793575482},{"table":"fixed_assets","similarity":0.5815202009406938},{"table":"purchase_orders","similarity":0.572969973940203},{"table":"asset_categories","similarity":0.5669210401950147},{"table":"asset_maintenance","similarity":0.5650580534060331},{"table":"product_suppliers","similarity":0.5642200983640595},{"table":"sales_orders","similarity":0.5616335878669071},{"table":"reorder_rules","similarity":0.5613905707653182}],"column_hits_per_table":{"inventory_levels":8,"inventory_transactions":7,"inventory_adjustments":2,"goods_receipts":1,"warehouses":6,"stock_transfers":2,"warehouse_locations":7,"sales_orders":3,"vendor_invoices":2,"purchase_orders":1,"budgets":1,"sales_quotes":1,"departments":1,"receipt_lines":1,"product_suppliers":1,"reorder_rules":1,"depreciation_entries":2,"products":2,"fixed_assets":1},"top_columns_per_table":{"inventory_levels":[{"column":"warehouse_id","similarity":0.7245152932924512},{"column":"location_id","similarity":0.670229449220733},{"column":"quantity_available","similarity":0.6634243412325281}],"inventory_transactions":[{"column":"warehouse_id","similarity":0.7126219801719647},{"column":"quantity","similarity":0.6882665247995969},{"column":"location_id","similarity":0.6644472601923928}],"inventory_adjustments":[{"column":"warehouse_id","similarity":0.7000232196630412},{"column":"adjusted_by","similarity":0.6038072357651799}],"goods_receipts":[{"column":"warehouse_id","similarity":0.6983268325646605}],"warehouses":[{"column":"warehouse_id","similarity":0.6884846242517689},{"column":"code","similarity":0.666009086549763},{"column":"manager_id","similarity":0.6602922237598574}],"stock_transfers":[{"column":"to_warehouse_id","similarity":0.68127907076134},{"column":"from_warehouse_id","similarity":0.6749809961693801}],"warehouse_locations":[{"column":"capacity","similarity":0.6795034389771706},{"column":"warehouse_id","similarity":0.6699168364120748},{"column":"aisle","similarity":0.6398304684247763}],"sales_orders":[{"column":"total","similarity":0.6721682901729499},{"column":"tax_amount","similarity":0.6091494655585886},{"column":"shipping_cost","similarity":0.6058838567040926}],"vendor_invoices":[{"column":"total","similarity":0.6677524443677078},{"column":"subtotal","similarity":0.600674989172044}],"purchase_orders":[{"column":"total","similarity":0.6534737529838377}],"budgets":[{"column":"total_amount","similarity":0.6378055154758845}],"sales_quotes":[{"column":"total","similarity":0.623918506647635}],"departments":[{"column":"budget","similarity":0.6201249087174965}],"receipt_lines":[{"column":"location_id","similarity":0.6169512352230854}],"product_suppliers":[{"column":"unit_cost","similarity":0.6157369492414859}],"reorder_rules":[{"column":"warehouse_id","similarity":0.6106322891909687}],"depreciation_entries":[{"column":"amount","similarity":0.6082306456614778},{"column":"book_value","similarity":0.6060019840891933}],"products":[{"column":"unit_cost","similarity":0.6081881272182337},{"column":"list_price","similarity":0.6022375697293547}],"fixed_assets":[{"column":"disposal_amount","similarity":0.6045093113587248}]},"fused_scores":[{"table":"inventory_levels","fused":0.8234550149369311,"table_sim":0.7104203582862987,"col_score":0.9930069999128798},{"table":"warehouse_locations","fused":0.8010638302728099,"table_sim":0.6688272683283106,"col_score":0.9994186731895587},{"table":"inventory_transactions","fused":0.7835283949922496,"table_sim":0.680757846413893,"col_score":0.9376842178597845},{"table":"warehouses","fused":0.7561752960388588,"table_sim":0.6556396900395098,"col_score":0.9069787050378821},{"table":"inventory_adjustments","fused":0.7358863148809376,"table_sim":0.6606002830367331,"col_score":0.8488153626472443},{"table":"sales_orders","fused":0.7276773619010419,"table_sim":0.5616335878669071,"col_score":0.9767430229522442},{"table":"stock_transfers","fused":0.6669288033735445,"table_sim":0.6361222068277603,"col_score":0.713138698192221},{"table":"purchase_orders","fused":0.6051714855576569,"table_sim":0.572969973940203,"col_score":0.6534737529838377},{"table":"fixed_assets","fused":0.5907158451079062,"table_sim":0.5815202009406938,"col_score":0.6045093113587248},{"table":"product_suppliers","fused":0.58482683871503,"table_sim":0.5642200983640595,"col_score":0.6157369492414859},{"table":"goods_receipts","fused":0.5846879345557847,"table_sim":0.6485940357294664,"col_score":0.4888287827952624},{"table":"receipt_lines","fused":0.5323034220077532,"table_sim":0.599261793575482,"col_score":0.4318658646561597},{"table":"reorder_rules","fused":0.5078113834326621,"table_sim":0.5613905707653182,"col_score":0.42744260243367804},{"table":"vendor_invoices","fused":0.3872359755814919,"table_sim":0,"col_score":0.9680899389537297},{"table":"depreciation_entries","fused":0.3644926550824298,"table_sim":0,"col_score":0.9112316377060744}],"fk_expansion_candidates":21,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"employees","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_categories","reason":"max_tables"},{"table":"order_lines","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"vendor_invoices","reason":"max_tables"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"receipt_lines","reason":"max_tables"},{"table":"products","reason":"max_tables"},{"table":"customers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"max_tables"},{"table":"sales_quotes","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":42,"total_retrieval_latency_ms":48,"sql_generated":"","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column w.location_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":5,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":1975,"failure_type":"execution_error","failure_details":"Model did not generate SELECT statement"}
{"timestamp":"2026-01-29T20:49:34.950Z","query_id":"539f8f39-ebda-406e-a1f7-72648a270fe9","question":"List products that had stock transfers in the last 30 days","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["stock_transfers","asset_transfers","product_suppliers","transfer_lines","products","sales_orders","purchase_orders","sales_opportunities","inventory_transactions","bank_transactions","goods_receipts","inventory_levels"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"stock_transfers","similarity":0.7091850354041176},{"table":"transfer_lines","similarity":0.646870577681612},{"table":"asset_transfers","similarity":0.59288750153646},{"table":"product_suppliers","similarity":0.5817884382151997},{"table":"goods_receipts","similarity":0.5680812156740983},{"table":"products","similarity":0.5634067444500328},{"table":"inventory_transactions","similarity":0.5602292192430635},{"table":"purchase_orders","similarity":0.5596151991091506},{"table":"fixed_assets","similarity":0.5580960077160902},{"table":"sales_orders","similarity":0.5561090865394333},{"table":"sales_opportunities","similarity":0.5491462356670244},{"table":"asset_maintenance","similarity":0.5473904753072384},{"table":"purchase_requisitions","similarity":0.5332712706373074},{"table":"bank_transactions","similarity":0.5331448467569079},{"table":"inventory_adjustments","similarity":0.530733629333142}],"column_hits_per_table":{"stock_transfers":9,"asset_transfers":4,"product_suppliers":2,"products":7,"fixed_assets":1,"transfer_lines":3,"sales_orders":3,"goods_receipts":2,"sales_opportunities":2,"purchase_orders":3,"inventory_transactions":2,"bank_transactions":3,"inventory_adjustments":2,"sales_quotes":2,"asset_maintenance":1,"purchase_requisitions":2,"inventory_levels":1,"vendor_invoices":1},"top_columns_per_table":{"stock_transfers":[{"column":"transfer_date","similarity":0.7569744068757143},{"column":"requested_date","similarity":0.7407780240698681},{"column":"status","similarity":0.7336388205522848}],"asset_transfers":[{"column":"transfer_date","similarity":0.6801557927296986},{"column":"reason","similarity":0.636937017402658},{"column":"transferred_by","similarity":0.591261555474914}],"product_suppliers":[{"column":"lead_time_days","similarity":0.6325433597312592},{"column":"vendor_sku","similarity":0.5983939107153067}],"products":[{"column":"weight","similarity":0.6269164154643503},{"column":"sku","similarity":0.6128165683332525},{"column":"name","similarity":0.6112501339273688}],"fixed_assets":[{"column":"purchase_date","similarity":0.6194298336524596}],"transfer_lines":[{"column":"transfer_id","similarity":0.616838099560071},{"column":"product_id","similarity":0.6124982850699332},{"column":"quantity_transferred","similarity":0.5929855373409126}],"sales_orders":[{"column":"ship_date","similarity":0.6139033315106148},{"column":"status","similarity":0.5980018171133202},{"column":"order_date","similarity":0.5881191497886654}],"goods_receipts":[{"column":"receipt_date","similarity":0.6086781538927446},{"column":"notes","similarity":0.5962651293145639}],"sales_opportunities":[{"column":"actual_close_date","similarity":0.6071636494672776},{"column":"expected_close_date","similarity":0.5912239207558383}],"purchase_orders":[{"column":"status","similarity":0.6014695517939539},{"column":"expected_date","similarity":0.5942592923069729},{"column":"order_date","similarity":0.5880912431098863}],"inventory_transactions":[{"column":"transaction_date","similarity":0.5945769623932919},{"column":"reference_type","similarity":0.5800879925710923}],"bank_transactions":[{"column":"transaction_date","similarity":0.5929428887812874},{"column":"reference","similarity":0.5783350592316007},{"column":"reconciled","similarity":0.5781446888114008}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.5902712511353371},{"column":"status","similarity":0.5772237526402182}],"sales_quotes":[{"column":"valid_until","similarity":0.5888547647382517},{"column":"status","similarity":0.587261164996558}],"asset_maintenance":[{"column":"completed_date","similarity":0.586704390488891}],"purchase_requisitions":[{"column":"status","similarity":0.5849457914930625},{"column":"approved_date","similarity":0.5749663116518828}],"inventory_levels":[{"column":"last_count_date","similarity":0.5761760152247924}],"vendor_invoices":[{"column":"status","similarity":0.5752789063344165}]},"fused_scores":[{"table":"stock_transfers","fused":0.8764563888067298,"table_sim":0.7091850354041176,"col_score":1.1273634189106483},{"table":"asset_transfers","fused":0.755182221494287,"table_sim":0.59288750153646,"col_score":0.9986243014310277},{"table":"product_suppliers","fused":0.7217691889646848,"table_sim":0.5817884382151997,"col_score":0.9317403150889125},{"table":"transfer_lines","fused":0.7116738954837423,"table_sim":0.646870577681612,"col_score":0.8088788721869374},{"table":"products","fused":0.7113739265224104,"table_sim":0.5634067444500328,"col_score":0.9333246996309765},{"table":"sales_orders","fused":0.696850614485639,"table_sim":0.5561090865394333,"col_score":0.9079629064049475},{"table":"purchase_orders","fused":0.6910910850102567,"table_sim":0.5596151991091506,"col_score":0.8883049138619161},{"table":"sales_opportunities","fused":0.6905979853382933,"table_sim":0.5491462356670244,"col_score":0.9027756098451968},{"table":"inventory_transactions","fused":0.6899859150173733,"table_sim":0.5602292192430635,"col_score":0.884620958678838},{"table":"bank_transactions","fused":0.6727310754129798,"table_sim":0.5331448467569079,"col_score":0.8821104183970878},{"table":"goods_receipts","fused":0.6677971090655958,"table_sim":0.5680812156740983,"col_score":0.8173709491528419},{"table":"inventory_adjustments","fused":0.6353600034236506,"table_sim":0.530733629333142,"col_score":0.7922995645594134},{"table":"purchase_requisitions","fused":0.6318416978521664,"table_sim":0.5332712706373074,"col_score":0.7796973386744547},{"table":"fixed_assets","fused":0.582629538090638,"table_sim":0.5580960077160902,"col_score":0.6194298336524596},{"table":"asset_maintenance","fused":0.5631160413798995,"table_sim":0.5473904753072384,"col_score":0.586704390488891}],"fk_expansion_candidates":24,"fk_expansion_added":2,"fk_expansion_blocked_count":19,"fk_expansion_blocked":[{"table":"employees","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"sales_quotes","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"bank_accounts","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":24,"total_retrieval_latency_ms":30,"sql_generated":"SELECT DISTINCT p.product_id, p.name FROM products AS p JOIN inventory_transactions AS it ON p.product_id = it.product_id AND it.transaction_date >= CURRENT_DATE - INTERVAL '30 days' WHERE EXISTS (SELECT 1 FROM stock_transfers st WHERE st.product_id = p.product_id);","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column st.product_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":5,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":3528,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column st.product_id does not exist"}
{"timestamp":"2026-01-29T20:49:38.478Z","query_id":"bc1f7598-1dd4-4283-a971-1f05d9f50fae","question":"What is the total spend by vendor this year?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["vendor_invoices","purchase_orders","vendors","project_expenses","vendor_invoice_lines","budgets","project_budgets","sales_orders","product_suppliers","purchase_requisitions","budget_lines","fiscal_years"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"vendor_invoices","similarity":0.639424435349415},{"table":"vendors","similarity":0.6244918790926227},{"table":"purchase_orders","similarity":0.6177456671712362},{"table":"product_suppliers","similarity":0.598703660216106},{"table":"fiscal_years","similarity":0.5958886040093712},{"table":"project_expenses","similarity":0.5917559199865416},{"table":"vendor_contacts","similarity":0.5871352454607119},{"table":"project_budgets","similarity":0.5783111700735831},{"table":"vendor_invoice_lines","similarity":0.5735528102960924},{"table":"budgets","similarity":0.5729808761794307},{"table":"sales_orders","similarity":0.558652322840589},{"table":"purchase_requisitions","similarity":0.5504399922373249},{"table":"fiscal_periods","similarity":0.5474194111304026},{"table":"goods_receipts","similarity":0.5455071550265284},{"table":"cost_centers","similarity":0.5407092339260996}],"column_hits_per_table":{"vendor_invoices":10,"budgets":2,"purchase_orders":5,"vendor_invoice_lines":3,"vendors":9,"project_expenses":3,"project_budgets":2,"sales_orders":2,"product_suppliers":2,"sales_quotes":2,"projects":1,"fixed_assets":3,"asset_maintenance":1,"budget_lines":1,"products":1,"depreciation_schedules":1,"purchase_requisitions":1,"cost_centers":1},"top_columns_per_table":{"vendor_invoices":[{"column":"total","similarity":0.7074726026964867},{"column":"tax_amount","similarity":0.6649497692347739},{"column":"amount_paid","similarity":0.6613394434119355}],"budgets":[{"column":"total_amount","similarity":0.6614983036750417},{"column":"approved_by","similarity":0.5947070667678063}],"purchase_orders":[{"column":"total","similarity":0.6515245249628966},{"column":"tax_amount","similarity":0.6241597829948147},{"column":"vendor_id","similarity":0.6143595728723519}],"vendor_invoice_lines":[{"column":"unit_cost","similarity":0.6418835765382308},{"column":"amount","similarity":0.640406660125043},{"column":"quantity","similarity":0.6011977568369454}],"vendors":[{"column":"payment_terms","similarity":0.6369764670557316},{"column":"vendor_number","similarity":0.6217316370349235},{"column":"phone","similarity":0.6164215736258496}],"project_expenses":[{"column":"expense_date","similarity":0.6340219496762818},{"column":"amount","similarity":0.6226087404303633},{"column":"approved_by","similarity":0.5951826173297748}],"project_budgets":[{"column":"actual_amount","similarity":0.6339228432560066},{"column":"planned_amount","similarity":0.6124397686150321}],"sales_orders":[{"column":"total","similarity":0.6331667607848637},{"column":"tax_amount","similarity":0.5979011469280059}],"product_suppliers":[{"column":"unit_cost","similarity":0.627453917704397},{"column":"vendor_id","similarity":0.6081443532598847}],"sales_quotes":[{"column":"total","similarity":0.6239159141661016},{"column":"tax_amount","similarity":0.5928428446380807}],"projects":[{"column":"budget","similarity":0.6156140380189964}],"fixed_assets":[{"column":"vendor_id","similarity":0.6143746297105622},{"column":"purchase_cost","similarity":0.6016807292507821},{"column":"purchase_date","similarity":0.5932914020371511}],"asset_maintenance":[{"column":"vendor_id","similarity":0.6041941466937952}],"budget_lines":[{"column":"amount","similarity":0.6028914729549076}],"products":[{"column":"unit_cost","similarity":0.59947881070682}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5989680887270853}],"purchase_requisitions":[{"column":"approved_date","similarity":0.5937593260844434}],"cost_centers":[{"column":"is_active","similarity":0.5896614020585967}]},"fused_scores":[{"table":"vendor_invoices","fused":0.7996336561351984,"table_sim":0.639424435349415,"col_score":1.0399474873138737},{"table":"purchase_orders","fused":0.7560891668868633,"table_sim":0.6177456671712362,"col_score":0.9636044164603039},{"table":"vendors","fused":0.753832041684851,"table_sim":0.6244918790926227,"col_score":0.9478422855731934},{"table":"project_expenses","fused":0.7331840799485103,"table_sim":0.5917559199865416,"col_score":0.9453263198914634},{"table":"vendor_invoice_lines","fused":0.7289664488179564,"table_sim":0.5735528102960924,"col_score":0.9620869066007522},{"table":"budgets","fused":0.7273292605312365,"table_sim":0.5729808761794307,"col_score":0.9588518370589448},{"table":"project_budgets","fused":0.723043793069559,"table_sim":0.5783111700735831,"col_score":0.9401427275635226},{"table":"sales_orders","fused":0.7080383274039,"table_sim":0.558652322840589,"col_score":0.9321173342488667},{"table":"product_suppliers","fused":0.6953439726678063,"table_sim":0.598703660216106,"col_score":0.8403044413453566},{"table":"purchase_requisitions","fused":0.5677677257761723,"table_sim":0.5504399922373249,"col_score":0.5937593260844434},{"table":"cost_centers","fused":0.48953073293206684,"table_sim":0.5407092339260996,"col_score":0.4127629814410177},{"table":"sales_quotes","fused":0.3681349345940568,"table_sim":0,"col_score":0.9203373364851419},{"table":"fixed_assets","fused":0.3593305721077431,"table_sim":0,"col_score":0.8983264302693577},{"table":"fiscal_years","fused":0.35753316240562266,"table_sim":0.5958886040093712,"col_score":0},{"table":"vendor_contacts","fused":0.3522811472764272,"table_sim":0.5871352454607119,"col_score":0}],"fk_expansion_candidates":18,"fk_expansion_added":2,"fk_expansion_blocked_count":10,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"goods_receipts","reason":"max_tables"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"max_tables"},{"table":"projects","reason":"max_tables"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"vendor_contacts","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":48,"total_retrieval_latency_ms":54,"sql_generated":"SELECT v.vendor_id, SUM(vi.amount) AS total_spend FROM vendor_invoices vi JOIN vendors v ON vi.vendor_id = v.vendor_id WHERE EXTRACT(YEAR FROM vi.invoice_date) = EXTRACT(YEAR FROM CURRENT_DATE) GROUP BY v.vendor_id;","tables_used_in_sql":[],"total_latency_ms":3520,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T20:49:41.998Z","query_id":"8b516fa7-45b2-493b-8abe-f1a1fcb3b61c","question":"List purchase orders that are overdue (expected date passed but not received)","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["purchase_orders","sales_orders","purchase_requisitions","vendor_invoices","goods_receipts","order_lines","performance_reviews","po_lines","timesheets","stock_transfers","fixed_assets","receipt_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"purchase_orders","similarity":0.6892780734130105},{"table":"sales_orders","similarity":0.6436897773327827},{"table":"goods_receipts","similarity":0.6352418457409176},{"table":"purchase_requisitions","similarity":0.6320653594363884},{"table":"order_lines","similarity":0.6266578306760409},{"table":"vendor_invoices","similarity":0.6080136686064002},{"table":"po_lines","similarity":0.6011866959038077},{"table":"requisition_lines","similarity":0.5693577300655596},{"table":"receipt_lines","similarity":0.5677454518528996},{"table":"product_suppliers","similarity":0.5615090637021368},{"table":"stock_transfers","similarity":0.5602310027454163},{"table":"timesheets","similarity":0.5554457572922294},{"table":"sales_opportunities","similarity":0.545868201128478},{"table":"performance_reviews","similarity":0.5450261489382808},{"table":"vendor_invoice_lines","similarity":0.5442160951221834}],"column_hits_per_table":{"purchase_orders":15,"sales_orders":8,"purchase_requisitions":6,"vendor_invoices":3,"fixed_assets":1,"stock_transfers":1,"performance_reviews":3,"order_lines":3,"goods_receipts":2,"sales_opportunities":1,"sales_quotes":2,"po_lines":2,"inventory_transactions":1,"timesheets":2},"top_columns_per_table":{"purchase_orders":[{"column":"expected_date","similarity":0.7928880554606059},{"column":"order_date","similarity":0.7657440492397745},{"column":"status","similarity":0.7519184819415597}],"sales_orders":[{"column":"order_date","similarity":0.7211283730098031},{"column":"required_date","similarity":0.7169867205643441},{"column":"ship_date","similarity":0.709284550816042}],"purchase_requisitions":[{"column":"approved_date","similarity":0.6836791699738378},{"column":"request_date","similarity":0.6834968678419967},{"column":"required_date","similarity":0.6788387331991973}],"vendor_invoices":[{"column":"due_date","similarity":0.6486593581769071},{"column":"status","similarity":0.6338796222049127},{"column":"invoice_date","similarity":0.6295602886682071}],"fixed_assets":[{"column":"purchase_date","similarity":0.6430714322189274}],"stock_transfers":[{"column":"requested_date","similarity":0.637706246401799}],"performance_reviews":[{"column":"review_date","similarity":0.6367120823797185},{"column":"review_period_end","similarity":0.6226937978004472},{"column":"review_period_start","similarity":0.6126884795240689}],"order_lines":[{"column":"quantity_shipped","similarity":0.6309090622279526},{"column":"order_id","similarity":0.615272097850357},{"column":"product_id","similarity":0.6125179904480164}],"goods_receipts":[{"column":"po_id","similarity":0.6298071972797271},{"column":"receipt_date","similarity":0.6286410440687602}],"sales_opportunities":[{"column":"expected_close_date","similarity":0.6266064464168489}],"sales_quotes":[{"column":"status","similarity":0.6252578342715298},{"column":"valid_until","similarity":0.6173297581247675}],"po_lines":[{"column":"po_id","similarity":0.6215991718566652},{"column":"quantity_received","similarity":0.6148659346007377}],"inventory_transactions":[{"column":"transaction_date","similarity":0.6171947868805752}],"timesheets":[{"column":"status","similarity":0.6144646954961696},{"column":"approved_date","similarity":0.6115859961900876}]},"fused_scores":[{"table":"purchase_orders","fused":0.8838708760800036,"table_sim":0.6892780734130105,"col_score":1.1757600800804933},{"table":"sales_orders","fused":0.8180625597164597,"table_sim":0.6436897773327827,"col_score":1.079621733291975},{"table":"purchase_requisitions","fused":0.7894102572197675,"table_sim":0.6320653594363884,"col_score":1.0254276038948362},{"table":"vendor_invoices","fused":0.7501840021682444,"table_sim":0.6080136686064002,"col_score":0.9634395025110107},{"table":"goods_receipts","fused":0.7207745326912165,"table_sim":0.6352418457409176,"col_score":0.8490735631166647},{"table":"order_lines","fused":0.7144964169958555,"table_sim":0.6266578306760409,"col_score":0.8462542964755775},{"table":"performance_reviews","fused":0.7062392818749454,"table_sim":0.5450261489382808,"col_score":0.9480589812799421},{"table":"po_lines","fused":0.6936822754425128,"table_sim":0.6011866959038077,"col_score":0.8324256447505705},{"table":"timesheets","fused":0.6639269102208365,"table_sim":0.5554457572922294,"col_score":0.8266486396137469},{"table":"stock_transfers","fused":0.5912211002079693,"table_sim":0.5602310027454163,"col_score":0.637706246401799},{"table":"sales_opportunities","fused":0.5781634992438264,"table_sim":0.545868201128478,"col_score":0.6266064464168489},{"table":"requisition_lines","fused":0.3416146380393357,"table_sim":0.5693577300655596,"col_score":0},{"table":"receipt_lines","fused":0.34064727111173976,"table_sim":0.5677454518528996,"col_score":0},{"table":"product_suppliers","fused":0.3369054382212821,"table_sim":0.5615090637021368,"col_score":0},{"table":"sales_quotes","fused":0.3344680000479212,"table_sim":0,"col_score":0.8361700001198029}],"fk_expansion_candidates":14,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"requisition_lines","reason":"max_tables"},{"table":"sales_quotes","reason":"max_tables"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":35,"total_retrieval_latency_ms":41,"sql_generated":"SELECT po.po_id AS \"Purchase Order ID\", po.po_number AS \"Purchase Order Number\", po.order_date, po.required_date, po.status AS \"Status\" FROM purchase_orders po JOIN goods_receipts gr ON po.po_id = gr.po_id AND gr.receipt_date > CURRENT_DATE WHERE po.expected_date < CURRENT_DATE;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column po.required_date does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":5,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":3986,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column po.required_date does not exist"}
{"timestamp":"2026-01-29T20:49:45.984Z","query_id":"4b35ce71-09a5-4b75-8d45-50b78a640c18","question":"Show the approval rate for purchase requisitions","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["purchase_requisitions","purchase_orders","requisition_lines","performance_reviews","sales_orders","inventory_adjustments","employee_salaries","vendor_invoices","tax_rates","product_suppliers","fixed_assets","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"purchase_requisitions","similarity":0.7144537875190509},{"table":"purchase_orders","similarity":0.6754585362390629},{"table":"requisition_lines","similarity":0.6526067337493826},{"table":"performance_reviews","similarity":0.5761025171829891},{"table":"vendor_invoices","similarity":0.5620813724541878},{"table":"sales_orders","similarity":0.5600540620423634},{"table":"inventory_adjustments","similarity":0.5560987141173879},{"table":"tax_rates","similarity":0.5556126665897644},{"table":"goods_receipts","similarity":0.5543356866163649},{"table":"certifications","similarity":0.5535315897541819},{"table":"product_suppliers","similarity":0.5532001558068573},{"table":"employee_salaries","similarity":0.5514561137792826},{"table":"po_lines","similarity":0.5507992972695006},{"table":"sales_territories","similarity":0.5472861793239767},{"table":"products","similarity":0.5453782545044963}],"column_hits_per_table":{"purchase_requisitions":11,"purchase_orders":12,"requisition_lines":5,"inventory_adjustments":1,"budgets":1,"performance_reviews":2,"employee_salaries":1,"project_expenses":1,"fixed_assets":2,"order_lines":1,"sales_orders":5,"timesheets":2,"tax_rates":1,"vendor_invoices":1,"project_resources":1,"quote_lines":1,"leave_requests":1,"product_suppliers":1},"top_columns_per_table":{"purchase_requisitions":[{"column":"approved_date","similarity":0.7767304385632029},{"column":"approved_by","similarity":0.7409449955495064},{"column":"requisition_number","similarity":0.7030808814464901}],"purchase_orders":[{"column":"approved_by","similarity":0.6946429533793925},{"column":"requisition_id","similarity":0.6718178582077006},{"column":"total","similarity":0.6683455402204478}],"requisition_lines":[{"column":"requisition_id","similarity":0.6376933087031063},{"column":"estimated_unit_cost","similarity":0.6333969557807274},{"column":"estimated_total","similarity":0.6312495690965759}],"inventory_adjustments":[{"column":"approved_by","similarity":0.6329021901958755}],"budgets":[{"column":"approved_by","similarity":0.6302903790830208}],"performance_reviews":[{"column":"goals_met_percent","similarity":0.6188795533101473},{"column":"rating","similarity":0.5953158785793504}],"employee_salaries":[{"column":"approved_by","similarity":0.6123122319484439}],"project_expenses":[{"column":"approved_by","similarity":0.6113584792040475}],"fixed_assets":[{"column":"purchase_cost","similarity":0.6112437587362358},{"column":"purchase_date","similarity":0.5752418077647418}],"order_lines":[{"column":"discount_percent","similarity":0.6107292969296323}],"sales_orders":[{"column":"total","similarity":0.607277665069308},{"column":"tax_amount","similarity":0.5855697288885665},{"column":"shipping_cost","similarity":0.5854713890413684}],"timesheets":[{"column":"approved_by","similarity":0.6059821911915741},{"column":"approved_date","similarity":0.5902187567696575}],"tax_rates":[{"column":"rate","similarity":0.5848985367091032}],"vendor_invoices":[{"column":"total","similarity":0.5829198135909294}],"project_resources":[{"column":"hourly_rate","similarity":0.5785087387167567}],"quote_lines":[{"column":"discount_percent","similarity":0.5783180170181821}],"leave_requests":[{"column":"approved_by","similarity":0.5782476386378983}],"product_suppliers":[{"column":"unit_cost","similarity":0.5763419254825446}]},"fused_scores":[{"table":"purchase_requisitions","fused":0.887553447046613,"table_sim":0.7144537875190509,"col_score":1.1472029363379561},{"table":"purchase_orders","fused":0.8168014111392844,"table_sim":0.6754585362390629,"col_score":1.0288157234896165},{"table":"requisition_lines","fused":0.7711727363812357,"table_sim":0.6526067337493826,"col_score":0.9490217403290153},{"table":"performance_reviews","fused":0.7122765073497226,"table_sim":0.5761025171829891,"col_score":0.9165374925998225},{"table":"sales_orders","fused":0.6960574490308546,"table_sim":0.5600540620423634,"col_score":0.9000625295135913},{"table":"inventory_adjustments","fused":0.5868201045487829,"table_sim":0.5560987141173879,"col_score":0.6329021901958755},{"table":"employee_salaries","fused":0.5757985610469472,"table_sim":0.5514561137792826,"col_score":0.6123122319484439},{"table":"vendor_invoices","fused":0.5704167489088845,"table_sim":0.5620813724541878,"col_score":0.5829198135909294},{"table":"tax_rates","fused":0.5673270146374999,"table_sim":0.5556126665897644,"col_score":0.5848985367091032},{"table":"product_suppliers","fused":0.5624568636771322,"table_sim":0.5532001558068573,"col_score":0.5763419254825446},{"table":"timesheets","fused":0.3604366278305612,"table_sim":0,"col_score":0.9010915695764029},{"table":"fixed_assets","fused":0.35954586504744274,"table_sim":0,"col_score":0.8988646626186068},{"table":"goods_receipts","fused":0.3326014119698189,"table_sim":0.5543356866163649,"col_score":0},{"table":"certifications","fused":0.33211895385250917,"table_sim":0.5535315897541819,"col_score":0},{"table":"po_lines","fused":0.33047957836170033,"table_sim":0.5507992972695006,"col_score":0}],"fk_expansion_candidates":15,"fk_expansion_added":2,"fk_expansion_blocked_count":10,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"countries","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"order_lines","reason":"max_tables"},{"table":"po_lines","reason":"max_tables"},{"table":"products","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":41,"total_retrieval_latency_ms":47,"sql_generated":"SELECT COUNT(DISTINCT p.po_id) AS approved_requisitions, COUNT(*) AS total_requisitions FROM purchase_orders p JOIN purchase_requisitions pr ON p.po_id = pr.requisition_id WHERE pr.status = 'approved' GROUP BY p.po_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":109,"total_latency_ms":1140}
{"timestamp":"2026-01-29T20:49:47.124Z","query_id":"c9429f38-9bf7-4380-8348-88924f6c7b36","question":"What is the total debit and credit for each account in the current period?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["bank_accounts","depreciation_entries","depreciation_schedules","bank_transactions","project_budgets","budgets","budget_lines","asset_categories","chart_of_accounts","customers","account_types","currencies"],"tables_from_table_retrieval":15,"tables_from_column_only":14,"tables_from_fk_expansion":2,"table_scores":[{"table":"bank_accounts","similarity":0.6774767745272873},{"table":"depreciation_entries","similarity":0.6479655202571633},{"table":"depreciation_schedules","similarity":0.6391071490249879},{"table":"bank_transactions","similarity":0.6215432609525777},{"table":"fiscal_periods","similarity":0.6118740658020915},{"table":"chart_of_accounts","similarity":0.6113283904518393},{"table":"customers","similarity":0.6110220975215452},{"table":"budget_lines","similarity":0.6048243661703417},{"table":"asset_categories","similarity":0.6023939402123736},{"table":"fiscal_years","similarity":0.5978109896942982},{"table":"account_types","similarity":0.5864823487782337},{"table":"budgets","similarity":0.5831943330024605},{"table":"project_budgets","similarity":0.5816505947654121},{"table":"project_milestones","similarity":0.5761644998941425},{"table":"currencies","similarity":0.5748021002449325}],"column_hits_per_table":{"bank_accounts":7,"depreciation_entries":7,"depreciation_schedules":7,"budgets":2,"purchase_orders":1,"bank_transactions":2,"vendor_invoices":1,"sales_orders":1,"asset_categories":1,"timesheets":1,"project_budgets":2,"po_lines":1,"departments":1,"requisition_lines":1,"order_lines":1,"sales_quotes":1,"journal_lines":1,"chart_of_accounts":1,"quote_lines":1,"customers":1,"fiscal_periods":1,"project_milestones":1,"budget_lines":2,"projects":1,"account_types":1,"project_expenses":2,"fixed_assets":1},"top_columns_per_table":{"bank_accounts":[{"column":"current_balance","similarity":0.7120054679865145},{"column":"account_number","similarity":0.6364628577177703},{"column":"is_active","similarity":0.632098349114848}],"depreciation_entries":[{"column":"amount","similarity":0.6892663698793005},{"column":"accumulated_depreciation","similarity":0.6791254877457136},{"column":"period_id","similarity":0.6601758928161718}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.6787718767673881},{"column":"monthly_amount","similarity":0.6713352089955611},{"column":"start_date","similarity":0.6503470632369572}],"budgets":[{"column":"total_amount","similarity":0.6681667214131277},{"column":"status","similarity":0.6095485585752322}],"purchase_orders":[{"column":"total","similarity":0.6434681983394138}],"bank_transactions":[{"column":"amount","similarity":0.6348031550733443},{"column":"transaction_date","similarity":0.5964424364374886}],"vendor_invoices":[{"column":"total","similarity":0.6257147661276886}],"sales_orders":[{"column":"total","similarity":0.6246642633195769}],"asset_categories":[{"column":"depreciation_method","similarity":0.6243470467444369}],"timesheets":[{"column":"total_hours","similarity":0.622973004430975}],"project_budgets":[{"column":"actual_amount","similarity":0.6207060762728754},{"column":"planned_amount","similarity":0.5975993619104593}],"po_lines":[{"column":"line_total","similarity":0.618555602548407}],"departments":[{"column":"budget","similarity":0.6174730859005904}],"requisition_lines":[{"column":"estimated_total","similarity":0.6165631045407493}],"order_lines":[{"column":"line_total","similarity":0.613699532542915}],"sales_quotes":[{"column":"total","similarity":0.6116576686122673}],"journal_lines":[{"column":"debit","similarity":0.6112275365658976}],"chart_of_accounts":[{"column":"account_number","similarity":0.6099549185272944}],"quote_lines":[{"column":"line_total","similarity":0.608422423187917}],"customers":[{"column":"credit_limit","similarity":0.6083072987668613}],"fiscal_periods":[{"column":"period_number","similarity":0.606657627375224}],"project_milestones":[{"column":"amount","similarity":0.6040594662589831}],"budget_lines":[{"column":"account_id","similarity":0.6034178781484847},{"column":"amount","similarity":0.600705481796664}],"projects":[{"column":"budget","similarity":0.6025614577990223}],"account_types":[{"column":"normal_balance","similarity":0.6015543450293432}],"project_expenses":[{"column":"amount","similarity":0.6014681875671599},{"column":"status","similarity":0.5964895591217514}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5971563516971157}]},"fused_scores":[{"table":"bank_accounts","fused":0.8185808234545322,"table_sim":0.6774767745272873,"col_score":1.0302368968453997},{"table":"depreciation_entries","fused":0.8003109576551608,"table_sim":0.6479655202571633,"col_score":1.0288291137521572},{"table":"depreciation_schedules","fused":0.7892400819210602,"table_sim":0.6391071490249879,"col_score":1.0144394812651687},{"table":"bank_transactions","fused":0.7461357058883822,"table_sim":0.6215432609525777,"col_score":0.9330243732920886},{"table":"project_budgets","fused":0.7167926597504893,"table_sim":0.5816505947654121,"col_score":0.9195057572281051},{"table":"budgets","fused":0.7025200865672598,"table_sim":0.5831943330024605,"col_score":0.881508716914459},{"table":"budget_lines","fused":0.6876553153616585,"table_sim":0.6048243661703417,"col_score":0.8119017391486336},{"table":"asset_categories","fused":0.6111751828251989,"table_sim":0.6023939402123736,"col_score":0.6243470467444369},{"table":"chart_of_accounts","fused":0.6107790016820214,"table_sim":0.6113283904518393,"col_score":0.6099549185272944},{"table":"customers","fused":0.6099361780196717,"table_sim":0.6110220975215452,"col_score":0.6083072987668613},{"table":"fiscal_periods","fused":0.6097874904313445,"table_sim":0.6118740658020915,"col_score":0.606657627375224},{"table":"account_types","fused":0.5925111472786775,"table_sim":0.5864823487782337,"col_score":0.6015543450293432},{"table":"project_milestones","fused":0.5873224864400788,"table_sim":0.5761644998941425,"col_score":0.6040594662589831},{"table":"fiscal_years","fused":0.3586865938165789,"table_sim":0.5978109896942982,"col_score":0},{"table":"currencies","fused":0.34488126014695947,"table_sim":0.5748021002449325,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":11,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"max_tables"},{"table":"fiscal_years","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":13,"total_retrieval_latency_ms":19,"sql_generated":"SELECT ca.account_id, SUM(bt.amount) AS total_debit, SUM(at.amount) AS total_credit FROM chart_of_accounts ca LEFT JOIN bank_transactions bt ON ca.account_id = bt.bank_account_id AND bt.transaction_type = 'Debit' AND bt.reconciled = TRUE AND bt.created_at >= CURRENT_DATE - INTERVAL '1 month' LEFT JOIN account_types at ON ca.account_type_id = at.type_id WHERE ca.is_active = TRUE GROUP BY ca.account_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column at.amount does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":5,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":5594,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column at.amount does not exist"}
{"timestamp":"2026-01-29T20:49:52.719Z","query_id":"1de284cf-2cf0-4536-aca5-200869bb980f","question":"List all posted journal entries for the current month","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["journal_entries","journal_lines","depreciation_entries","timesheet_entries","depreciation_schedules","performance_reviews","goods_receipts","project_milestones","timesheets","purchase_orders","chart_of_accounts","fiscal_periods"],"tables_from_table_retrieval":15,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"journal_entries","similarity":0.7371200347881697},{"table":"depreciation_entries","similarity":0.6388628310824237},{"table":"journal_lines","similarity":0.6381042717949331},{"table":"timesheet_entries","similarity":0.591409348833156},{"table":"fiscal_years","similarity":0.5469848742333804},{"table":"depreciation_schedules","similarity":0.5458362894331688},{"table":"goods_receipts","similarity":0.5400655622918485},{"table":"fiscal_periods","similarity":0.5399686868510553},{"table":"audit_log","similarity":0.5390638198818073},{"table":"budget_lines","similarity":0.5319608633212602},{"table":"project_milestones","similarity":0.5228205781898283},{"table":"performance_reviews","similarity":0.5210833445978394},{"table":"chart_of_accounts","similarity":0.5176304204490154},{"table":"asset_categories","similarity":0.5110443557995631},{"table":"project_phases","similarity":0.5032511717491329}],"column_hits_per_table":{"journal_entries":9,"journal_lines":7,"depreciation_entries":5,"timesheet_entries":7,"goods_receipts":2,"timesheets":3,"performance_reviews":3,"depreciation_schedules":3,"purchase_orders":2,"project_budgets":1,"sales_orders":2,"asset_maintenance":1,"maintenance_types":1,"project_expenses":1,"inventory_adjustments":1,"project_milestones":2},"top_columns_per_table":{"journal_entries":[{"column":"entry_date","similarity":0.7704936692205318},{"column":"status","similarity":0.7328960805042452},{"column":"posted_by","similarity":0.7019037298711207}],"journal_lines":[{"column":"debit","similarity":0.6580411774438369},{"column":"entry_id","similarity":0.6510961590410065},{"column":"credit","similarity":0.6359552498526305}],"depreciation_entries":[{"column":"entry_date","similarity":0.654431660506666},{"column":"journal_entry_id","similarity":0.6411698211827205},{"column":"period_id","similarity":0.5838462892330042}],"timesheet_entries":[{"column":"entry_date","similarity":0.6446211675734115},{"column":"description","similarity":0.5882230085427652},{"column":"entry_id","similarity":0.5722846831520506}],"goods_receipts":[{"column":"receipt_date","similarity":0.6047305754742575},{"column":"notes","similarity":0.5914014074550097}],"timesheets":[{"column":"submitted_date","similarity":0.6034062021491217},{"column":"status","similarity":0.5605065629261864},{"column":"approved_date","similarity":0.5574665928060918}],"performance_reviews":[{"column":"review_date","similarity":0.5928778431249968},{"column":"review_period_end","similarity":0.5846942408306532},{"column":"review_period_start","similarity":0.5843927700621266}],"depreciation_schedules":[{"column":"end_date","similarity":0.5723218581493166},{"column":"start_date","similarity":0.5661921664416115},{"column":"useful_life_months","similarity":0.5592927836677546}],"purchase_orders":[{"column":"expected_date","similarity":0.5705593782125117},{"column":"order_date","similarity":0.5577237956734042}],"project_budgets":[{"column":"notes","similarity":0.5704481753860894}],"sales_orders":[{"column":"order_date","similarity":0.5574635444979215},{"column":"ship_date","similarity":0.5551436110758307}],"asset_maintenance":[{"column":"completed_date","similarity":0.5574353291980277}],"maintenance_types":[{"column":"frequency_months","similarity":0.5568999551121173}],"project_expenses":[{"column":"expense_date","similarity":0.5566292234027648}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.556301592294009}],"project_milestones":[{"column":"due_date","similarity":0.5548577873367307},{"column":"completed_date","similarity":0.5539763120091956}]},"fused_scores":[{"table":"journal_entries","fused":0.8908502345353386,"table_sim":0.7371200347881697,"col_score":1.121445534156092},{"table":"journal_lines","fused":0.7732700840250207,"table_sim":0.6381042717949331,"col_score":0.9760188023701521},{"table":"depreciation_entries","fused":0.7611368329631072,"table_sim":0.6388628310824237,"col_score":0.9445478357841326},{"table":"timesheet_entries","fused":0.7271270215198551,"table_sim":0.591409348833156,"col_score":0.9307035305499038},{"table":"depreciation_schedules","fused":0.6696689502079503,"table_sim":0.5458362894331688,"col_score":0.8554179413701224},{"table":"performance_reviews","fused":0.666739992174833,"table_sim":0.5210833445978394,"col_score":0.8852249635403234},{"table":"goods_receipts","fused":0.6487277646085134,"table_sim":0.5400655622918485,"col_score":0.8117210680835109},{"table":"project_milestones","fused":0.6464307242504284,"table_sim":0.5228205781898283,"col_score":0.8318459433413286},{"table":"timesheets","fused":0.35285579942086703,"table_sim":0,"col_score":0.8821394985521676},{"table":"purchase_orders","fused":0.33976851041968553,"table_sim":0,"col_score":0.8494212760492138},{"table":"sales_orders","fused":0.3340141400143347,"table_sim":0,"col_score":0.8350353500358367},{"table":"fiscal_years","fused":0.32819092454002824,"table_sim":0.5469848742333804,"col_score":0},{"table":"fiscal_periods","fused":0.32398121211063313,"table_sim":0.5399686868510553,"col_score":0},{"table":"audit_log","fused":0.32343829192908435,"table_sim":0.5390638198818073,"col_score":0},{"table":"budget_lines","fused":0.31917651799275615,"table_sim":0.5319608633212602,"col_score":0}],"fk_expansion_candidates":14,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":19,"total_retrieval_latency_ms":25,"sql_generated":"SELECT j.entry_id AS entry_id, j.entry_number AS entry_number, j.entry_date AS entry_date, jl.debit AS debit, jl.credit AS credit FROM journal_entries j JOIN journal_lines jl ON j.entry_id = jl.entry_id WHERE EXTRACT(MONTH FROM CURRENT_DATE) = EXTRACT(MONTH FROM j.entry_date);","tables_used_in_sql":[],"total_latency_ms":4672,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T20:49:57.391Z","query_id":"3a4c12cf-ece0-42cf-8f49-e333fdcf4158","question":"Show budget vs actual spending by department","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["budgets","project_budgets","departments","project_expenses","budget_lines","fiscal_periods","cost_centers","fiscal_years","depreciation_schedules","purchase_requisitions","depreciation_entries","fixed_assets"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"budgets","similarity":0.6743467953278661},{"table":"project_budgets","similarity":0.6399342167994372},{"table":"budget_lines","similarity":0.6120027063639643},{"table":"departments","similarity":0.6078621456074449},{"table":"cost_centers","similarity":0.5976264909955187},{"table":"project_expenses","similarity":0.5925480261881607},{"table":"fiscal_periods","similarity":0.5508242618316114},{"table":"fiscal_years","similarity":0.5297470824133431},{"table":"purchase_requisitions","similarity":0.5091655209627607},{"table":"positions","similarity":0.5048661154254893},{"table":"depreciation_entries","similarity":0.49557827959519485},{"table":"depreciation_schedules","similarity":0.48960068033897763},{"table":"business_units","similarity":0.4799656071405569},{"table":"bank_accounts","similarity":0.47991777986203277},{"table":"employee_salaries","similarity":0.4787495684544676}],"column_hits_per_table":{"departments":5,"budgets":8,"project_budgets":6,"cost_centers":3,"budget_lines":5,"projects":1,"project_expenses":10,"purchase_requisitions":1,"fiscal_periods":4,"employees":1,"fiscal_years":1,"positions":1,"fixed_assets":1,"journal_lines":1,"depreciation_schedules":1,"asset_maintenance":1},"top_columns_per_table":{"departments":[{"column":"budget","similarity":0.7508816231830893},{"column":"name","similarity":0.5807613926469624},{"column":"parent_department_id","similarity":0.576838586583815}],"budgets":[{"column":"department_id","similarity":0.7124132689447956},{"column":"total_amount","similarity":0.6738486234633608},{"column":"status","similarity":0.6545539781274986}],"project_budgets":[{"column":"actual_amount","similarity":0.6727544749805415},{"column":"category","similarity":0.6432702298136043},{"column":"planned_amount","similarity":0.6345451040343791}],"cost_centers":[{"column":"department_id","similarity":0.6447254284668595},{"column":"is_active","similarity":0.5741948148052456},{"column":"code","similarity":0.5336285679368914}],"budget_lines":[{"column":"amount","similarity":0.6347292734898708},{"column":"budget_id","similarity":0.6254333624544377},{"column":"period_id","similarity":0.6014529896644097}],"projects":[{"column":"budget","similarity":0.6320788528452682}],"project_expenses":[{"column":"amount","similarity":0.6129047067883163},{"column":"category","similarity":0.6079498441831898},{"column":"is_billable","similarity":0.6033626054361303}],"purchase_requisitions":[{"column":"department_id","similarity":0.5964169191021919}],"fiscal_periods":[{"column":"period_number","similarity":0.5636129011166751},{"column":"is_closed","similarity":0.5509300436603198},{"column":"fiscal_year_id","similarity":0.5466861860533114}],"employees":[{"column":"department_id","similarity":0.5532234163970625}],"fiscal_years":[{"column":"year","similarity":0.545470788921557}],"positions":[{"column":"department_id","similarity":0.5428918958420113}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5418088384489079}],"journal_lines":[{"column":"cost_center_id","similarity":0.5382510765684452}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5363986996551952}],"asset_maintenance":[{"column":"cost","similarity":0.5334437301670096}]},"fused_scores":[{"table":"budgets","fused":0.7999004207313699,"table_sim":0.6743467953278661,"col_score":0.9882308588366255},{"table":"project_budgets","fused":0.7817163660345998,"table_sim":0.6399342167994372,"col_score":0.9943895898873436},{"table":"departments","fused":0.7463765316082773,"table_sim":0.6078621456074449,"col_score":0.9541481106095261},{"table":"project_expenses","fused":0.722280667264861,"table_sim":0.5925480261881607,"col_score":0.9168796288799113},{"table":"budget_lines","fused":0.7086540039579482,"table_sim":0.6120027063639643,"col_score":0.853630950348924},{"table":"fiscal_periods","fused":0.6661257262777008,"table_sim":0.5508242618316114,"col_score":0.839077922946835},{"table":"cost_centers","fused":0.6622888817574282,"table_sim":0.5976264909955187,"col_score":0.7592824679002922},{"table":"fiscal_years","fused":0.5360365650166287,"table_sim":0.5297470824133431,"col_score":0.545470788921557},{"table":"depreciation_schedules","fused":0.5083198880654647,"table_sim":0.48960068033897763,"col_score":0.5363986996551952},{"table":"purchase_requisitions","fused":0.47249604992627015,"table_sim":0.5091655209627607,"col_score":0.4174918433715343},{"table":"positions","fused":0.45492940009105676,"table_sim":0.5048661154254893,"col_score":0.38002432708940787},{"table":"depreciation_entries","fused":0.2973469677571169,"table_sim":0.49557827959519485,"col_score":0},{"table":"business_units","fused":0.2879793642843341,"table_sim":0.4799656071405569,"col_score":0},{"table":"bank_accounts","fused":0.2879506679172196,"table_sim":0.47991777986203277,"col_score":0},{"table":"employee_salaries","fused":0.28724974107268053,"table_sim":0.4787495684544676,"col_score":0}],"fk_expansion_candidates":10,"fk_expansion_added":2,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"projects","reason":"max_tables"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":16,"total_retrieval_latency_ms":24,"sql_generated":"SELECT d.name AS department_name, b.total_amount AS planned_budget, SUM(p.actual_amount) AS total_spent FROM departments d LEFT JOIN budgets b ON d.department_id = b.department_id AND b.status = 'approved' LEFT JOIN project_expenses p ON d.department_id = p.employee_id GROUP BY d.name, b.total_amount;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column p.actual_amount does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":5,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":3950,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column p.actual_amount does not exist"}
{"timestamp":"2026-01-29T20:50:01.342Z","query_id":"257b7750-4118-41fd-900b-73d4cad609b5","question":"What is the total expense amount per project?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["project_expenses","project_budgets","projects","project_resources","project_milestones","project_tasks","requisition_lines","budgets","budget_lines","asset_maintenance","departments","fixed_assets"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_expenses","similarity":0.7357232557396823},{"table":"project_budgets","similarity":0.7124927404351951},{"table":"project_milestones","similarity":0.6341783562502439},{"table":"project_resources","similarity":0.6177078775243305},{"table":"projects","similarity":0.6089962100611707},{"table":"budgets","similarity":0.5874735154116857},{"table":"project_tasks","similarity":0.5836295939230792},{"table":"cost_centers","similarity":0.5743886856767211},{"table":"budget_lines","similarity":0.5692401404171281},{"table":"requisition_lines","similarity":0.568809612012397},{"table":"asset_maintenance","similarity":0.556437308171321},{"table":"project_phases","similarity":0.5544923606039343},{"table":"task_assignments","similarity":0.5542662222237488},{"table":"timesheet_entries","similarity":0.5468607200699919},{"table":"fixed_assets","similarity":0.5442529432134882}],"column_hits_per_table":{"project_expenses":10,"project_budgets":6,"budgets":1,"projects":3,"project_milestones":2,"budget_lines":1,"project_resources":4,"vendor_invoices":3,"project_tasks":2,"asset_maintenance":1,"requisition_lines":2,"purchase_orders":2,"product_suppliers":1,"departments":1,"depreciation_schedules":2,"maintenance_types":1,"depreciation_entries":1,"products":1,"employee_salaries":1,"sales_orders":1,"cost_centers":1,"timesheet_entries":1,"bank_transactions":1,"fixed_assets":1},"top_columns_per_table":{"project_expenses":[{"column":"amount","similarity":0.8069321519691274},{"column":"project_id","similarity":0.72552329592717},{"column":"expense_date","similarity":0.7111753013108498}],"project_budgets":[{"column":"actual_amount","similarity":0.7596350428313324},{"column":"planned_amount","similarity":0.756194071700628},{"column":"project_id","similarity":0.6872231807270061}],"budgets":[{"column":"total_amount","similarity":0.736235837789576}],"projects":[{"column":"budget","similarity":0.7109411424450727},{"column":"project_number","similarity":0.6484869706692974},{"column":"project_manager_id","similarity":0.6124675981962671}],"project_milestones":[{"column":"amount","similarity":0.6962307559454693},{"column":"project_id","similarity":0.6186499569204351}],"budget_lines":[{"column":"amount","similarity":0.6588860854730665}],"project_resources":[{"column":"allocation_percent","similarity":0.6505585041718224},{"column":"hourly_rate","similarity":0.6430651988923763},{"column":"project_id","similarity":0.6237055733666395}],"vendor_invoices":[{"column":"total","similarity":0.6370818584397956},{"column":"tax_amount","similarity":0.6095802423276043},{"column":"amount_paid","similarity":0.6062572726654026}],"project_tasks":[{"column":"estimated_hours","similarity":0.6346881176571489},{"column":"actual_hours","similarity":0.6292081296520667}],"asset_maintenance":[{"column":"cost","similarity":0.6306740793355671}],"requisition_lines":[{"column":"estimated_total","similarity":0.6280439105312469},{"column":"estimated_unit_cost","similarity":0.6261921396116479}],"purchase_orders":[{"column":"total","similarity":0.6236388264470599},{"column":"tax_amount","similarity":0.6030458658029251}],"product_suppliers":[{"column":"unit_cost","similarity":0.6212103289525712}],"departments":[{"column":"budget","similarity":0.6194099003255832}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.6193889490585814},{"column":"monthly_amount","similarity":0.6106697348487319}],"maintenance_types":[{"column":"estimated_cost","similarity":0.6191118273829425}],"depreciation_entries":[{"column":"amount","similarity":0.618608716083846}],"products":[{"column":"unit_cost","similarity":0.616078462844906}],"employee_salaries":[{"column":"amount","similarity":0.6156937669224968}],"sales_orders":[{"column":"total","similarity":0.6156140321020656}],"cost_centers":[{"column":"department_id","similarity":0.6124823312623927}],"timesheet_entries":[{"column":"project_id","similarity":0.6111509757246523}],"bank_transactions":[{"column":"amount","similarity":0.6045668994400772}],"fixed_assets":[{"column":"purchase_cost","similarity":0.604319708746374}]},"fused_scores":[{"table":"project_expenses","fused":0.9064418744936302,"table_sim":0.7357232557396823,"col_score":1.1625198026245522},{"table":"project_budgets","fused":0.8825884757337756,"table_sim":0.7124927404351951,"col_score":1.1377320786816465},{"table":"projects","fused":0.7794715771485909,"table_sim":0.6089962100611707,"col_score":1.0351846277797214},{"table":"project_resources","fused":0.7594611679618026,"table_sim":0.6177078775243305,"col_score":0.9720911036180105},{"table":"project_milestones","fused":0.7456103100971949,"table_sim":0.6341783562502439,"col_score":0.9127582408676216},{"table":"project_tasks","fused":0.7298946293471205,"table_sim":0.5836295939230792,"col_score":0.9492921824831824},{"table":"requisition_lines","fused":0.7177417593422666,"table_sim":0.568809612012397,"col_score":0.9411399803370708},{"table":"budgets","fused":0.6469784443628418,"table_sim":0.5874735154116857,"col_score":0.736235837789576},{"table":"budget_lines","fused":0.6050985184395035,"table_sim":0.5692401404171281,"col_score":0.6588860854730665},{"table":"asset_maintenance","fused":0.5861320166370194,"table_sim":0.556437308171321,"col_score":0.6306740793355671},{"table":"fixed_assets","fused":0.5682796494266424,"table_sim":0.5442529432134882,"col_score":0.604319708746374},{"table":"cost_centers","fused":0.5161282641595026,"table_sim":0.5743886856767211,"col_score":0.42873763188367486},{"table":"timesheet_entries","fused":0.4992387052448977,"table_sim":0.5468607200699919,"col_score":0.4278056830072566},{"table":"vendor_invoices","fused":0.3767487918414391,"table_sim":0,"col_score":0.9418719796035977},{"table":"purchase_orders","fused":0.370064703739409,"table_sim":0,"col_score":0.9251617593485224}],"fk_expansion_candidates":14,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"project_phases","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"timesheet_entries","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":22,"total_retrieval_latency_ms":28,"sql_generated":"SELECT p.project_id AS \"ProjectID\", SUM(pe.amount) AS \"TotalExpenses\" FROM projects p JOIN project_expenses pe ON p.project_id = pe.project_id GROUP BY p.project_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":100,"total_latency_ms":893}
{"timestamp":"2026-01-29T20:50:02.236Z","query_id":"0df6fac1-7433-4383-a9db-1da8d86fb5e0","question":"List projects that are over budget","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["project_budgets","project_expenses","projects","budgets","project_milestones","project_tasks","budget_lines","project_resources","project_phases","fiscal_years","departments","fiscal_periods"],"tables_from_table_retrieval":15,"tables_from_column_only":1,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_budgets","similarity":0.722964742520668},{"table":"project_expenses","similarity":0.6612139885640923},{"table":"project_milestones","similarity":0.6086742516860566},{"table":"projects","similarity":0.603119867291799},{"table":"project_resources","similarity":0.597322584800267},{"table":"budgets","similarity":0.5947407234206143},{"table":"budget_lines","similarity":0.5904803818054072},{"table":"project_tasks","similarity":0.5884491523727073},{"table":"project_phases","similarity":0.5493907834321079},{"table":"fiscal_years","similarity":0.5452244254955425},{"table":"task_assignments","similarity":0.5358507865308998},{"table":"cost_centers","similarity":0.5300586157001256},{"table":"fixed_assets","similarity":0.5211915048085144},{"table":"fiscal_periods","similarity":0.5200179964407323},{"table":"timesheet_entries","similarity":0.5184037353129961}],"column_hits_per_table":{"projects":10,"project_budgets":6,"project_expenses":10,"budget_lines":4,"budgets":7,"project_milestones":3,"project_tasks":7,"project_resources":2,"departments":1},"top_columns_per_table":{"projects":[{"column":"budget","similarity":0.7157873289228214},{"column":"project_number","similarity":0.6227578683249603},{"column":"planned_end_date","similarity":0.6218592852232092}],"project_budgets":[{"column":"notes","similarity":0.6968840628162604},{"column":"category","similarity":0.6884936581170534},{"column":"actual_amount","similarity":0.6874342070196099}],"project_expenses":[{"column":"is_billable","similarity":0.6524172642922237},{"column":"category","similarity":0.6511394078973038},{"column":"project_id","similarity":0.647913399771598}],"budget_lines":[{"column":"budget_id","similarity":0.6293825469960025},{"column":"amount","similarity":0.61759755130803},{"column":"line_id","similarity":0.5958899978657357}],"budgets":[{"column":"total_amount","similarity":0.6262049969711166},{"column":"status","similarity":0.6201964717884159},{"column":"budget_id","similarity":0.6068251516570441}],"project_milestones":[{"column":"is_billable","similarity":0.6084169219661417},{"column":"amount","similarity":0.5975950101730785},{"column":"project_id","similarity":0.5848627807484997}],"project_tasks":[{"column":"estimated_hours","similarity":0.6059234425364802},{"column":"actual_hours","similarity":0.6011409876391675},{"column":"due_date","similarity":0.5987032301443584}],"project_resources":[{"column":"allocation_percent","similarity":0.6000177528652653},{"column":"project_id","similarity":0.598286675045282}],"departments":[{"column":"budget","similarity":0.5873981545218923}]},"fused_scores":[{"table":"project_budgets","fused":0.8466631501631441,"table_sim":0.722964742520668,"col_score":1.0322107616268583},{"table":"project_expenses","fused":0.7879231804348057,"table_sim":0.6612139885640923,"col_score":0.9779869682408756},{"table":"projects","fused":0.7727384256092,"table_sim":0.603119867291799,"col_score":1.0271662630853016},{"table":"budgets","fused":0.728543662215791,"table_sim":0.5947407234206143,"col_score":0.9292480704085562},{"table":"project_milestones","fused":0.7280903218327064,"table_sim":0.6086742516860566,"col_score":0.907214427052681},{"table":"project_tasks","fused":0.71566706596605,"table_sim":0.5884491523727073,"col_score":0.906493936356064},{"table":"budget_lines","fused":0.6894408061858966,"table_sim":0.5904803818054072,"col_score":0.8378814427566308},{"table":"project_resources","fused":0.6821607865326058,"table_sim":0.597322584800267,"col_score":0.809418089131114},{"table":"project_phases","fused":0.3296344700592647,"table_sim":0.5493907834321079,"col_score":0},{"table":"fiscal_years","fused":0.3271346552973255,"table_sim":0.5452244254955425,"col_score":0},{"table":"task_assignments","fused":0.3215104719185399,"table_sim":0.5358507865308998,"col_score":0},{"table":"cost_centers","fused":0.3180351694200753,"table_sim":0.5300586157001256,"col_score":0},{"table":"fixed_assets","fused":0.3127149028851086,"table_sim":0.5211915048085144,"col_score":0},{"table":"fiscal_periods","fused":0.31201079786443936,"table_sim":0.5200179964407323,"col_score":0},{"table":"timesheet_entries","fused":0.31104224118779766,"table_sim":0.5184037353129961,"col_score":0}],"fk_expansion_candidates":7,"fk_expansion_added":2,"fk_expansion_blocked_count":3,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"timesheet_entries","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":17,"total_retrieval_latency_ms":23,"sql_generated":"SELECT p.project_id, p.name AS project_name, b.total_amount AS total_budget, SUM(pl.actual_hours) AS total_actual_hours FROM projects p JOIN budgets b ON p.project_id = b.project_id AND p.status = 'Completed' GROUP BY p.project_id HAVING b.total_amount > (SELECT budget FROM project_tasks pt WHERE pt.project_id = p.project_id AND status = 'Completed');","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column b.project_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_failure_reason":"Replacement pattern not found in SQL","autocorrect_candidates":5,"total_latency_ms":4418,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column b.project_id does not exist"}
{"timestamp":"2026-01-29T20:50:06.655Z","query_id":"a0928458-568a-450d-9b0b-576aac5f530a","question":"Show project resources and their allocation percentages","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["project_resources","project_budgets","projects","project_expenses","project_milestones","project_tasks","project_phases","asset_categories","budgets","task_assignments","fixed_assets"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":1,"table_scores":[{"table":"project_resources","similarity":0.7742133717857291},{"table":"project_budgets","similarity":0.65507694472865},{"table":"project_expenses","similarity":0.6350034671876015},{"table":"projects","similarity":0.6288717870995568},{"table":"task_assignments","similarity":0.6137701156863598},{"table":"project_tasks","similarity":0.6095803048417692},{"table":"project_milestones","similarity":0.6065393117891723},{"table":"project_phases","similarity":0.5813826774295057},{"table":"asset_categories","similarity":0.5802555044855668},{"table":"fixed_assets","similarity":0.5796101268148289},{"table":"asset_transfers","similarity":0.5721318726014173},{"table":"depreciation_schedules","similarity":0.5658856974088946},{"table":"budgets","similarity":0.5649618658822126},{"table":"asset_locations","similarity":0.5604079986432478},{"table":"asset_maintenance","similarity":0.5602754972355342}],"column_hits_per_table":{"project_resources":8,"project_budgets":6,"projects":11,"project_milestones":4,"asset_categories":1,"project_expenses":8,"project_tasks":6,"project_phases":2,"budgets":1,"order_lines":1,"tax_rates":1,"quote_lines":1},"top_columns_per_table":{"project_resources":[{"column":"allocation_percent","similarity":0.8685852466461004},{"column":"hourly_rate","similarity":0.7723593844044561},{"column":"role","similarity":0.7018377644717824}],"project_budgets":[{"column":"actual_amount","similarity":0.6714805333867944},{"column":"planned_amount","similarity":0.664720071485919},{"column":"category","similarity":0.6492185172720708}],"projects":[{"column":"project_number","similarity":0.656031184151131},{"column":"budget","similarity":0.6549834266944344},{"column":"priority","similarity":0.6516089082532873}],"project_milestones":[{"column":"amount","similarity":0.6479447985267763},{"column":"due_date","similarity":0.6055954050810288},{"column":"project_id","similarity":0.5966197964252259}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.6459444435919715}],"project_expenses":[{"column":"amount","similarity":0.6362161613290699},{"column":"category","similarity":0.6270742962995741},{"column":"approved_by","similarity":0.625320544399457}],"project_tasks":[{"column":"priority","similarity":0.6309783351056274},{"column":"actual_hours","similarity":0.624564831852771},{"column":"estimated_hours","similarity":0.6124485167486019}],"project_phases":[{"column":"project_id","similarity":0.598085263443172},{"column":"sequence","similarity":0.5916139582579132}],"budgets":[{"column":"total_amount","similarity":0.5970528201563468}],"order_lines":[{"column":"discount_percent","similarity":0.5946420250920916}],"tax_rates":[{"column":"rate","similarity":0.5907462944083454}],"quote_lines":[{"column":"discount_percent","similarity":0.590710827201031}]},"fused_scores":[{"table":"project_resources","fused":0.9664339986107688,"table_sim":0.7742133717857291,"col_score":1.2547649388483284},{"table":"project_budgets","fused":0.7945823944890915,"table_sim":0.65507694472865,"col_score":1.0038405691297538},{"table":"projects","fused":0.7707322312590734,"table_sim":0.6288717870995568,"col_score":0.9835228974983483},{"table":"project_expenses","fused":0.7609034041041036,"table_sim":0.6350034671876015,"col_score":0.9497533094788569},{"table":"project_milestones","fused":0.7442205875004198,"table_sim":0.6065393117891723,"col_score":0.9507425010672907},{"table":"project_tasks","fused":0.7430524833178667,"table_sim":0.6095803048417692,"col_score":0.9432607510320129},{"table":"project_phases","fused":0.6692071266429127,"table_sim":0.5813826774295057,"col_score":0.8009438004630234},{"table":"asset_categories","fused":0.6065310801281287,"table_sim":0.5802555044855668,"col_score":0.6459444435919715},{"table":"budgets","fused":0.5777982475918663,"table_sim":0.5649618658822126,"col_score":0.5970528201563468},{"table":"task_assignments","fused":0.36826206941181583,"table_sim":0.6137701156863598,"col_score":0},{"table":"fixed_assets","fused":0.34776607608889737,"table_sim":0.5796101268148289,"col_score":0},{"table":"asset_transfers","fused":0.3432791235608504,"table_sim":0.5721318726014173,"col_score":0},{"table":"depreciation_schedules","fused":0.33953141844533674,"table_sim":0.5658856974088946,"col_score":0},{"table":"asset_locations","fused":0.33624479918594863,"table_sim":0.5604079986432478,"col_score":0},{"table":"asset_maintenance","fused":0.3361652983413205,"table_sim":0.5602754972355342,"col_score":0}],"fk_expansion_candidates":7,"fk_expansion_added":1,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"budget_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":42,"total_retrieval_latency_ms":48,"sql_generated":"SELECT p.project_id AS \"ProjectID\", p.name AS \"ProjectName\", prr.role AS \"Role\", prr.allocation_percent AS \"AllocationPercent\" FROM projects p INNER JOIN task_assignments ta ON p.project_id = ta.task_id INNER JOIN project_resources prr ON ta.task_id = prr.task_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column prr.task_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":2,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":3377,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column prr.task_id does not exist"}
{"timestamp":"2026-01-29T20:50:10.033Z","query_id":"47935ae6-96a8-4149-8fc7-556458c160e9","question":"List fixed assets by category with their total purchase cost","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["fixed_assets","asset_categories","asset_maintenance","purchase_orders","products","project_expenses","project_budgets","depreciation_entries","purchase_requisitions","depreciation_schedules","maintenance_types","asset_locations"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"fixed_assets","similarity":0.7654083493676195},{"table":"asset_categories","similarity":0.7259858085236982},{"table":"asset_maintenance","similarity":0.6539211907012796},{"table":"products","similarity":0.614929355062545},{"table":"depreciation_schedules","similarity":0.6121354509873786},{"table":"depreciation_entries","similarity":0.6111894897108928},{"table":"purchase_requisitions","similarity":0.6015411064384415},{"table":"asset_transfers","similarity":0.5999948343167759},{"table":"requisition_lines","similarity":0.598284604803533},{"table":"purchase_orders","similarity":0.5960128957667012},{"table":"product_categories","similarity":0.5957745495088865},{"table":"project_expenses","similarity":0.5957623792479935},{"table":"asset_locations","similarity":0.5883070142348943},{"table":"project_budgets","similarity":0.585024592918525},{"table":"inventory_adjustments","similarity":0.5679064338841272}],"column_hits_per_table":{"fixed_assets":17,"asset_maintenance":5,"asset_categories":5,"purchase_orders":4,"asset_transfers":1,"project_expenses":2,"products":2,"depreciation_entries":2,"project_budgets":2,"maintenance_types":1,"sales_orders":1,"purchase_requisitions":3,"depreciation_schedules":1,"budgets":1,"departments":1,"product_suppliers":1,"product_categories":1},"top_columns_per_table":{"fixed_assets":[{"column":"purchase_cost","similarity":0.8279308768975289},{"column":"purchase_date","similarity":0.7577653682683902},{"column":"category_id","similarity":0.7449419823541632}],"asset_maintenance":[{"column":"cost","similarity":0.7038940050431838},{"column":"asset_id","similarity":0.6625276747232278},{"column":"status","similarity":0.6405651323240275}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.6927722364184671},{"column":"depreciation_method","similarity":0.6801647903942473},{"column":"name","similarity":0.6771577193336439}],"purchase_orders":[{"column":"total","similarity":0.6821806774581558},{"column":"shipping_cost","similarity":0.6472948486879604},{"column":"subtotal","similarity":0.6467974357625007}],"asset_transfers":[{"column":"asset_id","similarity":0.6577812240991375}],"project_expenses":[{"column":"category","similarity":0.6549899614084438},{"column":"amount","similarity":0.6178431697050689}],"products":[{"column":"unit_cost","similarity":0.6544733850469636},{"column":"list_price","similarity":0.6424553009766624}],"depreciation_entries":[{"column":"asset_id","similarity":0.6541755757135573},{"column":"accumulated_depreciation","similarity":0.6149445842426364}],"project_budgets":[{"column":"category","similarity":0.637658039961106},{"column":"actual_amount","similarity":0.6203506032041255}],"maintenance_types":[{"column":"estimated_cost","similarity":0.637101104417595}],"sales_orders":[{"column":"total","similarity":0.6367743689772688}],"purchase_requisitions":[{"column":"status","similarity":0.633131401798049},{"column":"notes","similarity":0.618262755877266},{"column":"requisition_number","similarity":0.6168697281232403}],"depreciation_schedules":[{"column":"asset_id","similarity":0.6326055924552645}],"budgets":[{"column":"total_amount","similarity":0.6276622882196059}],"departments":[{"column":"budget","similarity":0.6267573083396116}],"product_suppliers":[{"column":"unit_cost","similarity":0.6215020235372517}],"product_categories":[{"column":"description","similarity":0.6177248433123641}]},"fused_scores":[{"table":"fixed_assets","fused":0.9419704340332613,"table_sim":0.7654083493676195,"col_score":1.206813561031724},{"table":"asset_categories","fused":0.8487333377604551,"table_sim":0.7259858085236982,"col_score":1.0328546316155907},{"table":"asset_maintenance","fused":0.7989303920007285,"table_sim":0.6539211907012796,"col_score":1.0164441939499018},{"table":"purchase_orders","fused":0.7599389781808752,"table_sim":0.5960128957667012,"col_score":1.005828101802136},{"table":"products","fused":0.759238027251645,"table_sim":0.614929355062545,"col_score":0.9757010355352949},{"table":"project_expenses","fused":0.7430220460531873,"table_sim":0.5957623792479935,"col_score":0.9639115462609782},{"table":"project_budgets","fused":0.7301480923763826,"table_sim":0.585024592918525,"col_score":0.9478333415631688},{"table":"depreciation_entries","fused":0.7042761081234883,"table_sim":0.6111894897108928,"col_score":0.8439060357423815},{"table":"purchase_requisitions","fused":0.6963109513640878,"table_sim":0.6015411064384415,"col_score":0.8384657187525574},{"table":"depreciation_schedules","fused":0.5444108364799012,"table_sim":0.6121354509873786,"col_score":0.4428239147186851},{"table":"asset_transfers","fused":0.5441756433378241,"table_sim":0.5999948343167759,"col_score":0.46044685686939624},{"table":"product_categories","fused":0.5304276858327939,"table_sim":0.5957745495088865,"col_score":0.4324073903186548},{"table":"requisition_lines","fused":0.35897076288211976,"table_sim":0.598284604803533,"col_score":0},{"table":"asset_locations","fused":0.35298420854093654,"table_sim":0.5883070142348943,"col_score":0},{"table":"inventory_adjustments","fused":0.3407438603304763,"table_sim":0.5679064338841272,"col_score":0}],"fk_expansion_candidates":25,"fk_expansion_added":2,"fk_expansion_blocked_count":18,"fk_expansion_blocked":[{"table":"employees","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"product_categories","reason":"max_tables"},{"table":"order_lines","reason":"no_evidence"},{"table":"asset_transfers","reason":"max_tables"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"departments","reason":"max_tables"},{"table":"product_suppliers","reason":"max_tables"},{"table":"requisition_lines","reason":"max_tables"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":13,"total_retrieval_latency_ms":19,"sql_generated":"SELECT af.category_id, SUM(af.purchase_cost) AS total_purchase_cost FROM fixed_assets af JOIN asset_categories ac ON af.category_id = ac.category_id GROUP BY af.category_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":7,"total_latency_ms":885}
{"timestamp":"2026-01-29T20:50:10.918Z","query_id":"03322c35-e62e-494f-ace3-64ddbd8230dd","question":"List assets due for maintenance in the next 30 days","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["asset_maintenance","fixed_assets","depreciation_schedules","asset_transfers","maintenance_types","depreciation_entries","project_expenses","inventory_adjustments","asset_categories","purchase_requisitions","asset_locations","fiscal_periods"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"asset_maintenance","similarity":0.6994637000895678},{"table":"fixed_assets","similarity":0.6764596229184475},{"table":"depreciation_schedules","similarity":0.6273221911861584},{"table":"asset_transfers","similarity":0.5971719320807494},{"table":"maintenance_types","similarity":0.5961062154680403},{"table":"depreciation_entries","similarity":0.5910746016967453},{"table":"asset_categories","similarity":0.5862300624031879},{"table":"asset_locations","similarity":0.5513908244688821},{"table":"project_expenses","similarity":0.5503523574219773},{"table":"purchase_requisitions","similarity":0.5454859792595109},{"table":"inventory_adjustments","similarity":0.5399910580674154},{"table":"fiscal_years","similarity":0.5310443766821534},{"table":"budget_lines","similarity":0.5280863149217051},{"table":"fiscal_periods","similarity":0.5266541206042973},{"table":"timesheets","similarity":0.5246699967869528}],"column_hits_per_table":{"asset_maintenance":10,"fixed_assets":17,"depreciation_schedules":5,"asset_transfers":4,"maintenance_types":2,"project_expenses":2,"depreciation_entries":3,"inventory_adjustments":2,"budgets":1,"project_tasks":1,"asset_categories":1,"stock_transfers":1,"purchase_requisitions":1},"top_columns_per_table":{"asset_maintenance":[{"column":"scheduled_date","similarity":0.7417912113410527},{"column":"completed_date","similarity":0.7325656662634175},{"column":"status","similarity":0.7129849821736637}],"fixed_assets":[{"column":"purchase_date","similarity":0.6895387616643497},{"column":"disposal_date","similarity":0.6881990364899336},{"column":"warranty_expiry","similarity":0.6800725876800275}],"depreciation_schedules":[{"column":"asset_id","similarity":0.6418619860179837},{"column":"end_date","similarity":0.6048026719079262},{"column":"start_date","similarity":0.5849730629741445}],"asset_transfers":[{"column":"transfer_date","similarity":0.6313435579208717},{"column":"asset_id","similarity":0.6184906613618536},{"column":"reason","similarity":0.5842991078068315}],"maintenance_types":[{"column":"estimated_cost","similarity":0.6166092757884718},{"column":"frequency_months","similarity":0.571291123217713}],"project_expenses":[{"column":"expense_date","similarity":0.6092598391867935},{"column":"status","similarity":0.5937348318403063}],"depreciation_entries":[{"column":"asset_id","similarity":0.6063098011675734},{"column":"accumulated_depreciation","similarity":0.576951693037312},{"column":"entry_date","similarity":0.5752337993503969}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.5889427730753104},{"column":"status","similarity":0.5820136892950087}],"budgets":[{"column":"status","similarity":0.5735098092516532}],"project_tasks":[{"column":"due_date","similarity":0.5689652748773603}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.5684797119021113}],"stock_transfers":[{"column":"status","similarity":0.5664045909553878}],"purchase_requisitions":[{"column":"status","similarity":0.5661977643706151}]},"fused_scores":[{"table":"asset_maintenance","fused":0.8629078378428453,"table_sim":0.6994637000895678,"col_score":1.1080740444727615},{"table":"fixed_assets","fused":0.8193310857147951,"table_sim":0.6764596229184475,"col_score":1.0336382799093164},{"table":"depreciation_schedules","fused":0.7353089960696945,"table_sim":0.6273221911861584,"col_score":0.8972892033949985},{"table":"asset_transfers","fused":0.7277004039781647,"table_sim":0.5971719320807494,"col_score":0.9234931118242875},{"table":"maintenance_types","fused":0.7185656642397555,"table_sim":0.5961062154680403,"col_score":0.9022548373973283},{"table":"depreciation_entries","fused":0.7004721981030513,"table_sim":0.5910746016967453,"col_score":0.8645685927125104},{"table":"project_expenses","fused":0.6570382265855467,"table_sim":0.5503523574219773,"col_score":0.8170670303309007},{"table":"inventory_adjustments","fused":0.6410536605718746,"table_sim":0.5399910580674154,"col_score":0.7926475643285634},{"table":"asset_categories","fused":0.5791299222027573,"table_sim":0.5862300624031879,"col_score":0.5684797119021113},{"table":"purchase_requisitions","fused":0.4858269615794788,"table_sim":0.5454859792595109,"col_score":0.39633843505943056},{"table":"asset_locations","fused":0.33083449468132925,"table_sim":0.5513908244688821,"col_score":0},{"table":"fiscal_years","fused":0.31862662600929204,"table_sim":0.5310443766821534,"col_score":0},{"table":"budget_lines","fused":0.3168517889530231,"table_sim":0.5280863149217051,"col_score":0},{"table":"fiscal_periods","fused":0.3159924723625784,"table_sim":0.5266541206042973,"col_score":0},{"table":"timesheets","fused":0.3148019980721717,"table_sim":0.5246699967869528,"col_score":0}],"fk_expansion_candidates":11,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"adjustment_lines","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":18,"total_retrieval_latency_ms":24,"sql_generated":"SELECT f.asset_id, f.name AS asset_name, l.location_id, l.name AS location_name, m.maintenance_type_id, mt.name AS maintenance_type_name FROM fixed_assets f INNER JOIN asset_locations l ON f.location_id = l.location_id INNER JOIN asset_maintenance m ON f.asset_id = m.asset_id INNER JOIN maintenance_types mt ON m.maintenance_type_id = mt.type_id WHERE m.completed_date IS NULL OR m.completed_date > CURRENT_DATE + INTERVAL '30 days';","tables_used_in_sql":[],"explain_result":"success","rows_returned":87,"total_latency_ms":2090}
{"timestamp":"2026-01-29T20:50:13.009Z","query_id":"f633a93d-d66f-468e-9d56-044c675eeaa0","question":"How many documents are attached to each entity type?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["document_attachments","account_types","asset_categories","certifications","employee_certifications","maintenance_types","benefit_types","product_categories","chart_of_accounts","asset_maintenance","employees","fixed_assets"],"tables_from_table_retrieval":15,"tables_from_column_only":9,"tables_from_fk_expansion":2,"table_scores":[{"table":"document_attachments","similarity":0.7352812742665428},{"table":"asset_categories","similarity":0.5753411818367143},{"table":"account_types","similarity":0.5738443826637069},{"table":"maintenance_types","similarity":0.5636991742375136},{"table":"certifications","similarity":0.5624603819375077},{"table":"benefit_types","similarity":0.5571719369096676},{"table":"product_categories","similarity":0.5551556948057476},{"table":"asset_maintenance","similarity":0.554815914599242},{"table":"employee_certifications","similarity":0.5476424522677461},{"table":"warehouses","similarity":0.5474998114755597},{"table":"leave_types","similarity":0.5434934031567049},{"table":"chart_of_accounts","similarity":0.5411038635038822},{"table":"emergency_contacts","similarity":0.5384920463137224},{"table":"fixed_assets","similarity":0.5383241951125345},{"table":"sales_regions","similarity":0.5350244939156515}],"column_hits_per_table":{"document_attachments":9,"inventory_transactions":3,"account_types":3,"maintenance_types":3,"asset_maintenance":1,"employee_certifications":4,"asset_categories":3,"benefit_types":3,"chart_of_accounts":2,"certifications":2,"departments":3,"employee_benefits":1,"product_categories":3,"business_units":1,"warehouses":1,"sales_regions":1,"asset_locations":1,"fixed_assets":1,"inventory_levels":1,"asset_transfers":1,"leave_types":1,"employees":1,"journal_entries":1},"top_columns_per_table":{"document_attachments":[{"column":"entity_type","similarity":0.7987800419578387},{"column":"entity_id","similarity":0.7594287577919462},{"column":"attachment_id","similarity":0.6546651468230587}],"inventory_transactions":[{"column":"reference_type","similarity":0.5903517205097364},{"column":"transaction_type","similarity":0.5635711569434013},{"column":"created_by","similarity":0.5430876646210533}],"account_types":[{"column":"category","similarity":0.5878690848429569},{"column":"type_id","similarity":0.5794665493145994},{"column":"name","similarity":0.5496137466279906}],"maintenance_types":[{"column":"description","similarity":0.58653779494252},{"column":"type_id","similarity":0.5733718593835123},{"column":"name","similarity":0.5496422533175911}],"asset_maintenance":[{"column":"maintenance_type_id","similarity":0.5827125041473765}],"employee_certifications":[{"column":"certificate_number","similarity":0.5784702110774266},{"column":"cert_id","similarity":0.5612347494814258},{"column":"employee_id","similarity":0.5577094740003373}],"asset_categories":[{"column":"category_id","similarity":0.5723224544867809},{"column":"name","similarity":0.5502669316091798},{"column":"depreciation_method","similarity":0.5473548891396472}],"benefit_types":[{"column":"description","similarity":0.5715454999053485},{"column":"benefit_type_id","similarity":0.5575648471383446},{"column":"name","similarity":0.5484642483573043}],"chart_of_accounts":[{"column":"account_type_id","similarity":0.5685465519383057},{"column":"description","similarity":0.5451128268059807}],"certifications":[{"column":"issuing_body","similarity":0.5640710083272336},{"column":"description","similarity":0.5596023143932606}],"departments":[{"column":"manager_id","similarity":0.5633707821725658},{"column":"department_id","similarity":0.5584502786611573},{"column":"parent_department_id","similarity":0.5566654794357809}],"employee_benefits":[{"column":"benefit_type_id","similarity":0.5570972140176393}],"product_categories":[{"column":"description","similarity":0.5540848765000548},{"column":"category_id","similarity":0.5510211593166828},{"column":"parent_category_id","similarity":0.5473730420164726}],"business_units":[{"column":"manager_id","similarity":0.5532691118392093}],"warehouses":[{"column":"manager_id","similarity":0.5519942538973842}],"sales_regions":[{"column":"manager_id","similarity":0.5505126067891188}],"asset_locations":[{"column":"description","similarity":0.5499214775178357}],"fixed_assets":[{"column":"category_id","similarity":0.5477120144110509}],"inventory_levels":[{"column":"quantity_available","similarity":0.5458319122564639}],"asset_transfers":[{"column":"to_employee_id","similarity":0.5432260682616717}],"leave_types":[{"column":"leave_type_id","similarity":0.543068609508208}],"employees":[{"column":"email","similarity":0.5421198830413347}],"journal_entries":[{"column":"reference","similarity":0.5407169542507763}]},"fused_scores":[{"table":"document_attachments","fused":0.8904731915406621,"table_sim":0.7352812742665428,"col_score":1.1232610674518408},{"table":"account_types","fused":0.6605795804394508,"table_sim":0.5738443826637069,"col_score":0.7906823771030667},{"table":"asset_categories","fused":0.6442718083860368,"table_sim":0.5753411818367143,"col_score":0.7476677482100206},{"table":"certifications","fused":0.6414489565084545,"table_sim":0.5624603819375077,"col_score":0.7599318183648748},{"table":"employee_certifications","fused":0.6385464207190179,"table_sim":0.5476424522677461,"col_score":0.7749023733959256},{"table":"maintenance_types","fused":0.5827221474401055,"table_sim":0.5636991742375136,"col_score":0.6112566072439933},{"table":"benefit_types","fused":0.5723949807186663,"table_sim":0.5571719369096676,"col_score":0.5952295464321646},{"table":"product_categories","fused":0.5653801446077995,"table_sim":0.5551556948057476,"col_score":0.5807168193108774},{"table":"chart_of_accounts","fused":0.5601711483978922,"table_sim":0.5411038635038822,"col_score":0.5887720757389072},{"table":"asset_maintenance","fused":0.4960490499208106,"table_sim":0.554815914599242,"col_score":0.4078987529031635},{"table":"warehouses","fused":0.4830582779766034,"table_sim":0.5474998114755597,"col_score":0.3863959777281689},{"table":"leave_types","fused":0.4781552525563212,"table_sim":0.5434934031567049,"col_score":0.3801480266557456},{"table":"fixed_assets","fused":0.47635388110261495,"table_sim":0.5383241951125345,"col_score":0.3833984100877356},{"table":"sales_regions","fused":0.47515822625034415,"table_sim":0.5350244939156515,"col_score":0.38535882475238314},{"table":"inventory_transactions","fused":0.34885491959257486,"table_sim":0,"col_score":0.8721372989814371}],"fk_expansion_candidates":9,"fk_expansion_added":2,"fk_expansion_blocked_count":7,"fk_expansion_blocked":[{"table":"bank_accounts","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":24,"total_retrieval_latency_ms":29,"sql_generated":"SELECT d.entity_type, COUNT(da.file_id) AS num_documents FROM document_attachments da JOIN entities d ON da.uploaded_by = d.employee_id GROUP BY d.entity_type;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column e.name does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":5,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":2171,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T20:50:15.180Z","query_id":"4030f023-20a4-4377-aa62-d35b11f9646f","question":"Calculate employee turnover rate by department for 2024","attempt_count":1,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employees","employee_salaries","employee_training","departments","sales_regions","employee_certifications","employment_history","performance_reviews","goods_receipts","asset_maintenance","budgets","inventory_adjustments"],"tables_from_table_retrieval":15,"tables_from_column_only":9,"tables_from_fk_expansion":2,"table_scores":[{"table":"employees","similarity":0.6359658673732379},{"table":"employee_salaries","similarity":0.6137332929756416},{"table":"departments","similarity":0.6101103038853555},{"table":"positions","similarity":0.5999463882310814},{"table":"sales_territories","similarity":0.5983156084770043},{"table":"sales_regions","similarity":0.5955253694234874},{"table":"budgets","similarity":0.5922652556433196},{"table":"employee_training","similarity":0.5866463738638922},{"table":"employment_history","similarity":0.5855835073288157},{"table":"goods_receipts","similarity":0.585472710203539},{"table":"performance_reviews","similarity":0.5822186192352505},{"table":"purchase_requisitions","similarity":0.578406876111481},{"table":"employee_certifications","similarity":0.5730496448155384},{"table":"inventory_adjustments","similarity":0.5687781234041399},{"table":"asset_maintenance","similarity":0.5668142582852698}],"column_hits_per_table":{"departments":3,"employees":9,"sales_territories":1,"employee_salaries":7,"positions":1,"employee_training":4,"performance_reviews":2,"goods_receipts":1,"sales_orders":1,"sales_regions":2,"asset_maintenance":1,"budgets":1,"employee_certifications":2,"cost_centers":1,"asset_transfers":3,"employee_benefits":2,"purchase_requisitions":1,"inventory_adjustments":1,"currencies":1,"timesheets":1,"sales_opportunities":1,"business_units":1,"employment_history":2,"depreciation_schedules":1},"top_columns_per_table":{"departments":[{"column":"budget","similarity":0.6210989680192394},{"column":"manager_id","similarity":0.5985166795002035},{"column":"created_at","similarity":0.5685222125719833}],"employees":[{"column":"department_id","similarity":0.6200778238440748},{"column":"salary","similarity":0.6038131058150359},{"column":"termination_date","similarity":0.5992766261325304}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6104279964881703}],"employee_salaries":[{"column":"end_date","similarity":0.6057663883190686},{"column":"amount","similarity":0.5994586464671279},{"column":"effective_date","similarity":0.5945383601215039}],"positions":[{"column":"department_id","similarity":0.6049413744489532}],"employee_training":[{"column":"score","similarity":0.5927300142082687},{"column":"scheduled_date","similarity":0.578764520059517},{"column":"status","similarity":0.5718497030719976}],"performance_reviews":[{"column":"employee_id","similarity":0.5849706759238356},{"column":"reviewer_id","similarity":0.5653092836188883}],"goods_receipts":[{"column":"received_by","similarity":0.580378092857111}],"sales_orders":[{"column":"sales_rep_id","similarity":0.5799791205111346}],"sales_regions":[{"column":"manager_id","similarity":0.5785309405554578},{"column":"target_revenue","similarity":0.5570052981646593}],"asset_maintenance":[{"column":"performed_by","similarity":0.577414569986232}],"budgets":[{"column":"department_id","similarity":0.5749997772800637}],"employee_certifications":[{"column":"employee_id","similarity":0.5740569827698636},{"column":"expiry_date","similarity":0.5696332852761125}],"cost_centers":[{"column":"department_id","similarity":0.5739824047413312}],"asset_transfers":[{"column":"transferred_by","similarity":0.5726316663319801},{"column":"to_employee_id","similarity":0.5708185051700986},{"column":"from_employee_id","similarity":0.5690345365953042}],"employee_benefits":[{"column":"end_date","similarity":0.5715674244638516},{"column":"employee_id","similarity":0.562908633973355}],"purchase_requisitions":[{"column":"department_id","similarity":0.5688527878379692}],"inventory_adjustments":[{"column":"adjusted_by","similarity":0.5657897970795053}],"currencies":[{"column":"exchange_rate","similarity":0.5652318119936446}],"timesheets":[{"column":"employee_id","similarity":0.5598968526380919}],"sales_opportunities":[{"column":"owner_id","similarity":0.5589945818871924}],"business_units":[{"column":"manager_id","similarity":0.5578038204905201}],"employment_history":[{"column":"employee_id","similarity":0.5568703170476632},{"column":"reason_for_leaving","similarity":0.5563939133984841}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5567581861316643}]},"fused_scores":[{"table":"employees","fused":0.7429600879764632,"table_sim":0.6359658673732379,"col_score":0.9034514188813011},{"table":"employee_salaries","fused":0.730438260406438,"table_sim":0.6137332929756416,"col_score":0.9054957115526325},{"table":"employee_training","fused":0.7048327340135462,"table_sim":0.5866463738638922,"col_score":0.8821122742380272},{"table":"departments","fused":0.6982981046689376,"table_sim":0.6101103038853555,"col_score":0.8305798058443106},{"table":"sales_regions","fused":0.6611116725977203,"table_sim":0.5955253694234874,"col_score":0.7594911273590695},{"table":"employee_certifications","fused":0.6520510785875488,"table_sim":0.5730496448155384,"col_score":0.7705532292455647},{"table":"employment_history","fused":0.6518695141433559,"table_sim":0.5855835073288157,"col_score":0.7512985243651662},{"table":"performance_reviews","fused":0.5922662605064686,"table_sim":0.5822186192352505,"col_score":0.6073377224132958},{"table":"goods_receipts","fused":0.5834348632649677,"table_sim":0.585472710203539,"col_score":0.580378092857111},{"table":"asset_maintenance","fused":0.5710543829656547,"table_sim":0.5668142582852698,"col_score":0.577414569986232},{"table":"inventory_adjustments","fused":0.567582792874286,"table_sim":0.5687781234041399,"col_score":0.5657897970795053},{"table":"sales_territories","fused":0.5299092041028902,"table_sim":0.5983156084770043,"col_score":0.42729959754171914},{"table":"positions","fused":0.5293514177843557,"table_sim":0.5999463882310814,"col_score":0.42345896211426726},{"table":"budgets","fused":0.5163590910244096,"table_sim":0.5922652556433196,"col_score":0.40249984409604456},{"table":"purchase_requisitions","fused":0.50632290626152,"table_sim":0.578406876111481,"col_score":0.3981969514865784}],"fk_expansion_candidates":32,"fk_expansion_added":2,"fk_expansion_blocked_count":25,"fk_expansion_blocked":[{"table":"maintenance_types","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"sales_territories","reason":"max_tables"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"max_tables"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":26,"total_retrieval_latency_ms":32,"sql_generated":"","tables_used_in_sql":[],"total_latency_ms":2784,"failure_type":"execution_error","failure_details":"Model generated invalid output (gibberish detected)"}
{"timestamp":"2026-01-29T20:50:17.965Z","query_id":"245d971b-1a9e-4ab9-83ae-997d1a9843bd","question":"Find the salary percentile ranking for each employee within their department","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_salaries","employees","positions","departments","performance_reviews","employee_training","employee_benefits","employee_certifications","sales_regions","sales_territories","employment_history","budgets"],"tables_from_table_retrieval":15,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_salaries","similarity":0.708947353388894},{"table":"positions","similarity":0.673242751719371},{"table":"employees","similarity":0.6495295179488771},{"table":"departments","similarity":0.64741802797087},{"table":"sales_regions","similarity":0.6247633430026287},{"table":"performance_reviews","similarity":0.6201770986480979},{"table":"budgets","similarity":0.6059422475297072},{"table":"employee_training","similarity":0.605724513187425},{"table":"sales_territories","similarity":0.603501429588932},{"table":"employee_benefits","similarity":0.59838723625395},{"table":"employee_certifications","similarity":0.5971601397111606},{"table":"purchase_requisitions","similarity":0.5927866150381371},{"table":"business_units","similarity":0.5911989355111648},{"table":"units_of_measure","similarity":0.5855786477919521},{"table":"employment_history","similarity":0.5846118164259523}],"column_hits_per_table":{"employees":9,"employee_salaries":7,"departments":4,"positions":3,"employee_training":2,"project_resources":2,"sales_orders":4,"order_lines":1,"performance_reviews":4,"sales_territories":1,"employee_benefits":2,"currencies":1,"tax_rates":1,"employee_certifications":2,"vendor_invoices":3,"sales_regions":1,"purchase_orders":1,"asset_categories":1,"business_units":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.7574782269751729},{"column":"employee_number","similarity":0.6492182366482667},{"column":"department_id","similarity":0.6395368153433474}],"employee_salaries":[{"column":"amount","similarity":0.7359583527234096},{"column":"approved_by","similarity":0.6926943474739576},{"column":"employee_id","similarity":0.676986467510318}],"departments":[{"column":"budget","similarity":0.6829775530024116},{"column":"manager_id","similarity":0.6397221630770776},{"column":"parent_department_id","similarity":0.6254065117903628}],"positions":[{"column":"min_salary","similarity":0.6777126447106386},{"column":"max_salary","similarity":0.6724570189361891},{"column":"department_id","similarity":0.6427390436680331}],"employee_training":[{"column":"score","similarity":0.6590553174224684},{"column":"status","similarity":0.6029782499051857}],"project_resources":[{"column":"hourly_rate","similarity":0.6466943832186318},{"column":"allocation_percent","similarity":0.6196500675265969}],"sales_orders":[{"column":"total","similarity":0.6356725867073684},{"column":"subtotal","similarity":0.6267418575329986},{"column":"tax_amount","similarity":0.6063888395862791}],"order_lines":[{"column":"discount_percent","similarity":0.6264197871171734}],"performance_reviews":[{"column":"employee_id","similarity":0.6263614751745396},{"column":"goals_met_percent","similarity":0.6239844557794996},{"column":"reviewer_id","similarity":0.6213599775398778}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6241225270384395}],"employee_benefits":[{"column":"coverage_level","similarity":0.6222756439662573},{"column":"employee_id","similarity":0.6153391648759183}],"currencies":[{"column":"exchange_rate","similarity":0.6203188576134201}],"tax_rates":[{"column":"rate","similarity":0.6188638790317935}],"employee_certifications":[{"column":"certificate_number","similarity":0.614080794353629},{"column":"employee_id","similarity":0.6138517170268198}],"vendor_invoices":[{"column":"total","similarity":0.6120628382001947},{"column":"subtotal","similarity":0.610881078873543},{"column":"amount_paid","similarity":0.6062315858747155}],"sales_regions":[{"column":"manager_id","similarity":0.6115942597940399}],"purchase_orders":[{"column":"total","similarity":0.6092847852619704}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.6026361592860408}],"business_units":[{"column":"manager_id","similarity":0.6025430641596784}]},"fused_scores":[{"table":"employee_salaries","fused":0.8582906226174918,"table_sim":0.708947353388894,"col_score":1.0823055264603885},{"table":"employees","fused":0.8225526488890488,"table_sim":0.6495295179488771,"col_score":1.0820873452993063},{"table":"positions","fused":0.8095221127031159,"table_sim":0.673242751719371,"col_score":1.0139411541787333},{"table":"departments","fused":0.7512029408142775,"table_sim":0.64741802797087,"col_score":0.9068803100793887},{"table":"performance_reviews","fused":0.742790981718875,"table_sim":0.6201770986480979,"col_score":0.9267118063250408},{"table":"employee_training","fused":0.7114737898681683,"table_sim":0.605724513187425,"col_score":0.8700977048892833},{"table":"employee_benefits","fused":0.6940900824215015,"table_sim":0.59838723625395,"col_score":0.8376443516728287},{"table":"employee_certifications","fused":0.6898676419519026,"table_sim":0.5971601397111606,"col_score":0.8289288953130158},{"table":"sales_regions","fused":0.5461043985439084,"table_sim":0.6247633430026287,"col_score":0.42811598185582794},{"table":"sales_territories","fused":0.5368551653241223,"table_sim":0.603501429588932,"col_score":0.4368857689269076},{"table":"business_units","fused":0.5234314192714088,"table_sim":0.5911989355111648,"col_score":0.42178014491177485},{"table":"project_resources","fused":0.3826077667927721,"table_sim":0,"col_score":0.9565194169819302},{"table":"sales_orders","fused":0.3796174061895471,"table_sim":0,"col_score":0.9490435154738677},{"table":"vendor_invoices","fused":0.3670013510547865,"table_sim":0,"col_score":0.9175033776369662},{"table":"budgets","fused":0.3635653485178243,"table_sim":0.6059422475297072,"col_score":0}],"fk_expansion_candidates":30,"fk_expansion_added":2,"fk_expansion_blocked_count":24,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":44,"total_retrieval_latency_ms":50,"sql_generated":"SELECT e.employee_id, CONCAT(e.first_name, ' ', e.last_name) AS full_name, d.department_id, p.position_id, s.salary, RANK() OVER (PARTITION BY d.department_id ORDER BY s.salary) as salary_percentile FROM employees e JOIN departments d ON e.department_id = d.department_id JOIN positions p ON e.position_id = p.position_id JOIN employee_salaries s ON e.employee_id = s.employee_id ORDER BY full_name, salary_percentile;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column s.salary does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":4,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":5819,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column s.salary does not exist"}
{"timestamp":"2026-01-29T20:50:23.784Z","query_id":"b36e30a9-69b3-4c1f-9b8a-783806d9569b","question":"Identify employees who have not completed mandatory training","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employee_training","training_courses","employee_certifications","employees","employee_salaries","certifications","employee_benefits","leave_requests","task_assignments","business_units","employment_history","departments"],"tables_from_table_retrieval":15,"tables_from_column_only":4,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_training","similarity":0.6889099730779654},{"table":"training_courses","similarity":0.6502538829600134},{"table":"employee_certifications","similarity":0.622622468299915},{"table":"employees","similarity":0.5856498095746774},{"table":"leave_requests","similarity":0.562719264388909},{"table":"employee_salaries","similarity":0.5560241204386787},{"table":"certifications","similarity":0.5525137082028069},{"table":"employment_history","similarity":0.5480613869817784},{"table":"business_units","similarity":0.5439038631444495},{"table":"task_assignments","similarity":0.5397934296806453},{"table":"employee_benefits","similarity":0.5344393398297539},{"table":"timesheets","similarity":0.5319406753449695},{"table":"emergency_contacts","similarity":0.5318968233375349},{"table":"departments","similarity":0.5263789627125498},{"table":"positions","similarity":0.5263070089098566}],"column_hits_per_table":{"employee_training":7,"training_courses":7,"employees":15,"employee_certifications":6,"task_assignments":1,"employee_salaries":2,"leave_requests":1,"leave_types":1,"certifications":2,"business_units":1,"departments":1,"emergency_contacts":1,"fixed_assets":1,"sales_territories":1,"employee_benefits":1,"timesheets":1,"warehouses":1},"top_columns_per_table":{"employee_training":[{"column":"completion_date","similarity":0.7168978136285726},{"column":"status","similarity":0.7028985160111028},{"column":"scheduled_date","similarity":0.6960973950291245}],"training_courses":[{"column":"is_mandatory","similarity":0.7023171508593787},{"column":"is_active","similarity":0.633360326144161},{"column":"duration_hours","similarity":0.6170672809188396}],"employees":[{"column":"is_active","similarity":0.6234608396623087},{"column":"hire_date","similarity":0.5874512415515796},{"column":"employee_id","similarity":0.5844803651068503}],"employee_certifications":[{"column":"employee_id","similarity":0.6135493904138725},{"column":"obtained_date","similarity":0.6060985739368497},{"column":"expiry_date","similarity":0.5959077655676795}],"task_assignments":[{"column":"employee_id","similarity":0.5819777223310592}],"employee_salaries":[{"column":"effective_date","similarity":0.573895057820439},{"column":"end_date","similarity":0.5725676252235854}],"leave_requests":[{"column":"employee_id","similarity":0.5678540613812961}],"leave_types":[{"column":"is_paid","similarity":0.562989201901735}],"certifications":[{"column":"description","similarity":0.5609446922689106},{"column":"validity_years","similarity":0.5539678539563746}],"business_units":[{"column":"manager_id","similarity":0.5596404860633486}],"departments":[{"column":"manager_id","similarity":0.5580853205909431}],"emergency_contacts":[{"column":"employee_id","similarity":0.5579377142447549}],"fixed_assets":[{"column":"assigned_to","similarity":0.5574586620303502}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5565974280594508}],"employee_benefits":[{"column":"end_date","similarity":0.5556804750501676}],"timesheets":[{"column":"employee_id","similarity":0.555561707512954}],"warehouses":[{"column":"manager_id","similarity":0.5551779442719302}]},"fused_scores":[{"table":"employee_training","fused":0.8393245883040332,"table_sim":0.6889099730779654,"col_score":1.0649465111431349},{"table":"training_courses","fused":0.7944926463035276,"table_sim":0.6502538829600134,"col_score":1.0108507913187985},{"table":"employee_certifications","fused":0.7351944636682248,"table_sim":0.622622468299915,"col_score":0.9040524567206896},{"table":"employees","fused":0.7032367749145099,"table_sim":0.5856498095746774,"col_score":0.8796172229242586},{"table":"employee_salaries","fused":0.6776860204360999,"table_sim":0.5560241204386787,"col_score":0.8601788704322317},{"table":"certifications","fused":0.6316276234218814,"table_sim":0.5525137082028069,"col_score":0.7502984962504933},{"table":"employee_benefits","fused":0.5429357939179194,"table_sim":0.5344393398297539,"col_score":0.5556804750501676},{"table":"leave_requests","fused":0.4966306958201083,"table_sim":0.562719264388909,"col_score":0.39749784296690727},{"table":"task_assignments","fused":0.48682982006108366,"table_sim":0.5397934296806453,"col_score":0.4073844056317414},{"table":"business_units","fused":0.4830416539844073,"table_sim":0.5439038631444495,"col_score":0.391748340244344},{"table":"emergency_contacts","fused":0.4753606539910523,"table_sim":0.5318968233375349,"col_score":0.3905563999713284},{"table":"timesheets","fused":0.4747216833106088,"table_sim":0.5319406753449695,"col_score":0.38889319525906774},{"table":"departments","fused":0.47209126739299395,"table_sim":0.5263789627125498,"col_score":0.39065972441366015},{"table":"employment_history","fused":0.32883683218906706,"table_sim":0.5480613869817784,"col_score":0},{"table":"positions","fused":0.31578420534591395,"table_sim":0.5263070089098566,"col_score":0}],"fk_expansion_candidates":31,"fk_expansion_added":2,"fk_expansion_blocked_count":25,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"sales_regions","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"leave_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"max_tables"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":28,"total_retrieval_latency_ms":34,"sql_generated":"SELECT e.employee_id, e.first_name || ' ' || e.last_name AS employee_full_name FROM employees e LEFT JOIN employee_training et ON e.employee_id = et.employee_id AND et.status = 'completed' WHERE et.course_id IN (SELECT course_id FROM training_courses WHERE is_mandatory = TRUE) AND et.employee_id IS NULL;","tables_used_in_sql":[],"explain_result":"success","rows_returned":0,"total_latency_ms":1397}
{"timestamp":"2026-01-29T20:50:25.181Z","query_id":"d1792670-5ba6-4631-8212-650133c1e357","question":"Calculate month-over-month sales growth rate for the past 12 months","attempt_count":1,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_opportunities","sales_orders","sales_quotes","project_milestones","performance_reviews","purchase_orders","sales_regions","sales_territories","goods_receipts","fiscal_years","fiscal_periods","fixed_assets"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_opportunities","similarity":0.6157116926794552},{"table":"sales_orders","similarity":0.6006459034551404},{"table":"sales_regions","similarity":0.5852419849044662},{"table":"sales_quotes","similarity":0.5842211564145057},{"table":"project_milestones","similarity":0.570290032024122},{"table":"purchase_orders","similarity":0.5671901529888976},{"table":"performance_reviews","similarity":0.5664270760489215},{"table":"sales_territories","similarity":0.5642407853687107},{"table":"stock_transfers","similarity":0.5587294182734618},{"table":"goods_receipts","similarity":0.5586981186050166},{"table":"fiscal_periods","similarity":0.557865710059711},{"table":"fiscal_years","similarity":0.5484906283130861},{"table":"purchase_requisitions","similarity":0.5400891317424515},{"table":"inventory_adjustments","similarity":0.5400433012210731},{"table":"tax_rates","similarity":0.5390929131193718}],"column_hits_per_table":{"sales_opportunities":10,"sales_regions":2,"sales_orders":10,"sales_quotes":8,"maintenance_types":1,"performance_reviews":2,"project_milestones":3,"product_suppliers":1,"sales_territories":2,"depreciation_schedules":2,"purchase_orders":3,"inventory_adjustments":1,"goods_receipts":1,"fixed_assets":1,"project_resources":1,"fiscal_years":1,"inventory_levels":1},"top_columns_per_table":{"sales_opportunities":[{"column":"expected_close_date","similarity":0.6349920466572413},{"column":"actual_close_date","similarity":0.6306604293774668},{"column":"probability","similarity":0.6115666602689689}],"sales_regions":[{"column":"target_revenue","similarity":0.6246528697952606},{"column":"name","similarity":0.5895328709845001}],"sales_orders":[{"column":"order_date","similarity":0.6066547704969023},{"column":"total","similarity":0.596441977736594},{"column":"ship_date","similarity":0.5930488071352698}],"sales_quotes":[{"column":"quote_date","similarity":0.6043144886073183},{"column":"valid_until","similarity":0.5926742142050333},{"column":"status","similarity":0.58861972419265}],"maintenance_types":[{"column":"frequency_months","similarity":0.6025393190667295}],"performance_reviews":[{"column":"goals_met_percent","similarity":0.5879927707908889},{"column":"review_period_start","similarity":0.5628892649507783}],"project_milestones":[{"column":"amount","similarity":0.5831571816642501},{"column":"completed_date","similarity":0.5731111906139561},{"column":"due_date","similarity":0.5646006206164285}],"product_suppliers":[{"column":"lead_time_days","similarity":0.5824107328736775}],"sales_territories":[{"column":"name","similarity":0.5815838973769365},{"column":"region_id","similarity":0.5606403725985879}],"depreciation_schedules":[{"column":"monthly_amount","similarity":0.5809365473284506},{"column":"useful_life_months","similarity":0.5752368480135198}],"purchase_orders":[{"column":"expected_date","similarity":0.5807594956317658},{"column":"total","similarity":0.5587034043259257},{"column":"order_date","similarity":0.5574665711216267}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.5689704746812687}],"goods_receipts":[{"column":"receipt_date","similarity":0.5649131464666418}],"fixed_assets":[{"column":"purchase_date","similarity":0.5640514088105937}],"project_resources":[{"column":"hourly_rate","similarity":0.5639674847646822}],"fiscal_years":[{"column":"year","similarity":0.5622418074015364}],"inventory_levels":[{"column":"last_count_date","similarity":0.5583066702397402}]},"fused_scores":[{"table":"sales_opportunities","fused":0.7495559201460631,"table_sim":0.6157116926794552,"col_score":0.9503222613459748},{"table":"sales_orders","fused":0.7223378458191639,"table_sim":0.6006459034551404,"col_score":0.9048757593651993},{"table":"sales_quotes","fused":0.7107933321326374,"table_sim":0.5842211564145057,"col_score":0.9006515957098349},{"table":"project_milestones","fused":0.6900591300029644,"table_sim":0.570290032024122,"col_score":0.8697127769712282},{"table":"performance_reviews","fused":0.6876312069358641,"table_sim":0.5664270760489215,"col_score":0.8694374032662779},{"table":"purchase_orders","fused":0.6843585709112301,"table_sim":0.5671901529888976,"col_score":0.8601111977947287},{"table":"sales_regions","fused":0.6835409407986139,"table_sim":0.5852419849044662,"col_score":0.8309893746398356},{"table":"sales_territories","fused":0.5798776146505709,"table_sim":0.5642407853687107,"col_score":0.6033328585733613},{"table":"goods_receipts","fused":0.5611841297496667,"table_sim":0.5586981186050166,"col_score":0.5649131464666418},{"table":"fiscal_years","fused":0.5539910999484663,"table_sim":0.5484906283130861,"col_score":0.5622418074015364},{"table":"inventory_adjustments","fused":0.5516141706051514,"table_sim":0.5400433012210731,"col_score":0.5689704746812687},{"table":"depreciation_schedules","fused":0.34742198853408424,"table_sim":0,"col_score":0.8685549713352105},{"table":"stock_transfers","fused":0.33523765096407704,"table_sim":0.5587294182734618,"col_score":0},{"table":"fiscal_periods","fused":0.33471942603582655,"table_sim":0.557865710059711,"col_score":0},{"table":"purchase_requisitions","fused":0.32405347904547094,"table_sim":0.5400891317424515,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":13,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":34,"total_retrieval_latency_ms":40,"sql_generated":"","tables_used_in_sql":[],"total_latency_ms":2792,"failure_type":"execution_error","failure_details":"Model generated invalid output (gibberish detected)"}
{"timestamp":"2026-01-29T20:50:27.973Z","query_id":"e77d9165-020c-427d-a26e-c09ff28e64c6","question":"Find the average order value and order frequency for each customer segment based on credit limit","attempt_count":2,"retry_succeeded":true,"execution_success":true,"retriever_version":"V2","tables_retrieved":["customers","order_lines","sales_orders","purchase_orders","po_lines","inventory_levels","vendor_invoice_lines","product_suppliers","vendor_invoices","requisition_lines","customer_contacts","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"customers","similarity":0.6806365809432632},{"table":"order_lines","similarity":0.6612582093852053},{"table":"sales_orders","similarity":0.6503570787641184},{"table":"purchase_orders","similarity":0.6350119894518774},{"table":"po_lines","similarity":0.6239700790357152},{"table":"sales_opportunities","similarity":0.6079639266361453},{"table":"inventory_levels","similarity":0.6033202031698347},{"table":"sales_regions","similarity":0.5939454770122685},{"table":"vendor_invoice_lines","similarity":0.5937575753832759},{"table":"requisition_lines","similarity":0.590502871726471},{"table":"goods_receipts","similarity":0.5885428783810364},{"table":"product_suppliers","similarity":0.5881326527582414},{"table":"purchase_requisitions","similarity":0.5870519262773803},{"table":"customer_contacts","similarity":0.5862288727557493},{"table":"vendor_invoices","similarity":0.5856337339498445}],"column_hits_per_table":{"customers":6,"order_lines":8,"purchase_orders":9,"sales_orders":7,"po_lines":5,"reorder_rules":2,"vendor_invoice_lines":3,"product_suppliers":1,"inventory_levels":4,"vendor_invoices":1,"customer_contacts":1,"requisition_lines":1,"quote_lines":1,"budget_lines":1},"top_columns_per_table":{"customers":[{"column":"credit_limit","similarity":0.7585186196959948},{"column":"customer_number","similarity":0.6580317654044683},{"column":"phone","similarity":0.6535915529702684}],"order_lines":[{"column":"line_total","similarity":0.6948388698124641},{"column":"unit_price","similarity":0.6806419895725467},{"column":"discount_percent","similarity":0.6754620796934562}],"purchase_orders":[{"column":"total","similarity":0.6852668855656413},{"column":"shipping_cost","similarity":0.6529784604621701},{"column":"po_number","similarity":0.6529416456054898}],"sales_orders":[{"column":"total","similarity":0.6806848320717455},{"column":"order_number","similarity":0.6663157017306066},{"column":"shipping_cost","similarity":0.6460324115150056}],"po_lines":[{"column":"line_total","similarity":0.6613663843065055},{"column":"unit_cost","similarity":0.634997889978794},{"column":"quantity_received","similarity":0.6333850871020219}],"reorder_rules":[{"column":"max_quantity","similarity":0.6390768169493309},{"column":"min_quantity","similarity":0.613671491916226}],"vendor_invoice_lines":[{"column":"amount","similarity":0.6368350345890655},{"column":"unit_cost","similarity":0.6252213762445078},{"column":"quantity","similarity":0.6211936807432661}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6355194003397301}],"inventory_levels":[{"column":"quantity_reserved","similarity":0.6278756626527294},{"column":"last_count_date","similarity":0.6173098741422713},{"column":"quantity_on_hand","similarity":0.6152745260367936}],"vendor_invoices":[{"column":"total","similarity":0.6233351375751739}],"customer_contacts":[{"column":"phone","similarity":0.6135336030884168}],"requisition_lines":[{"column":"estimated_total","similarity":0.6134905613297535}],"quote_lines":[{"column":"line_total","similarity":0.6131735766593597}],"budget_lines":[{"column":"amount","similarity":0.6095658159713937}]},"fused_scores":[{"table":"customers","fused":0.8433957495252495,"table_sim":0.6806365809432632,"col_score":1.087534502398229},{"table":"order_lines","fused":0.8108188714706182,"table_sim":0.6612582093852053,"col_score":1.0351598645987374},{"table":"sales_orders","fused":0.7957513204332907,"table_sim":0.6503570787641184,"col_score":1.0138426829370488},{"table":"purchase_orders","fused":0.785709639989817,"table_sim":0.6350119894518774,"col_score":1.0117561157967263},{"table":"po_lines","fused":0.7659281791397902,"table_sim":0.6239700790357152,"col_score":0.9788653292959025},{"table":"inventory_levels","fused":0.7366043617914468,"table_sim":0.6033202031698347,"col_score":0.9365305997238651},{"table":"vendor_invoice_lines","fused":0.7360328343144933,"table_sim":0.5937575753832759,"col_score":0.9494457227113194},{"table":"product_suppliers","fused":0.6070873517908368,"table_sim":0.5881326527582414,"col_score":0.6355194003397301},{"table":"vendor_invoices","fused":0.6007142953999762,"table_sim":0.5856337339498445,"col_score":0.6233351375751739},{"table":"requisition_lines","fused":0.599697947567784,"table_sim":0.590502871726471,"col_score":0.6134905613297535},{"table":"customer_contacts","fused":0.5971507648888162,"table_sim":0.5862288727557493,"col_score":0.6135336030884168},{"table":"reorder_rules","fused":0.3783650251629776,"table_sim":0,"col_score":0.945912562907444},{"table":"sales_opportunities","fused":0.3647783559816872,"table_sim":0.6079639266361453,"col_score":0},{"table":"sales_regions","fused":0.3563672862073611,"table_sim":0.5939454770122685,"col_score":0},{"table":"goods_receipts","fused":0.3531257270286218,"table_sim":0.5885428783810364,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":21,"total_retrieval_latency_ms":27,"sql_generated":"SELECT c.credit_limit, AVG(s.total) AS avg_order_value, COUNT(*) / 365.0 AS order_frequency FROM customers c JOIN sales_orders s ON c.customer_id = s.customer_id GROUP BY c.credit_limit;","tables_used_in_sql":[],"explain_result":"success","sqlstate":"42703","error_message":"column c.segment does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":0,"autocorrect_failure_reason":"No candidates found for column 'segment'","rows_returned":5,"total_latency_ms":1904}
{"timestamp":"2026-01-29T20:50:29.878Z","query_id":"0b34bd36-536e-49a3-844e-c5f39a7f7841","question":"What is the sales pipeline weighted value by stage and expected close month?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_opportunities","sales_orders","vendor_invoices","opportunity_stages","vendor_invoice_lines","purchase_orders","sales_quotes","sales_regions","project_phases","product_suppliers","order_lines","products"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_opportunities","similarity":0.6054695442586654},{"table":"opportunity_stages","similarity":0.5878194026125775},{"table":"purchase_orders","similarity":0.569620040129231},{"table":"sales_orders","similarity":0.5672773314428301},{"table":"vendor_invoices","similarity":0.5653986063661894},{"table":"vendor_invoice_lines","similarity":0.5524555005656138},{"table":"sales_quotes","similarity":0.550409683101325},{"table":"product_suppliers","similarity":0.5461777322512522},{"table":"sales_regions","similarity":0.5358537079732489},{"table":"inventory_levels","similarity":0.533856062475615},{"table":"stock_transfers","similarity":0.5326603234644891},{"table":"project_phases","similarity":0.5278052692037372},{"table":"order_lines","similarity":0.5277084897192255},{"table":"vendor_contacts","similarity":0.5244207269459633},{"table":"fiscal_years","similarity":0.5214777441208323}],"column_hits_per_table":{"sales_opportunities":6,"sales_orders":8,"sales_quotes":7,"vendor_invoices":7,"vendor_invoice_lines":3,"products":1,"purchase_orders":4,"opportunity_stages":2,"project_phases":2,"sales_regions":2,"depreciation_schedules":2,"product_suppliers":1,"project_milestones":1,"performance_reviews":1,"inventory_levels":1,"projects":1,"order_lines":1},"top_columns_per_table":{"sales_opportunities":[{"column":"expected_close_date","similarity":0.6672378848884489},{"column":"actual_close_date","similarity":0.634399953849031},{"column":"amount","similarity":0.5735263838442387}],"sales_orders":[{"column":"total","similarity":0.5926957958092102},{"column":"subtotal","similarity":0.5919476684332582},{"column":"shipping_cost","similarity":0.5804098809281995}],"sales_quotes":[{"column":"status","similarity":0.5911942655396014},{"column":"total","similarity":0.5841523851755166},{"column":"subtotal","similarity":0.5810304737355192}],"vendor_invoices":[{"column":"subtotal","similarity":0.5904633340627892},{"column":"total","similarity":0.58918482827673},{"column":"status","similarity":0.5659596977000683}],"vendor_invoice_lines":[{"column":"amount","similarity":0.587921854927484},{"column":"unit_cost","similarity":0.5805145112553433},{"column":"quantity","similarity":0.5740191375367586}],"products":[{"column":"weight","similarity":0.5793059408002791}],"purchase_orders":[{"column":"expected_date","similarity":0.5712405322677854},{"column":"total","similarity":0.55843434508497},{"column":"subtotal","similarity":0.5557966692183937}],"opportunity_stages":[{"column":"is_closed","similarity":0.5687914662845237},{"column":"probability","similarity":0.554174542810227}],"project_phases":[{"column":"end_date","similarity":0.5684419996726171},{"column":"status","similarity":0.5441275392901614}],"sales_regions":[{"column":"target_revenue","similarity":0.5671305047519016},{"column":"name","similarity":0.5466568514473741}],"depreciation_schedules":[{"column":"monthly_amount","similarity":0.5656288481399},{"column":"annual_amount","similarity":0.544202460241292}],"product_suppliers":[{"column":"lead_time_days","similarity":0.5635593957356553}],"project_milestones":[{"column":"amount","similarity":0.5574234871213531}],"performance_reviews":[{"column":"review_period_end","similarity":0.5567893896705155}],"inventory_levels":[{"column":"last_count_date","similarity":0.5552187328325828}],"projects":[{"column":"planned_end_date","similarity":0.5474865766090119}],"order_lines":[{"column":"discount_percent","similarity":0.5465995943119437}]},"fused_scores":[{"table":"sales_opportunities","fused":0.7570568712803851,"table_sim":0.6054695442586654,"col_score":0.9844378618129644},{"table":"sales_orders","fused":0.6958342508760338,"table_sim":0.5672773314428301,"col_score":0.8886696300258392},{"table":"vendor_invoices","fused":0.6932614631001753,"table_sim":0.5653986063661894,"col_score":0.8850557482011542},{"table":"opportunity_stages","fused":0.6910431366434013,"table_sim":0.5878194026125775,"col_score":0.8458787376896373},{"table":"vendor_invoice_lines","fused":0.6827449445614305,"table_sim":0.5524555005656138,"col_score":0.8781791105551557},{"table":"purchase_orders","fused":0.6819551060016467,"table_sim":0.569620040129231,"col_score":0.8504577048102704},{"table":"sales_quotes","fused":0.6801128586781056,"table_sim":0.550409683101325,"col_score":0.8746676220432762},{"table":"sales_regions","fused":0.6248963858873424,"table_sim":0.5358537079732489,"col_score":0.7584604027584826},{"table":"project_phases","fused":0.6202378168919118,"table_sim":0.5278052692037372,"col_score":0.7588866384241736},{"table":"product_suppliers","fused":0.5531303976450135,"table_sim":0.5461777322512522,"col_score":0.5635593957356553},{"table":"inventory_levels","fused":0.5424011306184021,"table_sim":0.533856062475615,"col_score":0.5552187328325828},{"table":"order_lines","fused":0.5352649315563127,"table_sim":0.5277084897192255,"col_score":0.5465995943119437},{"table":"depreciation_schedules","fused":0.33509203130421844,"table_sim":0,"col_score":0.837730078260546},{"table":"stock_transfers","fused":0.31959619407869344,"table_sim":0.5326603234644891,"col_score":0},{"table":"vendor_contacts","fused":0.314652436167578,"table_sim":0.5244207269459633,"col_score":0}],"fk_expansion_candidates":15,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"projects","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":13,"total_retrieval_latency_ms":19,"sql_generated":"","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column os.order_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":3,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":6554,"failure_type":"execution_error","failure_details":"Model did not generate SELECT statement"}
{"timestamp":"2026-01-29T20:50:36.431Z","query_id":"2f08c8bf-2e34-40d8-871d-f05d1f484f70","question":"Calculate inventory turnover ratio by product category","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["inventory_levels","inventory_transactions","asset_categories","products","inventory_adjustments","product_suppliers","sales_orders","reorder_rules","receipt_lines","product_categories","fixed_assets","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":1,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_levels","similarity":0.6747561713408694},{"table":"products","similarity":0.6673866757064916},{"table":"asset_categories","similarity":0.6658822163690923},{"table":"inventory_transactions","similarity":0.6584332771076702},{"table":"product_categories","similarity":0.6501703787798785},{"table":"reorder_rules","similarity":0.6320804286370688},{"table":"inventory_adjustments","similarity":0.631066892629761},{"table":"goods_receipts","similarity":0.6155086832245751},{"table":"asset_maintenance","similarity":0.6045690515376625},{"table":"fixed_assets","similarity":0.6018441701160724},{"table":"product_suppliers","similarity":0.6013426853614583},{"table":"receipt_lines","similarity":0.596972482520933},{"table":"sales_orders","similarity":0.5904178851402269},{"table":"depreciation_entries","similarity":0.586520590552934},{"table":"order_lines","similarity":0.5853842956573193}],"column_hits_per_table":{"inventory_transactions":8,"inventory_levels":7,"asset_categories":4,"products":7,"product_categories":5,"sales_orders":4,"fixed_assets":1,"inventory_adjustments":5,"reorder_rules":2,"product_suppliers":2,"sales_regions":1,"depreciation_entries":1,"receipt_lines":2,"goods_receipts":1},"top_columns_per_table":{"inventory_transactions":[{"column":"quantity","similarity":0.6865537352744734},{"column":"transaction_type","similarity":0.6508604601013612},{"column":"product_id","similarity":0.6488474271833253}],"inventory_levels":[{"column":"quantity_reserved","similarity":0.6807736099760374},{"column":"quantity_available","similarity":0.6752817875893032},{"column":"product_id","similarity":0.6665316206818281}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.6677845311404557},{"column":"depreciation_method","similarity":0.636435148844442},{"column":"useful_life_years","similarity":0.6246456594520073}],"products":[{"column":"category_id","similarity":0.6569412387377351},{"column":"weight","similarity":0.6437332914835887},{"column":"unit_cost","similarity":0.6272328353575076}],"product_categories":[{"column":"category_id","similarity":0.6539744060156725},{"column":"description","similarity":0.6525521507615628},{"column":"is_active","similarity":0.6498264325617669}],"sales_orders":[{"column":"total","similarity":0.6251835363649095},{"column":"order_number","similarity":0.6053905248062422},{"column":"subtotal","similarity":0.6052825411110333}],"fixed_assets":[{"column":"category_id","similarity":0.6200942331147149}],"inventory_adjustments":[{"column":"adjustment_number","similarity":0.6158389191950121},{"column":"adjusted_by","similarity":0.6148750217624924},{"column":"status","similarity":0.6081076578124999}],"reorder_rules":[{"column":"product_id","similarity":0.6137559004977273},{"column":"reorder_quantity","similarity":0.6086116987509864}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6128603706932287},{"column":"unit_cost","similarity":0.5980571455291517}],"sales_regions":[{"column":"target_revenue","similarity":0.6085079266346386}],"depreciation_entries":[{"column":"accumulated_depreciation","similarity":0.6077181065202967}],"receipt_lines":[{"column":"product_id","similarity":0.6076761642596111},{"column":"quantity_received","similarity":0.6073129685640721}],"goods_receipts":[{"column":"receipt_number","similarity":0.6055856654540261}]},"fused_scores":[{"table":"inventory_levels","fused":0.8122195043127973,"table_sim":0.6747561713408694,"col_score":1.018414503770689},{"table":"inventory_transactions","fused":0.7998535523946637,"table_sim":0.6584332771076702,"col_score":1.011983965325154},{"table":"asset_categories","fused":0.7939301720465259,"table_sim":0.6658822163690923,"col_score":0.9860021055626766},{"table":"products","fused":0.7833718890888319,"table_sim":0.6673866757064916,"col_score":0.9573497091623425},{"table":"inventory_adjustments","fused":0.74795070760836,"table_sim":0.631066892629761,"col_score":0.9232764300762584},{"table":"product_suppliers","fused":0.7255611885999969,"table_sim":0.6013426853614583,"col_score":0.9118889434578046},{"table":"sales_orders","fused":0.7254022505913484,"table_sim":0.5904178851402269,"col_score":0.9278787987680306},{"table":"reorder_rules","fused":0.7086187627523177,"table_sim":0.6320804286370688,"col_score":0.823426263925191},{"table":"receipt_lines","fused":0.6861833399345343,"table_sim":0.596972482520933,"col_score":0.819999626054936},{"table":"product_categories","fused":0.6645723620589341,"table_sim":0.6501703787798785,"col_score":0.6861753369775176},{"table":"goods_receipts","fused":0.6115394761163555,"table_sim":0.6155086832245751,"col_score":0.6055856654540261},{"table":"depreciation_entries","fused":0.5949995969398791,"table_sim":0.586520590552934,"col_score":0.6077181065202967},{"table":"fixed_assets","fused":0.5347328873417636,"table_sim":0.6018441701160724,"col_score":0.4340659631803004},{"table":"asset_maintenance","fused":0.3627414309225975,"table_sim":0.6045690515376625,"col_score":0},{"table":"order_lines","fused":0.35123057739439156,"table_sim":0.5853842956573193,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":13,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"order_lines","reason":"max_tables"},{"table":"po_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":24,"total_retrieval_latency_ms":29,"sql_generated":"SELECT pc.name AS product_category, SUM(il.quantity_on_hand) / AVG(il.quantity_available) AS inventory_turnover_ratio FROM inventory_levels il JOIN products p ON il.product_id = p.product_id JOIN product_categories pc ON p.category_id = pc.category_id GROUP BY pc.name;","tables_used_in_sql":[],"explain_result":"success","rows_returned":30,"total_latency_ms":1294}
{"timestamp":"2026-01-29T20:50:37.725Z","query_id":"240eb3ba-bf0d-46f0-914c-d89e4d3b5a03","question":"Identify products with significant inventory discrepancies (adjustment > 10% of stock)","attempt_count":2,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["inventory_adjustments","adjustment_lines","inventory_transactions","inventory_levels","products","fixed_assets","asset_categories","stock_transfers","sales_orders","product_suppliers","asset_maintenance","order_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_adjustments","similarity":0.6958975386244389},{"table":"adjustment_lines","similarity":0.651007722195867},{"table":"fixed_assets","similarity":0.5955860146307721},{"table":"inventory_levels","similarity":0.5926011478403523},{"table":"products","similarity":0.578715845938642},{"table":"stock_transfers","similarity":0.5760981592349576},{"table":"inventory_transactions","similarity":0.5750206157907899},{"table":"asset_categories","similarity":0.5623112702235089},{"table":"asset_maintenance","similarity":0.5600794494972439},{"table":"product_suppliers","similarity":0.5588750264521751},{"table":"sales_orders","similarity":0.5479311734009632},{"table":"order_lines","similarity":0.5473705995587962},{"table":"purchase_orders","similarity":0.546212124678954},{"table":"product_categories","similarity":0.5459325805601473},{"table":"reorder_rules","similarity":0.5325202996518776}],"column_hits_per_table":{"inventory_adjustments":8,"adjustment_lines":5,"inventory_transactions":4,"products":5,"inventory_levels":5,"stock_transfers":2,"product_categories":1,"sales_orders":2,"product_suppliers":1,"asset_categories":3,"fixed_assets":4,"warehouse_locations":1,"goods_receipts":1,"project_expenses":1,"purchase_requisitions":1,"asset_locations":1,"asset_maintenance":1,"sales_opportunities":1,"vendor_invoices":2,"purchase_orders":1},"top_columns_per_table":{"inventory_adjustments":[{"column":"adjustment_number","similarity":0.7379814171122983},{"column":"reason","similarity":0.727925874735162},{"column":"status","similarity":0.7097133930935916}],"adjustment_lines":[{"column":"quantity_change","similarity":0.6459437862491665},{"column":"quantity_before","similarity":0.638065129258906},{"column":"quantity_after","similarity":0.636824144296085}],"inventory_transactions":[{"column":"transaction_type","similarity":0.6388771360730054},{"column":"reference_type","similarity":0.6379927241845618},{"column":"quantity","similarity":0.611413004161695}],"products":[{"column":"sku","similarity":0.6166735172572736},{"column":"name","similarity":0.6049081894916613},{"column":"weight","similarity":0.6002742783527346}],"inventory_levels":[{"column":"quantity_on_hand","similarity":0.6143345114617179},{"column":"quantity_available","similarity":0.6136312184002083},{"column":"quantity_reserved","similarity":0.6127891253033684}],"stock_transfers":[{"column":"transfer_number","similarity":0.6121115337226785},{"column":"status","similarity":0.6084281897334642}],"product_categories":[{"column":"name","similarity":0.6105471170007082}],"sales_orders":[{"column":"order_number","similarity":0.6049937069135132},{"column":"status","similarity":0.5883288690803906}],"product_suppliers":[{"column":"vendor_sku","similarity":0.6005565436728285}],"asset_categories":[{"column":"depreciation_method","similarity":0.5998811628635573},{"column":"name","similarity":0.5815804725674092},{"column":"salvage_value_percent","similarity":0.5811592495285139}],"fixed_assets":[{"column":"serial_number","similarity":0.5963742863000839},{"column":"asset_tag","similarity":0.5892195830987257},{"column":"name","similarity":0.5797471569989101}],"warehouse_locations":[{"column":"aisle","similarity":0.5865692348819901}],"goods_receipts":[{"column":"receipt_number","similarity":0.5864837088793964}],"project_expenses":[{"column":"category","similarity":0.5843825285695107}],"purchase_requisitions":[{"column":"requisition_number","similarity":0.5771490096202545}],"asset_locations":[{"column":"floor","similarity":0.5759538723637104}],"asset_maintenance":[{"column":"status","similarity":0.5750561706184214}],"sales_opportunities":[{"column":"source","similarity":0.5748716289995487}],"vendor_invoices":[{"column":"invoice_number","similarity":0.5743499698456791},{"column":"status","similarity":0.5674179154395642}],"purchase_orders":[{"column":"status","similarity":0.5739475463327183}]},"fused_scores":[{"table":"inventory_adjustments","fused":0.8583162649666151,"table_sim":0.6958975386244389,"col_score":1.1019443544798793},{"table":"adjustment_lines","fused":0.776595173668968,"table_sim":0.651007722195867,"col_score":0.9649763508786195},{"table":"inventory_transactions","fused":0.7281617687405886,"table_sim":0.5750206157907899,"col_score":0.9578734981652863},{"table":"inventory_levels","fused":0.7240207369689402,"table_sim":0.5926011478403523,"col_score":0.921150120661822},{"table":"products","fused":0.7139537701366416,"table_sim":0.578715845938642,"col_score":0.9168106564336409},{"table":"fixed_assets","fused":0.713745239918242,"table_sim":0.5955860146307721,"col_score":0.8909840778494468},{"table":"asset_categories","fused":0.693571077185231,"table_sim":0.5623112702235089,"col_score":0.8904607876278143},{"table":"stock_transfers","fused":0.6756834555927309,"table_sim":0.5760981592349576,"col_score":0.825061400129391},{"table":"sales_orders","fused":0.6531222284772379,"table_sim":0.5479311734009632,"col_score":0.8109088110916499},{"table":"product_suppliers","fused":0.5755476333404366,"table_sim":0.5588750264521751,"col_score":0.6005565436728285},{"table":"product_categories","fused":0.4985127410962866,"table_sim":0.5459325805601473,"col_score":0.42738298190049573},{"table":"asset_maintenance","fused":0.4970633974715043,"table_sim":0.5600794494972439,"col_score":0.40253931943289495},{"table":"purchase_orders","fused":0.48843258778053344,"table_sim":0.546212124678954,"col_score":0.40176328243290277},{"table":"order_lines","fused":0.3284223597352777,"table_sim":0.5473705995587962,"col_score":0},{"table":"reorder_rules","fused":0.31951217979112656,"table_sim":0.5325202996518776,"col_score":0}],"fk_expansion_candidates":22,"fk_expansion_added":2,"fk_expansion_blocked_count":16,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"product_categories","reason":"max_tables"},{"table":"purchase_orders","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"max_tables"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":28,"total_retrieval_latency_ms":34,"sql_generated":"","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42601","error_message":"syntax error at or near \"LIMIT\"","total_latency_ms":5461,"failure_type":"execution_error","failure_details":"Model did not generate SELECT statement"}
{"timestamp":"2026-01-29T20:50:43.186Z","query_id":"7ebcd915-2836-4879-b5cc-e2f16ce6249b","question":"Calculate vendor performance score based on on-time delivery and invoice accuracy","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["vendor_invoices","performance_reviews","vendors","vendor_invoice_lines","product_suppliers","vendor_contacts","sales_orders","purchase_orders","goods_receipts","customers","order_lines","purchase_requisitions"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"vendor_invoices","similarity":0.6955551654807471},{"table":"performance_reviews","similarity":0.6709085810677549},{"table":"purchase_orders","similarity":0.6347301134279532},{"table":"vendors","similarity":0.630909375510322},{"table":"product_suppliers","similarity":0.6192498236848171},{"table":"vendor_invoice_lines","similarity":0.6085569773940885},{"table":"vendor_contacts","similarity":0.5997141827932857},{"table":"sales_orders","similarity":0.5961588710632616},{"table":"goods_receipts","similarity":0.5661835877563559},{"table":"customers","similarity":0.5465937183932046},{"table":"sales_opportunities","similarity":0.5460555777323932},{"table":"timesheets","similarity":0.5442791382718302},{"table":"order_lines","similarity":0.5315126832995996},{"table":"purchase_requisitions","similarity":0.5282778311071779},{"table":"employee_certifications","similarity":0.5262320271658971}],"column_hits_per_table":{"vendor_invoices":12,"vendor_invoice_lines":6,"vendors":10,"performance_reviews":9,"purchase_orders":2,"vendor_contacts":4,"product_suppliers":3,"fixed_assets":1,"sales_orders":2,"asset_maintenance":1},"top_columns_per_table":{"vendor_invoices":[{"column":"invoice_date","similarity":0.6820971378162017},{"column":"total","similarity":0.6809847435881535},{"column":"amount_paid","similarity":0.6702202083428355}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.6465337363568044},{"column":"amount","similarity":0.6406576732483038},{"column":"unit_cost","similarity":0.6290973902712709}],"vendors":[{"column":"vendor_number","similarity":0.6392790672289599},{"column":"phone","similarity":0.632615514334186},{"column":"website","similarity":0.6187955062109327}],"performance_reviews":[{"column":"review_date","similarity":0.6391298059120761},{"column":"goals_met_percent","similarity":0.6348897232221123},{"column":"employee_id","similarity":0.6192794816779427}],"purchase_orders":[{"column":"vendor_id","similarity":0.6082240149448},{"column":"shipping_cost","similarity":0.5758565410529615}],"vendor_contacts":[{"column":"phone","similarity":0.6061779393166513},{"column":"title","similarity":0.5932972624562619},{"column":"email","similarity":0.5917429339564875}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6044250768889664},{"column":"lead_time_days","similarity":0.6030466911489025},{"column":"vendor_id","similarity":0.5943087874293309}],"fixed_assets":[{"column":"vendor_id","similarity":0.5842101591334125}],"sales_orders":[{"column":"shipping_cost","similarity":0.5793358176930354},{"column":"total","similarity":0.5764972250136845}],"asset_maintenance":[{"column":"vendor_id","similarity":0.5782090997352557}]},"fused_scores":[{"table":"vendor_invoices","fused":0.8263689031325596,"table_sim":0.6955551654807471,"col_score":1.0225895096102784},{"table":"performance_reviews","fused":0.7851750156499058,"table_sim":0.6709085810677549,"col_score":0.9565746675231324},{"table":"vendors","fused":0.7607803550646144,"table_sim":0.630909375510322,"col_score":0.9555868243960528},{"table":"vendor_invoice_lines","fused":0.7518792156288356,"table_sim":0.6085569773940885,"col_score":0.9668625729809563},{"table":"product_suppliers","fused":0.7339292631962573,"table_sim":0.6192498236848171,"col_score":0.9059484224634177},{"table":"vendor_contacts","fused":0.7209591378938843,"table_sim":0.5997141827932857,"col_score":0.9028265705447822},{"table":"sales_orders","fused":0.704729094717908,"table_sim":0.5961588710632616,"col_score":0.8675844301998776},{"table":"purchase_orders","fused":0.6963320465702285,"table_sim":0.6347301134279532,"col_score":0.7887349462836415},{"table":"goods_receipts","fused":0.33971015265381355,"table_sim":0.5661835877563559,"col_score":0},{"table":"customers","fused":0.32795623103592275,"table_sim":0.5465937183932046,"col_score":0},{"table":"sales_opportunities","fused":0.32763334663943594,"table_sim":0.5460555777323932,"col_score":0},{"table":"timesheets","fused":0.32656748296309807,"table_sim":0.5442791382718302,"col_score":0},{"table":"order_lines","fused":0.3189076099797597,"table_sim":0.5315126832995996,"col_score":0},{"table":"purchase_requisitions","fused":0.3169666986643067,"table_sim":0.5282778311071779,"col_score":0},{"table":"employee_certifications","fused":0.3157392162995383,"table_sim":0.5262320271658971,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":13,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":17,"total_retrieval_latency_ms":23,"sql_generated":"SELECT v.vendor_id, AVG(CASE WHEN g.received_by IS NOT NULL THEN 1 ELSE 0 END) AS on_time_delivery_score, AVG(CASE WHEN ivl.amount = vr.total THEN 1 ELSE 0 END) AS invoice_accuracy_score FROM vendors v LEFT JOIN goods_receipts g ON v.vendor_id = g.po_id AND g.received_by IS NOT NULL LEFT JOIN vendor_invoices iv ON v.vendor_id = iv.vendor_id LEFT JOIN vendor_invoice_lines ivl ON iv.invoice_id = ivl.invoice_id GROUP BY v.vendor_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42P01","error_message":"missing FROM-clause entry for table \"vr\"","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_failure_reason":"Alias 'vr' not defined. Possible table: vendor_invoices. Define alias in FROM/JOIN clause.","total_latency_ms":6423,"failure_type":"join_path_miss","failure_details":"Database error after 3 attempts: missing FROM-clause entry for table \"vr\""}
{"timestamp":"2026-01-29T20:50:49.610Z","query_id":"d5ae738e-ef07-4373-bd92-69c694595eae","question":"Generate a trial balance for the current period showing debits and credits by account category","attempt_count":2,"retry_succeeded":true,"execution_success":true,"retriever_version":"V2","tables_retrieved":["bank_accounts","account_types","depreciation_entries","depreciation_schedules","asset_categories","bank_transactions","fiscal_periods","budget_lines","project_budgets","budgets","chart_of_accounts","departments"],"tables_from_table_retrieval":15,"tables_from_column_only":10,"tables_from_fk_expansion":2,"table_scores":[{"table":"bank_accounts","similarity":0.6367900839880641},{"table":"asset_categories","similarity":0.6346535809758647},{"table":"account_types","similarity":0.6272285653729832},{"table":"depreciation_entries","similarity":0.6225511215159643},{"table":"depreciation_schedules","similarity":0.6165057393727287},{"table":"bank_transactions","similarity":0.6150962404412702},{"table":"fiscal_periods","similarity":0.6041900407507028},{"table":"chart_of_accounts","similarity":0.6007482259075341},{"table":"budget_lines","similarity":0.593425377594523},{"table":"customers","similarity":0.5828336551027367},{"table":"certifications","similarity":0.5762638622043766},{"table":"benefit_types","similarity":0.5715028878009876},{"table":"employee_benefits","similarity":0.5708097023317666},{"table":"project_budgets","similarity":0.5699587952178357},{"table":"budgets","similarity":0.568767701756073}],"column_hits_per_table":{"bank_accounts":4,"account_types":2,"depreciation_schedules":7,"depreciation_entries":5,"asset_categories":2,"benefit_types":1,"fiscal_periods":4,"project_budgets":2,"journal_lines":2,"project_expenses":1,"bank_transactions":4,"budgets":2,"departments":1,"asset_maintenance":1,"timesheets":1,"projects":1,"chart_of_accounts":1,"purchase_orders":2,"customers":1,"vendor_invoices":2,"currencies":1,"budget_lines":2,"inventory_adjustments":1},"top_columns_per_table":{"bank_accounts":[{"column":"current_balance","similarity":0.6869151637984203},{"column":"account_name","similarity":0.6080144236924266},{"column":"bank_name","similarity":0.6066260579567178}],"account_types":[{"column":"normal_balance","similarity":0.6484160338759071},{"column":"category","similarity":0.6238956196601739}],"depreciation_schedules":[{"column":"monthly_amount","similarity":0.6460216272986022},{"column":"annual_amount","similarity":0.6435863787386237},{"column":"start_date","similarity":0.6178549858715044}],"depreciation_entries":[{"column":"amount","similarity":0.6460096782233629},{"column":"period_id","similarity":0.6401048650864071},{"column":"accumulated_depreciation","similarity":0.6398491695651559}],"asset_categories":[{"column":"depreciation_method","similarity":0.6399578806467106},{"column":"salvage_value_percent","similarity":0.5906692564768835}],"benefit_types":[{"column":"annual_cost","similarity":0.614857236154928}],"fiscal_periods":[{"column":"name","similarity":0.6146000724463977},{"column":"period_id","similarity":0.5997794756800909},{"column":"start_date","similarity":0.5958425893901163}],"project_budgets":[{"column":"category","similarity":0.6144822335998272},{"column":"notes","similarity":0.5865421018912569}],"journal_lines":[{"column":"debit","similarity":0.6131519383994092},{"column":"credit","similarity":0.5929067215683504}],"project_expenses":[{"column":"category","similarity":0.6127356317273961}],"bank_transactions":[{"column":"amount","similarity":0.6081752093881687},{"column":"reference","similarity":0.5996793168104082},{"column":"reconciled","similarity":0.5871486254020114}],"budgets":[{"column":"status","similarity":0.5989844575610859},{"column":"total_amount","similarity":0.5890036805604402}],"departments":[{"column":"budget","similarity":0.5980463108867591}],"asset_maintenance":[{"column":"cost","similarity":0.5961138617057076}],"timesheets":[{"column":"total_hours","similarity":0.5956067219737295}],"projects":[{"column":"budget","similarity":0.5946377463056134}],"chart_of_accounts":[{"column":"description","similarity":0.5928520596952875}],"purchase_orders":[{"column":"total","similarity":0.5920004066122796},{"column":"subtotal","similarity":0.589720753994531}],"customers":[{"column":"credit_limit","similarity":0.5915804628924816}],"vendor_invoices":[{"column":"subtotal","similarity":0.5901699024505791},{"column":"total","similarity":0.5854052260141052}],"currencies":[{"column":"symbol","similarity":0.5869910028334465}],"budget_lines":[{"column":"period_id","similarity":0.5869648406526051},{"column":"amount","similarity":0.5853230300290301}],"inventory_adjustments":[{"column":"status","similarity":0.5842747186783505}]},"fused_scores":[{"table":"bank_accounts","fused":0.777472853583897,"table_sim":0.6367900839880641,"col_score":0.9884970079776462},{"table":"account_types","fused":0.7604826767061876,"table_sim":0.6272285653729832,"col_score":0.960363843705994},{"table":"depreciation_entries","fused":0.7599043781119549,"table_sim":0.6225511215159643,"col_score":0.9659342630059409},{"table":"depreciation_schedules","fused":0.7570293702908029,"table_sim":0.6165057393727287,"col_score":0.9678148166679141},{"table":"asset_categories","fused":0.7549091521395797,"table_sim":0.6346535809758647,"col_score":0.9352925088851523},{"table":"bank_transactions","fused":0.7322636913821112,"table_sim":0.6150962404412702,"col_score":0.9080148677933728},{"table":"fiscal_periods","fused":0.7188051953965271,"table_sim":0.6041900407507028,"col_score":0.8907279273652635},{"table":"budget_lines","fused":0.6723595162596906,"table_sim":0.593425377594523,"col_score":0.7907607242574419},{"table":"project_budgets","fused":0.6698840648354083,"table_sim":0.5699587952178357,"col_score":0.8197719692617671},{"table":"budgets","fused":0.6607199173363719,"table_sim":0.568767701756073,"col_score":0.7986482407068203},{"table":"benefit_types","fused":0.5888446271425638,"table_sim":0.5715028878009876,"col_score":0.614857236154928},{"table":"customers","fused":0.5863323782186346,"table_sim":0.5828336551027367,"col_score":0.5915804628924816},{"table":"chart_of_accounts","fused":0.526447512259201,"table_sim":0.6007482259075341,"col_score":0.41499644178670125},{"table":"journal_lines","fused":0.3638421196734338,"table_sim":0,"col_score":0.9096052991835843},{"table":"purchase_orders","fused":0.35474431344381807,"table_sim":0,"col_score":0.8868607836095451}],"fk_expansion_candidates":8,"fk_expansion_added":2,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":44,"total_retrieval_latency_ms":50,"sql_generated":"SELECT ca.name AS \"Account Category\", SUM(bl.amount) AS \"Debit Total\" FROM budgets b JOIN budget_lines bl ON b.budget_id = bl.budget_id AND bl.period_id IN (SELECT period_id FROM fiscal_periods WHERE fiscal_year_id = 2023 AND is_closed = TRUE) JOIN chart_of_accounts ca ON bl.account_id = ca.account_id GROUP BY ca.name;","tables_used_in_sql":[],"explain_result":"success","sqlstate":"42703","error_message":"column b.amount does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":5,"autocorrect_failure_reason":"Replacement pattern not found in SQL","rows_returned":0,"total_latency_ms":2982}
{"timestamp":"2026-01-29T20:50:52.592Z","query_id":"01c0e435-6485-4701-82fb-016e3b51bed2","question":"Calculate cash flow from bank transactions grouped by transaction type and month","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["bank_transactions","bank_accounts","inventory_transactions","account_types","depreciation_entries","depreciation_schedules","asset_transfers","vendor_invoices","asset_categories","stock_transfers","currencies"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":1,"table_scores":[{"table":"bank_transactions","similarity":0.7232703691525166},{"table":"bank_accounts","similarity":0.6412885484513536},{"table":"inventory_transactions","similarity":0.6130368701918206},{"table":"account_types","similarity":0.5746397921552414},{"table":"depreciation_entries","similarity":0.5609169011076522},{"table":"stock_transfers","similarity":0.5608182762969601},{"table":"asset_categories","similarity":0.5603941855250653},{"table":"asset_transfers","similarity":0.557070516037654},{"table":"goods_receipts","similarity":0.5570340666097445},{"table":"asset_maintenance","similarity":0.5550122446563767},{"table":"timesheet_entries","similarity":0.5547038308987016},{"table":"customers","similarity":0.5536205739048321},{"table":"depreciation_schedules","similarity":0.5510145110305125},{"table":"budget_lines","similarity":0.5501439459081744},{"table":"vendor_invoices","similarity":0.5501234090713347}],"column_hits_per_table":{"bank_transactions":9,"inventory_transactions":6,"bank_accounts":8,"depreciation_schedules":2,"account_types":2,"depreciation_entries":4,"asset_transfers":4,"benefit_types":1,"sales_orders":1,"vendor_invoices":2,"departments":1,"project_budgets":3,"asset_categories":1,"budgets":1,"currencies":3,"projects":1,"stock_transfers":1},"top_columns_per_table":{"bank_transactions":[{"column":"transaction_type","similarity":0.7226031453519327},{"column":"transaction_date","similarity":0.7197948108865876},{"column":"amount","similarity":0.6937932229170158}],"inventory_transactions":[{"column":"transaction_type","similarity":0.6273448250719428},{"column":"transaction_date","similarity":0.5883515821242886},{"column":"reference_type","similarity":0.5870442032650763}],"bank_accounts":[{"column":"bank_name","similarity":0.6206916343579985},{"column":"currency_id","similarity":0.6080233956923218},{"column":"account_name","similarity":0.6062681595576817}],"depreciation_schedules":[{"column":"monthly_amount","similarity":0.59447656917774},{"column":"annual_amount","similarity":0.5604557333370965}],"account_types":[{"column":"category","similarity":0.5767477686638358},{"column":"normal_balance","similarity":0.553298547454127}],"depreciation_entries":[{"column":"entry_date","similarity":0.5764456999460359},{"column":"amount","similarity":0.5712923688967707},{"column":"accumulated_depreciation","similarity":0.5593081810441107}],"asset_transfers":[{"column":"transfer_date","similarity":0.5753286251599586},{"column":"reason","similarity":0.5680950655456624},{"column":"transferred_by","similarity":0.557655111028576}],"benefit_types":[{"column":"annual_cost","similarity":0.5690702206996687}],"sales_orders":[{"column":"subtotal","similarity":0.5690246047374201}],"vendor_invoices":[{"column":"subtotal","similarity":0.5667884131380803},{"column":"amount_paid","similarity":0.5537916195948072}],"departments":[{"column":"budget","similarity":0.56620715274516}],"project_budgets":[{"column":"category","similarity":0.5630575145165342},{"column":"notes","similarity":0.5566774782603028},{"column":"planned_amount","similarity":0.5539083156532728}],"asset_categories":[{"column":"depreciation_method","similarity":0.5617474146945006}],"budgets":[{"column":"status","similarity":0.5601445371969136}],"currencies":[{"column":"symbol","similarity":0.5600491754665113},{"column":"code","similarity":0.5571181350069567},{"column":"name","similarity":0.5532051640223443}],"projects":[{"column":"budget","similarity":0.5548004632768436}],"stock_transfers":[{"column":"status","similarity":0.5540703957924323}]},"fused_scores":[{"table":"bank_transactions","fused":0.8669624418096007,"table_sim":0.7232703691525166,"col_score":1.0825005507952266},{"table":"bank_accounts","fused":0.7438459153666748,"table_sim":0.6412885484513536,"col_score":0.8976819657396565},{"table":"inventory_transactions","fused":0.7364303685687272,"table_sim":0.6130368701918206,"col_score":0.9215206161340871},{"table":"account_types","fused":0.6861426922495046,"table_sim":0.5746397921552414,"col_score":0.8533970423908993},{"table":"depreciation_entries","fused":0.6813868944223598,"table_sim":0.5609169011076522,"col_score":0.8620918843944212},{"table":"depreciation_schedules","fused":0.6804904809568229,"table_sim":0.5510145110305125,"col_score":0.8747044358462883},{"table":"asset_transfers","fused":0.6779927727957084,"table_sim":0.557070516037654,"col_score":0.8593761579327899},{"table":"vendor_invoices","fused":0.634320237441306,"table_sim":0.5501234090713347,"col_score":0.7606154799962628},{"table":"asset_categories","fused":0.5609354771928394,"table_sim":0.5603941855250653,"col_score":0.5617474146945006},{"table":"stock_transfers","fused":0.4916306766000571,"table_sim":0.5608182762969601,"col_score":0.3878492770547026},{"table":"project_budgets","fused":0.3360046689372682,"table_sim":0,"col_score":0.8400116723431705},{"table":"currencies","fused":0.3354432971879959,"table_sim":0,"col_score":0.8386082429699897},{"table":"goods_receipts","fused":0.3342204399658467,"table_sim":0.5570340666097445,"col_score":0},{"table":"asset_maintenance","fused":0.333007346793826,"table_sim":0.5550122446563767,"col_score":0},{"table":"timesheet_entries","fused":0.3328222985392209,"table_sim":0.5547038308987016,"col_score":0}],"fk_expansion_candidates":14,"fk_expansion_added":1,"fk_expansion_blocked_count":13,"fk_expansion_blocked":[{"table":"asset_locations","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":37,"total_retrieval_latency_ms":43,"sql_generated":"SELECT transaction_type, EXTRACT(MONTH FROM transaction_date) AS month, SUM(amount) as cash_flow \nFROM bank_accounts ba JOIN bank_transactions bt ON ba.bank_account_id = bt.bank_account_id \nGROUP BY transaction_type, month;","tables_used_in_sql":[],"total_latency_ms":3180,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T20:50:55.773Z","query_id":"0b82db78-d927-44c7-8355-4da0f84135f2","question":"Calculate project profitability comparing budget vs actual expenses","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["project_budgets","project_expenses","budgets","projects","project_resources","project_milestones","project_tasks","budget_lines","depreciation_schedules","cost_centers","departments","fiscal_periods"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_budgets","similarity":0.6969020680342091},{"table":"project_expenses","similarity":0.6901643358621746},{"table":"budgets","similarity":0.6054710146643664},{"table":"project_resources","similarity":0.5884392614999969},{"table":"budget_lines","similarity":0.5713392587016516},{"table":"project_milestones","similarity":0.5640452185585958},{"table":"projects","similarity":0.5566750316098611},{"table":"project_tasks","similarity":0.5430288007477744},{"table":"fiscal_periods","similarity":0.5421955610342155},{"table":"cost_centers","similarity":0.5334843814345405},{"table":"fiscal_years","similarity":0.5330512679525921},{"table":"timesheet_entries","similarity":0.5277321533499411},{"table":"depreciation_schedules","similarity":0.5161348636193235},{"table":"task_assignments","similarity":0.5090218924299275},{"table":"project_phases","similarity":0.5086822303322549}],"column_hits_per_table":{"project_budgets":6,"project_expenses":10,"projects":4,"budgets":8,"departments":1,"budget_lines":3,"project_resources":4,"project_milestones":2,"project_tasks":3,"product_suppliers":1,"products":1,"asset_maintenance":1,"fixed_assets":1,"depreciation_schedules":2,"requisition_lines":1,"cost_centers":1,"benefit_types":1},"top_columns_per_table":{"project_budgets":[{"column":"actual_amount","similarity":0.732381284281357},{"column":"planned_amount","similarity":0.7077655279095464},{"column":"category","similarity":0.6837344583515939}],"project_expenses":[{"column":"amount","similarity":0.719310515063275},{"column":"is_billable","similarity":0.6944071710464874},{"column":"status","similarity":0.6819235762798355}],"projects":[{"column":"budget","similarity":0.7010305666750449},{"column":"project_number","similarity":0.58156128942889},{"column":"status","similarity":0.5727418455053092}],"budgets":[{"column":"total_amount","similarity":0.6566540327671284},{"column":"status","similarity":0.6352662167542227},{"column":"name","similarity":0.6054909942282356}],"departments":[{"column":"budget","similarity":0.6264870674058582}],"budget_lines":[{"column":"amount","similarity":0.6204819952699552},{"column":"budget_id","similarity":0.5789661588581666},{"column":"period_id","similarity":0.5466449934647022}],"project_resources":[{"column":"hourly_rate","similarity":0.6071134658167074},{"column":"allocation_percent","similarity":0.5838131867437651},{"column":"project_id","similarity":0.5594873197213137}],"project_milestones":[{"column":"amount","similarity":0.5947539124725684},{"column":"is_billable","similarity":0.5868460872676451}],"project_tasks":[{"column":"actual_hours","similarity":0.5942692351392902},{"column":"estimated_hours","similarity":0.5851366658523576},{"column":"status","similarity":0.5591681405321435}],"product_suppliers":[{"column":"unit_cost","similarity":0.5658746967491194}],"products":[{"column":"unit_cost","similarity":0.5580213602692399}],"asset_maintenance":[{"column":"cost","similarity":0.5577313360447209}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5575179107884427}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5573270992269892},{"column":"monthly_amount","similarity":0.5518789639204239}],"requisition_lines":[{"column":"estimated_unit_cost","similarity":0.5519709664483464}],"cost_centers":[{"column":"is_active","similarity":0.5514522094975285}],"benefit_types":[{"column":"annual_cost","similarity":0.5454524684838336}]},"fused_scores":[{"table":"project_budgets","fused":0.8526468601149775,"table_sim":0.6969020680342091,"col_score":1.08626404823613},{"table":"project_expenses","fused":0.8407042417519124,"table_sim":0.6901643358621746,"col_score":1.0665141005865189},{"table":"budgets","fused":0.7410467725305158,"table_sim":0.6054710146643664,"col_score":0.9444104093297399},{"table":"projects","fused":0.7307295035217127,"table_sim":0.5566750316098611,"col_score":0.9918112113894899},{"table":"project_resources","fused":0.7126715805754341,"table_sim":0.5884392614999969,"col_score":0.89902005918859},{"table":"project_milestones","fused":0.6936979135777139,"table_sim":0.5640452185585958,"col_score":0.8881769561063909},{"table":"project_tasks","fused":0.6805523076748522,"table_sim":0.5430288007477744,"col_score":0.886837568065469},{"table":"budget_lines","fused":0.6720516155691163,"table_sim":0.5713392587016516,"col_score":0.8231201508703134},{"table":"depreciation_schedules","fused":0.6429875506464746,"table_sim":0.5161348636193235,"col_score":0.8332665811872011},{"table":"cost_centers","fused":0.4744972475200322,"table_sim":0.5334843814345405,"col_score":0.3860165466482699},{"table":"fiscal_periods","fused":0.3253173366205293,"table_sim":0.5421955610342155,"col_score":0},{"table":"fiscal_years","fused":0.3198307607715552,"table_sim":0.5330512679525921,"col_score":0},{"table":"timesheet_entries","fused":0.3166392920099646,"table_sim":0.5277321533499411,"col_score":0},{"table":"task_assignments","fused":0.30541313545795645,"table_sim":0.5090218924299275,"col_score":0},{"table":"project_phases","fused":0.3052093381993529,"table_sim":0.5086822303322549,"col_score":0}],"fk_expansion_candidates":11,"fk_expansion_added":2,"fk_expansion_blocked_count":4,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"max_tables"},{"table":"fixed_assets","reason":"max_tables"},{"table":"journal_lines","reason":"no_evidence"},{"table":"project_phases","reason":"max_tables"},{"table":"task_assignments","reason":"max_tables"},{"table":"timesheet_entries","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":40,"total_retrieval_latency_ms":46,"sql_generated":"SELECT p.project_id, p.name AS project_name, b.budget_amount, e.actual_expense_amount, (b.budget_amount - e.actual_expense_amount) AS profitability FROM projects p INNER JOIN budgets b ON p.project_id = b.project_id INNER JOIN project_expenses e ON p.project_id = e.project_id WHERE p.status = 'Completed' AND e.is_billable = TRUE;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column b.project_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":5,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":4393,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column b.project_id does not exist"}
{"timestamp":"2026-01-29T20:51:00.166Z","query_id":"3bc7debb-bb5b-454d-a0cb-77cd38895399","question":"Find resource allocation by employee across all active projects","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["project_resources","project_expenses","projects","employees","asset_transfers","employee_benefits","timesheets","employee_salaries","asset_maintenance","fixed_assets","budgets","inventory_adjustments"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_resources","similarity":0.7731177943741443},{"table":"task_assignments","similarity":0.6903320131383612},{"table":"project_expenses","similarity":0.6860669651962393},{"table":"projects","similarity":0.6699593096880756},{"table":"employee_salaries","similarity":0.6405071946271549},{"table":"employees","similarity":0.6339025803715616},{"table":"asset_transfers","similarity":0.6295509823374746},{"table":"employee_benefits","similarity":0.6252896926971302},{"table":"asset_maintenance","similarity":0.6144814119310266},{"table":"project_budgets","similarity":0.6127056548770882},{"table":"employee_training","similarity":0.6115716788056256},{"table":"timesheets","similarity":0.6110953610179598},{"table":"fixed_assets","similarity":0.6034608172484828},{"table":"positions","similarity":0.6004520720571301},{"table":"sales_regions","similarity":0.6000624479697053}],"column_hits_per_table":{"project_resources":8,"projects":6,"project_expenses":5,"task_assignments":1,"fixed_assets":1,"asset_maintenance":1,"asset_transfers":3,"project_tasks":4,"employees":9,"budgets":1,"sales_territories":1,"employee_salaries":1,"employee_benefits":2,"leave_requests":1,"project_budgets":1,"inventory_adjustments":2,"departments":1,"timesheets":2},"top_columns_per_table":{"project_resources":[{"column":"allocation_percent","similarity":0.7387995135432864},{"column":"employee_id","similarity":0.736788358139023},{"column":"role","similarity":0.6871253102146296}],"projects":[{"column":"project_manager_id","similarity":0.6950658215815594},{"column":"project_number","similarity":0.6486471523682797},{"column":"priority","similarity":0.647905091409848}],"project_expenses":[{"column":"employee_id","similarity":0.6892341968361351},{"column":"approved_by","similarity":0.6866501279538427},{"column":"status","similarity":0.6365220668607481}],"task_assignments":[{"column":"employee_id","similarity":0.6715931803692717}],"fixed_assets":[{"column":"assigned_to","similarity":0.6693605355449325}],"asset_maintenance":[{"column":"performed_by","similarity":0.6594150176106053}],"asset_transfers":[{"column":"transferred_by","similarity":0.649976405491491},{"column":"to_employee_id","similarity":0.6468918681465957},{"column":"from_employee_id","similarity":0.6392912984449377}],"project_tasks":[{"column":"actual_hours","similarity":0.6431585243015517},{"column":"status","similarity":0.6399283690314367},{"column":"priority","similarity":0.6368769410502637}],"employees":[{"column":"employee_number","similarity":0.6411927718149272},{"column":"position_id","similarity":0.6387230138414012},{"column":"manager_id","similarity":0.6334603651967811}],"budgets":[{"column":"approved_by","similarity":0.6329697386525807}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6317471325498781}],"employee_salaries":[{"column":"approved_by","similarity":0.6297852265264874}],"employee_benefits":[{"column":"employee_id","similarity":0.6282013304971424},{"column":"coverage_level","similarity":0.6209091178386659}],"leave_requests":[{"column":"approved_by","similarity":0.6245063356176883}],"project_budgets":[{"column":"category","similarity":0.6241016561022017}],"inventory_adjustments":[{"column":"approved_by","similarity":0.6219786416053619},{"column":"adjusted_by","similarity":0.6198166093236963}],"departments":[{"column":"manager_id","similarity":0.6208493633226347}],"timesheets":[{"column":"employee_id","similarity":0.6185415592033615},{"column":"approved_by","similarity":0.6172975203434086}]},"fused_scores":[{"table":"project_resources","fused":0.8968155440847271,"table_sim":0.7731177943741443,"col_score":1.0823621686506013},{"table":"project_expenses","fused":0.8105738212591131,"table_sim":0.6860669651962393,"col_score":0.9973341053534239},{"table":"projects","fused":0.7910154650421268,"table_sim":0.6699593096880756,"col_score":0.9725996980732037},{"table":"employees","fused":0.762404804064732,"table_sim":0.6339025803715616,"col_score":0.9551581396044875},{"table":"asset_transfers","fused":0.7282860131396046,"table_sim":0.6295509823374746,"col_score":0.8763885593427996},{"table":"employee_benefits","fused":0.7114856490233444,"table_sim":0.6252896926971302,"col_score":0.8407795835126657},{"table":"timesheets","fused":0.70017204303661,"table_sim":0.6110953610179598,"col_score":0.8337870660645851},{"table":"employee_salaries","fused":0.6362184073868878,"table_sim":0.6405071946271549,"col_score":0.6297852265264874},{"table":"asset_maintenance","fused":0.6324548542028581,"table_sim":0.6144814119310266,"col_score":0.6594150176106053},{"table":"fixed_assets","fused":0.6298207045670627,"table_sim":0.6034608172484828,"col_score":0.6693605355449325},{"table":"project_budgets","fused":0.6172640553671336,"table_sim":0.6127056548770882,"col_score":0.6241016561022017},{"table":"task_assignments","fused":0.6022452983864128,"table_sim":0.6903320131383612,"col_score":0.47011522625849017},{"table":"project_tasks","fused":0.38463879793067346,"table_sim":0,"col_score":0.9615969948266836},{"table":"inventory_adjustments","fused":0.37275477850688404,"table_sim":0,"col_score":0.93188694626721},{"table":"employee_training","fused":0.3669430072833753,"table_sim":0.6115716788056256,"col_score":0}],"fk_expansion_candidates":38,"fk_expansion_added":2,"fk_expansion_blocked_count":30,"fk_expansion_blocked":[{"table":"maintenance_types","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"project_budgets","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"sales_regions","reason":"max_tables"},{"table":"customers","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"employee_training","reason":"max_tables"},{"table":"project_milestones","reason":"no_evidence"},{"table":"leave_requests","reason":"max_tables"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":36,"total_retrieval_latency_ms":41,"sql_generated":"SELECT e.employee_id AS EmployeeID, SUM(pr.hourly_rate) AS TotalHourlyRate FROM project_resources pr JOIN employees e ON pr.employee_id = e.employee_id WHERE p.status = 'active' GROUP BY e.employee_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42P01","error_message":"missing FROM-clause entry for table \"p\"","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_failure_reason":"Alias 'p' not defined. Possible table: project_resources. Define alias in FROM/JOIN clause.","total_latency_ms":2819,"failure_type":"join_path_miss","failure_details":"Database error after 3 attempts: missing FROM-clause entry for table \"p\""}
{"timestamp":"2026-01-29T20:51:02.985Z","query_id":"c8ded463-45bd-42a0-b040-61bede44b069","question":"List all fixed assets with their assigned employees and current locations","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["fixed_assets","asset_locations","asset_maintenance","asset_transfers","employees","sales_territories","depreciation_schedules","sales_regions","employee_salaries","departments","inventory_adjustments","positions"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"fixed_assets","similarity":0.7199454700518836},{"table":"asset_locations","similarity":0.6993840670281728},{"table":"asset_transfers","similarity":0.6681876163750934},{"table":"asset_maintenance","similarity":0.6662441365446851},{"table":"sales_territories","similarity":0.6138568966711586},{"table":"employees","similarity":0.6041748893811374},{"table":"sales_regions","similarity":0.5905113043845756},{"table":"employee_salaries","similarity":0.584781640529263},{"table":"departments","similarity":0.5839722838487205},{"table":"task_assignments","similarity":0.5833995895060854},{"table":"positions","similarity":0.5818633468828208},{"table":"depreciation_schedules","similarity":0.5769154426781498},{"table":"project_resources","similarity":0.573391179917491},{"table":"inventory_adjustments","similarity":0.5728570248654077},{"table":"projects","similarity":0.5679182735225474}],"column_hits_per_table":{"fixed_assets":17,"asset_locations":6,"asset_maintenance":8,"asset_transfers":6,"employees":9,"sales_territories":1,"depreciation_schedules":1,"adjustment_lines":1,"stock_transfers":1},"top_columns_per_table":{"fixed_assets":[{"column":"assigned_to","similarity":0.7610359291813483},{"column":"location_id","similarity":0.7571020804502957},{"column":"status","similarity":0.7351464311922252}],"asset_locations":[{"column":"building","similarity":0.6990298555075612},{"column":"floor","similarity":0.6887653641924915},{"column":"room","similarity":0.678024829035518}],"asset_maintenance":[{"column":"status","similarity":0.6675279258856094},{"column":"asset_id","similarity":0.6617322335301026},{"column":"performed_by","similarity":0.6585231704982136}],"asset_transfers":[{"column":"to_location_id","similarity":0.6668886725808255},{"column":"from_location_id","similarity":0.655575636389779},{"column":"asset_id","similarity":0.6507564493646987}],"employees":[{"column":"email","similarity":0.6306117604539891},{"column":"is_active","similarity":0.6160821371149121},{"column":"created_at","similarity":0.6135709206507636}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6185197898085313}],"depreciation_schedules":[{"column":"asset_id","similarity":0.6108849923785906}],"adjustment_lines":[{"column":"location_id","similarity":0.6013885968583933}],"stock_transfers":[{"column":"created_by","similarity":0.5967870656956826}]},"fused_scores":[{"table":"fixed_assets","fused":0.8768614293329463,"table_sim":0.7199454700518836,"col_score":1.1122353682545403},{"table":"asset_locations","fused":0.8369954552584264,"table_sim":0.6993840670281728,"col_score":1.043412537603807},{"table":"asset_maintenance","fused":0.7896490335594094,"table_sim":0.6662441365446851,"col_score":0.9747563790814959},{"table":"asset_transfers","fused":0.7514669899829727,"table_sim":0.6681876163750934,"col_score":0.8763860503947918},{"table":"employees","fused":0.7358947124042898,"table_sim":0.6041748893811374,"col_score":0.9334744469390185},{"table":"sales_territories","fused":0.5414996791490839,"table_sim":0.6138568966711586,"col_score":0.4329638528659719},{"table":"depreciation_schedules","fused":0.5171970634728953,"table_sim":0.5769154426781498,"col_score":0.4276194946650134},{"table":"sales_regions","fused":0.35430678263074533,"table_sim":0.5905113043845756,"col_score":0},{"table":"employee_salaries","fused":0.35086898431755775,"table_sim":0.584781640529263,"col_score":0},{"table":"departments","fused":0.3503833703092323,"table_sim":0.5839722838487205,"col_score":0},{"table":"task_assignments","fused":0.3500397537036512,"table_sim":0.5833995895060854,"col_score":0},{"table":"positions","fused":0.34911800812969246,"table_sim":0.5818633468828208,"col_score":0},{"table":"project_resources","fused":0.34403470795049457,"table_sim":0.573391179917491,"col_score":0},{"table":"inventory_adjustments","fused":0.3437142149192446,"table_sim":0.5728570248654077,"col_score":0},{"table":"projects","fused":0.34075096411352845,"table_sim":0.5679182735225474,"col_score":0}],"fk_expansion_candidates":33,"fk_expansion_added":2,"fk_expansion_blocked_count":28,"fk_expansion_blocked":[{"table":"maintenance_types","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"project_resources","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"max_tables"},{"table":"task_assignments","reason":"max_tables"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":44,"total_retrieval_latency_ms":50,"sql_generated":"SELECT fa.asset_id AS AssetID, fa.name AS Name, fa.location_id AS LocationID, fa.assigned_to AS AssignedEmployeeID FROM fixed_assets fa JOIN asset_locations al ON fa.location_id = al.location_id JOIN employees e ON fa.assigned_to = e.employee_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":0,"total_latency_ms":1298}
{"timestamp":"2026-01-29T20:51:04.283Z","query_id":"1992a2fc-5836-49e9-bb7a-8d830d30c9d5","question":"Create a comprehensive employee cost report including salary and benefits by department","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_salaries","employee_benefits","employees","project_expenses","budgets","departments","project_resources","benefit_types","goods_receipts","employee_training","employment_history","positions"],"tables_from_table_retrieval":15,"tables_from_column_only":10,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_benefits","similarity":0.7033203083522601},{"table":"employee_salaries","similarity":0.7004330807404299},{"table":"project_expenses","similarity":0.6709016284087207},{"table":"employees","similarity":0.6573833023433696},{"table":"departments","similarity":0.6467717005028588},{"table":"budgets","similarity":0.6459628498185659},{"table":"purchase_requisitions","similarity":0.6331051084254513},{"table":"sales_regions","similarity":0.6301038851943551},{"table":"employment_history","similarity":0.6247225842183777},{"table":"employee_training","similarity":0.6143787031418324},{"table":"goods_receipts","similarity":0.6134314016075626},{"table":"benefit_types","similarity":0.6103800368440171},{"table":"timesheets","similarity":0.608646580767154},{"table":"positions","similarity":0.6060295054142851},{"table":"project_resources","similarity":0.6058652615663651}],"column_hits_per_table":{"employees":5,"employee_salaries":7,"employee_benefits":6,"departments":2,"project_expenses":4,"benefit_types":1,"cost_centers":1,"project_resources":2,"asset_maintenance":1,"budgets":3,"goods_receipts":1,"positions":1,"performance_reviews":1,"vendor_invoices":4,"employee_training":1,"product_suppliers":1,"employee_certifications":1,"project_budgets":3,"sales_territories":1,"employment_history":1,"sales_regions":1,"depreciation_schedules":1,"requisition_lines":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.7353273158370108},{"column":"department_id","similarity":0.6458933199793105},{"column":"employee_number","similarity":0.6339488054951704}],"employee_salaries":[{"column":"amount","similarity":0.7343697506197728},{"column":"effective_date","similarity":0.6773602786138204},{"column":"employee_id","similarity":0.6719030284173544}],"employee_benefits":[{"column":"coverage_level","similarity":0.692206009981684},{"column":"employee_id","similarity":0.691334472450722},{"column":"benefit_type_id","similarity":0.6825998512347974}],"departments":[{"column":"budget","similarity":0.6845753677360407},{"column":"manager_id","similarity":0.633688934613717}],"project_expenses":[{"column":"employee_id","similarity":0.6753839678754537},{"column":"approved_by","similarity":0.6566797227751197},{"column":"amount","similarity":0.6540423770585583}],"benefit_types":[{"column":"annual_cost","similarity":0.6681632995082879}],"cost_centers":[{"column":"department_id","similarity":0.6444791546112041}],"project_resources":[{"column":"hourly_rate","similarity":0.6330708854761284},{"column":"employee_id","similarity":0.6180596074892039}],"asset_maintenance":[{"column":"cost","similarity":0.6294383521509798}],"budgets":[{"column":"total_amount","similarity":0.627433899620325},{"column":"approved_by","similarity":0.626054957549584},{"column":"department_id","similarity":0.6202588727965219}],"goods_receipts":[{"column":"received_by","similarity":0.6273408234197417}],"positions":[{"column":"min_salary","similarity":0.6249941700853083}],"performance_reviews":[{"column":"employee_id","similarity":0.6248478988858465}],"vendor_invoices":[{"column":"subtotal","similarity":0.6240930475878483},{"column":"amount_paid","similarity":0.6227761450723656},{"column":"total","similarity":0.6214874696934888}],"employee_training":[{"column":"score","similarity":0.6203977331351577}],"product_suppliers":[{"column":"unit_cost","similarity":0.6202977267547164}],"employee_certifications":[{"column":"employee_id","similarity":0.620067204342498}],"project_budgets":[{"column":"planned_amount","similarity":0.620044228211653},{"column":"actual_amount","similarity":0.618194603133217},{"column":"notes","similarity":0.6165560316383816}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6195472423349481}],"employment_history":[{"column":"employee_id","similarity":0.6193544167665219}],"sales_regions":[{"column":"manager_id","similarity":0.6180082092187474}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.6170760765215243}],"requisition_lines":[{"column":"estimated_unit_cost","similarity":0.6170521107439255}]},"fused_scores":[{"table":"employee_salaries","fused":0.8494798044149312,"table_sim":0.7004330807404299,"col_score":1.0730498899266832},{"table":"employee_benefits","fused":0.8321855077820437,"table_sim":0.7033203083522601,"col_score":1.025483306926719},{"table":"employees","fused":0.8153506688398602,"table_sim":0.6573833023433696,"col_score":1.052301718584596},{"table":"project_expenses","fused":0.7960213415669919,"table_sim":0.6709016284087207,"col_score":0.9837009113043989},{"table":"budgets","fused":0.7637622612491863,"table_sim":0.6459628498185659,"col_score":0.940461378395117},{"table":"departments","fused":0.750609618242052,"table_sim":0.6467717005028588,"col_score":0.9063664948508416},{"table":"project_resources","fused":0.703275856178759,"table_sim":0.6058652615663651,"col_score":0.8493917480973497},{"table":"benefit_types","fused":0.6334933419097255,"table_sim":0.6103800368440171,"col_score":0.6681632995082879},{"table":"goods_receipts","fused":0.6189951703324343,"table_sim":0.6134314016075626,"col_score":0.6273408234197417},{"table":"employee_training","fused":0.6167863151391625,"table_sim":0.6143787031418324,"col_score":0.6203977331351577},{"table":"positions","fused":0.6136153712826944,"table_sim":0.6060295054142851,"col_score":0.6249941700853083},{"table":"sales_regions","fused":0.5511046296978623,"table_sim":0.6301038851943551,"col_score":0.43260574645312316},{"table":"employment_history","fused":0.5482527872256527,"table_sim":0.6247225842183777,"col_score":0.43354809173656533},{"table":"purchase_requisitions","fused":0.3798630650552708,"table_sim":0.6331051084254513,"col_score":0},{"table":"vendor_invoices","fused":0.37393471297383707,"table_sim":0,"col_score":0.9348367824345927}],"fk_expansion_candidates":32,"fk_expansion_added":2,"fk_expansion_blocked_count":26,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"sales_regions","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"max_tables"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":51,"total_retrieval_latency_ms":57,"sql_generated":"SELECT d.name AS department_name, SUM(bs.amount) + COALESCE(SUM(eb.annual_cost), 0) AS total_employee_cost FROM departments d LEFT JOIN budgets bs ON d.department_id = bs.department_id AND bs.status = 'approved' LEFT JOIN employee_benefits eb ON d.department_id = eb.department_id GROUP BY d.name;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column eb.department_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":5,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":3854,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column eb.department_id does not exist"}
{"timestamp":"2026-01-29T21:22:54.256Z","query_id":"56445c26-1a5f-4600-80ba-4a1153af9ea4","question":"List all employees in the Sales department","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employees","departments","employee_salaries","budgets","positions","business_units","sales_regions","employee_certifications","inventory_adjustments","project_expenses","goods_receipts","purchase_orders"],"tables_from_table_retrieval":8,"tables_from_column_only":20,"tables_from_fk_expansion":2,"table_scores":[{"table":"departments","similarity":0.7018819264422769},{"table":"departments","similarity":0.7018809856996423},{"table":"employees","similarity":0.6969056798657691},{"table":"employees","similarity":0.6963141569337209},{"table":"positions","similarity":0.6626028150240685},{"table":"positions","similarity":0.6581594168559208},{"table":"employee_salaries","similarity":0.639257259916862},{"table":"employee_salaries","similarity":0.6331504110227327},{"table":"sales_regions","similarity":0.6312030956746659},{"table":"business_units","similarity":0.6275257997321859},{"table":"sales_regions","similarity":0.6252918304977205},{"table":"business_units","similarity":0.6239684491575331},{"table":"employee_certifications","similarity":0.6229972990181882},{"table":"budgets","similarity":0.617459472791645},{"table":"employee_certifications","similarity":0.6131227085777482}],"column_hits_per_table":{"employees":12,"departments":6,"positions":1,"goods_receipts":1,"employee_certifications":1,"sales_territories":1,"asset_maintenance":1,"business_units":1,"sales_orders":1,"sales_regions":1,"budgets":2,"employee_salaries":2,"employee_benefits":1,"emergency_contacts":1,"sales_opportunities":1,"purchase_orders":1,"employment_history":1,"warehouses":1,"project_expenses":2,"task_assignments":1,"timesheets":1,"purchase_requisitions":2,"asset_transfers":2,"employee_training":1,"performance_reviews":1,"project_resources":1,"cost_centers":1,"inventory_adjustments":2},"top_columns_per_table":{"employees":[{"column":"department_id","similarity":0.735001357845775},{"column":"is_active","similarity":0.6824266007737122},{"column":"phone","similarity":0.6820773795858707}],"departments":[{"column":"manager_id","similarity":0.7128207565780478},{"column":"department_id","similarity":0.6738854611767785},{"column":"name","similarity":0.6712424359101222}],"positions":[{"column":"department_id","similarity":0.6857971226858616}],"goods_receipts":[{"column":"received_by","similarity":0.6663294574985136}],"employee_certifications":[{"column":"employee_id","similarity":0.6640250010412727}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6613024875559992}],"asset_maintenance":[{"column":"performed_by","similarity":0.6598502094385292}],"business_units":[{"column":"manager_id","similarity":0.6585890351995057}],"sales_orders":[{"column":"sales_rep_id","similarity":0.656355730755163}],"sales_regions":[{"column":"manager_id","similarity":0.651620763380058}],"budgets":[{"column":"department_id","similarity":0.6491888190918373},{"column":"approved_by","similarity":0.6408129025308686}],"employee_salaries":[{"column":"employee_id","similarity":0.6446873957227627},{"column":"approved_by","similarity":0.6412425865510403}],"employee_benefits":[{"column":"employee_id","similarity":0.6443003044498334}],"emergency_contacts":[{"column":"employee_id","similarity":0.6440387734827813}],"sales_opportunities":[{"column":"owner_id","similarity":0.6430794490143532}],"purchase_orders":[{"column":"approved_by","similarity":0.6403338556046323}],"employment_history":[{"column":"employee_id","similarity":0.6402113357955537}],"warehouses":[{"column":"manager_id","similarity":0.640071893991035}],"project_expenses":[{"column":"employee_id","similarity":0.6396257939989354},{"column":"approved_by","similarity":0.6362133375007298}],"task_assignments":[{"column":"employee_id","similarity":0.6378956895245772}],"timesheets":[{"column":"employee_id","similarity":0.6371144466739936}],"purchase_requisitions":[{"column":"department_id","similarity":0.6363011046304633},{"column":"requested_by","similarity":0.6278867865824495}],"asset_transfers":[{"column":"transferred_by","similarity":0.6359325869686036},{"column":"to_employee_id","similarity":0.6349553746224262}],"employee_training":[{"column":"employee_id","similarity":0.6355833505843332}],"performance_reviews":[{"column":"employee_id","similarity":0.63456613058686}],"project_resources":[{"column":"employee_id","similarity":0.6337024295197778}],"cost_centers":[{"column":"department_id","similarity":0.6303629689770469}],"inventory_adjustments":[{"column":"approved_by","similarity":0.629334756944109},{"column":"adjusted_by","similarity":0.6285561154578985}]},"fused_scores":[{"table":"employees","fused":0.8262904239927295,"table_sim":0.6963141569337209,"col_score":1.0212548245812423},{"table":"departments","fused":0.7878762122676308,"table_sim":0.7018809856996423,"col_score":0.9168690521196134},{"table":"employee_salaries","fused":0.7266435166352425,"table_sim":0.6331504110227327,"col_score":0.8668831750540071},{"table":"budgets","fused":0.7176872793601917,"table_sim":0.617459472791645,"col_score":0.8680289892130117},{"table":"positions","fused":0.5869188444655937,"table_sim":0.6581594168559208,"col_score":0.48005798588010307},{"table":"business_units","fused":0.5587859993503814,"table_sim":0.6239684491575331,"col_score":0.46101232463965397},{"table":"sales_regions","fused":0.5576289120450486,"table_sim":0.6252918304977205,"col_score":0.45613453436604057},{"table":"employee_certifications","fused":0.5538006254382053,"table_sim":0.6131227085777482,"col_score":0.4648175007288909},{"table":"inventory_adjustments","fused":0.3774451258692233,"table_sim":0,"col_score":0.9436128146730582},{"table":"project_expenses","fused":0.3440329461601429,"table_sim":0,"col_score":0.8600823654003572},{"table":"asset_transfers","fused":0.34326678723458115,"table_sim":0,"col_score":0.8581669680864528},{"table":"purchase_requisitions","fused":0.3402368692812447,"table_sim":0,"col_score":0.8505921732031116},{"table":"goods_receipts","fused":0.26653178299940544,"table_sim":0,"col_score":0.6663294574985136},{"table":"asset_maintenance","fused":0.2639400837754117,"table_sim":0,"col_score":0.6598502094385292},{"table":"purchase_orders","fused":0.2561335422418529,"table_sim":0,"col_score":0.6403338556046323}],"fk_expansion_candidates":62,"fk_expansion_added":2,"fk_expansion_blocked_count":52,"fk_expansion_blocked":[{"table":"employee_training","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"asset_transfers","reason":"max_tables"},{"table":"task_assignments","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"goods_receipts","reason":"already_selected"},{"table":"sales_territories","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"asset_transfers","reason":"max_tables"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_orders","reason":"already_selected"},{"table":"warehouses","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"employment_history","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":101,"total_retrieval_latency_ms":123,"sql_generated":"SELECT e.employee_id, e.first_name || ' ' || e.last_name AS employee_full_name FROM employees e JOIN departments d ON e.department_id = d.department_id WHERE d.name = 'Sales';","tables_used_in_sql":[],"explain_result":"success","rows_returned":63,"total_latency_ms":3642}
{"timestamp":"2026-01-29T21:22:57.899Z","query_id":"a3ffc07e-1071-475b-895e-b5840577f7b2","question":"How many employees were hired in 2024?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employees","employee_salaries","employment_history","employee_certifications","timesheets","purchase_requisitions","sales_regions","task_assignments","employee_training","employee_benefits","budgets","positions"],"tables_from_table_retrieval":10,"tables_from_column_only":10,"tables_from_fk_expansion":2,"table_scores":[{"table":"employees","similarity":0.6144292223525214},{"table":"employees","similarity":0.6051164949883834},{"table":"employment_history","similarity":0.5990869260811272},{"table":"employee_salaries","similarity":0.5957232611905978},{"table":"employee_salaries","similarity":0.5904865404348112},{"table":"employee_certifications","similarity":0.5847149077570227},{"table":"employment_history","similarity":0.5797780797563227},{"table":"timesheets","similarity":0.575594643141534},{"table":"employee_certifications","similarity":0.5707873299156627},{"table":"sales_regions","similarity":0.5687908420029388},{"table":"purchase_requisitions","similarity":0.5664402915390976},{"table":"timesheets","similarity":0.5659846035394056},{"table":"positions","similarity":0.5658085475279547},{"table":"sales_opportunities","similarity":0.5639075817288894},{"table":"task_assignments","similarity":0.562680711321946}],"column_hits_per_table":{"employees":15,"employee_salaries":5,"employee_certifications":4,"employment_history":6,"employee_training":5,"employee_benefits":2,"sales_regions":1,"timesheets":2,"sales_territories":1,"stock_transfers":1,"purchase_requisitions":1,"departments":1,"budgets":1,"business_units":1,"purchase_orders":1,"warehouses":1,"sales_quotes":1,"task_assignments":1},"top_columns_per_table":{"employees":[{"column":"hire_date","similarity":0.6980546950586765},{"column":"birth_date","similarity":0.6452273174827853},{"column":"employee_number","similarity":0.6269481438884994}],"employee_salaries":[{"column":"effective_date","similarity":0.6283609386062775},{"column":"end_date","similarity":0.6083160129025792},{"column":"approved_by","similarity":0.5688287621893034}],"employee_certifications":[{"column":"obtained_date","similarity":0.6112747812345073},{"column":"expiry_date","similarity":0.5987411982779576},{"column":"certificate_number","similarity":0.5648835141060903}],"employment_history":[{"column":"start_date","similarity":0.6077686915830489},{"column":"end_date","similarity":0.594029514188949},{"column":"position","similarity":0.5797629516147992}],"employee_training":[{"column":"completion_date","similarity":0.5993457235478621},{"column":"scheduled_date","similarity":0.5986570544817782},{"column":"status","similarity":0.5703874888669422}],"employee_benefits":[{"column":"start_date","similarity":0.5984117020896914},{"column":"end_date","similarity":0.5728619821736786}],"sales_regions":[{"column":"manager_id","similarity":0.566199362048764}],"timesheets":[{"column":"approved_by","similarity":0.5644583860713249},{"column":"employee_id","similarity":0.5477605761420901}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5605386386424432}],"stock_transfers":[{"column":"created_by","similarity":0.5581236941064073}],"purchase_requisitions":[{"column":"approved_by","similarity":0.5579497247157277}],"departments":[{"column":"manager_id","similarity":0.5578824438248059}],"budgets":[{"column":"approved_by","similarity":0.5567179667007113}],"business_units":[{"column":"manager_id","similarity":0.5534149159450399}],"purchase_orders":[{"column":"approved_by","similarity":0.5491015848221577}],"warehouses":[{"column":"manager_id","similarity":0.5466175241906261}],"sales_quotes":[{"column":"created_by","similarity":0.5464636248275542}],"task_assignments":[{"column":"employee_id","similarity":0.5462303463892537}]},"fused_scores":[{"table":"employees","fused":0.7713372385130577,"table_sim":0.6051164949883834,"col_score":1.0206683538000692},{"table":"employee_salaries","fused":0.7272995022839135,"table_sim":0.5904865404348112,"col_score":0.932518945057567},{"table":"employment_history","fused":0.7097802273248031,"table_sim":0.5797780797563227,"col_score":0.9047834486775235},{"table":"employee_certifications","fused":0.706730550098792,"table_sim":0.5707873299156627,"col_score":0.9106453803734861},{"table":"timesheets","fused":0.6420605972120659,"table_sim":0.5659846035394056,"col_score":0.7561745877210564},{"table":"purchase_requisitions","fused":0.5630440648097497,"table_sim":0.5664402915390976,"col_score":0.5579497247157277},{"table":"sales_regions","fused":0.4998103265754172,"table_sim":0.5687908420029388,"col_score":0.39633955343413474},{"table":"task_assignments","fused":0.4905529237821586,"table_sim":0.562680711321946,"col_score":0.3823612424724776},{"table":"employee_training","fused":0.3594697003155005,"table_sim":0,"col_score":0.8986742507887512},{"table":"employee_benefits","fused":0.3539370772706123,"table_sim":0,"col_score":0.8848426931765307},{"table":"positions","fused":0.3394851285167728,"table_sim":0.5658085475279547,"col_score":0},{"table":"sales_opportunities","fused":0.33834454903733363,"table_sim":0.5639075817288894,"col_score":0},{"table":"budgets","fused":0.22268718668028453,"table_sim":0,"col_score":0.5567179667007113},{"table":"purchase_orders","fused":0.21964063392886307,"table_sim":0,"col_score":0.5491015848221577},{"table":"sales_territories","fused":0.15695081881988412,"table_sim":0,"col_score":0.39237704704971027}],"fk_expansion_candidates":64,"fk_expansion_added":2,"fk_expansion_blocked_count":56,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"budgets","reason":"already_selected"},{"table":"business_units","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"positions","reason":"already_selected"},{"table":"project_expenses","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_orders","reason":"max_tables"},{"table":"purchase_orders","reason":"max_tables"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"sales_orders","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":58,"total_retrieval_latency_ms":66,"sql_generated":"SELECT COUNT(*) FROM employees WHERE EXTRACT(YEAR FROM hire_date) = 2024;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42883","error_message":"function year(date) does not exist","total_latency_ms":1388,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T21:22:59.288Z","query_id":"71a9316e-222e-44c7-b52f-af17cfb3ce9c","question":"What is the average salary by department?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["positions","employee_salaries","employees","departments","budgets","journal_entries","cost_centers","sales_territories","requisition_lines","sales_regions","employee_training","employment_history"],"tables_from_table_retrieval":9,"tables_from_column_only":16,"tables_from_fk_expansion":2,"table_scores":[{"table":"positions","similarity":0.6472399264470684},{"table":"positions","similarity":0.6452537561635636},{"table":"employee_salaries","similarity":0.6285395131693224},{"table":"employee_salaries","similarity":0.6163489777991259},{"table":"departments","similarity":0.6143006157633061},{"table":"departments","similarity":0.6029940665123251},{"table":"employees","similarity":0.5843710762372889},{"table":"employees","similarity":0.5671015993256167},{"table":"cost_centers","similarity":0.5579264629700211},{"table":"budgets","similarity":0.5571964787833181},{"table":"cost_centers","similarity":0.5368058805619271},{"table":"sales_regions","similarity":0.5364724383376334},{"table":"sales_territories","similarity":0.5299492722581486},{"table":"budgets","similarity":0.528033524549222},{"table":"journal_entries","similarity":0.526534036172237}],"column_hits_per_table":{"employees":8,"departments":6,"employee_salaries":7,"positions":4,"cost_centers":1,"budgets":2,"employee_benefits":1,"requisition_lines":2,"purchase_requisitions":1,"project_resources":1,"sales_orders":2,"employment_history":1,"project_budgets":1,"goods_receipts":2,"currencies":1,"employee_certifications":1,"vendor_invoices":2,"employee_training":1,"journal_entries":1,"product_suppliers":1,"project_expenses":1,"sales_quotes":1,"depreciation_schedules":1,"sales_territories":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.665761067669807},{"column":"department_id","similarity":0.5815151415615687},{"column":"employee_number","similarity":0.5512734022930011}],"departments":[{"column":"budget","similarity":0.6619984421106927},{"column":"name","similarity":0.6123868694663578},{"column":"parent_department_id","similarity":0.5859717891490452}],"employee_salaries":[{"column":"amount","similarity":0.6500990551890313},{"column":"effective_date","similarity":0.611770947186606},{"column":"salary_id","similarity":0.5985853421960141}],"positions":[{"column":"department_id","similarity":0.6269881859529215},{"column":"max_salary","similarity":0.6246839022090498},{"column":"min_salary","similarity":0.6230151577349895}],"cost_centers":[{"column":"department_id","similarity":0.5896621626840974}],"budgets":[{"column":"department_id","similarity":0.580591842420962},{"column":"total_amount","similarity":0.5338274885049906}],"employee_benefits":[{"column":"coverage_level","similarity":0.5654079472210596}],"requisition_lines":[{"column":"estimated_total","similarity":0.5582588991716904},{"column":"estimated_unit_cost","similarity":0.5441338218091372}],"purchase_requisitions":[{"column":"department_id","similarity":0.5572144875437345}],"project_resources":[{"column":"hourly_rate","similarity":0.5514441085734471}],"sales_orders":[{"column":"total","similarity":0.5427163382142084},{"column":"subtotal","similarity":0.5223697723709152}],"employment_history":[{"column":"position","similarity":0.5420691639730986}],"project_budgets":[{"column":"actual_amount","similarity":0.5393341879647957}],"goods_receipts":[{"column":"received_by","similarity":0.5349267147302068},{"column":"receipt_number","similarity":0.5279798899236793}],"currencies":[{"column":"exchange_rate","similarity":0.5332608603311223}],"employee_certifications":[{"column":"certificate_number","similarity":0.5305395669595222}],"vendor_invoices":[{"column":"amount_paid","similarity":0.5304764397719846},{"column":"total","similarity":0.5272326757338365}],"employee_training":[{"column":"score","similarity":0.530103302594991}],"journal_entries":[{"column":"posted_by","similarity":0.5291393373857585}],"product_suppliers":[{"column":"unit_cost","similarity":0.52770578346072}],"project_expenses":[{"column":"amount","similarity":0.5237759228326622}],"sales_quotes":[{"column":"total","similarity":0.5219832277482833}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5219116192563482}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5218538792844735}]},"fused_scores":[{"table":"positions","fused":0.761628846128756,"table_sim":0.6452537561635636,"col_score":0.9361914810765446},{"table":"employee_salaries","fused":0.7522031981924093,"table_sim":0.6163489777991259,"col_score":0.9559845287823343},{"table":"employees","fused":0.7168200671218931,"table_sim":0.5671015993256167,"col_score":0.9413977688163075},{"table":"departments","fused":0.7123299784769622,"table_sim":0.6029940665123251,"col_score":0.8763338464239179},{"table":"budgets","fused":0.6116339680704641,"table_sim":0.528033524549222,"col_score":0.7370346333523273},{"table":"journal_entries","fused":0.5275761566576456,"table_sim":0.526534036172237,"col_score":0.5291393373857585},{"table":"cost_centers","fused":0.48718893388870355,"table_sim":0.5368058805619271,"col_score":0.41276351387886817},{"table":"sales_territories","fused":0.4640886495545417,"table_sim":0.5299492722581486,"col_score":0.3652977154991314},{"table":"requisition_lines","fused":0.3321303240305036,"table_sim":0,"col_score":0.8303258100762589},{"table":"sales_regions","fused":0.32188346300258003,"table_sim":0.5364724383376334,"col_score":0},{"table":"sales_orders","fused":0.3215604897598664,"table_sim":0,"col_score":0.8039012243996659},{"table":"goods_receipts","fused":0.31956666387681865,"table_sim":0,"col_score":0.7989166596920465},{"table":"vendor_invoices","fused":0.28515977186161245,"table_sim":0,"col_score":0.7128994296540311},{"table":"employee_benefits","fused":0.22616317888842385,"table_sim":0,"col_score":0.5654079472210596},{"table":"project_resources","fused":0.22057764342937883,"table_sim":0,"col_score":0.5514441085734471}],"fk_expansion_candidates":68,"fk_expansion_added":2,"fk_expansion_blocked_count":54,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"project_resources","reason":"max_tables"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"project_resources","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"employee_certifications","reason":"max_tables"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"employee_training","reason":"already_selected"},{"table":"employee_certifications","reason":"max_tables"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"employee_benefits","reason":"max_tables"},{"table":"goods_receipts","reason":"max_tables"},{"table":"journal_lines","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"employment_history","reason":"already_selected"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":53,"total_retrieval_latency_ms":60,"sql_generated":"SELECT d.name AS department_name, AVG(e.salary) AS avg_salary FROM departments d JOIN employees e ON d.department_id = e.department_id GROUP BY d.name;","tables_used_in_sql":[],"explain_result":"success","rows_returned":19,"total_latency_ms":978}
{"timestamp":"2026-01-29T21:23:00.267Z","query_id":"33ef305c-d09e-4034-851c-ee0837bee058","question":"List all customers with credit limit over $100,000","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["customers","customer_contacts","bank_accounts","purchase_requisitions","sales_quotes","certifications","budget_lines","cost_centers","projects","sales_regions","bank_transactions","budgets"],"tables_from_table_retrieval":10,"tables_from_column_only":19,"tables_from_fk_expansion":2,"table_scores":[{"table":"customers","similarity":0.6490529391143375},{"table":"customers","similarity":0.6422232823454113},{"table":"customer_contacts","similarity":0.5702946339617082},{"table":"sales_regions","similarity":0.5667997703273866},{"table":"customer_contacts","similarity":0.5609682931182661},{"table":"certifications","similarity":0.5571072107976042},{"table":"sales_quotes","similarity":0.5491541498727729},{"table":"purchase_requisitions","similarity":0.5478589409950445},{"table":"purchase_requisitions","similarity":0.5459857460749011},{"table":"budget_lines","similarity":0.5454449382794198},{"table":"sales_regions","similarity":0.5450307067379918},{"table":"bank_accounts","similarity":0.5447528216147618},{"table":"sales_quotes","similarity":0.5431882182432292},{"table":"projects","similarity":0.5423183345794994},{"table":"cost_centers","similarity":0.540959333993602}],"column_hits_per_table":{"customers":10,"customer_contacts":7,"projects":1,"sales_opportunities":1,"reorder_rules":1,"sales_quotes":2,"quote_lines":1,"bank_transactions":2,"sales_orders":2,"vendor_invoices":1,"budget_lines":1,"bank_accounts":2,"budgets":1,"positions":1,"purchase_orders":2,"certifications":1,"order_lines":1,"vendor_invoice_lines":1,"journal_lines":1,"warehouse_locations":1,"cost_centers":1,"purchase_requisitions":2,"project_expenses":1,"project_milestones":1,"requisition_lines":1,"po_lines":1,"sales_regions":1,"project_budgets":1,"vendors":1},"top_columns_per_table":{"customers":[{"column":"credit_limit","similarity":0.8264130571427136},{"column":"payment_terms","similarity":0.6589990489867001},{"column":"customer_number","similarity":0.6394526735948951}],"customer_contacts":[{"column":"phone","similarity":0.606368805831685},{"column":"title","similarity":0.5970373914759594},{"column":"customer_id","similarity":0.5956864569852515}],"projects":[{"column":"customer_id","similarity":0.5928916239987955}],"sales_opportunities":[{"column":"customer_id","similarity":0.5902627586172409}],"reorder_rules":[{"column":"max_quantity","similarity":0.5899919735657247}],"sales_quotes":[{"column":"customer_id","similarity":0.5891584566690409},{"column":"total","similarity":0.5586703861991749}],"quote_lines":[{"column":"line_total","similarity":0.5801866487795829}],"bank_transactions":[{"column":"amount","similarity":0.578099883266191},{"column":"reference","similarity":0.5598602335402326}],"sales_orders":[{"column":"customer_id","similarity":0.5763949820310496},{"column":"total","similarity":0.5622977399772391}],"vendor_invoices":[{"column":"total","similarity":0.574486333008983}],"budget_lines":[{"column":"amount","similarity":0.5741121544432773}],"bank_accounts":[{"column":"current_balance","similarity":0.5735872293568434},{"column":"account_number","similarity":0.5649953609091014}],"budgets":[{"column":"approved_by","similarity":0.5731556505145398}],"positions":[{"column":"max_salary","similarity":0.5725523876248747}],"purchase_orders":[{"column":"total","similarity":0.5714278025144766},{"column":"approved_by","similarity":0.5659425523622221}],"certifications":[{"column":"validity_years","similarity":0.5702505536109264}],"order_lines":[{"column":"line_total","similarity":0.5698151919963369}],"vendor_invoice_lines":[{"column":"amount","similarity":0.5693578249080868}],"journal_lines":[{"column":"credit","similarity":0.5674218657230614}],"warehouse_locations":[{"column":"capacity","similarity":0.5662115513809343}],"cost_centers":[{"column":"code","similarity":0.5650327130492546}],"purchase_requisitions":[{"column":"approved_by","similarity":0.5649975444535725},{"column":"requisition_number","similarity":0.5569267046602896}],"project_expenses":[{"column":"approved_by","similarity":0.5647321953724768}],"project_milestones":[{"column":"amount","similarity":0.5630219436026808}],"requisition_lines":[{"column":"estimated_total","similarity":0.5598201507599695}],"po_lines":[{"column":"line_total","similarity":0.5594451313327365}],"sales_regions":[{"column":"manager_id","similarity":0.5580159655063975}],"project_budgets":[{"column":"actual_amount","similarity":0.5578517497187595}],"vendors":[{"column":"payment_terms","similarity":0.557438207097068}]},"fused_scores":[{"table":"customers","fused":0.8476990020616721,"table_sim":0.6422232823454113,"col_score":1.1559125816360636},{"table":"customer_contacts","fused":0.6985359764988255,"table_sim":0.5609682931182661,"col_score":0.9048875015696647},{"table":"bank_accounts","fused":0.6692856568934147,"table_sim":0.5447528216147618,"col_score":0.8560849098113941},{"table":"purchase_requisitions","fused":0.6649758063584277,"table_sim":0.5459857460749011,"col_score":0.8434608967837174},{"table":"sales_quotes","fused":0.6318632693592732,"table_sim":0.5431882182432292,"col_score":0.7648758460333391},{"table":"certifications","fused":0.562364547922933,"table_sim":0.5571072107976042,"col_score":0.5702505536109264},{"table":"budget_lines","fused":0.5569118247449628,"table_sim":0.5454449382794198,"col_score":0.5741121544432773},{"table":"cost_centers","fused":0.550588685615863,"table_sim":0.540959333993602,"col_score":0.5650327130492546},{"table":"projects","fused":0.49140065546736234,"table_sim":0.5423183345794994,"col_score":0.4150241367991568},{"table":"sales_regions","fused":0.48326289438458636,"table_sim":0.5450307067379918,"col_score":0.39061117585447824},{"table":"bank_transactions","fused":0.3432120000145229,"table_sim":0,"col_score":0.8580300000363072},{"table":"purchase_orders","fused":0.34175963147823507,"table_sim":0,"col_score":0.8543990786955876},{"table":"sales_orders","fused":0.3056143934752426,"table_sim":0,"col_score":0.7640359836881064},{"table":"reorder_rules","fused":0.2359967894262899,"table_sim":0,"col_score":0.5899919735657247},{"table":"quote_lines","fused":0.23207465951183318,"table_sim":0,"col_score":0.5801866487795829}],"fk_expansion_candidates":44,"fk_expansion_added":2,"fk_expansion_blocked_count":34,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"bank_transactions","reason":"already_selected"},{"table":"budgets","reason":"already_selected"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"project_budgets","reason":"no_evidence"},{"table":"project_budgets","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"project_milestones","reason":"no_evidence"},{"table":"project_milestones","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"purchase_orders","reason":"max_tables"},{"table":"purchase_orders","reason":"max_tables"},{"table":"quote_lines","reason":"max_tables"},{"table":"quote_lines","reason":"max_tables"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"sales_orders","reason":"max_tables"},{"table":"sales_territories","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":40,"total_retrieval_latency_ms":47,"sql_generated":"SELECT c.customer_id, c.name AS customer_name, c.credit_limit FROM customers c WHERE c.credit_limit > 100000;","tables_used_in_sql":[],"explain_result":"success","rows_returned":206,"total_latency_ms":792}
{"timestamp":"2026-01-29T21:23:01.060Z","query_id":"fc1d7413-57dc-40dc-8c24-ccf22c51cfda","question":"How many sales orders are in pending status?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["sales_orders","purchase_orders","sales_opportunities","order_lines","vendor_invoices","goods_receipts","po_lines","sales_territories","sales_quotes","fixed_assets"],"tables_from_table_retrieval":8,"tables_from_column_only":16,"tables_from_fk_expansion":0,"table_scores":[{"table":"sales_orders","similarity":0.6912680172561704},{"table":"sales_orders","similarity":0.6863020331203206},{"table":"purchase_orders","similarity":0.6720782086239174},{"table":"purchase_orders","similarity":0.671648599917699},{"table":"order_lines","similarity":0.6262436019663461},{"table":"order_lines","similarity":0.620432904007153},{"table":"sales_opportunities","similarity":0.6139945509337431},{"table":"vendor_invoices","similarity":0.6085185379492049},{"table":"goods_receipts","similarity":0.6053687360586439},{"table":"sales_opportunities","similarity":0.601388904869088},{"table":"vendor_invoices","similarity":0.5991801878593713},{"table":"goods_receipts","similarity":0.5990123268206022},{"table":"po_lines","similarity":0.5927897429514958},{"table":"sales_territories","similarity":0.5896170716857199},{"table":"po_lines","similarity":0.576218684979662}],"column_hits_per_table":{"sales_orders":13,"purchase_orders":10,"sales_quotes":2,"vendor_invoices":3,"purchase_requisitions":1,"stock_transfers":1,"timesheets":1,"sales_opportunities":2,"leave_requests":1,"project_phases":1,"journal_entries":1,"projects":1,"inventory_adjustments":1,"order_lines":2,"asset_maintenance":1,"fixed_assets":2,"employee_training":1,"goods_receipts":1,"project_expenses":1,"project_tasks":1,"po_lines":1,"vendors":1,"product_suppliers":1},"top_columns_per_table":{"sales_orders":[{"column":"status","similarity":0.8125049395316426},{"column":"order_date","similarity":0.6991484254489689},{"column":"ship_date","similarity":0.6886132471169295}],"purchase_orders":[{"column":"status","similarity":0.7670301060080371},{"column":"po_number","similarity":0.6444732305183548},{"column":"order_date","similarity":0.642184556061974}],"sales_quotes":[{"column":"status","similarity":0.7069048526459094},{"column":"valid_until","similarity":0.5929304827772888}],"vendor_invoices":[{"column":"status","similarity":0.6889977754690522},{"column":"po_id","similarity":0.5964353910929457},{"column":"due_date","similarity":0.5954346294411716}],"purchase_requisitions":[{"column":"status","similarity":0.6807720764825977}],"stock_transfers":[{"column":"status","similarity":0.6558342866682164}],"timesheets":[{"column":"status","similarity":0.6365165724449758}],"sales_opportunities":[{"column":"expected_close_date","similarity":0.6279055578746939},{"column":"actual_close_date","similarity":0.6251199223215209}],"leave_requests":[{"column":"status","similarity":0.6264128005664035}],"project_phases":[{"column":"status","similarity":0.6226177091436476}],"journal_entries":[{"column":"status","similarity":0.6141546900695833}],"projects":[{"column":"status","similarity":0.6138551966717181}],"inventory_adjustments":[{"column":"status","similarity":0.6120310910949274}],"order_lines":[{"column":"quantity_shipped","similarity":0.6088823006735591},{"column":"order_id","similarity":0.5974249918500518}],"asset_maintenance":[{"column":"status","similarity":0.6074441869634195}],"fixed_assets":[{"column":"status","similarity":0.6064051928483505},{"column":"po_id","similarity":0.5944902489845791}],"employee_training":[{"column":"status","similarity":0.6031990688486019}],"goods_receipts":[{"column":"po_id","similarity":0.599781547117576}],"project_expenses":[{"column":"status","similarity":0.5986821650659566}],"project_tasks":[{"column":"status","similarity":0.5978682233232903}],"po_lines":[{"column":"po_id","similarity":0.5909874685299387}],"vendors":[{"column":"is_active","similarity":0.589527003021394}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.5886391733536503}]},"fused_scores":[{"table":"sales_orders","fused":0.8291632394751658,"table_sim":0.6863020331203206,"col_score":1.0434550490074337},{"table":"purchase_orders","fused":0.7892153633703561,"table_sim":0.671648599917699,"col_score":0.9655655085493418},{"table":"sales_opportunities","fused":0.7370195505356345,"table_sim":0.601388904869088,"col_score":0.9404655190354544},{"table":"order_lines","fused":0.6994521615327227,"table_sim":0.620432904007153,"col_score":0.8179810478210772},{"table":"vendor_invoices","fused":0.6941416530577588,"table_sim":0.5991801878593713,"col_score":0.8365838508553399},{"table":"goods_receipts","fused":0.5273462292852826,"table_sim":0.5990123268206022,"col_score":0.4198470829823032},{"table":"po_lines","fused":0.5112077021761801,"table_sim":0.576218684979662,"col_score":0.41369122797095703},{"table":"sales_territories","fused":0.3537702430114319,"table_sim":0.5896170716857199,"col_score":0},{"table":"sales_quotes","fused":0.33613887248134283,"table_sim":0,"col_score":0.840347181203357},{"table":"fixed_assets","fused":0.25302208885537925,"table_sim":0,"col_score":0.6325552221384481},{"table":"product_suppliers","fused":0.23545566934146014,"table_sim":0,"col_score":0.5886391733536503},{"table":"purchase_requisitions","fused":0.19061618141512737,"table_sim":0,"col_score":0.4765404535378184},{"table":"stock_transfers","fused":0.1836336002671006,"table_sim":0,"col_score":0.45908400066775146},{"table":"timesheets","fused":0.17822464028459323,"table_sim":0,"col_score":0.44556160071148304},{"table":"leave_requests","fused":0.17539558415859297,"table_sim":0,"col_score":0.4384889603964824}],"fk_expansion_candidates":36,"fk_expansion_added":0,"fk_expansion_blocked_count":36,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":42,"total_retrieval_latency_ms":50,"sql_generated":"SELECT COUNT(*) FROM sales_orders WHERE status = 'pending';","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":466}
{"timestamp":"2026-01-29T21:23:01.526Z","query_id":"da3df130-8dee-496a-a8fa-9a56af372f9c","question":"List all products in the Electronics category","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["products","asset_categories","product_categories","product_suppliers","inventory_levels","fixed_assets","order_lines","inventory_transactions","purchase_orders","benefit_types","purchase_requisitions"],"tables_from_table_retrieval":8,"tables_from_column_only":13,"tables_from_fk_expansion":1,"table_scores":[{"table":"product_categories","similarity":0.7440966262295596},{"table":"product_categories","similarity":0.7247710633179223},{"table":"products","similarity":0.6936914033913907},{"table":"products","similarity":0.6925442846427379},{"table":"asset_categories","similarity":0.675092849342745},{"table":"asset_categories","similarity":0.6732299389573608},{"table":"product_suppliers","similarity":0.6167763468166113},{"table":"product_suppliers","similarity":0.6030261734368682},{"table":"inventory_levels","similarity":0.5983462217768915},{"table":"benefit_types","similarity":0.5912987652121153},{"table":"order_lines","similarity":0.5871208520150285},{"table":"inventory_levels","similarity":0.5867245118996366},{"table":"fixed_assets","similarity":0.5837780825065988},{"table":"order_lines","similarity":0.579950725989159},{"table":"benefit_types","similarity":0.5783320444020242}],"column_hits_per_table":{"product_categories":5,"products":11,"asset_categories":5,"fixed_assets":1,"project_budgets":1,"project_expenses":1,"product_suppliers":5,"inventory_levels":3,"goods_receipts":1,"purchase_orders":3,"projects":1,"inventory_transactions":4,"receipt_lines":1,"purchase_requisitions":2,"sales_orders":1,"order_lines":1,"account_types":1,"po_lines":1,"transfer_lines":1,"requisition_lines":1},"top_columns_per_table":{"product_categories":[{"column":"description","similarity":0.768646064681113},{"column":"is_active","similarity":0.7548223288686364},{"column":"name","similarity":0.7489199069567996}],"products":[{"column":"description","similarity":0.7240057799645775},{"column":"category_id","similarity":0.7136649617093936},{"column":"weight","similarity":0.704192443561975}],"asset_categories":[{"column":"category_id","similarity":0.6604362615120926},{"column":"name","similarity":0.6520432448665474},{"column":"useful_life_years","similarity":0.6398787756615528}],"fixed_assets":[{"column":"category_id","similarity":0.6558423387788446}],"project_budgets":[{"column":"category","similarity":0.6525796799281143}],"project_expenses":[{"column":"category","similarity":0.651685931963324}],"product_suppliers":[{"column":"is_preferred","similarity":0.6277409629474681},{"column":"minimum_order_qty","similarity":0.6258886931415574},{"column":"product_id","similarity":0.6174175455514888}],"inventory_levels":[{"column":"product_id","similarity":0.621493522445592},{"column":"quantity_available","similarity":0.6048918603546654},{"column":"quantity_reserved","similarity":0.5998511349920754}],"goods_receipts":[{"column":"notes","similarity":0.6198539940312029}],"purchase_orders":[{"column":"status","similarity":0.6188603430058831},{"column":"subtotal","similarity":0.6038932710888189},{"column":"total","similarity":0.6013038985767659}],"projects":[{"column":"description","similarity":0.6151455561431391}],"inventory_transactions":[{"column":"transaction_type","similarity":0.6146449355403084},{"column":"product_id","similarity":0.608914428966703},{"column":"quantity","similarity":0.6047816235748863}],"receipt_lines":[{"column":"product_id","similarity":0.6133835901571644}],"purchase_requisitions":[{"column":"notes","similarity":0.6125383879595175},{"column":"status","similarity":0.6080888182045856}],"sales_orders":[{"column":"status","similarity":0.6123902626754091}],"order_lines":[{"column":"product_id","similarity":0.610487520300843}],"account_types":[{"column":"category","similarity":0.609393081886742}],"po_lines":[{"column":"product_id","similarity":0.60542865156565}],"transfer_lines":[{"column":"product_id","similarity":0.6047891394005516}],"requisition_lines":[{"column":"product_id","similarity":0.6021201253496539}]},"fused_scores":[{"table":"products","fused":0.8343480462306,"table_sim":0.6925442846427379,"col_score":1.0470536886123931},{"table":"asset_categories","fused":0.7867425373127976,"table_sim":0.6732299389573608,"col_score":0.9570114348459529},{"table":"product_categories","fused":0.7557586621430741,"table_sim":0.7247710633179223,"col_score":0.8022400603808018},{"table":"product_suppliers","fused":0.7380898278694197,"table_sim":0.6030261734368682,"col_score":0.9406853095182468},{"table":"inventory_levels","fused":0.7139616782800633,"table_sim":0.5867245118996366,"col_score":0.9048174278507031},{"table":"fixed_assets","fused":0.5339027043620357,"table_sim":0.5837780825065988,"col_score":0.4590896371451912},{"table":"order_lines","fused":0.5189069412777314,"table_sim":0.579950725989159,"col_score":0.42734126421059004},{"table":"inventory_transactions","fused":0.3668142989311006,"table_sim":0,"col_score":0.9170357473277515},{"table":"purchase_orders","fused":0.36181808815088073,"table_sim":0,"col_score":0.9045452203772018},{"table":"benefit_types","fused":0.3469992266412145,"table_sim":0.5783320444020242,"col_score":0},{"table":"project_budgets","fused":0.2610318719712457,"table_sim":0,"col_score":0.6525796799281143},{"table":"project_expenses","fused":0.2606743727853296,"table_sim":0,"col_score":0.651685931963324},{"table":"purchase_requisitions","fused":0.2566431831773069,"table_sim":0,"col_score":0.6416079579432672},{"table":"account_types","fused":0.24375723275469682,"table_sim":0,"col_score":0.609393081886742},{"table":"goods_receipts","fused":0.17355911832873683,"table_sim":0,"col_score":0.433897795821842}],"fk_expansion_candidates":46,"fk_expansion_added":1,"fk_expansion_blocked_count":44,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"already_selected"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":37,"total_retrieval_latency_ms":43,"sql_generated":"SELECT p.name AS product_name, p.unit_cost, pc.category_id, ac.name AS asset_category_name FROM products p INNER JOIN product_categories pc ON p.category_id = pc.category_id WHERE pc.name = 'Electronics';","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42P01","error_message":"missing FROM-clause entry for table \"ac\"","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_failure_reason":"Alias 'ac' not defined. Possible table: asset_categories. Define alias in FROM/JOIN clause.","total_latency_ms":2594,"failure_type":"join_path_miss","failure_details":"Database error after 3 attempts: missing FROM-clause entry for table \"ac\""}
{"timestamp":"2026-01-29T21:23:04.120Z","query_id":"2cb16fc1-c619-4b7e-b2fd-590143dd3ee5","question":"What are the names of all warehouses?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["warehouse_locations","warehouses","asset_locations","inventory_levels","stock_transfers","inventory_transactions","goods_receipts","departments","product_suppliers","vendor_contacts"],"tables_from_table_retrieval":8,"tables_from_column_only":21,"tables_from_fk_expansion":0,"table_scores":[{"table":"warehouse_locations","similarity":0.7285498737313786},{"table":"warehouse_locations","similarity":0.7256245774024009},{"table":"warehouses","similarity":0.7204359296605657},{"table":"warehouses","similarity":0.6792134543197855},{"table":"asset_locations","similarity":0.6061979025779698},{"table":"inventory_levels","similarity":0.6028416640616783},{"table":"stock_transfers","similarity":0.5855227429535015},{"table":"inventory_levels","similarity":0.5815423542782951},{"table":"asset_locations","similarity":0.5811905860356016},{"table":"stock_transfers","similarity":0.5781619306329983},{"table":"inventory_transactions","similarity":0.5741447160112193},{"table":"goods_receipts","similarity":0.562857185642988},{"table":"inventory_transactions","similarity":0.5616292383039162},{"table":"departments","similarity":0.5480887807539053},{"table":"goods_receipts","similarity":0.5476244141262239}],"column_hits_per_table":{"warehouses":6,"warehouse_locations":7,"stock_transfers":2,"goods_receipts":1,"inventory_levels":2,"inventory_transactions":2,"receipt_lines":1,"asset_locations":6,"adjustment_lines":1,"departments":1,"inventory_adjustments":1,"vendors":1,"business_units":1,"cities":1,"cost_centers":1,"reorder_rules":1,"sales_territories":1,"sales_regions":1,"product_categories":1,"products":1,"currencies":1,"units_of_measure":1,"asset_categories":1,"projects":1,"project_phases":1,"vendor_contacts":2,"product_suppliers":2,"states_provinces":1,"budgets":1},"top_columns_per_table":{"warehouses":[{"column":"name","similarity":0.8239837132539246},{"column":"warehouse_id","similarity":0.7389525085782149},{"column":"code","similarity":0.7372924825805767}],"warehouse_locations":[{"column":"bin","similarity":0.7369462714727907},{"column":"rack","similarity":0.7301028923076418},{"column":"aisle","similarity":0.7270563176306292}],"stock_transfers":[{"column":"to_warehouse_id","similarity":0.6201896532931714},{"column":"from_warehouse_id","similarity":0.6108572482417348}],"goods_receipts":[{"column":"warehouse_id","similarity":0.6194093569001528}],"inventory_levels":[{"column":"warehouse_id","similarity":0.6129809657152051},{"column":"location_id","similarity":0.6110605538163267}],"inventory_transactions":[{"column":"location_id","similarity":0.6117765492932795},{"column":"warehouse_id","similarity":0.6045036778290787}],"receipt_lines":[{"column":"location_id","similarity":0.6044988749396849}],"asset_locations":[{"column":"name","similarity":0.5995259669429954},{"column":"building","similarity":0.5699431267066559},{"column":"description","similarity":0.5635470294472803}],"adjustment_lines":[{"column":"location_id","similarity":0.5925704006095981}],"departments":[{"column":"name","similarity":0.5916804481850862}],"inventory_adjustments":[{"column":"warehouse_id","similarity":0.5911141126040913}],"vendors":[{"column":"name","similarity":0.5896534915318243}],"business_units":[{"column":"name","similarity":0.5874482869568506}],"cities":[{"column":"name","similarity":0.5788506113941311}],"cost_centers":[{"column":"name","similarity":0.57825487466543}],"reorder_rules":[{"column":"warehouse_id","similarity":0.5761515648038772}],"sales_territories":[{"column":"name","similarity":0.5747925339792243}],"sales_regions":[{"column":"name","similarity":0.5726917211289799}],"product_categories":[{"column":"name","similarity":0.5635071676942313}],"products":[{"column":"name","similarity":0.563172892076737}],"currencies":[{"column":"name","similarity":0.5626835257654214}],"units_of_measure":[{"column":"name","similarity":0.5515381017275516}],"asset_categories":[{"column":"name","similarity":0.5512975889483408}],"projects":[{"column":"name","similarity":0.548957856266308}],"project_phases":[{"column":"name","similarity":0.547495677729703}],"vendor_contacts":[{"column":"first_name","similarity":0.5469148670018114},{"column":"last_name","similarity":0.544268531581012}],"product_suppliers":[{"column":"supplier_id","similarity":0.5445688274826966},{"column":"is_preferred","similarity":0.5407228032470287}],"states_provinces":[{"column":"name","similarity":0.5416799146294229}],"budgets":[{"column":"name","similarity":0.5394362709333709}]},"fused_scores":[{"table":"warehouse_locations","fused":0.8761738334920852,"table_sim":0.7256245774024009,"col_score":1.1019977176266116},{"table":"warehouses","fused":0.8178027854796515,"table_sim":0.6792134543197855,"col_score":1.0256867822194502},{"table":"asset_locations","fused":0.6860681088252738,"table_sim":0.5811905860356016,"col_score":0.8433843930097823},{"table":"inventory_levels","fused":0.6061085605015202,"table_sim":0.5815423542782951,"col_score":0.6429578698363578},{"table":"stock_transfers","fused":0.6060702760557298,"table_sim":0.5781619306329983,"col_score":0.6479327941898272},{"table":"inventory_transactions","fused":0.592905491680539,"table_sim":0.5616292383039162,"col_score":0.6398198717454732},{"table":"goods_receipts","fused":0.502009268407777,"table_sim":0.5476244141262239,"col_score":0.4335865498301069},{"table":"departments","fused":0.49452379394416734,"table_sim":0.5480887807539053,"col_score":0.4141763137295604},{"table":"product_suppliers","fused":0.292528757146389,"table_sim":0,"col_score":0.7313218928659725},{"table":"vendor_contacts","fused":0.22933375718184884,"table_sim":0,"col_score":0.5733343929546221},{"table":"receipt_lines","fused":0.16925968498311178,"table_sim":0,"col_score":0.4231492124577794},{"table":"adjustment_lines","fused":0.16591971217068746,"table_sim":0,"col_score":0.41479928042671865},{"table":"inventory_adjustments","fused":0.16551195152914555,"table_sim":0,"col_score":0.4137798788228639},{"table":"vendors","fused":0.1651029776289108,"table_sim":0,"col_score":0.412757444072277},{"table":"business_units","fused":0.16448552034791816,"table_sim":0,"col_score":0.41121380086979537}],"fk_expansion_candidates":32,"fk_expansion_added":0,"fk_expansion_blocked_count":32,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":42,"total_retrieval_latency_ms":49,"sql_generated":"SELECT w.name FROM warehouses AS w;","tables_used_in_sql":[],"explain_result":"success","rows_returned":5,"total_latency_ms":419}
{"timestamp":"2026-01-29T21:23:04.539Z","query_id":"fe318c68-260b-4476-874c-844cc9a6916c","question":"List all active vendors","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["vendors","vendor_contacts","vendor_invoices","product_suppliers","vendor_invoice_lines","purchase_orders","warehouses","sales_orders","customers","employees"],"tables_from_table_retrieval":8,"tables_from_column_only":10,"tables_from_fk_expansion":0,"table_scores":[{"table":"vendors","similarity":0.6962726298258062},{"table":"vendors","similarity":0.6880006513779018},{"table":"vendor_contacts","similarity":0.6580029100551065},{"table":"vendor_invoices","similarity":0.6543823921120047},{"table":"vendor_contacts","similarity":0.6543707733450305},{"table":"vendor_invoices","similarity":0.6537617498498873},{"table":"product_suppliers","similarity":0.639369742368815},{"table":"product_suppliers","similarity":0.6368613960189783},{"table":"vendor_invoice_lines","similarity":0.6064291468302401},{"table":"purchase_orders","similarity":0.6046285681195724},{"table":"purchase_orders","similarity":0.6014162141351794},{"table":"warehouses","similarity":0.598149679590252},{"table":"warehouses","similarity":0.5980487673772418},{"table":"vendor_invoice_lines","similarity":0.5838401301268009},{"table":"sales_orders","similarity":0.5640201838810418}],"column_hits_per_table":{"vendors":12,"vendor_invoices":11,"vendor_contacts":8,"customers":1,"product_suppliers":3,"employees":1,"products":1,"warehouses":1,"fixed_assets":1,"asset_maintenance":1,"purchase_orders":1,"vendor_invoice_lines":3,"positions":1,"business_units":1,"sales_orders":1,"product_categories":1,"bank_accounts":1,"benefit_types":1},"top_columns_per_table":{"vendors":[{"column":"is_active","similarity":0.8082741906985379},{"column":"vendor_id","similarity":0.696608570908196},{"column":"vendor_number","similarity":0.690104216983127}],"vendor_invoices":[{"column":"status","similarity":0.6807922132677474},{"column":"total","similarity":0.655474212549299},{"column":"subtotal","similarity":0.6431967210368317}],"vendor_contacts":[{"column":"is_primary","similarity":0.6594024190023925},{"column":"email","similarity":0.649863249101007},{"column":"vendor_id","similarity":0.6441969797065956}],"customers":[{"column":"is_active","similarity":0.6476421054003765}],"product_suppliers":[{"column":"vendor_id","similarity":0.6444561335438413},{"column":"vendor_sku","similarity":0.621198911356786},{"column":"is_preferred","similarity":0.6007180783650777}],"employees":[{"column":"is_active","similarity":0.6437737649411213}],"products":[{"column":"is_active","similarity":0.6412563586748957}],"warehouses":[{"column":"is_active","similarity":0.6361520848821371}],"fixed_assets":[{"column":"vendor_id","similarity":0.6358205697022895}],"asset_maintenance":[{"column":"vendor_id","similarity":0.6314938869527287}],"purchase_orders":[{"column":"vendor_id","similarity":0.629774324610349}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.618005483305915},{"column":"amount","similarity":0.6046802848122621},{"column":"line_id","similarity":0.6033856438304122}],"positions":[{"column":"is_active","similarity":0.6113698702425924}],"business_units":[{"column":"is_active","similarity":0.6078912202143344}],"sales_orders":[{"column":"status","similarity":0.6008435501749047}],"product_categories":[{"column":"is_active","similarity":0.6002220998224144}],"bank_accounts":[{"column":"is_active","similarity":0.5939215808610938}],"benefit_types":[{"column":"is_active","similarity":0.5936815548559959}]},"fused_scores":[{"table":"vendors","fused":0.8266718004696496,"table_sim":0.6880006513779018,"col_score":1.0346785241072713},{"table":"vendor_contacts","fused":0.7863560814281767,"table_sim":0.6543707733450305,"col_score":0.984334043552896},{"table":"vendor_invoices","fused":0.7830860791370183,"table_sim":0.6537617498498873,"col_score":0.9770725730677149},{"table":"product_suppliers","fused":0.7507400178271169,"table_sim":0.6368613960189783,"col_score":0.9215579505393248},{"table":"vendor_invoice_lines","fused":0.7184423283608989,"table_sim":0.5838401301268009,"col_score":0.920345625712046},{"table":"purchase_orders","fused":0.5371865393720053,"table_sim":0.6014162141351794,"col_score":0.44084202722724425},{"table":"warehouses","fused":0.5369518441933434,"table_sim":0.5980487673772418,"col_score":0.44530645941749597},{"table":"sales_orders","fused":0.5066483043775983,"table_sim":0.5640201838810418,"col_score":0.42059048512243324},{"table":"customers","fused":0.18133978951210541,"table_sim":0,"col_score":0.4533494737802635},{"table":"employees","fused":0.18025665418351394,"table_sim":0,"col_score":0.45064163545878483},{"table":"products","fused":0.1795517804289708,"table_sim":0,"col_score":0.448879451072427},{"table":"fixed_assets","fused":0.17802975951664105,"table_sim":0,"col_score":0.4450743987916026},{"table":"asset_maintenance","fused":0.17681828834676402,"table_sim":0,"col_score":0.44204572086691},{"table":"positions","fused":0.17118356366792586,"table_sim":0,"col_score":0.42795890916981466},{"table":"business_units","fused":0.17020954166001365,"table_sim":0,"col_score":0.4255238541500341}],"fk_expansion_candidates":82,"fk_expansion_added":0,"fk_expansion_blocked_count":82,"fk_expansion_blocked":[{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":47,"total_retrieval_latency_ms":54,"sql_generated":"SELECT v.vendor_id, v.vendor_number, v.name FROM vendors v JOIN vendor_contacts c ON v.vendor_id = c.vendor_id WHERE v.is_active;","tables_used_in_sql":[],"explain_result":"success","rows_returned":400,"total_latency_ms":865}
{"timestamp":"2026-01-29T21:23:05.404Z","query_id":"74bccd46-90c0-46a6-a043-8d08c011fb7d","question":"What are the different account types in the chart of accounts?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["account_types","chart_of_accounts","bank_accounts","bank_transactions","asset_categories","benefit_types","journal_lines","vendor_invoice_lines","budget_lines","inventory_transactions","employee_benefits","journal_entries"],"tables_from_table_retrieval":10,"tables_from_column_only":13,"tables_from_fk_expansion":2,"table_scores":[{"table":"chart_of_accounts","similarity":0.819203299985527},{"table":"account_types","similarity":0.7988075557394306},{"table":"account_types","similarity":0.7962345365841693},{"table":"chart_of_accounts","similarity":0.791340822956156},{"table":"bank_accounts","similarity":0.724679255065619},{"table":"bank_accounts","similarity":0.6999646723589786},{"table":"benefit_types","similarity":0.6283185597811837},{"table":"journal_lines","similarity":0.625444495321535},{"table":"asset_categories","similarity":0.618359452764169},{"table":"benefit_types","similarity":0.6179653147868353},{"table":"bank_transactions","similarity":0.6154557182401941},{"table":"vendor_invoice_lines","similarity":0.6040685769049701},{"table":"budget_lines","similarity":0.5976766494889552},{"table":"asset_categories","similarity":0.5957798773551126},{"table":"customers","similarity":0.594854133582724}],"column_hits_per_table":{"chart_of_accounts":8,"account_types":4,"bank_accounts":8,"journal_lines":1,"vendor_invoice_lines":1,"budget_lines":1,"bank_transactions":2,"inventory_transactions":2,"audit_log":2,"benefit_types":5,"asset_categories":3,"document_attachments":1,"sales_orders":2,"employee_benefits":2,"employee_certifications":1,"journal_entries":1,"goods_receipts":1,"maintenance_types":1,"stock_transfers":1,"sales_regions":1,"tax_rates":1,"leave_types":1},"top_columns_per_table":{"chart_of_accounts":[{"column":"account_number","similarity":0.8095156463967756},{"column":"account_type_id","similarity":0.798110199670143},{"column":"name","similarity":0.7773267996543431}],"account_types":[{"column":"category","similarity":0.8061873869514127},{"column":"name","similarity":0.7882152226403916},{"column":"normal_balance","similarity":0.7709865775976293}],"bank_accounts":[{"column":"account_number","similarity":0.7225117774089481},{"column":"gl_account_id","similarity":0.7192196319887921},{"column":"account_name","similarity":0.7058296402253736}],"journal_lines":[{"column":"account_id","similarity":0.701492184125104}],"vendor_invoice_lines":[{"column":"account_id","similarity":0.6899217649690905}],"budget_lines":[{"column":"account_id","similarity":0.6890433704798434}],"bank_transactions":[{"column":"transaction_type","similarity":0.6522339567052419},{"column":"bank_account_id","similarity":0.6000475548322007}],"inventory_transactions":[{"column":"transaction_type","similarity":0.6508100548275718},{"column":"reference_type","similarity":0.618652619489597}],"audit_log":[{"column":"table_name","similarity":0.6299560725437857},{"column":"action","similarity":0.6176881303455621}],"benefit_types":[{"column":"name","similarity":0.6239559576047775},{"column":"benefit_type_id","similarity":0.6003585729270258},{"column":"description","similarity":0.5966507437046684}],"asset_categories":[{"column":"name","similarity":0.6229758631758117},{"column":"depreciation_method","similarity":0.6228780437653545},{"column":"category_id","similarity":0.600618839267168}],"document_attachments":[{"column":"entity_type","similarity":0.6083808106337816}],"sales_orders":[{"column":"order_number","similarity":0.600482029089641},{"column":"status","similarity":0.5849045118154812}],"employee_benefits":[{"column":"benefit_type_id","similarity":0.5984395501956566},{"column":"coverage_level","similarity":0.5909152043760861}],"employee_certifications":[{"column":"certificate_number","similarity":0.5954716152085089}],"journal_entries":[{"column":"entry_number","similarity":0.5900733476704529}],"goods_receipts":[{"column":"receipt_number","similarity":0.5886087045282947}],"maintenance_types":[{"column":"name","similarity":0.5883275771703451}],"stock_transfers":[{"column":"transfer_number","similarity":0.5878568492842889}],"sales_regions":[{"column":"name","similarity":0.5863467044405402}],"tax_rates":[{"column":"tax_type","similarity":0.5861960576726192}],"leave_types":[{"column":"is_paid","similarity":0.5841987409383301}]},"fused_scores":[{"table":"account_types","fused":0.9544129922505925,"table_sim":0.7962345365841693,"col_score":1.1916806757502274},{"table":"chart_of_accounts","fused":0.9103461802862239,"table_sim":0.791340822956156,"col_score":1.0888542162813257},{"table":"bank_accounts","fused":0.8325558126592646,"table_sim":0.6999646723589786,"col_score":1.0314425231096935},{"table":"bank_transactions","fused":0.7141736713027212,"table_sim":0.6154557182401941,"col_score":0.8622506008965121},{"table":"asset_categories","fused":0.693835764763823,"table_sim":0.5957798773551126,"col_score":0.8409195958768886},{"table":"benefit_types","fused":0.6929005069143089,"table_sim":0.6179653147868353,"col_score":0.8053032951055195},{"table":"journal_lines","fused":0.5716845087479501,"table_sim":0.625444495321535,"col_score":0.4910445288875727},{"table":"vendor_invoice_lines","fused":0.5556192403343274,"table_sim":0.6040685769049701,"col_score":0.4829452354783633},{"table":"budget_lines","fused":0.5515381334277293,"table_sim":0.5976766494889552,"col_score":0.48233035933589036},{"table":"inventory_transactions","fused":0.38405454582894816,"table_sim":0,"col_score":0.9601363645723704},{"table":"customers","fused":0.3569124801496344,"table_sim":0.594854133582724,"col_score":0},{"table":"audit_log","fused":0.33526910229435486,"table_sim":0,"col_score":0.8381727557358871},{"table":"sales_orders","fused":0.3220794432900238,"table_sim":0,"col_score":0.8051986082250594},{"table":"employee_benefits","fused":0.3201476187778264,"table_sim":0,"col_score":0.8003690469445659},{"table":"document_attachments","fused":0.24335232425351264,"table_sim":0,"col_score":0.6083808106337816}],"fk_expansion_candidates":26,"fk_expansion_added":2,"fk_expansion_blocked_count":22,"fk_expansion_blocked":[{"table":"budgets","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employee_benefits","reason":"already_selected"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"already_selected"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":43,"total_retrieval_latency_ms":49,"sql_generated":"SELECT DISTINCT at.name AS AccountTypeName FROM account_types at;","tables_used_in_sql":[],"explain_result":"success","rows_returned":25,"total_latency_ms":472}
{"timestamp":"2026-01-29T21:23:05.876Z","query_id":"0dc37936-7a5f-47d2-a428-26bf9f125106","question":"List all bank accounts and their current balances","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["bank_accounts","bank_transactions","account_types","chart_of_accounts","budgets","budget_lines","depreciation_schedules","depreciation_entries","customers","asset_categories","currencies","departments"],"tables_from_table_retrieval":9,"tables_from_column_only":12,"tables_from_fk_expansion":2,"table_scores":[{"table":"bank_accounts","similarity":0.7380467958544561},{"table":"bank_accounts","similarity":0.7329690151560269},{"table":"bank_transactions","similarity":0.6524691990877824},{"table":"bank_transactions","similarity":0.6432688918493359},{"table":"account_types","similarity":0.637683130876762},{"table":"account_types","similarity":0.631508179872346},{"table":"chart_of_accounts","similarity":0.6020063005251778},{"table":"chart_of_accounts","similarity":0.5912086370703393},{"table":"budget_lines","similarity":0.5681702031015662},{"table":"budget_lines","similarity":0.5651962639440569},{"table":"budgets","similarity":0.554395662919137},{"table":"customers","similarity":0.553879794666352},{"table":"customers","similarity":0.5535278665609116},{"table":"asset_categories","similarity":0.5521572577010813},{"table":"depreciation_schedules","similarity":0.548654608986336}],"column_hits_per_table":{"bank_accounts":8,"account_types":3,"bank_transactions":9,"chart_of_accounts":7,"budget_lines":1,"fixed_assets":3,"asset_maintenance":4,"budgets":2,"departments":1,"stock_transfers":1,"purchase_orders":1,"depreciation_entries":3,"sales_orders":1,"asset_transfers":1,"inventory_adjustments":1,"po_lines":1,"depreciation_schedules":1,"currencies":1,"order_lines":1},"top_columns_per_table":{"bank_accounts":[{"column":"current_balance","similarity":0.8089444456145792},{"column":"account_number","similarity":0.6893990880283144},{"column":"bank_name","similarity":0.6886932207378867}],"account_types":[{"column":"normal_balance","similarity":0.6577826771573285},{"column":"name","similarity":0.576305558574986},{"column":"category","similarity":0.5660103860090229}],"bank_transactions":[{"column":"bank_account_id","similarity":0.6320865570574266},{"column":"amount","similarity":0.622087497357687},{"column":"reconciled","similarity":0.6119209268904576}],"chart_of_accounts":[{"column":"account_number","similarity":0.6021310044416771},{"column":"description","similarity":0.5849860017700876},{"column":"name","similarity":0.5833355191945212}],"budget_lines":[{"column":"account_id","similarity":0.5872059668461254}],"fixed_assets":[{"column":"status","similarity":0.5828378769160532},{"column":"purchase_cost","similarity":0.5582567197440901},{"column":"po_id","similarity":0.5544635441821786}],"asset_maintenance":[{"column":"status","similarity":0.5812112019616437},{"column":"notes","similarity":0.5653592975237859},{"column":"cost","similarity":0.5583403793159406}],"budgets":[{"column":"status","similarity":0.5799927736493256},{"column":"total_amount","similarity":0.579980842065588}],"departments":[{"column":"budget","similarity":0.570906870993348}],"stock_transfers":[{"column":"status","similarity":0.5643478756295153}],"purchase_orders":[{"column":"total","similarity":0.5631649012660114}],"depreciation_entries":[{"column":"accumulated_depreciation","similarity":0.5623941152149342},{"column":"asset_id","similarity":0.5608072311992653},{"column":"amount","similarity":0.5531774591650637}],"sales_orders":[{"column":"total","similarity":0.5608168283032534}],"asset_transfers":[{"column":"asset_id","similarity":0.559768695814554}],"inventory_adjustments":[{"column":"status","similarity":0.5585885430147457}],"po_lines":[{"column":"line_total","similarity":0.5528051580745316}],"depreciation_schedules":[{"column":"asset_id","similarity":0.5500261207297255}],"currencies":[{"column":"code","similarity":0.5464221335552627}],"order_lines":[{"column":"line_total","similarity":0.5449514399298908}]},"fused_scores":[{"table":"bank_accounts","fused":0.9012390049451107,"table_sim":0.7329690151560269,"col_score":1.1536439896287365},{"table":"bank_transactions","fused":0.7571805194307678,"table_sim":0.6432688918493359,"col_score":0.9280479608029157},{"table":"account_types","fused":0.7552200559881436,"table_sim":0.631508179872346,"col_score":0.94078787016184},{"table":"chart_of_accounts","fused":0.6774756242666866,"table_sim":0.5912086370703393,"col_score":0.8068761050612078},{"table":"budgets","fused":0.645828722888623,"table_sim":0.554395662919137,"col_score":0.7829783128428519},{"table":"budget_lines","fused":0.5035354290833491,"table_sim":0.5651962639440569,"col_score":0.4110441767922877},{"table":"depreciation_schedules","fused":0.48320007919612473,"table_sim":0.548654608986336,"col_score":0.3850182845108078},{"table":"depreciation_entries","fused":0.3355931379189865,"table_sim":0,"col_score":0.8389828447974661},{"table":"customers","fused":0.33211671993654696,"table_sim":0.5535278665609116,"col_score":0},{"table":"asset_categories","fused":0.33129435462064877,"table_sim":0.5521572577010813,"col_score":0},{"table":"fixed_assets","fused":0.30489999066588347,"table_sim":0,"col_score":0.7622499766647086},{"table":"asset_maintenance","fused":0.3047057200010064,"table_sim":0,"col_score":0.7617643000025158},{"table":"departments","fused":0.22836274839733922,"table_sim":0,"col_score":0.570906870993348},{"table":"purchase_orders","fused":0.22526596050640457,"table_sim":0,"col_score":0.5631649012660114},{"table":"sales_orders","fused":0.22432673132130138,"table_sim":0,"col_score":0.5608168283032534}],"fk_expansion_candidates":30,"fk_expansion_added":2,"fk_expansion_blocked_count":22,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"currencies","reason":"already_selected"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"departments","reason":"already_selected"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"fixed_assets","reason":"max_tables"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"sales_orders","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":50,"total_retrieval_latency_ms":56,"sql_generated":"SELECT b.account_number AS \"Account Number\", c.name AS \"Currency Name\", b.current_balance AS \"Current Balance\" FROM bank_accounts b JOIN currencies c ON b.currency_id = c.currency_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":5,"total_latency_ms":955}
{"timestamp":"2026-01-29T21:23:06.831Z","query_id":"92325e3e-ada6-4a51-9335-ada580acc0c6","question":"How many projects are currently active?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["project_tasks","projects","project_phases","project_milestones","project_resources","project_expenses","positions","project_budgets","products","product_categories"],"tables_from_table_retrieval":8,"tables_from_column_only":10,"tables_from_fk_expansion":0,"table_scores":[{"table":"project_tasks","similarity":0.650275467821731},{"table":"project_tasks","similarity":0.6324363750327547},{"table":"project_phases","similarity":0.6314559839975916},{"table":"projects","similarity":0.6310645209358304},{"table":"project_milestones","similarity":0.6170314556998037},{"table":"project_phases","similarity":0.6128862225489412},{"table":"project_milestones","similarity":0.6077049222719266},{"table":"projects","similarity":0.6020298260872147},{"table":"project_resources","similarity":0.6015867769428557},{"table":"project_resources","similarity":0.5959055344150135},{"table":"project_budgets","similarity":0.5892063991800344},{"table":"project_budgets","similarity":0.580219953565682},{"table":"project_expenses","similarity":0.5772651642993043},{"table":"project_expenses","similarity":0.5696442071698902},{"table":"positions","similarity":0.5644568182612411}],"column_hits_per_table":{"projects":11,"project_tasks":9,"project_phases":8,"project_milestones":8,"products":1,"positions":1,"project_resources":2,"product_categories":1,"project_expenses":1,"employees":1,"training_courses":1,"warehouses":1,"business_units":1,"vendors":1,"cost_centers":1,"customers":1,"fixed_assets":1},"top_columns_per_table":{"projects":[{"column":"status","similarity":0.6952554925044898},{"column":"start_date","similarity":0.6596027658706693},{"column":"actual_end_date","similarity":0.6401830267542961}],"project_tasks":[{"column":"status","similarity":0.6606100908218507},{"column":"completed_date","similarity":0.6368229786219834},{"column":"start_date","similarity":0.6292582567736982}],"project_phases":[{"column":"status","similarity":0.6604885270610856},{"column":"start_date","similarity":0.6275125782071443},{"column":"end_date","similarity":0.6163385340144646}],"project_milestones":[{"column":"completed_date","similarity":0.6338543569092513},{"column":"is_billable","similarity":0.6066078433244196},{"column":"due_date","similarity":0.601484675349934}],"products":[{"column":"is_active","similarity":0.629479953126807}],"positions":[{"column":"is_active","similarity":0.619668256339286}],"project_resources":[{"column":"start_date","similarity":0.6175570072174423},{"column":"end_date","similarity":0.605459362777849}],"product_categories":[{"column":"is_active","similarity":0.6174448230737236}],"project_expenses":[{"column":"status","similarity":0.6174103092825096}],"employees":[{"column":"is_active","similarity":0.6056786473130706}],"training_courses":[{"column":"is_active","similarity":0.5954094641374467}],"warehouses":[{"column":"is_active","similarity":0.5938282349648681}],"business_units":[{"column":"is_active","similarity":0.5882189740487279}],"vendors":[{"column":"is_active","similarity":0.5817936740365313}],"cost_centers":[{"column":"is_active","similarity":0.5775357194130835}],"customers":[{"column":"is_active","similarity":0.5750701102281962}],"fixed_assets":[{"column":"status","similarity":0.5743195300084423}]},"fused_scores":[{"table":"project_tasks","fused":0.7600426678231859,"table_sim":0.6324363750327547,"col_score":0.9514521070088325},{"table":"projects","fused":0.7530956073514559,"table_sim":0.6020298260872147,"col_score":0.9796942792478174},{"table":"project_phases","fused":0.7420044716151154,"table_sim":0.6128862225489412,"col_score":0.9356818452143767},{"table":"project_milestones","fused":0.7394862647917404,"table_sim":0.6077049222719266,"col_score":0.9371582785714612},{"table":"project_resources","fused":0.7256579960915548,"table_sim":0.5959055344150135,"col_score":0.9202866886063668},{"table":"project_expenses","fused":0.5146614109010368,"table_sim":0.5696442071698902,"col_score":0.4321872164977567},{"table":"positions","fused":0.5121812027317447,"table_sim":0.5644568182612411,"col_score":0.43376777943750017},{"table":"project_budgets","fused":0.3481319721394092,"table_sim":0.580219953565682,"col_score":0},{"table":"products","fused":0.176254386875506,"table_sim":0,"col_score":0.4406359671887649},{"table":"product_categories","fused":0.1728845504606426,"table_sim":0,"col_score":0.4322113761516065},{"table":"employees","fused":0.16959002124765976,"table_sim":0,"col_score":0.4239750531191494},{"table":"training_courses","fused":0.16671464995848506,"table_sim":0,"col_score":0.41678662489621265},{"table":"warehouses","fused":0.16627190579016307,"table_sim":0,"col_score":0.41567976447540766},{"table":"business_units","fused":0.16470131273364383,"table_sim":0,"col_score":0.41175328183410953},{"table":"vendors","fused":0.16290222873022875,"table_sim":0,"col_score":0.40725557182557187}],"fk_expansion_candidates":34,"fk_expansion_added":0,"fk_expansion_blocked_count":34,"fk_expansion_blocked":[{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"product_suppliers","reason":"no_evidence"},{"table":"product_suppliers","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":42,"total_retrieval_latency_ms":49,"sql_generated":"SELECT COUNT(*) FROM projects WHERE status = 'active';","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":413}
{"timestamp":"2026-01-29T21:23:07.244Z","query_id":"2c0f2c80-5398-40d6-96cf-4f5da59b4fa3","question":"List all fixed assets with their purchase cost","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["fixed_assets","asset_maintenance","asset_categories","purchase_orders","asset_transfers","purchase_requisitions","depreciation_schedules","products","project_budgets","sales_orders","asset_locations","maintenance_types"],"tables_from_table_retrieval":8,"tables_from_column_only":9,"tables_from_fk_expansion":2,"table_scores":[{"table":"fixed_assets","similarity":0.7343654134072136},{"table":"fixed_assets","similarity":0.7209497053888301},{"table":"asset_maintenance","similarity":0.6308058404117752},{"table":"asset_maintenance","similarity":0.6179697125570032},{"table":"asset_categories","similarity":0.5912281177120349},{"table":"asset_categories","similarity":0.5908629711394363},{"table":"depreciation_schedules","similarity":0.5847667500423093},{"table":"depreciation_schedules","similarity":0.5814813777494169},{"table":"asset_transfers","similarity":0.5814400142884585},{"table":"asset_transfers","similarity":0.5810308594815269},{"table":"purchase_requisitions","similarity":0.56260771171081},{"table":"purchase_requisitions","similarity":0.5569747421146416},{"table":"asset_locations","similarity":0.5565794376806025},{"table":"purchase_orders","similarity":0.5543766107156626},{"table":"purchase_orders","similarity":0.5506831817049027}],"column_hits_per_table":{"fixed_assets":17,"asset_maintenance":8,"asset_transfers":2,"purchase_orders":5,"depreciation_entries":1,"depreciation_schedules":1,"maintenance_types":1,"purchase_requisitions":3,"asset_categories":2,"products":2,"project_expenses":1,"project_budgets":2,"product_suppliers":1,"sales_orders":2,"budgets":1,"projects":1},"top_columns_per_table":{"fixed_assets":[{"column":"purchase_cost","similarity":0.8336730962249834},{"column":"purchase_date","similarity":0.757030591227503},{"column":"disposal_amount","similarity":0.7115957358886795}],"asset_maintenance":[{"column":"cost","similarity":0.7001413961532815},{"column":"asset_id","similarity":0.646620164429287},{"column":"status","similarity":0.623064430931896}],"asset_transfers":[{"column":"asset_id","similarity":0.6507271021855611},{"column":"reason","similarity":0.5954539547440019}],"purchase_orders":[{"column":"total","similarity":0.6201708065577443},{"column":"shipping_cost","similarity":0.6103074039927893},{"column":"subtotal","similarity":0.592057979964163}],"depreciation_entries":[{"column":"asset_id","similarity":0.6167046419250045}],"depreciation_schedules":[{"column":"asset_id","similarity":0.6131913844659764}],"maintenance_types":[{"column":"estimated_cost","similarity":0.6035554909402351}],"purchase_requisitions":[{"column":"status","similarity":0.5957030209752325},{"column":"notes","similarity":0.579593954206422},{"column":"requisition_number","similarity":0.5641816400766758}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.5901071514451579},{"column":"depreciation_method","similarity":0.5734492552613173}],"products":[{"column":"unit_cost","similarity":0.5893978216060566},{"column":"list_price","similarity":0.5715240580401271}],"project_expenses":[{"column":"amount","similarity":0.5714967061817042}],"project_budgets":[{"column":"planned_amount","similarity":0.5691947438967756},{"column":"actual_amount","similarity":0.5658605972140979}],"product_suppliers":[{"column":"unit_cost","similarity":0.5664134865556345}],"sales_orders":[{"column":"total","similarity":0.5647711756811595},{"column":"shipping_cost","similarity":0.5642246655101619}],"budgets":[{"column":"total_amount","similarity":0.5646227718053173}],"projects":[{"column":"budget","similarity":0.5640102092352354}]},"fused_scores":[{"table":"fixed_assets","fused":0.917445179968792,"table_sim":0.7209497053888301,"col_score":1.212188391838735},{"table":"asset_maintenance","fused":0.7733901622742586,"table_sim":0.6179697125570032,"col_score":1.0065208368501417},{"table":"asset_categories","fused":0.7052504943139885,"table_sim":0.5908629711394363,"col_score":0.8768317790758166},{"table":"purchase_orders","fused":0.7005397124445971,"table_sim":0.5506831817049027,"col_score":0.9253245085541388},{"table":"asset_transfers","fused":0.6779018918924955,"table_sim":0.5810308594815269,"col_score":0.8232084405089483},{"table":"purchase_requisitions","fused":0.6432559242359879,"table_sim":0.5569747421146416,"col_score":0.7726776974180072},{"table":"depreciation_schedules","fused":0.5205824143001235,"table_sim":0.5814813777494169,"col_score":0.4292339691261835},{"table":"products","fused":0.35006394025044807,"table_sim":0,"col_score":0.8751598506261201},{"table":"project_budgets","fused":0.34085001700152984,"table_sim":0,"col_score":0.8521250425038245},{"table":"sales_orders","fused":0.3387534033744962,"table_sim":0,"col_score":0.8468835084362405},{"table":"asset_locations","fused":0.33394766260836145,"table_sim":0.5565794376806025,"col_score":0},{"table":"maintenance_types","fused":0.24142219637609405,"table_sim":0,"col_score":0.6035554909402351},{"table":"project_expenses","fused":0.2285986824726817,"table_sim":0,"col_score":0.5714967061817042},{"table":"product_suppliers","fused":0.2265653946222538,"table_sim":0,"col_score":0.5664134865556345},{"table":"budgets","fused":0.22584910872212693,"table_sim":0,"col_score":0.5646227718053173}],"fk_expansion_candidates":50,"fk_expansion_added":2,"fk_expansion_blocked_count":42,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"asset_locations","reason":"already_selected"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"maintenance_types","reason":"already_selected"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"product_suppliers","reason":"max_tables"},{"table":"product_suppliers","reason":"max_tables"},{"table":"projects","reason":"max_tables"},{"table":"projects","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":21,"total_retrieval_latency_ms":27,"sql_generated":"SELECT f.asset_id AS asset_id, p.po_number AS po_number, f.purchase_cost AS purchase_cost FROM fixed_assets f JOIN purchase_orders p ON f.po_id = p.po_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":0,"total_latency_ms":921}
{"timestamp":"2026-01-29T21:23:08.165Z","query_id":"1ed1d2a7-31ba-460f-b3c3-b6389d76d72b","question":"What are all the available leave types?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["leave_types","leave_requests","maintenance_types","account_types","employment_history","employee_benefits","positions","benefit_types","employees","asset_maintenance","inventory_transactions","sales_opportunities"],"tables_from_table_retrieval":9,"tables_from_column_only":14,"tables_from_fk_expansion":2,"table_scores":[{"table":"leave_types","similarity":0.8153120238871665},{"table":"leave_types","similarity":0.7907961003152969},{"table":"leave_requests","similarity":0.7190219066933456},{"table":"leave_requests","similarity":0.7143778015997992},{"table":"maintenance_types","similarity":0.6503054333039201},{"table":"maintenance_types","similarity":0.6481400096068088},{"table":"benefit_types","similarity":0.6322231020121719},{"table":"benefit_types","similarity":0.6269933285396667},{"table":"account_types","similarity":0.6207464005230485},{"table":"account_types","similarity":0.6192881819056906},{"table":"positions","similarity":0.5752929625327803},{"table":"employee_benefits","similarity":0.5713679218642078},{"table":"employment_history","similarity":0.5660594097075526},{"table":"employees","similarity":0.5660053394491918},{"table":"positions","similarity":0.5651833351398399}],"column_hits_per_table":{"leave_types":5,"leave_requests":10,"maintenance_types":5,"benefit_types":4,"employment_history":2,"account_types":4,"employee_training":1,"asset_maintenance":2,"employee_benefits":2,"timesheets":1,"sales_orders":1,"positions":2,"employees":1,"fixed_assets":1,"purchase_requisitions":1,"vendor_invoices":1,"chart_of_accounts":1,"inventory_transactions":1,"bank_transactions":1,"stock_transfers":1,"sales_quotes":1,"sales_opportunities":1,"inventory_adjustments":1},"top_columns_per_table":{"leave_types":[{"column":"is_paid","similarity":0.7612464678618273},{"column":"days_allowed","similarity":0.7601500998124394},{"column":"leave_type_id","similarity":0.7404804728319255}],"leave_requests":[{"column":"status","similarity":0.7396795189172545},{"column":"leave_type_id","similarity":0.7183447876062181},{"column":"days_requested","similarity":0.6924150250540297}],"maintenance_types":[{"column":"description","similarity":0.6353856248912257},{"column":"name","similarity":0.6275362006518306},{"column":"type_id","similarity":0.6101423562940161}],"benefit_types":[{"column":"is_active","similarity":0.6202574050902354},{"column":"name","similarity":0.613970586164775},{"column":"description","similarity":0.609536513053858}],"employment_history":[{"column":"reason_for_leaving","similarity":0.6149236134137261},{"column":"position","similarity":0.5557487204215079}],"account_types":[{"column":"normal_balance","similarity":0.608424842651833},{"column":"category","similarity":0.5965050820828129},{"column":"name","similarity":0.5862630113315467}],"employee_training":[{"column":"status","similarity":0.595192045369969}],"asset_maintenance":[{"column":"status","similarity":0.58756583227351},{"column":"maintenance_type_id","similarity":0.5836180049613157}],"employee_benefits":[{"column":"benefit_type_id","similarity":0.5860432161043488},{"column":"end_date","similarity":0.5609092285346757}],"timesheets":[{"column":"status","similarity":0.5817907952742775}],"sales_orders":[{"column":"status","similarity":0.5754670907458482}],"positions":[{"column":"is_active","similarity":0.5753948179884102},{"column":"title","similarity":0.5728139979402822}],"employees":[{"column":"termination_date","similarity":0.570986454201654}],"fixed_assets":[{"column":"status","similarity":0.5698997906492048}],"purchase_requisitions":[{"column":"status","similarity":0.5624648292687259}],"vendor_invoices":[{"column":"status","similarity":0.5603695727011545}],"chart_of_accounts":[{"column":"account_type_id","similarity":0.5595433836798172}],"inventory_transactions":[{"column":"transaction_type","similarity":0.5589784724046583}],"bank_transactions":[{"column":"transaction_type","similarity":0.5583149392151486}],"stock_transfers":[{"column":"status","similarity":0.556932657372917}],"sales_quotes":[{"column":"status","similarity":0.5558161462227229}],"sales_opportunities":[{"column":"source","similarity":0.5553635771952049}],"inventory_adjustments":[{"column":"status","similarity":0.5541098667634835}]},"fused_scores":[{"table":"leave_types","fused":0.92249438434967,"table_sim":0.7907961003152969,"col_score":1.1200418104012295},{"table":"leave_requests","fused":0.8400325985595832,"table_sim":0.7143778015997992,"col_score":1.0285147939992592},{"table":"maintenance_types","fused":0.7441095655709671,"table_sim":0.6481400096068088,"col_score":0.8880638995172044},{"table":"account_types","fused":0.7342438626207102,"table_sim":0.6192881819056906,"col_score":0.9066773836932396},{"table":"employment_history","fused":0.6967548352743236,"table_sim":0.5660594097075526,"col_score":0.8927979736244801},{"table":"employee_benefits","fused":0.6492304947870038,"table_sim":0.5713679218642078,"col_score":0.7660243541711979},{"table":"positions","fused":0.6487908747783943,"table_sim":0.5651833351398399,"col_score":0.7742021842362258},{"table":"benefit_types","fused":0.6358239526121345,"table_sim":0.6269933285396667,"col_score":0.649069888720836},{"table":"employees","fused":0.5679977853501766,"table_sim":0.5660053394491918,"col_score":0.570986454201654},{"table":"asset_maintenance","fused":0.24622495373116698,"table_sim":0,"col_score":0.6155623843279174},{"table":"inventory_transactions","fused":0.2235913889618633,"table_sim":0,"col_score":0.5589784724046583},{"table":"bank_transactions","fused":0.22332597568605947,"table_sim":0,"col_score":0.5583149392151486},{"table":"sales_opportunities","fused":0.22214543087808197,"table_sim":0,"col_score":0.5553635771952049},{"table":"employee_training","fused":0.1666537727035913,"table_sim":0,"col_score":0.41663443175897824},{"table":"timesheets","fused":0.1629014226767977,"table_sim":0,"col_score":0.4072535566919942}],"fk_expansion_candidates":64,"fk_expansion_added":2,"fk_expansion_blocked_count":60,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_transactions","reason":"already_selected"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"sales_opportunities","reason":"already_selected"},{"table":"sales_orders","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":26,"total_retrieval_latency_ms":33,"sql_generated":"SELECT lt.name FROM leave_types AS lt;","tables_used_in_sql":[],"explain_result":"success","rows_returned":8,"total_latency_ms":400}
{"timestamp":"2026-01-29T21:23:08.565Z","query_id":"4143f55b-00f2-4eb0-9c13-b36c5c3a1cca","question":"List all training courses that are mandatory","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["training_courses","employee_training","certifications","employee_certifications","leave_types","maintenance_types","emergency_contacts","product_suppliers","account_types","purchase_requisitions"],"tables_from_table_retrieval":8,"tables_from_column_only":13,"tables_from_fk_expansion":0,"table_scores":[{"table":"training_courses","similarity":0.7873697953142612},{"table":"training_courses","similarity":0.7832587829851695},{"table":"employee_training","similarity":0.6622740415541937},{"table":"employee_training","similarity":0.6570057454586046},{"table":"certifications","similarity":0.5965030477585557},{"table":"certifications","similarity":0.5900939338505992},{"table":"employee_certifications","similarity":0.5760162077924663},{"table":"employee_certifications","similarity":0.5662772014922313},{"table":"maintenance_types","similarity":0.5048094520010439},{"table":"maintenance_types","similarity":0.49281971341629327},{"table":"leave_types","similarity":0.49050237109639017},{"table":"leave_types","similarity":0.49016105575765045},{"table":"account_types","similarity":0.4862165415745334},{"table":"emergency_contacts","similarity":0.4738555676585048},{"table":"account_types","similarity":0.47279576060367634}],"column_hits_per_table":{"training_courses":7,"employee_training":7,"certifications":5,"employee_certifications":6,"leave_types":3,"sales_orders":1,"purchase_requisitions":2,"maintenance_types":5,"emergency_contacts":1,"project_milestones":2,"benefit_types":1,"business_units":1,"product_suppliers":2,"units_of_measure":1,"requisition_lines":1,"asset_maintenance":1,"project_resources":1,"project_tasks":1,"vendor_contacts":1,"reorder_rules":1},"top_columns_per_table":{"training_courses":[{"column":"is_mandatory","similarity":0.814547688206976},{"column":"description","similarity":0.7210520541882913},{"column":"is_active","similarity":0.6998661786347449}],"employee_training":[{"column":"course_id","similarity":0.6460785266021282},{"column":"scheduled_date","similarity":0.6379019386890121},{"column":"completion_date","similarity":0.6234909008328433}],"certifications":[{"column":"description","similarity":0.6095125615154784},{"column":"issuing_body","similarity":0.57698393195182},{"column":"validity_years","similarity":0.5591744479508656}],"employee_certifications":[{"column":"certificate_number","similarity":0.5514558044255654},{"column":"certification_id","similarity":0.549379266890378},{"column":"cert_id","similarity":0.5486469080412996}],"leave_types":[{"column":"requires_approval","similarity":0.536554743713736},{"column":"is_paid","similarity":0.5021468966647877},{"column":"days_allowed","similarity":0.4821299724271749}],"sales_orders":[{"column":"required_date","similarity":0.5223999513586965}],"purchase_requisitions":[{"column":"required_date","similarity":0.5174102340873212},{"column":"notes","similarity":0.4846003356482508}],"maintenance_types":[{"column":"description","similarity":0.5119510628120414},{"column":"frequency_months","similarity":0.4922702669089287},{"column":"estimated_cost","similarity":0.48121611757654414}],"emergency_contacts":[{"column":"is_primary","similarity":0.5002447464244713}],"project_milestones":[{"column":"is_billable","similarity":0.49541387707350004},{"column":"description","similarity":0.4782212883173893}],"benefit_types":[{"column":"is_active","similarity":0.4905257359031393}],"business_units":[{"column":"is_active","similarity":0.4871697428534034}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.48362340098118217},{"column":"is_preferred","similarity":0.4765496659303714}],"units_of_measure":[{"column":"base_uom_id","similarity":0.4831180064251368}],"requisition_lines":[{"column":"quantity","similarity":0.48169140071868866}],"asset_maintenance":[{"column":"notes","similarity":0.47855041994114966}],"project_resources":[{"column":"hourly_rate","similarity":0.47812599772471986}],"project_tasks":[{"column":"priority","similarity":0.4780592694168637}],"vendor_contacts":[{"column":"is_primary","similarity":0.477243459923855}],"reorder_rules":[{"column":"max_quantity","similarity":0.4768456096343272}]},"fused_scores":[{"table":"training_courses","fused":0.9347595035621551,"table_sim":0.7832587829851695,"col_score":1.1620105844276334},{"table":"employee_training","fused":0.7740624029173362,"table_sim":0.6570057454586046,"col_score":0.9496473891054338},{"table":"certifications","fused":0.6966848226812605,"table_sim":0.5900939338505992,"col_score":0.8565711559272527},{"table":"employee_certifications","fused":0.6688391740505231,"table_sim":0.5662772014922313,"col_score":0.8226821328879609},{"table":"leave_types","fused":0.6051445254255197,"table_sim":0.49016105575765045,"col_score":0.7776197299273235},{"table":"maintenance_types","fused":0.5888431583286563,"table_sim":0.49281971341629327,"col_score":0.7328783256972008},{"table":"emergency_contacts","fused":0.48441123916489137,"table_sim":0.4738555676585048,"col_score":0.5002447464244713},{"table":"product_suppliers","fused":0.2887592935785472,"table_sim":0,"col_score":0.7218982339463679},{"table":"account_types","fused":0.2836774563622058,"table_sim":0.47279576060367634,"col_score":0},{"table":"purchase_requisitions","fused":0.27480814062568365,"table_sim":0,"col_score":0.687020351564209},{"table":"project_milestones","fused":0.26511653119383455,"table_sim":0,"col_score":0.6627913279845863},{"table":"sales_orders","fused":0.20895998054347864,"table_sim":0,"col_score":0.5223999513586965},{"table":"requisition_lines","fused":0.19267656028747548,"table_sim":0,"col_score":0.48169140071868866},{"table":"project_resources","fused":0.19125039908988795,"table_sim":0,"col_score":0.47812599772471986},{"table":"project_tasks","fused":0.1912237077667455,"table_sim":0,"col_score":0.4780592694168637}],"fk_expansion_candidates":18,"fk_expansion_added":0,"fk_expansion_blocked_count":18,"fk_expansion_blocked":[{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":40,"total_retrieval_latency_ms":47,"sql_generated":"SELECT tc.name AS course_name, tc.duration_hours, tc.cost, tc.is_active FROM training_courses tc WHERE tc.is_mandatory = TRUE;","tables_used_in_sql":[],"explain_result":"success","rows_returned":4,"total_latency_ms":720}
{"timestamp":"2026-01-29T21:23:09.285Z","query_id":"4f32051a-a83d-49d2-8f70-492f253ee80d","question":"What are the different opportunity stages?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["opportunity_stages","sales_opportunities","project_phases","project_tasks","positions","projects","asset_categories","benefit_types","project_milestones","inventory_levels","sales_quotes","task_assignments"],"tables_from_table_retrieval":9,"tables_from_column_only":17,"tables_from_fk_expansion":2,"table_scores":[{"table":"opportunity_stages","similarity":0.8221357699980866},{"table":"opportunity_stages","similarity":0.8176629035369016},{"table":"sales_opportunities","similarity":0.705452578214936},{"table":"sales_opportunities","similarity":0.6734243089266532},{"table":"project_phases","similarity":0.5910011427333453},{"table":"project_tasks","similarity":0.5856436723604402},{"table":"project_phases","similarity":0.5850374728279742},{"table":"project_tasks","similarity":0.5669780419060751},{"table":"positions","similarity":0.5469043796027597},{"table":"positions","similarity":0.5399052196547368},{"table":"asset_categories","similarity":0.5283525308586682},{"table":"benefit_types","similarity":0.5272155201501428},{"table":"benefit_types","similarity":0.5259100173290491},{"table":"project_milestones","similarity":0.5171558130474864},{"table":"inventory_levels","similarity":0.5163777584176084}],"column_hits_per_table":{"opportunity_stages":6,"sales_opportunities":11,"project_phases":7,"sales_quotes":2,"project_tasks":4,"projects":3,"positions":1,"stock_transfers":1,"employment_history":1,"vendor_invoices":1,"sales_orders":1,"purchase_requisitions":1,"performance_reviews":1,"timesheets":1,"vendor_contacts":2,"employee_training":1,"purchase_orders":1,"task_assignments":1,"project_expenses":1,"journal_entries":1,"warehouse_locations":1,"leave_requests":1},"top_columns_per_table":{"opportunity_stages":[{"column":"name","similarity":0.7995522492175101},{"column":"probability","similarity":0.775558879369367},{"column":"sequence","similarity":0.7708343654238288}],"sales_opportunities":[{"column":"stage_id","similarity":0.7059415983640481},{"column":"source","similarity":0.6711321363690625},{"column":"name","similarity":0.6452724499361098}],"project_phases":[{"column":"status","similarity":0.6232576702180161},{"column":"description","similarity":0.6034091478912608},{"column":"start_date","similarity":0.6030372572830889}],"sales_quotes":[{"column":"opportunity_id","similarity":0.6147463179178642},{"column":"status","similarity":0.54330303115206}],"project_tasks":[{"column":"priority","similarity":0.5858528199183252},{"column":"status","similarity":0.5730801962534186},{"column":"phase_id","similarity":0.5607037044154554}],"projects":[{"column":"priority","similarity":0.5810811398487153},{"column":"status","similarity":0.5620351291324196},{"column":"start_date","similarity":0.5420441244772041}],"positions":[{"column":"title","similarity":0.5721393185558201}],"stock_transfers":[{"column":"status","similarity":0.5591229145906735}],"employment_history":[{"column":"position","similarity":0.5582251887233417}],"vendor_invoices":[{"column":"status","similarity":0.5574741035348497}],"sales_orders":[{"column":"status","similarity":0.5556357399820548}],"purchase_requisitions":[{"column":"status","similarity":0.5554818743499551}],"performance_reviews":[{"column":"review_period_start","similarity":0.5509040784070887}],"timesheets":[{"column":"status","similarity":0.5496387852297092}],"vendor_contacts":[{"column":"title","similarity":0.5480716599019128},{"column":"first_name","similarity":0.5390129346005467}],"employee_training":[{"column":"status","similarity":0.5462098751481785}],"purchase_orders":[{"column":"status","similarity":0.5452189780991694}],"task_assignments":[{"column":"role","similarity":0.5440927669761538}],"project_expenses":[{"column":"status","similarity":0.5419099926956821}],"journal_entries":[{"column":"status","similarity":0.541055083798884}],"warehouse_locations":[{"column":"aisle","similarity":0.5391761865875615}],"leave_requests":[{"column":"status","similarity":0.5379293041870119}]},"fused_scores":[{"table":"opportunity_stages","fused":0.9549881669546535,"table_sim":0.8176629035369016,"col_score":1.1609760620812812},{"table":"sales_opportunities","fused":0.8004357023749251,"table_sim":0.6734243089266532,"col_score":0.9909527925473333},{"table":"project_phases","fused":0.7083626528142624,"table_sim":0.5850374728279742,"col_score":0.8933504227936944},{"table":"project_tasks","fused":0.6842981253519156,"table_sim":0.5669780419060751,"col_score":0.8602782505206762},{"table":"positions","fused":0.5527988592151701,"table_sim":0.5399052196547368,"col_score":0.5721393185558201},{"table":"projects","fused":0.340841280834927,"table_sim":0,"col_score":0.8521032020873174},{"table":"asset_categories","fused":0.3170115185152009,"table_sim":0.5283525308586682,"col_score":0},{"table":"benefit_types","fused":0.3155460103974294,"table_sim":0.5259100173290491,"col_score":0},{"table":"project_milestones","fused":0.3102934878284918,"table_sim":0.5171558130474864,"col_score":0},{"table":"inventory_levels","fused":0.309826655050565,"table_sim":0.5163777584176084,"col_score":0},{"table":"vendor_contacts","fused":0.2946904748048416,"table_sim":0,"col_score":0.736726187012104},{"table":"sales_quotes","fused":0.24819139337829035,"table_sim":0,"col_score":0.6204784834457259},{"table":"employment_history","fused":0.2232900754893367,"table_sim":0,"col_score":0.5582251887233417},{"table":"performance_reviews","fused":0.2203616313628355,"table_sim":0,"col_score":0.5509040784070887},{"table":"task_assignments","fused":0.21763710679046155,"table_sim":0,"col_score":0.5440927669761538}],"fk_expansion_candidates":28,"fk_expansion_added":2,"fk_expansion_blocked_count":22,"fk_expansion_blocked":[{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"project_budgets","reason":"no_evidence"},{"table":"project_budgets","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"sales_quotes","reason":"already_selected"},{"table":"task_assignments","reason":"already_selected"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"warehouse_locations","reason":"max_tables"},{"table":"warehouse_locations","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":52,"total_retrieval_latency_ms":59,"sql_generated":"SELECT o.name AS stage_name FROM sales_opportunities s JOIN opportunity_stages o ON s.stage_id = o.stage_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":500,"total_latency_ms":706}
{"timestamp":"2026-01-29T21:23:09.991Z","query_id":"173488d7-d262-4893-a4c8-66a88aa7bfbf","question":"List all countries in the system","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["countries","states_provinces","currencies","tax_rates","sales_regions","cities","bank_accounts","sales_territories","fiscal_periods","opportunity_stages","bank_transactions","chart_of_accounts"],"tables_from_table_retrieval":8,"tables_from_column_only":16,"tables_from_fk_expansion":2,"table_scores":[{"table":"countries","similarity":0.7023951106153551},{"table":"countries","similarity":0.7008865097920517},{"table":"states_provinces","similarity":0.6734638308582259},{"table":"states_provinces","similarity":0.6591125545328295},{"table":"tax_rates","similarity":0.6116670532927957},{"table":"tax_rates","similarity":0.6061652945068768},{"table":"currencies","similarity":0.6020049493436493},{"table":"sales_territories","similarity":0.5947794602061558},{"table":"sales_territories","similarity":0.5849505696482399},{"table":"currencies","similarity":0.5771716778997639},{"table":"sales_regions","similarity":0.5764615012158474},{"table":"sales_regions","similarity":0.5687569498363646},{"table":"cities","similarity":0.5661717685088749},{"table":"cities","similarity":0.5643183199830137},{"table":"bank_accounts","similarity":0.5493286779600007}],"column_hits_per_table":{"countries":4,"states_provinces":4,"tax_rates":3,"sales_regions":3,"currencies":5,"sales_territories":3,"cities":2,"fiscal_periods":5,"departments":1,"opportunity_stages":3,"bank_accounts":2,"certifications":1,"customers":1,"bank_transactions":2,"chart_of_accounts":2,"purchase_orders":1,"depreciation_schedules":1,"asset_categories":1,"employee_certifications":1,"budgets":1,"purchase_requisitions":1,"business_units":1,"sales_orders":1,"units_of_measure":1},"top_columns_per_table":{"countries":[{"column":"iso_code","similarity":0.7083775622560948},{"column":"country_id","similarity":0.7028095022039754},{"column":"name","similarity":0.6970026208946949}],"states_provinces":[{"column":"country_id","similarity":0.6563023532078734},{"column":"abbreviation","similarity":0.610560847165871},{"column":"state_id","similarity":0.6086767321787677}],"tax_rates":[{"column":"country_id","similarity":0.6387496649533285},{"column":"is_active","similarity":0.5264660070125073},{"column":"tax_type","similarity":0.5228388468873347}],"sales_regions":[{"column":"region_id","similarity":0.5880376169487528},{"column":"name","similarity":0.5823393740796537},{"column":"target_revenue","similarity":0.5801802361991993}],"currencies":[{"column":"code","similarity":0.5822359917761808},{"column":"symbol","similarity":0.581336012492315},{"column":"currency_id","similarity":0.5776652580200841}],"sales_territories":[{"column":"territory_id","similarity":0.579860320592295},{"column":"region_id","similarity":0.5750186636565423},{"column":"name","similarity":0.5543913807302997}],"cities":[{"column":"state_id","similarity":0.561394466233867},{"column":"postal_code","similarity":0.5370910514815247}],"fiscal_periods":[{"column":"period_id","similarity":0.5496379201904278},{"column":"period_number","similarity":0.5424020784794457},{"column":"is_closed","similarity":0.5331943381268962}],"departments":[{"column":"budget","similarity":0.548192913887592}],"opportunity_stages":[{"column":"is_won","similarity":0.5424096057947908},{"column":"is_closed","similarity":0.5277608595146904},{"column":"stage_id","similarity":0.5252744287271072}],"bank_accounts":[{"column":"currency_id","similarity":0.5421220565667533},{"column":"account_number","similarity":0.5251662683345438}],"certifications":[{"column":"issuing_body","similarity":0.5363419232957559}],"customers":[{"column":"currency_id","similarity":0.5360168510784518}],"bank_transactions":[{"column":"reconciled","similarity":0.5347524839098835},{"column":"reference","similarity":0.522643358832243}],"chart_of_accounts":[{"column":"account_number","similarity":0.5329009773739953},{"column":"is_active","similarity":0.5235896571283579}],"purchase_orders":[{"column":"total","similarity":0.5290507808378154}],"depreciation_schedules":[{"column":"depreciation_method","similarity":0.5287294649500551}],"asset_categories":[{"column":"depreciation_method","similarity":0.5276413708583213}],"employee_certifications":[{"column":"certificate_number","similarity":0.5267762383677346}],"budgets":[{"column":"total_amount","similarity":0.5266785560945311}],"purchase_requisitions":[{"column":"requisition_number","similarity":0.5257685863079752}],"business_units":[{"column":"is_active","similarity":0.523602018511161}],"sales_orders":[{"column":"total","similarity":0.5224556777614774}],"units_of_measure":[{"column":"conversion_factor","similarity":0.5222786094381444}]},"fused_scores":[{"table":"countries","fused":0.8427695063608152,"table_sim":0.7008865097920517,"col_score":1.0555940012139602},{"table":"states_provinces","fused":0.7315742010351484,"table_sim":0.6591125545328295,"col_score":0.8402666707886267},{"table":"currencies","fused":0.6954646059487937,"table_sim":0.5771716778997639,"col_score":0.8729039980223383},{"table":"tax_rates","fused":0.6622596685525259,"table_sim":0.6061652945068768,"col_score":0.7464012296209996},{"table":"sales_regions","fused":0.6556515307543238,"table_sim":0.5687569498363646,"col_score":0.7859934021312628},{"table":"cities","fused":0.6320226378551594,"table_sim":0.5643183199830137,"col_score":0.7335791146633781},{"table":"bank_accounts","fused":0.6155608020291634,"table_sim":0.5493286779600007,"col_score":0.7149089881329075},{"table":"sales_territories","fused":0.5938338444667024,"table_sim":0.5849505696482399,"col_score":0.6071587566943962},{"table":"fiscal_periods","fused":0.3235996990171575,"table_sim":0,"col_score":0.8089992475428938},{"table":"opportunity_stages","fused":0.32251601422085446,"table_sim":0,"col_score":0.8062900355521361},{"table":"bank_transactions","fused":0.318429665330402,"table_sim":0,"col_score":0.796074163326005},{"table":"chart_of_accounts","fused":0.28646294294756824,"table_sim":0,"col_score":0.7161573573689206},{"table":"departments","fused":0.2192771655550368,"table_sim":0,"col_score":0.548192913887592},{"table":"certifications","fused":0.21453676931830237,"table_sim":0,"col_score":0.5363419232957559},{"table":"purchase_orders","fused":0.21162031233512618,"table_sim":0,"col_score":0.5290507808378154}],"fk_expansion_candidates":22,"fk_expansion_added":2,"fk_expansion_blocked_count":18,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"bank_transactions","reason":"already_selected"},{"table":"budget_lines","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"already_selected"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":52,"total_retrieval_latency_ms":58,"sql_generated":"SELECT c.name AS country_name FROM countries c;","tables_used_in_sql":[],"explain_result":"success","rows_returned":10,"total_latency_ms":386}
{"timestamp":"2026-01-29T21:23:10.377Z","query_id":"42d1c8eb-2ad8-4ae3-90e7-6d81469b35ba","question":"How many departments are there?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["departments","inventory_levels","employees","asset_categories","sales_territories","business_units","positions","budgets","cost_centers","sales_regions","sales_orders","goods_receipts"],"tables_from_table_retrieval":10,"tables_from_column_only":13,"tables_from_fk_expansion":2,"table_scores":[{"table":"departments","similarity":0.6535557627991134},{"table":"departments","similarity":0.6407681888721862},{"table":"positions","similarity":0.5959740852224922},{"table":"positions","similarity":0.5909863911053447},{"table":"cost_centers","similarity":0.574249226454042},{"table":"inventory_levels","similarity":0.5635818909554858},{"table":"cost_centers","similarity":0.562339325750535},{"table":"budgets","similarity":0.5602507290061229},{"table":"sales_territories","similarity":0.5569437466660422},{"table":"employees","similarity":0.5540635075766074},{"table":"sales_territories","similarity":0.5531933158048384},{"table":"asset_categories","similarity":0.5524861703308546},{"table":"business_units","similarity":0.5513385429025497},{"table":"sales_regions","similarity":0.5485391939961575},{"table":"sales_regions","similarity":0.5484119711938432}],"column_hits_per_table":{"departments":6,"positions":1,"budgets":1,"purchase_requisitions":1,"cost_centers":1,"employees":3,"warehouse_locations":4,"inventory_levels":5,"sales_orders":2,"business_units":2,"employee_certifications":1,"countries":2,"receipt_lines":1,"asset_categories":4,"sales_territories":2,"goods_receipts":1,"asset_locations":4,"states_provinces":3,"product_categories":2,"journal_entries":1,"chart_of_accounts":1,"sales_regions":1,"inventory_transactions":1},"top_columns_per_table":{"departments":[{"column":"name","similarity":0.678380475338454},{"column":"department_id","similarity":0.6593894511959907},{"column":"budget","similarity":0.631673223767257}],"positions":[{"column":"department_id","similarity":0.6072106973795759}],"budgets":[{"column":"department_id","similarity":0.5890663072722551}],"purchase_requisitions":[{"column":"department_id","similarity":0.5855616262286726}],"cost_centers":[{"column":"department_id","similarity":0.5801677807148357}],"employees":[{"column":"department_id","similarity":0.5766911086411527},{"column":"phone","similarity":0.5295780565782041},{"column":"employee_number","similarity":0.5251671661617511}],"warehouse_locations":[{"column":"capacity","similarity":0.5507916811505368},{"column":"aisle","similarity":0.5346342650807901},{"column":"bin","similarity":0.5344635750630128}],"inventory_levels":[{"column":"quantity_available","similarity":0.5467954154024948},{"column":"location_id","similarity":0.532130309929655},{"column":"quantity_reserved","similarity":0.5279718840166341}],"sales_orders":[{"column":"order_number","similarity":0.5423432633706802},{"column":"status","similarity":0.5226058429697297}],"business_units":[{"column":"is_active","similarity":0.5413660134598213},{"column":"name","similarity":0.5225405146150363}],"employee_certifications":[{"column":"certificate_number","similarity":0.5375188956698979}],"countries":[{"column":"name","similarity":0.5369300526104707},{"column":"iso_code","similarity":0.5206752985321579}],"receipt_lines":[{"column":"location_id","similarity":0.5363959514134431}],"asset_categories":[{"column":"category_id","similarity":0.5357603627459196},{"column":"depreciation_method","similarity":0.5284195914126985},{"column":"name","similarity":0.5197745476582827}],"sales_territories":[{"column":"territory_id","similarity":0.5346785292416978},{"column":"name","similarity":0.5288174476965474}],"goods_receipts":[{"column":"receipt_number","similarity":0.5337386452781889}],"asset_locations":[{"column":"room","similarity":0.5330969405978414},{"column":"description","similarity":0.5283506129509129},{"column":"building","similarity":0.5225884931150223}],"states_provinces":[{"column":"abbreviation","similarity":0.5328751078215296},{"column":"name","similarity":0.5263993354834775},{"column":"country_id","similarity":0.5203449985844515}],"product_categories":[{"column":"is_active","similarity":0.5291272971983432},{"column":"category_id","similarity":0.5230748940289889}],"journal_entries":[{"column":"entry_number","similarity":0.5229571409622702}],"chart_of_accounts":[{"column":"account_number","similarity":0.522049128691497}],"sales_regions":[{"column":"name","similarity":0.5218640467095127}],"inventory_transactions":[{"column":"location_id","similarity":0.52026154765506}]},"fused_scores":[{"table":"departments","fused":0.7321034693775981,"table_sim":0.6407681888721862,"col_score":0.8691063901357159},{"table":"inventory_levels","fused":0.6624616775376162,"table_sim":0.5635818909554858,"col_score":0.8107813574108118},{"table":"employees","fused":0.6493027604095962,"table_sim":0.5540635075766074,"col_score":0.7921616396590796},{"table":"asset_categories","fused":0.6466535788756695,"table_sim":0.5524861703308546,"col_score":0.7879046916928921},{"table":"sales_territories","fused":0.555660420348095,"table_sim":0.5531933158048384,"col_score":0.55936107716298},{"table":"business_units","fused":0.5555412815563848,"table_sim":0.5513385429025497,"col_score":0.5618453895371376},{"table":"positions","fused":0.524610829929488,"table_sim":0.5909863911053447,"col_score":0.4250474881657031},{"table":"budgets","fused":0.5010890034399051,"table_sim":0.5602507290061229,"col_score":0.4123464150905785},{"table":"cost_centers","fused":0.499850574050475,"table_sim":0.562339325750535,"col_score":0.40611744650038495},{"table":"sales_regions","fused":0.47516911579496945,"table_sim":0.5484119711938432,"col_score":0.36530483269665887},{"table":"warehouse_locations","fused":0.32724352547637275,"table_sim":0,"col_score":0.8181088136909318},{"table":"asset_locations","fused":0.3177564748621411,"table_sim":0,"col_score":0.7943911871553526},{"table":"sales_orders","fused":0.29010212336403424,"table_sim":0,"col_score":0.7252553084100856},{"table":"states_provinces","fused":0.2868459500962987,"table_sim":0,"col_score":0.7171148752407467},{"table":"countries","fused":0.2834403267783291,"table_sim":0,"col_score":0.7086008169458227}],"fk_expansion_candidates":68,"fk_expansion_added":2,"fk_expansion_blocked_count":58,"fk_expansion_blocked":[{"table":"employee_training","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"max_tables"},{"table":"employee_certifications","reason":"max_tables"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"journal_entries","reason":"max_tables"},{"table":"project_expenses","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"employee_certifications","reason":"max_tables"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"already_selected"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"goods_receipts","reason":"already_selected"},{"table":"journal_lines","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouse_locations","reason":"max_tables"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"warehouse_locations","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":34,"total_retrieval_latency_ms":41,"sql_generated":"SELECT COUNT(*) FROM departments;","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":404}
{"timestamp":"2026-01-29T21:23:10.781Z","query_id":"f4ea5610-482b-4f93-a323-8b54cf28e41e","question":"List all units of measure","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["units_of_measure","products","requisition_lines","business_units","currencies","sales_regions","asset_categories","purchase_orders","sales_orders","order_lines","adjustment_lines","inventory_levels"],"tables_from_table_retrieval":11,"tables_from_column_only":17,"tables_from_fk_expansion":2,"table_scores":[{"table":"units_of_measure","similarity":0.8089934324181249},{"table":"units_of_measure","similarity":0.7895937174937386},{"table":"products","similarity":0.6263866411837252},{"table":"business_units","similarity":0.6082946070315649},{"table":"products","similarity":0.6051913757119329},{"table":"business_units","similarity":0.5900234669630597},{"table":"currencies","similarity":0.5785280842826401},{"table":"currencies","similarity":0.5720700199289973},{"table":"sales_regions","similarity":0.5709271404332362},{"table":"sales_territories","similarity":0.5693966691739235},{"table":"countries","similarity":0.5676275319870521},{"table":"asset_categories","similarity":0.5659467183764512},{"table":"states_provinces","similarity":0.5592331745887797},{"table":"requisition_lines","similarity":0.5583095777203371},{"table":"certifications","similarity":0.5559645378048772}],"column_hits_per_table":{"units_of_measure":5,"products":3,"requisition_lines":3,"business_units":5,"purchase_orders":3,"sales_orders":3,"product_suppliers":1,"departments":1,"inventory_transactions":1,"sales_regions":1,"currencies":1,"order_lines":3,"vendor_invoice_lines":2,"po_lines":2,"quote_lines":2,"adjustment_lines":3,"inventory_levels":3,"reorder_rules":1,"asset_categories":1,"transfer_lines":2,"tax_rates":1,"project_milestones":1,"budgets":1,"receipt_lines":1},"top_columns_per_table":{"units_of_measure":[{"column":"abbreviation","similarity":0.7905971303186856},{"column":"conversion_factor","similarity":0.7833828440035688},{"column":"name","similarity":0.7549748821453383}],"products":[{"column":"uom_id","similarity":0.7018268610085459},{"column":"unit_cost","similarity":0.6357703641175493},{"column":"weight","similarity":0.597521277353181}],"requisition_lines":[{"column":"estimated_unit_cost","similarity":0.6362527169972213},{"column":"quantity","similarity":0.608908951408363},{"column":"estimated_total","similarity":0.598798666730362}],"business_units":[{"column":"unit_id","similarity":0.6283846620229621},{"column":"name","similarity":0.6160237054357993},{"column":"parent_unit_id","similarity":0.6074989732588798}],"purchase_orders":[{"column":"total","similarity":0.6147119133982193},{"column":"tax_amount","similarity":0.6002595814679341},{"column":"subtotal","similarity":0.5887334871771862}],"sales_orders":[{"column":"total","similarity":0.606574371601994},{"column":"tax_amount","similarity":0.592411431937674},{"column":"subtotal","similarity":0.585337724387252}],"product_suppliers":[{"column":"unit_cost","similarity":0.6058427693449309}],"departments":[{"column":"budget","similarity":0.6046532256680471}],"inventory_transactions":[{"column":"quantity","similarity":0.6037555563643355}],"sales_regions":[{"column":"target_revenue","similarity":0.6026638163293001}],"currencies":[{"column":"exchange_rate","similarity":0.6025841949257517}],"order_lines":[{"column":"unit_price","similarity":0.6016699280890015},{"column":"quantity","similarity":0.5822554877944045},{"column":"line_total","similarity":0.5819165003498858}],"vendor_invoice_lines":[{"column":"unit_cost","similarity":0.6013213563918418},{"column":"quantity","similarity":0.57804483639951}],"po_lines":[{"column":"unit_cost","similarity":0.597312540023666},{"column":"quantity","similarity":0.5779166241917584}],"quote_lines":[{"column":"unit_price","similarity":0.5965595055733411},{"column":"quantity","similarity":0.5837858568841348}],"adjustment_lines":[{"column":"quantity_before","similarity":0.5945081677052466},{"column":"quantity_change","similarity":0.5890466100435946},{"column":"quantity_after","similarity":0.587875110907794}],"inventory_levels":[{"column":"quantity_available","similarity":0.5904376058765937},{"column":"quantity_reserved","similarity":0.5894690175037719},{"column":"quantity_on_hand","similarity":0.5808299611130434}],"reorder_rules":[{"column":"reorder_quantity","similarity":0.5875427358229924}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.5860444284970066}],"transfer_lines":[{"column":"quantity_transferred","similarity":0.5836411952827008},{"column":"quantity_requested","similarity":0.577863082344162}],"tax_rates":[{"column":"rate","similarity":0.5831694594676794}],"project_milestones":[{"column":"amount","similarity":0.5831155463251225}],"budgets":[{"column":"total_amount","similarity":0.5816261216703643}],"receipt_lines":[{"column":"quantity_received","similarity":0.5799887522477924}]},"fused_scores":[{"table":"units_of_measure","fused":0.9466716514244312,"table_sim":0.7895937174937386,"col_score":1.18228855232047},{"table":"products","fused":0.7369272265448157,"table_sim":0.6051913757119329,"col_score":0.9345310027941398},{"table":"requisition_lines","fused":0.7112686237127633,"table_sim":0.5583095777203371,"col_score":0.9407071927014028},{"table":"business_units","fused":0.6162051043052771,"table_sim":0.5900234669630597,"col_score":0.6554775603186032},{"table":"currencies","fused":0.5842756899276991,"table_sim":0.5720700199289973,"col_score":0.6025841949257517},{"table":"sales_regions","fused":0.5836218107916618,"table_sim":0.5709271404332362,"col_score":0.6026638163293001},{"table":"asset_categories","fused":0.5739858024246733,"table_sim":0.5659467183764512,"col_score":0.5860444284970066},{"table":"purchase_orders","fused":0.3659366816528746,"table_sim":0,"col_score":0.9148417041321864},{"table":"sales_orders","fused":0.3611120350283324,"table_sim":0,"col_score":0.902780087570831},{"table":"order_lines","fused":0.3571190687944816,"table_sim":0,"col_score":0.8927976719862039},{"table":"vendor_invoice_lines","fused":0.3561375098366387,"table_sim":0,"col_score":0.8903437745915967},{"table":"adjustment_lines","fused":0.35561258909081755,"table_sim":0,"col_score":0.8890314727270439},{"table":"quote_lines","fused":0.35538097360616344,"table_sim":0,"col_score":0.8884524340154085},{"table":"po_lines","fused":0.35450834084781807,"table_sim":0,"col_score":0.8862708521195451},{"table":"inventory_levels","fused":0.35406884585139187,"table_sim":0,"col_score":0.8851721146284797}],"fk_expansion_candidates":42,"fk_expansion_added":2,"fk_expansion_blocked_count":30,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"already_selected"},{"table":"bank_accounts","reason":"no_evidence"},{"table":"bank_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"inventory_levels","reason":"already_selected"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"po_lines","reason":"max_tables"},{"table":"po_lines","reason":"max_tables"},{"table":"product_categories","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"product_suppliers","reason":"no_evidence"},{"table":"product_suppliers","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"quote_lines","reason":"max_tables"},{"table":"quote_lines","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_territories","reason":"max_tables"},{"table":"sales_territories","reason":"max_tables"},{"table":"transfer_lines","reason":"max_tables"},{"table":"transfer_lines","reason":"max_tables"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":49,"total_retrieval_latency_ms":56,"sql_generated":"SELECT uom.name AS unit_measure, uom.abbreviation AS abbreviation FROM units_of_measure uom;","tables_used_in_sql":[],"explain_result":"success","rows_returned":11,"total_latency_ms":567}
{"timestamp":"2026-01-29T21:23:11.349Z","query_id":"29095804-31ea-49cd-a6f3-f05efa682eef","question":"What fiscal years exist in the system?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["fiscal_years","fiscal_periods","budgets","depreciation_schedules","depreciation_entries","budget_lines","journal_entries","tax_rates","project_expenses","project_budgets","departments","projects"],"tables_from_table_retrieval":8,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"fiscal_years","similarity":0.8183387248728355},{"table":"fiscal_years","similarity":0.7923960498118316},{"table":"fiscal_periods","similarity":0.7699028512495149},{"table":"fiscal_periods","similarity":0.7616670856526071},{"table":"budgets","similarity":0.6929504016420824},{"table":"budgets","similarity":0.6911637589323553},{"table":"journal_entries","similarity":0.6311027258951736},{"table":"journal_entries","similarity":0.6269724979465695},{"table":"budget_lines","similarity":0.6265695821327767},{"table":"budget_lines","similarity":0.6218203134963756},{"table":"depreciation_entries","similarity":0.6167782937248956},{"table":"depreciation_entries","similarity":0.6039455987557726},{"table":"depreciation_schedules","similarity":0.5994638142964742},{"table":"depreciation_schedules","similarity":0.5985836737050324},{"table":"tax_rates","similarity":0.5716127675571235}],"column_hits_per_table":{"fiscal_years":5,"fiscal_periods":7,"budgets":8,"budget_lines":2,"depreciation_entries":3,"journal_entries":1,"depreciation_schedules":7,"departments":1,"project_expenses":2,"tax_rates":1,"project_budgets":5,"goods_receipts":1,"project_milestones":1,"projects":1,"timesheet_entries":1,"certifications":1,"inventory_levels":1,"asset_categories":1,"performance_reviews":1},"top_columns_per_table":{"fiscal_years":[{"column":"year","similarity":0.7902938308136325},{"column":"start_date","similarity":0.7844335948238378},{"column":"is_closed","similarity":0.7638424844354721}],"fiscal_periods":[{"column":"start_date","similarity":0.7601567095836461},{"column":"period_number","similarity":0.7434306851749984},{"column":"fiscal_year_id","similarity":0.7373948668168524}],"budgets":[{"column":"fiscal_year_id","similarity":0.7068934556378452},{"column":"status","similarity":0.6300839143318829},{"column":"created_at","similarity":0.6147789265228972}],"budget_lines":[{"column":"period_id","similarity":0.6839294330886287},{"column":"amount","similarity":0.5950811318817956}],"depreciation_entries":[{"column":"period_id","similarity":0.6671048533605741},{"column":"entry_date","similarity":0.6166792618330323},{"column":"accumulated_depreciation","similarity":0.5915536252801723}],"journal_entries":[{"column":"period_id","similarity":0.6645913597158091}],"depreciation_schedules":[{"column":"start_date","similarity":0.6314787914062867},{"column":"annual_amount","similarity":0.6313190612846479},{"column":"useful_life_months","similarity":0.6308778018363276}],"departments":[{"column":"budget","similarity":0.6263454768284962}],"project_expenses":[{"column":"expense_date","similarity":0.6141262646464515},{"column":"is_billable","similarity":0.5998077038798406}],"tax_rates":[{"column":"is_active","similarity":0.6079363851045628}],"project_budgets":[{"column":"category","similarity":0.6067101243827773},{"column":"actual_amount","similarity":0.6035940113028686},{"column":"planned_amount","similarity":0.5909686825338804}],"goods_receipts":[{"column":"receipt_date","similarity":0.5995701019739215}],"project_milestones":[{"column":"is_billable","similarity":0.5993047255562765}],"projects":[{"column":"budget","similarity":0.598827943777881}],"timesheet_entries":[{"column":"is_billable","similarity":0.5944565914670504}],"certifications":[{"column":"validity_years","similarity":0.5933814278726485}],"inventory_levels":[{"column":"last_count_date","similarity":0.5777729074188763}],"asset_categories":[{"column":"useful_life_years","similarity":0.5760847255808716}],"performance_reviews":[{"column":"review_period_start","similarity":0.5749621953817389}]},"fused_scores":[{"table":"fiscal_years","fused":0.9484418811773195,"table_sim":0.7923960498118316,"col_score":1.1825106282255513},{"table":"fiscal_periods","fused":0.9097490722600224,"table_sim":0.7616670856526071,"col_score":1.1318720521711454},{"table":"budgets","fused":0.7755758986289861,"table_sim":0.6911637589323553,"col_score":0.9021941081739324},{"table":"depreciation_schedules","fused":0.7380055330424637,"table_sim":0.5985836737050324,"col_score":0.9471383220486107},{"table":"depreciation_entries","fused":0.727349789042711,"table_sim":0.6039455987557726,"col_score":0.9124560744731185},{"table":"budget_lines","fused":0.7068747614829516,"table_sim":0.6218203134963756,"col_score":0.8344564334628156},{"table":"journal_entries","fused":0.5622690794883682,"table_sim":0.6269724979465695,"col_score":0.46521395180106634},{"table":"tax_rates","fused":0.5131898483635517,"table_sim":0.5716127675571235,"col_score":0.42555546957319396},{"table":"project_expenses","fused":0.3656120466345487,"table_sim":0,"col_score":0.9140301165863718},{"table":"project_budgets","fused":0.36340285201368466,"table_sim":0,"col_score":0.9085071300342116},{"table":"departments","fused":0.2505381907313985,"table_sim":0,"col_score":0.6263454768284962},{"table":"goods_receipts","fused":0.2398280407895686,"table_sim":0,"col_score":0.5995701019739215},{"table":"project_milestones","fused":0.2397218902225106,"table_sim":0,"col_score":0.5993047255562765},{"table":"projects","fused":0.23953117751115238,"table_sim":0,"col_score":0.598827943777881},{"table":"timesheet_entries","fused":0.2377826365868202,"table_sim":0,"col_score":0.5944565914670504}],"fk_expansion_candidates":14,"fk_expansion_added":2,"fk_expansion_blocked_count":10,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"countries","reason":"no_evidence"},{"table":"countries","reason":"no_evidence"},{"table":"departments","reason":"already_selected"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"projects","reason":"already_selected"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":29,"total_retrieval_latency_ms":35,"sql_generated":"SELECT DISTINCT fy.fiscal_year_id FROM fiscal_years AS fy LIMIT 1000;","tables_used_in_sql":[],"explain_result":"success","sqlstate":"42703","error_message":"column fy.fiscal_year does not exist","autocorrect_attempted":true,"autocorrect_success":true,"autocorrect_correction":"Replaced 'fiscal_year' with 'fiscal_year_id' (prefix, score: 0.85)","autocorrect_candidates":4,"rows_returned":4,"total_latency_ms":516}
{"timestamp":"2026-01-29T21:23:11.865Z","query_id":"3118167c-61cd-487b-931d-7d9a80fc52fb","question":"What are the different asset categories?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["asset_categories","account_types","asset_locations","fixed_assets","asset_transfers","asset_maintenance","benefit_types","product_categories","project_expenses","project_budgets"],"tables_from_table_retrieval":8,"tables_from_column_only":5,"tables_from_fk_expansion":0,"table_scores":[{"table":"asset_categories","similarity":0.8168827711422647},{"table":"asset_categories","similarity":0.8134793431523083},{"table":"fixed_assets","similarity":0.6620037919617541},{"table":"asset_locations","similarity":0.6468082033879321},{"table":"account_types","similarity":0.6392335414992715},{"table":"asset_locations","similarity":0.6390829860060242},{"table":"account_types","similarity":0.6334397842726383},{"table":"fixed_assets","similarity":0.6332464262776372},{"table":"product_categories","similarity":0.622177487707741},{"table":"asset_maintenance","similarity":0.621270551657517},{"table":"product_categories","similarity":0.6161228444008824},{"table":"benefit_types","similarity":0.6047496154805039},{"table":"asset_transfers","similarity":0.6010961802924023},{"table":"asset_maintenance","similarity":0.5988103199143756},{"table":"benefit_types","similarity":0.5903668937249158}],"column_hits_per_table":{"asset_categories":5,"fixed_assets":10,"account_types":4,"product_categories":5,"asset_locations":6,"asset_transfers":5,"asset_maintenance":6,"project_expenses":1,"project_budgets":1,"depreciation_entries":1,"benefit_types":4,"inventory_transactions":1,"depreciation_schedules":1},"top_columns_per_table":{"asset_categories":[{"column":"name","similarity":0.7902231168417967},{"column":"depreciation_method","similarity":0.7641026405824345},{"column":"category_id","similarity":0.7475795784240159}],"fixed_assets":[{"column":"category_id","similarity":0.6898370099083994},{"column":"asset_tag","similarity":0.659930462800288},{"column":"description","similarity":0.629346644194807}],"account_types":[{"column":"category","similarity":0.6883084443883226},{"column":"name","similarity":0.6020433835273314},{"column":"normal_balance","similarity":0.5917412279908575}],"product_categories":[{"column":"name","similarity":0.6522085161925151},{"column":"description","similarity":0.6484645130847195},{"column":"category_id","similarity":0.631540985602705}],"asset_locations":[{"column":"description","similarity":0.6488050493910993},{"column":"building","similarity":0.6483121830299632},{"column":"floor","similarity":0.6444734391905819}],"asset_transfers":[{"column":"reason","similarity":0.6419731845624105},{"column":"asset_id","similarity":0.6224855112874936},{"column":"transfer_id","similarity":0.6060934515527893}],"asset_maintenance":[{"column":"status","similarity":0.6309357234230896},{"column":"asset_id","similarity":0.6034723424281385},{"column":"maintenance_type_id","similarity":0.6018157616864643}],"project_expenses":[{"column":"category","similarity":0.6221479187210215}],"project_budgets":[{"column":"category","similarity":0.6204340275365261}],"depreciation_entries":[{"column":"asset_id","similarity":0.6128013635594587}],"benefit_types":[{"column":"name","similarity":0.5964873863033975},{"column":"is_active","similarity":0.5870686558139139},{"column":"description","similarity":0.5863146004190054}],"inventory_transactions":[{"column":"transaction_type","similarity":0.5905534346047462}],"depreciation_schedules":[{"column":"asset_id","similarity":0.5713899455592317}]},"fused_scores":[{"table":"asset_categories","fused":0.9391952629822058,"table_sim":0.8134793431523083,"col_score":1.1277691427270522},{"table":"account_types","fused":0.7737354939170835,"table_sim":0.6334397842726383,"col_score":0.9841790583837513},{"table":"asset_locations","fused":0.7716693526537162,"table_sim":0.6390829860060242,"col_score":0.9705489026252541},{"table":"fixed_assets","fused":0.7665405274107377,"table_sim":0.6332464262776372,"col_score":0.9664816791103885},{"table":"asset_transfers","fused":0.7045949535806546,"table_sim":0.6010961802924023,"col_score":0.8598431135130332},{"table":"asset_maintenance","fused":0.6803615304033084,"table_sim":0.5988103199143756,"col_score":0.8026883461367075},{"table":"benefit_types","fused":0.6682261644445608,"table_sim":0.5903668937249158,"col_score":0.7850150705240284},{"table":"product_categories","fused":0.6430771230062944,"table_sim":0.6161228444008824,"col_score":0.6835085409144124},{"table":"project_expenses","fused":0.2488591674884086,"table_sim":0,"col_score":0.6221479187210215},{"table":"project_budgets","fused":0.24817361101461044,"table_sim":0,"col_score":0.6204340275365261},{"table":"inventory_transactions","fused":0.23622137384189848,"table_sim":0,"col_score":0.5905534346047462},{"table":"depreciation_entries","fused":0.17158438179664845,"table_sim":0,"col_score":0.4289609544916211},{"table":"depreciation_schedules","fused":0.15998918475658488,"table_sim":0,"col_score":0.3999729618914622}],"fk_expansion_candidates":20,"fk_expansion_added":0,"fk_expansion_blocked_count":20,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":44,"total_retrieval_latency_ms":51,"sql_generated":"SELECT ac.name FROM asset_categories AS ac;","tables_used_in_sql":[],"explain_result":"success","rows_returned":7,"total_latency_ms":396}
{"timestamp":"2026-01-29T21:23:12.261Z","query_id":"d38999f7-23dd-410f-b19d-6aee5be172ec","question":"Find employees who have been with the company for more than 5 years and earn above $100,000","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_salaries","employees","employee_certifications","employee_benefits","project_expenses","employee_training","employment_history","positions","sales_quotes","asset_transfers","budgets","certifications"],"tables_from_table_retrieval":9,"tables_from_column_only":12,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_salaries","similarity":0.6654254442281295},{"table":"employee_salaries","similarity":0.6596309142898193},{"table":"employees","similarity":0.6117387326317625},{"table":"employee_certifications","similarity":0.6063101517291073},{"table":"employees","similarity":0.606186516761946},{"table":"employment_history","similarity":0.6006272540139823},{"table":"employee_certifications","similarity":0.5953253092667586},{"table":"employee_benefits","similarity":0.588385638564704},{"table":"sales_quotes","similarity":0.5847288131119626},{"table":"employment_history","similarity":0.5816250485632297},{"table":"project_expenses","similarity":0.5811440306100932},{"table":"employee_benefits","similarity":0.5797510336728031},{"table":"positions","similarity":0.5783549710101321},{"table":"employee_training","similarity":0.5764842814424564},{"table":"sales_quotes","similarity":0.5763159145374024}],"column_hits_per_table":{"employees":12,"employee_salaries":7,"positions":1,"employee_benefits":4,"employee_certifications":4,"employee_training":3,"project_expenses":2,"employment_history":3,"sales_opportunities":1,"certifications":1,"sales_territories":1,"sales_regions":1,"departments":1,"asset_maintenance":1,"performance_reviews":1,"stock_transfers":1,"asset_transfers":2,"budgets":1,"business_units":1,"sales_quotes":1,"fixed_assets":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.6634350719038632},{"column":"employee_number","similarity":0.6178594752574701},{"column":"phone","similarity":0.6028489163745482}],"employee_salaries":[{"column":"effective_date","similarity":0.6325147223182844},{"column":"amount","similarity":0.627965316071432},{"column":"change_reason","similarity":0.6266782573270714}],"positions":[{"column":"max_salary","similarity":0.6112158084495339}],"employee_benefits":[{"column":"coverage_level","similarity":0.5965564678891593},{"column":"employee_id","similarity":0.5947734668013144},{"column":"end_date","similarity":0.5815712638966307}],"employee_certifications":[{"column":"employee_id","similarity":0.5958865176403652},{"column":"certificate_number","similarity":0.5893732822005266},{"column":"expiry_date","similarity":0.5756670437109045}],"employee_training":[{"column":"score","similarity":0.594787770669282},{"column":"status","similarity":0.5774230731413645},{"column":"employee_id","similarity":0.5759810499755345}],"project_expenses":[{"column":"approved_by","similarity":0.58905654304545},{"column":"employee_id","similarity":0.5854824682576782}],"employment_history":[{"column":"company_name","similarity":0.5869895260528193},{"column":"employee_id","similarity":0.5858925427082532},{"column":"reason_for_leaving","similarity":0.5712660305823464}],"sales_opportunities":[{"column":"owner_id","similarity":0.5856823321086454}],"certifications":[{"column":"validity_years","similarity":0.5840712968289695}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.579938073636457}],"sales_regions":[{"column":"manager_id","similarity":0.5798434571294604}],"departments":[{"column":"manager_id","similarity":0.5782009360695254}],"asset_maintenance":[{"column":"performed_by","similarity":0.576890099577467}],"performance_reviews":[{"column":"employee_id","similarity":0.5764391015238134}],"stock_transfers":[{"column":"created_by","similarity":0.5750810763105169}],"asset_transfers":[{"column":"from_employee_id","similarity":0.5737448429559486},{"column":"to_employee_id","similarity":0.5721019443631485}],"budgets":[{"column":"approved_by","similarity":0.5736402980527732}],"business_units":[{"column":"manager_id","similarity":0.5724467750107093}],"sales_quotes":[{"column":"created_by","similarity":0.5703253266483399}],"fixed_assets":[{"column":"assigned_to","similarity":0.5702142656726066}]},"fused_scores":[{"table":"employee_salaries","fused":0.7743775007154918,"table_sim":0.6596309142898193,"col_score":0.9464973803540004},{"table":"employees","fused":0.7526578338702069,"table_sim":0.606186516761946,"col_score":0.9723648095325983},{"table":"employee_certifications","fused":0.7080779071824468,"table_sim":0.5953253092667586,"col_score":0.8772068040559788},{"table":"employee_benefits","fused":0.7027874601386717,"table_sim":0.5797510336728031,"col_score":0.8873420998374746},{"table":"project_expenses","fused":0.6662765811403109,"table_sim":0.5811440306100932,"col_score":0.7939754069356373},{"table":"employee_training","fused":0.6646449073729777,"table_sim":0.5764842814424564,"col_score":0.7968858462687596},{"table":"employment_history","fused":0.6596599750182711,"table_sim":0.5816250485632297,"col_score":0.7767123647008332},{"table":"positions","fused":0.5914993059858928,"table_sim":0.5783549710101321,"col_score":0.6112158084495339},{"table":"sales_quotes","fused":0.5054806401839766,"table_sim":0.5763159145374024,"col_score":0.39922772865383793},{"table":"asset_transfers","fused":0.24074282823850643,"table_sim":0,"col_score":0.601857070596266},{"table":"certifications","fused":0.23362851873158783,"table_sim":0,"col_score":0.5840712968289695},{"table":"asset_maintenance","fused":0.2307560398309868,"table_sim":0,"col_score":0.576890099577467},{"table":"budgets","fused":0.22945611922110928,"table_sim":0,"col_score":0.5736402980527732},{"table":"fixed_assets","fused":0.22808570626904265,"table_sim":0,"col_score":0.5702142656726066},{"table":"sales_opportunities","fused":0.16399105299042072,"table_sim":0,"col_score":0.40997763247605173}],"fk_expansion_candidates":64,"fk_expansion_added":2,"fk_expansion_blocked_count":56,"fk_expansion_blocked":[{"table":"departments","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"budgets","reason":"already_selected"},{"table":"sales_regions","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"customers","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"fixed_assets","reason":"max_tables"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"already_selected"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":29,"total_retrieval_latency_ms":35,"sql_generated":"SELECT e.employee_id, CONCAT(e.first_name, ' ', e.last_name) AS employee_full_name, s.amount AS salary FROM employees e INNER JOIN employee_salaries s ON e.employee_id = s.employee_id WHERE s.amount > 100000 AND DATEDIFF(year, e.hire_date, CURRENT_DATE) > 5;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column \"year\" does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":0,"autocorrect_failure_reason":"No candidates found for column 'year'","total_latency_ms":5240,"failure_type":"column_miss","failure_details":"Undefined column: year"}
{"timestamp":"2026-01-29T21:23:17.501Z","query_id":"4ee4c6f9-39cb-43bd-aa85-277c416e52ed","question":"List employees and their managers' names","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employees","employee_salaries","departments","business_units","employment_history","warehouses","sales_territories","sales_regions","employee_training","project_expenses","budgets","projects"],"tables_from_table_retrieval":9,"tables_from_column_only":16,"tables_from_fk_expansion":2,"table_scores":[{"table":"employees","similarity":0.6739271388388655},{"table":"employees","similarity":0.6689621520411647},{"table":"departments","similarity":0.657958333696202},{"table":"departments","similarity":0.6498039364272146},{"table":"business_units","similarity":0.6434665187095292},{"table":"sales_regions","similarity":0.6410429290818445},{"table":"sales_regions","similarity":0.633988075646392},{"table":"business_units","similarity":0.629302299806744},{"table":"employee_salaries","similarity":0.6291178543786463},{"table":"employment_history","similarity":0.628562523709621},{"table":"employee_salaries","similarity":0.6263125261558217},{"table":"employment_history","similarity":0.6106785553002313},{"table":"employee_training","similarity":0.6078450125905032},{"table":"warehouses","similarity":0.6001309351701307},{"table":"sales_territories","similarity":0.5991152523200463}],"column_hits_per_table":{"employees":16,"departments":2,"business_units":2,"warehouses":2,"employment_history":2,"sales_regions":1,"customers":1,"projects":2,"sales_territories":2,"vendors":1,"task_assignments":1,"stock_transfers":1,"certifications":1,"vendor_contacts":1,"timesheets":1,"currencies":1,"budgets":2,"asset_maintenance":1,"employee_salaries":3,"employee_training":1,"project_expenses":2,"employee_certifications":1,"customer_contacts":1,"sales_opportunities":1,"sales_orders":1},"top_columns_per_table":{"employees":[{"column":"first_name","similarity":0.7572377984248736},{"column":"last_name","similarity":0.7537783066248029},{"column":"manager_id","similarity":0.7053594848641631}],"departments":[{"column":"manager_id","similarity":0.6924752211806645},{"column":"name","similarity":0.6697997709897372}],"business_units":[{"column":"manager_id","similarity":0.6856730724608967},{"column":"name","similarity":0.6837723472178159}],"warehouses":[{"column":"manager_id","similarity":0.6800833291521636},{"column":"name","similarity":0.6505644630634702}],"employment_history":[{"column":"company_name","similarity":0.6721699979286799},{"column":"employee_id","similarity":0.6365310228824647}],"sales_regions":[{"column":"manager_id","similarity":0.6662194599129357}],"customers":[{"column":"name","similarity":0.6637932418641942}],"projects":[{"column":"project_manager_id","similarity":0.6625014712023475},{"column":"name","similarity":0.6398539415762817}],"sales_territories":[{"column":"name","similarity":0.6500061267927694},{"column":"assigned_rep_id","similarity":0.6343602329782843}],"vendors":[{"column":"name","similarity":0.6455975520568351}],"task_assignments":[{"column":"employee_id","similarity":0.6346101050458269}],"stock_transfers":[{"column":"created_by","similarity":0.6339945505048299}],"certifications":[{"column":"name","similarity":0.6314487952628862}],"vendor_contacts":[{"column":"last_name","similarity":0.630475980530217}],"timesheets":[{"column":"employee_id","similarity":0.6293358824018015}],"currencies":[{"column":"name","similarity":0.6288836962010669}],"budgets":[{"column":"name","similarity":0.6281209064414763},{"column":"approved_by","similarity":0.6195701819199355}],"asset_maintenance":[{"column":"performed_by","similarity":0.6276189459730336}],"employee_salaries":[{"column":"employee_id","similarity":0.6275508038919575},{"column":"end_date","similarity":0.6221997161104192},{"column":"approved_by","similarity":0.6215934819128719}],"employee_training":[{"column":"employee_id","similarity":0.6274331689495648}],"project_expenses":[{"column":"employee_id","similarity":0.6273392978417786},{"column":"approved_by","similarity":0.6203248276453848}],"employee_certifications":[{"column":"employee_id","similarity":0.6267738548687827}],"customer_contacts":[{"column":"last_name","similarity":0.6264354504834614}],"sales_opportunities":[{"column":"owner_id","similarity":0.6219218812763582}],"sales_orders":[{"column":"sales_rep_id","similarity":0.6218079145108961}]},"fused_scores":[{"table":"employees","fused":0.8199993358725051,"table_sim":0.6689621520411647,"col_score":1.0465551116195153},{"table":"employee_salaries","fused":0.7489860985202351,"table_sim":0.6263125261558217,"col_score":0.9329964570668552},{"table":"departments","fused":0.677547391725478,"table_sim":0.6498039364272146,"col_score":0.7191625746728731},{"table":"business_units","fused":0.6652979687835916,"table_sim":0.629302299806744,"col_score":0.7192914722488631},{"table":"employment_history","fused":0.6437290758037142,"table_sim":0.6106785553002313,"col_score":0.6933048565589385},{"table":"warehouses","fused":0.6415809180935701,"table_sim":0.6001309351701307,"col_score":0.703755892478729},{"table":"sales_territories","fused":0.630281299510963,"table_sim":0.5991152523200463,"col_score":0.677030370297338},{"table":"sales_regions","fused":0.5669342941634572,"table_sim":0.633988075646392,"col_score":0.466353621939055},{"table":"employee_training","fused":0.54038829486018,"table_sim":0.6078450125905032,"col_score":0.4392032182646953},{"table":"project_expenses","fused":0.3359574327560029,"table_sim":0,"col_score":0.8398935818900073},{"table":"budgets","fused":0.3357649996697809,"table_sim":0,"col_score":0.8394124991744523},{"table":"projects","fused":0.27507996375733673,"table_sim":0,"col_score":0.6876999093933418},{"table":"asset_maintenance","fused":0.25104757838921343,"table_sim":0,"col_score":0.6276189459730336},{"table":"customers","fused":0.18586210772197437,"table_sim":0,"col_score":0.4646552693049359},{"table":"vendors","fused":0.18076731457591383,"table_sim":0,"col_score":0.45191828643978454}],"fk_expansion_candidates":62,"fk_expansion_added":2,"fk_expansion_blocked_count":56,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"budgets","reason":"already_selected"},{"table":"project_resources","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"already_selected"},{"table":"task_assignments","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":28,"total_retrieval_latency_ms":34,"sql_generated":"SELECT e.employee_id, e.first_name || ' ' || e.last_name AS employee_name, m.first_name || ' ' || m.last_name AS manager_name FROM employees e LEFT JOIN employees m ON e.manager_id = m.employee_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":500,"total_latency_ms":1153}
{"timestamp":"2026-01-29T21:23:18.655Z","query_id":"5cd117f1-f0db-4554-8d70-94757dfa0fb7","question":"Which employees have pending leave requests?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["leave_requests","employees","leave_types","purchase_requisitions","employee_training","employment_history","timesheets","employee_certifications","goods_receipts","task_assignments","employee_benefits","employee_salaries"],"tables_from_table_retrieval":10,"tables_from_column_only":13,"tables_from_fk_expansion":2,"table_scores":[{"table":"leave_requests","similarity":0.7606150866620262},{"table":"leave_requests","similarity":0.7600790941142384},{"table":"leave_types","similarity":0.639090920933277},{"table":"employees","similarity":0.6318821970092333},{"table":"leave_types","similarity":0.6243053165161109},{"table":"employment_history","similarity":0.6232974261189369},{"table":"employees","similarity":0.6085401288010317},{"table":"employment_history","similarity":0.6004981063513581},{"table":"purchase_requisitions","similarity":0.5939119628114023},{"table":"purchase_requisitions","similarity":0.5862366614545421},{"table":"timesheets","similarity":0.5786251968824939},{"table":"employee_training","similarity":0.5750839227740789},{"table":"employee_certifications","similarity":0.5743962867871555},{"table":"goods_receipts","similarity":0.5718610848354152},{"table":"task_assignments","similarity":0.5706152949131827}],"column_hits_per_table":{"leave_requests":10,"employee_training":2,"employees":12,"employment_history":1,"timesheets":2,"leave_types":3,"purchase_requisitions":2,"vendor_invoices":1,"sales_orders":1,"employee_benefits":2,"project_tasks":1,"projects":1,"asset_maintenance":1,"purchase_orders":1,"stock_transfers":1,"sales_quotes":1,"employee_certifications":1,"fixed_assets":1,"project_expenses":1,"task_assignments":1,"sales_territories":1,"employee_salaries":2,"goods_receipts":1},"top_columns_per_table":{"leave_requests":[{"column":"status","similarity":0.7830776046458143},{"column":"employee_id","similarity":0.7463085450818296},{"column":"days_requested","similarity":0.7340689790864129}],"employee_training":[{"column":"status","similarity":0.6497311772671878},{"column":"scheduled_date","similarity":0.5878188046675312}],"employees":[{"column":"termination_date","similarity":0.6439758798918632},{"column":"email","similarity":0.6302370362314416},{"column":"phone","similarity":0.6105363671841775}],"employment_history":[{"column":"reason_for_leaving","similarity":0.6281349204243766}],"timesheets":[{"column":"status","similarity":0.6228065407312443},{"column":"employee_id","similarity":0.5827007759709993}],"leave_types":[{"column":"is_paid","similarity":0.6211282835888098},{"column":"days_allowed","similarity":0.6132698924498841},{"column":"requires_approval","similarity":0.5944242237109155}],"purchase_requisitions":[{"column":"status","similarity":0.6119695520568783},{"column":"requested_by","similarity":0.601159001994203}],"vendor_invoices":[{"column":"status","similarity":0.6093455591888043}],"sales_orders":[{"column":"status","similarity":0.6082126415419272}],"employee_benefits":[{"column":"end_date","similarity":0.6075530366053099},{"column":"start_date","similarity":0.5763817809487223}],"project_tasks":[{"column":"status","similarity":0.5995768986335617}],"projects":[{"column":"status","similarity":0.5971196665348375}],"asset_maintenance":[{"column":"status","similarity":0.5968209441927311}],"purchase_orders":[{"column":"status","similarity":0.5936147298950667}],"stock_transfers":[{"column":"status","similarity":0.5934866614638913}],"sales_quotes":[{"column":"status","similarity":0.5914174092778713}],"employee_certifications":[{"column":"expiry_date","similarity":0.590292904422784}],"fixed_assets":[{"column":"status","similarity":0.5890922526585929}],"project_expenses":[{"column":"status","similarity":0.5861848089246922}],"task_assignments":[{"column":"employee_id","similarity":0.5826855903430118}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.58159495137349}],"employee_salaries":[{"column":"end_date","similarity":0.5809839346344203},{"column":"change_reason","similarity":0.5782073749885271}],"goods_receipts":[{"column":"received_by","similarity":0.5807179521677516}]},"fused_scores":[{"table":"leave_requests","fused":0.8949869674714441,"table_sim":0.7600790941142384,"col_score":1.0973487775072526},{"table":"employees","fused":0.7487618364836526,"table_sim":0.6085401288010317,"col_score":0.959094398007584},{"table":"leave_types","fused":0.7387759916318033,"table_sim":0.6243053165161109,"col_score":0.9104820043053419},{"table":"purchase_requisitions","fused":0.6778813349583694,"table_sim":0.5862366614545421,"col_score":0.8153483452141104},{"table":"employee_training","fused":0.6711402403488662,"table_sim":0.5750839227740789,"col_score":0.8152247167110469},{"table":"employment_history","fused":0.6115528319805655,"table_sim":0.6004981063513581,"col_score":0.6281349204243766},{"table":"timesheets","fused":0.6031390581701846,"table_sim":0.5786251968824939,"col_score":0.6399098501017207},{"table":"employee_certifications","fused":0.5807549338414069,"table_sim":0.5743962867871555,"col_score":0.590292904422784},{"table":"goods_receipts","fused":0.5754038317683497,"table_sim":0.5718610848354152,"col_score":0.5807179521677516},{"table":"task_assignments","fused":0.505521142243953,"table_sim":0.5706152949131827,"col_score":0.40787991324010825},{"table":"employee_benefits","fused":0.3582975708318684,"table_sim":0,"col_score":0.895743927079671},{"table":"employee_salaries","fused":0.3480350488514736,"table_sim":0,"col_score":0.870087622128684},{"table":"vendor_invoices","fused":0.1706167565728652,"table_sim":0,"col_score":0.426541891432163},{"table":"sales_orders","fused":0.1702995396317396,"table_sim":0,"col_score":0.425748849079349},{"table":"project_tasks","fused":0.16788153161739727,"table_sim":0,"col_score":0.4197038290434931}],"fk_expansion_candidates":66,"fk_expansion_added":2,"fk_expansion_blocked_count":62,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"employee_benefits","reason":"already_selected"},{"table":"employee_salaries","reason":"already_selected"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":18,"total_retrieval_latency_ms":24,"sql_generated":"SELECT DISTINCT e.employee_id, e.first_name || ' ' || e.last_name AS employee_full_name FROM hr.employees e JOIN hr.leave_requests lr ON e.employee_id = lr.employee_id WHERE lr.status = 'pending';","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42P01","error_message":"relation \"hr.employees\" does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_failure_reason":"Unknown table or alias 'hr.employees'. Available tables: leave_requests, employees, leave_types, purchase_requisitions, employee_training, employment_history, timesheets, employee_certifications, goods_receipts, task_assignments, employee_benefits, employee_salaries","total_latency_ms":3019,"failure_type":"join_path_miss","failure_details":"Database error after 3 attempts: relation \"hr.employees\" does not exist"}
{"timestamp":"2026-01-29T21:23:21.674Z","query_id":"07ed7b8a-4254-4d55-9fc1-7935b2101734","question":"Show the number of employees per position title","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["positions","employees","employee_salaries","employee_certifications","employee_training","employee_benefits","sales_territories","sales_regions","task_assignments","employment_history","sales_opportunities"],"tables_from_table_retrieval":9,"tables_from_column_only":10,"tables_from_fk_expansion":1,"table_scores":[{"table":"positions","similarity":0.6979534676247563},{"table":"positions","similarity":0.6915534653091021},{"table":"employee_salaries","similarity":0.6596018656539115},{"table":"employee_salaries","similarity":0.659392658582788},{"table":"employees","similarity":0.659318915501233},{"table":"sales_territories","similarity":0.6544391487399293},{"table":"employees","similarity":0.6533237885369005},{"table":"sales_territories","similarity":0.6489970483284497},{"table":"sales_regions","similarity":0.6428263414246281},{"table":"sales_regions","similarity":0.6307206585715829},{"table":"employee_benefits","similarity":0.6167866650759656},{"table":"employee_certifications","similarity":0.6148750377920306},{"table":"employee_training","similarity":0.6083683642118161},{"table":"task_assignments","similarity":0.6071839885197421},{"table":"employee_benefits","similarity":0.6050539421715708}],"column_hits_per_table":{"positions":6,"employees":14,"employee_salaries":6,"sales_territories":3,"employee_certifications":2,"sales_regions":1,"employment_history":3,"customer_contacts":1,"departments":1,"sales_opportunities":2,"vendor_contacts":1,"employee_benefits":2,"employee_training":2,"business_units":1,"projects":1,"task_assignments":1,"sales_orders":1,"warehouses":1,"project_resources":1},"top_columns_per_table":{"positions":[{"column":"title","similarity":0.7221299436011294},{"column":"min_salary","similarity":0.6651927143592096},{"column":"department_id","similarity":0.6570360152989476}],"employees":[{"column":"employee_number","similarity":0.7138309929767446},{"column":"salary","similarity":0.6844081973483859},{"column":"position_id","similarity":0.68398642134637}],"employee_salaries":[{"column":"amount","similarity":0.6971738165514154},{"column":"approved_by","similarity":0.6443166084961229},{"column":"effective_date","similarity":0.6438382835501887}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6556010449326051},{"column":"name","similarity":0.6120006875761033},{"column":"territory_id","similarity":0.6092167482669691}],"employee_certifications":[{"column":"certificate_number","similarity":0.6506983264603999},{"column":"employee_id","similarity":0.6216038384290737}],"sales_regions":[{"column":"manager_id","similarity":0.6432388471448376}],"employment_history":[{"column":"position","similarity":0.642007780436184},{"column":"company_name","similarity":0.6085621220790698},{"column":"employee_id","similarity":0.6029078451574368}],"customer_contacts":[{"column":"title","similarity":0.6408819361793222}],"departments":[{"column":"manager_id","similarity":0.635000868322988}],"sales_opportunities":[{"column":"owner_id","similarity":0.6321958594849902},{"column":"amount","similarity":0.6069160048032282}],"vendor_contacts":[{"column":"title","similarity":0.6298635727288079}],"employee_benefits":[{"column":"coverage_level","similarity":0.6284972802326118},{"column":"employee_id","similarity":0.6041405196036292}],"employee_training":[{"column":"status","similarity":0.6218313368875849},{"column":"score","similarity":0.6185830853610097}],"business_units":[{"column":"manager_id","similarity":0.6208049194224817}],"projects":[{"column":"project_manager_id","similarity":0.6174592088393791}],"task_assignments":[{"column":"employee_id","similarity":0.6149774272355666}],"sales_orders":[{"column":"sales_rep_id","similarity":0.6089120347247923}],"warehouses":[{"column":"manager_id","similarity":0.6081121279686315}],"project_resources":[{"column":"employee_id","similarity":0.6074616431088047}]},"fused_scores":[{"table":"positions","fused":0.836822599497755,"table_sim":0.6915534653091021,"col_score":1.0547263007807341},{"table":"employees","fused":0.8144083097825153,"table_sim":0.6533237885369005,"col_score":1.0560350916509376},{"table":"employee_salaries","fused":0.8033684434694637,"table_sim":0.659392658582788,"col_score":1.019332120799477},{"table":"employee_certifications","fused":0.7162288906394487,"table_sim":0.6148750377920306,"col_score":0.8682596699105758},{"table":"employee_training","fused":0.6995106398357553,"table_sim":0.6083683642118161,"col_score":0.8362240532716644},{"table":"employee_benefits","fused":0.6990109501404953,"table_sim":0.6050539421715708,"col_score":0.839946462093882},{"table":"sales_territories","fused":0.6586466178388537,"table_sim":0.6489970483284497,"col_score":0.6731209721044596},{"table":"sales_regions","fused":0.5585392723435043,"table_sim":0.6307206585715829,"col_score":0.4502671930013863},{"table":"task_assignments","fused":0.5365040727378039,"table_sim":0.6071839885197421,"col_score":0.4304841990648966},{"table":"employment_history","fused":0.3420018092655434,"table_sim":0,"col_score":0.8550045231638584},{"table":"sales_opportunities","fused":0.33127382224918994,"table_sim":0,"col_score":0.8281845556229748},{"table":"customer_contacts","fused":0.2563527744717289,"table_sim":0,"col_score":0.6408819361793222},{"table":"vendor_contacts","fused":0.2519454290915232,"table_sim":0,"col_score":0.6298635727288079},{"table":"departments","fused":0.17780024313043663,"table_sim":0,"col_score":0.4445006078260915},{"table":"business_units","fused":0.17382537743829488,"table_sim":0,"col_score":0.4345634435957372}],"fk_expansion_candidates":60,"fk_expansion_added":1,"fk_expansion_blocked_count":58,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"sales_opportunities","reason":"already_selected"},{"table":"sales_orders","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":23,"total_retrieval_latency_ms":29,"sql_generated":"SELECT p.title AS PositionTitle, COUNT(e.employee_id) AS NumberOfEmployees FROM positions p JOIN employees e ON p.position_id = e.position_id GROUP BY p.title;","tables_used_in_sql":[],"explain_result":"success","rows_returned":40,"total_latency_ms":814}
{"timestamp":"2026-01-29T21:23:22.488Z","query_id":"fd87e8ec-30a4-4d3e-a13d-9091c2e5fdf0","question":"Find employees with expiring certifications in the next 6 months","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_certifications","certifications","employee_training","employee_salaries","employees","employee_benefits","employment_history","leave_requests","fixed_assets","training_courses","timesheets"],"tables_from_table_retrieval":8,"tables_from_column_only":8,"tables_from_fk_expansion":1,"table_scores":[{"table":"employee_certifications","similarity":0.7859468856867013},{"table":"employee_certifications","similarity":0.7706241362613744},{"table":"certifications","similarity":0.6833271623394933},{"table":"certifications","similarity":0.6802005917779511},{"table":"employee_training","similarity":0.6443966057658752},{"table":"employee_training","similarity":0.6440443171141977},{"table":"employees","similarity":0.6304880915961747},{"table":"employee_salaries","similarity":0.6285918606598171},{"table":"employment_history","similarity":0.6226874481800316},{"table":"employee_salaries","similarity":0.6217356175142155},{"table":"employment_history","similarity":0.6209800232699798},{"table":"employees","similarity":0.6208808332740605},{"table":"employee_benefits","similarity":0.6089042275067342},{"table":"leave_requests","similarity":0.6075476150978824},{"table":"employee_benefits","similarity":0.6045338983482451}],"column_hits_per_table":{"employee_certifications":6,"certifications":5,"employee_benefits":4,"employee_salaries":4,"employees":11,"employee_training":7,"employment_history":3,"sales_territories":1,"fixed_assets":1,"leave_requests":2,"sales_orders":1,"sales_opportunities":1,"training_courses":1,"vendor_invoices":1,"sales_regions":1,"timesheets":1},"top_columns_per_table":{"employee_certifications":[{"column":"expiry_date","similarity":0.824890334606253},{"column":"obtained_date","similarity":0.7052846826361914},{"column":"certificate_number","similarity":0.6847532958035393}],"certifications":[{"column":"validity_years","similarity":0.6770067141369405},{"column":"issuing_body","similarity":0.6636677218690651},{"column":"name","similarity":0.6345330007966575}],"employee_benefits":[{"column":"end_date","similarity":0.6748941092120173},{"column":"start_date","similarity":0.6211708522515275},{"column":"employee_id","similarity":0.5874772340410589}],"employee_salaries":[{"column":"end_date","similarity":0.674819986050645},{"column":"effective_date","similarity":0.6257662683349675},{"column":"approved_by","similarity":0.5906622365479393}],"employees":[{"column":"termination_date","similarity":0.6651670843704476},{"column":"birth_date","similarity":0.6195817101038591},{"column":"hire_date","similarity":0.604926374835591}],"employee_training":[{"column":"status","similarity":0.6639258100882921},{"column":"completion_date","similarity":0.6483605451444736},{"column":"scheduled_date","similarity":0.6309826728136354}],"employment_history":[{"column":"end_date","similarity":0.6300394640482956},{"column":"reason_for_leaving","similarity":0.5997641082568419},{"column":"employee_id","similarity":0.5844056747410719}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6148178600700598}],"fixed_assets":[{"column":"warranty_expiry","similarity":0.6065954902035513}],"leave_requests":[{"column":"approved_by","similarity":0.6047012182000441},{"column":"employee_id","similarity":0.5848951086127372}],"sales_orders":[{"column":"sales_rep_id","similarity":0.5904629307212104}],"sales_opportunities":[{"column":"owner_id","similarity":0.5886084108060572}],"training_courses":[{"column":"duration_hours","similarity":0.588545509623843}],"vendor_invoices":[{"column":"status","similarity":0.5865666000577741}],"sales_regions":[{"column":"manager_id","similarity":0.5830602727986053}],"timesheets":[{"column":"approved_by","similarity":0.5820241143955824}]},"fused_scores":[{"table":"employee_certifications","fused":0.9333875521265641,"table_sim":0.7706241362613744,"col_score":1.1775326759243487},{"table":"certifications","fused":0.8116565850953599,"table_sim":0.6802005917779511,"col_score":1.008840575071473},{"table":"employee_training","fused":0.7719673428890352,"table_sim":0.6440443171141977,"col_score":0.9638518815512913},{"table":"employee_salaries","fused":0.7681226185957808,"table_sim":0.6217356175142155,"col_score":0.9877031202181288},{"table":"employees","fused":0.7625116757333872,"table_sim":0.6208808332740605,"col_score":0.9749579394223771},{"table":"employee_benefits","fused":0.7569121531440595,"table_sim":0.6045338983482451,"col_score":0.985479535337781},{"table":"employment_history","fused":0.7445566212326745,"table_sim":0.6209800232699798,"col_score":0.9299215181767165},{"table":"leave_requests","fused":0.6882943715445302,"table_sim":0.6075476150978824,"col_score":0.8094145062145021},{"table":"fixed_assets","fused":0.24263819608142054,"table_sim":0,"col_score":0.6065954902035513},{"table":"training_courses","fused":0.2354182038495372,"table_sim":0,"col_score":0.588545509623843},{"table":"timesheets","fused":0.23280964575823299,"table_sim":0,"col_score":0.5820241143955824},{"table":"sales_territories","fused":0.17214900081961673,"table_sim":0,"col_score":0.4303725020490418},{"table":"sales_orders","fused":0.1653296206019389,"table_sim":0,"col_score":0.41332405150484725},{"table":"sales_opportunities","fused":0.16481035502569602,"table_sim":0,"col_score":0.41202588756424},{"table":"vendor_invoices","fused":0.16423864801617674,"table_sim":0,"col_score":0.41059662004044184}],"fk_expansion_candidates":70,"fk_expansion_added":1,"fk_expansion_blocked_count":68,"fk_expansion_blocked":[{"table":"departments","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"leave_types","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"leave_types","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"already_selected"},{"table":"benefit_types","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":50,"total_retrieval_latency_ms":58,"sql_generated":"SELECT e.employee_id, CONCAT(e.first_name, ' ', e.last_name) AS employee_full_name, c.certification_type, c.expiry_date\nFROM employees e\nJOIN employee_certifications ec ON e.employee_id = ec.employee_id\nJOIN certifications c ON ec.certification_id = c.certification_id\nWHERE c.expiry_date BETWEEN CURRENT_DATE AND (CURRENT_DATE + INTERVAL '6 months');","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column c.certification_type does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":2,"autocorrect_failure_reason":"Best candidate 'certifications.certification_id' has score 0.62 < threshold 0.7","total_latency_ms":4761,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column c.certification_type does not exist"}
{"timestamp":"2026-01-29T21:23:27.249Z","query_id":"f9cfe493-9bba-4233-bd25-2c159fa8bd2e","question":"What is the total sales amount by customer for 2024?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_orders","sales_quotes","purchase_orders","sales_opportunities","customers","sales_regions","sales_territories","vendor_invoices","vendor_invoice_lines","goods_receipts","order_lines","receipt_lines"],"tables_from_table_retrieval":8,"tables_from_column_only":10,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.6745457697247657},{"table":"sales_orders","similarity":0.6661782372338159},{"table":"sales_regions","similarity":0.6466539195201415},{"table":"purchase_orders","similarity":0.6425639839861694},{"table":"sales_regions","similarity":0.6391000207245879},{"table":"purchase_orders","similarity":0.6365277038136935},{"table":"sales_quotes","similarity":0.6362675183217259},{"table":"sales_quotes","similarity":0.6323684030188},{"table":"customers","similarity":0.6254829877818046},{"table":"goods_receipts","similarity":0.624224700776992},{"table":"sales_territories","similarity":0.6219383160682438},{"table":"sales_opportunities","similarity":0.6211621793985973},{"table":"sales_opportunities","similarity":0.6198918716472263},{"table":"sales_territories","similarity":0.6086381383511837},{"table":"customers","similarity":0.6073854499529491}],"column_hits_per_table":{"sales_orders":11,"sales_quotes":8,"purchase_orders":3,"vendor_invoices":4,"sales_regions":2,"sales_opportunities":4,"budgets":1,"vendor_invoice_lines":3,"customers":5,"product_suppliers":2,"sales_territories":1,"inventory_transactions":1,"order_lines":1,"requisition_lines":1,"products":1,"employee_salaries":1,"receipt_lines":1},"top_columns_per_table":{"sales_orders":[{"column":"total","similarity":0.7267615224129526},{"column":"tax_amount","similarity":0.6768860201331778},{"column":"shipping_cost","similarity":0.6629388694517645}],"sales_quotes":[{"column":"total","similarity":0.694353474084059},{"column":"tax_amount","similarity":0.6552565219340181},{"column":"subtotal","similarity":0.6267182822036423}],"purchase_orders":[{"column":"total","similarity":0.6777199928257838},{"column":"tax_amount","similarity":0.6402978983456733},{"column":"shipping_cost","similarity":0.6243812460571962}],"vendor_invoices":[{"column":"total","similarity":0.6757800030933531},{"column":"amount_paid","similarity":0.6255444220000853},{"column":"tax_amount","similarity":0.6227458956839576}],"sales_regions":[{"column":"target_revenue","similarity":0.6672997133789248},{"column":"manager_id","similarity":0.6150592581557652}],"sales_opportunities":[{"column":"amount","similarity":0.6523518870366036},{"column":"actual_close_date","similarity":0.6234759946961155},{"column":"customer_id","similarity":0.6225457539270198}],"budgets":[{"column":"total_amount","similarity":0.6443640871252324}],"vendor_invoice_lines":[{"column":"amount","similarity":0.638640432265749},{"column":"quantity","similarity":0.6225103754226036},{"column":"unit_cost","similarity":0.6144886443515528}],"customers":[{"column":"is_active","similarity":0.6263453821128872},{"column":"payment_terms","similarity":0.6208624248875562},{"column":"customer_number","similarity":0.6199000162473296}],"product_suppliers":[{"column":"unit_cost","similarity":0.6228611719406651},{"column":"lead_time_days","similarity":0.6138713693045325}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6215934251847155}],"inventory_transactions":[{"column":"quantity","similarity":0.6213307623673536}],"order_lines":[{"column":"line_total","similarity":0.6162919437853911}],"requisition_lines":[{"column":"estimated_total","similarity":0.616233844515133}],"products":[{"column":"unit_cost","similarity":0.615179526855141}],"employee_salaries":[{"column":"amount","similarity":0.6128136846323675}],"receipt_lines":[{"column":"quantity_received","similarity":0.6105295012867741}]},"fused_scores":[{"table":"sales_orders","fused":0.8257887553321062,"table_sim":0.6661782372338159,"col_score":1.0652045324795414},{"table":"sales_quotes","fused":0.7882137358317072,"table_sim":0.6323684030188,"col_score":1.021981735051068},{"table":"purchase_orders","fused":0.7810641990876643,"table_sim":0.6365277038136935,"col_score":0.9978689419986204},{"table":"sales_opportunities","fused":0.7575710767422004,"table_sim":0.6198918716472263,"col_score":0.9640898843846614},{"table":"customers","fused":0.7367562431762579,"table_sim":0.6073854499529491,"col_score":0.930812433011221},{"table":"sales_regions","fused":0.7364881939281298,"table_sim":0.6391000207245879,"col_score":0.8825704537334427},{"table":"sales_territories","fused":0.5392290420624306,"table_sim":0.6086381383511837,"col_score":0.43511539762930085},{"table":"vendor_invoices","fused":0.39486118037413276,"table_sim":0,"col_score":0.9871529509353318},{"table":"vendor_invoice_lines","fused":0.37995824799082034,"table_sim":0,"col_score":0.9498956199770507},{"table":"goods_receipts","fused":0.3745348204661952,"table_sim":0.624224700776992,"col_score":0},{"table":"product_suppliers","fused":0.37191874263717256,"table_sim":0,"col_score":0.9297968565929313},{"table":"budgets","fused":0.257745634850093,"table_sim":0,"col_score":0.6443640871252324},{"table":"inventory_transactions","fused":0.24853230494694145,"table_sim":0,"col_score":0.6213307623673536},{"table":"order_lines","fused":0.24651677751415646,"table_sim":0,"col_score":0.6162919437853911},{"table":"requisition_lines","fused":0.2464935378060532,"table_sim":0,"col_score":0.616233844515133}],"fk_expansion_candidates":30,"fk_expansion_added":2,"fk_expansion_blocked_count":26,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"order_lines","reason":"already_selected"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"already_selected"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":38,"total_retrieval_latency_ms":45,"sql_generated":"SELECT c.customer_id AS customer_id, SUM(sales_orders.subtotal + sales_quotes.subtotal) AS total_sales_amount FROM customers c JOIN sales_orders ON c.customer_id = sales_orders.customer_id WHERE EXTRACT(YEAR FROM sales_orders.order_date) = 2024 GROUP BY c.customer_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42883","error_message":"function year(date) does not exist","total_latency_ms":3578,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T21:23:30.827Z","query_id":"50473701-3929-4a7a-aca4-f1ce54547758","question":"List the top 10 customers by total order value","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["sales_orders","order_lines","purchase_orders","customers","vendor_invoices","po_lines","vendor_invoice_lines","product_suppliers","customer_contacts","vendors","goods_receipts","receipt_lines"],"tables_from_table_retrieval":10,"tables_from_column_only":6,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.6473006572264755},{"table":"order_lines","similarity":0.6399839764362797},{"table":"purchase_orders","similarity":0.6359216236921361},{"table":"sales_orders","similarity":0.6322789685618992},{"table":"order_lines","similarity":0.6313674438881497},{"table":"purchase_orders","similarity":0.6225494231887847},{"table":"customers","similarity":0.6198957604307753},{"table":"customers","similarity":0.603994667800392},{"table":"product_suppliers","similarity":0.5995729306104617},{"table":"vendor_invoices","similarity":0.5943908353227434},{"table":"customer_contacts","similarity":0.5842306673122464},{"table":"vendor_invoice_lines","similarity":0.5801466694219243},{"table":"po_lines","similarity":0.5800310436582952},{"table":"po_lines","similarity":0.5791417572195606},{"table":"goods_receipts","similarity":0.5753336348446236}],"column_hits_per_table":{"sales_orders":8,"purchase_orders":9,"order_lines":6,"customers":8,"vendor_invoices":3,"po_lines":4,"product_suppliers":1,"vendor_invoice_lines":3,"sales_quotes":1,"reorder_rules":1,"vendors":2,"receipt_lines":1,"customer_contacts":1,"vendor_contacts":1,"quote_lines":1},"top_columns_per_table":{"sales_orders":[{"column":"total","similarity":0.6989783838444601},{"column":"order_number","similarity":0.6685333803732707},{"column":"subtotal","similarity":0.6440170645492649}],"purchase_orders":[{"column":"total","similarity":0.6903262609210554},{"column":"po_number","similarity":0.6415427911377667},{"column":"subtotal","similarity":0.6382251563747767}],"order_lines":[{"column":"line_total","similarity":0.6750587403197648},{"column":"quantity_shipped","similarity":0.6574528419378944},{"column":"unit_price","similarity":0.6493800384208552}],"customers":[{"column":"customer_number","similarity":0.661666062123175},{"column":"phone","similarity":0.6564797570958422},{"column":"website","similarity":0.6340938119327376}],"vendor_invoices":[{"column":"total","similarity":0.6487049636317076},{"column":"subtotal","similarity":0.6036460618653252},{"column":"invoice_number","similarity":0.5951077315424751}],"po_lines":[{"column":"line_total","similarity":0.6415288139191745},{"column":"quantity_received","similarity":0.6378991363936013},{"column":"quantity","similarity":0.6200476984412968}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6409309856247254}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.6293094401462158},{"column":"amount","similarity":0.6217860311141447},{"column":"unit_cost","similarity":0.608519957652656}],"sales_quotes":[{"column":"total","similarity":0.6216495770294906}],"reorder_rules":[{"column":"max_quantity","similarity":0.6160793655093021}],"vendors":[{"column":"phone","similarity":0.6149928390714005},{"column":"vendor_number","similarity":0.5976911850670412}],"receipt_lines":[{"column":"quantity_received","similarity":0.60564498897585}],"customer_contacts":[{"column":"phone","similarity":0.6038535558458017}],"vendor_contacts":[{"column":"phone","similarity":0.5956727487995729}],"quote_lines":[{"column":"line_total","similarity":0.5920335049892667}]},"fused_scores":[{"table":"sales_orders","fused":0.7926654107495777,"table_sim":0.6322789685618992,"col_score":1.0332450740310954},{"table":"order_lines","fused":0.7803345308483746,"table_sim":0.6313674438881497,"col_score":1.0037851612887119},{"table":"purchase_orders","fused":0.7779687165092464,"table_sim":0.6225494231887847,"col_score":1.0110976564899388},{"table":"customers","fused":0.7583591769486737,"table_sim":0.603994667800392,"col_score":0.9899059406710962},{"table":"vendor_invoices","fused":0.7368456990193941,"table_sim":0.5943908353227434,"col_score":0.9505279945643702},{"table":"po_lines","fused":0.7316764071781264,"table_sim":0.5791417572195606,"col_score":0.9604783821159751},{"table":"vendor_invoice_lines","fused":0.7241689839344698,"table_sim":0.5801466694219243,"col_score":0.9402024557032882},{"table":"product_suppliers","fused":0.6161161526161671,"table_sim":0.5995729306104617,"col_score":0.6409309856247254},{"table":"customer_contacts","fused":0.5920798227256685,"table_sim":0.5842306673122464,"col_score":0.6038535558458017},{"table":"vendors","fused":0.36553537264196845,"table_sim":0,"col_score":0.9138384316049211},{"table":"goods_receipts","fused":0.3452001809067742,"table_sim":0.5753336348446236,"col_score":0},{"table":"sales_quotes","fused":0.24865983081179627,"table_sim":0,"col_score":0.6216495770294906},{"table":"reorder_rules","fused":0.24643174620372085,"table_sim":0,"col_score":0.6160793655093021},{"table":"receipt_lines","fused":0.24225799559034,"table_sim":0,"col_score":0.60564498897585},{"table":"vendor_contacts","fused":0.23826909951982916,"table_sim":0,"col_score":0.5956727487995729}],"fk_expansion_candidates":28,"fk_expansion_added":2,"fk_expansion_blocked_count":20,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"already_selected"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"receipt_lines","reason":"already_selected"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"sales_quotes","reason":"max_tables"},{"table":"vendor_contacts","reason":"max_tables"},{"table":"vendor_contacts","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":47,"total_retrieval_latency_ms":54,"sql_generated":"SELECT c.customer_id, c.name, SUM(s.total) AS total_order_value FROM customers c JOIN sales_orders s ON c.customer_id = s.customer_id GROUP BY c.customer_id ORDER BY total_order_value DESC LIMIT 10;","tables_used_in_sql":[],"explain_result":"success","rows_returned":10,"total_latency_ms":1165}
{"timestamp":"2026-01-29T21:23:31.993Z","query_id":"0d564f9c-6413-44ed-98b3-85517c5ee5ce","question":"Show sales opportunities in the Negotiation stage worth over $50,000","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["sales_opportunities","opportunity_stages","sales_quotes","sales_orders","purchase_orders","sales_regions","sales_territories","purchase_requisitions","vendor_invoices","positions","fixed_assets","vendor_invoice_lines"],"tables_from_table_retrieval":8,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_opportunities","similarity":0.7205066192182484},{"table":"sales_opportunities","similarity":0.6992078050992712},{"table":"opportunity_stages","similarity":0.6655732816251885},{"table":"opportunity_stages","similarity":0.6634227373711339},{"table":"sales_quotes","similarity":0.6041542335555263},{"table":"sales_quotes","similarity":0.5966843975960908},{"table":"sales_orders","similarity":0.5645767590839142},{"table":"sales_regions","similarity":0.5644307089309575},{"table":"sales_orders","similarity":0.5593486033229518},{"table":"sales_regions","similarity":0.5589767008926408},{"table":"sales_territories","similarity":0.5471152759878601},{"table":"purchase_orders","similarity":0.5467717239602033},{"table":"sales_territories","similarity":0.5454458212189293},{"table":"purchase_orders","similarity":0.5420364894792326},{"table":"purchase_requisitions","similarity":0.5365488921341564}],"column_hits_per_table":{"sales_opportunities":11,"opportunity_stages":6,"sales_quotes":8,"sales_orders":6,"sales_regions":2,"vendor_invoices":3,"project_milestones":2,"positions":2,"purchase_orders":3,"sales_territories":2,"fixed_assets":1,"vendor_invoice_lines":1,"purchase_requisitions":1,"inventory_levels":1,"products":1},"top_columns_per_table":{"sales_opportunities":[{"column":"amount","similarity":0.7139172496304163},{"column":"stage_id","similarity":0.6952000862360895},{"column":"actual_close_date","similarity":0.6830334219532271}],"opportunity_stages":[{"column":"sequence","similarity":0.6389837993697431},{"column":"probability","similarity":0.6259533584092214},{"column":"is_won","similarity":0.6211680792249179}],"sales_quotes":[{"column":"opportunity_id","similarity":0.6386990954132878},{"column":"total","similarity":0.6088430478546591},{"column":"status","similarity":0.5992888067529821}],"sales_orders":[{"column":"total","similarity":0.6131594865943232},{"column":"subtotal","similarity":0.6030274083374146},{"column":"status","similarity":0.5842354820649266}],"sales_regions":[{"column":"target_revenue","similarity":0.5946091865549964},{"column":"name","similarity":0.5570467585870398}],"vendor_invoices":[{"column":"total","similarity":0.5900128893372721},{"column":"subtotal","similarity":0.579374118244058},{"column":"amount_paid","similarity":0.5561381247624678}],"project_milestones":[{"column":"amount","similarity":0.5756739943176631},{"column":"description","similarity":0.5441090718901616}],"positions":[{"column":"max_salary","similarity":0.5741603665488147},{"column":"min_salary","similarity":0.5538510718211699}],"purchase_orders":[{"column":"total","similarity":0.5739273632713984},{"column":"subtotal","similarity":0.5646712926349372},{"column":"tax_amount","similarity":0.5423612991250856}],"sales_territories":[{"column":"name","similarity":0.5705580376132843},{"column":"territory_id","similarity":0.5472841845831027}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5580674942148667}],"vendor_invoice_lines":[{"column":"amount","similarity":0.5568943563507056}],"purchase_requisitions":[{"column":"status","similarity":0.5555841794582627}],"inventory_levels":[{"column":"quantity_available","similarity":0.5538118214636725}],"products":[{"column":"list_price","similarity":0.5426989166991779}]},"fused_scores":[{"table":"sales_opportunities","fused":0.8416982673023746,"table_sim":0.6992078050992712,"col_score":1.0554339606070298},{"table":"opportunity_stages","fused":0.7788378338524219,"table_sim":0.6634227373711339,"col_score":0.9519604785743538},{"table":"sales_quotes","fused":0.7207301540910609,"table_sim":0.5966843975960908,"col_score":0.9067987888335158},{"table":"sales_orders","fused":0.7014784382989834,"table_sim":0.5593486033229518,"col_score":0.9146731907630306},{"table":"purchase_orders","fused":0.6677270975230863,"table_sim":0.5420364894792326,"col_score":0.856263009588867},{"table":"sales_regions","fused":0.6512162413597686,"table_sim":0.5589767008926408,"col_score":0.7895755520604604},{"table":"sales_territories","fused":0.5636435291047115,"table_sim":0.5454458212189293,"col_score":0.5909400909333848},{"table":"purchase_requisitions","fused":0.4774929055288073,"table_sim":0.5365488921341564,"col_score":0.38890892562078383},{"table":"vendor_invoices","fused":0.35187997938372045,"table_sim":0,"col_score":0.8796999484593011},{"table":"positions","fused":0.3404343609837599,"table_sim":0,"col_score":0.8510859024593997},{"table":"project_milestones","fused":0.3064448677916879,"table_sim":0,"col_score":0.7661121694792197},{"table":"fixed_assets","fused":0.22322699768594667,"table_sim":0,"col_score":0.5580674942148667},{"table":"vendor_invoice_lines","fused":0.22275774254028224,"table_sim":0,"col_score":0.5568943563507056},{"table":"inventory_levels","fused":0.221524728585469,"table_sim":0,"col_score":0.5538118214636725},{"table":"products","fused":0.21707956667967118,"table_sim":0,"col_score":0.5426989166991779}],"fk_expansion_candidates":24,"fk_expansion_added":2,"fk_expansion_blocked_count":20,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"already_selected"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"already_selected"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":46,"total_retrieval_latency_ms":53,"sql_generated":"SELECT so.* FROM sales_opportunities as so JOIN opportunity_stages os ON so.stage_id = os.stage_id WHERE os.name = 'Negotiation' AND so.amount > 50000;","tables_used_in_sql":[],"explain_result":"success","rows_returned":69,"total_latency_ms":971}
{"timestamp":"2026-01-29T21:23:32.964Z","query_id":"97eaa003-5128-4a1b-8959-11c2e3a17b2b","question":"What is the conversion rate from quotes to orders?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["quote_lines","sales_quotes","sales_orders","order_lines","purchase_orders","po_lines","product_suppliers","vendor_invoice_lines","vendor_invoices","currencies"],"tables_from_table_retrieval":9,"tables_from_column_only":3,"tables_from_fk_expansion":0,"table_scores":[{"table":"quote_lines","similarity":0.6904269230356019},{"table":"sales_orders","similarity":0.6835641897302034},{"table":"quote_lines","similarity":0.6792514897887778},{"table":"sales_quotes","similarity":0.6684713746648914},{"table":"sales_quotes","similarity":0.6542909932605636},{"table":"order_lines","similarity":0.6535630831611231},{"table":"sales_orders","similarity":0.6493194652837458},{"table":"order_lines","similarity":0.6325855320371501},{"table":"purchase_orders","similarity":0.6306886393929901},{"table":"po_lines","similarity":0.6176945995415711},{"table":"purchase_orders","similarity":0.611822309215676},{"table":"po_lines","similarity":0.5953235306287724},{"table":"product_suppliers","similarity":0.5906242515558167},{"table":"vendor_invoices","similarity":0.5859545887931735},{"table":"vendor_invoice_lines","similarity":0.5830820632852473}],"column_hits_per_table":{"quote_lines":7,"sales_orders":8,"sales_quotes":11,"order_lines":6,"purchase_orders":8,"currencies":1,"product_suppliers":1,"po_lines":5,"units_of_measure":1,"vendor_invoice_lines":1,"goods_receipts":1},"top_columns_per_table":{"quote_lines":[{"column":"discount_percent","similarity":0.7182593829036943},{"column":"unit_price","similarity":0.7042313198565835},{"column":"line_total","similarity":0.6835145369839556}],"sales_orders":[{"column":"quote_id","similarity":0.7162590921292421},{"column":"total","similarity":0.6708820094443375},{"column":"order_number","similarity":0.6584546291944807}],"sales_quotes":[{"column":"total","similarity":0.7028223896965587},{"column":"quote_number","similarity":0.6939392229110496},{"column":"subtotal","similarity":0.6721480194739803}],"order_lines":[{"column":"discount_percent","similarity":0.6900369024388224},{"column":"unit_price","similarity":0.6660264997212797},{"column":"line_total","similarity":0.649395314588063}],"purchase_orders":[{"column":"total","similarity":0.6764211066970435},{"column":"subtotal","similarity":0.6567665860213302},{"column":"shipping_cost","similarity":0.65414342449199}],"currencies":[{"column":"exchange_rate","similarity":0.6392996583071135}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6332497450599537}],"po_lines":[{"column":"unit_cost","similarity":0.6282439661872448},{"column":"quantity_received","similarity":0.6270669349209222},{"column":"line_total","similarity":0.6215823065959345}],"units_of_measure":[{"column":"conversion_factor","similarity":0.6171116889177036}],"vendor_invoice_lines":[{"column":"unit_cost","similarity":0.6160794181570742}],"goods_receipts":[{"column":"po_id","similarity":0.6137867153632621}]},"fused_scores":[{"table":"quote_lines","fused":0.8357009110060611,"table_sim":0.6792514897887778,"col_score":1.070375042831986},{"table":"sales_quotes","fused":0.8124913964171716,"table_sim":0.6542909932605636,"col_score":1.0497920011520836},{"table":"sales_orders","fused":0.7896354087868787,"table_sim":0.6493194652837458,"col_score":1.000109324041578},{"table":"order_lines","fused":0.788771380142075,"table_sim":0.6325855320371501,"col_score":1.0230501522994624},{"table":"purchase_orders","fused":0.769015145412489,"table_sim":0.611822309215676,"col_score":1.0048043997077085},{"table":"po_lines","fused":0.7339050918363458,"table_sim":0.5953235306287724,"col_score":0.9417774336477058},{"table":"product_suppliers","fused":0.6076744489574715,"table_sim":0.5906242515558167,"col_score":0.6332497450599537},{"table":"vendor_invoice_lines","fused":0.5962810052339781,"table_sim":0.5830820632852473,"col_score":0.6160794181570742},{"table":"vendor_invoices","fused":0.3515727532759041,"table_sim":0.5859545887931735,"col_score":0},{"table":"currencies","fused":0.2557198633228454,"table_sim":0,"col_score":0.6392996583071135},{"table":"units_of_measure","fused":0.24684467556708145,"table_sim":0,"col_score":0.6171116889177036},{"table":"goods_receipts","fused":0.1718602803017134,"table_sim":0,"col_score":0.42965070075428347}],"fk_expansion_candidates":24,"fk_expansion_added":0,"fk_expansion_blocked_count":24,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"bank_accounts","reason":"no_evidence"},{"table":"bank_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":58,"total_retrieval_latency_ms":64,"sql_generated":"SELECT AVG(sales_orders.total / NULLIF(sales_quotes.total, 0)) AS conversion_rate FROM sales_orders JOIN sales_quotes ON sales_orders.quote_id = sales_quotes.quote_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":1056}
{"timestamp":"2026-01-29T21:23:34.020Z","query_id":"41c2616d-d4cb-41af-a51d-763f35e48784","question":"List sales orders by sales representative with their totals","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_orders","purchase_orders","order_lines","sales_quotes","sales_regions","vendor_invoices","sales_territories","goods_receipts","po_lines","receipt_lines","sales_opportunities","vendor_invoice_lines"],"tables_from_table_retrieval":8,"tables_from_column_only":6,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.758754229471184},{"table":"sales_orders","similarity":0.7556252264934581},{"table":"purchase_orders","similarity":0.6987531686909988},{"table":"purchase_orders","similarity":0.6886720787474853},{"table":"order_lines","similarity":0.6881373549198537},{"table":"order_lines","similarity":0.6816260009947546},{"table":"sales_quotes","similarity":0.6493819389041919},{"table":"goods_receipts","similarity":0.6456282553665884},{"table":"sales_quotes","similarity":0.6444526679613465},{"table":"sales_territories","similarity":0.6375070500401926},{"table":"sales_territories","similarity":0.6348500168058512},{"table":"sales_regions","similarity":0.628828804219775},{"table":"sales_regions","similarity":0.6277211189501499},{"table":"vendor_invoices","similarity":0.6246861185869929},{"table":"goods_receipts","similarity":0.6233461405058409}],"column_hits_per_table":{"sales_orders":15,"purchase_orders":12,"sales_quotes":6,"order_lines":5,"sales_regions":1,"vendor_invoices":1,"sales_territories":1,"receipt_lines":1,"vendor_invoice_lines":1,"po_lines":3,"goods_receipts":1,"product_suppliers":1,"sales_opportunities":1,"inventory_transactions":1},"top_columns_per_table":{"sales_orders":[{"column":"total","similarity":0.7984816373428206},{"column":"order_number","similarity":0.7376507065051414},{"column":"tax_amount","similarity":0.7355899521470814}],"purchase_orders":[{"column":"total","similarity":0.734096231715997},{"column":"tax_amount","similarity":0.6843265970253858},{"column":"subtotal","similarity":0.6744270570758721}],"sales_quotes":[{"column":"total","similarity":0.6966422036282015},{"column":"status","similarity":0.6606149717330653},{"column":"tax_amount","similarity":0.6474260599431703}],"order_lines":[{"column":"quantity_shipped","similarity":0.6752744675245054},{"column":"line_total","similarity":0.6719261035704387},{"column":"quantity","similarity":0.6483651230587076}],"sales_regions":[{"column":"target_revenue","similarity":0.6591934074166641}],"vendor_invoices":[{"column":"total","similarity":0.6455669148097609}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6413528025002969}],"receipt_lines":[{"column":"quantity_received","similarity":0.6394945951070348}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.6336019163468033}],"po_lines":[{"column":"line_total","similarity":0.6324408227358158},{"column":"quantity_received","similarity":0.6248640275162665},{"column":"quantity","similarity":0.6172166944597351}],"goods_receipts":[{"column":"po_id","similarity":0.6290574732384728}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6285907746616352}],"sales_opportunities":[{"column":"amount","similarity":0.6191854884462563}],"inventory_transactions":[{"column":"quantity","similarity":0.6191435481021224}]},"fused_scores":[{"table":"sales_orders","fused":0.9202979321342314,"table_sim":0.7556252264934581,"col_score":1.1673069905953914},{"table":"purchase_orders","fused":0.8437070593399671,"table_sim":0.6886720787474853,"col_score":1.07625953022869},{"table":"order_lines","fused":0.8134706083207426,"table_sim":0.6816260009947546,"col_score":1.0112375193097247},{"table":"sales_quotes","fused":0.7948136942167225,"table_sim":0.6444526679613465,"col_score":1.0203552335997865},{"table":"sales_regions","fused":0.6403100343367556,"table_sim":0.6277211189501499,"col_score":0.6591934074166641},{"table":"vendor_invoices","fused":0.6330384370761001,"table_sim":0.6246861185869929,"col_score":0.6455669148097609},{"table":"sales_territories","fused":0.5604887947835939,"table_sim":0.6348500168058512,"col_score":0.4489469617502078},{"table":"goods_receipts","fused":0.5501437768102769,"table_sim":0.6233461405058409,"col_score":0.44034023126693095},{"table":"po_lines","fused":0.3779491345975796,"table_sim":0,"col_score":0.944872836493949},{"table":"receipt_lines","fused":0.2557978380428139,"table_sim":0,"col_score":0.6394945951070348},{"table":"vendor_invoice_lines","fused":0.25344076653872133,"table_sim":0,"col_score":0.6336019163468033},{"table":"product_suppliers","fused":0.2514363098646541,"table_sim":0,"col_score":0.6285907746616352},{"table":"sales_opportunities","fused":0.24767419537850255,"table_sim":0,"col_score":0.6191854884462563},{"table":"inventory_transactions","fused":0.24765741924084894,"table_sim":0,"col_score":0.6191435481021224}],"fk_expansion_candidates":24,"fk_expansion_added":2,"fk_expansion_blocked_count":20,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"already_selected"},{"table":"vendor_invoice_lines","reason":"already_selected"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":37,"total_retrieval_latency_ms":43,"sql_generated":"SELECT sr.name AS sales_rep_name, SUM(so.total) AS total_sales FROM sales_orders so JOIN employees e ON so.sales_rep_id = e.employee_id JOIN sales_regions sr ON e.region_id = sr.region_id GROUP BY sr.name;","tables_used_in_sql":[],"total_latency_ms":2925,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T21:23:36.945Z","query_id":"586eca9b-0793-4ed0-a92b-dfde93523dbc","question":"Which products have inventory below their reorder point?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["inventory_levels","reorder_rules","order_lines","sales_orders","purchase_orders","inventory_adjustments","inventory_transactions","products","po_lines","product_suppliers","purchase_requisitions","warehouse_locations"],"tables_from_table_retrieval":10,"tables_from_column_only":6,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_levels","similarity":0.7070801714571546},{"table":"reorder_rules","similarity":0.6993615141081165},{"table":"inventory_levels","similarity":0.6953472951150648},{"table":"reorder_rules","similarity":0.6944993157914898},{"table":"order_lines","similarity":0.6642088827606001},{"table":"order_lines","similarity":0.6572535778016314},{"table":"purchase_orders","similarity":0.6443483426703897},{"table":"inventory_transactions","similarity":0.6416382343377212},{"table":"purchase_orders","similarity":0.633710828585256},{"table":"products","similarity":0.6294483845877934},{"table":"sales_orders","similarity":0.6263982770622627},{"table":"inventory_transactions","similarity":0.6262048632274058},{"table":"inventory_adjustments","similarity":0.625212937166316},{"table":"product_suppliers","similarity":0.6251606663311581},{"table":"po_lines","similarity":0.6147090959093584}],"column_hits_per_table":{"reorder_rules":6,"inventory_levels":7,"order_lines":4,"sales_orders":6,"po_lines":2,"inventory_adjustments":4,"purchase_orders":5,"product_suppliers":1,"inventory_transactions":6,"requisition_lines":1,"warehouse_locations":1,"purchase_requisitions":2,"products":2,"goods_receipts":1,"product_categories":1,"fixed_assets":1},"top_columns_per_table":{"reorder_rules":[{"column":"product_id","similarity":0.6848016931751442},{"column":"reorder_quantity","similarity":0.6637797302393366},{"column":"min_quantity","similarity":0.6574207762819531}],"inventory_levels":[{"column":"last_count_date","similarity":0.6817961261538734},{"column":"quantity_on_hand","similarity":0.6695351192378397},{"column":"product_id","similarity":0.6682884756083407}],"order_lines":[{"column":"product_id","similarity":0.6691954780163692},{"column":"quantity_shipped","similarity":0.637679790857748},{"column":"quantity","similarity":0.6321627156566018}],"sales_orders":[{"column":"order_number","similarity":0.6627704470010616},{"column":"status","similarity":0.6471660709577013},{"column":"order_date","similarity":0.6389517822162246}],"po_lines":[{"column":"product_id","similarity":0.6504268752720367},{"column":"po_id","similarity":0.6077693680985435}],"inventory_adjustments":[{"column":"status","similarity":0.6479602296650583},{"column":"reason","similarity":0.6457522392027785},{"column":"adjustment_number","similarity":0.6378457218522001}],"purchase_orders":[{"column":"po_number","similarity":0.6474162126096339},{"column":"status","similarity":0.6402955005707206},{"column":"expected_date","similarity":0.6228851654803191}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.641385053356931}],"inventory_transactions":[{"column":"quantity","similarity":0.6375918434746354},{"column":"product_id","similarity":0.637542414223907},{"column":"location_id","similarity":0.6341790276928759}],"requisition_lines":[{"column":"product_id","similarity":0.6314296366225383}],"warehouse_locations":[{"column":"aisle","similarity":0.6303878312508351}],"purchase_requisitions":[{"column":"requisition_number","similarity":0.6234744184832554},{"column":"status","similarity":0.6170438229673241}],"products":[{"column":"list_price","similarity":0.6178030633511985},{"column":"category_id","similarity":0.6099738535155036}],"goods_receipts":[{"column":"po_id","similarity":0.6089214662001797}],"product_categories":[{"column":"is_active","similarity":0.6087500213588084}],"fixed_assets":[{"column":"po_id","similarity":0.6068785699474105}]},"fused_scores":[{"table":"inventory_levels","fused":0.8238338513781562,"table_sim":0.6953472951150648,"col_score":1.0165636857727933},{"table":"reorder_rules","fused":0.8136956368270192,"table_sim":0.6944993157914898,"col_score":0.9924901183803131},{"table":"order_lines","fused":0.7758566061553984,"table_sim":0.6572535778016314,"col_score":0.9537611486860489},{"table":"sales_orders","fused":0.7687375014810272,"table_sim":0.6263982770622627,"col_score":0.9822463381091739},{"table":"purchase_orders","fused":0.7637700152910709,"table_sim":0.633710828585256,"col_score":0.9588587953497935},{"table":"inventory_adjustments","fused":0.760997802351341,"table_sim":0.625212937166316,"col_score":0.9646751001288785},{"table":"inventory_transactions","fused":0.7558706146181744,"table_sim":0.6262048632274058,"col_score":0.9503692417043273},{"table":"products","fused":0.7101865955853259,"table_sim":0.6294483845877934,"col_score":0.8312939120816247},{"table":"po_lines","fused":0.6360326941555814,"table_sim":0.6147090959093584,"col_score":0.6680180915249159},{"table":"product_suppliers","fused":0.6316504211414673,"table_sim":0.6251606663311581,"col_score":0.641385053356931},{"table":"purchase_requisitions","fused":0.33577590260872753,"table_sim":0,"col_score":0.8394397565218188},{"table":"warehouse_locations","fused":0.25215513250033406,"table_sim":0,"col_score":0.6303878312508351},{"table":"requisition_lines","fused":0.1768002982543107,"table_sim":0,"col_score":0.44200074563577674},{"table":"goods_receipts","fused":0.17049801053605032,"table_sim":0,"col_score":0.4262450263401258},{"table":"product_categories","fused":0.17045000598046633,"table_sim":0,"col_score":0.42612501495116584}],"fk_expansion_candidates":38,"fk_expansion_added":2,"fk_expansion_blocked_count":34,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"already_selected"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"already_selected"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":44,"total_retrieval_latency_ms":52,"sql_generated":"SELECT p.product_id, p.name FROM products p INNER JOIN (SELECT i.product_id, SUM(i.quantity) AS total_inventory, r.min_quantity AS min_reorder_qty FROM inventory_levels i INNER JOIN reorder_rules r ON i.product_id = r.product_id GROUP BY i.product_id, r.min_quantity;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42601","error_message":"syntax error at or near \";\"","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":0,"autocorrect_failure_reason":"No candidates found for column 'quantity'","total_latency_ms":4339,"failure_type":"llm_reasoning","failure_details":"SQL error 42601: Database error after 3 attempts: syntax error at or near \";\""}
{"timestamp":"2026-01-29T21:23:41.285Z","query_id":"e4309d3c-7b16-4848-bb61-40877730854d","question":"Show total inventory value by warehouse","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["inventory_levels","warehouse_locations","inventory_transactions","warehouses","inventory_adjustments","stock_transfers","goods_receipts","receipt_lines","sales_orders","depreciation_entries","fixed_assets","products"],"tables_from_table_retrieval":8,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_levels","similarity":0.7104203582862987},{"table":"inventory_levels","similarity":0.7062958755605335},{"table":"inventory_transactions","similarity":0.680757846413893},{"table":"inventory_transactions","similarity":0.6765591263871731},{"table":"warehouse_locations","similarity":0.6696147841460903},{"table":"warehouse_locations","similarity":0.6688272683283106},{"table":"inventory_adjustments","similarity":0.6606002830367331},{"table":"warehouses","similarity":0.6556396900395098},{"table":"warehouses","similarity":0.6549847651325709},{"table":"goods_receipts","similarity":0.6485940357294664},{"table":"inventory_adjustments","similarity":0.6481714490174519},{"table":"goods_receipts","similarity":0.6379928894794815},{"table":"stock_transfers","similarity":0.6361222068277603},{"table":"stock_transfers","similarity":0.633077636432587},{"table":"receipt_lines","similarity":0.599261793575482}],"column_hits_per_table":{"inventory_levels":8,"inventory_transactions":7,"goods_receipts":1,"inventory_adjustments":2,"warehouse_locations":7,"warehouses":6,"sales_orders":4,"stock_transfers":2,"vendor_invoices":1,"purchase_orders":1,"budgets":1,"sales_quotes":1,"receipt_lines":1,"product_suppliers":1,"departments":1,"depreciation_entries":2,"reorder_rules":1,"products":2,"fixed_assets":1},"top_columns_per_table":{"inventory_levels":[{"column":"warehouse_id","similarity":0.708722514782743},{"column":"quantity_available","similarity":0.6604112553081857},{"column":"location_id","similarity":0.6602421519261215}],"inventory_transactions":[{"column":"warehouse_id","similarity":0.6993416090005563},{"column":"quantity","similarity":0.689333383144765},{"column":"location_id","similarity":0.660944351084026}],"goods_receipts":[{"column":"warehouse_id","similarity":0.688838466629484}],"inventory_adjustments":[{"column":"warehouse_id","similarity":0.6887282990877287},{"column":"adjusted_by","similarity":0.5981689946700227}],"warehouse_locations":[{"column":"capacity","similarity":0.6827158501951326},{"column":"warehouse_id","similarity":0.662666484484188},{"column":"aisle","similarity":0.6432371700626858}],"warehouses":[{"column":"warehouse_id","similarity":0.6820022612136065},{"column":"code","similarity":0.6539272965859065},{"column":"manager_id","similarity":0.6485538115680078}],"sales_orders":[{"column":"total","similarity":0.6722495952714556},{"column":"shipping_cost","similarity":0.60704061712735},{"column":"tax_amount","similarity":0.6052565462982356}],"stock_transfers":[{"column":"to_warehouse_id","similarity":0.6688782877276971},{"column":"from_warehouse_id","similarity":0.6625944072749643}],"vendor_invoices":[{"column":"total","similarity":0.6650649265799957}],"purchase_orders":[{"column":"total","similarity":0.6529876873319977}],"budgets":[{"column":"total_amount","similarity":0.6288992519439089}],"sales_quotes":[{"column":"total","similarity":0.6183165548964591}],"receipt_lines":[{"column":"location_id","similarity":0.6178862177295927}],"product_suppliers":[{"column":"unit_cost","similarity":0.6136774418242915}],"departments":[{"column":"budget","similarity":0.6126737864581466}],"depreciation_entries":[{"column":"book_value","similarity":0.6106026426926224},{"column":"amount","similarity":0.6023684484447284}],"reorder_rules":[{"column":"warehouse_id","similarity":0.6057139616644429}],"products":[{"column":"unit_cost","similarity":0.6047858628133291},{"column":"list_price","similarity":0.599736955772572}],"fixed_assets":[{"column":"disposal_amount","similarity":0.6025646944840113}]},"fused_scores":[{"table":"inventory_levels","fused":0.819440334599304,"table_sim":0.7062958755605335,"col_score":0.9891570231574598},{"table":"warehouse_locations","fused":0.8030301350875766,"table_sim":0.6688272683283106,"col_score":1.0043344352264754},{"table":"inventory_transactions","fused":0.7795766543502878,"table_sim":0.6765591263871731,"col_score":0.9341029462949597},{"table":"warehouses","fused":0.7500420942838101,"table_sim":0.6549847651325709,"col_score":0.8926280880106688},{"table":"inventory_adjustments","fused":0.7245924291507623,"table_sim":0.6481714490174519,"col_score":0.8392238993507277},{"table":"stock_transfers","fused":0.6598957194418024,"table_sim":0.633077636432587,"col_score":0.7001228439556254},{"table":"goods_receipts","fused":0.5756705043439444,"table_sim":0.6379928894794815,"col_score":0.4821869266406388},{"table":"receipt_lines","fused":0.5325652171095752,"table_sim":0.599261793575482,"col_score":0.4325203524107149},{"table":"sales_orders","fused":0.3903079615340523,"table_sim":0,"col_score":0.9757699038351306},{"table":"depreciation_entries","fused":0.3647147467659947,"table_sim":0,"col_score":0.9117868669149867},{"table":"products","fused":0.3618617362798461,"table_sim":0,"col_score":0.9046543406996151},{"table":"vendor_invoices","fused":0.2660259706319983,"table_sim":0,"col_score":0.6650649265799957},{"table":"purchase_orders","fused":0.2611950749327991,"table_sim":0,"col_score":0.6529876873319977},{"table":"budgets","fused":0.25155970077756357,"table_sim":0,"col_score":0.6288992519439089},{"table":"sales_quotes","fused":0.24732662195858365,"table_sim":0,"col_score":0.6183165548964591}],"fk_expansion_candidates":28,"fk_expansion_added":2,"fk_expansion_blocked_count":20,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fixed_assets","reason":"already_selected"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"already_selected"},{"table":"purchase_orders","reason":"max_tables"},{"table":"purchase_orders","reason":"max_tables"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"sales_quotes","reason":"max_tables"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":25,"total_retrieval_latency_ms":31,"sql_generated":"SELECT w.warehouse_id, SUM(i.quantity * p.unit_cost) AS total_inventory_value FROM warehouses w JOIN inventory_levels i ON w.warehouse_id = i.warehouse_id JOIN products p ON i.product_id = p.product_id GROUP BY w.warehouse_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column i.quantity does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":1,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":3483,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column i.quantity does not exist"}
{"timestamp":"2026-01-29T21:23:44.769Z","query_id":"8e21449d-f002-4238-ab5d-632fff93856d","question":"List products that had stock transfers in the last 30 days","attempt_count":2,"retry_succeeded":true,"execution_success":true,"retriever_version":"V2","tables_retrieved":["stock_transfers","asset_transfers","product_suppliers","transfer_lines","products","purchase_orders","inventory_transactions","goods_receipts","fixed_assets","sales_orders","asset_maintenance","inventory_levels"],"tables_from_table_retrieval":9,"tables_from_column_only":9,"tables_from_fk_expansion":2,"table_scores":[{"table":"stock_transfers","similarity":0.7091850354041176},{"table":"stock_transfers","similarity":0.7011965090595027},{"table":"transfer_lines","similarity":0.6496835362341594},{"table":"transfer_lines","similarity":0.646870577681612},{"table":"asset_transfers","similarity":0.5968754380180706},{"table":"asset_transfers","similarity":0.59288750153646},{"table":"product_suppliers","similarity":0.5817884382151997},{"table":"product_suppliers","similarity":0.5745779979943767},{"table":"goods_receipts","similarity":0.5680812156740983},{"table":"products","similarity":0.5634067444500328},{"table":"goods_receipts","similarity":0.5627684399196974},{"table":"inventory_transactions","similarity":0.5602292192430635},{"table":"purchase_orders","similarity":0.5596151991091506},{"table":"fixed_assets","similarity":0.5580960077160902},{"table":"products","similarity":0.5572888379886506}],"column_hits_per_table":{"stock_transfers":9,"asset_transfers":4,"fixed_assets":1,"product_suppliers":2,"products":5,"goods_receipts":2,"sales_orders":4,"transfer_lines":3,"sales_opportunities":2,"purchase_orders":3,"bank_transactions":2,"inventory_adjustments":1,"inventory_transactions":3,"asset_maintenance":1,"purchase_requisitions":3,"sales_quotes":3,"inventory_levels":1,"vendor_invoices":1},"top_columns_per_table":{"stock_transfers":[{"column":"transfer_date","similarity":0.7499168921470162},{"column":"requested_date","similarity":0.7345265492490073},{"column":"status","similarity":0.7330447738209374}],"asset_transfers":[{"column":"transfer_date","similarity":0.6805213481174137},{"column":"reason","similarity":0.6364549306171452},{"column":"transferred_by","similarity":0.5760045825951514}],"fixed_assets":[{"column":"purchase_date","similarity":0.6273418627780806}],"product_suppliers":[{"column":"lead_time_days","similarity":0.6226272716760114},{"column":"vendor_sku","similarity":0.5886978994384543}],"products":[{"column":"sku","similarity":0.6116137990281642},{"column":"weight","similarity":0.6100903093863776},{"column":"name","similarity":0.6058188658015616}],"goods_receipts":[{"column":"receipt_date","similarity":0.6110182471068999},{"column":"notes","similarity":0.5904748926703712}],"sales_orders":[{"column":"ship_date","similarity":0.6099316067185375},{"column":"order_date","similarity":0.5959651780199162},{"column":"status","similarity":0.5956583941840918}],"transfer_lines":[{"column":"transfer_id","similarity":0.6075867978368561},{"column":"product_id","similarity":0.5992251210020744},{"column":"quantity_transferred","similarity":0.5858026631707312}],"sales_opportunities":[{"column":"actual_close_date","similarity":0.6030406652697254},{"column":"expected_close_date","similarity":0.5875094961690548}],"purchase_orders":[{"column":"status","similarity":0.5975839583778322},{"column":"order_date","similarity":0.5938817441678782},{"column":"expected_date","similarity":0.589876682073089}],"bank_transactions":[{"column":"transaction_date","similarity":0.5964828803092368},{"column":"reconciled","similarity":0.5699506323088029}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.5938851055262241}],"inventory_transactions":[{"column":"transaction_date","similarity":0.5868513506524482},{"column":"transaction_type","similarity":0.5727879607007047},{"column":"reference_type","similarity":0.5713153140670767}],"asset_maintenance":[{"column":"completed_date","similarity":0.5867606193386766}],"purchase_requisitions":[{"column":"status","similarity":0.5827865883224072},{"column":"approved_date","similarity":0.5710456887653464},{"column":"notes","similarity":0.5705665600863868}],"sales_quotes":[{"column":"status","similarity":0.5826553998030811},{"column":"valid_until","similarity":0.5817087714931044},{"column":"quote_date","similarity":0.5733265296465615}],"inventory_levels":[{"column":"last_count_date","similarity":0.5783828724054709}],"vendor_invoices":[{"column":"status","similarity":0.5680190001288683}]},"fused_scores":[{"table":"stock_transfers","fused":0.8675899721443094,"table_sim":0.7011965090595027,"col_score":1.1171801667715198},{"table":"asset_transfers","fused":0.7552320262922705,"table_sim":0.59288750153646,"col_score":0.9987488134259863},{"table":"product_suppliers","fused":0.7115372873547214,"table_sim":0.5745779979943767,"col_score":0.9169762213952386},{"table":"transfer_lines","fused":0.7075055635744195,"table_sim":0.646870577681612,"col_score":0.7984580424136307},{"table":"products","fused":0.7010368842817316,"table_sim":0.5572888379886506,"col_score":0.916658953721353},{"table":"purchase_orders","fused":0.6912971535472594,"table_sim":0.5596151991091506,"col_score":0.8888200852044227},{"table":"inventory_transactions","fused":0.6854356639469583,"table_sim":0.5602292192430635,"col_score":0.8732453310028006},{"table":"goods_receipts","fused":0.6647348477684304,"table_sim":0.5627684399196974,"col_score":0.8176844595415298},{"table":"fixed_assets","fused":0.5857943497408864,"table_sim":0.5580960077160902,"col_score":0.6273418627780806},{"table":"sales_orders","fused":0.3631656782913983,"table_sim":0,"col_score":0.9079141957284956},{"table":"sales_opportunities","fused":0.35871816534170115,"table_sim":0,"col_score":0.8967954133542528},{"table":"bank_transactions","fused":0.35258327858545535,"table_sim":0,"col_score":0.8814581964636383},{"table":"sales_quotes","fused":0.3473488145265541,"table_sim":0,"col_score":0.8683720363163852},{"table":"purchase_requisitions","fused":0.3100083978712756,"table_sim":0,"col_score":0.775020994678189},{"table":"inventory_adjustments","fused":0.23755404221048965,"table_sim":0,"col_score":0.5938851055262241}],"fk_expansion_candidates":48,"fk_expansion_added":2,"fk_expansion_blocked_count":40,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_maintenance","reason":"already_selected"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"inventory_levels","reason":"already_selected"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"sales_quotes","reason":"max_tables"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":35,"total_retrieval_latency_ms":43,"sql_generated":"SELECT DISTINCT p.product_id, p.name FROM products p INNER JOIN transfer_lines tl ON p.product_id = tl.product_id INNER JOIN stock_transfers st ON tl.transfer_id = st.transfer_id WHERE st.transfer_date >= CURRENT_DATE - INTERVAL '30 days';","tables_used_in_sql":[],"explain_result":"success","rows_returned":0,"total_latency_ms":2452}
{"timestamp":"2026-01-29T21:23:47.221Z","query_id":"5e4eb866-1e01-4358-a7ea-9ce1dad628e3","question":"What is the total spend by vendor this year?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["vendor_invoices","purchase_orders","vendors","vendor_invoice_lines","project_expenses","project_budgets","product_suppliers","budgets","vendor_contacts","sales_orders","budget_lines","fiscal_years"],"tables_from_table_retrieval":10,"tables_from_column_only":9,"tables_from_fk_expansion":2,"table_scores":[{"table":"vendor_invoices","similarity":0.6440970715159303},{"table":"vendor_invoices","similarity":0.639424435349415},{"table":"vendors","similarity":0.6244918790926227},{"table":"purchase_orders","similarity":0.6205493350711797},{"table":"vendors","similarity":0.6183112819198846},{"table":"purchase_orders","similarity":0.6177456671712362},{"table":"product_suppliers","similarity":0.598703660216106},{"table":"fiscal_years","similarity":0.5958886040093712},{"table":"project_expenses","similarity":0.5917559199865416},{"table":"project_expenses","similarity":0.5906949409227156},{"table":"product_suppliers","similarity":0.5892637416806026},{"table":"vendor_invoice_lines","similarity":0.5876257579974868},{"table":"vendor_contacts","similarity":0.5871352454607119},{"table":"budgets","similarity":0.5852616673725684},{"table":"project_budgets","similarity":0.5811797344195465}],"column_hits_per_table":{"vendor_invoices":10,"budgets":1,"purchase_orders":6,"vendor_invoice_lines":3,"project_expenses":2,"vendors":8,"sales_orders":2,"project_budgets":2,"product_suppliers":2,"sales_quotes":2,"projects":1,"fixed_assets":3,"products":1,"budget_lines":1,"purchase_requisitions":3,"depreciation_schedules":1,"asset_maintenance":1,"vendor_contacts":1},"top_columns_per_table":{"vendor_invoices":[{"column":"total","similarity":0.7062529607669469},{"column":"tax_amount","similarity":0.6569420170620686},{"column":"amount_paid","similarity":0.6525110251426526}],"budgets":[{"column":"total_amount","similarity":0.6533596429158817}],"purchase_orders":[{"column":"total","similarity":0.6425370855623833},{"column":"tax_amount","similarity":0.6174757294901109},{"column":"vendor_id","similarity":0.5942535542023611}],"vendor_invoice_lines":[{"column":"amount","similarity":0.6414203627446952},{"column":"unit_cost","similarity":0.6384854706402397},{"column":"quantity","similarity":0.6008819172893124}],"project_expenses":[{"column":"expense_date","similarity":0.6302596278500101},{"column":"amount","similarity":0.6115972025931361}],"vendors":[{"column":"payment_terms","similarity":0.6287317824441854},{"column":"vendor_number","similarity":0.616273209887938},{"column":"phone","similarity":0.6119598101701121}],"sales_orders":[{"column":"total","similarity":0.6273962434957814},{"column":"tax_amount","similarity":0.5927580498428531}],"project_budgets":[{"column":"actual_amount","similarity":0.6245219111397344},{"column":"planned_amount","similarity":0.6076385195194554}],"product_suppliers":[{"column":"unit_cost","similarity":0.6202704837989403},{"column":"vendor_id","similarity":0.5815547843350841}],"sales_quotes":[{"column":"total","similarity":0.6161006991687307},{"column":"tax_amount","similarity":0.587895729360088}],"projects":[{"column":"budget","similarity":0.6100628879936848}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5986646089942808},{"column":"purchase_date","similarity":0.5961819068723165},{"column":"vendor_id","similarity":0.5938842221789269}],"products":[{"column":"unit_cost","similarity":0.5940432927972419}],"budget_lines":[{"column":"amount","similarity":0.5917264745538887}],"purchase_requisitions":[{"column":"approved_date","similarity":0.5905370205856212},{"column":"request_date","similarity":0.5860336743159205},{"column":"required_date","similarity":0.5847709356931721}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5876422769577351}],"asset_maintenance":[{"column":"vendor_id","similarity":0.5863680456887999}],"vendor_contacts":[{"column":"phone","similarity":0.5837764500936985}]},"fused_scores":[{"table":"vendor_invoices","fused":0.7975442489288413,"table_sim":0.639424435349415,"col_score":1.034723969297981},{"table":"purchase_orders","fused":0.7511573804257172,"table_sim":0.6177456671712362,"col_score":0.9512749503074387},{"table":"vendors","fused":0.7457341241071925,"table_sim":0.6183112819198846,"col_score":0.9368683873881544},{"table":"vendor_invoice_lines","fused":0.7368406940244181,"table_sim":0.5876257579974868,"col_score":0.960663098064815},{"table":"project_expenses","fused":0.7288402562122607,"table_sim":0.5906949409227156,"col_score":0.9360582291465782},{"table":"project_budgets","fused":0.7200443090115127,"table_sim":0.5811797344195465,"col_score":0.9283411708994621},{"table":"product_suppliers","fused":0.6830841083348494,"table_sim":0.5892637416806026,"col_score":0.8238146583162198},{"table":"budgets","fused":0.6125008575898936,"table_sim":0.5852616673725684,"col_score":0.6533596429158817},{"table":"vendor_contacts","fused":0.5857917273139066,"table_sim":0.5871352454607119,"col_score":0.5837764500936985},{"table":"sales_orders","fused":0.36951010736688317,"table_sim":0,"col_score":0.9237752684172079},{"table":"sales_quotes","fused":0.36401942553950994,"table_sim":0,"col_score":0.9100485638487747},{"table":"fixed_assets","fused":0.35870222497217563,"table_sim":0,"col_score":0.8967555624304391},{"table":"fiscal_years","fused":0.35753316240562266,"table_sim":0.5958886040093712,"col_score":0},{"table":"purchase_requisitions","fused":0.35342154309743257,"table_sim":0,"col_score":0.8835538577435814},{"table":"projects","fused":0.24402515519747392,"table_sim":0,"col_score":0.6100628879936848}],"fk_expansion_candidates":34,"fk_expansion_added":2,"fk_expansion_blocked_count":20,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"budget_lines","reason":"already_selected"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"already_selected"},{"table":"fixed_assets","reason":"max_tables"},{"table":"fixed_assets","reason":"max_tables"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"max_tables"},{"table":"products","reason":"max_tables"},{"table":"projects","reason":"max_tables"},{"table":"projects","reason":"max_tables"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"sales_quotes","reason":"max_tables"},{"table":"sales_quotes","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":36,"total_retrieval_latency_ms":42,"sql_generated":"SELECT SUM(vendor_invoice_lines.amount) AS total_spend FROM vendor_invoices JOIN vendor_invoice_lines ON vendor_invoices.po_id = vendor_invoice_lines.po_line_id WHERE EXTRACT(YEAR FROM invoice_date) = EXTRAINVENT_DATE;","tables_used_in_sql":[],"total_latency_ms":3822,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T21:23:51.043Z","query_id":"265e6c86-af3f-4c52-826b-76786e977439","question":"List purchase orders that are overdue (expected date passed but not received)","attempt_count":2,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["purchase_orders","sales_orders","purchase_requisitions","vendor_invoices","goods_receipts","po_lines","order_lines","performance_reviews","sales_quotes","requisition_lines","fixed_assets","sales_opportunities"],"tables_from_table_retrieval":8,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"purchase_orders","similarity":0.6892780734130105},{"table":"purchase_orders","similarity":0.6877847923105723},{"table":"sales_orders","similarity":0.6436897773327827},{"table":"goods_receipts","similarity":0.6352418457409176},{"table":"sales_orders","similarity":0.6345390772398959},{"table":"purchase_requisitions","similarity":0.6320653594363884},{"table":"purchase_requisitions","similarity":0.6281214571607268},{"table":"order_lines","similarity":0.6266578306760409},{"table":"order_lines","similarity":0.6173850449941319},{"table":"goods_receipts","similarity":0.6145302746290987},{"table":"po_lines","similarity":0.608403654282929},{"table":"vendor_invoices","similarity":0.6080136686064002},{"table":"po_lines","similarity":0.6011866959038077},{"table":"vendor_invoices","similarity":0.5870658889261016},{"table":"requisition_lines","similarity":0.5693577300655596}],"column_hits_per_table":{"purchase_orders":15,"sales_orders":8,"purchase_requisitions":6,"vendor_invoices":3,"fixed_assets":1,"performance_reviews":3,"stock_transfers":1,"goods_receipts":2,"sales_opportunities":1,"po_lines":2,"order_lines":1,"sales_quotes":3,"timesheets":2,"inventory_transactions":1,"employee_certifications":1},"top_columns_per_table":{"purchase_orders":[{"column":"expected_date","similarity":0.7914963653938238},{"column":"order_date","similarity":0.7635502937685905},{"column":"status","similarity":0.747639644500421}],"sales_orders":[{"column":"order_date","similarity":0.7235546305466264},{"column":"required_date","similarity":0.7185386655573599},{"column":"ship_date","similarity":0.7100060695804065}],"purchase_requisitions":[{"column":"request_date","similarity":0.6846871495702603},{"column":"approved_date","similarity":0.6846235647380197},{"column":"required_date","similarity":0.6803613753458558}],"vendor_invoices":[{"column":"due_date","similarity":0.6486808836793426},{"column":"invoice_date","similarity":0.633314911035975},{"column":"status","similarity":0.6320046740385495}],"fixed_assets":[{"column":"purchase_date","similarity":0.6483597718886084}],"performance_reviews":[{"column":"review_date","similarity":0.6402500237578782},{"column":"review_period_end","similarity":0.6181137197537518},{"column":"review_period_start","similarity":0.6090541573304037}],"stock_transfers":[{"column":"requested_date","similarity":0.6397536436713247}],"goods_receipts":[{"column":"receipt_date","similarity":0.6320711731665748},{"column":"po_id","similarity":0.6150599127133874}],"sales_opportunities":[{"column":"expected_close_date","similarity":0.627425520789371}],"po_lines":[{"column":"po_id","similarity":0.621403776034774},{"column":"quantity_received","similarity":0.6133005378966102}],"order_lines":[{"column":"quantity_shipped","similarity":0.6213051311566832}],"sales_quotes":[{"column":"status","similarity":0.6196764702539621},{"column":"valid_until","similarity":0.6117760233170634},{"column":"quote_date","similarity":0.6084274483307646}],"timesheets":[{"column":"approved_date","similarity":0.6125536693705684},{"column":"status","similarity":0.6090778000186181}],"inventory_transactions":[{"column":"transaction_date","similarity":0.610775225230928}],"employee_certifications":[{"column":"obtained_date","similarity":0.6043033574871731}]},"fused_scores":[{"table":"purchase_orders","fused":0.8819794802975911,"table_sim":0.6877847923105723,"col_score":1.1732715122781192},{"table":"sales_orders","fused":0.81385303167406,"table_sim":0.6345390772398959,"col_score":1.0828239633253063},{"table":"purchase_requisitions","fused":0.7876724470721441,"table_sim":0.6281214571607268,"col_score":1.02699893193927},{"table":"vendor_invoices","fused":0.738374869034593,"table_sim":0.5870658889261016,"col_score":0.9653383391973301},{"table":"goods_receipts","fused":0.7076550218239634,"table_sim":0.6145302746290987,"col_score":0.8473421426162604},{"table":"po_lines","fused":0.693028761345797,"table_sim":0.6011866959038077,"col_score":0.8307918595087811},{"table":"order_lines","fused":0.6189530794591525,"table_sim":0.6173850449941319,"col_score":0.6213051311566832},{"table":"performance_reviews","fused":0.37972275345390166,"table_sim":0,"col_score":0.9493068836347541},{"table":"sales_quotes","fused":0.3663958989929783,"table_sim":0,"col_score":0.9159897474824457},{"table":"requisition_lines","fused":0.3416146380393357,"table_sim":0.5693577300655596,"col_score":0},{"table":"timesheets","fused":0.33029235975083393,"table_sim":0,"col_score":0.8257308993770848},{"table":"fixed_assets","fused":0.2593439087554434,"table_sim":0,"col_score":0.6483597718886084},{"table":"stock_transfers","fused":0.2559014574685299,"table_sim":0,"col_score":0.6397536436713247},{"table":"sales_opportunities","fused":0.2509702083157484,"table_sim":0,"col_score":0.627425520789371},{"table":"inventory_transactions","fused":0.2443100900923712,"table_sim":0,"col_score":0.610775225230928}],"fk_expansion_candidates":24,"fk_expansion_added":2,"fk_expansion_blocked_count":20,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"already_selected"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"already_selected"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":43,"total_retrieval_latency_ms":50,"sql_generated":"","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column po.po_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":2,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":4381,"failure_type":"execution_error","failure_details":"Model did not generate SELECT statement"}
{"timestamp":"2026-01-29T21:23:55.424Z","query_id":"ae7cf53d-5825-4120-a819-1c8f72aee3f8","question":"Show the approval rate for purchase requisitions","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["purchase_requisitions","purchase_orders","requisition_lines","performance_reviews","sales_orders","inventory_adjustments","vendor_invoices","tax_rates","fixed_assets","timesheets","order_lines","po_lines"],"tables_from_table_retrieval":9,"tables_from_column_only":9,"tables_from_fk_expansion":2,"table_scores":[{"table":"purchase_requisitions","similarity":0.7226292162446724},{"table":"purchase_requisitions","similarity":0.7144537875190509},{"table":"purchase_orders","similarity":0.6838035609323098},{"table":"purchase_orders","similarity":0.6754585362390629},{"table":"requisition_lines","similarity":0.6574096478940754},{"table":"requisition_lines","similarity":0.6526067337493826},{"table":"performance_reviews","similarity":0.5761025171829891},{"table":"sales_orders","similarity":0.5687655577174364},{"table":"vendor_invoices","similarity":0.5649116344007853},{"table":"performance_reviews","similarity":0.5638451623641205},{"table":"vendor_invoices","similarity":0.5620813724541878},{"table":"sales_orders","similarity":0.5600540620423634},{"table":"po_lines","similarity":0.557826396766789},{"table":"inventory_adjustments","similarity":0.5560987141173879},{"table":"tax_rates","similarity":0.5556126665897644}],"column_hits_per_table":{"purchase_requisitions":11,"purchase_orders":11,"requisition_lines":5,"performance_reviews":3,"inventory_adjustments":1,"fixed_assets":2,"order_lines":1,"budgets":1,"timesheets":2,"sales_orders":5,"employee_salaries":1,"project_expenses":1,"quote_lines":1,"tax_rates":1,"vendor_invoices":1,"product_suppliers":2,"project_resources":1},"top_columns_per_table":{"purchase_requisitions":[{"column":"approved_date","similarity":0.7766675210993076},{"column":"approved_by","similarity":0.7199034718995457},{"column":"status","similarity":0.7073786073810431}],"purchase_orders":[{"column":"approved_by","similarity":0.6705580315294349},{"column":"requisition_id","similarity":0.6613289750833529},{"column":"total","similarity":0.6594363248888107}],"requisition_lines":[{"column":"requisition_id","similarity":0.6370319480171334},{"column":"estimated_total","similarity":0.6269887433093003},{"column":"estimated_unit_cost","similarity":0.625934325952803}],"performance_reviews":[{"column":"goals_met_percent","similarity":0.6195475886627112},{"column":"rating","similarity":0.5921179439607568},{"column":"review_date","similarity":0.5730063449640999}],"inventory_adjustments":[{"column":"approved_by","similarity":0.6149213210803182}],"fixed_assets":[{"column":"purchase_cost","similarity":0.6114883686057044},{"column":"purchase_date","similarity":0.5785038067743914}],"order_lines":[{"column":"discount_percent","similarity":0.6106530783790173}],"budgets":[{"column":"approved_by","similarity":0.602834670385188}],"timesheets":[{"column":"approved_date","similarity":0.5978626810289969},{"column":"approved_by","similarity":0.5903213401616674}],"sales_orders":[{"column":"total","similarity":0.5972436821987498},{"column":"status","similarity":0.5843282149659323},{"column":"tax_amount","similarity":0.5804608469563398}],"employee_salaries":[{"column":"approved_by","similarity":0.593883247254701}],"project_expenses":[{"column":"approved_by","similarity":0.5842337880872422}],"quote_lines":[{"column":"discount_percent","similarity":0.5811124096463001}],"tax_rates":[{"column":"rate","similarity":0.5763708905847392}],"vendor_invoices":[{"column":"total","similarity":0.5756181171303799}],"product_suppliers":[{"column":"is_preferred","similarity":0.5726740078455087},{"column":"minimum_order_qty","similarity":0.5720268431578629}],"project_resources":[{"column":"hourly_rate","similarity":0.5723431863834083}]},"fused_scores":[{"table":"purchase_requisitions","fused":0.8833199753310628,"table_sim":0.7144537875190509,"col_score":1.1366192570490805},{"table":"purchase_orders","fused":0.8053855993329739,"table_sim":0.6754585362390629,"col_score":1.0002761939738403},{"table":"requisition_lines","fused":0.7675464027639103,"table_sim":0.6526067337493826,"col_score":0.9399559062857018},{"table":"performance_reviews","fused":0.7045497216757082,"table_sim":0.5638451623641205,"col_score":0.9156065606430897},{"table":"sales_orders","fused":0.6910220794961859,"table_sim":0.5600540620423634,"col_score":0.8874741056769198},{"table":"inventory_adjustments","fused":0.57962775690256,"table_sim":0.5560987141173879,"col_score":0.6149213210803182},{"table":"vendor_invoices","fused":0.5674960703246646,"table_sim":0.5620813724541878,"col_score":0.5756181171303799},{"table":"tax_rates","fused":0.5639159561877543,"table_sim":0.5556126665897644,"col_score":0.5763708905847392},{"table":"fixed_assets","fused":0.36029610879716006,"table_sim":0,"col_score":0.9007402719929001},{"table":"timesheets","fused":0.35720934044393227,"table_sim":0,"col_score":0.8930233511098306},{"table":"product_suppliers","fused":0.3434749717697761,"table_sim":0,"col_score":0.8586874294244402},{"table":"po_lines","fused":0.3346958380600734,"table_sim":0.557826396766789,"col_score":0},{"table":"order_lines","fused":0.24426123135160693,"table_sim":0,"col_score":0.6106530783790173},{"table":"budgets","fused":0.24113386815407523,"table_sim":0,"col_score":0.602834670385188},{"table":"employee_salaries","fused":0.2375532989018804,"table_sim":0,"col_score":0.593883247254701}],"fk_expansion_candidates":42,"fk_expansion_added":2,"fk_expansion_blocked_count":38,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"countries","reason":"no_evidence"},{"table":"countries","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"order_lines","reason":"already_selected"},{"table":"po_lines","reason":"already_selected"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":40,"total_retrieval_latency_ms":47,"sql_generated":"SELECT COUNT(requisition_id) AS total_approved FROM procurement.purchase_requisitions JOIN procurement.requisition_lines ON purchase_requisitions.requisition_id = requisition_lines.requisition_id WHERE status = 'Approved';","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42P01","error_message":"relation \"procurement.purchase_requisitions\" does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_failure_reason":"Alias 'procurement.purchase_requisitions' not defined. Possible table: purchase_requisitions. Define alias in FROM/JOIN clause.","total_latency_ms":2824,"failure_type":"join_path_miss","failure_details":"Database error after 3 attempts: relation \"procurement.purchase_requisitions\" does not exist"}
{"timestamp":"2026-01-29T21:23:58.248Z","query_id":"56ff4139-05df-4d09-bfa0-d865e543b590","question":"What is the total debit and credit for each account in the current period?","attempt_count":2,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["bank_accounts","depreciation_entries","depreciation_schedules","bank_transactions","chart_of_accounts","asset_categories","fiscal_periods","customers","project_budgets","budget_lines","budgets","sales_orders"],"tables_from_table_retrieval":9,"tables_from_column_only":19,"tables_from_fk_expansion":2,"table_scores":[{"table":"bank_accounts","similarity":0.6774767745272873},{"table":"bank_accounts","similarity":0.6637119412946053},{"table":"depreciation_schedules","similarity":0.6498181514395631},{"table":"depreciation_entries","similarity":0.648921875856853},{"table":"depreciation_entries","similarity":0.6479655202571633},{"table":"depreciation_schedules","similarity":0.6391071490249879},{"table":"bank_transactions","similarity":0.6215432609525777},{"table":"bank_transactions","similarity":0.6186829982985472},{"table":"fiscal_periods","similarity":0.6118740658020915},{"table":"chart_of_accounts","similarity":0.6113283904518393},{"table":"customers","similarity":0.6110220975215452},{"table":"customers","similarity":0.6080143837688108},{"table":"budget_lines","similarity":0.6048243661703417},{"table":"budget_lines","similarity":0.6037171218130077},{"table":"asset_categories","similarity":0.6023939402123736}],"column_hits_per_table":{"bank_accounts":7,"depreciation_entries":8,"depreciation_schedules":7,"budgets":2,"purchase_orders":1,"bank_transactions":2,"vendor_invoices":1,"asset_categories":1,"timesheets":1,"sales_orders":1,"project_budgets":2,"po_lines":1,"requisition_lines":1,"order_lines":1,"chart_of_accounts":1,"quote_lines":1,"journal_lines":1,"departments":1,"sales_quotes":1,"fiscal_periods":1,"project_milestones":1,"account_types":1,"customers":1,"fixed_assets":1,"projects":1,"project_expenses":2,"inventory_levels":1},"top_columns_per_table":{"bank_accounts":[{"column":"current_balance","similarity":0.7091841928818097},{"column":"account_number","similarity":0.6419731099305319},{"column":"is_active","similarity":0.6295019659358201}],"depreciation_entries":[{"column":"amount","similarity":0.6872612675445888},{"column":"accumulated_depreciation","similarity":0.6792929796251425},{"column":"period_id","similarity":0.6616962014495356}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.6798083658343647},{"column":"monthly_amount","similarity":0.6722756292621933},{"column":"start_date","similarity":0.6548042836876464}],"budgets":[{"column":"total_amount","similarity":0.66266591023344},{"column":"status","similarity":0.6029088724565239}],"purchase_orders":[{"column":"total","similarity":0.6385670460750342}],"bank_transactions":[{"column":"amount","similarity":0.628826289554302},{"column":"transaction_date","similarity":0.5968086476507635}],"vendor_invoices":[{"column":"total","similarity":0.6243636979717804}],"asset_categories":[{"column":"depreciation_method","similarity":0.6240014992246529}],"timesheets":[{"column":"total_hours","similarity":0.6227337420930529}],"sales_orders":[{"column":"total","similarity":0.6223028921864684}],"project_budgets":[{"column":"actual_amount","similarity":0.617506824130773},{"column":"planned_amount","similarity":0.5941166158449659}],"po_lines":[{"column":"line_total","similarity":0.616731755167915}],"requisition_lines":[{"column":"estimated_total","similarity":0.6162717841911394}],"order_lines":[{"column":"line_total","similarity":0.6136225013161591}],"chart_of_accounts":[{"column":"account_number","similarity":0.6134827144686594}],"quote_lines":[{"column":"line_total","similarity":0.6119848744133741}],"journal_lines":[{"column":"debit","similarity":0.6106943672167331}],"departments":[{"column":"budget","similarity":0.6102538819136373}],"sales_quotes":[{"column":"total","similarity":0.6078976656380447}],"fiscal_periods":[{"column":"period_number","similarity":0.6051498655202864}],"project_milestones":[{"column":"amount","similarity":0.6026750191107226}],"account_types":[{"column":"normal_balance","similarity":0.6021368217241928}],"customers":[{"column":"credit_limit","similarity":0.6016687157986615}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5989518390574556}],"projects":[{"column":"budget","similarity":0.5989453113679677}],"project_expenses":[{"column":"amount","similarity":0.5956749512175924},{"column":"expense_date","similarity":0.5939500617562942}],"inventory_levels":[{"column":"last_count_date","similarity":0.5932624381452135}]},"fused_scores":[{"table":"bank_accounts","fused":0.8102954639155935,"table_sim":0.6637119412946053,"col_score":1.0301707478470756},{"table":"depreciation_entries","fused":0.799542415097162,"table_sim":0.6479655202571633,"col_score":1.0269077573571601},{"table":"depreciation_schedules","fused":0.7898427616011772,"table_sim":0.6391071490249879,"col_score":1.0159461804654613},{"table":"bank_transactions","fused":0.7421020443310018,"table_sim":0.6186829982985472,"col_score":0.9272306133796837},{"table":"chart_of_accounts","fused":0.6121901200585673,"table_sim":0.6113283904518393,"col_score":0.6134827144686594},{"table":"asset_categories","fused":0.6110369638172852,"table_sim":0.6023939402123736,"col_score":0.6240014992246529},{"table":"fiscal_periods","fused":0.6091843856893695,"table_sim":0.6118740658020915,"col_score":0.6051498655202864},{"table":"customers","fused":0.6054761165807511,"table_sim":0.6080143837688108,"col_score":0.6016687157986615},{"table":"project_budgets","fused":0.3658260528213024,"table_sim":0,"col_score":0.914565132053256},{"table":"budget_lines","fused":0.36223027308780464,"table_sim":0.6037171218130077,"col_score":0},{"table":"project_expenses","fused":0.3570599928382958,"table_sim":0,"col_score":0.8926499820957394},{"table":"budgets","fused":0.3494736062372894,"table_sim":0,"col_score":0.8736840155932234},{"table":"purchase_orders","fused":0.2554268184300137,"table_sim":0,"col_score":0.6385670460750342},{"table":"vendor_invoices","fused":0.24974547918871215,"table_sim":0,"col_score":0.6243636979717804},{"table":"timesheets","fused":0.24909349683722115,"table_sim":0,"col_score":0.6227337420930529}],"fk_expansion_candidates":28,"fk_expansion_added":2,"fk_expansion_blocked_count":24,"fk_expansion_blocked":[{"table":"account_types","reason":"no_evidence"},{"table":"account_types","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"budgets","reason":"already_selected"},{"table":"currencies","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_orders","reason":"already_selected"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":42,"total_retrieval_latency_ms":48,"sql_generated":"","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column bt.gl_account_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":1,"autocorrect_failure_reason":"Best candidate 'chart_of_accounts.account_id' has score 0.65 < threshold 0.7","total_latency_ms":3491,"failure_type":"execution_error","failure_details":"Model did not generate SELECT statement"}
{"timestamp":"2026-01-29T21:24:01.739Z","query_id":"c386a827-7933-475f-b20c-3d0882a7f670","question":"List all posted journal entries for the current month","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["journal_entries","journal_lines","depreciation_entries","timesheet_entries","depreciation_schedules","goods_receipts","fiscal_periods","performance_reviews","timesheets","purchase_orders","fiscal_years"],"tables_from_table_retrieval":8,"tables_from_column_only":10,"tables_from_fk_expansion":1,"table_scores":[{"table":"journal_entries","similarity":0.7371200347881697},{"table":"journal_entries","similarity":0.7337575383913534},{"table":"depreciation_entries","similarity":0.6388628310824237},{"table":"journal_lines","similarity":0.6381042717949331},{"table":"journal_lines","similarity":0.6375228213542982},{"table":"depreciation_entries","similarity":0.620321548516075},{"table":"timesheet_entries","similarity":0.591409348833156},{"table":"timesheet_entries","similarity":0.5779744014930662},{"table":"goods_receipts","similarity":0.5514372844287214},{"table":"depreciation_schedules","similarity":0.5496411130563262},{"table":"fiscal_years","similarity":0.5480778257386096},{"table":"fiscal_years","similarity":0.5469848742333804},{"table":"depreciation_schedules","similarity":0.5458362894331688},{"table":"goods_receipts","similarity":0.5400655622918485},{"table":"fiscal_periods","similarity":0.5399686868510553}],"column_hits_per_table":{"journal_entries":9,"depreciation_entries":5,"journal_lines":7,"timesheet_entries":6,"timesheets":3,"goods_receipts":2,"performance_reviews":3,"purchase_orders":2,"project_budgets":1,"depreciation_schedules":3,"sales_orders":2,"inventory_adjustments":1,"project_milestones":2,"project_expenses":1,"asset_maintenance":1,"inventory_levels":1,"fiscal_periods":1},"top_columns_per_table":{"journal_entries":[{"column":"entry_date","similarity":0.7655855491601273},{"column":"status","similarity":0.7275626775552384},{"column":"description","similarity":0.6934262774097697}],"depreciation_entries":[{"column":"entry_date","similarity":0.6527378197389673},{"column":"journal_entry_id","similarity":0.6264997627243734},{"column":"period_id","similarity":0.5784124082329226}],"journal_lines":[{"column":"debit","similarity":0.6462162662227552},{"column":"entry_id","similarity":0.63445493384167},{"column":"credit","similarity":0.6302297921040358}],"timesheet_entries":[{"column":"entry_date","similarity":0.643149580648736},{"column":"description","similarity":0.5784471414475906},{"column":"is_billable","similarity":0.5646044939625099}],"timesheets":[{"column":"submitted_date","similarity":0.6071227188529923},{"column":"approved_date","similarity":0.558240470220022},{"column":"status","similarity":0.5546176605609148}],"goods_receipts":[{"column":"receipt_date","similarity":0.6069794047492042},{"column":"notes","similarity":0.5874873259337253}],"performance_reviews":[{"column":"review_date","similarity":0.5950094300516277},{"column":"review_period_start","similarity":0.5831041324802553},{"column":"review_period_end","similarity":0.5815085145824492}],"purchase_orders":[{"column":"expected_date","similarity":0.5699322697921354},{"column":"order_date","similarity":0.5626891014743185}],"project_budgets":[{"column":"notes","similarity":0.5673321472292275}],"depreciation_schedules":[{"column":"start_date","similarity":0.5658993130104887},{"column":"end_date","similarity":0.5657267369208648},{"column":"useful_life_months","similarity":0.55595733939211}],"sales_orders":[{"column":"order_date","similarity":0.5624106989815346},{"column":"ship_date","similarity":0.5530449744222993}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.5603354872689613}],"project_milestones":[{"column":"due_date","similarity":0.5592106844491532},{"column":"completed_date","similarity":0.5526238895701121}],"project_expenses":[{"column":"expense_date","similarity":0.5579679430250829}],"asset_maintenance":[{"column":"completed_date","similarity":0.5568546149961348}],"inventory_levels":[{"column":"last_count_date","similarity":0.5485679778292861}],"fiscal_periods":[{"column":"start_date","similarity":0.5482872222538088}]},"fused_scores":[{"table":"journal_entries","fused":0.8831407330933849,"table_sim":0.7337575383913534,"col_score":1.1072155251464324},{"table":"journal_lines","fused":0.7670461577224882,"table_sim":0.6375228213542982,"col_score":0.9613311622747731},{"table":"depreciation_entries","fused":0.7482943452989723,"table_sim":0.620321548516075,"col_score":0.9402535404733183},{"table":"timesheet_entries","fused":0.7169653719478362,"table_sim":0.5779744014930662,"col_score":0.9254518276299909},{"table":"depreciation_schedules","fused":0.6670068462482697,"table_sim":0.5458362894331688,"col_score":0.848762681470921},{"table":"goods_receipts","fused":0.6490793249055123,"table_sim":0.5400655622918485,"col_score":0.812599968826008},{"table":"fiscal_periods","fused":0.5432961010121566,"table_sim":0.5399686868510553,"col_score":0.5482872222538088},{"table":"performance_reviews","fused":0.35462459851670214,"table_sim":0,"col_score":0.8865614962917553},{"table":"timesheets","fused":0.3544971815852013,"table_sim":0,"col_score":0.8862429539630032},{"table":"purchase_orders","fused":0.3405107282117179,"table_sim":0,"col_score":0.8512768205292947},{"table":"sales_orders","fused":0.33557327447707375,"table_sim":0,"col_score":0.8389331861926843},{"table":"project_milestones","fused":0.33420905169368376,"table_sim":0,"col_score":0.8355226292342093},{"table":"fiscal_years","fused":0.32819092454002824,"table_sim":0.5469848742333804,"col_score":0},{"table":"inventory_adjustments","fused":0.22413419490758454,"table_sim":0,"col_score":0.5603354872689613},{"table":"project_expenses","fused":0.22318717721003317,"table_sim":0,"col_score":0.5579679430250829}],"fk_expansion_candidates":30,"fk_expansion_added":1,"fk_expansion_blocked_count":28,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"already_selected"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":29,"total_retrieval_latency_ms":35,"sql_generated":"SELECT j.entry_id AS entry_id, j.entry_number AS entry_number, j.entry_date AS entry_date, jl.account_id AS account_id, d.depreciation_method AS depreciation_method, d.useful_life_months AS useful_life_months, g.po_id AS po_id\nFROM journal_entries j\nJOIN journal_lines jl ON j.entry_id = jl.line_id\nJOIN depreciation_schedules d ON j.period_id = d.fiscal_year_id\nJOIN goods_receipts g ON j.po_id = g.order_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column d.fiscal_year_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":2,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":5364,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column d.fiscal_year_id does not exist"}
{"timestamp":"2026-01-29T21:24:07.104Z","query_id":"cebf644f-3c28-4fbd-b0f7-25d5979377a4","question":"Show budget vs actual spending by department","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["budgets","project_budgets","departments","project_expenses","budget_lines","fiscal_periods","cost_centers","fiscal_years","projects","fixed_assets"],"tables_from_table_retrieval":8,"tables_from_column_only":7,"tables_from_fk_expansion":0,"table_scores":[{"table":"budgets","similarity":0.6743467953278661},{"table":"budgets","similarity":0.6696787142109972},{"table":"project_budgets","similarity":0.6399342167994372},{"table":"project_budgets","similarity":0.625479815809335},{"table":"budget_lines","similarity":0.6120027063639643},{"table":"departments","similarity":0.6078621456074449},{"table":"budget_lines","similarity":0.5989246191783324},{"table":"cost_centers","similarity":0.5976264909955187},{"table":"project_expenses","similarity":0.5925480261881607},{"table":"departments","similarity":0.5844440352873819},{"table":"cost_centers","similarity":0.5713648686111387},{"table":"project_expenses","similarity":0.5713457712084772},{"table":"fiscal_periods","similarity":0.5508242618316114},{"table":"fiscal_periods","similarity":0.5366665880034622},{"table":"fiscal_years","similarity":0.5297470824133431}],"column_hits_per_table":{"departments":5,"budgets":8,"project_budgets":6,"projects":1,"cost_centers":4,"budget_lines":5,"project_expenses":10,"purchase_requisitions":1,"fiscal_periods":4,"employees":1,"fixed_assets":1,"positions":1,"journal_lines":1,"fiscal_years":1,"requisition_lines":1},"top_columns_per_table":{"departments":[{"column":"budget","similarity":0.7495917239034583},{"column":"name","similarity":0.5755650515829921},{"column":"parent_department_id","similarity":0.5706427726662122}],"budgets":[{"column":"department_id","similarity":0.6950775126936677},{"column":"total_amount","similarity":0.667786554654465},{"column":"status","similarity":0.6456108671424535}],"project_budgets":[{"column":"actual_amount","similarity":0.6672453210209517},{"column":"category","similarity":0.6364564423512089},{"column":"planned_amount","similarity":0.6313162099542824}],"projects":[{"column":"budget","similarity":0.6339398871894302}],"cost_centers":[{"column":"department_id","similarity":0.6309159447379118},{"column":"is_active","similarity":0.5725191475396931},{"column":"name","similarity":0.5342580632651498}],"budget_lines":[{"column":"amount","similarity":0.6270291557125669},{"column":"budget_id","similarity":0.6119783533872745},{"column":"period_id","similarity":0.5916602644004139}],"project_expenses":[{"column":"category","similarity":0.6091416233792963},{"column":"amount","similarity":0.608230851250711},{"column":"is_billable","similarity":0.6010086163947923}],"purchase_requisitions":[{"column":"department_id","similarity":0.5868126293907591}],"fiscal_periods":[{"column":"period_number","similarity":0.5573405580706999},{"column":"is_closed","similarity":0.5486176225532576},{"column":"fiscal_year_id","similarity":0.542120776396656}],"employees":[{"column":"department_id","similarity":0.549593783899725}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5426840706112633}],"positions":[{"column":"department_id","similarity":0.5422206846512622}],"journal_lines":[{"column":"cost_center_id","similarity":0.5404923386923173}],"fiscal_years":[{"column":"year","similarity":0.5379300104521342}],"requisition_lines":[{"column":"estimated_unit_cost","similarity":0.5310951239241254}]},"fused_scores":[{"table":"budgets","fused":0.7927672704314797,"table_sim":0.6696787142109972,"col_score":0.9774001047622032},{"table":"project_budgets","fused":0.7694773063642235,"table_sim":0.625479815809335,"col_score":0.9854735421965561},{"table":"departments","fused":0.7310822179554313,"table_sim":0.5844440352873819,"col_score":0.9510394919575055},{"table":"project_expenses","fused":0.7081102823269471,"table_sim":0.5713457712084772,"col_score":0.9132570490046519},{"table":"budget_lines","fused":0.6958434032662446,"table_sim":0.5989246191783324,"col_score":0.8412215793981129},{"table":"fiscal_periods","fused":0.6546597005410089,"table_sim":0.5366665880034622,"col_score":0.8316493693473288},{"table":"cost_centers","fused":0.6440128307218487,"table_sim":0.5713648686111387,"col_score":0.7529847738879138},{"table":"fiscal_years","fused":0.5330202536288595,"table_sim":0.5297470824133431,"col_score":0.5379300104521342},{"table":"projects","fused":0.25357595487577206,"table_sim":0,"col_score":0.6339398871894302},{"table":"fixed_assets","fused":0.21707362824450535,"table_sim":0,"col_score":0.5426840706112633},{"table":"requisition_lines","fused":0.21243804956965018,"table_sim":0,"col_score":0.5310951239241254},{"table":"purchase_requisitions","fused":0.16430753622941252,"table_sim":0,"col_score":0.4107688405735313},{"table":"employees","fused":0.15388625949192303,"table_sim":0,"col_score":0.3847156487298075},{"table":"positions","fused":0.1518217917023534,"table_sim":0,"col_score":0.3795544792558835},{"table":"journal_lines","fused":0.15133785483384884,"table_sim":0,"col_score":0.37834463708462207}],"fk_expansion_candidates":38,"fk_expansion_added":0,"fk_expansion_blocked_count":38,"fk_expansion_blocked":[{"table":"asset_categories","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"project_milestones","reason":"no_evidence"},{"table":"project_milestones","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":41,"total_retrieval_latency_ms":48,"sql_generated":"SELECT d.name AS department_name, SUM(b.total_amount) AS total_budget, SUM(p.actual_amount) AS total_actual_spending FROM departments d LEFT JOIN budgets b ON d.department_id = b.department_id AND b.status = 'approved' LEFT JOIN project_expenses p ON d.department_id = p.project_id GROUP BY d.name;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column p.actual_amount does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_failure_reason":"No candidates found for column 'actual_amount'","autocorrect_candidates":0,"total_latency_ms":3679,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column p.actual_amount does not exist"}
{"timestamp":"2026-01-29T21:24:10.783Z","query_id":"6bb12ef8-f173-46a1-85d8-4c8051580502","question":"What is the total expense amount per project?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["project_expenses","project_budgets","projects","project_resources","project_milestones","project_tasks","requisition_lines","budgets","vendor_invoices","purchase_orders","budget_lines","departments"],"tables_from_table_retrieval":8,"tables_from_column_only":16,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_expenses","similarity":0.7579256306198433},{"table":"project_expenses","similarity":0.7357232557396823},{"table":"project_budgets","similarity":0.7265263943390426},{"table":"project_budgets","similarity":0.7124927404351951},{"table":"project_milestones","similarity":0.6341783562502439},{"table":"project_milestones","similarity":0.6327617739785869},{"table":"projects","similarity":0.621762698662178},{"table":"project_resources","similarity":0.6179077692716867},{"table":"project_resources","similarity":0.6177078775243305},{"table":"projects","similarity":0.6089962100611707},{"table":"project_tasks","similarity":0.6073542464420917},{"table":"budgets","similarity":0.6033566747844394},{"table":"budgets","similarity":0.5874735154116857},{"table":"project_tasks","similarity":0.5836295939230792},{"table":"requisition_lines","similarity":0.5761697725783915}],"column_hits_per_table":{"project_expenses":10,"project_budgets":6,"budgets":1,"projects":2,"project_milestones":3,"budget_lines":1,"project_resources":3,"vendor_invoices":3,"requisition_lines":2,"project_tasks":2,"asset_maintenance":1,"purchase_orders":2,"product_suppliers":1,"maintenance_types":1,"products":1,"depreciation_schedules":2,"sales_orders":1,"departments":1,"depreciation_entries":1,"employee_salaries":1,"fixed_assets":1,"vendor_invoice_lines":2,"cost_centers":1,"bank_transactions":1},"top_columns_per_table":{"project_expenses":[{"column":"amount","similarity":0.7981720469231877},{"column":"project_id","similarity":0.6993700351285576},{"column":"expense_date","similarity":0.6976862753776708}],"project_budgets":[{"column":"actual_amount","similarity":0.7544693731428739},{"column":"planned_amount","similarity":0.7475286878234714},{"column":"notes","similarity":0.6743372266880852}],"budgets":[{"column":"total_amount","similarity":0.7244402768016153}],"projects":[{"column":"budget","similarity":0.7063289030461566},{"column":"project_number","similarity":0.6281879793284453}],"project_milestones":[{"column":"amount","similarity":0.6973822743170455},{"column":"project_id","similarity":0.6134928683540164},{"column":"description","similarity":0.5964450815919577}],"budget_lines":[{"column":"amount","similarity":0.6474203598538232}],"project_resources":[{"column":"allocation_percent","similarity":0.6462989167237004},{"column":"hourly_rate","similarity":0.6385625515015617},{"column":"project_id","similarity":0.6168915789933885}],"vendor_invoices":[{"column":"total","similarity":0.6401126688839376},{"column":"tax_amount","similarity":0.6065038506039637},{"column":"amount_paid","similarity":0.6026309455729351}],"requisition_lines":[{"column":"estimated_total","similarity":0.6310334497515143},{"column":"estimated_unit_cost","similarity":0.6268164964734461}],"project_tasks":[{"column":"estimated_hours","similarity":0.6305074503163082},{"column":"actual_hours","similarity":0.6251982989877009}],"asset_maintenance":[{"column":"cost","similarity":0.6261574066715916}],"purchase_orders":[{"column":"total","similarity":0.6208795786058339},{"column":"tax_amount","similarity":0.6034316104821902}],"product_suppliers":[{"column":"unit_cost","similarity":0.6203195070815227}],"maintenance_types":[{"column":"estimated_cost","similarity":0.6200443707585799}],"products":[{"column":"unit_cost","similarity":0.6147011653596138}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.614550945299665},{"column":"monthly_amount","similarity":0.6065005360138125}],"sales_orders":[{"column":"total","similarity":0.6137682710613002}],"departments":[{"column":"budget","similarity":0.6129728617339807}],"depreciation_entries":[{"column":"amount","similarity":0.6104740649740648}],"employee_salaries":[{"column":"amount","similarity":0.6103603528626569}],"fixed_assets":[{"column":"purchase_cost","similarity":0.6026468504879459}],"vendor_invoice_lines":[{"column":"amount","similarity":0.6003959822481075},{"column":"unit_cost","similarity":0.5981934490405764}],"cost_centers":[{"column":"department_id","similarity":0.6003827939727152}],"bank_transactions":[{"column":"amount","similarity":0.5987202435335099}]},"fused_scores":[{"table":"project_expenses","fused":0.9002400272886186,"table_sim":0.7357232557396823,"col_score":1.1470151846120231},{"table":"project_budgets","fused":0.8787891310829609,"table_sim":0.7124927404351951,"col_score":1.1282337170546095},{"table":"projects","fused":0.7735668831208542,"table_sim":0.6089962100611707,"col_score":1.0204228927103793},{"table":"project_resources","fused":0.7568568035043909,"table_sim":0.6177078775243305,"col_score":0.9655801924744813},{"table":"project_milestones","fused":0.7444989756835327,"table_sim":0.6327617739785869,"col_score":0.9121047782409513},{"table":"project_tasks","fused":0.727420396277911,"table_sim":0.5836295939230792,"col_score":0.9431065998101587},{"table":"requisition_lines","fused":0.7234785427423298,"table_sim":0.5761697725783915,"col_score":0.9444416979882373},{"table":"budgets","fused":0.6422602199676575,"table_sim":0.5874735154116857,"col_score":0.7244402768016153},{"table":"vendor_invoices","fused":0.3773458376743678,"table_sim":0,"col_score":0.9433645941859194},{"table":"purchase_orders","fused":0.3690381535387716,"table_sim":0,"col_score":0.922595383846929},{"table":"depreciation_schedules","fused":0.36712048532262853,"table_sim":0,"col_score":0.9178012133065713},{"table":"vendor_invoice_lines","fused":0.35979708270735833,"table_sim":0,"col_score":0.8994927067683958},{"table":"budget_lines","fused":0.2589681439415293,"table_sim":0,"col_score":0.6474203598538232},{"table":"asset_maintenance","fused":0.25046296266863666,"table_sim":0,"col_score":0.6261574066715916},{"table":"product_suppliers","fused":0.2481278028326091,"table_sim":0,"col_score":0.6203195070815227}],"fk_expansion_candidates":32,"fk_expansion_added":2,"fk_expansion_blocked_count":24,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"budget_lines","reason":"already_selected"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"already_selected"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"max_tables"},{"table":"products","reason":"max_tables"},{"table":"project_phases","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":23,"total_retrieval_latency_ms":29,"sql_generated":"SELECT p.project_id AS ProjectID, SUM(pe.amount) AS TotalExpensesPerProject FROM projects p JOIN project_expenses pe ON p.project_id = pe.project_id GROUP BY p.project_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":100,"total_latency_ms":854}
{"timestamp":"2026-01-29T21:24:11.637Z","query_id":"1e6e9f73-5174-4af8-af15-1df3de998d51","question":"List projects that are over budget","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["project_budgets","project_expenses","projects","budgets","project_milestones","project_tasks","project_resources","budget_lines","departments"],"tables_from_table_retrieval":8,"tables_from_column_only":1,"tables_from_fk_expansion":0,"table_scores":[{"table":"project_budgets","similarity":0.722964742520668},{"table":"project_budgets","similarity":0.7149382810327576},{"table":"project_expenses","similarity":0.6616137568759273},{"table":"project_expenses","similarity":0.6612139885640923},{"table":"project_milestones","similarity":0.6086742516860566},{"table":"projects","similarity":0.6032117409064212},{"table":"projects","similarity":0.603119867291799},{"table":"project_resources","similarity":0.597322584800267},{"table":"project_milestones","similarity":0.5963753466104804},{"table":"budgets","similarity":0.5962983646598873},{"table":"project_tasks","similarity":0.5951008752721587},{"table":"budgets","similarity":0.5947407234206143},{"table":"project_resources","similarity":0.5923585060246325},{"table":"budget_lines","similarity":0.5904803818054072},{"table":"project_tasks","similarity":0.5884491523727073}],"column_hits_per_table":{"projects":10,"project_budgets":6,"project_expenses":9,"budgets":6,"budget_lines":3,"project_milestones":4,"project_tasks":8,"project_resources":3,"departments":1},"top_columns_per_table":{"projects":[{"column":"budget","similarity":0.7040586919716509},{"column":"planned_end_date","similarity":0.6178230121937325},{"column":"project_number","similarity":0.6141630378138243}],"project_budgets":[{"column":"notes","similarity":0.6952498482759191},{"column":"category","similarity":0.684511328503381},{"column":"planned_amount","similarity":0.6722268345754978}],"project_expenses":[{"column":"is_billable","similarity":0.6461941542288852},{"column":"category","similarity":0.6420132273918641},{"column":"expense_date","similarity":0.63434637160428}],"budgets":[{"column":"total_amount","similarity":0.614370809503817},{"column":"status","similarity":0.6108205553547363},{"column":"budget_id","similarity":0.5929594782171785}],"budget_lines":[{"column":"budget_id","similarity":0.6079961535935847},{"column":"amount","similarity":0.6077961190977996},{"column":"line_id","similarity":0.5893204834240592}],"project_milestones":[{"column":"is_billable","similarity":0.6071449572441574},{"column":"amount","similarity":0.588199497133572},{"column":"due_date","similarity":0.5812913433040277}],"project_tasks":[{"column":"estimated_hours","similarity":0.5963088711841054},{"column":"due_date","similarity":0.5950349513196225},{"column":"actual_hours","similarity":0.5923374564661072}],"project_resources":[{"column":"allocation_percent","similarity":0.5884306445284694},{"column":"project_id","similarity":0.584485395721684},{"column":"end_date","similarity":0.5723455956479002}],"departments":[{"column":"budget","similarity":0.5759799767407416}]},"fused_scores":[{"table":"project_budgets","fused":0.8372128669361065,"table_sim":0.7149382810327576,"col_score":1.02062474579113},{"table":"project_expenses","fused":0.7836087003083823,"table_sim":0.6612139885640923,"col_score":0.9672007679248171},{"table":"projects","fused":0.7670599996024863,"table_sim":0.603119867291799,"col_score":1.0129701980685173},{"table":"budgets","fused":0.7200197648324655,"table_sim":0.5947407234206143,"col_score":0.9079383269502421},{"table":"project_milestones","fused":0.7183230902906657,"table_sim":0.5963753466104804,"col_score":0.9012447058109434},{"table":"project_tasks","fused":0.710600030161191,"table_sim":0.5884491523727073,"col_score":0.8938263468439166},{"table":"project_resources","fused":0.7052564805557473,"table_sim":0.5923585060246325,"col_score":0.8746034423524195},{"table":"budget_lines","fused":0.682526138225466,"table_sim":0.5904803818054072,"col_score":0.8205947728555543},{"table":"departments","fused":0.23039199069629668,"table_sim":0,"col_score":0.5759799767407416}],"fk_expansion_candidates":22,"fk_expansion_added":0,"fk_expansion_blocked_count":22,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":25,"total_retrieval_latency_ms":31,"sql_generated":"SELECT p.project_id, p.name AS project_name, b.total_amount AS budgeted_amount, SUM(pl.actual_amount) AS actual_spent, (SUM(pl.actual_amount) - b.total_amount) AS over_budget FROM projects p JOIN budgets b ON p.project_id = b.budget_id AND b.status = 'approved' LEFT JOIN project_expenses pe ON p.project_id = pe.project_id LEFT JOIN project_milestones pm ON p.project_id = pm.project_id LEFT JOIN project_resources pr ON p.project_id = pr.project_id LEFT JOIN project_budgets pl ON p.project_id = pl.project_id AND pe.expense_date BETWEEN DATE(pl.planned_amount) AND DATE(pl.actual_amount) GROUP BY p.project;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42883","error_message":"function date(numeric) does not exist","total_latency_ms":7671,"failure_type":"llm_reasoning","failure_details":"SQL error 42883: Database error after 3 attempts: function date(numeric) does not exist"}
{"timestamp":"2026-01-29T21:24:19.308Z","query_id":"eb2e257d-4abc-4a9f-a5e5-7b6bc9d684ce","question":"Show project resources and their allocation percentages","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["project_resources","project_budgets","projects","project_expenses","project_milestones","project_tasks","project_phases","task_assignments","asset_categories","order_lines"],"tables_from_table_retrieval":8,"tables_from_column_only":7,"tables_from_fk_expansion":0,"table_scores":[{"table":"project_resources","similarity":0.7742133717857291},{"table":"project_resources","similarity":0.7726017161069211},{"table":"project_budgets","similarity":0.65507694472865},{"table":"project_budgets","similarity":0.6455070367212973},{"table":"project_expenses","similarity":0.6350034671876015},{"table":"projects","similarity":0.6288717870995568},{"table":"project_expenses","similarity":0.6218657368982583},{"table":"task_assignments","similarity":0.6137701156863598},{"table":"project_tasks","similarity":0.6095803048417692},{"table":"project_milestones","similarity":0.6065393117891723},{"table":"projects","similarity":0.6043704297265652},{"table":"project_tasks","similarity":0.600932070632356},{"table":"project_milestones","similarity":0.598658942101191},{"table":"task_assignments","similarity":0.5933742382335131},{"table":"project_phases","similarity":0.5813826774295057}],"column_hits_per_table":{"project_resources":8,"project_budgets":6,"projects":10,"asset_categories":1,"project_milestones":4,"project_expenses":7,"project_tasks":5,"order_lines":1,"quote_lines":1,"performance_reviews":1,"budgets":1,"project_phases":3,"currencies":1,"tax_rates":1},"top_columns_per_table":{"project_resources":[{"column":"allocation_percent","similarity":0.8633059160366073},{"column":"hourly_rate","similarity":0.7567099176701401},{"column":"role","similarity":0.6958791512171763}],"project_budgets":[{"column":"actual_amount","similarity":0.6563642230002711},{"column":"planned_amount","similarity":0.6553043653436582},{"column":"category","similarity":0.6379137974118141}],"projects":[{"column":"priority","similarity":0.6469555758830943},{"column":"budget","similarity":0.6427722399625124},{"column":"project_number","similarity":0.6401181954274701}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.6435021784071759}],"project_milestones":[{"column":"amount","similarity":0.6398826628819255},{"column":"due_date","similarity":0.6049153702959417},{"column":"description","similarity":0.5917008678550857}],"project_expenses":[{"column":"amount","similarity":0.6242586475384743},{"column":"category","similarity":0.6142015362068918},{"column":"description","similarity":0.6079819074448459}],"project_tasks":[{"column":"priority","similarity":0.6242534548890795},{"column":"actual_hours","similarity":0.6180862719180372},{"column":"due_date","similarity":0.6052605786793172}],"order_lines":[{"column":"discount_percent","similarity":0.5942047522544827}],"quote_lines":[{"column":"discount_percent","similarity":0.5937287046720631}],"performance_reviews":[{"column":"goals_met_percent","similarity":0.5894147308873736}],"budgets":[{"column":"total_amount","similarity":0.5872817125068575}],"project_phases":[{"column":"project_id","similarity":0.5861825792508847},{"column":"sequence","similarity":0.5827342342492163},{"column":"description","similarity":0.5826479776722895}],"currencies":[{"column":"exchange_rate","similarity":0.5799546058797589}],"tax_rates":[{"column":"rate","similarity":0.5799367806129271}]},"fused_scores":[{"table":"project_resources","fused":0.9602253796128235,"table_sim":0.7726017161069211,"col_score":1.2416608748716773},{"table":"project_budgets","fused":0.7809107843016184,"table_sim":0.6455070367212973,"col_score":0.9840164056721001},{"table":"projects","fused":0.7499589361816793,"table_sim":0.6043704297265652,"col_score":0.9683416958643505},{"table":"project_expenses","fused":0.7456632083957231,"table_sim":0.6218657368982583,"col_score":0.9313594156419202},{"table":"project_milestones","fused":0.7361315044726731,"table_sim":0.598658942101191,"col_score":0.9423403480298964},{"table":"project_tasks","fused":0.7338778787186528,"table_sim":0.600932070632356,"col_score":0.9332965908480981},{"table":"project_phases","fused":0.6639888612525138,"table_sim":0.5813826774295057,"col_score":0.7878981369870259},{"table":"task_assignments","fused":0.3560245429401078,"table_sim":0.5933742382335131,"col_score":0},{"table":"asset_categories","fused":0.2574008713628704,"table_sim":0,"col_score":0.6435021784071759},{"table":"order_lines","fused":0.2376819009017931,"table_sim":0,"col_score":0.5942047522544827},{"table":"quote_lines","fused":0.23749148186882524,"table_sim":0,"col_score":0.5937287046720631},{"table":"performance_reviews","fused":0.23576589235494946,"table_sim":0,"col_score":0.5894147308873736},{"table":"budgets","fused":0.23491268500274298,"table_sim":0,"col_score":0.5872817125068575},{"table":"currencies","fused":0.23198184235190356,"table_sim":0,"col_score":0.5799546058797589},{"table":"tax_rates","fused":0.23197471224517086,"table_sim":0,"col_score":0.5799367806129271}],"fk_expansion_candidates":12,"fk_expansion_added":0,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":25,"total_retrieval_latency_ms":31,"sql_generated":"SELECT pr.project_id AS \"ProjectID\", pr.name AS \"ProjectName\", rr.role AS \"Role\", rr.allocation_percent AS \"AllocationPercent\" FROM project_resources rr JOIN projects pr ON rr.project_id = pr.project_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":300,"total_latency_ms":1017}
{"timestamp":"2026-01-29T21:24:20.325Z","query_id":"e4a17a82-0b98-4b02-acb0-4ee4d32fbc7b","question":"List fixed assets by category with their total purchase cost","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["fixed_assets","asset_categories","asset_maintenance","products","depreciation_entries","purchase_requisitions","project_budgets","depreciation_schedules","purchase_orders","asset_transfers","departments","maintenance_types"],"tables_from_table_retrieval":8,"tables_from_column_only":9,"tables_from_fk_expansion":2,"table_scores":[{"table":"fixed_assets","similarity":0.7671508108800839},{"table":"fixed_assets","similarity":0.7654083493676195},{"table":"asset_categories","similarity":0.7259858085236982},{"table":"asset_categories","similarity":0.72092108607088},{"table":"asset_maintenance","similarity":0.6539211907012796},{"table":"asset_maintenance","similarity":0.6348030204988977},{"table":"products","similarity":0.6262946781709159},{"table":"depreciation_schedules","similarity":0.6168004716425273},{"table":"products","similarity":0.614929355062545},{"table":"depreciation_schedules","similarity":0.6121354509873786},{"table":"depreciation_entries","similarity":0.6111894897108928},{"table":"depreciation_entries","similarity":0.6063980941978624},{"table":"project_budgets","similarity":0.6057202519055345},{"table":"purchase_requisitions","similarity":0.6017556598223677},{"table":"purchase_requisitions","similarity":0.6015411064384415}],"column_hits_per_table":{"fixed_assets":17,"asset_maintenance":5,"asset_categories":5,"purchase_orders":5,"asset_transfers":2,"depreciation_entries":2,"project_expenses":1,"products":2,"depreciation_schedules":1,"project_budgets":1,"maintenance_types":1,"purchase_requisitions":3,"sales_orders":1,"budgets":1,"departments":1,"product_categories":1,"product_suppliers":1},"top_columns_per_table":{"fixed_assets":[{"column":"purchase_cost","similarity":0.8198772015639547},{"column":"purchase_date","similarity":0.7467731747895039},{"column":"category_id","similarity":0.7278001390498363}],"asset_maintenance":[{"column":"cost","similarity":0.6959112135520997},{"column":"asset_id","similarity":0.6605498780552402},{"column":"status","similarity":0.6365694723201099}],"asset_categories":[{"column":"depreciation_method","similarity":0.6914816579489624},{"column":"salvage_value_percent","similarity":0.6861491499470286},{"column":"name","similarity":0.680679494396876}],"purchase_orders":[{"column":"total","similarity":0.670586118670476},{"column":"shipping_cost","similarity":0.640379738676011},{"column":"subtotal","similarity":0.637971799251016}],"asset_transfers":[{"column":"asset_id","similarity":0.6625737391840324},{"column":"reason","similarity":0.6105152608091542}],"depreciation_entries":[{"column":"asset_id","similarity":0.661025419881134},{"column":"accumulated_depreciation","similarity":0.6155524514035258}],"project_expenses":[{"column":"category","similarity":0.6464899039427223}],"products":[{"column":"unit_cost","similarity":0.642832807024477},{"column":"list_price","similarity":0.6321686201995896}],"depreciation_schedules":[{"column":"asset_id","similarity":0.6414080766024978}],"project_budgets":[{"column":"category","similarity":0.6328605061405524}],"maintenance_types":[{"column":"estimated_cost","similarity":0.6315283480937153}],"purchase_requisitions":[{"column":"status","similarity":0.62811109700508},{"column":"requisition_number","similarity":0.6166193497762641},{"column":"notes","similarity":0.6141499806901694}],"sales_orders":[{"column":"total","similarity":0.6248918377251549}],"budgets":[{"column":"total_amount","similarity":0.6163584124223674}],"departments":[{"column":"budget","similarity":0.615804850011434}],"product_categories":[{"column":"description","similarity":0.6126142026531948}],"product_suppliers":[{"column":"unit_cost","similarity":0.611791518325227}]},"fused_scores":[{"table":"fixed_assets","fused":0.9365505252040545,"table_sim":0.7654083493676195,"col_score":1.1932637889587068},{"table":"asset_categories","fused":0.8463751448115187,"table_sim":0.72092108607088,"col_score":1.0345562329224767},{"table":"asset_maintenance","fused":0.7831805519609546,"table_sim":0.6348030204988977,"col_score":1.00574684915404},{"table":"products","fused":0.7525244598872358,"table_sim":0.614929355062545,"col_score":0.9589171171242719},{"table":"depreciation_entries","fused":0.7026033958634865,"table_sim":0.6063980941978624,"col_score":0.8469113483619226},{"table":"purchase_requisitions","fused":0.6955079573542817,"table_sim":0.6015411064384415,"col_score":0.8364582337280421},{"table":"project_budgets","fused":0.6165763535995417,"table_sim":0.6057202519055345,"col_score":0.6328605061405524},{"table":"depreciation_schedules","fused":0.5468755320411265,"table_sim":0.6121354509873786,"col_score":0.4489856536217484},{"table":"purchase_orders","fused":0.3963103952033926,"table_sim":0,"col_score":0.9907759880084814},{"table":"asset_transfers","fused":0.3369664278094262,"table_sim":0,"col_score":0.8424160695235655},{"table":"project_expenses","fused":0.2585959615770889,"table_sim":0,"col_score":0.6464899039427223},{"table":"maintenance_types","fused":0.25261133923748613,"table_sim":0,"col_score":0.6315283480937153},{"table":"sales_orders","fused":0.24995673509006197,"table_sim":0,"col_score":0.6248918377251549},{"table":"budgets","fused":0.246543364968947,"table_sim":0,"col_score":0.6163584124223674},{"table":"departments","fused":0.24632194000457364,"table_sim":0,"col_score":0.615804850011434}],"fk_expansion_candidates":48,"fk_expansion_added":2,"fk_expansion_blocked_count":42,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"departments","reason":"already_selected"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"maintenance_types","reason":"already_selected"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"product_suppliers","reason":"max_tables"},{"table":"product_suppliers","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":27,"total_retrieval_latency_ms":34,"sql_generated":"SELECT fa.name AS Asset_Name, af.category_id, SUM(po.total) AS Total_Purchase_Cost FROM asset_categories af JOIN fixed_assets fa ON af.asset_id = fa.asset_id JOIN purchase_orders po ON fa.po_id = po.requisition_id GROUP BY fa.name, af.category_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column af.asset_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":3,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":3471,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column af.asset_id does not exist"}
{"timestamp":"2026-01-29T21:24:23.796Z","query_id":"1c30f848-aa99-41bc-9e9c-3eb6f4a6d13d","question":"List assets due for maintenance in the next 30 days","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["asset_maintenance","fixed_assets","depreciation_schedules","asset_transfers","maintenance_types","depreciation_entries","asset_categories","asset_locations","project_expenses","inventory_adjustments"],"tables_from_table_retrieval":8,"tables_from_column_only":7,"tables_from_fk_expansion":0,"table_scores":[{"table":"asset_maintenance","similarity":0.7135403855722379},{"table":"asset_maintenance","similarity":0.6994637000895678},{"table":"fixed_assets","similarity":0.6764596229184475},{"table":"fixed_assets","similarity":0.6733613177336575},{"table":"depreciation_schedules","similarity":0.6273221911861584},{"table":"depreciation_schedules","similarity":0.6165498794694232},{"table":"maintenance_types","similarity":0.5989446217445276},{"table":"asset_transfers","similarity":0.5971719320807494},{"table":"maintenance_types","similarity":0.5961062154680403},{"table":"asset_transfers","similarity":0.5960224713409419},{"table":"depreciation_entries","similarity":0.5910746016967453},{"table":"asset_categories","similarity":0.5870944738292543},{"table":"asset_categories","similarity":0.5862300624031879},{"table":"depreciation_entries","similarity":0.5749224342805543},{"table":"asset_locations","similarity":0.5648806441833575}],"column_hits_per_table":{"asset_maintenance":10,"fixed_assets":17,"depreciation_schedules":4,"asset_transfers":3,"project_expenses":2,"maintenance_types":2,"depreciation_entries":3,"inventory_adjustments":2,"project_tasks":1,"employee_benefits":1,"purchase_requisitions":1,"project_milestones":1,"asset_locations":1,"asset_categories":1,"budgets":1},"top_columns_per_table":{"asset_maintenance":[{"column":"scheduled_date","similarity":0.739898742205908},{"column":"completed_date","similarity":0.7284483792345208},{"column":"status","similarity":0.7101114444407461}],"fixed_assets":[{"column":"disposal_date","similarity":0.6888298809769268},{"column":"purchase_date","similarity":0.6863275066336678},{"column":"warranty_expiry","similarity":0.6767168006008178}],"depreciation_schedules":[{"column":"asset_id","similarity":0.6382143138838896},{"column":"end_date","similarity":0.6022449069977498},{"column":"start_date","similarity":0.5877836267018011}],"asset_transfers":[{"column":"transfer_date","similarity":0.629042679787289},{"column":"asset_id","similarity":0.6153656526379016},{"column":"reason","similarity":0.581820393022087}],"project_expenses":[{"column":"expense_date","similarity":0.6101532216190212},{"column":"status","similarity":0.5810411591332079}],"maintenance_types":[{"column":"estimated_cost","similarity":0.6075361589401804},{"column":"frequency_months","similarity":0.5655954128168349}],"depreciation_entries":[{"column":"asset_id","similarity":0.6069641044175335},{"column":"entry_date","similarity":0.5764830727802217},{"column":"accumulated_depreciation","similarity":0.5729541876728412}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.5914927180055287},{"column":"status","similarity":0.5710920004037154}],"project_tasks":[{"column":"due_date","similarity":0.572177501074105}],"employee_benefits":[{"column":"end_date","similarity":0.5674256643532543}],"purchase_requisitions":[{"column":"required_date","similarity":0.5649724847275831}],"project_milestones":[{"column":"due_date","similarity":0.5629639209729828}],"asset_locations":[{"column":"description","similarity":0.5623171240430319}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.5602795069744737}],"budgets":[{"column":"status","similarity":0.5600489740464554}]},"fused_scores":[{"table":"asset_maintenance","fused":0.8613273927830081,"table_sim":0.6994637000895678,"col_score":1.1041229318231685},{"table":"fixed_assets","fused":0.8168142443576987,"table_sim":0.6733613177336575,"col_score":1.0319936342937606},{"table":"depreciation_schedules","fused":0.728384615821114,"table_sim":0.6165498794694232,"col_score":0.8961367203486503},{"table":"asset_transfers","fused":0.7255946333238981,"table_sim":0.5960224713409419,"col_score":0.9199528762983324},{"table":"maintenance_types","fused":0.7137972754202634,"table_sim":0.5961062154680403,"col_score":0.8903338653485979},{"table":"depreciation_entries","fused":0.6901375272149896,"table_sim":0.5749224342805543,"col_score":0.8629601666166423},{"table":"asset_categories","fused":0.5758498402317023,"table_sim":0.5862300624031879,"col_score":0.5602795069744737},{"table":"asset_locations","fused":0.4963771812420634,"table_sim":0.5648806441833575,"col_score":0.39362198683012234},{"table":"project_expenses","fused":0.3254070509262576,"table_sim":0,"col_score":0.8135176273156439},{"table":"inventory_adjustments","fused":0.3165499672587317,"table_sim":0,"col_score":0.7913749181468291},{"table":"project_tasks","fused":0.22887100042964204,"table_sim":0,"col_score":0.572177501074105},{"table":"employee_benefits","fused":0.22697026574130172,"table_sim":0,"col_score":0.5674256643532543},{"table":"purchase_requisitions","fused":0.22598899389103325,"table_sim":0,"col_score":0.5649724847275831},{"table":"project_milestones","fused":0.22518556838919312,"table_sim":0,"col_score":0.5629639209729828},{"table":"budgets","fused":0.1568137127330075,"table_sim":0,"col_score":0.39203428183251876}],"fk_expansion_candidates":16,"fk_expansion_added":0,"fk_expansion_blocked_count":16,"fk_expansion_blocked":[{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":41,"total_retrieval_latency_ms":48,"sql_generated":"SELECT f.asset_id, f.name AS asset_name, m.maintenance_type_id, mt.description AS maintenance_type_description FROM fixed_assets f INNER JOIN asset_locations l ON f.location_id = l.location_id INNER JOIN asset_maintenance m ON f.asset_id = m.asset_id INNER JOIN maintenance_types mt ON m.maintenance_type_id = mt.type_id WHERE m.scheduled_date BETWEEN CURRENT_DATE AND (CURRENT_DATE + INTERVAL '30 days') ORDER BY f.name;","tables_used_in_sql":[],"explain_result":"success","rows_returned":0,"total_latency_ms":2025}
{"timestamp":"2026-01-29T21:24:25.821Z","query_id":"1174a730-47aa-4be5-9b61-dda29849c7f7","question":"How many documents are attached to each entity type?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["document_attachments","asset_categories","account_types","certifications","maintenance_types","benefit_types","departments","product_categories","leave_types","inventory_transactions","asset_maintenance","chart_of_accounts"],"tables_from_table_retrieval":9,"tables_from_column_only":12,"tables_from_fk_expansion":2,"table_scores":[{"table":"document_attachments","similarity":0.7393040203593138},{"table":"document_attachments","similarity":0.7352812742665428},{"table":"account_types","similarity":0.5981352749242909},{"table":"maintenance_types","similarity":0.5897465403330582},{"table":"benefit_types","similarity":0.5853557438584527},{"table":"asset_categories","similarity":0.5755840603854031},{"table":"asset_categories","similarity":0.5753411818367143},{"table":"certifications","similarity":0.5748402961818171},{"table":"account_types","similarity":0.5738443826637069},{"table":"departments","similarity":0.5648283994028683},{"table":"maintenance_types","similarity":0.5636991742375136},{"table":"certifications","similarity":0.5624603819375077},{"table":"leave_types","similarity":0.5605128347211927},{"table":"benefit_types","similarity":0.5571719369096676},{"table":"product_categories","similarity":0.5551556948057476}],"column_hits_per_table":{"document_attachments":9,"inventory_transactions":3,"maintenance_types":3,"account_types":3,"employee_certifications":3,"asset_maintenance":2,"asset_categories":4,"benefit_types":3,"certifications":2,"chart_of_accounts":2,"employee_benefits":1,"departments":3,"warehouses":1,"sales_regions":1,"business_units":1,"product_categories":3,"asset_locations":1,"inventory_levels":2,"leave_types":1,"audit_log":1,"asset_transfers":1},"top_columns_per_table":{"document_attachments":[{"column":"entity_type","similarity":0.7979734617201061},{"column":"entity_id","similarity":0.7507212541180398},{"column":"attachment_id","similarity":0.6499131194867761}],"inventory_transactions":[{"column":"reference_type","similarity":0.5907758006474604},{"column":"transaction_type","similarity":0.5740359961697677},{"column":"created_by","similarity":0.5409655490497369}],"maintenance_types":[{"column":"description","similarity":0.5849404241337369},{"column":"type_id","similarity":0.5687464182699},{"column":"name","similarity":0.5466111937708543}],"account_types":[{"column":"category","similarity":0.5795842717697016},{"column":"type_id","similarity":0.572204772617412},{"column":"name","similarity":0.54522230629148}],"employee_certifications":[{"column":"certificate_number","similarity":0.570344611110217},{"column":"cert_id","similarity":0.5516333538250004},{"column":"employee_id","similarity":0.5450123538269055}],"asset_maintenance":[{"column":"maintenance_type_id","similarity":0.5695302816995195},{"column":"notes","similarity":0.5345241852289304}],"asset_categories":[{"column":"category_id","similarity":0.5686260353611468},{"column":"depreciation_method","similarity":0.5475874755164923},{"column":"name","similarity":0.5455049147965266}],"benefit_types":[{"column":"description","similarity":0.5684622522725375},{"column":"benefit_type_id","similarity":0.554474960208018},{"column":"name","similarity":0.5413044190115788}],"certifications":[{"column":"description","similarity":0.5628134265182438},{"column":"issuing_body","similarity":0.5519765334559635}],"chart_of_accounts":[{"column":"account_type_id","similarity":0.5590662505285231},{"column":"description","similarity":0.535907997292557}],"employee_benefits":[{"column":"benefit_type_id","similarity":0.5588809609991403}],"departments":[{"column":"manager_id","similarity":0.5524511044152465},{"column":"department_id","similarity":0.5490358819561373},{"column":"parent_department_id","similarity":0.5456710356874805}],"warehouses":[{"column":"manager_id","similarity":0.5486508621983892}],"sales_regions":[{"column":"manager_id","similarity":0.5473931431415607}],"business_units":[{"column":"manager_id","similarity":0.5472492280812445}],"product_categories":[{"column":"description","similarity":0.5469667414543651},{"column":"category_id","similarity":0.5469560360203749},{"column":"parent_category_id","similarity":0.5356836644445996}],"asset_locations":[{"column":"description","similarity":0.5460071186556418}],"inventory_levels":[{"column":"quantity_available","similarity":0.5401083097075305},{"column":"quantity_on_hand","similarity":0.5359471229919481}],"leave_types":[{"column":"leave_type_id","similarity":0.5379614368742229}],"audit_log":[{"column":"table_name","similarity":0.5362126705338817}],"asset_transfers":[{"column":"transfer_id","similarity":0.533307845538454}]},"fused_scores":[{"table":"document_attachments","fused":0.8890806280125436,"table_sim":0.7352812742665428,"col_score":1.1197796586315447},{"table":"asset_categories","fused":0.6714887456297062,"table_sim":0.5753411818367143,"col_score":0.8157100913191939},{"table":"account_types","fused":0.6562490064725425,"table_sim":0.5738443826637069,"col_score":0.7798559421857958},{"table":"certifications","fused":0.6370607222574441,"table_sim":0.5624603819375077,"col_score":0.7489612327373489},{"table":"maintenance_types","fused":0.5816273218577405,"table_sim":0.5636991742375136,"col_score":0.6085195432880808},{"table":"benefit_types","fused":0.5710990872112336,"table_sim":0.5571719369096676,"col_score":0.5919898126635825},{"table":"departments","fused":0.5704483723518492,"table_sim":0.5648283994028683,"col_score":0.5788783317753206},{"table":"product_categories","fused":0.5628179495335233,"table_sim":0.5551556948057476,"col_score":0.5743113316251868},{"table":"leave_types","fused":0.48693690315749805,"table_sim":0.5605128347211927,"col_score":0.376573005811956},{"table":"inventory_transactions","fused":0.35111751949293774,"table_sim":0,"col_score":0.8777937987323443},{"table":"inventory_levels","fused":0.3232327484814019,"table_sim":0,"col_score":0.8080818712035046},{"table":"employee_certifications","fused":0.30536651397958686,"table_sim":0,"col_score":0.7634162849489671},{"table":"asset_maintenance","fused":0.2343018648079157,"table_sim":0,"col_score":0.5857546620197892},{"table":"chart_of_accounts","fused":0.23156566976894444,"table_sim":0,"col_score":0.578914174422361},{"table":"employee_benefits","fused":0.15648666907975928,"table_sim":0,"col_score":0.3912166726993982}],"fk_expansion_candidates":28,"fk_expansion_added":2,"fk_expansion_blocked_count":22,"fk_expansion_blocked":[{"table":"asset_maintenance","reason":"already_selected"},{"table":"budgets","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"already_selected"},{"table":"cost_centers","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employee_certifications","reason":"max_tables"},{"table":"employee_certifications","reason":"max_tables"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":23,"total_retrieval_latency_ms":29,"sql_generated":"SELECT e.name AS entity_type, COUNT(da.file_name) AS num_documents FROM document_attachments da JOIN departments d ON da.department_id = d.department_id GROUP BY e.name;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column da.department_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":1,"autocorrect_failure_reason":"Best candidate 'document_attachments.attachment_id' has score 0.52 < threshold 0.7","total_latency_ms":2208,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column da.department_id does not exist"}
{"timestamp":"2026-01-29T21:24:28.030Z","query_id":"7a52d0e8-f0bd-45d4-b6ea-08c33ac843fe","question":"Calculate employee turnover rate by department for 2024","attempt_count":1,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employees","employee_salaries","employee_training","departments","sales_regions","budgets","employment_history","goods_receipts","sales_territories","positions","inventory_adjustments","employee_certifications"],"tables_from_table_retrieval":10,"tables_from_column_only":13,"tables_from_fk_expansion":2,"table_scores":[{"table":"employees","similarity":0.6359658673732379},{"table":"employees","similarity":0.6283128721980845},{"table":"employee_salaries","similarity":0.6154920185256858},{"table":"employee_salaries","similarity":0.6137332929756416},{"table":"departments","similarity":0.6101103038853555},{"table":"positions","similarity":0.5999463882310814},{"table":"positions","similarity":0.599093570754041},{"table":"sales_territories","similarity":0.5983156084770043},{"table":"departments","similarity":0.5980265380974776},{"table":"sales_regions","similarity":0.5955253694234874},{"table":"budgets","similarity":0.5922652556433196},{"table":"employee_training","similarity":0.5866463738638922},{"table":"employment_history","similarity":0.5855835073288157},{"table":"goods_receipts","similarity":0.585472710203539},{"table":"employee_training","similarity":0.5853654132622957}],"column_hits_per_table":{"departments":4,"sales_territories":1,"employees":7,"employee_salaries":7,"positions":1,"employee_training":4,"asset_maintenance":1,"goods_receipts":1,"sales_orders":1,"performance_reviews":2,"sales_regions":2,"asset_transfers":3,"budgets":2,"employee_certifications":2,"employee_benefits":2,"cost_centers":1,"inventory_adjustments":2,"purchase_requisitions":1,"currencies":1,"employment_history":2,"sales_opportunities":1,"business_units":1,"timesheets":1},"top_columns_per_table":{"departments":[{"column":"budget","similarity":0.6171215338559899},{"column":"manager_id","similarity":0.5961383943023354},{"column":"created_at","similarity":0.5650467732880422}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.613735339271099}],"employees":[{"column":"department_id","similarity":0.6128547771691438},{"column":"salary","similarity":0.601752847347806},{"column":"termination_date","similarity":0.5966071793770903}],"employee_salaries":[{"column":"end_date","similarity":0.6066714954048358},{"column":"amount","similarity":0.593388338491163},{"column":"effective_date","similarity":0.5928836468348673}],"positions":[{"column":"department_id","similarity":0.601081477446699}],"employee_training":[{"column":"score","similarity":0.5928527070079839},{"column":"scheduled_date","similarity":0.5735550391908764},{"column":"employee_id","similarity":0.5706780616174596}],"asset_maintenance":[{"column":"performed_by","similarity":0.5871347008280439}],"goods_receipts":[{"column":"received_by","similarity":0.5868493099400296}],"sales_orders":[{"column":"sales_rep_id","similarity":0.5843091252583017}],"performance_reviews":[{"column":"employee_id","similarity":0.5837580109083931},{"column":"reviewer_id","similarity":0.5714175766121258}],"sales_regions":[{"column":"manager_id","similarity":0.5798833108533066},{"column":"target_revenue","similarity":0.5574040652402492}],"asset_transfers":[{"column":"transferred_by","similarity":0.5794683807030565},{"column":"to_employee_id","similarity":0.5716790888698292},{"column":"from_employee_id","similarity":0.5709346468764337}],"budgets":[{"column":"department_id","similarity":0.5771392831310456},{"column":"approved_by","similarity":0.5582712309076955}],"employee_certifications":[{"column":"employee_id","similarity":0.5746489952027047},{"column":"expiry_date","similarity":0.5686582077330544}],"employee_benefits":[{"column":"end_date","similarity":0.5727875043304892},{"column":"employee_id","similarity":0.5623488537687561}],"cost_centers":[{"column":"department_id","similarity":0.5719328818068407}],"inventory_adjustments":[{"column":"adjusted_by","similarity":0.5712410647201211},{"column":"approved_by","similarity":0.5645446751844594}],"purchase_requisitions":[{"column":"department_id","similarity":0.5675362306468967}],"currencies":[{"column":"exchange_rate","similarity":0.566384286000632}],"employment_history":[{"column":"employee_id","similarity":0.5633517132005502},{"column":"reason_for_leaving","similarity":0.5587429277691088}],"sales_opportunities":[{"column":"owner_id","similarity":0.5617897810640338}],"business_units":[{"column":"manager_id","similarity":0.5600356791366401}],"timesheets":[{"column":"employee_id","similarity":0.5600062923329793}]},"fused_scores":[{"table":"employees","fused":0.7370102981333913,"table_sim":0.6283128721980845,"col_score":0.9000564370363511},{"table":"employee_salaries","fused":0.7295862416455519,"table_sim":0.6137332929756416,"col_score":0.9033656646504173},{"table":"employee_training","fused":0.7030713385987463,"table_sim":0.5853654132622957,"col_score":0.879630226603422},{"table":"departments","fused":0.6891239116032095,"table_sim":0.5980265380974776,"col_score":0.8257699718618072},{"table":"sales_regions","fused":0.661460511269655,"table_sim":0.5955253694234874,"col_score":0.7603632240389064},{"table":"budgets","fused":0.6594671453874164,"table_sim":0.5922652556433196,"col_score":0.7602699800035614},{"table":"employment_history","fused":0.65371651535301,"table_sim":0.5855835073288157,"col_score":0.7559160273893014},{"table":"goods_receipts","fused":0.5860233500981352,"table_sim":0.585472710203539,"col_score":0.5868493099400296},{"table":"sales_territories","fused":0.5308352600821102,"table_sim":0.5983156084770043,"col_score":0.4296147374897693},{"table":"positions","fused":0.5277589561375002,"table_sim":0.599093570754041,"col_score":0.4207570342126893},{"table":"inventory_adjustments","fused":0.34140536092494034,"table_sim":0,"col_score":0.8535134023123508},{"table":"asset_transfers","fused":0.3118224247229987,"table_sim":0,"col_score":0.7795560618074967},{"table":"employee_certifications","fused":0.3079141424216005,"table_sim":0,"col_score":0.7697853560540011},{"table":"employee_benefits","fused":0.30784384125982156,"table_sim":0,"col_score":0.7696096031495538},{"table":"performance_reviews","fused":0.24345070378004766,"table_sim":0,"col_score":0.6086267594501191}],"fk_expansion_candidates":62,"fk_expansion_added":2,"fk_expansion_blocked_count":50,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"max_tables"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"employee_certifications","reason":"already_selected"},{"table":"asset_transfers","reason":"max_tables"},{"table":"project_expenses","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"asset_transfers","reason":"max_tables"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"performance_reviews","reason":"max_tables"},{"table":"inventory_adjustments","reason":"already_selected"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":35,"total_retrieval_latency_ms":42,"sql_generated":"","tables_used_in_sql":[],"total_latency_ms":2859,"failure_type":"execution_error","failure_details":"Model generated invalid output (gibberish detected)"}
{"timestamp":"2026-01-29T21:24:30.888Z","query_id":"ded08e9e-b6b3-4440-831f-d77da09da429","question":"Find the salary percentile ranking for each employee within their department","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_salaries","employees","positions","departments","performance_reviews","employee_benefits","employee_training","budgets","sales_regions","sales_territories","sales_orders","project_resources"],"tables_from_table_retrieval":10,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_salaries","similarity":0.7150971626527787},{"table":"employee_salaries","similarity":0.708947353388894},{"table":"positions","similarity":0.673242751719371},{"table":"positions","similarity":0.6565261063268311},{"table":"employees","similarity":0.6495295179488771},{"table":"departments","similarity":0.64741802797087},{"table":"employees","similarity":0.633369499345302},{"table":"departments","similarity":0.6328181923670926},{"table":"sales_regions","similarity":0.6247633430026287},{"table":"performance_reviews","similarity":0.6201770986480979},{"table":"performance_reviews","similarity":0.6063045966524395},{"table":"budgets","similarity":0.6059422475297072},{"table":"employee_training","similarity":0.605724513187425},{"table":"sales_territories","similarity":0.603501429588932},{"table":"employee_benefits","similarity":0.59838723625395}],"column_hits_per_table":{"employees":8,"employee_salaries":7,"departments":4,"positions":3,"employee_training":1,"project_resources":2,"sales_orders":4,"performance_reviews":4,"employee_benefits":2,"order_lines":1,"sales_territories":1,"employee_certifications":2,"currencies":1,"tax_rates":1,"sales_regions":1,"vendor_invoices":3,"asset_categories":1,"purchase_orders":1,"budgets":1,"quote_lines":1,"product_suppliers":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.7516999267912566},{"column":"employee_number","similarity":0.6475222105411707},{"column":"phone","similarity":0.6335347761920442}],"employee_salaries":[{"column":"amount","similarity":0.7335170013770521},{"column":"approved_by","similarity":0.6822708118932407},{"column":"effective_date","similarity":0.6739318834802893}],"departments":[{"column":"budget","similarity":0.677998212273291},{"column":"manager_id","similarity":0.6351459248984429},{"column":"parent_department_id","similarity":0.623290651523152}],"positions":[{"column":"min_salary","similarity":0.6744645855381992},{"column":"max_salary","similarity":0.6663214050707933},{"column":"department_id","similarity":0.6424140802376155}],"employee_training":[{"column":"score","similarity":0.6565621289067415}],"project_resources":[{"column":"hourly_rate","similarity":0.6430540971391342},{"column":"allocation_percent","similarity":0.621737392517516}],"sales_orders":[{"column":"total","similarity":0.6323044264651041},{"column":"subtotal","similarity":0.6231063815552383},{"column":"sales_rep_id","similarity":0.603951442295968}],"performance_reviews":[{"column":"goals_met_percent","similarity":0.6309951342900396},{"column":"reviewer_id","similarity":0.6296156415374472},{"column":"employee_id","similarity":0.6270036415776163}],"employee_benefits":[{"column":"coverage_level","similarity":0.6291373504427914},{"column":"employee_id","similarity":0.608538154628989}],"order_lines":[{"column":"discount_percent","similarity":0.6288230405331483}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.626169512850208}],"employee_certifications":[{"column":"certificate_number","similarity":0.6179354657069774},{"column":"employee_id","similarity":0.6116376107330588}],"currencies":[{"column":"exchange_rate","similarity":0.6151317939764944}],"tax_rates":[{"column":"rate","similarity":0.6140263720536819}],"sales_regions":[{"column":"manager_id","similarity":0.6125537057406677}],"vendor_invoices":[{"column":"total","similarity":0.6094602269991619},{"column":"subtotal","similarity":0.604766812781768},{"column":"amount_paid","similarity":0.6027268036015034}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.6075033191187711}],"purchase_orders":[{"column":"total","similarity":0.6070169426521217}],"budgets":[{"column":"approved_by","similarity":0.6061548136762259}],"quote_lines":[{"column":"discount_percent","similarity":0.6047639324071958}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6034202600276743}]},"fused_scores":[{"table":"employee_salaries","fused":0.8552293749628055,"table_sim":0.708947353388894,"col_score":1.0746524073236725},{"table":"employees","fused":0.810206112431918,"table_sim":0.633369499345302,"col_score":1.0754610320618418},{"table":"positions","fused":0.7969657790255369,"table_sim":0.6565261063268311,"col_score":1.0076252880735959},{"table":"departments","fused":0.739810629815354,"table_sim":0.6328181923670926,"col_score":0.9002992859877461},{"table":"performance_reviews","fused":0.7380201350757962,"table_sim":0.6063045966524395,"col_score":0.9355934427108312},{"table":"employee_benefits","fused":0.695882623577545,"table_sim":0.59838723625395,"col_score":0.8421257045629376},{"table":"employee_training","fused":0.6260595594751517,"table_sim":0.605724513187425,"col_score":0.6565621289067415},{"table":"budgets","fused":0.6060272739883147,"table_sim":0.6059422475297072,"col_score":0.6061548136762259},{"table":"sales_regions","fused":0.5463730434089642,"table_sim":0.6247633430026287,"col_score":0.4287875940184674},{"table":"sales_territories","fused":0.5374283213514175,"table_sim":0.603501429588932,"col_score":0.4383186589951456},{"table":"project_resources","fused":0.3815691173591569,"table_sim":0,"col_score":0.9539227933978922},{"table":"sales_orders","fused":0.37754304689708934,"table_sim":0,"col_score":0.9438576172427233},{"table":"vendor_invoices","fused":0.36473745335601837,"table_sim":0,"col_score":0.9118436333900459},{"table":"employee_certifications","fused":0.33280345178541926,"table_sim":0,"col_score":0.832008629463548},{"table":"order_lines","fused":0.25152921621325935,"table_sim":0,"col_score":0.6288230405331483}],"fk_expansion_candidates":62,"fk_expansion_added":2,"fk_expansion_blocked_count":54,"fk_expansion_blocked":[{"table":"employment_history","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"project_resources","reason":"already_selected"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"max_tables"},{"table":"purchase_orders","reason":"max_tables"},{"table":"training_courses","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"employee_certifications","reason":"max_tables"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"already_selected"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_orders","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":30,"total_retrieval_latency_ms":36,"sql_generated":"SELECT e.employee_id, CONCAT(e.first_name, ' ', e.last_name) AS full_name, d.department_name, p.min_salary, p.max_salary, (e.salary / p.max_salary) * 100 AS salary_percentile\nFROM employees e\nJOIN departments d ON e.department_id = d.department_id\nJOIN positions p ON e.position_id = p.position_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column d.department_name does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":4,"autocorrect_failure_reason":"Best candidate 'budgets.name' has score 0.65 < threshold 0.7","total_latency_ms":5113,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column d.department_name does not exist"}
{"timestamp":"2026-01-29T21:24:36.001Z","query_id":"a14d808f-aa61-4f44-bd92-c4d85bc35be1","question":"Identify employees who have not completed mandatory training","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_training","training_courses","employee_certifications","employees","employee_salaries","leave_requests","certifications","employee_benefits","employment_history","asset_maintenance","fixed_assets"],"tables_from_table_retrieval":8,"tables_from_column_only":11,"tables_from_fk_expansion":1,"table_scores":[{"table":"employee_training","similarity":0.704722872966379},{"table":"employee_training","similarity":0.6889099730779654},{"table":"training_courses","similarity":0.6502538829600134},{"table":"training_courses","similarity":0.6479414954111261},{"table":"employee_certifications","similarity":0.6250915878473813},{"table":"employee_certifications","similarity":0.622622468299915},{"table":"employees","similarity":0.5917832723264214},{"table":"employees","similarity":0.5856498095746774},{"table":"leave_requests","similarity":0.562719264388909},{"table":"employee_salaries","similarity":0.5602939159575271},{"table":"certifications","similarity":0.5581468981449129},{"table":"employee_salaries","similarity":0.5560241204386787},{"table":"leave_requests","similarity":0.5542032646264498},{"table":"certifications","similarity":0.5525137082028069},{"table":"employment_history","similarity":0.5515442444507613}],"column_hits_per_table":{"employee_training":7,"training_courses":7,"employees":13,"employee_certifications":6,"employee_salaries":2,"task_assignments":1,"leave_requests":2,"leave_types":1,"certifications":1,"sales_territories":1,"warehouses":1,"business_units":1,"departments":1,"asset_maintenance":1,"emergency_contacts":1,"fixed_assets":1,"employee_benefits":2,"sales_regions":1},"top_columns_per_table":{"employee_training":[{"column":"completion_date","similarity":0.7097029109110412},{"column":"status","similarity":0.6976372257898822},{"column":"scheduled_date","similarity":0.6929640745659373}],"training_courses":[{"column":"is_mandatory","similarity":0.7012303940272651},{"column":"is_active","similarity":0.6332101562224836},{"column":"duration_hours","similarity":0.6052562024596296}],"employees":[{"column":"is_active","similarity":0.6199746938033394},{"column":"employee_id","similarity":0.5826338967861492},{"column":"hire_date","similarity":0.5802768513083864}],"employee_certifications":[{"column":"obtained_date","similarity":0.6093546957662352},{"column":"employee_id","similarity":0.6062132886742129},{"column":"expiry_date","similarity":0.5973898422628211}],"employee_salaries":[{"column":"effective_date","similarity":0.5735579062029842},{"column":"end_date","similarity":0.5734035938209808}],"task_assignments":[{"column":"employee_id","similarity":0.5697426551622571}],"leave_requests":[{"column":"employee_id","similarity":0.5660077016574807},{"column":"approved_by","similarity":0.5639076344538145}],"leave_types":[{"column":"is_paid","similarity":0.5643874982938306}],"certifications":[{"column":"description","similarity":0.5613971013724545}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5601484599678442}],"warehouses":[{"column":"manager_id","similarity":0.559427574061162}],"business_units":[{"column":"manager_id","similarity":0.5583488075095108}],"departments":[{"column":"manager_id","similarity":0.5561382857923995}],"asset_maintenance":[{"column":"performed_by","similarity":0.5557857799870751}],"emergency_contacts":[{"column":"employee_id","similarity":0.5555155902473405}],"fixed_assets":[{"column":"assigned_to","similarity":0.5550951258692207}],"employee_benefits":[{"column":"start_date","similarity":0.5541815032041719},{"column":"end_date","similarity":0.5539179805848201}],"sales_regions":[{"column":"manager_id","similarity":0.5490780636724084}]},"fused_scores":[{"table":"employee_training","fused":0.8358199631243832,"table_sim":0.6889099730779654,"col_score":1.05618494819401},{"table":"training_courses","fused":0.7903082953495078,"table_sim":0.6479414954111261,"col_score":1.00385849525708},{"table":"employee_certifications","fused":0.7367933277390073,"table_sim":0.622622468299915,"col_score":0.9080496168976457},{"table":"employees","fused":0.6993894779630755,"table_sim":0.5856498095746774,"col_score":0.8699989805456727},{"table":"employee_salaries","fused":0.6777183535085971,"table_sim":0.5560241204386787,"col_score":0.8602597031134747},{"table":"leave_requests","fused":0.6373260907894429,"table_sim":0.5542032646264498,"col_score":0.7620103300339327},{"table":"certifications","fused":0.4886994133059714,"table_sim":0.5525137082028069,"col_score":0.3929779709607181},{"table":"employee_benefits","fused":0.33245619739863286,"table_sim":0,"col_score":0.831140493496582},{"table":"employment_history","fused":0.3309265466704568,"table_sim":0.5515442444507613,"col_score":0},{"table":"asset_maintenance","fused":0.22231431199483007,"table_sim":0,"col_score":0.5557857799870751},{"table":"fixed_assets","fused":0.2220380503476883,"table_sim":0,"col_score":0.5550951258692207},{"table":"task_assignments","fused":0.15952794344543197,"table_sim":0,"col_score":0.39881985861357994},{"table":"leave_types","fused":0.15802849952227258,"table_sim":0,"col_score":0.3950712488056814},{"table":"sales_territories","fused":0.1568415687909964,"table_sim":0,"col_score":0.39210392197749094},{"table":"warehouses","fused":0.15663972073712534,"table_sim":0,"col_score":0.39159930184281333}],"fk_expansion_candidates":64,"fk_expansion_added":1,"fk_expansion_blocked_count":62,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"fixed_assets","reason":"already_selected"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"leave_types","reason":"no_evidence"},{"table":"leave_types","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":22,"total_retrieval_latency_ms":29,"sql_generated":"SELECT e.employee_id, e.first_name || ' ' || e.last_name AS employee_full_name FROM employees e LEFT JOIN training_courses tc ON e.employee_id = et.employee_id AND tc.is_mandatory = TRUE WHERE tc.course_id IS NULL;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42P01","error_message":"missing FROM-clause entry for table \"et\"","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":1,"autocorrect_failure_reason":"Alias 'et' not defined. Possible table: employee_training. Define alias in FROM/JOIN clause.","total_latency_ms":2900,"failure_type":"join_path_miss","failure_details":"Database error after 3 attempts: missing FROM-clause entry for table \"et\""}
{"timestamp":"2026-01-29T21:24:38.901Z","query_id":"da07874b-7b86-4298-a6ba-a64fc320dd4d","question":"Calculate month-over-month sales growth rate for the past 12 months","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_opportunities","sales_orders","sales_quotes","project_milestones","performance_reviews","purchase_orders","sales_regions","goods_receipts","fiscal_periods","sales_territories","fixed_assets"],"tables_from_table_retrieval":11,"tables_from_column_only":10,"tables_from_fk_expansion":1,"table_scores":[{"table":"sales_opportunities","similarity":0.6157116926794552},{"table":"sales_opportunities","similarity":0.6070846065624028},{"table":"sales_orders","similarity":0.6006459034551404},{"table":"sales_orders","similarity":0.5887441533450763},{"table":"sales_regions","similarity":0.5852419849044662},{"table":"sales_quotes","similarity":0.5842211564145057},{"table":"sales_regions","similarity":0.5757547372230886},{"table":"project_milestones","similarity":0.570290032024122},{"table":"sales_quotes","similarity":0.5681300155177891},{"table":"purchase_orders","similarity":0.5671901529888976},{"table":"performance_reviews","similarity":0.5664270760489215},{"table":"sales_territories","similarity":0.5642407853687107},{"table":"stock_transfers","similarity":0.5587294182734618},{"table":"goods_receipts","similarity":0.5586981186050166},{"table":"fiscal_periods","similarity":0.557865710059711}],"column_hits_per_table":{"sales_opportunities":8,"sales_regions":2,"sales_orders":9,"maintenance_types":1,"sales_quotes":7,"performance_reviews":4,"purchase_orders":3,"project_milestones":3,"product_suppliers":1,"depreciation_schedules":2,"sales_territories":1,"inventory_adjustments":1,"fixed_assets":1,"goods_receipts":1,"inventory_levels":1,"employee_salaries":1,"project_resources":1,"employee_benefits":1,"fiscal_years":1,"fiscal_periods":1},"top_columns_per_table":{"sales_opportunities":[{"column":"expected_close_date","similarity":0.6363002878299652},{"column":"actual_close_date","similarity":0.6293430551643405},{"column":"probability","similarity":0.6090506488590046}],"sales_regions":[{"column":"target_revenue","similarity":0.6231668309815453},{"column":"name","similarity":0.585191877724474}],"sales_orders":[{"column":"order_date","similarity":0.608157039227958},{"column":"ship_date","similarity":0.5938744066184168},{"column":"total","similarity":0.5899520680113397}],"maintenance_types":[{"column":"frequency_months","similarity":0.6034947907940172}],"sales_quotes":[{"column":"quote_date","similarity":0.6017792039675379},{"column":"status","similarity":0.5902208864403699},{"column":"valid_until","similarity":0.5831203611386355}],"performance_reviews":[{"column":"goals_met_percent","similarity":0.5909294294176741},{"column":"review_period_start","similarity":0.5615927806546327},{"column":"review_date","similarity":0.5576939251570936}],"purchase_orders":[{"column":"expected_date","similarity":0.583020378163897},{"column":"order_date","similarity":0.5622198964497076},{"column":"total","similarity":0.5529608978561139}],"project_milestones":[{"column":"amount","similarity":0.5816574903010769},{"column":"completed_date","similarity":0.5747741736862505},{"column":"due_date","similarity":0.5699308185216523}],"product_suppliers":[{"column":"lead_time_days","similarity":0.5803736956944617}],"depreciation_schedules":[{"column":"useful_life_months","similarity":0.579285680033414},{"column":"monthly_amount","similarity":0.574824063929058}],"sales_territories":[{"column":"name","similarity":0.5781934127104026}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.5725144040106267}],"fixed_assets":[{"column":"purchase_date","similarity":0.5697887482679104}],"goods_receipts":[{"column":"receipt_date","similarity":0.5676283184863925}],"inventory_levels":[{"column":"last_count_date","similarity":0.5634798348449386}],"employee_salaries":[{"column":"effective_date","similarity":0.5606593500435769}],"project_resources":[{"column":"hourly_rate","similarity":0.5590398909892947}],"employee_benefits":[{"column":"start_date","similarity":0.5585024004457627}],"fiscal_years":[{"column":"year","similarity":0.5573744243801744}],"fiscal_periods":[{"column":"period_number","similarity":0.5554732589241962}]},"fused_scores":[{"table":"sales_opportunities","fused":0.7446394901022959,"table_sim":0.6070846065624028,"col_score":0.9509718154121354},{"table":"sales_orders","fused":0.7152841890219124,"table_sim":0.5887441533450763,"col_score":0.9050942425371664},{"table":"sales_quotes","fused":0.6982137631254157,"table_sim":0.5681300155177891,"col_score":0.8933393845368557},{"table":"project_milestones","fused":0.689791850072154,"table_sim":0.570290032024122,"col_score":0.8690445771442021},{"table":"performance_reviews","fused":0.688546573527349,"table_sim":0.5664270760489215,"col_score":0.8717258197449904},{"table":"purchase_orders","fused":0.6859662223488389,"table_sim":0.5671901529888976,"col_score":0.8641303263887508},{"table":"sales_regions","fused":0.6766464376078977,"table_sim":0.5757547372230886,"col_score":0.8279839881851112},{"table":"goods_receipts","fused":0.562270198557567,"table_sim":0.5586981186050166,"col_score":0.5676283184863925},{"table":"fiscal_periods","fused":0.5569087296055051,"table_sim":0.557865710059711,"col_score":0.5554732589241962},{"table":"sales_territories","fused":0.5004386267801391,"table_sim":0.5642407853687107,"col_score":0.4047353888972818},{"table":"depreciation_schedules","fused":0.3466790847991772,"table_sim":0,"col_score":0.866697711997943},{"table":"stock_transfers","fused":0.33523765096407704,"table_sim":0.5587294182734618,"col_score":0},{"table":"maintenance_types","fused":0.2413979163176069,"table_sim":0,"col_score":0.6034947907940172},{"table":"product_suppliers","fused":0.2321494782777847,"table_sim":0,"col_score":0.5803736956944617},{"table":"inventory_adjustments","fused":0.22900576160425068,"table_sim":0,"col_score":0.5725144040106267}],"fk_expansion_candidates":36,"fk_expansion_added":1,"fk_expansion_blocked_count":34,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fixed_assets","reason":"already_selected"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":37,"total_retrieval_latency_ms":43,"sql_generated":"SELECT sr.name AS region_name, DATE_TRUNC('month', so.order_date) AS order_month, SUM(so.subtotal) OVER (PARTITION BY sr.region_id ORDER BY DATE_TRUNC('month', so.order_date)) / LAG(SUM(so.subtotal), 12) OVER (PARTITION BY sr.region_id ORDER BY DATE_TRUNC('month', so.order_date)) - 1 AS monthly_growth_rate FROM sales_regions sr JOIN sales_orders so ON sr.sales_territory_id = so.sales_territory_id GROUP BY sr.name, order_month ORDER BY order_month;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column sr.sales_territory_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":1,"autocorrect_failure_reason":"Best candidate 'sales_territories.territory_id' has score 0.65 < threshold 0.7","total_latency_ms":6803,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column sr.sales_territory_id does not exist"}
{"timestamp":"2026-01-29T21:24:45.704Z","query_id":"80912572-bfab-495a-9ed3-e67333934983","question":"Find the average order value and order frequency for each customer segment based on credit limit","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["customers","order_lines","sales_orders","purchase_orders","po_lines","vendor_invoice_lines","inventory_levels","requisition_lines","reorder_rules","quote_lines","customer_contacts","receipt_lines"],"tables_from_table_retrieval":10,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"customers","similarity":0.6806365809432632},{"table":"customers","similarity":0.6617339783713272},{"table":"order_lines","similarity":0.6612582093852053},{"table":"sales_orders","similarity":0.6503570787641184},{"table":"order_lines","similarity":0.6440009106463637},{"table":"sales_orders","similarity":0.6376795436737537},{"table":"purchase_orders","similarity":0.6350119894518774},{"table":"purchase_orders","similarity":0.626466775910568},{"table":"po_lines","similarity":0.6239700790357152},{"table":"po_lines","similarity":0.609465351537268},{"table":"sales_opportunities","similarity":0.6079639266361453},{"table":"inventory_levels","similarity":0.6033202031698347},{"table":"sales_regions","similarity":0.5939454770122685},{"table":"vendor_invoice_lines","similarity":0.5937575753832759},{"table":"requisition_lines","similarity":0.590502871726471}],"column_hits_per_table":{"customers":5,"order_lines":8,"purchase_orders":8,"sales_orders":7,"po_lines":5,"reorder_rules":3,"product_suppliers":1,"vendor_invoice_lines":3,"inventory_levels":3,"vendor_invoices":1,"customer_contacts":1,"quote_lines":2,"requisition_lines":1,"bank_transactions":1,"receipt_lines":1},"top_columns_per_table":{"customers":[{"column":"credit_limit","similarity":0.7562213296764043},{"column":"customer_number","similarity":0.6521520293534339},{"column":"payment_terms","similarity":0.6492525283356417}],"order_lines":[{"column":"line_total","similarity":0.6913816625333152},{"column":"unit_price","similarity":0.6750525139519165},{"column":"discount_percent","similarity":0.6707705169056545}],"purchase_orders":[{"column":"total","similarity":0.679308087050387},{"column":"po_number","similarity":0.65047868884927},{"column":"shipping_cost","similarity":0.6476903653884583}],"sales_orders":[{"column":"total","similarity":0.676144027149082},{"column":"order_number","similarity":0.6628715408716754},{"column":"shipping_cost","similarity":0.6417700268316578}],"po_lines":[{"column":"line_total","similarity":0.6567240233932621},{"column":"quantity","similarity":0.6366461345850174},{"column":"quantity_received","similarity":0.6338507022822304}],"reorder_rules":[{"column":"max_quantity","similarity":0.6445353762194392},{"column":"min_quantity","similarity":0.6258826394823849},{"column":"reorder_quantity","similarity":0.6145566972207888}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6397191137681456}],"vendor_invoice_lines":[{"column":"amount","similarity":0.6344433381575307},{"column":"quantity","similarity":0.6232178113301293},{"column":"unit_cost","similarity":0.6211589188193147}],"inventory_levels":[{"column":"quantity_reserved","similarity":0.6238969286133056},{"column":"last_count_date","similarity":0.6121516191920202},{"column":"quantity_on_hand","similarity":0.6120873561780505}],"vendor_invoices":[{"column":"total","similarity":0.6173072545374575}],"customer_contacts":[{"column":"phone","similarity":0.615865684240799}],"quote_lines":[{"column":"line_total","similarity":0.6146477438819443},{"column":"unit_price","similarity":0.6079234006312217}],"requisition_lines":[{"column":"estimated_total","similarity":0.6125923514934559}],"bank_transactions":[{"column":"amount","similarity":0.6096968542896204}],"receipt_lines":[{"column":"quantity_received","similarity":0.6070953158065068}]},"fused_scores":[{"table":"customers","fused":0.8299593247640449,"table_sim":0.6617339783713272,"col_score":1.0822973443531212},{"table":"order_lines","fused":0.7979637141915276,"table_sim":0.6440009106463637,"col_score":1.0289079195092734},{"table":"sales_orders","fused":0.7856396452382202,"table_sim":0.6376795436737537,"col_score":1.0075797975849197},{"table":"purchase_orders","fused":0.7776990381363496,"table_sim":0.626466775910568,"col_score":1.004547431475022},{"table":"po_lines","fused":0.7556980471966691,"table_sim":0.609465351537268,"col_score":0.9750470906857708},{"table":"vendor_invoice_lines","fused":0.7346754427590036,"table_sim":0.5937575753832759,"col_score":0.9460522438225953},{"table":"inventory_levels","fused":0.7339812171856271,"table_sim":0.6033202031698347,"col_score":0.9299727382093157},{"table":"requisition_lines","fused":0.5993386636332649,"table_sim":0.590502871726471,"col_score":0.6125923514934559},{"table":"reorder_rules","fused":0.3829906783842527,"table_sim":0,"col_score":0.9574766959606317},{"table":"quote_lines","fused":0.3674437776790221,"table_sim":0,"col_score":0.9186094441975552},{"table":"sales_opportunities","fused":0.3647783559816872,"table_sim":0.6079639266361453,"col_score":0},{"table":"sales_regions","fused":0.3563672862073611,"table_sim":0.5939454770122685,"col_score":0},{"table":"product_suppliers","fused":0.25588764550725823,"table_sim":0,"col_score":0.6397191137681456},{"table":"vendor_invoices","fused":0.246922901814983,"table_sim":0,"col_score":0.6173072545374575},{"table":"customer_contacts","fused":0.24634627369631962,"table_sim":0,"col_score":0.615865684240799}],"fk_expansion_candidates":34,"fk_expansion_added":2,"fk_expansion_blocked_count":26,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"customer_contacts","reason":"already_selected"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"receipt_lines","reason":"already_selected"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"vendor_invoices","reason":"max_tables"},{"table":"vendor_invoices","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":42,"total_retrieval_latency_ms":48,"sql_generated":"SELECT c.name AS customer_segment, AVG(s.total) as avg_order_value, COUNT(*) / 365 as order_frequency FROM customers c JOIN sales_orders s ON c.customer_id = s.customer_id GROUP BY c.name;","tables_used_in_sql":[],"explain_result":"success","rows_returned":413,"total_latency_ms":1105}
{"timestamp":"2026-01-29T21:24:46.809Z","query_id":"5e904128-a948-4643-9965-7bdc6ab64250","question":"What is the sales pipeline weighted value by stage and expected close month?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_opportunities","sales_orders","vendor_invoices","opportunity_stages","vendor_invoice_lines","sales_quotes","purchase_orders","product_suppliers","project_phases","inventory_levels","order_lines","products"],"tables_from_table_retrieval":8,"tables_from_column_only":9,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_opportunities","similarity":0.6054695442586654},{"table":"sales_opportunities","similarity":0.5991342441914193},{"table":"opportunity_stages","similarity":0.5878194026125775},{"table":"purchase_orders","similarity":0.569620040129231},{"table":"opportunity_stages","similarity":0.5683265438173515},{"table":"sales_orders","similarity":0.5672773314428301},{"table":"vendor_invoices","similarity":0.5653986063661894},{"table":"sales_orders","similarity":0.5581057438001689},{"table":"vendor_invoices","similarity":0.5555915054629954},{"table":"vendor_invoice_lines","similarity":0.5524555005656138},{"table":"sales_quotes","similarity":0.550409683101325},{"table":"purchase_orders","similarity":0.5494975836326818},{"table":"product_suppliers","similarity":0.5461777322512522},{"table":"sales_quotes","similarity":0.5444578982101401},{"table":"vendor_invoice_lines","similarity":0.5399019681677604}],"column_hits_per_table":{"sales_opportunities":6,"sales_quotes":7,"vendor_invoice_lines":3,"sales_orders":8,"vendor_invoices":7,"products":1,"purchase_orders":4,"project_phases":3,"opportunity_stages":2,"sales_regions":1,"product_suppliers":1,"depreciation_schedules":1,"inventory_levels":2,"project_milestones":1,"performance_reviews":1,"projects":1,"order_lines":1},"top_columns_per_table":{"sales_opportunities":[{"column":"expected_close_date","similarity":0.668690771832423},{"column":"actual_close_date","similarity":0.6339245575123714},{"column":"probability","similarity":0.5692602631371995}],"sales_quotes":[{"column":"status","similarity":0.5921986529170727},{"column":"total","similarity":0.5752162059761756},{"column":"quote_date","similarity":0.5738522658738787}],"vendor_invoice_lines":[{"column":"amount","similarity":0.5845362816918436},{"column":"quantity","similarity":0.5763391839401236},{"column":"unit_cost","similarity":0.5761415252217038}],"sales_orders":[{"column":"subtotal","similarity":0.5845302560552877},{"column":"total","similarity":0.5825451432204839},{"column":"shipping_cost","similarity":0.5774331860294376}],"vendor_invoices":[{"column":"subtotal","similarity":0.5822705703803419},{"column":"total","similarity":0.582041980504164},{"column":"status","similarity":0.5656992120499805}],"products":[{"column":"weight","similarity":0.5815009424843107}],"purchase_orders":[{"column":"expected_date","similarity":0.5741026972061223},{"column":"total","similarity":0.5488581395929076},{"column":"subtotal","similarity":0.5484437995629727}],"project_phases":[{"column":"end_date","similarity":0.5687826504010404},{"column":"start_date","similarity":0.543726006663315},{"column":"status","similarity":0.542017684104051}],"opportunity_stages":[{"column":"is_closed","similarity":0.5678148186760426},{"column":"probability","similarity":0.5543864927330566}],"sales_regions":[{"column":"target_revenue","similarity":0.5654854838224989}],"product_suppliers":[{"column":"lead_time_days","similarity":0.5615731578476576}],"depreciation_schedules":[{"column":"monthly_amount","similarity":0.558713615169843}],"inventory_levels":[{"column":"last_count_date","similarity":0.5575421295633526},{"column":"quantity_on_hand","similarity":0.5419613068262183}],"project_milestones":[{"column":"amount","similarity":0.5518840450887265}],"performance_reviews":[{"column":"review_period_end","similarity":0.5513220446834107}],"projects":[{"column":"planned_end_date","similarity":0.5476762261808827}],"order_lines":[{"column":"discount_percent","similarity":0.545524369079207}]},"fused_scores":[{"table":"sales_opportunities","fused":0.753741766750295,"table_sim":0.5991342441914193,"col_score":0.9856530505886087},{"table":"sales_orders","fused":0.6851845773463132,"table_sim":0.5581057438001689,"col_score":0.8758028276655296},{"table":"vendor_invoices","fused":0.6826715275307668,"table_sim":0.5555915054629954,"col_score":0.8732915606324239},{"table":"opportunity_stages","fused":0.6789991523074392,"table_sim":0.5683265438173515,"col_score":0.8450080650425709},{"table":"vendor_invoice_lines","fused":0.6730235303654184,"table_sim":0.5399019681677604,"col_score":0.8727058736619053},{"table":"sales_quotes","fused":0.67153167449133,"table_sim":0.5444578982101401,"col_score":0.862142338913115},{"table":"purchase_orders","fused":0.6691112569806394,"table_sim":0.5494975836326818,"col_score":0.848531767002576},{"table":"product_suppliers","fused":0.5523359024898145,"table_sim":0.5461777322512522,"col_score":0.5615731578476576},{"table":"project_phases","fused":0.33625826149307914,"table_sim":0,"col_score":0.8406456537326978},{"table":"inventory_levels","fused":0.33140911319058475,"table_sim":0,"col_score":0.8285227829764618},{"table":"products","fused":0.2326003769937243,"table_sim":0,"col_score":0.5815009424843107},{"table":"sales_regions","fused":0.22619419352899955,"table_sim":0,"col_score":0.5654854838224989},{"table":"depreciation_schedules","fused":0.2234854460679372,"table_sim":0,"col_score":0.558713615169843},{"table":"project_milestones","fused":0.2207536180354906,"table_sim":0,"col_score":0.5518840450887265},{"table":"performance_reviews","fused":0.2205288178733643,"table_sim":0,"col_score":0.5513220446834107}],"fk_expansion_candidates":32,"fk_expansion_added":2,"fk_expansion_blocked_count":26,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"order_lines","reason":"already_selected"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"already_selected"},{"table":"project_tasks","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"projects","reason":"max_tables"},{"table":"projects","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":34,"total_retrieval_latency_ms":40,"sql_generated":"","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42601","error_message":"syntax error at or near \"are\"","total_latency_ms":7566,"failure_type":"execution_error","failure_details":"Model did not generate SELECT statement"}
{"timestamp":"2026-01-29T21:24:54.375Z","query_id":"aa412eec-f0a6-4719-b653-f8af9e4cbc57","question":"Calculate inventory turnover ratio by product category","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["inventory_levels","inventory_transactions","asset_categories","products","reorder_rules","inventory_adjustments","product_categories","goods_receipts","sales_orders","product_suppliers","order_lines","receipt_lines"],"tables_from_table_retrieval":8,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_levels","similarity":0.6747561713408694},{"table":"inventory_levels","similarity":0.6691204463835779},{"table":"products","similarity":0.6673866757064916},{"table":"asset_categories","similarity":0.6658822163690923},{"table":"inventory_transactions","similarity":0.6584332771076702},{"table":"products","similarity":0.6538676672378335},{"table":"product_categories","similarity":0.6501703787798785},{"table":"asset_categories","similarity":0.6498613946467077},{"table":"inventory_transactions","similarity":0.6496833625181302},{"table":"product_categories","similarity":0.6492322259777316},{"table":"reorder_rules","similarity":0.6320804286370688},{"table":"inventory_adjustments","similarity":0.631066892629761},{"table":"reorder_rules","similarity":0.6293336150444742},{"table":"inventory_adjustments","similarity":0.6277252097689573},{"table":"goods_receipts","similarity":0.6155086832245751}],"column_hits_per_table":{"inventory_transactions":7,"inventory_levels":6,"asset_categories":4,"product_categories":5,"products":7,"sales_orders":4,"fixed_assets":1,"reorder_rules":3,"product_suppliers":2,"inventory_adjustments":4,"receipt_lines":2,"sales_regions":1,"depreciation_entries":2,"goods_receipts":1,"order_lines":1},"top_columns_per_table":{"inventory_transactions":[{"column":"quantity","similarity":0.6807888987316983},{"column":"transaction_type","similarity":0.6515365120278798},{"column":"reference_type","similarity":0.637828790421886}],"inventory_levels":[{"column":"quantity_reserved","similarity":0.671007230009608},{"column":"quantity_available","similarity":0.6650873994044184},{"column":"quantity_on_hand","similarity":0.6516421570126745}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.6641371665838605},{"column":"depreciation_method","similarity":0.6354419036675771},{"column":"useful_life_years","similarity":0.621287819824621}],"product_categories":[{"column":"description","similarity":0.6507497169789198},{"column":"is_active","similarity":0.649502344633669},{"column":"category_id","similarity":0.6475053642784276}],"products":[{"column":"category_id","similarity":0.6427715834682924},{"column":"weight","similarity":0.6295802003912835},{"column":"unit_cost","similarity":0.6162112154039736}],"sales_orders":[{"column":"total","similarity":0.6200420126879076},{"column":"subtotal","similarity":0.6007588555599288},{"column":"tax_amount","similarity":0.5987801944503532}],"fixed_assets":[{"column":"category_id","similarity":0.6184944064206663}],"reorder_rules":[{"column":"reorder_quantity","similarity":0.6154008693245504},{"column":"product_id","similarity":0.6044803841321819},{"column":"min_quantity","similarity":0.603522150399881}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6130859746943957},{"column":"unit_cost","similarity":0.5933645257338089}],"inventory_adjustments":[{"column":"adjustment_number","similarity":0.6089434793102139},{"column":"adjusted_by","similarity":0.6069731015030922},{"column":"status","similarity":0.6019433143183657}],"receipt_lines":[{"column":"quantity_received","similarity":0.6032347735819231},{"column":"product_id","similarity":0.6026462248777215}],"sales_regions":[{"column":"target_revenue","similarity":0.6030920394288763}],"depreciation_entries":[{"column":"accumulated_depreciation","similarity":0.6025970339514821},{"column":"book_value","similarity":0.5960312123863106}],"goods_receipts":[{"column":"receipt_number","similarity":0.5957984012288485}],"order_lines":[{"column":"quantity_shipped","similarity":0.5947556552108059}]},"fused_scores":[{"table":"inventory_levels","fused":0.8028926397148737,"table_sim":0.6691204463835779,"col_score":1.0035509297118173},{"table":"inventory_transactions","fused":0.7924328794091334,"table_sim":0.6496833625181302,"col_score":1.0065571547456382},{"table":"asset_categories","fused":0.7826600841550841,"table_sim":0.6498613946467077,"col_score":0.981858118417649},{"table":"products","fused":0.7673949235800083,"table_sim":0.6538676672378335,"col_score":0.9376858080932703},{"table":"reorder_rules","fused":0.7444649468364809,"table_sim":0.6293336150444742,"col_score":0.917161944524491},{"table":"inventory_adjustments","fused":0.7416071378860785,"table_sim":0.6277252097689573,"col_score":0.91243003006176},{"table":"product_categories","fused":0.6626795845894502,"table_sim":0.6492322259777316,"col_score":0.682850622507028},{"table":"goods_receipts","fused":0.6076245704262845,"table_sim":0.6155086832245751,"col_score":0.5957984012288485},{"table":"sales_orders","fused":0.3681685761871488,"table_sim":0,"col_score":0.920421440467872},{"table":"product_suppliers","fused":0.3639072950245201,"table_sim":0,"col_score":0.9097682375613002},{"table":"depreciation_entries","fused":0.360245056057855,"table_sim":0,"col_score":0.9006126401446375},{"table":"receipt_lines","fused":0.3256643809156503,"table_sim":0,"col_score":0.8141609522891257},{"table":"sales_regions","fused":0.24123681577155054,"table_sim":0,"col_score":0.6030920394288763},{"table":"order_lines","fused":0.23790226208432236,"table_sim":0,"col_score":0.5947556552108059},{"table":"fixed_assets","fused":0.17317843379778658,"table_sim":0,"col_score":0.4329460844944664}],"fk_expansion_candidates":34,"fk_expansion_added":2,"fk_expansion_blocked_count":30,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"order_lines","reason":"already_selected"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"already_selected"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":15,"total_retrieval_latency_ms":22,"sql_generated":"SELECT pc.name AS ProductCategory, SUM(il.quantity_on_hand) / AVG(il.quantity_reserved + il.quantity_available) AS InventoryTurnoverRatio FROM products p JOIN product_categories pc ON p.category_id = pc.category_id JOIN inventory_levels il ON p.product_id = il.product_id GROUP BY pc.name;","tables_used_in_sql":[],"explain_result":"success","rows_returned":30,"total_latency_ms":1361}
{"timestamp":"2026-01-29T21:24:55.736Z","query_id":"52b32ad4-6125-4253-a9f2-df12ffda83dc","question":"Identify products with significant inventory discrepancies (adjustment > 10% of stock)","attempt_count":1,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["inventory_adjustments","adjustment_lines","inventory_transactions","inventory_levels","products","fixed_assets","asset_categories","stock_transfers","product_suppliers","asset_maintenance","asset_locations","warehouse_locations"],"tables_from_table_retrieval":10,"tables_from_column_only":10,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_adjustments","similarity":0.6958975386244389},{"table":"inventory_adjustments","similarity":0.6915197337369523},{"table":"adjustment_lines","similarity":0.6522288043937092},{"table":"adjustment_lines","similarity":0.651007722195867},{"table":"fixed_assets","similarity":0.5955860146307721},{"table":"inventory_levels","similarity":0.5926011478403523},{"table":"inventory_levels","similarity":0.5835973247906563},{"table":"products","similarity":0.578715845938642},{"table":"stock_transfers","similarity":0.5760981592349576},{"table":"inventory_transactions","similarity":0.5750206157907899},{"table":"fixed_assets","similarity":0.5651757713023685},{"table":"inventory_transactions","similarity":0.5645379266121585},{"table":"asset_categories","similarity":0.5623112702235089},{"table":"asset_maintenance","similarity":0.5600794494972439},{"table":"product_suppliers","similarity":0.5588750264521751}],"column_hits_per_table":{"inventory_adjustments":8,"adjustment_lines":5,"inventory_transactions":4,"products":6,"inventory_levels":5,"stock_transfers":2,"sales_orders":2,"fixed_assets":4,"product_suppliers":1,"asset_categories":3,"product_categories":1,"project_expenses":1,"warehouse_locations":1,"goods_receipts":1,"sales_opportunities":1,"purchase_orders":1,"asset_maintenance":1,"purchase_requisitions":1,"asset_locations":1,"vendor_invoices":1},"top_columns_per_table":{"inventory_adjustments":[{"column":"adjustment_number","similarity":0.7341965834229129},{"column":"reason","similarity":0.7286392066545573},{"column":"status","similarity":0.7138688590653707}],"adjustment_lines":[{"column":"quantity_change","similarity":0.6392157712019857},{"column":"quantity_before","similarity":0.634171940504201},{"column":"quantity_after","similarity":0.6332989804641287}],"inventory_transactions":[{"column":"reference_type","similarity":0.6271412703735331},{"column":"transaction_type","similarity":0.6257663977952485},{"column":"quantity","similarity":0.6079063742265192}],"products":[{"column":"sku","similarity":0.6164491394343341},{"column":"name","similarity":0.6034174012104574},{"column":"weight","similarity":0.5959940766492622}],"inventory_levels":[{"column":"quantity_on_hand","similarity":0.608866183311948},{"column":"quantity_available","similarity":0.6051195357195316},{"column":"quantity_reserved","similarity":0.6037194678286041}],"stock_transfers":[{"column":"status","similarity":0.6079256845371828},{"column":"transfer_number","similarity":0.6034595992854049}],"sales_orders":[{"column":"order_number","similarity":0.6005608184497583},{"column":"status","similarity":0.5891804513517737}],"fixed_assets":[{"column":"serial_number","similarity":0.5959181419986975},{"column":"status","similarity":0.5830638318759733},{"column":"asset_tag","similarity":0.5821282768349391}],"product_suppliers":[{"column":"vendor_sku","similarity":0.5933274478553298}],"asset_categories":[{"column":"depreciation_method","similarity":0.5909825633152775},{"column":"salvage_value_percent","similarity":0.5765146715808612},{"column":"name","similarity":0.5610883455413478}],"product_categories":[{"column":"name","similarity":0.5904071610230438}],"project_expenses":[{"column":"category","similarity":0.5810751474323431}],"warehouse_locations":[{"column":"aisle","similarity":0.5786356735369311}],"goods_receipts":[{"column":"receipt_number","similarity":0.5779296040347197}],"sales_opportunities":[{"column":"source","similarity":0.5765090582142506}],"purchase_orders":[{"column":"status","similarity":0.5729152190846236}],"asset_maintenance":[{"column":"status","similarity":0.5721672810617285}],"purchase_requisitions":[{"column":"requisition_number","similarity":0.5665364323660178}],"asset_locations":[{"column":"floor","similarity":0.5662760777195117}],"vendor_invoices":[{"column":"invoice_number","similarity":0.560424242944695}]},"fused_scores":[{"table":"inventory_adjustments","fused":0.854318314942248,"table_sim":0.6915197337369523,"col_score":1.0985161867501916},{"table":"adjustment_lines","fused":0.7731253298991547,"table_sim":0.651007722195867,"col_score":0.9563017414540862},{"table":"inventory_transactions","fused":0.7147325436757581,"table_sim":0.5645379266121585,"col_score":0.9400244692711572},{"table":"inventory_levels","fused":0.7147287753430793,"table_sim":0.5835973247906563,"col_score":0.9114259511717138},{"table":"products","fused":0.7130079786667713,"table_sim":0.578715845938642,"col_score":0.9144461777589652},{"table":"fixed_assets","fused":0.693898374947888,"table_sim":0.5651757713023685,"col_score":0.8869822804161671},{"table":"asset_categories","fused":0.6890827217763886,"table_sim":0.5623112702235089,"col_score":0.8792398991057082},{"table":"stock_transfers","fused":0.6721523310903421,"table_sim":0.5760981592349576,"col_score":0.8162335888734189},{"table":"product_suppliers","fused":0.572655995013437,"table_sim":0.5588750264521751,"col_score":0.5933274478553298},{"table":"asset_maintenance","fused":0.49625450839563034,"table_sim":0.5600794494972439,"col_score":0.40051709674320995},{"table":"sales_orders","fused":0.32270959056915166,"table_sim":0,"col_score":0.8067739764228791},{"table":"project_expenses","fused":0.23243005897293725,"table_sim":0,"col_score":0.5810751474323431},{"table":"warehouse_locations","fused":0.23145426941477246,"table_sim":0,"col_score":0.5786356735369311},{"table":"goods_receipts","fused":0.2311718416138879,"table_sim":0,"col_score":0.5779296040347197},{"table":"sales_opportunities","fused":0.23060362328570025,"table_sim":0,"col_score":0.5765090582142506}],"fk_expansion_candidates":38,"fk_expansion_added":2,"fk_expansion_blocked_count":34,"fk_expansion_blocked":[{"table":"asset_locations","reason":"already_selected"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"already_selected"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":17,"total_retrieval_latency_ms":24,"sql_generated":"SELECT p.name AS product_name, i.quantity_on_hand, i.quantity_reserved, i.quantity_available, a.reason FROM inventory_levels i JOIN products p ON i.product_id = p.product_id JOIN adjustment_lines a ON a.adjustment_id = (SELECT MAX(adjustment_id) FROM inventory_adjustments WHERE product_id = i.product_id AND location_id = i.location_id) WHERE ABS((i.quantity_on_hand + i.quantity_reserved - i.quantity_available)/2) > 0.1 * (i.quantity_on_hand + i.quantity_reserved);","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42702","error_message":"column reference \"product_id\" is ambiguous","total_latency_ms":2341,"failure_type":"llm_reasoning","failure_details":"SQL error 42702: Database error after 1 attempts: column reference \"product_id\" is ambiguous"}
{"timestamp":"2026-01-29T21:24:58.077Z","query_id":"8e1874af-8aef-45a0-b125-9f6a7d6633b2","question":"Calculate vendor performance score based on on-time delivery and invoice accuracy","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["vendor_invoices","performance_reviews","vendor_invoice_lines","vendors","vendor_contacts","product_suppliers","sales_orders","purchase_orders","fixed_assets","asset_maintenance"],"tables_from_table_retrieval":8,"tables_from_column_only":2,"tables_from_fk_expansion":0,"table_scores":[{"table":"vendor_invoices","similarity":0.6955551654807471},{"table":"vendor_invoices","similarity":0.6877693444044282},{"table":"performance_reviews","similarity":0.6709085810677549},{"table":"performance_reviews","similarity":0.6616195213650082},{"table":"purchase_orders","similarity":0.6347301134279532},{"table":"vendors","similarity":0.630909375510322},{"table":"purchase_orders","similarity":0.6231004988578854},{"table":"vendor_invoice_lines","similarity":0.6204253750668519},{"table":"product_suppliers","similarity":0.6192498236848171},{"table":"vendors","similarity":0.6155248174915915},{"table":"vendor_invoice_lines","similarity":0.6085569773940885},{"table":"vendor_contacts","similarity":0.5997141827932857},{"table":"product_suppliers","similarity":0.5986245289824477},{"table":"sales_orders","similarity":0.5961588710632616},{"table":"sales_orders","similarity":0.5947768517693673}],"column_hits_per_table":{"vendor_invoices":12,"vendor_invoice_lines":6,"performance_reviews":9,"vendors":9,"vendor_contacts":4,"purchase_orders":2,"product_suppliers":4,"fixed_assets":1,"sales_orders":2,"asset_maintenance":1},"top_columns_per_table":{"vendor_invoices":[{"column":"invoice_date","similarity":0.6765580061331256},{"column":"total","similarity":0.6764019740002268},{"column":"invoice_number","similarity":0.6636094388195389}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.6434932528090191},{"column":"amount","similarity":0.6366634169908185},{"column":"unit_cost","similarity":0.622904924682905}],"performance_reviews":[{"column":"review_date","similarity":0.6381782068433183},{"column":"goals_met_percent","similarity":0.6328139994418308},{"column":"review_period_start","similarity":0.6179144234098587}],"vendors":[{"column":"vendor_number","similarity":0.6328044268147751},{"column":"phone","similarity":0.6308043133506924},{"column":"website","similarity":0.6136264685506736}],"vendor_contacts":[{"column":"phone","similarity":0.6099312252856707},{"column":"email","similarity":0.5929107702232568},{"column":"title","similarity":0.5908148084239192}],"purchase_orders":[{"column":"vendor_id","similarity":0.6033254664913035},{"column":"expected_date","similarity":0.5718044755694628}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6007097500202866},{"column":"lead_time_days","similarity":0.6002656091547952},{"column":"vendor_id","similarity":0.5929190374101849}],"fixed_assets":[{"column":"vendor_id","similarity":0.5790519907978402}],"sales_orders":[{"column":"order_date","similarity":0.5770519982365088},{"column":"shipping_cost","similarity":0.5731083814243623}],"asset_maintenance":[{"column":"vendor_id","similarity":0.5763399733911833}]},"fused_scores":[{"table":"vendor_invoices","fused":0.8185652038959526,"table_sim":0.6877693444044282,"col_score":1.014758993133239},{"table":"performance_reviews","fused":0.7788057954446985,"table_sim":0.6616195213650082,"col_score":0.9545852065642337},{"table":"vendor_invoice_lines","fused":0.7498641709582246,"table_sim":0.6085569773940885,"col_score":0.9618249613044284},{"table":"vendors","fused":0.7485975238910034,"table_sim":0.6155248174915915,"col_score":0.9482065834901213},{"table":"vendor_contacts","fused":0.722383153834891,"table_sim":0.5997141827932857,"col_score":0.9063866103972991},{"table":"product_suppliers","fused":0.7195117392285423,"table_sim":0.5986245289824477,"col_score":0.9008425545976841},{"table":"sales_orders","fused":0.7023085866410964,"table_sim":0.5947768517693673,"col_score":0.8636061889486899},{"table":"purchase_orders","fused":0.6870476548512989,"table_sim":0.6231004988578854,"col_score":0.782968388841419},{"table":"fixed_assets","fused":0.16213455742339525,"table_sim":0,"col_score":0.4053363935584881},{"table":"asset_maintenance","fused":0.1613751925495313,"table_sim":0,"col_score":0.40343798137382825}],"fk_expansion_candidates":34,"fk_expansion_added":0,"fk_expansion_blocked_count":34,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":49,"total_retrieval_latency_ms":56,"sql_generated":"SELECT v.vendor_id, v.name AS VendorName, AVG(CASE WHEN p.order_date <= p.expected_date THEN 1 ELSE 0 END) * 0.5 + AVG(CASE WHEN i.amount_paid = il.subtotal THEN 1 ELSE 0 END) * 0.5 AS VendorPerformanceScore FROM vendors v JOIN purchase_orders p ON v.vendor_id = p.vendor_id JOIN vendor_invoices i ON v.vendor_id = i.vendor_id AND p.po_id = i.po_id JOIN vendor_invoice_lines il ON i.invoice_id = il.invoice_id GROUP BY v.vendor_id, v.name;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column il.subtotal does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":0,"autocorrect_failure_reason":"No candidates found for column 'subtotal'","total_latency_ms":7434,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column il.subtotal does not exist"}
{"timestamp":"2026-01-29T21:25:05.511Z","query_id":"15487b9f-75fa-4d22-b7ed-9474d5dcc64f","question":"Generate a trial balance for the current period showing debits and credits by account category","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["bank_accounts","depreciation_entries","depreciation_schedules","account_types","asset_categories","bank_transactions","fiscal_periods","budget_lines","journal_lines","purchase_orders","budgets","vendor_invoices"],"tables_from_table_retrieval":8,"tables_from_column_only":15,"tables_from_fk_expansion":2,"table_scores":[{"table":"bank_accounts","similarity":0.6367900839880641},{"table":"asset_categories","similarity":0.6346535809758647},{"table":"bank_accounts","similarity":0.6340482364220554},{"table":"depreciation_schedules","similarity":0.6304903160077374},{"table":"depreciation_entries","similarity":0.6297144045903278},{"table":"account_types","similarity":0.6272285653729832},{"table":"depreciation_entries","similarity":0.6225511215159643},{"table":"account_types","similarity":0.6193803416295194},{"table":"depreciation_schedules","similarity":0.6165057393727287},{"table":"bank_transactions","similarity":0.6150962404412702},{"table":"asset_categories","similarity":0.6102645047904957},{"table":"bank_transactions","similarity":0.6075045909305435},{"table":"budget_lines","similarity":0.6041944231906224},{"table":"fiscal_periods","similarity":0.6041900407507028},{"table":"fiscal_periods","similarity":0.6009028938677331}],"column_hits_per_table":{"bank_accounts":4,"account_types":2,"depreciation_schedules":7,"depreciation_entries":6,"asset_categories":2,"project_budgets":1,"journal_lines":2,"benefit_types":1,"fiscal_periods":5,"project_expenses":1,"bank_transactions":4,"timesheets":2,"budgets":2,"departments":1,"projects":1,"asset_maintenance":1,"customers":1,"chart_of_accounts":1,"purchase_orders":2,"budget_lines":1,"vendor_invoices":1,"fixed_assets":1,"employee_benefits":1},"top_columns_per_table":{"bank_accounts":[{"column":"current_balance","similarity":0.6856207008937131},{"column":"account_name","similarity":0.6085119078521903},{"column":"bank_name","similarity":0.6052810360125528}],"account_types":[{"column":"normal_balance","similarity":0.6471004935426607},{"column":"category","similarity":0.6220382371057719}],"depreciation_schedules":[{"column":"monthly_amount","similarity":0.6453000273773885},{"column":"annual_amount","similarity":0.6430843573005959},{"column":"depreciation_method","similarity":0.6209191877039439}],"depreciation_entries":[{"column":"amount","similarity":0.6447408121789926},{"column":"period_id","similarity":0.643559649092342},{"column":"accumulated_depreciation","similarity":0.6397138442937423}],"asset_categories":[{"column":"depreciation_method","similarity":0.640600565078528},{"column":"salvage_value_percent","similarity":0.5872709992162598}],"project_budgets":[{"column":"category","similarity":0.6169569178206936}],"journal_lines":[{"column":"debit","similarity":0.615233183208468},{"column":"credit","similarity":0.5881297887352918}],"benefit_types":[{"column":"annual_cost","similarity":0.6144825624279615}],"fiscal_periods":[{"column":"name","similarity":0.6139653006720002},{"column":"start_date","similarity":0.5940557583983144},{"column":"period_id","similarity":0.593789594476675}],"project_expenses":[{"column":"category","similarity":0.6108512270852675}],"bank_transactions":[{"column":"amount","similarity":0.6009151929141651},{"column":"reference","similarity":0.5946297202608782},{"column":"transaction_type","similarity":0.5925000251285931}],"timesheets":[{"column":"total_hours","similarity":0.5953084784593494},{"column":"status","similarity":0.5824555063940192}],"budgets":[{"column":"status","similarity":0.5947490104323017},{"column":"total_amount","similarity":0.5858262812102382}],"departments":[{"column":"budget","similarity":0.5935516329426287}],"projects":[{"column":"budget","similarity":0.5933004396512298}],"asset_maintenance":[{"column":"cost","similarity":0.5920636317252489}],"customers":[{"column":"credit_limit","similarity":0.5881966845767086}],"chart_of_accounts":[{"column":"description","similarity":0.5871916379697032}],"purchase_orders":[{"column":"total","similarity":0.5864519649300926},{"column":"subtotal","similarity":0.5855426910442382}],"budget_lines":[{"column":"period_id","similarity":0.585414728590752}],"vendor_invoices":[{"column":"subtotal","similarity":0.5854109351756007}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5847057269059956}],"employee_benefits":[{"column":"coverage_level","similarity":0.5835880291391402}]},"fused_scores":[{"table":"bank_accounts","fused":0.7756396663227276,"table_sim":0.6340482364220554,"col_score":0.9880268111737361},{"table":"depreciation_entries","fused":0.7593697666399241,"table_sim":0.6225511215159643,"col_score":0.9645977343258638},{"table":"depreciation_schedules","fused":0.7566403260347119,"table_sim":0.6165057393727287,"col_score":0.9668422060276864},{"table":"account_types","fused":0.7548760498159303,"table_sim":0.6193803416295194,"col_score":0.9581196120955466},{"table":"asset_categories","fused":0.7398531287489605,"table_sim":0.6102645047904957,"col_score":0.9342360646866579},{"table":"bank_transactions","fused":0.7237947757761678,"table_sim":0.6075045909305435,"col_score":0.8982300530446041},{"table":"fiscal_periods","fused":0.7158588906553558,"table_sim":0.6009028938677331,"col_score":0.8882928858367899},{"table":"budget_lines","fused":0.5264327779197839,"table_sim":0.6041944231906224,"col_score":0.4097903100135264},{"table":"journal_lines","fused":0.36371923103044557,"table_sim":0,"col_score":0.9092980775761139},{"table":"purchase_orders","fused":0.35168932418088467,"table_sim":0,"col_score":0.8792233104522116},{"table":"timesheets","fused":0.31966716227890246,"table_sim":0,"col_score":0.7991679056972562},{"table":"budgets","fused":0.31759537394461756,"table_sim":0,"col_score":0.7939884348615438},{"table":"project_budgets","fused":0.24678276712827746,"table_sim":0,"col_score":0.6169569178206936},{"table":"benefit_types","fused":0.2457930249711846,"table_sim":0,"col_score":0.6144825624279615},{"table":"project_expenses","fused":0.24434049083410703,"table_sim":0,"col_score":0.6108512270852675}],"fk_expansion_candidates":28,"fk_expansion_added":2,"fk_expansion_blocked_count":24,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"budgets","reason":"already_selected"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"vendor_invoices","reason":"already_selected"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":25,"total_retrieval_latency_ms":32,"sql_generated":"SELECT b.name AS \"Category\", SUM(CASE WHEN jl.amount IS NOT NULL THEN jl.amount ELSE 0 END) AS \"Debit\", SUM(CASE WHEN jl.amount IS NOT NULL THEN jl.amount ELSE 0 END) AS \"Credit\"\nFROM budgets b\nJOIN budget_lines bl ON b.budget_id = bl.budget_id AND bl.period_id IN (SELECT period_id FROM fiscal_periods WHERE start_date <= CURRENT_DATE AND end_date >= CURRENT_DATE)\nLEFT JOIN journal_entries jl ON bl.account_id = jl.debit OR bl.account_id = jl.credit\nGROUP BY b.name LIMIT 1000;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column jl.amount does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_correction":"Replaced 'category_name' with 'name' (suffix, score: 0.80)","autocorrect_candidates":5,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":6816,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T21:25:12.327Z","query_id":"268a3b54-daf2-4ed7-8580-3684f0a787b6","question":"Calculate cash flow from bank transactions grouped by transaction type and month","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["bank_transactions","bank_accounts","inventory_transactions","account_types","depreciation_entries","asset_transfers","project_budgets","asset_categories","stock_transfers","depreciation_schedules","currencies","projects"],"tables_from_table_retrieval":10,"tables_from_column_only":13,"tables_from_fk_expansion":2,"table_scores":[{"table":"bank_transactions","similarity":0.7232703691525166},{"table":"bank_transactions","similarity":0.7144733407570569},{"table":"bank_accounts","similarity":0.6412885484513536},{"table":"bank_accounts","similarity":0.6330427898995664},{"table":"inventory_transactions","similarity":0.6130368701918206},{"table":"inventory_transactions","similarity":0.5906232287127622},{"table":"account_types","similarity":0.5890479368554123},{"table":"account_types","similarity":0.5746397921552414},{"table":"depreciation_entries","similarity":0.5640374269123315},{"table":"project_budgets","similarity":0.563995673637428},{"table":"depreciation_entries","similarity":0.5609169011076522},{"table":"stock_transfers","similarity":0.5608182762969601},{"table":"asset_categories","similarity":0.5603941855250653},{"table":"budget_lines","similarity":0.5577786937476792},{"table":"asset_transfers","similarity":0.557070516037654}],"column_hits_per_table":{"bank_transactions":9,"inventory_transactions":5,"bank_accounts":8,"depreciation_schedules":2,"account_types":2,"depreciation_entries":4,"asset_transfers":4,"benefit_types":1,"sales_orders":1,"departments":1,"vendor_invoices":1,"asset_categories":1,"project_budgets":2,"customers":1,"chart_of_accounts":1,"vendors":1,"maintenance_types":1,"projects":1,"currencies":1,"stock_transfers":1,"project_expenses":1,"purchase_orders":1},"top_columns_per_table":{"bank_transactions":[{"column":"transaction_type","similarity":0.7300639775150025},{"column":"transaction_date","similarity":0.7100635579167792},{"column":"amount","similarity":0.6854638850683717}],"inventory_transactions":[{"column":"transaction_type","similarity":0.6356058298235756},{"column":"reference_type","similarity":0.5936573308025523},{"column":"transaction_date","similarity":0.5927457550817244}],"bank_accounts":[{"column":"bank_name","similarity":0.6149721846522818},{"column":"currency_id","similarity":0.6078267071474764},{"column":"account_name","similarity":0.6020854555355626}],"depreciation_schedules":[{"column":"monthly_amount","similarity":0.590534089672661},{"column":"annual_amount","similarity":0.556973315206173}],"account_types":[{"column":"category","similarity":0.5726836627158123},{"column":"normal_balance","similarity":0.5553730449724036}],"depreciation_entries":[{"column":"entry_date","similarity":0.5724732006538439},{"column":"amount","similarity":0.5657822173033439},{"column":"period_id","similarity":0.5574773293779076}],"asset_transfers":[{"column":"reason","similarity":0.5702229734035696},{"column":"transfer_date","similarity":0.5701831755618614},{"column":"transferred_by","similarity":0.5584118665702265}],"benefit_types":[{"column":"annual_cost","similarity":0.570209215995342}],"sales_orders":[{"column":"subtotal","similarity":0.5666578377274356}],"departments":[{"column":"budget","similarity":0.562686445646288}],"vendor_invoices":[{"column":"subtotal","similarity":0.5611108207005183}],"asset_categories":[{"column":"depreciation_method","similarity":0.5610490636648584}],"project_budgets":[{"column":"category","similarity":0.5583505425484427},{"column":"notes","similarity":0.556499900200207}],"customers":[{"column":"currency_id","similarity":0.5559130206307922}],"chart_of_accounts":[{"column":"account_type_id","similarity":0.554936668356843}],"vendors":[{"column":"currency_id","similarity":0.5537994023819492}],"maintenance_types":[{"column":"frequency_months","similarity":0.553500950186699}],"projects":[{"column":"budget","similarity":0.5534871574363848}],"currencies":[{"column":"symbol","similarity":0.5533906348014246}],"stock_transfers":[{"column":"status","similarity":0.5531469664212183}],"project_expenses":[{"column":"category","similarity":0.5508824364902253}],"purchase_orders":[{"column":"subtotal","similarity":0.5494862539767775}]},"fused_scores":[{"table":"bank_transactions","fused":0.862722307043591,"table_sim":0.7144733407570569,"col_score":1.085095756473392},{"table":"bank_accounts","fused":0.7362206212200488,"table_sim":0.6330427898995664,"col_score":0.8909873682007723},{"table":"inventory_transactions","fused":0.7273477353175981,"table_sim":0.5906232287127622,"col_score":0.9324344952248518},{"table":"account_types","fused":0.6849319493739505,"table_sim":0.5746397921552414,"col_score":0.850370185202014},{"table":"depreciation_entries","fused":0.6786958643867977,"table_sim":0.5609169011076522,"col_score":0.8553643093055159},{"table":"asset_transfers","fused":0.6763681340963925,"table_sim":0.557070516037654,"col_score":0.8553145611845003},{"table":"project_budgets","fused":0.6396476072298629,"table_sim":0.563995673637428,"col_score":0.7531255076185152},{"table":"asset_categories","fused":0.5606561367809825,"table_sim":0.5603941855250653,"col_score":0.5610490636648584},{"table":"stock_transfers","fused":0.4913721163761172,"table_sim":0.5608182762969601,"col_score":0.3872028764948528},{"table":"depreciation_schedules","fused":0.347608298910299,"table_sim":0,"col_score":0.8690207472757474},{"table":"budget_lines","fused":0.3346672162486075,"table_sim":0.5577786937476792,"col_score":0},{"table":"benefit_types","fused":0.2280836863981368,"table_sim":0,"col_score":0.570209215995342},{"table":"sales_orders","fused":0.22666313509097424,"table_sim":0,"col_score":0.5666578377274356},{"table":"departments","fused":0.2250745782585152,"table_sim":0,"col_score":0.562686445646288},{"table":"vendor_invoices","fused":0.22444432828020733,"table_sim":0,"col_score":0.5611108207005183}],"fk_expansion_candidates":24,"fk_expansion_added":2,"fk_expansion_blocked_count":20,"fk_expansion_blocked":[{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"already_selected"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"already_selected"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":26,"total_retrieval_latency_ms":32,"sql_generated":"SELECT t.transaction_type, EXTRACT(MONTH FROM bt.transaction_date) AS month, SUM(bt.amount) as cash_flow \nFROM bank_transactions bt\nJOIN bank_accounts ba ON bt.bank_account_id = ba.bank_account_id\nGROUP BY t.transaction_type, EXTRACT(MONTH FROM bt.transaction_date);","tables_used_in_sql":[],"total_latency_ms":4030,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T21:25:16.358Z","query_id":"73dbf34c-022a-42e8-ab3f-ebc60228d43e","question":"Calculate project profitability comparing budget vs actual expenses","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["project_budgets","project_expenses","budgets","projects","project_resources","project_tasks","project_milestones","budget_lines","depreciation_schedules","departments","fixed_assets"],"tables_from_table_retrieval":8,"tables_from_column_only":10,"tables_from_fk_expansion":1,"table_scores":[{"table":"project_budgets","similarity":0.6969020680342091},{"table":"project_budgets","similarity":0.6957582349451407},{"table":"project_expenses","similarity":0.6915216956418679},{"table":"project_expenses","similarity":0.6901643358621746},{"table":"budgets","similarity":0.612258488134445},{"table":"budgets","similarity":0.6054710146643664},{"table":"project_resources","similarity":0.5884392614999969},{"table":"project_resources","similarity":0.5805503579785858},{"table":"budget_lines","similarity":0.5713392587016516},{"table":"budget_lines","similarity":0.5686398725889051},{"table":"project_milestones","similarity":0.5640452185585958},{"table":"projects","similarity":0.5572433876284872},{"table":"projects","similarity":0.5566750316098611},{"table":"project_tasks","similarity":0.5553332790810217},{"table":"project_milestones","similarity":0.5498878000965697}],"column_hits_per_table":{"project_budgets":6,"project_expenses":10,"projects":4,"budgets":8,"departments":1,"budget_lines":3,"project_resources":3,"project_tasks":3,"project_milestones":2,"product_suppliers":1,"fixed_assets":1,"products":1,"requisition_lines":1,"cost_centers":1,"asset_maintenance":1,"depreciation_schedules":2,"benefit_types":1,"maintenance_types":1},"top_columns_per_table":{"project_budgets":[{"column":"actual_amount","similarity":0.7262554064624759},{"column":"planned_amount","similarity":0.7004924793564835},{"column":"category","similarity":0.6694662055461488}],"project_expenses":[{"column":"amount","similarity":0.7114601809657055},{"column":"is_billable","similarity":0.6966630240889287},{"column":"status","similarity":0.6836007020930082}],"projects":[{"column":"budget","similarity":0.6970008685557271},{"column":"status","similarity":0.5629230171908491},{"column":"project_number","similarity":0.5622062989180432}],"budgets":[{"column":"total_amount","similarity":0.6493408476253937},{"column":"status","similarity":0.6263032542399831},{"column":"name","similarity":0.5916349551000758}],"departments":[{"column":"budget","similarity":0.6220086035822576}],"budget_lines":[{"column":"amount","similarity":0.6088101737210796},{"column":"budget_id","similarity":0.5755343306843482},{"column":"period_id","similarity":0.5433751751705854}],"project_resources":[{"column":"hourly_rate","similarity":0.6029252229063784},{"column":"allocation_percent","similarity":0.5808610647776508},{"column":"project_id","similarity":0.5585123041056318}],"project_tasks":[{"column":"actual_hours","similarity":0.5942018563156196},{"column":"estimated_hours","similarity":0.5835819683987098},{"column":"status","similarity":0.5534727998732568}],"project_milestones":[{"column":"is_billable","similarity":0.5918713032194266},{"column":"amount","similarity":0.5907992216686975}],"product_suppliers":[{"column":"unit_cost","similarity":0.5623878668953419}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5566543017155177}],"products":[{"column":"unit_cost","similarity":0.553864201344991}],"requisition_lines":[{"column":"estimated_unit_cost","similarity":0.5527788351319599}],"cost_centers":[{"column":"is_active","similarity":0.5513344669503466}],"asset_maintenance":[{"column":"cost","similarity":0.5501460559859814}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5496518172593629},{"column":"monthly_amount","similarity":0.5452582264469823}],"benefit_types":[{"column":"annual_cost","similarity":0.5430813519625031}],"maintenance_types":[{"column":"estimated_cost","similarity":0.540145737002778}]},"fused_scores":[{"table":"project_budgets","fused":0.8480555994233716,"table_sim":0.6957582349451407,"col_score":1.0765016461407177},{"table":"project_expenses","fused":0.8380152787213727,"table_sim":0.6901643358621746,"col_score":1.0597916930101698},{"table":"budgets","fused":0.7376052777790789,"table_sim":0.6054710146643664,"col_score":0.9358066724511477},{"table":"projects","fused":0.7252466261718162,"table_sim":0.5566750316098611,"col_score":0.9781040180147487},{"table":"project_resources","fused":0.705672516905233,"table_sim":0.5805503579785858,"col_score":0.8933557552952038},{"table":"project_tasks","fused":0.6875971036546029,"table_sim":0.5553332790810217,"col_score":0.8859928405149745},{"table":"project_milestones","fused":0.684841045679452,"table_sim":0.5498878000965697,"col_score":0.8872709140537753},{"table":"budget_lines","fused":0.6652827993375837,"table_sim":0.5686398725889051,"col_score":0.8102471894606015},{"table":"depreciation_schedules","fused":0.3289123721931416,"table_sim":0,"col_score":0.822280930482854},{"table":"departments","fused":0.24880344143290306,"table_sim":0,"col_score":0.6220086035822576},{"table":"product_suppliers","fused":0.22495514675813677,"table_sim":0,"col_score":0.5623878668953419},{"table":"fixed_assets","fused":0.22266172068620707,"table_sim":0,"col_score":0.5566543017155177},{"table":"products","fused":0.22154568053799642,"table_sim":0,"col_score":0.553864201344991},{"table":"requisition_lines","fused":0.22111153405278397,"table_sim":0,"col_score":0.5527788351319599},{"table":"asset_maintenance","fused":0.22005842239439258,"table_sim":0,"col_score":0.5501460559859814}],"fk_expansion_candidates":24,"fk_expansion_added":1,"fk_expansion_blocked_count":22,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fixed_assets","reason":"already_selected"},{"table":"positions","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":23,"total_retrieval_latency_ms":30,"sql_generated":"","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column b.project_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":4,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":5458,"failure_type":"execution_error","failure_details":"Model did not generate SELECT statement"}
{"timestamp":"2026-01-29T21:25:21.816Z","query_id":"8cbd725e-e6ba-433e-8eb6-985543ac90f9","question":"Find resource allocation by employee across all active projects","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["project_resources","projects","project_expenses","employees","asset_transfers","employee_benefits","asset_maintenance","employee_salaries","task_assignments","project_tasks","timesheets","purchase_requisitions"],"tables_from_table_retrieval":10,"tables_from_column_only":12,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_resources","similarity":0.7731177943741443},{"table":"project_resources","similarity":0.7614596035707293},{"table":"task_assignments","similarity":0.6903320131383612},{"table":"project_expenses","similarity":0.6860669651962393},{"table":"task_assignments","similarity":0.6782316484776133},{"table":"projects","similarity":0.6699593096880756},{"table":"projects","similarity":0.6633532658939397},{"table":"project_expenses","similarity":0.6627460444190597},{"table":"employee_salaries","similarity":0.6405071946271549},{"table":"employees","similarity":0.6339025803715616},{"table":"employee_salaries","similarity":0.6310176470805876},{"table":"asset_transfers","similarity":0.6295509823374746},{"table":"employee_benefits","similarity":0.6252896926971302},{"table":"asset_maintenance","similarity":0.6144814119310266},{"table":"project_budgets","similarity":0.6127056548770882}],"column_hits_per_table":{"project_resources":7,"projects":5,"project_expenses":3,"task_assignments":1,"asset_maintenance":1,"fixed_assets":1,"asset_transfers":3,"project_tasks":4,"budgets":1,"leave_requests":2,"sales_territories":1,"employees":8,"inventory_adjustments":2,"employee_salaries":1,"purchase_requisitions":2,"employee_benefits":2,"timesheets":2,"departments":1,"performance_reviews":1,"inventory_transactions":1,"sales_regions":1},"top_columns_per_table":{"project_resources":[{"column":"allocation_percent","similarity":0.728757432780467},{"column":"employee_id","similarity":0.7255842747784741},{"column":"role","similarity":0.6783516003676235}],"projects":[{"column":"project_manager_id","similarity":0.6839282490004714},{"column":"priority","similarity":0.6427573172941073},{"column":"project_number","similarity":0.6341632426692734}],"project_expenses":[{"column":"approved_by","similarity":0.6823442671200762},{"column":"employee_id","similarity":0.67150172783302},{"column":"status","similarity":0.6242036195337299}],"task_assignments":[{"column":"employee_id","similarity":0.6605806631335326}],"asset_maintenance":[{"column":"performed_by","similarity":0.657596774025439}],"fixed_assets":[{"column":"assigned_to","similarity":0.6547948182113684}],"asset_transfers":[{"column":"transferred_by","similarity":0.6477089129448399},{"column":"to_employee_id","similarity":0.6397881646168211},{"column":"from_employee_id","similarity":0.632962477097971}],"project_tasks":[{"column":"actual_hours","similarity":0.6402444434475},{"column":"estimated_hours","similarity":0.6283389400715463},{"column":"priority","similarity":0.6271077493801277}],"budgets":[{"column":"approved_by","similarity":0.6395498605286063}],"leave_requests":[{"column":"approved_by","similarity":0.6361902211226609},{"column":"employee_id","similarity":0.6137651256012868}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6322095184817824}],"employees":[{"column":"employee_number","similarity":0.6295903417489341},{"column":"manager_id","similarity":0.6247850569740808},{"column":"position_id","similarity":0.6238476921771267}],"inventory_adjustments":[{"column":"approved_by","similarity":0.6261133068410986},{"column":"adjusted_by","similarity":0.6181901122068721}],"employee_salaries":[{"column":"approved_by","similarity":0.6259053995932096}],"purchase_requisitions":[{"column":"approved_by","similarity":0.6204631562858176},{"column":"requested_by","similarity":0.6143387196019348}],"employee_benefits":[{"column":"employee_id","similarity":0.6197903020961568},{"column":"coverage_level","similarity":0.6109362115850033}],"timesheets":[{"column":"approved_by","similarity":0.6175242206652112},{"column":"employee_id","similarity":0.6147088479677592}],"departments":[{"column":"manager_id","similarity":0.616788142923364}],"performance_reviews":[{"column":"employee_id","similarity":0.6128993747418323}],"inventory_transactions":[{"column":"created_by","similarity":0.6125536347226702}],"sales_regions":[{"column":"manager_id","similarity":0.6111362570848077}]},"fused_scores":[{"table":"project_resources","fused":0.884049055328149,"table_sim":0.7614596035707293,"col_score":1.0679332329642788},{"table":"projects","fused":0.7819475349878615,"table_sim":0.6633532658939397,"col_score":0.959838938628744},{"table":"project_expenses","fused":0.7645955753960891,"table_sim":0.6627460444190597,"col_score":0.9173698718616332},{"table":"employees","fused":0.7560292383950562,"table_sim":0.6339025803715616,"col_score":0.9392192254302982},{"table":"asset_transfers","fused":0.7263844976267757,"table_sim":0.6295509823374746,"col_score":0.8716347705607272},{"table":"employee_benefits","fused":0.7063189425457415,"table_sim":0.6252896926971302,"col_score":0.8278628173186582},{"table":"asset_maintenance","fused":0.6317275567687916,"table_sim":0.6144814119310266,"col_score":0.657596774025439},{"table":"employee_salaries","fused":0.6289727480856364,"table_sim":0.6310176470805876,"col_score":0.6259053995932096},{"table":"task_assignments","fused":0.5919015747639571,"table_sim":0.6782316484776133,"col_score":0.46240646419347275},{"table":"project_tasks","fused":0.3817655653933093,"table_sim":0,"col_score":0.9544139134832732},{"table":"inventory_adjustments","fused":0.3740833451778139,"table_sim":0,"col_score":0.9352083629445347},{"table":"purchase_requisitions","fused":0.371053006434714,"table_sim":0,"col_score":0.927632516086785},{"table":"project_budgets","fused":0.3676233929262529,"table_sim":0.6127056548770882,"col_score":0},{"table":"leave_requests","fused":0.3404032060332445,"table_sim":0,"col_score":0.8510080150831112},{"table":"timesheets","fused":0.33306892698157076,"table_sim":0,"col_score":0.8326723174539269}],"fk_expansion_candidates":72,"fk_expansion_added":2,"fk_expansion_blocked_count":58,"fk_expansion_blocked":[{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"project_budgets","reason":"max_tables"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"max_tables"},{"table":"sales_orders","reason":"no_evidence"},{"table":"budgets","reason":"max_tables"},{"table":"sales_regions","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"max_tables"},{"table":"sales_territories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"project_budgets","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"timesheets","reason":"already_selected"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"project_milestones","reason":"no_evidence"},{"table":"leave_requests","reason":"max_tables"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"project_milestones","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"already_selected"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"leave_requests","reason":"max_tables"},{"table":"positions","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"max_tables"},{"table":"fixed_assets","reason":"max_tables"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":41,"total_retrieval_latency_ms":47,"sql_generated":"SELECT pr.employee_id AS EmployeeID, SUM(pr.allocation_percent) AS TotalAllocationPercent FROM project_resources pr JOIN employees e ON pr.employee_id = e.employee_id WHERE EXISTS (SELECT 1 FROM projects p WHERE p.project_id = pr.project_id AND p.status = 'Active') GROUP BY pr.employee_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":0,"total_latency_ms":1397}
{"timestamp":"2026-01-29T21:25:23.213Z","query_id":"4104f5b6-a356-40d2-b285-65b5fa6c0ea7","question":"List all fixed assets with their assigned employees and current locations","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["fixed_assets","asset_locations","asset_maintenance","asset_transfers","employees","sales_territories","employee_salaries","sales_regions","project_expenses","depreciation_schedules"],"tables_from_table_retrieval":8,"tables_from_column_only":5,"tables_from_fk_expansion":0,"table_scores":[{"table":"fixed_assets","similarity":0.7199454700518836},{"table":"fixed_assets","similarity":0.7148515452309757},{"table":"asset_locations","similarity":0.7140253439243075},{"table":"asset_locations","similarity":0.6993840670281728},{"table":"asset_transfers","similarity":0.6681876163750934},{"table":"asset_maintenance","similarity":0.6662441365446851},{"table":"asset_transfers","similarity":0.6646799369428842},{"table":"asset_maintenance","similarity":0.6520664008414063},{"table":"sales_territories","similarity":0.6138568966711586},{"table":"employees","similarity":0.6041748893811374},{"table":"sales_territories","similarity":0.6032467851960226},{"table":"sales_regions","similarity":0.5905113043845756},{"table":"employee_salaries","similarity":0.5900972330189025},{"table":"sales_regions","similarity":0.5890944787559478},{"table":"employees","similarity":0.5866842455067859}],"column_hits_per_table":{"fixed_assets":17,"asset_locations":6,"asset_maintenance":8,"asset_transfers":7,"employees":6,"sales_territories":1,"depreciation_schedules":1,"project_expenses":1,"stock_transfers":1,"adjustment_lines":1,"employee_training":1},"top_columns_per_table":{"fixed_assets":[{"column":"assigned_to","similarity":0.7309660903600991},{"column":"status","similarity":0.7290998988380747},{"column":"location_id","similarity":0.727307286621006}],"asset_locations":[{"column":"building","similarity":0.7055757855424262},{"column":"floor","similarity":0.6952344209513786},{"column":"room","similarity":0.6866855307465951}],"asset_maintenance":[{"column":"status","similarity":0.6627607281665651},{"column":"performed_by","similarity":0.655208869514037},{"column":"asset_id","similarity":0.650844110389269}],"asset_transfers":[{"column":"to_location_id","similarity":0.6598091379381406},{"column":"asset_id","similarity":0.648915686961598},{"column":"from_location_id","similarity":0.6453059808359782}],"employees":[{"column":"email","similarity":0.6222128415310486},{"column":"is_active","similarity":0.6099795955898375},{"column":"created_at","similarity":0.6087545437137886}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6151626798031035}],"depreciation_schedules":[{"column":"asset_id","similarity":0.609072695972689}],"project_expenses":[{"column":"approved_by","similarity":0.5891477196810594}],"stock_transfers":[{"column":"created_by","similarity":0.5885257652007055}],"adjustment_lines":[{"column":"location_id","similarity":0.5880278471168174}],"employee_training":[{"column":"status","similarity":0.5864804082369928}]},"fused_scores":[{"table":"fixed_assets","fused":0.8604937201613337,"table_sim":0.7148515452309757,"col_score":1.0789569825568708},{"table":"asset_locations","fused":0.8409076386241499,"table_sim":0.6993840670281728,"col_score":1.0531929960181154},{"table":"asset_maintenance","fused":0.7790907068878921,"table_sim":0.6520664008414063,"col_score":0.9696271659576206},{"table":"asset_transfers","fused":0.7712951274831453,"table_sim":0.6646799369428842,"col_score":0.931217913293537},{"table":"employees","fused":0.720164177335557,"table_sim":0.5866842455067859,"col_score":0.9203840750787138},{"table":"sales_territories","fused":0.5341936214624825,"table_sim":0.6032467851960226,"col_score":0.4306138758621724},{"table":"employee_salaries","fused":0.3540583398113415,"table_sim":0.5900972330189025,"col_score":0},{"table":"sales_regions","fused":0.35345668725356866,"table_sim":0.5890944787559478,"col_score":0},{"table":"project_expenses","fused":0.23565908787242376,"table_sim":0,"col_score":0.5891477196810594},{"table":"depreciation_schedules","fused":0.17054035487235292,"table_sim":0,"col_score":0.42635088718088227},{"table":"stock_transfers","fused":0.16478721425619755,"table_sim":0,"col_score":0.41196803564049383},{"table":"adjustment_lines","fused":0.1646477971927089,"table_sim":0,"col_score":0.4116194929817722},{"table":"employee_training","fused":0.16421451430635797,"table_sim":0,"col_score":0.4105362857658949}],"fk_expansion_candidates":64,"fk_expansion_added":0,"fk_expansion_blocked_count":64,"fk_expansion_blocked":[{"table":"departments","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":43,"total_retrieval_latency_ms":50,"sql_generated":"SELECT fa.asset_id AS asset_id, fa.name AS asset_name, fa.location_id, al.building, al.floor, al.room, emp.employee_number, emp.first_name, emp.last_name FROM fixed_assets fa JOIN asset_locations al ON fa.location_id = al.location_id JOIN employees emp ON fa.assigned_to = emp.employee_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":0,"total_latency_ms":1552}
{"timestamp":"2026-01-29T21:25:24.765Z","query_id":"8382bd39-479f-4883-9efa-13dd1bac38bd","question":"Create a comprehensive employee cost report including salary and benefits by department","attempt_count":2,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_salaries","employee_benefits","employees","project_expenses","budgets","departments","benefit_types","purchase_requisitions","vendor_invoices","project_budgets","employee_training","project_resources"],"tables_from_table_retrieval":8,"tables_from_column_only":17,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_salaries","similarity":0.722375473943176},{"table":"employee_benefits","similarity":0.705595592348026},{"table":"employee_benefits","similarity":0.7033203083522601},{"table":"employee_salaries","similarity":0.7004330807404299},{"table":"project_expenses","similarity":0.6709016284087207},{"table":"project_expenses","similarity":0.6668157727165617},{"table":"employees","similarity":0.6665648484199336},{"table":"employees","similarity":0.6573833023433696},{"table":"budgets","similarity":0.647440451476846},{"table":"departments","similarity":0.6467717005028588},{"table":"budgets","similarity":0.6459628498185659},{"table":"departments","similarity":0.6449287482951562},{"table":"purchase_requisitions","similarity":0.6365516948785768},{"table":"benefit_types","similarity":0.6331315881142325},{"table":"purchase_requisitions","similarity":0.6331051084254513}],"column_hits_per_table":{"employees":4,"employee_salaries":7,"employee_benefits":6,"departments":2,"benefit_types":1,"project_expenses":4,"project_resources":2,"cost_centers":1,"budgets":3,"goods_receipts":1,"sales_territories":1,"asset_maintenance":1,"performance_reviews":1,"employment_history":1,"sales_regions":1,"positions":1,"vendor_invoices":4,"product_suppliers":1,"project_budgets":2,"requisition_lines":1,"employee_certifications":1,"employee_training":2,"vendor_invoice_lines":1,"products":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.7361416760164768},{"column":"department_id","similarity":0.643475236115711},{"column":"employee_number","similarity":0.6268915453560163}],"employee_salaries":[{"column":"amount","similarity":0.7283991668176124},{"column":"effective_date","similarity":0.6740447561967371},{"column":"employee_id","similarity":0.6634321666385734}],"employee_benefits":[{"column":"coverage_level","similarity":0.6930697298081193},{"column":"employee_id","similarity":0.6823515721494041},{"column":"benefit_id","similarity":0.6763225886423792}],"departments":[{"column":"budget","similarity":0.6828503188805319},{"column":"manager_id","similarity":0.6345520008976717}],"benefit_types":[{"column":"annual_cost","similarity":0.6699186739305134}],"project_expenses":[{"column":"employee_id","similarity":0.6672105776168827},{"column":"approved_by","similarity":0.657595738784029},{"column":"amount","similarity":0.64664507348676}],"project_resources":[{"column":"hourly_rate","similarity":0.6397016874167624},{"column":"employee_id","similarity":0.6182816053207806}],"cost_centers":[{"column":"department_id","similarity":0.6391395639861553}],"budgets":[{"column":"approved_by","similarity":0.6383618398519554},{"column":"total_amount","similarity":0.6226660734244392},{"column":"department_id","similarity":0.6205743891433299}],"goods_receipts":[{"column":"received_by","similarity":0.6322934653710801}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6291100859650857}],"asset_maintenance":[{"column":"cost","similarity":0.6284459886126739}],"performance_reviews":[{"column":"employee_id","similarity":0.62586180623406}],"employment_history":[{"column":"employee_id","similarity":0.6257662452515415}],"sales_regions":[{"column":"manager_id","similarity":0.6249326800266781}],"positions":[{"column":"min_salary","similarity":0.6243487687260623}],"vendor_invoices":[{"column":"subtotal","similarity":0.6229204399409228},{"column":"amount_paid","similarity":0.6225701829476908},{"column":"total","similarity":0.6212865306083739}],"product_suppliers":[{"column":"unit_cost","similarity":0.6215630296727815}],"project_budgets":[{"column":"actual_amount","similarity":0.6210869451422038},{"column":"planned_amount","similarity":0.6161072096529497}],"requisition_lines":[{"column":"estimated_unit_cost","similarity":0.6201015589432831}],"employee_certifications":[{"column":"employee_id","similarity":0.6199040218225059}],"employee_training":[{"column":"score","similarity":0.6191389283848391},{"column":"status","similarity":0.6156063942576597}],"vendor_invoice_lines":[{"column":"unit_cost","similarity":0.6184622029186051}],"products":[{"column":"unit_cost","similarity":0.6160894325566642}]},"fused_scores":[{"table":"employee_salaries","fused":0.8464284664106503,"table_sim":0.7004330807404299,"col_score":1.065421544915981},{"table":"employee_benefits","fused":0.8314440780203399,"table_sim":0.7033203083522601,"col_score":1.0236297325224597},{"table":"employees","fused":0.8142649608838157,"table_sim":0.6573833023433696,"col_score":1.049587448694485},{"table":"project_expenses","fused":0.7924567738409006,"table_sim":0.6668157727165617,"col_score":0.9809182755274091},{"table":"budgets","fused":0.7674556605168096,"table_sim":0.6459628498185659,"col_score":0.9496948765641751},{"table":"departments","fused":0.7489346566549806,"table_sim":0.6449287482951562,"col_score":0.904943519194717},{"table":"benefit_types","fused":0.6478464224407449,"table_sim":0.6331315881142325,"col_score":0.6699186739305134},{"table":"purchase_requisitions","fused":0.3798630650552708,"table_sim":0.6331051084254513,"col_score":0},{"table":"vendor_invoices","fused":0.37342548209804394,"table_sim":0,"col_score":0.9335637052451098},{"table":"project_budgets","fused":0.3716562199874715,"table_sim":0,"col_score":0.9291405499686787},{"table":"project_resources","fused":0.3424400997116142,"table_sim":0,"col_score":0.8561002492790355},{"table":"employee_training","fused":0.333840466550008,"table_sim":0,"col_score":0.8346011663750199},{"table":"goods_receipts","fused":0.25291738614843207,"table_sim":0,"col_score":0.6322934653710801},{"table":"asset_maintenance","fused":0.25137839544506957,"table_sim":0,"col_score":0.6284459886126739},{"table":"positions","fused":0.24973950749042492,"table_sim":0,"col_score":0.6243487687260623}],"fk_expansion_candidates":70,"fk_expansion_added":2,"fk_expansion_blocked_count":56,"fk_expansion_blocked":[{"table":"employment_history","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"sales_regions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"project_resources","reason":"already_selected"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_training","reason":"already_selected"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"max_tables"},{"table":"sales_territories","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"requisition_lines","reason":"max_tables"},{"table":"cost_centers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"requisition_lines","reason":"max_tables"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":43,"total_retrieval_latency_ms":50,"sql_generated":"","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column es.department_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":3,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":2917,"failure_type":"execution_error","failure_details":"Model did not generate SELECT statement"}
{"timestamp":"2026-01-29T21:27:32.231Z","query_id":"7f2a68e5-1876-4335-8475-802253fa7ddb","question":"List all employees in the Sales department","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employees","departments","employee_salaries","positions","sales_regions","business_units","inventory_adjustments","budgets","project_expenses","asset_transfers","purchase_requisitions","purchase_orders"],"tables_from_table_retrieval":6,"tables_from_column_only":22,"tables_from_fk_expansion":2,"table_scores":[{"table":"departments","similarity":0.7018819264422769},{"table":"departments","similarity":0.7018809856996423},{"table":"departments","similarity":0.7018809856996423},{"table":"employees","similarity":0.6969056798657691},{"table":"employees","similarity":0.6969056798657691},{"table":"employees","similarity":0.6963141569337209},{"table":"positions","similarity":0.6626028150240685},{"table":"positions","similarity":0.6626028150240685},{"table":"positions","similarity":0.6581594168559208},{"table":"employee_salaries","similarity":0.639257259916862},{"table":"employee_salaries","similarity":0.6331504110227327},{"table":"employee_salaries","similarity":0.6331504110227327},{"table":"sales_regions","similarity":0.6312030956746659},{"table":"business_units","similarity":0.6275257997321859},{"table":"business_units","similarity":0.6275257997321859}],"column_hits_per_table":{"employees":12,"departments":6,"positions":1,"goods_receipts":1,"employee_certifications":1,"sales_territories":1,"asset_maintenance":1,"business_units":1,"sales_orders":1,"sales_regions":1,"budgets":2,"employee_salaries":2,"employee_benefits":1,"emergency_contacts":1,"sales_opportunities":1,"purchase_orders":1,"employment_history":1,"warehouses":1,"project_expenses":2,"task_assignments":1,"timesheets":1,"purchase_requisitions":2,"asset_transfers":2,"employee_training":1,"performance_reviews":1,"project_resources":1,"cost_centers":1,"inventory_adjustments":2},"top_columns_per_table":{"employees":[{"column":"department_id","similarity":0.735001357845775},{"column":"is_active","similarity":0.6824266007737122},{"column":"phone","similarity":0.6820773795858707}],"departments":[{"column":"manager_id","similarity":0.7128207565780478},{"column":"department_id","similarity":0.6738854611767785},{"column":"name","similarity":0.6712424359101222}],"positions":[{"column":"department_id","similarity":0.6857971226858616}],"goods_receipts":[{"column":"received_by","similarity":0.6663294574985136}],"employee_certifications":[{"column":"employee_id","similarity":0.6640250010412727}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6613024875559992}],"asset_maintenance":[{"column":"performed_by","similarity":0.6598502094385292}],"business_units":[{"column":"manager_id","similarity":0.6585890351995057}],"sales_orders":[{"column":"sales_rep_id","similarity":0.656355730755163}],"sales_regions":[{"column":"manager_id","similarity":0.651620763380058}],"budgets":[{"column":"department_id","similarity":0.6491888190918373},{"column":"approved_by","similarity":0.6408129025308686}],"employee_salaries":[{"column":"employee_id","similarity":0.6446873957227627},{"column":"approved_by","similarity":0.6412425865510403}],"employee_benefits":[{"column":"employee_id","similarity":0.6443003044498334}],"emergency_contacts":[{"column":"employee_id","similarity":0.6440387734827813}],"sales_opportunities":[{"column":"owner_id","similarity":0.6430794490143532}],"purchase_orders":[{"column":"approved_by","similarity":0.6403338556046323}],"employment_history":[{"column":"employee_id","similarity":0.6402113357955537}],"warehouses":[{"column":"manager_id","similarity":0.640071893991035}],"project_expenses":[{"column":"employee_id","similarity":0.6396257939989354},{"column":"approved_by","similarity":0.6362133375007298}],"task_assignments":[{"column":"employee_id","similarity":0.6378956895245772}],"timesheets":[{"column":"employee_id","similarity":0.6371144466739936}],"purchase_requisitions":[{"column":"department_id","similarity":0.6363011046304633},{"column":"requested_by","similarity":0.6278867865824495}],"asset_transfers":[{"column":"transferred_by","similarity":0.6359325869686036},{"column":"to_employee_id","similarity":0.6349553746224262}],"employee_training":[{"column":"employee_id","similarity":0.6355833505843332}],"performance_reviews":[{"column":"employee_id","similarity":0.63456613058686}],"project_resources":[{"column":"employee_id","similarity":0.6337024295197778}],"cost_centers":[{"column":"department_id","similarity":0.6303629689770469}],"inventory_adjustments":[{"column":"approved_by","similarity":0.629334756944109},{"column":"adjusted_by","similarity":0.6285561154578985}]},"fused_scores":[{"table":"employees","fused":0.8262904239927295,"table_sim":0.6963141569337209,"col_score":1.0212548245812423},{"table":"departments","fused":0.7878762122676308,"table_sim":0.7018809856996423,"col_score":0.9168690521196134},{"table":"employee_salaries","fused":0.7266435166352425,"table_sim":0.6331504110227327,"col_score":0.8668831750540071},{"table":"positions","fused":0.5869188444655937,"table_sim":0.6581594168559208,"col_score":0.48005798588010307},{"table":"sales_regions","fused":0.5611756711512157,"table_sim":0.6312030956746659,"col_score":0.45613453436604057},{"table":"business_units","fused":0.5609204096951732,"table_sim":0.6275257997321859,"col_score":0.46101232463965397},{"table":"inventory_adjustments","fused":0.3774451258692233,"table_sim":0,"col_score":0.9436128146730582},{"table":"budgets","fused":0.3472115956852047,"table_sim":0,"col_score":0.8680289892130117},{"table":"project_expenses","fused":0.3440329461601429,"table_sim":0,"col_score":0.8600823654003572},{"table":"asset_transfers","fused":0.34326678723458115,"table_sim":0,"col_score":0.8581669680864528},{"table":"purchase_requisitions","fused":0.3402368692812447,"table_sim":0,"col_score":0.8505921732031116},{"table":"goods_receipts","fused":0.26653178299940544,"table_sim":0,"col_score":0.6663294574985136},{"table":"asset_maintenance","fused":0.2639400837754117,"table_sim":0,"col_score":0.6598502094385292},{"table":"purchase_orders","fused":0.2561335422418529,"table_sim":0,"col_score":0.6403338556046323},{"table":"employee_certifications","fused":0.18592700029155637,"table_sim":0,"col_score":0.4648175007288909}],"fk_expansion_candidates":93,"fk_expansion_added":2,"fk_expansion_blocked_count":81,"fk_expansion_blocked":[{"table":"sales_orders","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"purchase_orders","reason":"already_selected"},{"table":"warehouses","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"goods_receipts","reason":"max_tables"},{"table":"sales_territories","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"already_selected"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_orders","reason":"already_selected"},{"table":"warehouses","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"already_selected"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":90,"total_retrieval_latency_ms":113,"sql_generated":"SELECT e.employee_id, e.first_name || ' ' || e.last_name AS employee_full_name FROM employees e JOIN departments d ON e.department_id = d.department_id WHERE d.name = 'Sales';","tables_used_in_sql":[],"explain_result":"success","rows_returned":63,"total_latency_ms":1276}
{"timestamp":"2026-01-29T21:27:33.508Z","query_id":"f13c50f7-f600-4aa3-a044-1d8e8e15c227","question":"How many employees were hired in 2024?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employees","employee_salaries","employment_history","employee_certifications","timesheets","purchase_requisitions","sales_regions","employee_training","employee_benefits","budgets","purchase_orders"],"tables_from_table_retrieval":7,"tables_from_column_only":11,"tables_from_fk_expansion":1,"table_scores":[{"table":"employees","similarity":0.6144292223525214},{"table":"employees","similarity":0.6051164949883834},{"table":"employees","similarity":0.6051164949883834},{"table":"employment_history","similarity":0.5990869260811272},{"table":"employee_salaries","similarity":0.5957232611905978},{"table":"employee_salaries","similarity":0.5904865404348112},{"table":"employee_salaries","similarity":0.5904865404348112},{"table":"employee_certifications","similarity":0.5847149077570227},{"table":"employment_history","similarity":0.5797780797563227},{"table":"employment_history","similarity":0.5797780797563227},{"table":"timesheets","similarity":0.575594643141534},{"table":"employee_certifications","similarity":0.5707873299156627},{"table":"employee_certifications","similarity":0.5707873299156627},{"table":"sales_regions","similarity":0.5687908420029388},{"table":"purchase_requisitions","similarity":0.5664402915390976}],"column_hits_per_table":{"employees":15,"employee_salaries":5,"employee_certifications":4,"employment_history":6,"employee_training":5,"employee_benefits":2,"sales_regions":1,"timesheets":2,"sales_territories":1,"stock_transfers":1,"purchase_requisitions":1,"departments":1,"budgets":1,"business_units":1,"purchase_orders":1,"warehouses":1,"sales_quotes":1,"task_assignments":1},"top_columns_per_table":{"employees":[{"column":"hire_date","similarity":0.6980546950586765},{"column":"birth_date","similarity":0.6452273174827853},{"column":"employee_number","similarity":0.6269481438884994}],"employee_salaries":[{"column":"effective_date","similarity":0.6283609386062775},{"column":"end_date","similarity":0.6083160129025792},{"column":"approved_by","similarity":0.5688287621893034}],"employee_certifications":[{"column":"obtained_date","similarity":0.6112747812345073},{"column":"expiry_date","similarity":0.5987411982779576},{"column":"certificate_number","similarity":0.5648835141060903}],"employment_history":[{"column":"start_date","similarity":0.6077686915830489},{"column":"end_date","similarity":0.594029514188949},{"column":"position","similarity":0.5797629516147992}],"employee_training":[{"column":"completion_date","similarity":0.5993457235478621},{"column":"scheduled_date","similarity":0.5986570544817782},{"column":"status","similarity":0.5703874888669422}],"employee_benefits":[{"column":"start_date","similarity":0.5984117020896914},{"column":"end_date","similarity":0.5728619821736786}],"sales_regions":[{"column":"manager_id","similarity":0.566199362048764}],"timesheets":[{"column":"approved_by","similarity":0.5644583860713249},{"column":"employee_id","similarity":0.5477605761420901}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5605386386424432}],"stock_transfers":[{"column":"created_by","similarity":0.5581236941064073}],"purchase_requisitions":[{"column":"approved_by","similarity":0.5579497247157277}],"departments":[{"column":"manager_id","similarity":0.5578824438248059}],"budgets":[{"column":"approved_by","similarity":0.5567179667007113}],"business_units":[{"column":"manager_id","similarity":0.5534149159450399}],"purchase_orders":[{"column":"approved_by","similarity":0.5491015848221577}],"warehouses":[{"column":"manager_id","similarity":0.5466175241906261}],"sales_quotes":[{"column":"created_by","similarity":0.5464636248275542}],"task_assignments":[{"column":"employee_id","similarity":0.5462303463892537}]},"fused_scores":[{"table":"employees","fused":0.7713372385130577,"table_sim":0.6051164949883834,"col_score":1.0206683538000692},{"table":"employee_salaries","fused":0.7272995022839135,"table_sim":0.5904865404348112,"col_score":0.932518945057567},{"table":"employment_history","fused":0.7097802273248031,"table_sim":0.5797780797563227,"col_score":0.9047834486775235},{"table":"employee_certifications","fused":0.706730550098792,"table_sim":0.5707873299156627,"col_score":0.9106453803734861},{"table":"timesheets","fused":0.647826620973343,"table_sim":0.575594643141534,"col_score":0.7561745877210564},{"table":"purchase_requisitions","fused":0.5630440648097497,"table_sim":0.5664402915390976,"col_score":0.5579497247157277},{"table":"sales_regions","fused":0.4998103265754172,"table_sim":0.5687908420029388,"col_score":0.39633955343413474},{"table":"employee_training","fused":0.3594697003155005,"table_sim":0,"col_score":0.8986742507887512},{"table":"employee_benefits","fused":0.3539370772706123,"table_sim":0,"col_score":0.8848426931765307},{"table":"budgets","fused":0.22268718668028453,"table_sim":0,"col_score":0.5567179667007113},{"table":"purchase_orders","fused":0.21964063392886307,"table_sim":0,"col_score":0.5491015848221577},{"table":"sales_territories","fused":0.15695081881988412,"table_sim":0,"col_score":0.39237704704971027},{"table":"stock_transfers","fused":0.15627463434979405,"table_sim":0,"col_score":0.39068658587448507},{"table":"departments","fused":0.15620708427094565,"table_sim":0,"col_score":0.3905177106773641},{"table":"business_units","fused":0.15495617646461116,"table_sim":0,"col_score":0.3873904411615279}],"fk_expansion_candidates":99,"fk_expansion_added":1,"fk_expansion_blocked_count":96,"fk_expansion_blocked":[{"table":"departments","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"purchase_orders","reason":"already_selected"},{"table":"warehouses","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"purchase_orders","reason":"already_selected"},{"table":"warehouses","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":22,"total_retrieval_latency_ms":29,"sql_generated":"SELECT COUNT(*) FROM employees WHERE EXTRACT(YEAR FROM hire_date) = 2024;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42883","error_message":"function year(date) does not exist","total_latency_ms":1224,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T21:27:34.733Z","query_id":"415e00e2-5b63-4ed4-861f-569638c9ad0a","question":"What is the average salary by department?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["positions","employee_salaries","employees","departments","budgets","cost_centers","requisition_lines","sales_orders","goods_receipts","vendor_invoices","employee_training","employee_certifications"],"tables_from_table_retrieval":6,"tables_from_column_only":18,"tables_from_fk_expansion":2,"table_scores":[{"table":"positions","similarity":0.6472399264470684},{"table":"positions","similarity":0.6452537561635636},{"table":"positions","similarity":0.6452537561635636},{"table":"employee_salaries","similarity":0.6285395131693224},{"table":"employee_salaries","similarity":0.6285395131693224},{"table":"employee_salaries","similarity":0.6163489777991259},{"table":"departments","similarity":0.6143006157633061},{"table":"departments","similarity":0.6029940665123251},{"table":"departments","similarity":0.6029940665123251},{"table":"employees","similarity":0.5843710762372889},{"table":"employees","similarity":0.5671015993256167},{"table":"employees","similarity":0.5671015993256167},{"table":"cost_centers","similarity":0.5579264629700211},{"table":"budgets","similarity":0.5571964787833181},{"table":"cost_centers","similarity":0.5368058805619271}],"column_hits_per_table":{"employees":8,"departments":6,"employee_salaries":7,"positions":4,"cost_centers":1,"budgets":2,"employee_benefits":1,"requisition_lines":2,"purchase_requisitions":1,"project_resources":1,"sales_orders":2,"employment_history":1,"project_budgets":1,"goods_receipts":2,"currencies":1,"employee_certifications":1,"vendor_invoices":2,"employee_training":1,"journal_entries":1,"product_suppliers":1,"project_expenses":1,"sales_quotes":1,"depreciation_schedules":1,"sales_territories":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.665761067669807},{"column":"department_id","similarity":0.5815151415615687},{"column":"employee_number","similarity":0.5512734022930011}],"departments":[{"column":"budget","similarity":0.6619984421106927},{"column":"name","similarity":0.6123868694663578},{"column":"parent_department_id","similarity":0.5859717891490452}],"employee_salaries":[{"column":"amount","similarity":0.6500990551890313},{"column":"effective_date","similarity":0.611770947186606},{"column":"salary_id","similarity":0.5985853421960141}],"positions":[{"column":"department_id","similarity":0.6269881859529215},{"column":"max_salary","similarity":0.6246839022090498},{"column":"min_salary","similarity":0.6230151577349895}],"cost_centers":[{"column":"department_id","similarity":0.5896621626840974}],"budgets":[{"column":"department_id","similarity":0.580591842420962},{"column":"total_amount","similarity":0.5338274885049906}],"employee_benefits":[{"column":"coverage_level","similarity":0.5654079472210596}],"requisition_lines":[{"column":"estimated_total","similarity":0.5582588991716904},{"column":"estimated_unit_cost","similarity":0.5441338218091372}],"purchase_requisitions":[{"column":"department_id","similarity":0.5572144875437345}],"project_resources":[{"column":"hourly_rate","similarity":0.5514441085734471}],"sales_orders":[{"column":"total","similarity":0.5427163382142084},{"column":"subtotal","similarity":0.5223697723709152}],"employment_history":[{"column":"position","similarity":0.5420691639730986}],"project_budgets":[{"column":"actual_amount","similarity":0.5393341879647957}],"goods_receipts":[{"column":"received_by","similarity":0.5349267147302068},{"column":"receipt_number","similarity":0.5279798899236793}],"currencies":[{"column":"exchange_rate","similarity":0.5332608603311223}],"employee_certifications":[{"column":"certificate_number","similarity":0.5305395669595222}],"vendor_invoices":[{"column":"amount_paid","similarity":0.5304764397719846},{"column":"total","similarity":0.5272326757338365}],"employee_training":[{"column":"score","similarity":0.530103302594991}],"journal_entries":[{"column":"posted_by","similarity":0.5291393373857585}],"product_suppliers":[{"column":"unit_cost","similarity":0.52770578346072}],"project_expenses":[{"column":"amount","similarity":0.5237759228326622}],"sales_quotes":[{"column":"total","similarity":0.5219832277482833}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5219116192563482}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5218538792844735}]},"fused_scores":[{"table":"positions","fused":0.761628846128756,"table_sim":0.6452537561635636,"col_score":0.9361914810765446},{"table":"employee_salaries","fused":0.7522031981924093,"table_sim":0.6163489777991259,"col_score":0.9559845287823343},{"table":"employees","fused":0.7168200671218931,"table_sim":0.5671015993256167,"col_score":0.9413977688163075},{"table":"departments","fused":0.7123299784769622,"table_sim":0.6029940665123251,"col_score":0.8763338464239179},{"table":"budgets","fused":0.6291317406109218,"table_sim":0.5571964787833181,"col_score":0.7370346333523273},{"table":"cost_centers","fused":0.48718893388870355,"table_sim":0.5368058805619271,"col_score":0.41276351387886817},{"table":"requisition_lines","fused":0.3321303240305036,"table_sim":0,"col_score":0.8303258100762589},{"table":"sales_orders","fused":0.3215604897598664,"table_sim":0,"col_score":0.8039012243996659},{"table":"goods_receipts","fused":0.31956666387681865,"table_sim":0,"col_score":0.7989166596920465},{"table":"vendor_invoices","fused":0.28515977186161245,"table_sim":0,"col_score":0.7128994296540311},{"table":"employee_benefits","fused":0.22616317888842385,"table_sim":0,"col_score":0.5654079472210596},{"table":"project_resources","fused":0.22057764342937883,"table_sim":0,"col_score":0.5514441085734471},{"table":"employment_history","fused":0.21682766558923944,"table_sim":0,"col_score":0.5420691639730986},{"table":"project_budgets","fused":0.2157336751859183,"table_sim":0,"col_score":0.5393341879647957},{"table":"currencies","fused":0.21330434413244892,"table_sim":0,"col_score":0.5332608603311223}],"fk_expansion_candidates":114,"fk_expansion_added":2,"fk_expansion_blocked_count":93,"fk_expansion_blocked":[{"table":"employment_history","reason":"max_tables"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"employee_training","reason":"already_selected"},{"table":"customers","reason":"no_evidence"},{"table":"employment_history","reason":"max_tables"},{"table":"products","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"project_resources","reason":"max_tables"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"project_expenses","reason":"max_tables"},{"table":"order_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"project_resources","reason":"max_tables"},{"table":"timesheets","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"project_resources","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"max_tables"},{"table":"employee_certifications","reason":"already_selected"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"journal_entries","reason":"max_tables"},{"table":"timesheets","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"journal_entries","reason":"max_tables"},{"table":"project_expenses","reason":"max_tables"},{"table":"employee_training","reason":"already_selected"},{"table":"employee_certifications","reason":"already_selected"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"project_expenses","reason":"max_tables"},{"table":"task_assignments","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"employment_history","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":15,"total_retrieval_latency_ms":23,"sql_generated":"SELECT d.name AS department_name, AVG(es.amount) AS avg_salary FROM departments d LEFT JOIN employees e ON d.department_id = e.department_id LEFT JOIN employee_salaries es ON e.employee_id = es.employee_id GROUP BY d.name;","tables_used_in_sql":[],"explain_result":"success","rows_returned":25,"total_latency_ms":1070}
{"timestamp":"2026-01-29T21:27:35.804Z","query_id":"1fede75e-390f-4fb3-8ada-4736ae8f2b3d","question":"List all customers with credit limit over $100,000","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["customers","customer_contacts","purchase_requisitions","sales_quotes","certifications","budget_lines","sales_regions","bank_transactions","bank_accounts","purchase_orders","budgets","quote_lines"],"tables_from_table_retrieval":7,"tables_from_column_only":22,"tables_from_fk_expansion":2,"table_scores":[{"table":"customers","similarity":0.6490529391143375},{"table":"customers","similarity":0.6490529391143375},{"table":"customers","similarity":0.6422232823454113},{"table":"customer_contacts","similarity":0.5702946339617082},{"table":"sales_regions","similarity":0.5667997703273866},{"table":"customer_contacts","similarity":0.5609682931182661},{"table":"customer_contacts","similarity":0.5609682931182661},{"table":"certifications","similarity":0.5571072107976042},{"table":"sales_quotes","similarity":0.5491541498727729},{"table":"purchase_requisitions","similarity":0.5478589409950445},{"table":"purchase_requisitions","similarity":0.5459857460749011},{"table":"purchase_requisitions","similarity":0.5459857460749011},{"table":"budget_lines","similarity":0.5454449382794198},{"table":"sales_regions","similarity":0.5450307067379918},{"table":"sales_regions","similarity":0.5450307067379918}],"column_hits_per_table":{"customers":10,"customer_contacts":7,"projects":1,"sales_opportunities":1,"reorder_rules":1,"sales_quotes":2,"quote_lines":1,"bank_transactions":2,"sales_orders":2,"vendor_invoices":1,"budget_lines":1,"bank_accounts":2,"budgets":1,"positions":1,"purchase_orders":2,"certifications":1,"order_lines":1,"vendor_invoice_lines":1,"journal_lines":1,"warehouse_locations":1,"cost_centers":1,"purchase_requisitions":2,"project_expenses":1,"project_milestones":1,"requisition_lines":1,"po_lines":1,"sales_regions":1,"project_budgets":1,"vendors":1},"top_columns_per_table":{"customers":[{"column":"credit_limit","similarity":0.8264130571427136},{"column":"payment_terms","similarity":0.6589990489867001},{"column":"customer_number","similarity":0.6394526735948951}],"customer_contacts":[{"column":"phone","similarity":0.606368805831685},{"column":"title","similarity":0.5970373914759594},{"column":"customer_id","similarity":0.5956864569852515}],"projects":[{"column":"customer_id","similarity":0.5928916239987955}],"sales_opportunities":[{"column":"customer_id","similarity":0.5902627586172409}],"reorder_rules":[{"column":"max_quantity","similarity":0.5899919735657247}],"sales_quotes":[{"column":"customer_id","similarity":0.5891584566690409},{"column":"total","similarity":0.5586703861991749}],"quote_lines":[{"column":"line_total","similarity":0.5801866487795829}],"bank_transactions":[{"column":"amount","similarity":0.578099883266191},{"column":"reference","similarity":0.5598602335402326}],"sales_orders":[{"column":"customer_id","similarity":0.5763949820310496},{"column":"total","similarity":0.5622977399772391}],"vendor_invoices":[{"column":"total","similarity":0.574486333008983}],"budget_lines":[{"column":"amount","similarity":0.5741121544432773}],"bank_accounts":[{"column":"current_balance","similarity":0.5735872293568434},{"column":"account_number","similarity":0.5649953609091014}],"budgets":[{"column":"approved_by","similarity":0.5731556505145398}],"positions":[{"column":"max_salary","similarity":0.5725523876248747}],"purchase_orders":[{"column":"total","similarity":0.5714278025144766},{"column":"approved_by","similarity":0.5659425523622221}],"certifications":[{"column":"validity_years","similarity":0.5702505536109264}],"order_lines":[{"column":"line_total","similarity":0.5698151919963369}],"vendor_invoice_lines":[{"column":"amount","similarity":0.5693578249080868}],"journal_lines":[{"column":"credit","similarity":0.5674218657230614}],"warehouse_locations":[{"column":"capacity","similarity":0.5662115513809343}],"cost_centers":[{"column":"code","similarity":0.5650327130492546}],"purchase_requisitions":[{"column":"approved_by","similarity":0.5649975444535725},{"column":"requisition_number","similarity":0.5569267046602896}],"project_expenses":[{"column":"approved_by","similarity":0.5647321953724768}],"project_milestones":[{"column":"amount","similarity":0.5630219436026808}],"requisition_lines":[{"column":"estimated_total","similarity":0.5598201507599695}],"po_lines":[{"column":"line_total","similarity":0.5594451313327365}],"sales_regions":[{"column":"manager_id","similarity":0.5580159655063975}],"project_budgets":[{"column":"actual_amount","similarity":0.5578517497187595}],"vendors":[{"column":"payment_terms","similarity":0.557438207097068}]},"fused_scores":[{"table":"customers","fused":0.8476990020616721,"table_sim":0.6422232823454113,"col_score":1.1559125816360636},{"table":"customer_contacts","fused":0.6985359764988255,"table_sim":0.5609682931182661,"col_score":0.9048875015696647},{"table":"purchase_requisitions","fused":0.6649758063584277,"table_sim":0.5459857460749011,"col_score":0.8434608967837174},{"table":"sales_quotes","fused":0.6354428283369994,"table_sim":0.5491541498727729,"col_score":0.7648758460333391},{"table":"certifications","fused":0.562364547922933,"table_sim":0.5571072107976042,"col_score":0.5702505536109264},{"table":"budget_lines","fused":0.5569118247449628,"table_sim":0.5454449382794198,"col_score":0.5741121544432773},{"table":"sales_regions","fused":0.48326289438458636,"table_sim":0.5450307067379918,"col_score":0.39061117585447824},{"table":"bank_transactions","fused":0.3432120000145229,"table_sim":0,"col_score":0.8580300000363072},{"table":"bank_accounts","fused":0.34243396392455766,"table_sim":0,"col_score":0.8560849098113941},{"table":"purchase_orders","fused":0.34175963147823507,"table_sim":0,"col_score":0.8543990786955876},{"table":"sales_orders","fused":0.3056143934752426,"table_sim":0,"col_score":0.7640359836881064},{"table":"reorder_rules","fused":0.2359967894262899,"table_sim":0,"col_score":0.5899919735657247},{"table":"quote_lines","fused":0.23207465951183318,"table_sim":0,"col_score":0.5801866487795829},{"table":"vendor_invoices","fused":0.22979453320359322,"table_sim":0,"col_score":0.574486333008983},{"table":"budgets","fused":0.22926226020581592,"table_sim":0,"col_score":0.5731556505145398}],"fk_expansion_candidates":57,"fk_expansion_added":2,"fk_expansion_blocked_count":45,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"budgets","reason":"already_selected"},{"table":"budgets","reason":"already_selected"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"quote_lines","reason":"already_selected"},{"table":"quote_lines","reason":"already_selected"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"sales_orders","reason":"max_tables"},{"table":"sales_orders","reason":"max_tables"},{"table":"sales_territories","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"vendor_invoices","reason":"max_tables"},{"table":"vendor_invoices","reason":"max_tables"},{"table":"vendor_invoices","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":21,"total_retrieval_latency_ms":29,"sql_generated":"SELECT c.customer_id, c.name, c.email FROM customers c JOIN sales_quotes sq ON c.customer_id = sq.customer_id WHERE c.credit_limit > 100000;","tables_used_in_sql":[],"explain_result":"success","rows_returned":307,"total_latency_ms":845}
{"timestamp":"2026-01-29T21:27:36.649Z","query_id":"f39d20cd-1732-48aa-8f2d-433a9a7994ff","question":"How many sales orders are in pending status?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["sales_orders","purchase_orders","sales_opportunities","order_lines","vendor_invoices","goods_receipts","sales_quotes","fixed_assets","product_suppliers","purchase_requisitions"],"tables_from_table_retrieval":6,"tables_from_column_only":17,"tables_from_fk_expansion":0,"table_scores":[{"table":"sales_orders","similarity":0.6912680172561704},{"table":"sales_orders","similarity":0.6912680172561704},{"table":"sales_orders","similarity":0.6863020331203206},{"table":"purchase_orders","similarity":0.6720782086239174},{"table":"purchase_orders","similarity":0.671648599917699},{"table":"purchase_orders","similarity":0.671648599917699},{"table":"order_lines","similarity":0.6262436019663461},{"table":"order_lines","similarity":0.6262436019663461},{"table":"order_lines","similarity":0.620432904007153},{"table":"sales_opportunities","similarity":0.6139945509337431},{"table":"sales_opportunities","similarity":0.6139945509337431},{"table":"vendor_invoices","similarity":0.6085185379492049},{"table":"goods_receipts","similarity":0.6053687360586439},{"table":"sales_opportunities","similarity":0.601388904869088},{"table":"vendor_invoices","similarity":0.5991801878593713}],"column_hits_per_table":{"sales_orders":13,"purchase_orders":10,"sales_quotes":2,"vendor_invoices":3,"purchase_requisitions":1,"stock_transfers":1,"timesheets":1,"sales_opportunities":2,"leave_requests":1,"project_phases":1,"journal_entries":1,"projects":1,"inventory_adjustments":1,"order_lines":2,"asset_maintenance":1,"fixed_assets":2,"employee_training":1,"goods_receipts":1,"project_expenses":1,"project_tasks":1,"po_lines":1,"vendors":1,"product_suppliers":1},"top_columns_per_table":{"sales_orders":[{"column":"status","similarity":0.8125049395316426},{"column":"order_date","similarity":0.6991484254489689},{"column":"ship_date","similarity":0.6886132471169295}],"purchase_orders":[{"column":"status","similarity":0.7670301060080371},{"column":"po_number","similarity":0.6444732305183548},{"column":"order_date","similarity":0.642184556061974}],"sales_quotes":[{"column":"status","similarity":0.7069048526459094},{"column":"valid_until","similarity":0.5929304827772888}],"vendor_invoices":[{"column":"status","similarity":0.6889977754690522},{"column":"po_id","similarity":0.5964353910929457},{"column":"due_date","similarity":0.5954346294411716}],"purchase_requisitions":[{"column":"status","similarity":0.6807720764825977}],"stock_transfers":[{"column":"status","similarity":0.6558342866682164}],"timesheets":[{"column":"status","similarity":0.6365165724449758}],"sales_opportunities":[{"column":"expected_close_date","similarity":0.6279055578746939},{"column":"actual_close_date","similarity":0.6251199223215209}],"leave_requests":[{"column":"status","similarity":0.6264128005664035}],"project_phases":[{"column":"status","similarity":0.6226177091436476}],"journal_entries":[{"column":"status","similarity":0.6141546900695833}],"projects":[{"column":"status","similarity":0.6138551966717181}],"inventory_adjustments":[{"column":"status","similarity":0.6120310910949274}],"order_lines":[{"column":"quantity_shipped","similarity":0.6088823006735591},{"column":"order_id","similarity":0.5974249918500518}],"asset_maintenance":[{"column":"status","similarity":0.6074441869634195}],"fixed_assets":[{"column":"status","similarity":0.6064051928483505},{"column":"po_id","similarity":0.5944902489845791}],"employee_training":[{"column":"status","similarity":0.6031990688486019}],"goods_receipts":[{"column":"po_id","similarity":0.599781547117576}],"project_expenses":[{"column":"status","similarity":0.5986821650659566}],"project_tasks":[{"column":"status","similarity":0.5978682233232903}],"po_lines":[{"column":"po_id","similarity":0.5909874685299387}],"vendors":[{"column":"is_active","similarity":0.589527003021394}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.5886391733536503}]},"fused_scores":[{"table":"sales_orders","fused":0.8291632394751658,"table_sim":0.6863020331203206,"col_score":1.0434550490074337},{"table":"purchase_orders","fused":0.7892153633703561,"table_sim":0.671648599917699,"col_score":0.9655655085493418},{"table":"sales_opportunities","fused":0.7370195505356345,"table_sim":0.601388904869088,"col_score":0.9404655190354544},{"table":"order_lines","fused":0.6994521615327227,"table_sim":0.620432904007153,"col_score":0.8179810478210772},{"table":"vendor_invoices","fused":0.6941416530577588,"table_sim":0.5991801878593713,"col_score":0.8365838508553399},{"table":"goods_receipts","fused":0.5311600748281077,"table_sim":0.6053687360586439,"col_score":0.4198470829823032},{"table":"sales_quotes","fused":0.33613887248134283,"table_sim":0,"col_score":0.840347181203357},{"table":"fixed_assets","fused":0.25302208885537925,"table_sim":0,"col_score":0.6325552221384481},{"table":"product_suppliers","fused":0.23545566934146014,"table_sim":0,"col_score":0.5886391733536503},{"table":"purchase_requisitions","fused":0.19061618141512737,"table_sim":0,"col_score":0.4765404535378184},{"table":"stock_transfers","fused":0.1836336002671006,"table_sim":0,"col_score":0.45908400066775146},{"table":"timesheets","fused":0.17822464028459323,"table_sim":0,"col_score":0.44556160071148304},{"table":"leave_requests","fused":0.17539558415859297,"table_sim":0,"col_score":0.4384889603964824},{"table":"project_phases","fused":0.17433295856022132,"table_sim":0,"col_score":0.43583239640055327},{"table":"journal_entries","fused":0.17196331321948333,"table_sim":0,"col_score":0.4299082830487083}],"fk_expansion_candidates":57,"fk_expansion_added":0,"fk_expansion_blocked_count":57,"fk_expansion_blocked":[{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":29,"total_retrieval_latency_ms":36,"sql_generated":"SELECT COUNT(*) FROM sales_orders WHERE status = 'pending';","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":384}
{"timestamp":"2026-01-29T21:27:37.033Z","query_id":"023ab7c1-ed52-40b6-a9b5-f5aae1ec085e","question":"List all products in the Electronics category","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["products","asset_categories","product_categories","product_suppliers","inventory_levels","inventory_transactions","purchase_orders","benefit_types","project_budgets","project_expenses","purchase_requisitions"],"tables_from_table_retrieval":6,"tables_from_column_only":15,"tables_from_fk_expansion":1,"table_scores":[{"table":"product_categories","similarity":0.7440966262295596},{"table":"product_categories","similarity":0.7440966262295596},{"table":"product_categories","similarity":0.7247710633179223},{"table":"products","similarity":0.6936914033913907},{"table":"products","similarity":0.6936914033913907},{"table":"products","similarity":0.6925442846427379},{"table":"asset_categories","similarity":0.675092849342745},{"table":"asset_categories","similarity":0.675092849342745},{"table":"asset_categories","similarity":0.6732299389573608},{"table":"product_suppliers","similarity":0.6167763468166113},{"table":"product_suppliers","similarity":0.6167763468166113},{"table":"product_suppliers","similarity":0.6030261734368682},{"table":"inventory_levels","similarity":0.5983462217768915},{"table":"benefit_types","similarity":0.5912987652121153},{"table":"benefit_types","similarity":0.5912987652121153}],"column_hits_per_table":{"product_categories":5,"products":11,"asset_categories":5,"fixed_assets":1,"project_budgets":1,"project_expenses":1,"product_suppliers":5,"inventory_levels":3,"goods_receipts":1,"purchase_orders":3,"projects":1,"inventory_transactions":4,"receipt_lines":1,"purchase_requisitions":2,"sales_orders":1,"order_lines":1,"account_types":1,"po_lines":1,"transfer_lines":1,"requisition_lines":1},"top_columns_per_table":{"product_categories":[{"column":"description","similarity":0.768646064681113},{"column":"is_active","similarity":0.7548223288686364},{"column":"name","similarity":0.7489199069567996}],"products":[{"column":"description","similarity":0.7240057799645775},{"column":"category_id","similarity":0.7136649617093936},{"column":"weight","similarity":0.704192443561975}],"asset_categories":[{"column":"category_id","similarity":0.6604362615120926},{"column":"name","similarity":0.6520432448665474},{"column":"useful_life_years","similarity":0.6398787756615528}],"fixed_assets":[{"column":"category_id","similarity":0.6558423387788446}],"project_budgets":[{"column":"category","similarity":0.6525796799281143}],"project_expenses":[{"column":"category","similarity":0.651685931963324}],"product_suppliers":[{"column":"is_preferred","similarity":0.6277409629474681},{"column":"minimum_order_qty","similarity":0.6258886931415574},{"column":"product_id","similarity":0.6174175455514888}],"inventory_levels":[{"column":"product_id","similarity":0.621493522445592},{"column":"quantity_available","similarity":0.6048918603546654},{"column":"quantity_reserved","similarity":0.5998511349920754}],"goods_receipts":[{"column":"notes","similarity":0.6198539940312029}],"purchase_orders":[{"column":"status","similarity":0.6188603430058831},{"column":"subtotal","similarity":0.6038932710888189},{"column":"total","similarity":0.6013038985767659}],"projects":[{"column":"description","similarity":0.6151455561431391}],"inventory_transactions":[{"column":"transaction_type","similarity":0.6146449355403084},{"column":"product_id","similarity":0.608914428966703},{"column":"quantity","similarity":0.6047816235748863}],"receipt_lines":[{"column":"product_id","similarity":0.6133835901571644}],"purchase_requisitions":[{"column":"notes","similarity":0.6125383879595175},{"column":"status","similarity":0.6080888182045856}],"sales_orders":[{"column":"status","similarity":0.6123902626754091}],"order_lines":[{"column":"product_id","similarity":0.610487520300843}],"account_types":[{"column":"category","similarity":0.609393081886742}],"po_lines":[{"column":"product_id","similarity":0.60542865156565}],"transfer_lines":[{"column":"product_id","similarity":0.6047891394005516}],"requisition_lines":[{"column":"product_id","similarity":0.6021201253496539}]},"fused_scores":[{"table":"products","fused":0.8343480462306,"table_sim":0.6925442846427379,"col_score":1.0470536886123931},{"table":"asset_categories","fused":0.7867425373127976,"table_sim":0.6732299389573608,"col_score":0.9570114348459529},{"table":"product_categories","fused":0.7557586621430741,"table_sim":0.7247710633179223,"col_score":0.8022400603808018},{"table":"product_suppliers","fused":0.7380898278694197,"table_sim":0.6030261734368682,"col_score":0.9406853095182468},{"table":"inventory_levels","fused":0.7209347042064161,"table_sim":0.5983462217768915,"col_score":0.9048174278507031},{"table":"inventory_transactions","fused":0.3668142989311006,"table_sim":0,"col_score":0.9170357473277515},{"table":"purchase_orders","fused":0.36181808815088073,"table_sim":0,"col_score":0.9045452203772018},{"table":"benefit_types","fused":0.3547792591272692,"table_sim":0.5912987652121153,"col_score":0},{"table":"project_budgets","fused":0.2610318719712457,"table_sim":0,"col_score":0.6525796799281143},{"table":"project_expenses","fused":0.2606743727853296,"table_sim":0,"col_score":0.651685931963324},{"table":"purchase_requisitions","fused":0.2566431831773069,"table_sim":0,"col_score":0.6416079579432672},{"table":"account_types","fused":0.24375723275469682,"table_sim":0,"col_score":0.609393081886742},{"table":"fixed_assets","fused":0.18363585485807649,"table_sim":0,"col_score":0.4590896371451912},{"table":"goods_receipts","fused":0.17355911832873683,"table_sim":0,"col_score":0.433897795821842},{"table":"projects","fused":0.17224075572007896,"table_sim":0,"col_score":0.4306018893001974}],"fk_expansion_candidates":60,"fk_expansion_added":1,"fk_expansion_blocked_count":57,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"already_selected"},{"table":"purchase_requisitions","reason":"already_selected"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":15,"total_retrieval_latency_ms":22,"sql_generated":"SELECT p.sku AS product_sku, p.name AS product_name FROM products p JOIN product_categories pc ON p.category_id = pc.category_id WHERE pc.name = 'Electronics';","tables_used_in_sql":[],"explain_result":"success","rows_returned":62,"total_latency_ms":723}
{"timestamp":"2026-01-29T21:27:37.756Z","query_id":"c784eaa3-faa0-446f-893d-09feab12dd5d","question":"What are the names of all warehouses?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["warehouse_locations","warehouses","asset_locations","inventory_levels","stock_transfers","product_suppliers","inventory_transactions","vendor_contacts","goods_receipts","receipt_lines"],"tables_from_table_retrieval":5,"tables_from_column_only":24,"tables_from_fk_expansion":0,"table_scores":[{"table":"warehouse_locations","similarity":0.7285498737313786},{"table":"warehouse_locations","similarity":0.7256245774024009},{"table":"warehouse_locations","similarity":0.7256245774024009},{"table":"warehouses","similarity":0.7204359296605657},{"table":"warehouses","similarity":0.7204359296605657},{"table":"warehouses","similarity":0.6792134543197855},{"table":"asset_locations","similarity":0.6061979025779698},{"table":"asset_locations","similarity":0.6061979025779698},{"table":"inventory_levels","similarity":0.6028416640616783},{"table":"stock_transfers","similarity":0.5855227429535015},{"table":"inventory_levels","similarity":0.5815423542782951},{"table":"inventory_levels","similarity":0.5815423542782951},{"table":"asset_locations","similarity":0.5811905860356016},{"table":"stock_transfers","similarity":0.5781619306329983},{"table":"stock_transfers","similarity":0.5781619306329983}],"column_hits_per_table":{"warehouses":6,"warehouse_locations":7,"stock_transfers":2,"goods_receipts":1,"inventory_levels":2,"inventory_transactions":2,"receipt_lines":1,"asset_locations":6,"adjustment_lines":1,"departments":1,"inventory_adjustments":1,"vendors":1,"business_units":1,"cities":1,"cost_centers":1,"reorder_rules":1,"sales_territories":1,"sales_regions":1,"product_categories":1,"products":1,"currencies":1,"units_of_measure":1,"asset_categories":1,"projects":1,"project_phases":1,"vendor_contacts":2,"product_suppliers":2,"states_provinces":1,"budgets":1},"top_columns_per_table":{"warehouses":[{"column":"name","similarity":0.8239837132539246},{"column":"warehouse_id","similarity":0.7389525085782149},{"column":"code","similarity":0.7372924825805767}],"warehouse_locations":[{"column":"bin","similarity":0.7369462714727907},{"column":"rack","similarity":0.7301028923076418},{"column":"aisle","similarity":0.7270563176306292}],"stock_transfers":[{"column":"to_warehouse_id","similarity":0.6201896532931714},{"column":"from_warehouse_id","similarity":0.6108572482417348}],"goods_receipts":[{"column":"warehouse_id","similarity":0.6194093569001528}],"inventory_levels":[{"column":"warehouse_id","similarity":0.6129809657152051},{"column":"location_id","similarity":0.6110605538163267}],"inventory_transactions":[{"column":"location_id","similarity":0.6117765492932795},{"column":"warehouse_id","similarity":0.6045036778290787}],"receipt_lines":[{"column":"location_id","similarity":0.6044988749396849}],"asset_locations":[{"column":"name","similarity":0.5995259669429954},{"column":"building","similarity":0.5699431267066559},{"column":"description","similarity":0.5635470294472803}],"adjustment_lines":[{"column":"location_id","similarity":0.5925704006095981}],"departments":[{"column":"name","similarity":0.5916804481850862}],"inventory_adjustments":[{"column":"warehouse_id","similarity":0.5911141126040913}],"vendors":[{"column":"name","similarity":0.5896534915318243}],"business_units":[{"column":"name","similarity":0.5874482869568506}],"cities":[{"column":"name","similarity":0.5788506113941311}],"cost_centers":[{"column":"name","similarity":0.57825487466543}],"reorder_rules":[{"column":"warehouse_id","similarity":0.5761515648038772}],"sales_territories":[{"column":"name","similarity":0.5747925339792243}],"sales_regions":[{"column":"name","similarity":0.5726917211289799}],"product_categories":[{"column":"name","similarity":0.5635071676942313}],"products":[{"column":"name","similarity":0.563172892076737}],"currencies":[{"column":"name","similarity":0.5626835257654214}],"units_of_measure":[{"column":"name","similarity":0.5515381017275516}],"asset_categories":[{"column":"name","similarity":0.5512975889483408}],"projects":[{"column":"name","similarity":0.548957856266308}],"project_phases":[{"column":"name","similarity":0.547495677729703}],"vendor_contacts":[{"column":"first_name","similarity":0.5469148670018114},{"column":"last_name","similarity":0.544268531581012}],"product_suppliers":[{"column":"supplier_id","similarity":0.5445688274826966},{"column":"is_preferred","similarity":0.5407228032470287}],"states_provinces":[{"column":"name","similarity":0.5416799146294229}],"budgets":[{"column":"name","similarity":0.5394362709333709}]},"fused_scores":[{"table":"warehouse_locations","fused":0.8761738334920852,"table_sim":0.7256245774024009,"col_score":1.1019977176266116},{"table":"warehouses","fused":0.8178027854796515,"table_sim":0.6792134543197855,"col_score":1.0256867822194502},{"table":"asset_locations","fused":0.6860681088252738,"table_sim":0.5811905860356016,"col_score":0.8433843930097823},{"table":"inventory_levels","fused":0.6061085605015202,"table_sim":0.5815423542782951,"col_score":0.6429578698363578},{"table":"stock_transfers","fused":0.6060702760557298,"table_sim":0.5781619306329983,"col_score":0.6479327941898272},{"table":"product_suppliers","fused":0.292528757146389,"table_sim":0,"col_score":0.7313218928659725},{"table":"inventory_transactions","fused":0.2559279486981893,"table_sim":0,"col_score":0.6398198717454732},{"table":"vendor_contacts","fused":0.22933375718184884,"table_sim":0,"col_score":0.5733343929546221},{"table":"goods_receipts","fused":0.1734346199320428,"table_sim":0,"col_score":0.4335865498301069},{"table":"receipt_lines","fused":0.16925968498311178,"table_sim":0,"col_score":0.4231492124577794},{"table":"adjustment_lines","fused":0.16591971217068746,"table_sim":0,"col_score":0.41479928042671865},{"table":"departments","fused":0.16567052549182415,"table_sim":0,"col_score":0.4141763137295604},{"table":"inventory_adjustments","fused":0.16551195152914555,"table_sim":0,"col_score":0.4137798788228639},{"table":"vendors","fused":0.1651029776289108,"table_sim":0,"col_score":0.412757444072277},{"table":"business_units","fused":0.16448552034791816,"table_sim":0,"col_score":0.41121380086979537}],"fk_expansion_candidates":36,"fk_expansion_added":0,"fk_expansion_blocked_count":36,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":41,"total_retrieval_latency_ms":48,"sql_generated":"SELECT w.name FROM warehouses AS w;","tables_used_in_sql":[],"explain_result":"success","rows_returned":5,"total_latency_ms":346}
{"timestamp":"2026-01-29T21:27:38.102Z","query_id":"8357508e-3ff2-4293-ae52-6edee89c7365","question":"List all active vendors","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["vendors","vendor_contacts","vendor_invoices","product_suppliers","vendor_invoice_lines","purchase_orders","customers","employees","products","warehouses"],"tables_from_table_retrieval":6,"tables_from_column_only":12,"tables_from_fk_expansion":0,"table_scores":[{"table":"vendors","similarity":0.6962726298258062},{"table":"vendors","similarity":0.6962726298258062},{"table":"vendors","similarity":0.6880006513779018},{"table":"vendor_contacts","similarity":0.6580029100551065},{"table":"vendor_contacts","similarity":0.6580029100551065},{"table":"vendor_invoices","similarity":0.6543823921120047},{"table":"vendor_contacts","similarity":0.6543707733450305},{"table":"vendor_invoices","similarity":0.6537617498498873},{"table":"vendor_invoices","similarity":0.6537617498498873},{"table":"product_suppliers","similarity":0.639369742368815},{"table":"product_suppliers","similarity":0.639369742368815},{"table":"product_suppliers","similarity":0.6368613960189783},{"table":"vendor_invoice_lines","similarity":0.6064291468302401},{"table":"vendor_invoice_lines","similarity":0.6064291468302401},{"table":"purchase_orders","similarity":0.6046285681195724}],"column_hits_per_table":{"vendors":12,"vendor_invoices":11,"vendor_contacts":8,"customers":1,"product_suppliers":3,"employees":1,"products":1,"warehouses":1,"fixed_assets":1,"asset_maintenance":1,"purchase_orders":1,"vendor_invoice_lines":3,"positions":1,"business_units":1,"sales_orders":1,"product_categories":1,"bank_accounts":1,"benefit_types":1},"top_columns_per_table":{"vendors":[{"column":"is_active","similarity":0.8082741906985379},{"column":"vendor_id","similarity":0.696608570908196},{"column":"vendor_number","similarity":0.690104216983127}],"vendor_invoices":[{"column":"status","similarity":0.6807922132677474},{"column":"total","similarity":0.655474212549299},{"column":"subtotal","similarity":0.6431967210368317}],"vendor_contacts":[{"column":"is_primary","similarity":0.6594024190023925},{"column":"email","similarity":0.649863249101007},{"column":"vendor_id","similarity":0.6441969797065956}],"customers":[{"column":"is_active","similarity":0.6476421054003765}],"product_suppliers":[{"column":"vendor_id","similarity":0.6444561335438413},{"column":"vendor_sku","similarity":0.621198911356786},{"column":"is_preferred","similarity":0.6007180783650777}],"employees":[{"column":"is_active","similarity":0.6437737649411213}],"products":[{"column":"is_active","similarity":0.6412563586748957}],"warehouses":[{"column":"is_active","similarity":0.6361520848821371}],"fixed_assets":[{"column":"vendor_id","similarity":0.6358205697022895}],"asset_maintenance":[{"column":"vendor_id","similarity":0.6314938869527287}],"purchase_orders":[{"column":"vendor_id","similarity":0.629774324610349}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.618005483305915},{"column":"amount","similarity":0.6046802848122621},{"column":"line_id","similarity":0.6033856438304122}],"positions":[{"column":"is_active","similarity":0.6113698702425924}],"business_units":[{"column":"is_active","similarity":0.6078912202143344}],"sales_orders":[{"column":"status","similarity":0.6008435501749047}],"product_categories":[{"column":"is_active","similarity":0.6002220998224144}],"bank_accounts":[{"column":"is_active","similarity":0.5939215808610938}],"benefit_types":[{"column":"is_active","similarity":0.5936815548559959}]},"fused_scores":[{"table":"vendors","fused":0.8266718004696496,"table_sim":0.6880006513779018,"col_score":1.0346785241072713},{"table":"vendor_contacts","fused":0.7863560814281767,"table_sim":0.6543707733450305,"col_score":0.984334043552896},{"table":"vendor_invoices","fused":0.7830860791370183,"table_sim":0.6537617498498873,"col_score":0.9770725730677149},{"table":"product_suppliers","fused":0.7507400178271169,"table_sim":0.6368613960189783,"col_score":0.9215579505393248},{"table":"vendor_invoice_lines","fused":0.7319957383829625,"table_sim":0.6064291468302401,"col_score":0.920345625712046},{"table":"purchase_orders","fused":0.5391139517626411,"table_sim":0.6046285681195724,"col_score":0.44084202722724425},{"table":"customers","fused":0.18133978951210541,"table_sim":0,"col_score":0.4533494737802635},{"table":"employees","fused":0.18025665418351394,"table_sim":0,"col_score":0.45064163545878483},{"table":"products","fused":0.1795517804289708,"table_sim":0,"col_score":0.448879451072427},{"table":"warehouses","fused":0.1781225837669984,"table_sim":0,"col_score":0.44530645941749597},{"table":"fixed_assets","fused":0.17802975951664105,"table_sim":0,"col_score":0.4450743987916026},{"table":"asset_maintenance","fused":0.17681828834676402,"table_sim":0,"col_score":0.44204572086691},{"table":"positions","fused":0.17118356366792586,"table_sim":0,"col_score":0.42795890916981466},{"table":"business_units","fused":0.17020954166001365,"table_sim":0,"col_score":0.4255238541500341},{"table":"sales_orders","fused":0.1682361940489733,"table_sim":0,"col_score":0.42059048512243324}],"fk_expansion_candidates":144,"fk_expansion_added":0,"fk_expansion_blocked_count":144,"fk_expansion_blocked":[{"table":"departments","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":28,"total_retrieval_latency_ms":36,"sql_generated":"SELECT v.vendor_id, v.name FROM vendors AS v WHERE v.is_active = TRUE;","tables_used_in_sql":[],"explain_result":"success","rows_returned":200,"total_latency_ms":500}
{"timestamp":"2026-01-29T21:27:38.603Z","query_id":"880d541c-49f8-4a73-93a2-6473d51d8465","question":"What are the different account types in the chart of accounts?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["account_types","chart_of_accounts","bank_accounts","bank_transactions","asset_categories","benefit_types","journal_lines","inventory_transactions","audit_log","sales_orders","employee_benefits","journal_entries"],"tables_from_table_retrieval":7,"tables_from_column_only":15,"tables_from_fk_expansion":2,"table_scores":[{"table":"chart_of_accounts","similarity":0.819203299985527},{"table":"account_types","similarity":0.7988075557394306},{"table":"account_types","similarity":0.7988075557394306},{"table":"account_types","similarity":0.7962345365841693},{"table":"chart_of_accounts","similarity":0.791340822956156},{"table":"chart_of_accounts","similarity":0.791340822956156},{"table":"bank_accounts","similarity":0.724679255065619},{"table":"bank_accounts","similarity":0.6999646723589786},{"table":"bank_accounts","similarity":0.6999646723589786},{"table":"benefit_types","similarity":0.6283185597811837},{"table":"benefit_types","similarity":0.6283185597811837},{"table":"journal_lines","similarity":0.625444495321535},{"table":"asset_categories","similarity":0.618359452764169},{"table":"benefit_types","similarity":0.6179653147868353},{"table":"bank_transactions","similarity":0.6154557182401941}],"column_hits_per_table":{"chart_of_accounts":8,"account_types":4,"bank_accounts":8,"journal_lines":1,"vendor_invoice_lines":1,"budget_lines":1,"bank_transactions":2,"inventory_transactions":2,"audit_log":2,"benefit_types":5,"asset_categories":3,"document_attachments":1,"sales_orders":2,"employee_benefits":2,"employee_certifications":1,"journal_entries":1,"goods_receipts":1,"maintenance_types":1,"stock_transfers":1,"sales_regions":1,"tax_rates":1,"leave_types":1},"top_columns_per_table":{"chart_of_accounts":[{"column":"account_number","similarity":0.8095156463967756},{"column":"account_type_id","similarity":0.798110199670143},{"column":"name","similarity":0.7773267996543431}],"account_types":[{"column":"category","similarity":0.8061873869514127},{"column":"name","similarity":0.7882152226403916},{"column":"normal_balance","similarity":0.7709865775976293}],"bank_accounts":[{"column":"account_number","similarity":0.7225117774089481},{"column":"gl_account_id","similarity":0.7192196319887921},{"column":"account_name","similarity":0.7058296402253736}],"journal_lines":[{"column":"account_id","similarity":0.701492184125104}],"vendor_invoice_lines":[{"column":"account_id","similarity":0.6899217649690905}],"budget_lines":[{"column":"account_id","similarity":0.6890433704798434}],"bank_transactions":[{"column":"transaction_type","similarity":0.6522339567052419},{"column":"bank_account_id","similarity":0.6000475548322007}],"inventory_transactions":[{"column":"transaction_type","similarity":0.6508100548275718},{"column":"reference_type","similarity":0.618652619489597}],"audit_log":[{"column":"table_name","similarity":0.6299560725437857},{"column":"action","similarity":0.6176881303455621}],"benefit_types":[{"column":"name","similarity":0.6239559576047775},{"column":"benefit_type_id","similarity":0.6003585729270258},{"column":"description","similarity":0.5966507437046684}],"asset_categories":[{"column":"name","similarity":0.6229758631758117},{"column":"depreciation_method","similarity":0.6228780437653545},{"column":"category_id","similarity":0.600618839267168}],"document_attachments":[{"column":"entity_type","similarity":0.6083808106337816}],"sales_orders":[{"column":"order_number","similarity":0.600482029089641},{"column":"status","similarity":0.5849045118154812}],"employee_benefits":[{"column":"benefit_type_id","similarity":0.5984395501956566},{"column":"coverage_level","similarity":0.5909152043760861}],"employee_certifications":[{"column":"certificate_number","similarity":0.5954716152085089}],"journal_entries":[{"column":"entry_number","similarity":0.5900733476704529}],"goods_receipts":[{"column":"receipt_number","similarity":0.5886087045282947}],"maintenance_types":[{"column":"name","similarity":0.5883275771703451}],"stock_transfers":[{"column":"transfer_number","similarity":0.5878568492842889}],"sales_regions":[{"column":"name","similarity":0.5863467044405402}],"tax_rates":[{"column":"tax_type","similarity":0.5861960576726192}],"leave_types":[{"column":"is_paid","similarity":0.5841987409383301}]},"fused_scores":[{"table":"account_types","fused":0.9544129922505925,"table_sim":0.7962345365841693,"col_score":1.1916806757502274},{"table":"chart_of_accounts","fused":0.9103461802862239,"table_sim":0.791340822956156,"col_score":1.0888542162813257},{"table":"bank_accounts","fused":0.8325558126592646,"table_sim":0.6999646723589786,"col_score":1.0314425231096935},{"table":"bank_transactions","fused":0.7141736713027212,"table_sim":0.6154557182401941,"col_score":0.8622506008965121},{"table":"asset_categories","fused":0.7073835100092569,"table_sim":0.618359452764169,"col_score":0.8409195958768886},{"table":"benefit_types","fused":0.6929005069143089,"table_sim":0.6179653147868353,"col_score":0.8053032951055195},{"table":"journal_lines","fused":0.5716845087479501,"table_sim":0.625444495321535,"col_score":0.4910445288875727},{"table":"inventory_transactions","fused":0.38405454582894816,"table_sim":0,"col_score":0.9601363645723704},{"table":"audit_log","fused":0.33526910229435486,"table_sim":0,"col_score":0.8381727557358871},{"table":"sales_orders","fused":0.3220794432900238,"table_sim":0,"col_score":0.8051986082250594},{"table":"employee_benefits","fused":0.3201476187778264,"table_sim":0,"col_score":0.8003690469445659},{"table":"document_attachments","fused":0.24335232425351264,"table_sim":0,"col_score":0.6083808106337816},{"table":"employee_certifications","fused":0.23818864608340357,"table_sim":0,"col_score":0.5954716152085089},{"table":"journal_entries","fused":0.2360293390681812,"table_sim":0,"col_score":0.5900733476704529},{"table":"goods_receipts","fused":0.2354434818113179,"table_sim":0,"col_score":0.5886087045282947}],"fk_expansion_candidates":45,"fk_expansion_added":2,"fk_expansion_blocked_count":39,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employee_benefits","reason":"already_selected"},{"table":"employee_benefits","reason":"already_selected"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"already_selected"},{"table":"journal_entries","reason":"already_selected"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":11,"total_retrieval_latency_ms":19,"sql_generated":"SELECT DISTINCT at.name AS account_type FROM account_types at;","tables_used_in_sql":[],"explain_result":"success","rows_returned":25,"total_latency_ms":402}
{"timestamp":"2026-01-29T21:27:39.005Z","query_id":"8d2fe890-1e35-4f97-951b-66d9dedbc053","question":"List all bank accounts and their current balances","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["bank_accounts","bank_transactions","account_types","chart_of_accounts","budget_lines","depreciation_entries","budgets","fixed_assets","asset_maintenance","departments","currencies","purchase_orders"],"tables_from_table_retrieval":5,"tables_from_column_only":14,"tables_from_fk_expansion":2,"table_scores":[{"table":"bank_accounts","similarity":0.7380467958544561},{"table":"bank_accounts","similarity":0.7380467958544561},{"table":"bank_accounts","similarity":0.7329690151560269},{"table":"bank_transactions","similarity":0.6524691990877824},{"table":"bank_transactions","similarity":0.6524691990877824},{"table":"bank_transactions","similarity":0.6432688918493359},{"table":"account_types","similarity":0.637683130876762},{"table":"account_types","similarity":0.637683130876762},{"table":"account_types","similarity":0.631508179872346},{"table":"chart_of_accounts","similarity":0.6020063005251778},{"table":"chart_of_accounts","similarity":0.5912086370703393},{"table":"chart_of_accounts","similarity":0.5912086370703393},{"table":"budget_lines","similarity":0.5681702031015662},{"table":"budget_lines","similarity":0.5681702031015662},{"table":"budget_lines","similarity":0.5651962639440569}],"column_hits_per_table":{"bank_accounts":8,"account_types":3,"bank_transactions":9,"chart_of_accounts":7,"budget_lines":1,"fixed_assets":3,"asset_maintenance":4,"budgets":2,"departments":1,"stock_transfers":1,"purchase_orders":1,"depreciation_entries":3,"sales_orders":1,"asset_transfers":1,"inventory_adjustments":1,"po_lines":1,"depreciation_schedules":1,"currencies":1,"order_lines":1},"top_columns_per_table":{"bank_accounts":[{"column":"current_balance","similarity":0.8089444456145792},{"column":"account_number","similarity":0.6893990880283144},{"column":"bank_name","similarity":0.6886932207378867}],"account_types":[{"column":"normal_balance","similarity":0.6577826771573285},{"column":"name","similarity":0.576305558574986},{"column":"category","similarity":0.5660103860090229}],"bank_transactions":[{"column":"bank_account_id","similarity":0.6320865570574266},{"column":"amount","similarity":0.622087497357687},{"column":"reconciled","similarity":0.6119209268904576}],"chart_of_accounts":[{"column":"account_number","similarity":0.6021310044416771},{"column":"description","similarity":0.5849860017700876},{"column":"name","similarity":0.5833355191945212}],"budget_lines":[{"column":"account_id","similarity":0.5872059668461254}],"fixed_assets":[{"column":"status","similarity":0.5828378769160532},{"column":"purchase_cost","similarity":0.5582567197440901},{"column":"po_id","similarity":0.5544635441821786}],"asset_maintenance":[{"column":"status","similarity":0.5812112019616437},{"column":"notes","similarity":0.5653592975237859},{"column":"cost","similarity":0.5583403793159406}],"budgets":[{"column":"status","similarity":0.5799927736493256},{"column":"total_amount","similarity":0.579980842065588}],"departments":[{"column":"budget","similarity":0.570906870993348}],"stock_transfers":[{"column":"status","similarity":0.5643478756295153}],"purchase_orders":[{"column":"total","similarity":0.5631649012660114}],"depreciation_entries":[{"column":"accumulated_depreciation","similarity":0.5623941152149342},{"column":"asset_id","similarity":0.5608072311992653},{"column":"amount","similarity":0.5531774591650637}],"sales_orders":[{"column":"total","similarity":0.5608168283032534}],"asset_transfers":[{"column":"asset_id","similarity":0.559768695814554}],"inventory_adjustments":[{"column":"status","similarity":0.5585885430147457}],"po_lines":[{"column":"line_total","similarity":0.5528051580745316}],"depreciation_schedules":[{"column":"asset_id","similarity":0.5500261207297255}],"currencies":[{"column":"code","similarity":0.5464221335552627}],"order_lines":[{"column":"line_total","similarity":0.5449514399298908}]},"fused_scores":[{"table":"bank_accounts","fused":0.9012390049451107,"table_sim":0.7329690151560269,"col_score":1.1536439896287365},{"table":"bank_transactions","fused":0.7571805194307678,"table_sim":0.6432688918493359,"col_score":0.9280479608029157},{"table":"account_types","fused":0.7552200559881436,"table_sim":0.631508179872346,"col_score":0.94078787016184},{"table":"chart_of_accounts","fused":0.6774756242666866,"table_sim":0.5912086370703393,"col_score":0.8068761050612078},{"table":"budget_lines","fused":0.5035354290833491,"table_sim":0.5651962639440569,"col_score":0.4110441767922877},{"table":"depreciation_entries","fused":0.3355931379189865,"table_sim":0,"col_score":0.8389828447974661},{"table":"budgets","fused":0.31319132513714076,"table_sim":0,"col_score":0.7829783128428519},{"table":"fixed_assets","fused":0.30489999066588347,"table_sim":0,"col_score":0.7622499766647086},{"table":"asset_maintenance","fused":0.3047057200010064,"table_sim":0,"col_score":0.7617643000025158},{"table":"departments","fused":0.22836274839733922,"table_sim":0,"col_score":0.570906870993348},{"table":"purchase_orders","fused":0.22526596050640457,"table_sim":0,"col_score":0.5631649012660114},{"table":"sales_orders","fused":0.22432673132130138,"table_sim":0,"col_score":0.5608168283032534},{"table":"po_lines","fused":0.22112206322981265,"table_sim":0,"col_score":0.5528051580745316},{"table":"currencies","fused":0.21856885342210508,"table_sim":0,"col_score":0.5464221335552627},{"table":"order_lines","fused":0.21798057597195633,"table_sim":0,"col_score":0.5449514399298908}],"fk_expansion_candidates":51,"fk_expansion_added":2,"fk_expansion_blocked_count":45,"fk_expansion_blocked":[{"table":"asset_categories","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"currencies","reason":"already_selected"},{"table":"currencies","reason":"already_selected"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"purchase_orders","reason":"already_selected"},{"table":"purchase_orders","reason":"already_selected"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":21,"total_retrieval_latency_ms":28,"sql_generated":"SELECT b.account_number AS \"Account Number\", b.current_balance AS \"Current Balance\" FROM bank_accounts b;","tables_used_in_sql":[],"explain_result":"success","rows_returned":5,"total_latency_ms":561}
{"timestamp":"2026-01-29T21:27:39.566Z","query_id":"12bae88f-16b9-43a6-9ac5-07a3f12e4d6a","question":"How many projects are currently active?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["project_tasks","projects","project_phases","project_milestones","project_resources","products","positions","product_categories","project_expenses","employees"],"tables_from_table_retrieval":5,"tables_from_column_only":12,"tables_from_fk_expansion":0,"table_scores":[{"table":"project_tasks","similarity":0.650275467821731},{"table":"project_tasks","similarity":0.650275467821731},{"table":"project_tasks","similarity":0.6324363750327547},{"table":"project_phases","similarity":0.6314559839975916},{"table":"project_phases","similarity":0.6314559839975916},{"table":"projects","similarity":0.6310645209358304},{"table":"projects","similarity":0.6310645209358304},{"table":"project_milestones","similarity":0.6170314556998037},{"table":"project_phases","similarity":0.6128862225489412},{"table":"project_milestones","similarity":0.6077049222719266},{"table":"project_milestones","similarity":0.6077049222719266},{"table":"projects","similarity":0.6020298260872147},{"table":"project_resources","similarity":0.6015867769428557},{"table":"project_resources","similarity":0.5959055344150135},{"table":"project_resources","similarity":0.5959055344150135}],"column_hits_per_table":{"projects":11,"project_tasks":9,"project_phases":8,"project_milestones":8,"products":1,"positions":1,"project_resources":2,"product_categories":1,"project_expenses":1,"employees":1,"training_courses":1,"warehouses":1,"business_units":1,"vendors":1,"cost_centers":1,"customers":1,"fixed_assets":1},"top_columns_per_table":{"projects":[{"column":"status","similarity":0.6952554925044898},{"column":"start_date","similarity":0.6596027658706693},{"column":"actual_end_date","similarity":0.6401830267542961}],"project_tasks":[{"column":"status","similarity":0.6606100908218507},{"column":"completed_date","similarity":0.6368229786219834},{"column":"start_date","similarity":0.6292582567736982}],"project_phases":[{"column":"status","similarity":0.6604885270610856},{"column":"start_date","similarity":0.6275125782071443},{"column":"end_date","similarity":0.6163385340144646}],"project_milestones":[{"column":"completed_date","similarity":0.6338543569092513},{"column":"is_billable","similarity":0.6066078433244196},{"column":"due_date","similarity":0.601484675349934}],"products":[{"column":"is_active","similarity":0.629479953126807}],"positions":[{"column":"is_active","similarity":0.619668256339286}],"project_resources":[{"column":"start_date","similarity":0.6175570072174423},{"column":"end_date","similarity":0.605459362777849}],"product_categories":[{"column":"is_active","similarity":0.6174448230737236}],"project_expenses":[{"column":"status","similarity":0.6174103092825096}],"employees":[{"column":"is_active","similarity":0.6056786473130706}],"training_courses":[{"column":"is_active","similarity":0.5954094641374467}],"warehouses":[{"column":"is_active","similarity":0.5938282349648681}],"business_units":[{"column":"is_active","similarity":0.5882189740487279}],"vendors":[{"column":"is_active","similarity":0.5817936740365313}],"cost_centers":[{"column":"is_active","similarity":0.5775357194130835}],"customers":[{"column":"is_active","similarity":0.5750701102281962}],"fixed_assets":[{"column":"status","similarity":0.5743195300084423}]},"fused_scores":[{"table":"project_tasks","fused":0.7600426678231859,"table_sim":0.6324363750327547,"col_score":0.9514521070088325},{"table":"projects","fused":0.7530956073514559,"table_sim":0.6020298260872147,"col_score":0.9796942792478174},{"table":"project_phases","fused":0.7420044716151154,"table_sim":0.6128862225489412,"col_score":0.9356818452143767},{"table":"project_milestones","fused":0.7394862647917404,"table_sim":0.6077049222719266,"col_score":0.9371582785714612},{"table":"project_resources","fused":0.7256579960915548,"table_sim":0.5959055344150135,"col_score":0.9202866886063668},{"table":"products","fused":0.176254386875506,"table_sim":0,"col_score":0.4406359671887649},{"table":"positions","fused":0.17350711177500008,"table_sim":0,"col_score":0.43376777943750017},{"table":"product_categories","fused":0.1728845504606426,"table_sim":0,"col_score":0.4322113761516065},{"table":"project_expenses","fused":0.1728748865991027,"table_sim":0,"col_score":0.4321872164977567},{"table":"employees","fused":0.16959002124765976,"table_sim":0,"col_score":0.4239750531191494},{"table":"training_courses","fused":0.16671464995848506,"table_sim":0,"col_score":0.41678662489621265},{"table":"warehouses","fused":0.16627190579016307,"table_sim":0,"col_score":0.41567976447540766},{"table":"business_units","fused":0.16470131273364383,"table_sim":0,"col_score":0.41175328183410953},{"table":"vendors","fused":0.16290222873022875,"table_sim":0,"col_score":0.40725557182557187},{"table":"cost_centers","fused":0.1617100014356634,"table_sim":0,"col_score":0.4042750035891584}],"fk_expansion_candidates":135,"fk_expansion_added":0,"fk_expansion_blocked_count":135,"fk_expansion_blocked":[{"table":"departments","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"project_budgets","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"product_suppliers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"product_suppliers","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"project_budgets","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"project_budgets","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"product_suppliers","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":26,"total_retrieval_latency_ms":33,"sql_generated":"SELECT COUNT(*) FROM projects WHERE status = 'active';","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":303}
{"timestamp":"2026-01-29T21:27:39.869Z","query_id":"9d2579ef-9892-4219-8e41-9a0e2be1955d","question":"List all fixed assets with their purchase cost","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["fixed_assets","asset_maintenance","asset_categories","asset_transfers","depreciation_schedules","purchase_orders","products","project_budgets","sales_orders","purchase_requisitions","maintenance_types","projects"],"tables_from_table_retrieval":5,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"fixed_assets","similarity":0.7343654134072136},{"table":"fixed_assets","similarity":0.7343654134072136},{"table":"fixed_assets","similarity":0.7209497053888301},{"table":"asset_maintenance","similarity":0.6308058404117752},{"table":"asset_maintenance","similarity":0.6179697125570032},{"table":"asset_maintenance","similarity":0.6179697125570032},{"table":"asset_categories","similarity":0.5912281177120349},{"table":"asset_categories","similarity":0.5908629711394363},{"table":"asset_categories","similarity":0.5908629711394363},{"table":"depreciation_schedules","similarity":0.5847667500423093},{"table":"depreciation_schedules","similarity":0.5847667500423093},{"table":"depreciation_schedules","similarity":0.5814813777494169},{"table":"asset_transfers","similarity":0.5814400142884585},{"table":"asset_transfers","similarity":0.5814400142884585},{"table":"asset_transfers","similarity":0.5810308594815269}],"column_hits_per_table":{"fixed_assets":17,"asset_maintenance":8,"asset_transfers":2,"purchase_orders":5,"depreciation_entries":1,"depreciation_schedules":1,"maintenance_types":1,"purchase_requisitions":3,"asset_categories":2,"products":2,"project_expenses":1,"project_budgets":2,"product_suppliers":1,"sales_orders":2,"budgets":1,"projects":1},"top_columns_per_table":{"fixed_assets":[{"column":"purchase_cost","similarity":0.8336730962249834},{"column":"purchase_date","similarity":0.757030591227503},{"column":"disposal_amount","similarity":0.7115957358886795}],"asset_maintenance":[{"column":"cost","similarity":0.7001413961532815},{"column":"asset_id","similarity":0.646620164429287},{"column":"status","similarity":0.623064430931896}],"asset_transfers":[{"column":"asset_id","similarity":0.6507271021855611},{"column":"reason","similarity":0.5954539547440019}],"purchase_orders":[{"column":"total","similarity":0.6201708065577443},{"column":"shipping_cost","similarity":0.6103074039927893},{"column":"subtotal","similarity":0.592057979964163}],"depreciation_entries":[{"column":"asset_id","similarity":0.6167046419250045}],"depreciation_schedules":[{"column":"asset_id","similarity":0.6131913844659764}],"maintenance_types":[{"column":"estimated_cost","similarity":0.6035554909402351}],"purchase_requisitions":[{"column":"status","similarity":0.5957030209752325},{"column":"notes","similarity":0.579593954206422},{"column":"requisition_number","similarity":0.5641816400766758}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.5901071514451579},{"column":"depreciation_method","similarity":0.5734492552613173}],"products":[{"column":"unit_cost","similarity":0.5893978216060566},{"column":"list_price","similarity":0.5715240580401271}],"project_expenses":[{"column":"amount","similarity":0.5714967061817042}],"project_budgets":[{"column":"planned_amount","similarity":0.5691947438967756},{"column":"actual_amount","similarity":0.5658605972140979}],"product_suppliers":[{"column":"unit_cost","similarity":0.5664134865556345}],"sales_orders":[{"column":"total","similarity":0.5647711756811595},{"column":"shipping_cost","similarity":0.5642246655101619}],"budgets":[{"column":"total_amount","similarity":0.5646227718053173}],"projects":[{"column":"budget","similarity":0.5640102092352354}]},"fused_scores":[{"table":"fixed_assets","fused":0.917445179968792,"table_sim":0.7209497053888301,"col_score":1.212188391838735},{"table":"asset_maintenance","fused":0.7733901622742586,"table_sim":0.6179697125570032,"col_score":1.0065208368501417},{"table":"asset_categories","fused":0.7052504943139885,"table_sim":0.5908629711394363,"col_score":0.8768317790758166},{"table":"asset_transfers","fused":0.6779018918924955,"table_sim":0.5810308594815269,"col_score":0.8232084405089483},{"table":"depreciation_schedules","fused":0.5205824143001235,"table_sim":0.5814813777494169,"col_score":0.4292339691261835},{"table":"purchase_orders","fused":0.3701298034216556,"table_sim":0,"col_score":0.9253245085541388},{"table":"products","fused":0.35006394025044807,"table_sim":0,"col_score":0.8751598506261201},{"table":"project_budgets","fused":0.34085001700152984,"table_sim":0,"col_score":0.8521250425038245},{"table":"sales_orders","fused":0.3387534033744962,"table_sim":0,"col_score":0.8468835084362405},{"table":"purchase_requisitions","fused":0.3090710789672029,"table_sim":0,"col_score":0.7726776974180072},{"table":"maintenance_types","fused":0.24142219637609405,"table_sim":0,"col_score":0.6035554909402351},{"table":"project_expenses","fused":0.2285986824726817,"table_sim":0,"col_score":0.5714967061817042},{"table":"product_suppliers","fused":0.2265653946222538,"table_sim":0,"col_score":0.5664134865556345},{"table":"budgets","fused":0.22584910872212693,"table_sim":0,"col_score":0.5646227718053173},{"table":"projects","fused":0.22560408369409415,"table_sim":0,"col_score":0.5640102092352354}],"fk_expansion_candidates":75,"fk_expansion_added":2,"fk_expansion_blocked_count":66,"fk_expansion_blocked":[{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"maintenance_types","reason":"already_selected"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"product_suppliers","reason":"max_tables"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"product_suppliers","reason":"max_tables"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"projects","reason":"already_selected"},{"table":"product_suppliers","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"projects","reason":"already_selected"},{"table":"maintenance_types","reason":"already_selected"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":44,"total_retrieval_latency_ms":51,"sql_generated":"SELECT f.asset_id AS asset_id, p.purchase_cost AS purchase_cost FROM fixed_assets f JOIN purchase_orders po ON f.po_id = po.order_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column po.order_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":0,"autocorrect_failure_reason":"No candidates found for column 'order_id'","total_latency_ms":1988,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column po.order_id does not exist"}
{"timestamp":"2026-01-29T21:27:41.857Z","query_id":"fe1e2b0d-8414-4670-9750-fd910c5ea636","question":"What are all the available leave types?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["leave_types","leave_requests","maintenance_types","account_types","benefit_types","employment_history","positions","employee_benefits","asset_maintenance","employees","inventory_transactions","sales_opportunities"],"tables_from_table_retrieval":5,"tables_from_column_only":18,"tables_from_fk_expansion":2,"table_scores":[{"table":"leave_types","similarity":0.8153120238871665},{"table":"leave_types","similarity":0.8153120238871665},{"table":"leave_types","similarity":0.7907961003152969},{"table":"leave_requests","similarity":0.7190219066933456},{"table":"leave_requests","similarity":0.7190219066933456},{"table":"leave_requests","similarity":0.7143778015997992},{"table":"maintenance_types","similarity":0.6503054333039201},{"table":"maintenance_types","similarity":0.6503054333039201},{"table":"maintenance_types","similarity":0.6481400096068088},{"table":"benefit_types","similarity":0.6322231020121719},{"table":"benefit_types","similarity":0.6322231020121719},{"table":"benefit_types","similarity":0.6269933285396667},{"table":"account_types","similarity":0.6207464005230485},{"table":"account_types","similarity":0.6207464005230485},{"table":"account_types","similarity":0.6192881819056906}],"column_hits_per_table":{"leave_types":5,"leave_requests":10,"maintenance_types":5,"benefit_types":4,"employment_history":2,"account_types":4,"employee_training":1,"asset_maintenance":2,"employee_benefits":2,"timesheets":1,"sales_orders":1,"positions":2,"employees":1,"fixed_assets":1,"purchase_requisitions":1,"vendor_invoices":1,"chart_of_accounts":1,"inventory_transactions":1,"bank_transactions":1,"stock_transfers":1,"sales_quotes":1,"sales_opportunities":1,"inventory_adjustments":1},"top_columns_per_table":{"leave_types":[{"column":"is_paid","similarity":0.7612464678618273},{"column":"days_allowed","similarity":0.7601500998124394},{"column":"leave_type_id","similarity":0.7404804728319255}],"leave_requests":[{"column":"status","similarity":0.7396795189172545},{"column":"leave_type_id","similarity":0.7183447876062181},{"column":"days_requested","similarity":0.6924150250540297}],"maintenance_types":[{"column":"description","similarity":0.6353856248912257},{"column":"name","similarity":0.6275362006518306},{"column":"type_id","similarity":0.6101423562940161}],"benefit_types":[{"column":"is_active","similarity":0.6202574050902354},{"column":"name","similarity":0.613970586164775},{"column":"description","similarity":0.609536513053858}],"employment_history":[{"column":"reason_for_leaving","similarity":0.6149236134137261},{"column":"position","similarity":0.5557487204215079}],"account_types":[{"column":"normal_balance","similarity":0.608424842651833},{"column":"category","similarity":0.5965050820828129},{"column":"name","similarity":0.5862630113315467}],"employee_training":[{"column":"status","similarity":0.595192045369969}],"asset_maintenance":[{"column":"status","similarity":0.58756583227351},{"column":"maintenance_type_id","similarity":0.5836180049613157}],"employee_benefits":[{"column":"benefit_type_id","similarity":0.5860432161043488},{"column":"end_date","similarity":0.5609092285346757}],"timesheets":[{"column":"status","similarity":0.5817907952742775}],"sales_orders":[{"column":"status","similarity":0.5754670907458482}],"positions":[{"column":"is_active","similarity":0.5753948179884102},{"column":"title","similarity":0.5728139979402822}],"employees":[{"column":"termination_date","similarity":0.570986454201654}],"fixed_assets":[{"column":"status","similarity":0.5698997906492048}],"purchase_requisitions":[{"column":"status","similarity":0.5624648292687259}],"vendor_invoices":[{"column":"status","similarity":0.5603695727011545}],"chart_of_accounts":[{"column":"account_type_id","similarity":0.5595433836798172}],"inventory_transactions":[{"column":"transaction_type","similarity":0.5589784724046583}],"bank_transactions":[{"column":"transaction_type","similarity":0.5583149392151486}],"stock_transfers":[{"column":"status","similarity":0.556932657372917}],"sales_quotes":[{"column":"status","similarity":0.5558161462227229}],"sales_opportunities":[{"column":"source","similarity":0.5553635771952049}],"inventory_adjustments":[{"column":"status","similarity":0.5541098667634835}]},"fused_scores":[{"table":"leave_types","fused":0.92249438434967,"table_sim":0.7907961003152969,"col_score":1.1200418104012295},{"table":"leave_requests","fused":0.8400325985595832,"table_sim":0.7143778015997992,"col_score":1.0285147939992592},{"table":"maintenance_types","fused":0.7441095655709671,"table_sim":0.6481400096068088,"col_score":0.8880638995172044},{"table":"account_types","fused":0.7342438626207102,"table_sim":0.6192881819056906,"col_score":0.9066773836932396},{"table":"benefit_types","fused":0.6358239526121345,"table_sim":0.6269933285396667,"col_score":0.649069888720836},{"table":"employment_history","fused":0.35711918944979204,"table_sim":0,"col_score":0.8927979736244801},{"table":"positions","fused":0.3096808736944903,"table_sim":0,"col_score":0.7742021842362258},{"table":"employee_benefits","fused":0.3064097416684792,"table_sim":0,"col_score":0.7660243541711979},{"table":"asset_maintenance","fused":0.24622495373116698,"table_sim":0,"col_score":0.6155623843279174},{"table":"employees","fused":0.2283945816806616,"table_sim":0,"col_score":0.570986454201654},{"table":"inventory_transactions","fused":0.2235913889618633,"table_sim":0,"col_score":0.5589784724046583},{"table":"bank_transactions","fused":0.22332597568605947,"table_sim":0,"col_score":0.5583149392151486},{"table":"sales_opportunities","fused":0.22214543087808197,"table_sim":0,"col_score":0.5553635771952049},{"table":"employee_training","fused":0.1666537727035913,"table_sim":0,"col_score":0.41663443175897824},{"table":"timesheets","fused":0.1629014226767977,"table_sim":0,"col_score":0.4072535566919942}],"fk_expansion_candidates":96,"fk_expansion_added":2,"fk_expansion_blocked_count":90,"fk_expansion_blocked":[{"table":"sales_orders","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"inventory_transactions","reason":"already_selected"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"inventory_transactions","reason":"already_selected"},{"table":"vendors","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"sales_opportunities","reason":"already_selected"},{"table":"sales_opportunities","reason":"already_selected"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":36,"total_retrieval_latency_ms":43,"sql_generated":"SELECT lt.name FROM leave_types AS lt;","tables_used_in_sql":[],"explain_result":"success","rows_returned":8,"total_latency_ms":365}
{"timestamp":"2026-01-29T21:27:42.222Z","query_id":"73f32278-fa5b-4a21-a510-0946918138d2","question":"List all training courses that are mandatory","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["training_courses","employee_training","certifications","employee_certifications","maintenance_types","leave_types","product_suppliers","purchase_requisitions","project_milestones","sales_orders"],"tables_from_table_retrieval":5,"tables_from_column_only":15,"tables_from_fk_expansion":0,"table_scores":[{"table":"training_courses","similarity":0.7873697953142612},{"table":"training_courses","similarity":0.7873697953142612},{"table":"training_courses","similarity":0.7832587829851695},{"table":"employee_training","similarity":0.6622740415541937},{"table":"employee_training","similarity":0.6622740415541937},{"table":"employee_training","similarity":0.6570057454586046},{"table":"certifications","similarity":0.5965030477585557},{"table":"certifications","similarity":0.5965030477585557},{"table":"certifications","similarity":0.5900939338505992},{"table":"employee_certifications","similarity":0.5760162077924663},{"table":"employee_certifications","similarity":0.5662772014922313},{"table":"employee_certifications","similarity":0.5662772014922313},{"table":"maintenance_types","similarity":0.5048094520010439},{"table":"maintenance_types","similarity":0.5048094520010439},{"table":"maintenance_types","similarity":0.49281971341629327}],"column_hits_per_table":{"training_courses":7,"employee_training":7,"certifications":5,"employee_certifications":6,"leave_types":3,"sales_orders":1,"purchase_requisitions":2,"maintenance_types":5,"emergency_contacts":1,"project_milestones":2,"benefit_types":1,"business_units":1,"product_suppliers":2,"units_of_measure":1,"requisition_lines":1,"asset_maintenance":1,"project_resources":1,"project_tasks":1,"vendor_contacts":1,"reorder_rules":1},"top_columns_per_table":{"training_courses":[{"column":"is_mandatory","similarity":0.814547688206976},{"column":"description","similarity":0.7210520541882913},{"column":"is_active","similarity":0.6998661786347449}],"employee_training":[{"column":"course_id","similarity":0.6460785266021282},{"column":"scheduled_date","similarity":0.6379019386890121},{"column":"completion_date","similarity":0.6234909008328433}],"certifications":[{"column":"description","similarity":0.6095125615154784},{"column":"issuing_body","similarity":0.57698393195182},{"column":"validity_years","similarity":0.5591744479508656}],"employee_certifications":[{"column":"certificate_number","similarity":0.5514558044255654},{"column":"certification_id","similarity":0.549379266890378},{"column":"cert_id","similarity":0.5486469080412996}],"leave_types":[{"column":"requires_approval","similarity":0.536554743713736},{"column":"is_paid","similarity":0.5021468966647877},{"column":"days_allowed","similarity":0.4821299724271749}],"sales_orders":[{"column":"required_date","similarity":0.5223999513586965}],"purchase_requisitions":[{"column":"required_date","similarity":0.5174102340873212},{"column":"notes","similarity":0.4846003356482508}],"maintenance_types":[{"column":"description","similarity":0.5119510628120414},{"column":"frequency_months","similarity":0.4922702669089287},{"column":"estimated_cost","similarity":0.48121611757654414}],"emergency_contacts":[{"column":"is_primary","similarity":0.5002447464244713}],"project_milestones":[{"column":"is_billable","similarity":0.49541387707350004},{"column":"description","similarity":0.4782212883173893}],"benefit_types":[{"column":"is_active","similarity":0.4905257359031393}],"business_units":[{"column":"is_active","similarity":0.4871697428534034}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.48362340098118217},{"column":"is_preferred","similarity":0.4765496659303714}],"units_of_measure":[{"column":"base_uom_id","similarity":0.4831180064251368}],"requisition_lines":[{"column":"quantity","similarity":0.48169140071868866}],"asset_maintenance":[{"column":"notes","similarity":0.47855041994114966}],"project_resources":[{"column":"hourly_rate","similarity":0.47812599772471986}],"project_tasks":[{"column":"priority","similarity":0.4780592694168637}],"vendor_contacts":[{"column":"is_primary","similarity":0.477243459923855}],"reorder_rules":[{"column":"max_quantity","similarity":0.4768456096343272}]},"fused_scores":[{"table":"training_courses","fused":0.9347595035621551,"table_sim":0.7832587829851695,"col_score":1.1620105844276334},{"table":"employee_training","fused":0.7740624029173362,"table_sim":0.6570057454586046,"col_score":0.9496473891054338},{"table":"certifications","fused":0.6966848226812605,"table_sim":0.5900939338505992,"col_score":0.8565711559272527},{"table":"employee_certifications","fused":0.6688391740505231,"table_sim":0.5662772014922313,"col_score":0.8226821328879609},{"table":"maintenance_types","fused":0.5888431583286563,"table_sim":0.49281971341629327,"col_score":0.7328783256972008},{"table":"leave_types","fused":0.3110478919709294,"table_sim":0,"col_score":0.7776197299273235},{"table":"product_suppliers","fused":0.2887592935785472,"table_sim":0,"col_score":0.7218982339463679},{"table":"purchase_requisitions","fused":0.27480814062568365,"table_sim":0,"col_score":0.687020351564209},{"table":"project_milestones","fused":0.26511653119383455,"table_sim":0,"col_score":0.6627913279845863},{"table":"sales_orders","fused":0.20895998054347864,"table_sim":0,"col_score":0.5223999513586965},{"table":"emergency_contacts","fused":0.20009789856978852,"table_sim":0,"col_score":0.5002447464244713},{"table":"requisition_lines","fused":0.19267656028747548,"table_sim":0,"col_score":0.48169140071868866},{"table":"project_resources","fused":0.19125039908988795,"table_sim":0,"col_score":0.47812599772471986},{"table":"project_tasks","fused":0.1912237077667455,"table_sim":0,"col_score":0.4780592694168637},{"table":"vendor_contacts","fused":0.190897383969542,"table_sim":0,"col_score":0.477243459923855}],"fk_expansion_candidates":39,"fk_expansion_added":0,"fk_expansion_blocked_count":39,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":18,"total_retrieval_latency_ms":25,"sql_generated":"SELECT tc.name AS course_name, tc.duration_hours, tc.cost FROM training_courses tc WHERE tc.is_mandatory = TRUE;","tables_used_in_sql":[],"explain_result":"success","rows_returned":4,"total_latency_ms":607}
{"timestamp":"2026-01-29T21:27:42.830Z","query_id":"a2212cbf-5887-4fdb-9167-4996cddfcedd","question":"What are the different opportunity stages?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["opportunity_stages","sales_opportunities","project_phases","project_tasks","positions","projects","vendor_contacts","sales_quotes","employment_history","performance_reviews","task_assignments"],"tables_from_table_retrieval":5,"tables_from_column_only":17,"tables_from_fk_expansion":1,"table_scores":[{"table":"opportunity_stages","similarity":0.8221357699980866},{"table":"opportunity_stages","similarity":0.8176629035369016},{"table":"opportunity_stages","similarity":0.8176629035369016},{"table":"sales_opportunities","similarity":0.705452578214936},{"table":"sales_opportunities","similarity":0.6734243089266532},{"table":"sales_opportunities","similarity":0.6734243089266532},{"table":"project_phases","similarity":0.5910011427333453},{"table":"project_tasks","similarity":0.5856436723604402},{"table":"project_phases","similarity":0.5850374728279742},{"table":"project_phases","similarity":0.5850374728279742},{"table":"project_tasks","similarity":0.5669780419060751},{"table":"project_tasks","similarity":0.5669780419060751},{"table":"positions","similarity":0.5469043796027597},{"table":"positions","similarity":0.5469043796027597},{"table":"positions","similarity":0.5399052196547368}],"column_hits_per_table":{"opportunity_stages":6,"sales_opportunities":11,"project_phases":7,"sales_quotes":2,"project_tasks":4,"projects":3,"positions":1,"stock_transfers":1,"employment_history":1,"vendor_invoices":1,"sales_orders":1,"purchase_requisitions":1,"performance_reviews":1,"timesheets":1,"vendor_contacts":2,"employee_training":1,"purchase_orders":1,"task_assignments":1,"project_expenses":1,"journal_entries":1,"warehouse_locations":1,"leave_requests":1},"top_columns_per_table":{"opportunity_stages":[{"column":"name","similarity":0.7995522492175101},{"column":"probability","similarity":0.775558879369367},{"column":"sequence","similarity":0.7708343654238288}],"sales_opportunities":[{"column":"stage_id","similarity":0.7059415983640481},{"column":"source","similarity":0.6711321363690625},{"column":"name","similarity":0.6452724499361098}],"project_phases":[{"column":"status","similarity":0.6232576702180161},{"column":"description","similarity":0.6034091478912608},{"column":"start_date","similarity":0.6030372572830889}],"sales_quotes":[{"column":"opportunity_id","similarity":0.6147463179178642},{"column":"status","similarity":0.54330303115206}],"project_tasks":[{"column":"priority","similarity":0.5858528199183252},{"column":"status","similarity":0.5730801962534186},{"column":"phase_id","similarity":0.5607037044154554}],"projects":[{"column":"priority","similarity":0.5810811398487153},{"column":"status","similarity":0.5620351291324196},{"column":"start_date","similarity":0.5420441244772041}],"positions":[{"column":"title","similarity":0.5721393185558201}],"stock_transfers":[{"column":"status","similarity":0.5591229145906735}],"employment_history":[{"column":"position","similarity":0.5582251887233417}],"vendor_invoices":[{"column":"status","similarity":0.5574741035348497}],"sales_orders":[{"column":"status","similarity":0.5556357399820548}],"purchase_requisitions":[{"column":"status","similarity":0.5554818743499551}],"performance_reviews":[{"column":"review_period_start","similarity":0.5509040784070887}],"timesheets":[{"column":"status","similarity":0.5496387852297092}],"vendor_contacts":[{"column":"title","similarity":0.5480716599019128},{"column":"first_name","similarity":0.5390129346005467}],"employee_training":[{"column":"status","similarity":0.5462098751481785}],"purchase_orders":[{"column":"status","similarity":0.5452189780991694}],"task_assignments":[{"column":"role","similarity":0.5440927669761538}],"project_expenses":[{"column":"status","similarity":0.5419099926956821}],"journal_entries":[{"column":"status","similarity":0.541055083798884}],"warehouse_locations":[{"column":"aisle","similarity":0.5391761865875615}],"leave_requests":[{"column":"status","similarity":0.5379293041870119}]},"fused_scores":[{"table":"opportunity_stages","fused":0.9549881669546535,"table_sim":0.8176629035369016,"col_score":1.1609760620812812},{"table":"sales_opportunities","fused":0.8004357023749251,"table_sim":0.6734243089266532,"col_score":0.9909527925473333},{"table":"project_phases","fused":0.7083626528142624,"table_sim":0.5850374728279742,"col_score":0.8933504227936944},{"table":"project_tasks","fused":0.6842981253519156,"table_sim":0.5669780419060751,"col_score":0.8602782505206762},{"table":"positions","fused":0.5527988592151701,"table_sim":0.5399052196547368,"col_score":0.5721393185558201},{"table":"projects","fused":0.340841280834927,"table_sim":0,"col_score":0.8521032020873174},{"table":"vendor_contacts","fused":0.2946904748048416,"table_sim":0,"col_score":0.736726187012104},{"table":"sales_quotes","fused":0.24819139337829035,"table_sim":0,"col_score":0.6204784834457259},{"table":"employment_history","fused":0.2232900754893367,"table_sim":0,"col_score":0.5582251887233417},{"table":"performance_reviews","fused":0.2203616313628355,"table_sim":0,"col_score":0.5509040784070887},{"table":"task_assignments","fused":0.21763710679046155,"table_sim":0,"col_score":0.5440927669761538},{"table":"warehouse_locations","fused":0.21567047463502462,"table_sim":0,"col_score":0.5391761865875615},{"table":"stock_transfers","fused":0.1565544160853886,"table_sim":0,"col_score":0.39138604021347145},{"table":"vendor_invoices","fused":0.15609274898975792,"table_sim":0,"col_score":0.3902318724743948},{"table":"sales_orders","fused":0.15557800719497536,"table_sim":0,"col_score":0.38894501798743836}],"fk_expansion_candidates":36,"fk_expansion_added":1,"fk_expansion_blocked_count":33,"fk_expansion_blocked":[{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"project_budgets","reason":"no_evidence"},{"table":"project_budgets","reason":"no_evidence"},{"table":"project_budgets","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"project_milestones","reason":"no_evidence"},{"table":"project_milestones","reason":"no_evidence"},{"table":"project_milestones","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"task_assignments","reason":"already_selected"},{"table":"task_assignments","reason":"already_selected"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":35,"total_retrieval_latency_ms":42,"sql_generated":"SELECT DISTINCT os.name AS stage_name FROM public.sales_opportunities so JOIN public.opportunity_stages os ON so.stage_id = os.stage_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":6,"total_latency_ms":736}
{"timestamp":"2026-01-29T21:27:43.566Z","query_id":"3addf295-9507-49cb-b84c-0aa40e061e3a","question":"List all countries in the system","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["countries","states_provinces","currencies","tax_rates","sales_territories","fiscal_periods","opportunity_stages","bank_transactions","sales_regions","cities","bank_accounts"],"tables_from_table_retrieval":5,"tables_from_column_only":19,"tables_from_fk_expansion":1,"table_scores":[{"table":"countries","similarity":0.7023951106153551},{"table":"countries","similarity":0.7023951106153551},{"table":"countries","similarity":0.7008865097920517},{"table":"states_provinces","similarity":0.6734638308582259},{"table":"states_provinces","similarity":0.6591125545328295},{"table":"states_provinces","similarity":0.6591125545328295},{"table":"tax_rates","similarity":0.6116670532927957},{"table":"tax_rates","similarity":0.6061652945068768},{"table":"tax_rates","similarity":0.6061652945068768},{"table":"currencies","similarity":0.6020049493436493},{"table":"currencies","similarity":0.6020049493436493},{"table":"sales_territories","similarity":0.5947794602061558},{"table":"sales_territories","similarity":0.5849505696482399},{"table":"sales_territories","similarity":0.5849505696482399},{"table":"currencies","similarity":0.5771716778997639}],"column_hits_per_table":{"countries":4,"states_provinces":4,"tax_rates":3,"sales_regions":3,"currencies":5,"sales_territories":3,"cities":2,"fiscal_periods":5,"departments":1,"opportunity_stages":3,"bank_accounts":2,"certifications":1,"customers":1,"bank_transactions":2,"chart_of_accounts":2,"purchase_orders":1,"depreciation_schedules":1,"asset_categories":1,"employee_certifications":1,"budgets":1,"purchase_requisitions":1,"business_units":1,"sales_orders":1,"units_of_measure":1},"top_columns_per_table":{"countries":[{"column":"iso_code","similarity":0.7083775622560948},{"column":"country_id","similarity":0.7028095022039754},{"column":"name","similarity":0.6970026208946949}],"states_provinces":[{"column":"country_id","similarity":0.6563023532078734},{"column":"abbreviation","similarity":0.610560847165871},{"column":"state_id","similarity":0.6086767321787677}],"tax_rates":[{"column":"country_id","similarity":0.6387496649533285},{"column":"is_active","similarity":0.5264660070125073},{"column":"tax_type","similarity":0.5228388468873347}],"sales_regions":[{"column":"region_id","similarity":0.5880376169487528},{"column":"name","similarity":0.5823393740796537},{"column":"target_revenue","similarity":0.5801802361991993}],"currencies":[{"column":"code","similarity":0.5822359917761808},{"column":"symbol","similarity":0.581336012492315},{"column":"currency_id","similarity":0.5776652580200841}],"sales_territories":[{"column":"territory_id","similarity":0.579860320592295},{"column":"region_id","similarity":0.5750186636565423},{"column":"name","similarity":0.5543913807302997}],"cities":[{"column":"state_id","similarity":0.561394466233867},{"column":"postal_code","similarity":0.5370910514815247}],"fiscal_periods":[{"column":"period_id","similarity":0.5496379201904278},{"column":"period_number","similarity":0.5424020784794457},{"column":"is_closed","similarity":0.5331943381268962}],"departments":[{"column":"budget","similarity":0.548192913887592}],"opportunity_stages":[{"column":"is_won","similarity":0.5424096057947908},{"column":"is_closed","similarity":0.5277608595146904},{"column":"stage_id","similarity":0.5252744287271072}],"bank_accounts":[{"column":"currency_id","similarity":0.5421220565667533},{"column":"account_number","similarity":0.5251662683345438}],"certifications":[{"column":"issuing_body","similarity":0.5363419232957559}],"customers":[{"column":"currency_id","similarity":0.5360168510784518}],"bank_transactions":[{"column":"reconciled","similarity":0.5347524839098835},{"column":"reference","similarity":0.522643358832243}],"chart_of_accounts":[{"column":"account_number","similarity":0.5329009773739953},{"column":"is_active","similarity":0.5235896571283579}],"purchase_orders":[{"column":"total","similarity":0.5290507808378154}],"depreciation_schedules":[{"column":"depreciation_method","similarity":0.5287294649500551}],"asset_categories":[{"column":"depreciation_method","similarity":0.5276413708583213}],"employee_certifications":[{"column":"certificate_number","similarity":0.5267762383677346}],"budgets":[{"column":"total_amount","similarity":0.5266785560945311}],"purchase_requisitions":[{"column":"requisition_number","similarity":0.5257685863079752}],"business_units":[{"column":"is_active","similarity":0.523602018511161}],"sales_orders":[{"column":"total","similarity":0.5224556777614774}],"units_of_measure":[{"column":"conversion_factor","similarity":0.5222786094381444}]},"fused_scores":[{"table":"countries","fused":0.8427695063608152,"table_sim":0.7008865097920517,"col_score":1.0555940012139602},{"table":"states_provinces","fused":0.7315742010351484,"table_sim":0.6591125545328295,"col_score":0.8402666707886267},{"table":"currencies","fused":0.6954646059487937,"table_sim":0.5771716778997639,"col_score":0.8729039980223383},{"table":"tax_rates","fused":0.6622596685525259,"table_sim":0.6061652945068768,"col_score":0.7464012296209996},{"table":"sales_territories","fused":0.5938338444667024,"table_sim":0.5849505696482399,"col_score":0.6071587566943962},{"table":"fiscal_periods","fused":0.3235996990171575,"table_sim":0,"col_score":0.8089992475428938},{"table":"opportunity_stages","fused":0.32251601422085446,"table_sim":0,"col_score":0.8062900355521361},{"table":"bank_transactions","fused":0.318429665330402,"table_sim":0,"col_score":0.796074163326005},{"table":"sales_regions","fused":0.31439736085250514,"table_sim":0,"col_score":0.7859934021312628},{"table":"cities","fused":0.29343164586535125,"table_sim":0,"col_score":0.7335791146633781},{"table":"chart_of_accounts","fused":0.28646294294756824,"table_sim":0,"col_score":0.7161573573689206},{"table":"bank_accounts","fused":0.285963595253163,"table_sim":0,"col_score":0.7149089881329075},{"table":"departments","fused":0.2192771655550368,"table_sim":0,"col_score":0.548192913887592},{"table":"certifications","fused":0.21453676931830237,"table_sim":0,"col_score":0.5363419232957559},{"table":"purchase_orders","fused":0.21162031233512618,"table_sim":0,"col_score":0.5290507808378154}],"fk_expansion_candidates":30,"fk_expansion_added":1,"fk_expansion_blocked_count":27,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"bank_accounts","reason":"already_selected"},{"table":"bank_accounts","reason":"already_selected"},{"table":"budget_lines","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":27,"total_retrieval_latency_ms":35,"sql_generated":"SELECT c.name AS country_name FROM countries c;","tables_used_in_sql":[],"explain_result":"success","rows_returned":10,"total_latency_ms":307}
{"timestamp":"2026-01-29T21:27:43.874Z","query_id":"cbdb5a15-9704-4bdb-a907-758f71c1ad30","question":"How many departments are there?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["departments","inventory_levels","employees","sales_territories","positions","budgets","cost_centers","warehouse_locations","asset_locations","asset_categories","employee_certifications","sales_orders"],"tables_from_table_retrieval":7,"tables_from_column_only":16,"tables_from_fk_expansion":2,"table_scores":[{"table":"departments","similarity":0.6535557627991134},{"table":"departments","similarity":0.6535557627991134},{"table":"departments","similarity":0.6407681888721862},{"table":"positions","similarity":0.5959740852224922},{"table":"positions","similarity":0.5959740852224922},{"table":"positions","similarity":0.5909863911053447},{"table":"cost_centers","similarity":0.574249226454042},{"table":"inventory_levels","similarity":0.5635818909554858},{"table":"cost_centers","similarity":0.562339325750535},{"table":"cost_centers","similarity":0.562339325750535},{"table":"budgets","similarity":0.5602507290061229},{"table":"sales_territories","similarity":0.5569437466660422},{"table":"employees","similarity":0.5540635075766074},{"table":"sales_territories","similarity":0.5531933158048384},{"table":"sales_territories","similarity":0.5531933158048384}],"column_hits_per_table":{"departments":6,"positions":1,"budgets":1,"purchase_requisitions":1,"cost_centers":1,"employees":3,"warehouse_locations":4,"inventory_levels":5,"sales_orders":2,"business_units":2,"employee_certifications":1,"countries":2,"receipt_lines":1,"asset_categories":4,"sales_territories":2,"goods_receipts":1,"asset_locations":4,"states_provinces":3,"product_categories":2,"journal_entries":1,"chart_of_accounts":1,"sales_regions":1,"inventory_transactions":1},"top_columns_per_table":{"departments":[{"column":"name","similarity":0.678380475338454},{"column":"department_id","similarity":0.6593894511959907},{"column":"budget","similarity":0.631673223767257}],"positions":[{"column":"department_id","similarity":0.6072106973795759}],"budgets":[{"column":"department_id","similarity":0.5890663072722551}],"purchase_requisitions":[{"column":"department_id","similarity":0.5855616262286726}],"cost_centers":[{"column":"department_id","similarity":0.5801677807148357}],"employees":[{"column":"department_id","similarity":0.5766911086411527},{"column":"phone","similarity":0.5295780565782041},{"column":"employee_number","similarity":0.5251671661617511}],"warehouse_locations":[{"column":"capacity","similarity":0.5507916811505368},{"column":"aisle","similarity":0.5346342650807901},{"column":"bin","similarity":0.5344635750630128}],"inventory_levels":[{"column":"quantity_available","similarity":0.5467954154024948},{"column":"location_id","similarity":0.532130309929655},{"column":"quantity_reserved","similarity":0.5279718840166341}],"sales_orders":[{"column":"order_number","similarity":0.5423432633706802},{"column":"status","similarity":0.5226058429697297}],"business_units":[{"column":"is_active","similarity":0.5413660134598213},{"column":"name","similarity":0.5225405146150363}],"employee_certifications":[{"column":"certificate_number","similarity":0.5375188956698979}],"countries":[{"column":"name","similarity":0.5369300526104707},{"column":"iso_code","similarity":0.5206752985321579}],"receipt_lines":[{"column":"location_id","similarity":0.5363959514134431}],"asset_categories":[{"column":"category_id","similarity":0.5357603627459196},{"column":"depreciation_method","similarity":0.5284195914126985},{"column":"name","similarity":0.5197745476582827}],"sales_territories":[{"column":"territory_id","similarity":0.5346785292416978},{"column":"name","similarity":0.5288174476965474}],"goods_receipts":[{"column":"receipt_number","similarity":0.5337386452781889}],"asset_locations":[{"column":"room","similarity":0.5330969405978414},{"column":"description","similarity":0.5283506129509129},{"column":"building","similarity":0.5225884931150223}],"states_provinces":[{"column":"abbreviation","similarity":0.5328751078215296},{"column":"name","similarity":0.5263993354834775},{"column":"country_id","similarity":0.5203449985844515}],"product_categories":[{"column":"is_active","similarity":0.5291272971983432},{"column":"category_id","similarity":0.5230748940289889}],"journal_entries":[{"column":"entry_number","similarity":0.5229571409622702}],"chart_of_accounts":[{"column":"account_number","similarity":0.522049128691497}],"sales_regions":[{"column":"name","similarity":0.5218640467095127}],"inventory_transactions":[{"column":"location_id","similarity":0.52026154765506}]},"fused_scores":[{"table":"departments","fused":0.7321034693775981,"table_sim":0.6407681888721862,"col_score":0.8691063901357159},{"table":"inventory_levels","fused":0.6624616775376162,"table_sim":0.5635818909554858,"col_score":0.8107813574108118},{"table":"employees","fused":0.6493027604095962,"table_sim":0.5540635075766074,"col_score":0.7921616396590796},{"table":"sales_territories","fused":0.555660420348095,"table_sim":0.5531933158048384,"col_score":0.55936107716298},{"table":"positions","fused":0.524610829929488,"table_sim":0.5909863911053447,"col_score":0.4250474881657031},{"table":"budgets","fused":0.5010890034399051,"table_sim":0.5602507290061229,"col_score":0.4123464150905785},{"table":"cost_centers","fused":0.499850574050475,"table_sim":0.562339325750535,"col_score":0.40611744650038495},{"table":"warehouse_locations","fused":0.32724352547637275,"table_sim":0,"col_score":0.8181088136909318},{"table":"asset_locations","fused":0.3177564748621411,"table_sim":0,"col_score":0.7943911871553526},{"table":"asset_categories","fused":0.3151618766771569,"table_sim":0,"col_score":0.7879046916928921},{"table":"sales_orders","fused":0.29010212336403424,"table_sim":0,"col_score":0.7252553084100856},{"table":"states_provinces","fused":0.2868459500962987,"table_sim":0,"col_score":0.7171148752407467},{"table":"countries","fused":0.2834403267783291,"table_sim":0,"col_score":0.7086008169458227},{"table":"business_units","fused":0.22473815581485504,"table_sim":0,"col_score":0.5618453895371376},{"table":"product_categories","fused":0.2213861283795945,"table_sim":0,"col_score":0.5534653209489863}],"fk_expansion_candidates":111,"fk_expansion_added":2,"fk_expansion_blocked_count":96,"fk_expansion_blocked":[{"table":"employee_training","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"business_units","reason":"max_tables"},{"table":"project_resources","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"business_units","reason":"max_tables"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"max_tables"},{"table":"employee_certifications","reason":"already_selected"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"journal_entries","reason":"max_tables"},{"table":"timesheets","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"journal_entries","reason":"max_tables"},{"table":"project_expenses","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"employee_certifications","reason":"already_selected"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"already_selected"},{"table":"goods_receipts","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"goods_receipts","reason":"max_tables"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"business_units","reason":"max_tables"},{"table":"timesheets","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_orders","reason":"already_selected"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":41,"total_retrieval_latency_ms":49,"sql_generated":"SELECT COUNT(*) FROM departments;","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":359}
{"timestamp":"2026-01-29T21:27:44.234Z","query_id":"470e1518-ae39-4395-8a74-c36449de8eb4","question":"List all units of measure","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["units_of_measure","products","business_units","currencies","sales_regions","requisition_lines","purchase_orders","sales_orders","order_lines","vendor_invoice_lines","adjustment_lines","inventory_levels"],"tables_from_table_retrieval":7,"tables_from_column_only":19,"tables_from_fk_expansion":2,"table_scores":[{"table":"units_of_measure","similarity":0.8089934324181249},{"table":"units_of_measure","similarity":0.7895937174937386},{"table":"units_of_measure","similarity":0.7895937174937386},{"table":"products","similarity":0.6263866411837252},{"table":"business_units","similarity":0.6082946070315649},{"table":"products","similarity":0.6051913757119329},{"table":"products","similarity":0.6051913757119329},{"table":"business_units","similarity":0.5900234669630597},{"table":"business_units","similarity":0.5900234669630597},{"table":"currencies","similarity":0.5785280842826401},{"table":"currencies","similarity":0.5720700199289973},{"table":"currencies","similarity":0.5720700199289973},{"table":"sales_regions","similarity":0.5709271404332362},{"table":"sales_territories","similarity":0.5693966691739235},{"table":"countries","similarity":0.5676275319870521}],"column_hits_per_table":{"units_of_measure":5,"products":3,"requisition_lines":3,"business_units":5,"purchase_orders":3,"sales_orders":3,"product_suppliers":1,"departments":1,"inventory_transactions":1,"sales_regions":1,"currencies":1,"order_lines":3,"vendor_invoice_lines":2,"po_lines":2,"quote_lines":2,"adjustment_lines":3,"inventory_levels":3,"reorder_rules":1,"asset_categories":1,"transfer_lines":2,"tax_rates":1,"project_milestones":1,"budgets":1,"receipt_lines":1},"top_columns_per_table":{"units_of_measure":[{"column":"abbreviation","similarity":0.7905971303186856},{"column":"conversion_factor","similarity":0.7833828440035688},{"column":"name","similarity":0.7549748821453383}],"products":[{"column":"uom_id","similarity":0.7018268610085459},{"column":"unit_cost","similarity":0.6357703641175493},{"column":"weight","similarity":0.597521277353181}],"requisition_lines":[{"column":"estimated_unit_cost","similarity":0.6362527169972213},{"column":"quantity","similarity":0.608908951408363},{"column":"estimated_total","similarity":0.598798666730362}],"business_units":[{"column":"unit_id","similarity":0.6283846620229621},{"column":"name","similarity":0.6160237054357993},{"column":"parent_unit_id","similarity":0.6074989732588798}],"purchase_orders":[{"column":"total","similarity":0.6147119133982193},{"column":"tax_amount","similarity":0.6002595814679341},{"column":"subtotal","similarity":0.5887334871771862}],"sales_orders":[{"column":"total","similarity":0.606574371601994},{"column":"tax_amount","similarity":0.592411431937674},{"column":"subtotal","similarity":0.585337724387252}],"product_suppliers":[{"column":"unit_cost","similarity":0.6058427693449309}],"departments":[{"column":"budget","similarity":0.6046532256680471}],"inventory_transactions":[{"column":"quantity","similarity":0.6037555563643355}],"sales_regions":[{"column":"target_revenue","similarity":0.6026638163293001}],"currencies":[{"column":"exchange_rate","similarity":0.6025841949257517}],"order_lines":[{"column":"unit_price","similarity":0.6016699280890015},{"column":"quantity","similarity":0.5822554877944045},{"column":"line_total","similarity":0.5819165003498858}],"vendor_invoice_lines":[{"column":"unit_cost","similarity":0.6013213563918418},{"column":"quantity","similarity":0.57804483639951}],"po_lines":[{"column":"unit_cost","similarity":0.597312540023666},{"column":"quantity","similarity":0.5779166241917584}],"quote_lines":[{"column":"unit_price","similarity":0.5965595055733411},{"column":"quantity","similarity":0.5837858568841348}],"adjustment_lines":[{"column":"quantity_before","similarity":0.5945081677052466},{"column":"quantity_change","similarity":0.5890466100435946},{"column":"quantity_after","similarity":0.587875110907794}],"inventory_levels":[{"column":"quantity_available","similarity":0.5904376058765937},{"column":"quantity_reserved","similarity":0.5894690175037719},{"column":"quantity_on_hand","similarity":0.5808299611130434}],"reorder_rules":[{"column":"reorder_quantity","similarity":0.5875427358229924}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.5860444284970066}],"transfer_lines":[{"column":"quantity_transferred","similarity":0.5836411952827008},{"column":"quantity_requested","similarity":0.577863082344162}],"tax_rates":[{"column":"rate","similarity":0.5831694594676794}],"project_milestones":[{"column":"amount","similarity":0.5831155463251225}],"budgets":[{"column":"total_amount","similarity":0.5816261216703643}],"receipt_lines":[{"column":"quantity_received","similarity":0.5799887522477924}]},"fused_scores":[{"table":"units_of_measure","fused":0.9466716514244312,"table_sim":0.7895937174937386,"col_score":1.18228855232047},{"table":"products","fused":0.7369272265448157,"table_sim":0.6051913757119329,"col_score":0.9345310027941398},{"table":"business_units","fused":0.6162051043052771,"table_sim":0.5900234669630597,"col_score":0.6554775603186032},{"table":"currencies","fused":0.5842756899276991,"table_sim":0.5720700199289973,"col_score":0.6025841949257517},{"table":"sales_regions","fused":0.5836218107916618,"table_sim":0.5709271404332362,"col_score":0.6026638163293001},{"table":"requisition_lines","fused":0.37628287708056113,"table_sim":0,"col_score":0.9407071927014028},{"table":"purchase_orders","fused":0.3659366816528746,"table_sim":0,"col_score":0.9148417041321864},{"table":"sales_orders","fused":0.3611120350283324,"table_sim":0,"col_score":0.902780087570831},{"table":"order_lines","fused":0.3571190687944816,"table_sim":0,"col_score":0.8927976719862039},{"table":"vendor_invoice_lines","fused":0.3561375098366387,"table_sim":0,"col_score":0.8903437745915967},{"table":"adjustment_lines","fused":0.35561258909081755,"table_sim":0,"col_score":0.8890314727270439},{"table":"quote_lines","fused":0.35538097360616344,"table_sim":0,"col_score":0.8884524340154085},{"table":"po_lines","fused":0.35450834084781807,"table_sim":0,"col_score":0.8862708521195451},{"table":"inventory_levels","fused":0.35406884585139187,"table_sim":0,"col_score":0.8851721146284797},{"table":"transfer_lines","fused":0.3490290945819127,"table_sim":0,"col_score":0.8725727364547817}],"fk_expansion_candidates":66,"fk_expansion_added":2,"fk_expansion_blocked_count":42,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"already_selected"},{"table":"adjustment_lines","reason":"already_selected"},{"table":"bank_accounts","reason":"no_evidence"},{"table":"bank_accounts","reason":"no_evidence"},{"table":"bank_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"inventory_levels","reason":"already_selected"},{"table":"inventory_levels","reason":"already_selected"},{"table":"inventory_transactions","reason":"max_tables"},{"table":"inventory_transactions","reason":"max_tables"},{"table":"inventory_transactions","reason":"max_tables"},{"table":"po_lines","reason":"max_tables"},{"table":"po_lines","reason":"max_tables"},{"table":"po_lines","reason":"max_tables"},{"table":"product_categories","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"product_suppliers","reason":"max_tables"},{"table":"product_suppliers","reason":"max_tables"},{"table":"product_suppliers","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"quote_lines","reason":"max_tables"},{"table":"quote_lines","reason":"max_tables"},{"table":"quote_lines","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_territories","reason":"max_tables"},{"table":"sales_territories","reason":"max_tables"},{"table":"sales_territories","reason":"max_tables"},{"table":"transfer_lines","reason":"max_tables"},{"table":"transfer_lines","reason":"max_tables"},{"table":"transfer_lines","reason":"max_tables"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":20,"total_retrieval_latency_ms":27,"sql_generated":"SELECT uom.name AS unit_measure, uom.abbreviation AS abbreviation FROM units_of_measure uom;","tables_used_in_sql":[],"explain_result":"success","rows_returned":11,"total_latency_ms":521}
{"timestamp":"2026-01-29T21:27:44.755Z","query_id":"62fbcbcc-4dc0-415b-9f23-f1dc882c58a5","question":"What fiscal years exist in the system?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["fiscal_years","fiscal_periods","budgets","budget_lines","journal_entries","depreciation_schedules","project_expenses","depreciation_entries","project_budgets","departments","projects"],"tables_from_table_retrieval":5,"tables_from_column_only":14,"tables_from_fk_expansion":1,"table_scores":[{"table":"fiscal_years","similarity":0.8183387248728355},{"table":"fiscal_years","similarity":0.8183387248728355},{"table":"fiscal_years","similarity":0.7923960498118316},{"table":"fiscal_periods","similarity":0.7699028512495149},{"table":"fiscal_periods","similarity":0.7699028512495149},{"table":"fiscal_periods","similarity":0.7616670856526071},{"table":"budgets","similarity":0.6929504016420824},{"table":"budgets","similarity":0.6929504016420824},{"table":"budgets","similarity":0.6911637589323553},{"table":"journal_entries","similarity":0.6311027258951736},{"table":"journal_entries","similarity":0.6311027258951736},{"table":"journal_entries","similarity":0.6269724979465695},{"table":"budget_lines","similarity":0.6265695821327767},{"table":"budget_lines","similarity":0.6265695821327767},{"table":"budget_lines","similarity":0.6218203134963756}],"column_hits_per_table":{"fiscal_years":5,"fiscal_periods":7,"budgets":8,"budget_lines":2,"depreciation_entries":3,"journal_entries":1,"depreciation_schedules":7,"departments":1,"project_expenses":2,"tax_rates":1,"project_budgets":5,"goods_receipts":1,"project_milestones":1,"projects":1,"timesheet_entries":1,"certifications":1,"inventory_levels":1,"asset_categories":1,"performance_reviews":1},"top_columns_per_table":{"fiscal_years":[{"column":"year","similarity":0.7902938308136325},{"column":"start_date","similarity":0.7844335948238378},{"column":"is_closed","similarity":0.7638424844354721}],"fiscal_periods":[{"column":"start_date","similarity":0.7601567095836461},{"column":"period_number","similarity":0.7434306851749984},{"column":"fiscal_year_id","similarity":0.7373948668168524}],"budgets":[{"column":"fiscal_year_id","similarity":0.7068934556378452},{"column":"status","similarity":0.6300839143318829},{"column":"created_at","similarity":0.6147789265228972}],"budget_lines":[{"column":"period_id","similarity":0.6839294330886287},{"column":"amount","similarity":0.5950811318817956}],"depreciation_entries":[{"column":"period_id","similarity":0.6671048533605741},{"column":"entry_date","similarity":0.6166792618330323},{"column":"accumulated_depreciation","similarity":0.5915536252801723}],"journal_entries":[{"column":"period_id","similarity":0.6645913597158091}],"depreciation_schedules":[{"column":"start_date","similarity":0.6314787914062867},{"column":"annual_amount","similarity":0.6313190612846479},{"column":"useful_life_months","similarity":0.6308778018363276}],"departments":[{"column":"budget","similarity":0.6263454768284962}],"project_expenses":[{"column":"expense_date","similarity":0.6141262646464515},{"column":"is_billable","similarity":0.5998077038798406}],"tax_rates":[{"column":"is_active","similarity":0.6079363851045628}],"project_budgets":[{"column":"category","similarity":0.6067101243827773},{"column":"actual_amount","similarity":0.6035940113028686},{"column":"planned_amount","similarity":0.5909686825338804}],"goods_receipts":[{"column":"receipt_date","similarity":0.5995701019739215}],"project_milestones":[{"column":"is_billable","similarity":0.5993047255562765}],"projects":[{"column":"budget","similarity":0.598827943777881}],"timesheet_entries":[{"column":"is_billable","similarity":0.5944565914670504}],"certifications":[{"column":"validity_years","similarity":0.5933814278726485}],"inventory_levels":[{"column":"last_count_date","similarity":0.5777729074188763}],"asset_categories":[{"column":"useful_life_years","similarity":0.5760847255808716}],"performance_reviews":[{"column":"review_period_start","similarity":0.5749621953817389}]},"fused_scores":[{"table":"fiscal_years","fused":0.9484418811773195,"table_sim":0.7923960498118316,"col_score":1.1825106282255513},{"table":"fiscal_periods","fused":0.9097490722600224,"table_sim":0.7616670856526071,"col_score":1.1318720521711454},{"table":"budgets","fused":0.7755758986289861,"table_sim":0.6911637589323553,"col_score":0.9021941081739324},{"table":"budget_lines","fused":0.7068747614829516,"table_sim":0.6218203134963756,"col_score":0.8344564334628156},{"table":"journal_entries","fused":0.5622690794883682,"table_sim":0.6269724979465695,"col_score":0.46521395180106634},{"table":"depreciation_schedules","fused":0.3788553288194443,"table_sim":0,"col_score":0.9471383220486107},{"table":"project_expenses","fused":0.3656120466345487,"table_sim":0,"col_score":0.9140301165863718},{"table":"depreciation_entries","fused":0.36498242978924744,"table_sim":0,"col_score":0.9124560744731185},{"table":"project_budgets","fused":0.36340285201368466,"table_sim":0,"col_score":0.9085071300342116},{"table":"departments","fused":0.2505381907313985,"table_sim":0,"col_score":0.6263454768284962},{"table":"goods_receipts","fused":0.2398280407895686,"table_sim":0,"col_score":0.5995701019739215},{"table":"project_milestones","fused":0.2397218902225106,"table_sim":0,"col_score":0.5993047255562765},{"table":"projects","fused":0.23953117751115238,"table_sim":0,"col_score":0.598827943777881},{"table":"timesheet_entries","fused":0.2377826365868202,"table_sim":0,"col_score":0.5944565914670504},{"table":"certifications","fused":0.2373525711490594,"table_sim":0,"col_score":0.5933814278726485}],"fk_expansion_candidates":24,"fk_expansion_added":1,"fk_expansion_blocked_count":21,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"projects","reason":"already_selected"},{"table":"projects","reason":"already_selected"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":14,"total_retrieval_latency_ms":20,"sql_generated":"SELECT DISTINCT f.fiscal_year_id FROM fiscal_years f LIMIT 1000;","tables_used_in_sql":[],"explain_result":"success","sqlstate":"42703","error_message":"column f.fiscal_year does not exist","autocorrect_attempted":true,"autocorrect_success":true,"autocorrect_correction":"Replaced 'fiscal_year' with 'fiscal_year_id' (prefix, score: 0.85)","autocorrect_candidates":4,"rows_returned":4,"total_latency_ms":419}
{"timestamp":"2026-01-29T21:27:45.174Z","query_id":"e361c82b-0c55-4f62-832a-da81b91c66c7","question":"What are the different asset categories?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["asset_categories","account_types","asset_locations","fixed_assets","asset_maintenance","product_categories","asset_transfers","benefit_types","project_expenses","project_budgets"],"tables_from_table_retrieval":6,"tables_from_column_only":7,"tables_from_fk_expansion":0,"table_scores":[{"table":"asset_categories","similarity":0.8168827711422647},{"table":"asset_categories","similarity":0.8134793431523083},{"table":"asset_categories","similarity":0.8134793431523083},{"table":"fixed_assets","similarity":0.6620037919617541},{"table":"asset_locations","similarity":0.6468082033879321},{"table":"asset_locations","similarity":0.6468082033879321},{"table":"account_types","similarity":0.6392335414992715},{"table":"account_types","similarity":0.6392335414992715},{"table":"asset_locations","similarity":0.6390829860060242},{"table":"account_types","similarity":0.6334397842726383},{"table":"fixed_assets","similarity":0.6332464262776372},{"table":"fixed_assets","similarity":0.6332464262776372},{"table":"product_categories","similarity":0.622177487707741},{"table":"asset_maintenance","similarity":0.621270551657517},{"table":"product_categories","similarity":0.6161228444008824}],"column_hits_per_table":{"asset_categories":5,"fixed_assets":10,"account_types":4,"product_categories":5,"asset_locations":6,"asset_transfers":5,"asset_maintenance":6,"project_expenses":1,"project_budgets":1,"depreciation_entries":1,"benefit_types":4,"inventory_transactions":1,"depreciation_schedules":1},"top_columns_per_table":{"asset_categories":[{"column":"name","similarity":0.7902231168417967},{"column":"depreciation_method","similarity":0.7641026405824345},{"column":"category_id","similarity":0.7475795784240159}],"fixed_assets":[{"column":"category_id","similarity":0.6898370099083994},{"column":"asset_tag","similarity":0.659930462800288},{"column":"description","similarity":0.629346644194807}],"account_types":[{"column":"category","similarity":0.6883084443883226},{"column":"name","similarity":0.6020433835273314},{"column":"normal_balance","similarity":0.5917412279908575}],"product_categories":[{"column":"name","similarity":0.6522085161925151},{"column":"description","similarity":0.6484645130847195},{"column":"category_id","similarity":0.631540985602705}],"asset_locations":[{"column":"description","similarity":0.6488050493910993},{"column":"building","similarity":0.6483121830299632},{"column":"floor","similarity":0.6444734391905819}],"asset_transfers":[{"column":"reason","similarity":0.6419731845624105},{"column":"asset_id","similarity":0.6224855112874936},{"column":"transfer_id","similarity":0.6060934515527893}],"asset_maintenance":[{"column":"status","similarity":0.6309357234230896},{"column":"asset_id","similarity":0.6034723424281385},{"column":"maintenance_type_id","similarity":0.6018157616864643}],"project_expenses":[{"column":"category","similarity":0.6221479187210215}],"project_budgets":[{"column":"category","similarity":0.6204340275365261}],"depreciation_entries":[{"column":"asset_id","similarity":0.6128013635594587}],"benefit_types":[{"column":"name","similarity":0.5964873863033975},{"column":"is_active","similarity":0.5870686558139139},{"column":"description","similarity":0.5863146004190054}],"inventory_transactions":[{"column":"transaction_type","similarity":0.5905534346047462}],"depreciation_schedules":[{"column":"asset_id","similarity":0.5713899455592317}]},"fused_scores":[{"table":"asset_categories","fused":0.9391952629822058,"table_sim":0.8134793431523083,"col_score":1.1277691427270522},{"table":"account_types","fused":0.7737354939170835,"table_sim":0.6334397842726383,"col_score":0.9841790583837513},{"table":"asset_locations","fused":0.7716693526537162,"table_sim":0.6390829860060242,"col_score":0.9705489026252541},{"table":"fixed_assets","fused":0.7665405274107377,"table_sim":0.6332464262776372,"col_score":0.9664816791103885},{"table":"asset_maintenance","fused":0.6938376694491932,"table_sim":0.621270551657517,"col_score":0.8026883461367075},{"table":"product_categories","fused":0.6430771230062944,"table_sim":0.6161228444008824,"col_score":0.6835085409144124},{"table":"asset_transfers","fused":0.3439372454052133,"table_sim":0,"col_score":0.8598431135130332},{"table":"benefit_types","fused":0.3140060282096114,"table_sim":0,"col_score":0.7850150705240284},{"table":"project_expenses","fused":0.2488591674884086,"table_sim":0,"col_score":0.6221479187210215},{"table":"project_budgets","fused":0.24817361101461044,"table_sim":0,"col_score":0.6204340275365261},{"table":"inventory_transactions","fused":0.23622137384189848,"table_sim":0,"col_score":0.5905534346047462},{"table":"depreciation_entries","fused":0.17158438179664845,"table_sim":0,"col_score":0.4289609544916211},{"table":"depreciation_schedules","fused":0.15998918475658488,"table_sim":0,"col_score":0.3999729618914622}],"fk_expansion_candidates":30,"fk_expansion_added":0,"fk_expansion_blocked_count":30,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":14,"total_retrieval_latency_ms":20,"sql_generated":"SELECT DISTINCT ac.name FROM asset_categories AS ac;","tables_used_in_sql":[],"explain_result":"success","rows_returned":7,"total_latency_ms":319}
{"timestamp":"2026-01-29T21:27:45.493Z","query_id":"38323bf6-142a-4609-9bea-62fb44c64877","question":"Find employees who have been with the company for more than 5 years and earn above $100,000","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_salaries","employees","employee_certifications","employee_benefits","project_expenses","employment_history","sales_quotes","employee_training","positions","asset_transfers","budgets","certifications"],"tables_from_table_retrieval":7,"tables_from_column_only":14,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_salaries","similarity":0.6654254442281295},{"table":"employee_salaries","similarity":0.6654254442281295},{"table":"employee_salaries","similarity":0.6596309142898193},{"table":"employees","similarity":0.6117387326317625},{"table":"employee_certifications","similarity":0.6063101517291073},{"table":"employees","similarity":0.606186516761946},{"table":"employees","similarity":0.606186516761946},{"table":"employment_history","similarity":0.6006272540139823},{"table":"employee_certifications","similarity":0.5953253092667586},{"table":"employee_certifications","similarity":0.5953253092667586},{"table":"employee_benefits","similarity":0.588385638564704},{"table":"sales_quotes","similarity":0.5847288131119626},{"table":"employment_history","similarity":0.5816250485632297},{"table":"employment_history","similarity":0.5816250485632297},{"table":"project_expenses","similarity":0.5811440306100932}],"column_hits_per_table":{"employees":12,"employee_salaries":7,"positions":1,"employee_benefits":4,"employee_certifications":4,"employee_training":3,"project_expenses":2,"employment_history":3,"sales_opportunities":1,"certifications":1,"sales_territories":1,"sales_regions":1,"departments":1,"asset_maintenance":1,"performance_reviews":1,"stock_transfers":1,"asset_transfers":2,"budgets":1,"business_units":1,"sales_quotes":1,"fixed_assets":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.6634350719038632},{"column":"employee_number","similarity":0.6178594752574701},{"column":"phone","similarity":0.6028489163745482}],"employee_salaries":[{"column":"effective_date","similarity":0.6325147223182844},{"column":"amount","similarity":0.627965316071432},{"column":"change_reason","similarity":0.6266782573270714}],"positions":[{"column":"max_salary","similarity":0.6112158084495339}],"employee_benefits":[{"column":"coverage_level","similarity":0.5965564678891593},{"column":"employee_id","similarity":0.5947734668013144},{"column":"end_date","similarity":0.5815712638966307}],"employee_certifications":[{"column":"employee_id","similarity":0.5958865176403652},{"column":"certificate_number","similarity":0.5893732822005266},{"column":"expiry_date","similarity":0.5756670437109045}],"employee_training":[{"column":"score","similarity":0.594787770669282},{"column":"status","similarity":0.5774230731413645},{"column":"employee_id","similarity":0.5759810499755345}],"project_expenses":[{"column":"approved_by","similarity":0.58905654304545},{"column":"employee_id","similarity":0.5854824682576782}],"employment_history":[{"column":"company_name","similarity":0.5869895260528193},{"column":"employee_id","similarity":0.5858925427082532},{"column":"reason_for_leaving","similarity":0.5712660305823464}],"sales_opportunities":[{"column":"owner_id","similarity":0.5856823321086454}],"certifications":[{"column":"validity_years","similarity":0.5840712968289695}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.579938073636457}],"sales_regions":[{"column":"manager_id","similarity":0.5798434571294604}],"departments":[{"column":"manager_id","similarity":0.5782009360695254}],"asset_maintenance":[{"column":"performed_by","similarity":0.576890099577467}],"performance_reviews":[{"column":"employee_id","similarity":0.5764391015238134}],"stock_transfers":[{"column":"created_by","similarity":0.5750810763105169}],"asset_transfers":[{"column":"from_employee_id","similarity":0.5737448429559486},{"column":"to_employee_id","similarity":0.5721019443631485}],"budgets":[{"column":"approved_by","similarity":0.5736402980527732}],"business_units":[{"column":"manager_id","similarity":0.5724467750107093}],"sales_quotes":[{"column":"created_by","similarity":0.5703253266483399}],"fixed_assets":[{"column":"assigned_to","similarity":0.5702142656726066}]},"fused_scores":[{"table":"employee_salaries","fused":0.7743775007154918,"table_sim":0.6596309142898193,"col_score":0.9464973803540004},{"table":"employees","fused":0.7526578338702069,"table_sim":0.606186516761946,"col_score":0.9723648095325983},{"table":"employee_certifications","fused":0.7080779071824468,"table_sim":0.5953253092667586,"col_score":0.8772068040559788},{"table":"employee_benefits","fused":0.7079682230738122,"table_sim":0.588385638564704,"col_score":0.8873420998374746},{"table":"project_expenses","fused":0.6662765811403109,"table_sim":0.5811440306100932,"col_score":0.7939754069356373},{"table":"employment_history","fused":0.6596599750182711,"table_sim":0.5816250485632297,"col_score":0.7767123647008332},{"table":"sales_quotes","fused":0.5105283793287128,"table_sim":0.5847288131119626,"col_score":0.39922772865383793},{"table":"employee_training","fused":0.31875433850750384,"table_sim":0,"col_score":0.7968858462687596},{"table":"positions","fused":0.24448632337981357,"table_sim":0,"col_score":0.6112158084495339},{"table":"asset_transfers","fused":0.24074282823850643,"table_sim":0,"col_score":0.601857070596266},{"table":"certifications","fused":0.23362851873158783,"table_sim":0,"col_score":0.5840712968289695},{"table":"asset_maintenance","fused":0.2307560398309868,"table_sim":0,"col_score":0.576890099577467},{"table":"budgets","fused":0.22945611922110928,"table_sim":0,"col_score":0.5736402980527732},{"table":"fixed_assets","fused":0.22808570626904265,"table_sim":0,"col_score":0.5702142656726066},{"table":"sales_opportunities","fused":0.16399105299042072,"table_sim":0,"col_score":0.40997763247605173}],"fk_expansion_candidates":96,"fk_expansion_added":2,"fk_expansion_blocked_count":84,"fk_expansion_blocked":[{"table":"departments","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"budgets","reason":"already_selected"},{"table":"sales_orders","reason":"no_evidence"},{"table":"budgets","reason":"already_selected"},{"table":"benefit_types","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"certifications","reason":"already_selected"},{"table":"asset_locations","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"customers","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"sales_regions","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"already_selected"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":25,"total_retrieval_latency_ms":32,"sql_generated":"SELECT e.employee_id, CONCAT(e.first_name, ' ', e.last_name) AS employee_full_name, s.salary FROM employees e JOIN employee_salaries s ON e.employee_id = s.employee_id WHERE DATEDIFF(year, e.hire_date, CURRENT_DATE) > 5 AND s.amount > 100000 LIMIT 1000;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column s.salary does not exist","autocorrect_attempted":true,"autocorrect_success":true,"autocorrect_correction":"Replaced 'salary' with 'salary_id' (prefix, score: 0.85)","autocorrect_candidates":1,"total_latency_ms":3950,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column s.salary does not exist"}
{"timestamp":"2026-01-29T21:27:49.444Z","query_id":"4485c789-e829-4901-9358-c6e5cd1d6592","question":"List employees and their managers' names","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employees","employee_salaries","departments","business_units","employment_history","sales_regions","project_expenses","budgets","warehouses","projects","sales_territories","asset_maintenance"],"tables_from_table_retrieval":6,"tables_from_column_only":19,"tables_from_fk_expansion":2,"table_scores":[{"table":"employees","similarity":0.6739271388388655},{"table":"employees","similarity":0.6689621520411647},{"table":"employees","similarity":0.6689621520411647},{"table":"departments","similarity":0.657958333696202},{"table":"departments","similarity":0.6498039364272146},{"table":"departments","similarity":0.6498039364272146},{"table":"business_units","similarity":0.6434665187095292},{"table":"business_units","similarity":0.6434665187095292},{"table":"sales_regions","similarity":0.6410429290818445},{"table":"sales_regions","similarity":0.633988075646392},{"table":"sales_regions","similarity":0.633988075646392},{"table":"business_units","similarity":0.629302299806744},{"table":"employee_salaries","similarity":0.6291178543786463},{"table":"employment_history","similarity":0.628562523709621},{"table":"employee_salaries","similarity":0.6263125261558217}],"column_hits_per_table":{"employees":16,"departments":2,"business_units":2,"warehouses":2,"employment_history":2,"sales_regions":1,"customers":1,"projects":2,"sales_territories":2,"vendors":1,"task_assignments":1,"stock_transfers":1,"certifications":1,"vendor_contacts":1,"timesheets":1,"currencies":1,"budgets":2,"asset_maintenance":1,"employee_salaries":3,"employee_training":1,"project_expenses":2,"employee_certifications":1,"customer_contacts":1,"sales_opportunities":1,"sales_orders":1},"top_columns_per_table":{"employees":[{"column":"first_name","similarity":0.7572377984248736},{"column":"last_name","similarity":0.7537783066248029},{"column":"manager_id","similarity":0.7053594848641631}],"departments":[{"column":"manager_id","similarity":0.6924752211806645},{"column":"name","similarity":0.6697997709897372}],"business_units":[{"column":"manager_id","similarity":0.6856730724608967},{"column":"name","similarity":0.6837723472178159}],"warehouses":[{"column":"manager_id","similarity":0.6800833291521636},{"column":"name","similarity":0.6505644630634702}],"employment_history":[{"column":"company_name","similarity":0.6721699979286799},{"column":"employee_id","similarity":0.6365310228824647}],"sales_regions":[{"column":"manager_id","similarity":0.6662194599129357}],"customers":[{"column":"name","similarity":0.6637932418641942}],"projects":[{"column":"project_manager_id","similarity":0.6625014712023475},{"column":"name","similarity":0.6398539415762817}],"sales_territories":[{"column":"name","similarity":0.6500061267927694},{"column":"assigned_rep_id","similarity":0.6343602329782843}],"vendors":[{"column":"name","similarity":0.6455975520568351}],"task_assignments":[{"column":"employee_id","similarity":0.6346101050458269}],"stock_transfers":[{"column":"created_by","similarity":0.6339945505048299}],"certifications":[{"column":"name","similarity":0.6314487952628862}],"vendor_contacts":[{"column":"last_name","similarity":0.630475980530217}],"timesheets":[{"column":"employee_id","similarity":0.6293358824018015}],"currencies":[{"column":"name","similarity":0.6288836962010669}],"budgets":[{"column":"name","similarity":0.6281209064414763},{"column":"approved_by","similarity":0.6195701819199355}],"asset_maintenance":[{"column":"performed_by","similarity":0.6276189459730336}],"employee_salaries":[{"column":"employee_id","similarity":0.6275508038919575},{"column":"end_date","similarity":0.6221997161104192},{"column":"approved_by","similarity":0.6215934819128719}],"employee_training":[{"column":"employee_id","similarity":0.6274331689495648}],"project_expenses":[{"column":"employee_id","similarity":0.6273392978417786},{"column":"approved_by","similarity":0.6203248276453848}],"employee_certifications":[{"column":"employee_id","similarity":0.6267738548687827}],"customer_contacts":[{"column":"last_name","similarity":0.6264354504834614}],"sales_opportunities":[{"column":"owner_id","similarity":0.6219218812763582}],"sales_orders":[{"column":"sales_rep_id","similarity":0.6218079145108961}]},"fused_scores":[{"table":"employees","fused":0.8199993358725051,"table_sim":0.6689621520411647,"col_score":1.0465551116195153},{"table":"employee_salaries","fused":0.7489860985202351,"table_sim":0.6263125261558217,"col_score":0.9329964570668552},{"table":"departments","fused":0.677547391725478,"table_sim":0.6498039364272146,"col_score":0.7191625746728731},{"table":"business_units","fused":0.6652979687835916,"table_sim":0.629302299806744,"col_score":0.7192914722488631},{"table":"employment_history","fused":0.654459456849348,"table_sim":0.628562523709621,"col_score":0.6933048565589385},{"table":"sales_regions","fused":0.5669342941634572,"table_sim":0.633988075646392,"col_score":0.466353621939055},{"table":"project_expenses","fused":0.3359574327560029,"table_sim":0,"col_score":0.8398935818900073},{"table":"budgets","fused":0.3357649996697809,"table_sim":0,"col_score":0.8394124991744523},{"table":"warehouses","fused":0.2815023569914916,"table_sim":0,"col_score":0.703755892478729},{"table":"projects","fused":0.27507996375733673,"table_sim":0,"col_score":0.6876999093933418},{"table":"sales_territories","fused":0.2708121481189352,"table_sim":0,"col_score":0.677030370297338},{"table":"asset_maintenance","fused":0.25104757838921343,"table_sim":0,"col_score":0.6276189459730336},{"table":"customers","fused":0.18586210772197437,"table_sim":0,"col_score":0.4646552693049359},{"table":"vendors","fused":0.18076731457591383,"table_sim":0,"col_score":0.45191828643978454},{"table":"task_assignments","fused":0.17769082941283154,"table_sim":0,"col_score":0.4442270735320788}],"fk_expansion_candidates":111,"fk_expansion_added":2,"fk_expansion_blocked_count":105,"fk_expansion_blocked":[{"table":"employee_training","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"project_milestones","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"project_budgets","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"project_milestones","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"project_milestones","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"project_budgets","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"already_selected"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"project_budgets","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"sales_territories","reason":"already_selected"},{"table":"asset_maintenance","reason":"already_selected"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"already_selected"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":14,"total_retrieval_latency_ms":21,"sql_generated":"SELECT e.employee_id AS employee_id, e.first_name || ' ' || e.last_name AS employee_full_name, m.first_name || ' ' || m.last_name AS manager_full_name FROM employees e INNER JOIN employees m ON e.manager_id = m.employee_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":499,"total_latency_ms":1107}
{"timestamp":"2026-01-29T21:27:50.551Z","query_id":"561d58ac-fd89-4f3a-a40c-aa08806b01b5","question":"Which employees have pending leave requests?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["leave_requests","employees","leave_types","purchase_requisitions","employment_history","employee_benefits","employee_salaries","employee_training","timesheets","employee_certifications","goods_receipts"],"tables_from_table_retrieval":5,"tables_from_column_only":18,"tables_from_fk_expansion":1,"table_scores":[{"table":"leave_requests","similarity":0.7606150866620262},{"table":"leave_requests","similarity":0.7606150866620262},{"table":"leave_requests","similarity":0.7600790941142384},{"table":"leave_types","similarity":0.639090920933277},{"table":"leave_types","similarity":0.639090920933277},{"table":"employees","similarity":0.6318821970092333},{"table":"leave_types","similarity":0.6243053165161109},{"table":"employment_history","similarity":0.6232974261189369},{"table":"employees","similarity":0.6085401288010317},{"table":"employees","similarity":0.6085401288010317},{"table":"employment_history","similarity":0.6004981063513581},{"table":"employment_history","similarity":0.6004981063513581},{"table":"purchase_requisitions","similarity":0.5939119628114023},{"table":"purchase_requisitions","similarity":0.5862366614545421},{"table":"purchase_requisitions","similarity":0.5862366614545421}],"column_hits_per_table":{"leave_requests":10,"employee_training":2,"employees":12,"employment_history":1,"timesheets":2,"leave_types":3,"purchase_requisitions":2,"vendor_invoices":1,"sales_orders":1,"employee_benefits":2,"project_tasks":1,"projects":1,"asset_maintenance":1,"purchase_orders":1,"stock_transfers":1,"sales_quotes":1,"employee_certifications":1,"fixed_assets":1,"project_expenses":1,"task_assignments":1,"sales_territories":1,"employee_salaries":2,"goods_receipts":1},"top_columns_per_table":{"leave_requests":[{"column":"status","similarity":0.7830776046458143},{"column":"employee_id","similarity":0.7463085450818296},{"column":"days_requested","similarity":0.7340689790864129}],"employee_training":[{"column":"status","similarity":0.6497311772671878},{"column":"scheduled_date","similarity":0.5878188046675312}],"employees":[{"column":"termination_date","similarity":0.6439758798918632},{"column":"email","similarity":0.6302370362314416},{"column":"phone","similarity":0.6105363671841775}],"employment_history":[{"column":"reason_for_leaving","similarity":0.6281349204243766}],"timesheets":[{"column":"status","similarity":0.6228065407312443},{"column":"employee_id","similarity":0.5827007759709993}],"leave_types":[{"column":"is_paid","similarity":0.6211282835888098},{"column":"days_allowed","similarity":0.6132698924498841},{"column":"requires_approval","similarity":0.5944242237109155}],"purchase_requisitions":[{"column":"status","similarity":0.6119695520568783},{"column":"requested_by","similarity":0.601159001994203}],"vendor_invoices":[{"column":"status","similarity":0.6093455591888043}],"sales_orders":[{"column":"status","similarity":0.6082126415419272}],"employee_benefits":[{"column":"end_date","similarity":0.6075530366053099},{"column":"start_date","similarity":0.5763817809487223}],"project_tasks":[{"column":"status","similarity":0.5995768986335617}],"projects":[{"column":"status","similarity":0.5971196665348375}],"asset_maintenance":[{"column":"status","similarity":0.5968209441927311}],"purchase_orders":[{"column":"status","similarity":0.5936147298950667}],"stock_transfers":[{"column":"status","similarity":0.5934866614638913}],"sales_quotes":[{"column":"status","similarity":0.5914174092778713}],"employee_certifications":[{"column":"expiry_date","similarity":0.590292904422784}],"fixed_assets":[{"column":"status","similarity":0.5890922526585929}],"project_expenses":[{"column":"status","similarity":0.5861848089246922}],"task_assignments":[{"column":"employee_id","similarity":0.5826855903430118}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.58159495137349}],"employee_salaries":[{"column":"end_date","similarity":0.5809839346344203},{"column":"change_reason","similarity":0.5782073749885271}],"goods_receipts":[{"column":"received_by","similarity":0.5807179521677516}]},"fused_scores":[{"table":"leave_requests","fused":0.8949869674714441,"table_sim":0.7600790941142384,"col_score":1.0973487775072526},{"table":"employees","fused":0.7487618364836526,"table_sim":0.6085401288010317,"col_score":0.959094398007584},{"table":"leave_types","fused":0.7387759916318033,"table_sim":0.6243053165161109,"col_score":0.9104820043053419},{"table":"purchase_requisitions","fused":0.6778813349583694,"table_sim":0.5862366614545421,"col_score":0.8153483452141104},{"table":"employment_history","fused":0.6115528319805655,"table_sim":0.6004981063513581,"col_score":0.6281349204243766},{"table":"employee_benefits","fused":0.3582975708318684,"table_sim":0,"col_score":0.895743927079671},{"table":"employee_salaries","fused":0.3480350488514736,"table_sim":0,"col_score":0.870087622128684},{"table":"employee_training","fused":0.3260898866844188,"table_sim":0,"col_score":0.8152247167110469},{"table":"timesheets","fused":0.2559639400406883,"table_sim":0,"col_score":0.6399098501017207},{"table":"employee_certifications","fused":0.23611716176911363,"table_sim":0,"col_score":0.590292904422784},{"table":"goods_receipts","fused":0.23228718086710065,"table_sim":0,"col_score":0.5807179521677516},{"table":"vendor_invoices","fused":0.1706167565728652,"table_sim":0,"col_score":0.426541891432163},{"table":"sales_orders","fused":0.1702995396317396,"table_sim":0,"col_score":0.425748849079349},{"table":"project_tasks","fused":0.16788153161739727,"table_sim":0,"col_score":0.4197038290434931},{"table":"projects","fused":0.16719350662975452,"table_sim":0,"col_score":0.41798376657438624}],"fk_expansion_candidates":96,"fk_expansion_added":1,"fk_expansion_blocked_count":93,"fk_expansion_blocked":[{"table":"departments","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"goods_receipts","reason":"already_selected"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"already_selected"},{"table":"sales_territories","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":12,"total_retrieval_latency_ms":18,"sql_generated":"SELECT e.employee_id, e.first_name || ' ' || e.last_name AS employee_full_name FROM employees e JOIN leave_requests lr ON e.employee_id = lr.employee_id WHERE lr.status = 'pending' AND lr.approved_by IS NULL;","tables_used_in_sql":[],"explain_result":"success","rows_returned":242,"total_latency_ms":1085}
{"timestamp":"2026-01-29T21:27:51.636Z","query_id":"160c4e7a-644e-4822-b9a5-65d03e934eb4","question":"Show the number of employees per position title","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["positions","employees","employee_salaries","sales_territories","sales_regions","employee_certifications","employment_history","employee_benefits","employee_training","sales_opportunities"],"tables_from_table_retrieval":5,"tables_from_column_only":14,"tables_from_fk_expansion":0,"table_scores":[{"table":"positions","similarity":0.6979534676247563},{"table":"positions","similarity":0.6915534653091021},{"table":"positions","similarity":0.6915534653091021},{"table":"employee_salaries","similarity":0.6596018656539115},{"table":"employee_salaries","similarity":0.6596018656539115},{"table":"employee_salaries","similarity":0.659392658582788},{"table":"employees","similarity":0.659318915501233},{"table":"sales_territories","similarity":0.6544391487399293},{"table":"employees","similarity":0.6533237885369005},{"table":"employees","similarity":0.6533237885369005},{"table":"sales_territories","similarity":0.6489970483284497},{"table":"sales_territories","similarity":0.6489970483284497},{"table":"sales_regions","similarity":0.6428263414246281},{"table":"sales_regions","similarity":0.6307206585715829},{"table":"sales_regions","similarity":0.6307206585715829}],"column_hits_per_table":{"positions":6,"employees":14,"employee_salaries":6,"sales_territories":3,"employee_certifications":2,"sales_regions":1,"employment_history":3,"customer_contacts":1,"departments":1,"sales_opportunities":2,"vendor_contacts":1,"employee_benefits":2,"employee_training":2,"business_units":1,"projects":1,"task_assignments":1,"sales_orders":1,"warehouses":1,"project_resources":1},"top_columns_per_table":{"positions":[{"column":"title","similarity":0.7221299436011294},{"column":"min_salary","similarity":0.6651927143592096},{"column":"department_id","similarity":0.6570360152989476}],"employees":[{"column":"employee_number","similarity":0.7138309929767446},{"column":"salary","similarity":0.6844081973483859},{"column":"position_id","similarity":0.68398642134637}],"employee_salaries":[{"column":"amount","similarity":0.6971738165514154},{"column":"approved_by","similarity":0.6443166084961229},{"column":"effective_date","similarity":0.6438382835501887}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6556010449326051},{"column":"name","similarity":0.6120006875761033},{"column":"territory_id","similarity":0.6092167482669691}],"employee_certifications":[{"column":"certificate_number","similarity":0.6506983264603999},{"column":"employee_id","similarity":0.6216038384290737}],"sales_regions":[{"column":"manager_id","similarity":0.6432388471448376}],"employment_history":[{"column":"position","similarity":0.642007780436184},{"column":"company_name","similarity":0.6085621220790698},{"column":"employee_id","similarity":0.6029078451574368}],"customer_contacts":[{"column":"title","similarity":0.6408819361793222}],"departments":[{"column":"manager_id","similarity":0.635000868322988}],"sales_opportunities":[{"column":"owner_id","similarity":0.6321958594849902},{"column":"amount","similarity":0.6069160048032282}],"vendor_contacts":[{"column":"title","similarity":0.6298635727288079}],"employee_benefits":[{"column":"coverage_level","similarity":0.6284972802326118},{"column":"employee_id","similarity":0.6041405196036292}],"employee_training":[{"column":"status","similarity":0.6218313368875849},{"column":"score","similarity":0.6185830853610097}],"business_units":[{"column":"manager_id","similarity":0.6208049194224817}],"projects":[{"column":"project_manager_id","similarity":0.6174592088393791}],"task_assignments":[{"column":"employee_id","similarity":0.6149774272355666}],"sales_orders":[{"column":"sales_rep_id","similarity":0.6089120347247923}],"warehouses":[{"column":"manager_id","similarity":0.6081121279686315}],"project_resources":[{"column":"employee_id","similarity":0.6074616431088047}]},"fused_scores":[{"table":"positions","fused":0.836822599497755,"table_sim":0.6915534653091021,"col_score":1.0547263007807341},{"table":"employees","fused":0.8144083097825153,"table_sim":0.6533237885369005,"col_score":1.0560350916509376},{"table":"employee_salaries","fused":0.8033684434694637,"table_sim":0.659392658582788,"col_score":1.019332120799477},{"table":"sales_territories","fused":0.6586466178388537,"table_sim":0.6489970483284497,"col_score":0.6731209721044596},{"table":"sales_regions","fused":0.5585392723435043,"table_sim":0.6307206585715829,"col_score":0.4502671930013863},{"table":"employee_certifications","fused":0.34730386796423035,"table_sim":0,"col_score":0.8682596699105758},{"table":"employment_history","fused":0.3420018092655434,"table_sim":0,"col_score":0.8550045231638584},{"table":"employee_benefits","fused":0.33597858483755283,"table_sim":0,"col_score":0.839946462093882},{"table":"employee_training","fused":0.3344896213086658,"table_sim":0,"col_score":0.8362240532716644},{"table":"sales_opportunities","fused":0.33127382224918994,"table_sim":0,"col_score":0.8281845556229748},{"table":"customer_contacts","fused":0.2563527744717289,"table_sim":0,"col_score":0.6408819361793222},{"table":"vendor_contacts","fused":0.2519454290915232,"table_sim":0,"col_score":0.6298635727288079},{"table":"departments","fused":0.17780024313043663,"table_sim":0,"col_score":0.4445006078260915},{"table":"business_units","fused":0.17382537743829488,"table_sim":0,"col_score":0.4345634435957372},{"table":"projects","fused":0.17288857847502614,"table_sim":0,"col_score":0.43222144618756536}],"fk_expansion_candidates":93,"fk_expansion_added":0,"fk_expansion_blocked_count":93,"fk_expansion_blocked":[{"table":"departments","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":22,"total_retrieval_latency_ms":30,"sql_generated":"SELECT p.title AS position_title, COUNT(e.employee_id) AS num_employees FROM positions p JOIN employees e ON p.position_id = e.position_id GROUP BY p.title;","tables_used_in_sql":[],"explain_result":"success","rows_returned":40,"total_latency_ms":746}
{"timestamp":"2026-01-29T21:27:52.382Z","query_id":"f961349f-f0d9-463b-94d6-81e5e2d7b927","question":"Find employees with expiring certifications in the next 6 months","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_certifications","certifications","employee_salaries","employee_training","employees","employment_history","employee_benefits","leave_requests","fixed_assets","training_courses","timesheets"],"tables_from_table_retrieval":6,"tables_from_column_only":10,"tables_from_fk_expansion":1,"table_scores":[{"table":"employee_certifications","similarity":0.7859468856867013},{"table":"employee_certifications","similarity":0.7859468856867013},{"table":"employee_certifications","similarity":0.7706241362613744},{"table":"certifications","similarity":0.6833271623394933},{"table":"certifications","similarity":0.6833271623394933},{"table":"certifications","similarity":0.6802005917779511},{"table":"employee_training","similarity":0.6443966057658752},{"table":"employee_training","similarity":0.6443966057658752},{"table":"employee_training","similarity":0.6440443171141977},{"table":"employees","similarity":0.6304880915961747},{"table":"employees","similarity":0.6304880915961747},{"table":"employee_salaries","similarity":0.6285918606598171},{"table":"employee_salaries","similarity":0.6285918606598171},{"table":"employment_history","similarity":0.6226874481800316},{"table":"employment_history","similarity":0.6226874481800316}],"column_hits_per_table":{"employee_certifications":6,"certifications":5,"employee_benefits":4,"employee_salaries":4,"employees":11,"employee_training":7,"employment_history":3,"sales_territories":1,"fixed_assets":1,"leave_requests":2,"sales_orders":1,"sales_opportunities":1,"training_courses":1,"vendor_invoices":1,"sales_regions":1,"timesheets":1},"top_columns_per_table":{"employee_certifications":[{"column":"expiry_date","similarity":0.824890334606253},{"column":"obtained_date","similarity":0.7052846826361914},{"column":"certificate_number","similarity":0.6847532958035393}],"certifications":[{"column":"validity_years","similarity":0.6770067141369405},{"column":"issuing_body","similarity":0.6636677218690651},{"column":"name","similarity":0.6345330007966575}],"employee_benefits":[{"column":"end_date","similarity":0.6748941092120173},{"column":"start_date","similarity":0.6211708522515275},{"column":"employee_id","similarity":0.5874772340410589}],"employee_salaries":[{"column":"end_date","similarity":0.674819986050645},{"column":"effective_date","similarity":0.6257662683349675},{"column":"approved_by","similarity":0.5906622365479393}],"employees":[{"column":"termination_date","similarity":0.6651670843704476},{"column":"birth_date","similarity":0.6195817101038591},{"column":"hire_date","similarity":0.604926374835591}],"employee_training":[{"column":"status","similarity":0.6639258100882921},{"column":"completion_date","similarity":0.6483605451444736},{"column":"scheduled_date","similarity":0.6309826728136354}],"employment_history":[{"column":"end_date","similarity":0.6300394640482956},{"column":"reason_for_leaving","similarity":0.5997641082568419},{"column":"employee_id","similarity":0.5844056747410719}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6148178600700598}],"fixed_assets":[{"column":"warranty_expiry","similarity":0.6065954902035513}],"leave_requests":[{"column":"approved_by","similarity":0.6047012182000441},{"column":"employee_id","similarity":0.5848951086127372}],"sales_orders":[{"column":"sales_rep_id","similarity":0.5904629307212104}],"sales_opportunities":[{"column":"owner_id","similarity":0.5886084108060572}],"training_courses":[{"column":"duration_hours","similarity":0.588545509623843}],"vendor_invoices":[{"column":"status","similarity":0.5865666000577741}],"sales_regions":[{"column":"manager_id","similarity":0.5830602727986053}],"timesheets":[{"column":"approved_by","similarity":0.5820241143955824}]},"fused_scores":[{"table":"employee_certifications","fused":0.9333875521265641,"table_sim":0.7706241362613744,"col_score":1.1775326759243487},{"table":"certifications","fused":0.8116565850953599,"table_sim":0.6802005917779511,"col_score":1.008840575071473},{"table":"employee_salaries","fused":0.7722363644831418,"table_sim":0.6285918606598171,"col_score":0.9877031202181288},{"table":"employee_training","fused":0.7719673428890352,"table_sim":0.6440443171141977,"col_score":0.9638518815512913},{"table":"employees","fused":0.7682760307266556,"table_sim":0.6304880915961747,"col_score":0.9749579394223771},{"table":"employment_history","fused":0.7455810761787056,"table_sim":0.6226874481800316,"col_score":0.9299215181767165},{"table":"employee_benefits","fused":0.3941918141351124,"table_sim":0,"col_score":0.985479535337781},{"table":"leave_requests","fused":0.32376580248580084,"table_sim":0,"col_score":0.8094145062145021},{"table":"fixed_assets","fused":0.24263819608142054,"table_sim":0,"col_score":0.6065954902035513},{"table":"training_courses","fused":0.2354182038495372,"table_sim":0,"col_score":0.588545509623843},{"table":"timesheets","fused":0.23280964575823299,"table_sim":0,"col_score":0.5820241143955824},{"table":"sales_territories","fused":0.17214900081961673,"table_sim":0,"col_score":0.4303725020490418},{"table":"sales_orders","fused":0.1653296206019389,"table_sim":0,"col_score":0.41332405150484725},{"table":"sales_opportunities","fused":0.16481035502569602,"table_sim":0,"col_score":0.41202588756424},{"table":"vendor_invoices","fused":0.16423864801617674,"table_sim":0,"col_score":0.41059662004044184}],"fk_expansion_candidates":105,"fk_expansion_added":1,"fk_expansion_blocked_count":102,"fk_expansion_blocked":[{"table":"departments","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"leave_types","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"timesheets","reason":"already_selected"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"leave_types","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"leave_types","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"timesheets","reason":"already_selected"},{"table":"benefit_types","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":22,"total_retrieval_latency_ms":30,"sql_generated":"SELECT e.employee_id, CONCAT(e.first_name, ' ', e.last_name) AS employee_full_name, c.certification_id, ec.obtained_date, c.expiry_date\nFROM employees e\nJOIN employee_certifications ec ON e.employee_id = ec.employee_id\nJOIN certifications c ON ec.certification_id = c.certification_id\nWHERE c.expiry_date BETWEEN CURRENT_DATE AND (CURRENT_DATE + INTERVAL '6 months');","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column c.expiry_date does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":1,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":4996,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column c.expiry_date does not exist"}
{"timestamp":"2026-01-29T21:27:57.378Z","query_id":"334f30f8-210b-4327-89a6-38211d79e684","question":"What is the total sales amount by customer for 2024?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_orders","sales_quotes","purchase_orders","customers","sales_regions","sales_territories","vendor_invoices","sales_opportunities","vendor_invoice_lines","goods_receipts","order_lines","receipt_lines"],"tables_from_table_retrieval":7,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.6745457697247657},{"table":"sales_orders","similarity":0.6745457697247657},{"table":"sales_orders","similarity":0.6661782372338159},{"table":"sales_regions","similarity":0.6466539195201415},{"table":"purchase_orders","similarity":0.6425639839861694},{"table":"sales_regions","similarity":0.6391000207245879},{"table":"sales_regions","similarity":0.6391000207245879},{"table":"purchase_orders","similarity":0.6365277038136935},{"table":"purchase_orders","similarity":0.6365277038136935},{"table":"sales_quotes","similarity":0.6362675183217259},{"table":"sales_quotes","similarity":0.6362675183217259},{"table":"sales_quotes","similarity":0.6323684030188},{"table":"customers","similarity":0.6254829877818046},{"table":"goods_receipts","similarity":0.624224700776992},{"table":"sales_territories","similarity":0.6219383160682438}],"column_hits_per_table":{"sales_orders":11,"sales_quotes":8,"purchase_orders":3,"vendor_invoices":4,"sales_regions":2,"sales_opportunities":4,"budgets":1,"vendor_invoice_lines":3,"customers":5,"product_suppliers":2,"sales_territories":1,"inventory_transactions":1,"order_lines":1,"requisition_lines":1,"products":1,"employee_salaries":1,"receipt_lines":1},"top_columns_per_table":{"sales_orders":[{"column":"total","similarity":0.7267615224129526},{"column":"tax_amount","similarity":0.6768860201331778},{"column":"shipping_cost","similarity":0.6629388694517645}],"sales_quotes":[{"column":"total","similarity":0.694353474084059},{"column":"tax_amount","similarity":0.6552565219340181},{"column":"subtotal","similarity":0.6267182822036423}],"purchase_orders":[{"column":"total","similarity":0.6777199928257838},{"column":"tax_amount","similarity":0.6402978983456733},{"column":"shipping_cost","similarity":0.6243812460571962}],"vendor_invoices":[{"column":"total","similarity":0.6757800030933531},{"column":"amount_paid","similarity":0.6255444220000853},{"column":"tax_amount","similarity":0.6227458956839576}],"sales_regions":[{"column":"target_revenue","similarity":0.6672997133789248},{"column":"manager_id","similarity":0.6150592581557652}],"sales_opportunities":[{"column":"amount","similarity":0.6523518870366036},{"column":"actual_close_date","similarity":0.6234759946961155},{"column":"customer_id","similarity":0.6225457539270198}],"budgets":[{"column":"total_amount","similarity":0.6443640871252324}],"vendor_invoice_lines":[{"column":"amount","similarity":0.638640432265749},{"column":"quantity","similarity":0.6225103754226036},{"column":"unit_cost","similarity":0.6144886443515528}],"customers":[{"column":"is_active","similarity":0.6263453821128872},{"column":"payment_terms","similarity":0.6208624248875562},{"column":"customer_number","similarity":0.6199000162473296}],"product_suppliers":[{"column":"unit_cost","similarity":0.6228611719406651},{"column":"lead_time_days","similarity":0.6138713693045325}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6215934251847155}],"inventory_transactions":[{"column":"quantity","similarity":0.6213307623673536}],"order_lines":[{"column":"line_total","similarity":0.6162919437853911}],"requisition_lines":[{"column":"estimated_total","similarity":0.616233844515133}],"products":[{"column":"unit_cost","similarity":0.615179526855141}],"employee_salaries":[{"column":"amount","similarity":0.6128136846323675}],"receipt_lines":[{"column":"quantity_received","similarity":0.6105295012867741}]},"fused_scores":[{"table":"sales_orders","fused":0.8257887553321062,"table_sim":0.6661782372338159,"col_score":1.0652045324795414},{"table":"sales_quotes","fused":0.7882137358317072,"table_sim":0.6323684030188,"col_score":1.021981735051068},{"table":"purchase_orders","fused":0.7810641990876643,"table_sim":0.6365277038136935,"col_score":0.9978689419986204},{"table":"customers","fused":0.7476147658735712,"table_sim":0.6254829877818046,"col_score":0.930812433011221},{"table":"sales_regions","fused":0.7364881939281298,"table_sim":0.6391000207245879,"col_score":0.8825704537334427},{"table":"sales_territories","fused":0.5472091486926666,"table_sim":0.6219383160682438,"col_score":0.43511539762930085},{"table":"vendor_invoices","fused":0.39486118037413276,"table_sim":0,"col_score":0.9871529509353318},{"table":"sales_opportunities","fused":0.38563595375386456,"table_sim":0,"col_score":0.9640898843846614},{"table":"vendor_invoice_lines","fused":0.37995824799082034,"table_sim":0,"col_score":0.9498956199770507},{"table":"goods_receipts","fused":0.3745348204661952,"table_sim":0.624224700776992,"col_score":0},{"table":"product_suppliers","fused":0.37191874263717256,"table_sim":0,"col_score":0.9297968565929313},{"table":"budgets","fused":0.257745634850093,"table_sim":0,"col_score":0.6443640871252324},{"table":"inventory_transactions","fused":0.24853230494694145,"table_sim":0,"col_score":0.6213307623673536},{"table":"order_lines","fused":0.24651677751415646,"table_sim":0,"col_score":0.6162919437853911},{"table":"requisition_lines","fused":0.2464935378060532,"table_sim":0,"col_score":0.616233844515133}],"fk_expansion_candidates":45,"fk_expansion_added":2,"fk_expansion_blocked_count":39,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"order_lines","reason":"already_selected"},{"table":"order_lines","reason":"already_selected"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"already_selected"},{"table":"receipt_lines","reason":"already_selected"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":39,"total_retrieval_latency_ms":46,"sql_generated":"SELECT c.customer_id AS customer_id, SUM(sales_orders.subtotal + sales_quotes.subtotal) AS total_sales_amount FROM customers c JOIN sales_orders ON c.customer_id = sales_orders.customer_id WHERE EXTRACT(YEAR FROM sales_orders.order_date) = 2024 GROUP BY customer_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42883","error_message":"function year(date) does not exist","total_latency_ms":3358,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T21:28:00.736Z","query_id":"333ecce9-2779-4ada-a811-dc4967151225","question":"List the top 10 customers by total order value","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_orders","order_lines","purchase_orders","customers","vendor_invoices","product_suppliers","customer_contacts","po_lines","vendor_invoice_lines","vendors","receipt_lines","sales_quotes"],"tables_from_table_retrieval":7,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.6473006572264755},{"table":"order_lines","similarity":0.6399839764362797},{"table":"purchase_orders","similarity":0.6359216236921361},{"table":"sales_orders","similarity":0.6322789685618992},{"table":"sales_orders","similarity":0.6322789685618992},{"table":"order_lines","similarity":0.6313674438881497},{"table":"order_lines","similarity":0.6313674438881497},{"table":"purchase_orders","similarity":0.6225494231887847},{"table":"purchase_orders","similarity":0.6225494231887847},{"table":"customers","similarity":0.6198957604307753},{"table":"customers","similarity":0.603994667800392},{"table":"customers","similarity":0.603994667800392},{"table":"product_suppliers","similarity":0.5995729306104617},{"table":"vendor_invoices","similarity":0.5943908353227434},{"table":"customer_contacts","similarity":0.5842306673122464}],"column_hits_per_table":{"sales_orders":8,"purchase_orders":9,"order_lines":6,"customers":8,"vendor_invoices":3,"po_lines":4,"product_suppliers":1,"vendor_invoice_lines":3,"sales_quotes":1,"reorder_rules":1,"vendors":2,"receipt_lines":1,"customer_contacts":1,"vendor_contacts":1,"quote_lines":1},"top_columns_per_table":{"sales_orders":[{"column":"total","similarity":0.6989783838444601},{"column":"order_number","similarity":0.6685333803732707},{"column":"subtotal","similarity":0.6440170645492649}],"purchase_orders":[{"column":"total","similarity":0.6903262609210554},{"column":"po_number","similarity":0.6415427911377667},{"column":"subtotal","similarity":0.6382251563747767}],"order_lines":[{"column":"line_total","similarity":0.6750587403197648},{"column":"quantity_shipped","similarity":0.6574528419378944},{"column":"unit_price","similarity":0.6493800384208552}],"customers":[{"column":"customer_number","similarity":0.661666062123175},{"column":"phone","similarity":0.6564797570958422},{"column":"website","similarity":0.6340938119327376}],"vendor_invoices":[{"column":"total","similarity":0.6487049636317076},{"column":"subtotal","similarity":0.6036460618653252},{"column":"invoice_number","similarity":0.5951077315424751}],"po_lines":[{"column":"line_total","similarity":0.6415288139191745},{"column":"quantity_received","similarity":0.6378991363936013},{"column":"quantity","similarity":0.6200476984412968}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6409309856247254}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.6293094401462158},{"column":"amount","similarity":0.6217860311141447},{"column":"unit_cost","similarity":0.608519957652656}],"sales_quotes":[{"column":"total","similarity":0.6216495770294906}],"reorder_rules":[{"column":"max_quantity","similarity":0.6160793655093021}],"vendors":[{"column":"phone","similarity":0.6149928390714005},{"column":"vendor_number","similarity":0.5976911850670412}],"receipt_lines":[{"column":"quantity_received","similarity":0.60564498897585}],"customer_contacts":[{"column":"phone","similarity":0.6038535558458017}],"vendor_contacts":[{"column":"phone","similarity":0.5956727487995729}],"quote_lines":[{"column":"line_total","similarity":0.5920335049892667}]},"fused_scores":[{"table":"sales_orders","fused":0.7926654107495777,"table_sim":0.6322789685618992,"col_score":1.0332450740310954},{"table":"order_lines","fused":0.7803345308483746,"table_sim":0.6313674438881497,"col_score":1.0037851612887119},{"table":"purchase_orders","fused":0.7779687165092464,"table_sim":0.6225494231887847,"col_score":1.0110976564899388},{"table":"customers","fused":0.7583591769486737,"table_sim":0.603994667800392,"col_score":0.9899059406710962},{"table":"vendor_invoices","fused":0.7368456990193941,"table_sim":0.5943908353227434,"col_score":0.9505279945643702},{"table":"product_suppliers","fused":0.6161161526161671,"table_sim":0.5995729306104617,"col_score":0.6409309856247254},{"table":"customer_contacts","fused":0.5920798227256685,"table_sim":0.5842306673122464,"col_score":0.6038535558458017},{"table":"po_lines","fused":0.38419135284639006,"table_sim":0,"col_score":0.9604783821159751},{"table":"vendor_invoice_lines","fused":0.3760809822813153,"table_sim":0,"col_score":0.9402024557032882},{"table":"vendors","fused":0.36553537264196845,"table_sim":0,"col_score":0.9138384316049211},{"table":"sales_quotes","fused":0.24865983081179627,"table_sim":0,"col_score":0.6216495770294906},{"table":"reorder_rules","fused":0.24643174620372085,"table_sim":0,"col_score":0.6160793655093021},{"table":"receipt_lines","fused":0.24225799559034,"table_sim":0,"col_score":0.60564498897585},{"table":"vendor_contacts","fused":0.23826909951982916,"table_sim":0,"col_score":0.5956727487995729},{"table":"quote_lines","fused":0.23681340199570666,"table_sim":0,"col_score":0.5920335049892667}],"fk_expansion_candidates":42,"fk_expansion_added":2,"fk_expansion_blocked_count":33,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"receipt_lines","reason":"already_selected"},{"table":"receipt_lines","reason":"already_selected"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_quotes","reason":"already_selected"},{"table":"sales_quotes","reason":"already_selected"},{"table":"vendor_contacts","reason":"max_tables"},{"table":"vendor_contacts","reason":"max_tables"},{"table":"vendor_contacts","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":42,"total_retrieval_latency_ms":49,"sql_generated":"SELECT c.customer_id AS CustomerID, SUM(o.total) AS TotalOrderValue FROM customers c INNER JOIN (SELECT po.customer_id, o.order_id, p.product_id, ol.quantity, s.subtotal + t.tax_amount + s.shipping_cost AS total FROM sales_orders so INNER JOIN order_lines ol ON so.order_id = ol.order_id INNER JOIN products p ON ol.product_id = p.product_id INNER JOIN po_lines s ON ol.po_line_id = s.po_line_id INNER JOIN purchase_orders po ON s.po_id = po.po_id INNER JOIN sales_quotes sq ON po.quote_id = sq.quote_id) o ON c.customer_id = o.customer_id GROUP BY c.customer_id ORDER BY TotalOrderValue DESC LIMIT 10;","tables_used_in_sql":[],"total_latency_ms":5793,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T21:28:06.529Z","query_id":"7d143d88-f482-4bc8-81aa-4374f8008312","question":"Show sales opportunities in the Negotiation stage worth over $50,000","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["sales_opportunities","opportunity_stages","sales_quotes","sales_orders","sales_regions","vendor_invoices","purchase_orders","positions","project_milestones","sales_territories","fixed_assets","vendor_invoice_lines"],"tables_from_table_retrieval":5,"tables_from_column_only":10,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_opportunities","similarity":0.7205066192182484},{"table":"sales_opportunities","similarity":0.7205066192182484},{"table":"sales_opportunities","similarity":0.6992078050992712},{"table":"opportunity_stages","similarity":0.6655732816251885},{"table":"opportunity_stages","similarity":0.6634227373711339},{"table":"opportunity_stages","similarity":0.6634227373711339},{"table":"sales_quotes","similarity":0.6041542335555263},{"table":"sales_quotes","similarity":0.6041542335555263},{"table":"sales_quotes","similarity":0.5966843975960908},{"table":"sales_orders","similarity":0.5645767590839142},{"table":"sales_orders","similarity":0.5645767590839142},{"table":"sales_regions","similarity":0.5644307089309575},{"table":"sales_regions","similarity":0.5644307089309575},{"table":"sales_orders","similarity":0.5593486033229518},{"table":"sales_regions","similarity":0.5589767008926408}],"column_hits_per_table":{"sales_opportunities":11,"opportunity_stages":6,"sales_quotes":8,"sales_orders":6,"sales_regions":2,"vendor_invoices":3,"project_milestones":2,"positions":2,"purchase_orders":3,"sales_territories":2,"fixed_assets":1,"vendor_invoice_lines":1,"purchase_requisitions":1,"inventory_levels":1,"products":1},"top_columns_per_table":{"sales_opportunities":[{"column":"amount","similarity":0.7139172496304163},{"column":"stage_id","similarity":0.6952000862360895},{"column":"actual_close_date","similarity":0.6830334219532271}],"opportunity_stages":[{"column":"sequence","similarity":0.6389837993697431},{"column":"probability","similarity":0.6259533584092214},{"column":"is_won","similarity":0.6211680792249179}],"sales_quotes":[{"column":"opportunity_id","similarity":0.6386990954132878},{"column":"total","similarity":0.6088430478546591},{"column":"status","similarity":0.5992888067529821}],"sales_orders":[{"column":"total","similarity":0.6131594865943232},{"column":"subtotal","similarity":0.6030274083374146},{"column":"status","similarity":0.5842354820649266}],"sales_regions":[{"column":"target_revenue","similarity":0.5946091865549964},{"column":"name","similarity":0.5570467585870398}],"vendor_invoices":[{"column":"total","similarity":0.5900128893372721},{"column":"subtotal","similarity":0.579374118244058},{"column":"amount_paid","similarity":0.5561381247624678}],"project_milestones":[{"column":"amount","similarity":0.5756739943176631},{"column":"description","similarity":0.5441090718901616}],"positions":[{"column":"max_salary","similarity":0.5741603665488147},{"column":"min_salary","similarity":0.5538510718211699}],"purchase_orders":[{"column":"total","similarity":0.5739273632713984},{"column":"subtotal","similarity":0.5646712926349372},{"column":"tax_amount","similarity":0.5423612991250856}],"sales_territories":[{"column":"name","similarity":0.5705580376132843},{"column":"territory_id","similarity":0.5472841845831027}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5580674942148667}],"vendor_invoice_lines":[{"column":"amount","similarity":0.5568943563507056}],"purchase_requisitions":[{"column":"status","similarity":0.5555841794582627}],"inventory_levels":[{"column":"quantity_available","similarity":0.5538118214636725}],"products":[{"column":"list_price","similarity":0.5426989166991779}]},"fused_scores":[{"table":"sales_opportunities","fused":0.8416982673023746,"table_sim":0.6992078050992712,"col_score":1.0554339606070298},{"table":"opportunity_stages","fused":0.7788378338524219,"table_sim":0.6634227373711339,"col_score":0.9519604785743538},{"table":"sales_quotes","fused":0.7207301540910609,"table_sim":0.5966843975960908,"col_score":0.9067987888335158},{"table":"sales_orders","fused":0.7014784382989834,"table_sim":0.5593486033229518,"col_score":0.9146731907630306},{"table":"sales_regions","fused":0.6512162413597686,"table_sim":0.5589767008926408,"col_score":0.7895755520604604},{"table":"vendor_invoices","fused":0.35187997938372045,"table_sim":0,"col_score":0.8796999484593011},{"table":"purchase_orders","fused":0.34250520383554683,"table_sim":0,"col_score":0.856263009588867},{"table":"positions","fused":0.3404343609837599,"table_sim":0,"col_score":0.8510859024593997},{"table":"project_milestones","fused":0.3064448677916879,"table_sim":0,"col_score":0.7661121694792197},{"table":"sales_territories","fused":0.23637603637335394,"table_sim":0,"col_score":0.5909400909333848},{"table":"fixed_assets","fused":0.22322699768594667,"table_sim":0,"col_score":0.5580674942148667},{"table":"vendor_invoice_lines","fused":0.22275774254028224,"table_sim":0,"col_score":0.5568943563507056},{"table":"inventory_levels","fused":0.221524728585469,"table_sim":0,"col_score":0.5538118214636725},{"table":"products","fused":0.21707956667967118,"table_sim":0,"col_score":0.5426989166991779},{"table":"purchase_requisitions","fused":0.15556357024831355,"table_sim":0,"col_score":0.38890892562078383}],"fk_expansion_candidates":39,"fk_expansion_added":2,"fk_expansion_blocked_count":33,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"already_selected"},{"table":"fixed_assets","reason":"already_selected"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"already_selected"},{"table":"vendor_invoice_lines","reason":"already_selected"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":17,"total_retrieval_latency_ms":24,"sql_generated":"SELECT so.* FROM sales_opportunities as so JOIN opportunity_stages os ON so.stage_id = os.stage_id WHERE os.name = 'Negotiation' AND so.amount > 50000;","tables_used_in_sql":[],"explain_result":"success","rows_returned":69,"total_latency_ms":837}
{"timestamp":"2026-01-29T21:28:07.366Z","query_id":"80449919-cf9b-476a-8c28-bec35eeb5399","question":"What is the conversion rate from quotes to orders?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["quote_lines","sales_quotes","sales_orders","order_lines","purchase_orders","po_lines","currencies","product_suppliers","units_of_measure","vendor_invoice_lines"],"tables_from_table_retrieval":6,"tables_from_column_only":5,"tables_from_fk_expansion":0,"table_scores":[{"table":"quote_lines","similarity":0.6904269230356019},{"table":"sales_orders","similarity":0.6835641897302034},{"table":"quote_lines","similarity":0.6792514897887778},{"table":"quote_lines","similarity":0.6792514897887778},{"table":"sales_quotes","similarity":0.6684713746648914},{"table":"sales_quotes","similarity":0.6542909932605636},{"table":"sales_quotes","similarity":0.6542909932605636},{"table":"order_lines","similarity":0.6535630831611231},{"table":"sales_orders","similarity":0.6493194652837458},{"table":"sales_orders","similarity":0.6493194652837458},{"table":"order_lines","similarity":0.6325855320371501},{"table":"order_lines","similarity":0.6325855320371501},{"table":"purchase_orders","similarity":0.6306886393929901},{"table":"po_lines","similarity":0.6176945995415711},{"table":"purchase_orders","similarity":0.611822309215676}],"column_hits_per_table":{"quote_lines":7,"sales_orders":8,"sales_quotes":11,"order_lines":6,"purchase_orders":8,"currencies":1,"product_suppliers":1,"po_lines":5,"units_of_measure":1,"vendor_invoice_lines":1,"goods_receipts":1},"top_columns_per_table":{"quote_lines":[{"column":"discount_percent","similarity":0.7182593829036943},{"column":"unit_price","similarity":0.7042313198565835},{"column":"line_total","similarity":0.6835145369839556}],"sales_orders":[{"column":"quote_id","similarity":0.7162590921292421},{"column":"total","similarity":0.6708820094443375},{"column":"order_number","similarity":0.6584546291944807}],"sales_quotes":[{"column":"total","similarity":0.7028223896965587},{"column":"quote_number","similarity":0.6939392229110496},{"column":"subtotal","similarity":0.6721480194739803}],"order_lines":[{"column":"discount_percent","similarity":0.6900369024388224},{"column":"unit_price","similarity":0.6660264997212797},{"column":"line_total","similarity":0.649395314588063}],"purchase_orders":[{"column":"total","similarity":0.6764211066970435},{"column":"subtotal","similarity":0.6567665860213302},{"column":"shipping_cost","similarity":0.65414342449199}],"currencies":[{"column":"exchange_rate","similarity":0.6392996583071135}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6332497450599537}],"po_lines":[{"column":"unit_cost","similarity":0.6282439661872448},{"column":"quantity_received","similarity":0.6270669349209222},{"column":"line_total","similarity":0.6215823065959345}],"units_of_measure":[{"column":"conversion_factor","similarity":0.6171116889177036}],"vendor_invoice_lines":[{"column":"unit_cost","similarity":0.6160794181570742}],"goods_receipts":[{"column":"po_id","similarity":0.6137867153632621}]},"fused_scores":[{"table":"quote_lines","fused":0.8357009110060611,"table_sim":0.6792514897887778,"col_score":1.070375042831986},{"table":"sales_quotes","fused":0.8124913964171716,"table_sim":0.6542909932605636,"col_score":1.0497920011520836},{"table":"sales_orders","fused":0.7896354087868787,"table_sim":0.6493194652837458,"col_score":1.000109324041578},{"table":"order_lines","fused":0.788771380142075,"table_sim":0.6325855320371501,"col_score":1.0230501522994624},{"table":"purchase_orders","fused":0.769015145412489,"table_sim":0.611822309215676,"col_score":1.0048043997077085},{"table":"po_lines","fused":0.747327733184025,"table_sim":0.6176945995415711,"col_score":0.9417774336477058},{"table":"currencies","fused":0.2557198633228454,"table_sim":0,"col_score":0.6392996583071135},{"table":"product_suppliers","fused":0.2532998980239815,"table_sim":0,"col_score":0.6332497450599537},{"table":"units_of_measure","fused":0.24684467556708145,"table_sim":0,"col_score":0.6171116889177036},{"table":"vendor_invoice_lines","fused":0.2464317672628297,"table_sim":0,"col_score":0.6160794181570742},{"table":"goods_receipts","fused":0.1718602803017134,"table_sim":0,"col_score":0.42965070075428347}],"fk_expansion_candidates":39,"fk_expansion_added":0,"fk_expansion_blocked_count":39,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"bank_accounts","reason":"no_evidence"},{"table":"bank_accounts","reason":"no_evidence"},{"table":"bank_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":14,"total_retrieval_latency_ms":21,"sql_generated":"SELECT AVG(sales_orders.order_id) / NULLIF(AVG(quote_lines.line_total), 0) AS avg_conversion_rate FROM sales_quotes JOIN quote_lines ON sales_quotes.quote_id = quote_lines.quote_id JOIN sales_orders ON sales_orders.order_id = quote_lines.product_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":1245}
{"timestamp":"2026-01-29T21:28:08.611Z","query_id":"4a61dec0-bbd8-4481-858d-cd01918de110","question":"List sales orders by sales representative with their totals","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_orders","purchase_orders","order_lines","sales_quotes","goods_receipts","sales_territories","po_lines","sales_regions","vendor_invoices","receipt_lines","sales_opportunities","vendor_invoice_lines"],"tables_from_table_retrieval":6,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.758754229471184},{"table":"sales_orders","similarity":0.7556252264934581},{"table":"sales_orders","similarity":0.7556252264934581},{"table":"purchase_orders","similarity":0.6987531686909988},{"table":"purchase_orders","similarity":0.6886720787474853},{"table":"purchase_orders","similarity":0.6886720787474853},{"table":"order_lines","similarity":0.6881373549198537},{"table":"order_lines","similarity":0.6816260009947546},{"table":"order_lines","similarity":0.6816260009947546},{"table":"sales_quotes","similarity":0.6493819389041919},{"table":"sales_quotes","similarity":0.6493819389041919},{"table":"goods_receipts","similarity":0.6456282553665884},{"table":"sales_quotes","similarity":0.6444526679613465},{"table":"sales_territories","similarity":0.6375070500401926},{"table":"sales_territories","similarity":0.6348500168058512}],"column_hits_per_table":{"sales_orders":15,"purchase_orders":12,"sales_quotes":6,"order_lines":5,"sales_regions":1,"vendor_invoices":1,"sales_territories":1,"receipt_lines":1,"vendor_invoice_lines":1,"po_lines":3,"goods_receipts":1,"product_suppliers":1,"sales_opportunities":1,"inventory_transactions":1},"top_columns_per_table":{"sales_orders":[{"column":"total","similarity":0.7984816373428206},{"column":"order_number","similarity":0.7376507065051414},{"column":"tax_amount","similarity":0.7355899521470814}],"purchase_orders":[{"column":"total","similarity":0.734096231715997},{"column":"tax_amount","similarity":0.6843265970253858},{"column":"subtotal","similarity":0.6744270570758721}],"sales_quotes":[{"column":"total","similarity":0.6966422036282015},{"column":"status","similarity":0.6606149717330653},{"column":"tax_amount","similarity":0.6474260599431703}],"order_lines":[{"column":"quantity_shipped","similarity":0.6752744675245054},{"column":"line_total","similarity":0.6719261035704387},{"column":"quantity","similarity":0.6483651230587076}],"sales_regions":[{"column":"target_revenue","similarity":0.6591934074166641}],"vendor_invoices":[{"column":"total","similarity":0.6455669148097609}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6413528025002969}],"receipt_lines":[{"column":"quantity_received","similarity":0.6394945951070348}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.6336019163468033}],"po_lines":[{"column":"line_total","similarity":0.6324408227358158},{"column":"quantity_received","similarity":0.6248640275162665},{"column":"quantity","similarity":0.6172166944597351}],"goods_receipts":[{"column":"po_id","similarity":0.6290574732384728}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6285907746616352}],"sales_opportunities":[{"column":"amount","similarity":0.6191854884462563}],"inventory_transactions":[{"column":"quantity","similarity":0.6191435481021224}]},"fused_scores":[{"table":"sales_orders","fused":0.9202979321342314,"table_sim":0.7556252264934581,"col_score":1.1673069905953914},{"table":"purchase_orders","fused":0.8437070593399671,"table_sim":0.6886720787474853,"col_score":1.07625953022869},{"table":"order_lines","fused":0.8134706083207426,"table_sim":0.6816260009947546,"col_score":1.0112375193097247},{"table":"sales_quotes","fused":0.7948136942167225,"table_sim":0.6444526679613465,"col_score":1.0203552335997865},{"table":"goods_receipts","fused":0.5635130457267254,"table_sim":0.6456282553665884,"col_score":0.44034023126693095},{"table":"sales_territories","fused":0.5604887947835939,"table_sim":0.6348500168058512,"col_score":0.4489469617502078},{"table":"po_lines","fused":0.3779491345975796,"table_sim":0,"col_score":0.944872836493949},{"table":"sales_regions","fused":0.26367736296666566,"table_sim":0,"col_score":0.6591934074166641},{"table":"vendor_invoices","fused":0.25822676592390437,"table_sim":0,"col_score":0.6455669148097609},{"table":"receipt_lines","fused":0.2557978380428139,"table_sim":0,"col_score":0.6394945951070348},{"table":"vendor_invoice_lines","fused":0.25344076653872133,"table_sim":0,"col_score":0.6336019163468033},{"table":"product_suppliers","fused":0.2514363098646541,"table_sim":0,"col_score":0.6285907746616352},{"table":"sales_opportunities","fused":0.24767419537850255,"table_sim":0,"col_score":0.6191854884462563},{"table":"inventory_transactions","fused":0.24765741924084894,"table_sim":0,"col_score":0.6191435481021224}],"fk_expansion_candidates":36,"fk_expansion_added":2,"fk_expansion_blocked_count":30,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"already_selected"},{"table":"sales_opportunities","reason":"already_selected"},{"table":"vendor_invoice_lines","reason":"already_selected"},{"table":"vendor_invoice_lines","reason":"already_selected"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":17,"total_retrieval_latency_ms":24,"sql_generated":"SELECT sr.name AS sales_rep_name, SUM(so.total) AS total_sales FROM sales_orders so JOIN employees e ON so.sales_rep_id = e.employee_id JOIN sales_regions sr ON e.region_id = sr.region_id GROUP BY sr.name;","tables_used_in_sql":[],"total_latency_ms":2786,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T21:28:11.397Z","query_id":"39d2a1b1-101b-4044-a8a5-92875d610fec","question":"Which products have inventory below their reorder point?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["inventory_levels","reorder_rules","order_lines","sales_orders","inventory_transactions","purchase_orders","products","inventory_adjustments","purchase_requisitions","po_lines","product_suppliers","warehouse_locations"],"tables_from_table_retrieval":7,"tables_from_column_only":9,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_levels","similarity":0.7070801714571546},{"table":"reorder_rules","similarity":0.6993615141081165},{"table":"inventory_levels","similarity":0.6953472951150648},{"table":"inventory_levels","similarity":0.6953472951150648},{"table":"reorder_rules","similarity":0.6944993157914898},{"table":"reorder_rules","similarity":0.6944993157914898},{"table":"order_lines","similarity":0.6642088827606001},{"table":"order_lines","similarity":0.6572535778016314},{"table":"order_lines","similarity":0.6572535778016314},{"table":"purchase_orders","similarity":0.6443483426703897},{"table":"inventory_transactions","similarity":0.6416382343377212},{"table":"purchase_orders","similarity":0.633710828585256},{"table":"purchase_orders","similarity":0.633710828585256},{"table":"products","similarity":0.6294483845877934},{"table":"sales_orders","similarity":0.6263982770622627}],"column_hits_per_table":{"reorder_rules":6,"inventory_levels":7,"order_lines":4,"sales_orders":6,"po_lines":2,"inventory_adjustments":4,"purchase_orders":5,"product_suppliers":1,"inventory_transactions":6,"requisition_lines":1,"warehouse_locations":1,"purchase_requisitions":2,"products":2,"goods_receipts":1,"product_categories":1,"fixed_assets":1},"top_columns_per_table":{"reorder_rules":[{"column":"product_id","similarity":0.6848016931751442},{"column":"reorder_quantity","similarity":0.6637797302393366},{"column":"min_quantity","similarity":0.6574207762819531}],"inventory_levels":[{"column":"last_count_date","similarity":0.6817961261538734},{"column":"quantity_on_hand","similarity":0.6695351192378397},{"column":"product_id","similarity":0.6682884756083407}],"order_lines":[{"column":"product_id","similarity":0.6691954780163692},{"column":"quantity_shipped","similarity":0.637679790857748},{"column":"quantity","similarity":0.6321627156566018}],"sales_orders":[{"column":"order_number","similarity":0.6627704470010616},{"column":"status","similarity":0.6471660709577013},{"column":"order_date","similarity":0.6389517822162246}],"po_lines":[{"column":"product_id","similarity":0.6504268752720367},{"column":"po_id","similarity":0.6077693680985435}],"inventory_adjustments":[{"column":"status","similarity":0.6479602296650583},{"column":"reason","similarity":0.6457522392027785},{"column":"adjustment_number","similarity":0.6378457218522001}],"purchase_orders":[{"column":"po_number","similarity":0.6474162126096339},{"column":"status","similarity":0.6402955005707206},{"column":"expected_date","similarity":0.6228851654803191}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.641385053356931}],"inventory_transactions":[{"column":"quantity","similarity":0.6375918434746354},{"column":"product_id","similarity":0.637542414223907},{"column":"location_id","similarity":0.6341790276928759}],"requisition_lines":[{"column":"product_id","similarity":0.6314296366225383}],"warehouse_locations":[{"column":"aisle","similarity":0.6303878312508351}],"purchase_requisitions":[{"column":"requisition_number","similarity":0.6234744184832554},{"column":"status","similarity":0.6170438229673241}],"products":[{"column":"list_price","similarity":0.6178030633511985},{"column":"category_id","similarity":0.6099738535155036}],"goods_receipts":[{"column":"po_id","similarity":0.6089214662001797}],"product_categories":[{"column":"is_active","similarity":0.6087500213588084}],"fixed_assets":[{"column":"po_id","similarity":0.6068785699474105}]},"fused_scores":[{"table":"inventory_levels","fused":0.8238338513781562,"table_sim":0.6953472951150648,"col_score":1.0165636857727933},{"table":"reorder_rules","fused":0.8136956368270192,"table_sim":0.6944993157914898,"col_score":0.9924901183803131},{"table":"order_lines","fused":0.7758566061553984,"table_sim":0.6572535778016314,"col_score":0.9537611486860489},{"table":"sales_orders","fused":0.7687375014810272,"table_sim":0.6263982770622627,"col_score":0.9822463381091739},{"table":"inventory_transactions","fused":0.7651306372843636,"table_sim":0.6416382343377212,"col_score":0.9503692417043273},{"table":"purchase_orders","fused":0.7637700152910709,"table_sim":0.633710828585256,"col_score":0.9588587953497935},{"table":"products","fused":0.7101865955853259,"table_sim":0.6294483845877934,"col_score":0.8312939120816247},{"table":"inventory_adjustments","fused":0.3858700400515514,"table_sim":0,"col_score":0.9646751001288785},{"table":"purchase_requisitions","fused":0.33577590260872753,"table_sim":0,"col_score":0.8394397565218188},{"table":"po_lines","fused":0.26720723660996637,"table_sim":0,"col_score":0.6680180915249159},{"table":"product_suppliers","fused":0.2565540213427724,"table_sim":0,"col_score":0.641385053356931},{"table":"warehouse_locations","fused":0.25215513250033406,"table_sim":0,"col_score":0.6303878312508351},{"table":"requisition_lines","fused":0.1768002982543107,"table_sim":0,"col_score":0.44200074563577674},{"table":"goods_receipts","fused":0.17049801053605032,"table_sim":0,"col_score":0.4262450263401258},{"table":"product_categories","fused":0.17045000598046633,"table_sim":0,"col_score":0.42612501495116584}],"fk_expansion_candidates":60,"fk_expansion_added":2,"fk_expansion_blocked_count":54,"fk_expansion_blocked":[{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"product_suppliers","reason":"already_selected"},{"table":"warehouses","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"warehouse_locations","reason":"already_selected"},{"table":"product_suppliers","reason":"already_selected"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"warehouse_locations","reason":"already_selected"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":22,"total_retrieval_latency_ms":29,"sql_generated":"SELECT p.product_id, p.name FROM products p JOIN inventory_levels il ON p.product_id = il.product_id JOIN warehouse_locations wh ON il.location_id = wh.location_id JOIN reorder_rules rr ON p.product_id = rr.product_id WHERE il.quantity_available < rr.min_quantity;","tables_used_in_sql":[],"explain_result":"success","rows_returned":41,"total_latency_ms":1347}
{"timestamp":"2026-01-29T21:28:12.744Z","query_id":"074b2174-0359-4233-8b46-3575c06453b2","question":"Show total inventory value by warehouse","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["inventory_levels","warehouse_locations","inventory_transactions","warehouses","inventory_adjustments","goods_receipts","sales_orders","depreciation_entries","products","stock_transfers","purchase_orders","fixed_assets"],"tables_from_table_retrieval":6,"tables_from_column_only":13,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_levels","similarity":0.7104203582862987},{"table":"inventory_levels","similarity":0.7062958755605335},{"table":"inventory_levels","similarity":0.7062958755605335},{"table":"inventory_transactions","similarity":0.680757846413893},{"table":"inventory_transactions","similarity":0.6765591263871731},{"table":"inventory_transactions","similarity":0.6765591263871731},{"table":"warehouse_locations","similarity":0.6696147841460903},{"table":"warehouse_locations","similarity":0.6696147841460903},{"table":"warehouse_locations","similarity":0.6688272683283106},{"table":"inventory_adjustments","similarity":0.6606002830367331},{"table":"warehouses","similarity":0.6556396900395098},{"table":"warehouses","similarity":0.6549847651325709},{"table":"warehouses","similarity":0.6549847651325709},{"table":"goods_receipts","similarity":0.6485940357294664},{"table":"inventory_adjustments","similarity":0.6481714490174519}],"column_hits_per_table":{"inventory_levels":8,"inventory_transactions":7,"goods_receipts":1,"inventory_adjustments":2,"warehouse_locations":7,"warehouses":6,"sales_orders":4,"stock_transfers":2,"vendor_invoices":1,"purchase_orders":1,"budgets":1,"sales_quotes":1,"receipt_lines":1,"product_suppliers":1,"departments":1,"depreciation_entries":2,"reorder_rules":1,"products":2,"fixed_assets":1},"top_columns_per_table":{"inventory_levels":[{"column":"warehouse_id","similarity":0.708722514782743},{"column":"quantity_available","similarity":0.6604112553081857},{"column":"location_id","similarity":0.6602421519261215}],"inventory_transactions":[{"column":"warehouse_id","similarity":0.6993416090005563},{"column":"quantity","similarity":0.689333383144765},{"column":"location_id","similarity":0.660944351084026}],"goods_receipts":[{"column":"warehouse_id","similarity":0.688838466629484}],"inventory_adjustments":[{"column":"warehouse_id","similarity":0.6887282990877287},{"column":"adjusted_by","similarity":0.5981689946700227}],"warehouse_locations":[{"column":"capacity","similarity":0.6827158501951326},{"column":"warehouse_id","similarity":0.662666484484188},{"column":"aisle","similarity":0.6432371700626858}],"warehouses":[{"column":"warehouse_id","similarity":0.6820022612136065},{"column":"code","similarity":0.6539272965859065},{"column":"manager_id","similarity":0.6485538115680078}],"sales_orders":[{"column":"total","similarity":0.6722495952714556},{"column":"shipping_cost","similarity":0.60704061712735},{"column":"tax_amount","similarity":0.6052565462982356}],"stock_transfers":[{"column":"to_warehouse_id","similarity":0.6688782877276971},{"column":"from_warehouse_id","similarity":0.6625944072749643}],"vendor_invoices":[{"column":"total","similarity":0.6650649265799957}],"purchase_orders":[{"column":"total","similarity":0.6529876873319977}],"budgets":[{"column":"total_amount","similarity":0.6288992519439089}],"sales_quotes":[{"column":"total","similarity":0.6183165548964591}],"receipt_lines":[{"column":"location_id","similarity":0.6178862177295927}],"product_suppliers":[{"column":"unit_cost","similarity":0.6136774418242915}],"departments":[{"column":"budget","similarity":0.6126737864581466}],"depreciation_entries":[{"column":"book_value","similarity":0.6106026426926224},{"column":"amount","similarity":0.6023684484447284}],"reorder_rules":[{"column":"warehouse_id","similarity":0.6057139616644429}],"products":[{"column":"unit_cost","similarity":0.6047858628133291},{"column":"list_price","similarity":0.599736955772572}],"fixed_assets":[{"column":"disposal_amount","similarity":0.6025646944840113}]},"fused_scores":[{"table":"inventory_levels","fused":0.819440334599304,"table_sim":0.7062958755605335,"col_score":0.9891570231574598},{"table":"warehouse_locations","fused":0.8030301350875766,"table_sim":0.6688272683283106,"col_score":1.0043344352264754},{"table":"inventory_transactions","fused":0.7795766543502878,"table_sim":0.6765591263871731,"col_score":0.9341029462949597},{"table":"warehouses","fused":0.7500420942838101,"table_sim":0.6549847651325709,"col_score":0.8926280880106688},{"table":"inventory_adjustments","fused":0.7245924291507623,"table_sim":0.6481714490174519,"col_score":0.8392238993507277},{"table":"goods_receipts","fused":0.5820311920939354,"table_sim":0.6485940357294664,"col_score":0.4821869266406388},{"table":"sales_orders","fused":0.3903079615340523,"table_sim":0,"col_score":0.9757699038351306},{"table":"depreciation_entries","fused":0.3647147467659947,"table_sim":0,"col_score":0.9117868669149867},{"table":"products","fused":0.3618617362798461,"table_sim":0,"col_score":0.9046543406996151},{"table":"stock_transfers","fused":0.2800491375822502,"table_sim":0,"col_score":0.7001228439556254},{"table":"vendor_invoices","fused":0.2660259706319983,"table_sim":0,"col_score":0.6650649265799957},{"table":"purchase_orders","fused":0.2611950749327991,"table_sim":0,"col_score":0.6529876873319977},{"table":"budgets","fused":0.25155970077756357,"table_sim":0,"col_score":0.6288992519439089},{"table":"sales_quotes","fused":0.24732662195858365,"table_sim":0,"col_score":0.6183165548964591},{"table":"product_suppliers","fused":0.24547097672971663,"table_sim":0,"col_score":0.6136774418242915}],"fk_expansion_candidates":57,"fk_expansion_added":2,"fk_expansion_blocked_count":45,"fk_expansion_blocked":[{"table":"employees","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"purchase_orders","reason":"already_selected"},{"table":"journal_entries","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"customers","reason":"no_evidence"},{"table":"fixed_assets","reason":"already_selected"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"order_lines","reason":"no_evidence"},{"table":"product_suppliers","reason":"max_tables"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"product_suppliers","reason":"max_tables"},{"table":"purchase_orders","reason":"already_selected"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"product_suppliers","reason":"max_tables"},{"table":"fixed_assets","reason":"already_selected"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":23,"total_retrieval_latency_ms":30,"sql_generated":"SELECT w.warehouse_id AS WarehouseID, SUM(il.quantity * (p.unit_cost + p.list_price - il.discount)) AS TotalInventoryValue FROM inventory_levels il JOIN warehouses w ON il.location_id = w.warehouse_id JOIN products p ON il.product_id = p.product_id GROUP BY w.warehouse_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column il.quantity does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":0,"autocorrect_failure_reason":"No candidates found for column 'quantity'","total_latency_ms":3670,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column il.quantity does not exist"}
{"timestamp":"2026-01-29T21:28:16.415Z","query_id":"f46ef9b7-15c0-48c3-a881-622fae59dd1d","question":"List products that had stock transfers in the last 30 days","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["stock_transfers","asset_transfers","product_suppliers","transfer_lines","products","goods_receipts","sales_orders","sales_opportunities","purchase_orders","bank_transactions","inventory_transactions","inventory_levels"],"tables_from_table_retrieval":6,"tables_from_column_only":12,"tables_from_fk_expansion":2,"table_scores":[{"table":"stock_transfers","similarity":0.7091850354041176},{"table":"stock_transfers","similarity":0.7011965090595027},{"table":"stock_transfers","similarity":0.7011965090595027},{"table":"transfer_lines","similarity":0.6496835362341594},{"table":"transfer_lines","similarity":0.6496835362341594},{"table":"transfer_lines","similarity":0.646870577681612},{"table":"asset_transfers","similarity":0.5968754380180706},{"table":"asset_transfers","similarity":0.5968754380180706},{"table":"asset_transfers","similarity":0.59288750153646},{"table":"product_suppliers","similarity":0.5817884382151997},{"table":"product_suppliers","similarity":0.5745779979943767},{"table":"product_suppliers","similarity":0.5745779979943767},{"table":"goods_receipts","similarity":0.5680812156740983},{"table":"products","similarity":0.5634067444500328},{"table":"goods_receipts","similarity":0.5627684399196974}],"column_hits_per_table":{"stock_transfers":9,"asset_transfers":4,"fixed_assets":1,"product_suppliers":2,"products":5,"goods_receipts":2,"sales_orders":4,"transfer_lines":3,"sales_opportunities":2,"purchase_orders":3,"bank_transactions":2,"inventory_adjustments":1,"inventory_transactions":3,"asset_maintenance":1,"purchase_requisitions":3,"sales_quotes":3,"inventory_levels":1,"vendor_invoices":1},"top_columns_per_table":{"stock_transfers":[{"column":"transfer_date","similarity":0.7499168921470162},{"column":"requested_date","similarity":0.7345265492490073},{"column":"status","similarity":0.7330447738209374}],"asset_transfers":[{"column":"transfer_date","similarity":0.6805213481174137},{"column":"reason","similarity":0.6364549306171452},{"column":"transferred_by","similarity":0.5760045825951514}],"fixed_assets":[{"column":"purchase_date","similarity":0.6273418627780806}],"product_suppliers":[{"column":"lead_time_days","similarity":0.6226272716760114},{"column":"vendor_sku","similarity":0.5886978994384543}],"products":[{"column":"sku","similarity":0.6116137990281642},{"column":"weight","similarity":0.6100903093863776},{"column":"name","similarity":0.6058188658015616}],"goods_receipts":[{"column":"receipt_date","similarity":0.6110182471068999},{"column":"notes","similarity":0.5904748926703712}],"sales_orders":[{"column":"ship_date","similarity":0.6099316067185375},{"column":"order_date","similarity":0.5959651780199162},{"column":"status","similarity":0.5956583941840918}],"transfer_lines":[{"column":"transfer_id","similarity":0.6075867978368561},{"column":"product_id","similarity":0.5992251210020744},{"column":"quantity_transferred","similarity":0.5858026631707312}],"sales_opportunities":[{"column":"actual_close_date","similarity":0.6030406652697254},{"column":"expected_close_date","similarity":0.5875094961690548}],"purchase_orders":[{"column":"status","similarity":0.5975839583778322},{"column":"order_date","similarity":0.5938817441678782},{"column":"expected_date","similarity":0.589876682073089}],"bank_transactions":[{"column":"transaction_date","similarity":0.5964828803092368},{"column":"reconciled","similarity":0.5699506323088029}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.5938851055262241}],"inventory_transactions":[{"column":"transaction_date","similarity":0.5868513506524482},{"column":"transaction_type","similarity":0.5727879607007047},{"column":"reference_type","similarity":0.5713153140670767}],"asset_maintenance":[{"column":"completed_date","similarity":0.5867606193386766}],"purchase_requisitions":[{"column":"status","similarity":0.5827865883224072},{"column":"approved_date","similarity":0.5710456887653464},{"column":"notes","similarity":0.5705665600863868}],"sales_quotes":[{"column":"status","similarity":0.5826553998030811},{"column":"valid_until","similarity":0.5817087714931044},{"column":"quote_date","similarity":0.5733265296465615}],"inventory_levels":[{"column":"last_count_date","similarity":0.5783828724054709}],"vendor_invoices":[{"column":"status","similarity":0.5680190001288683}]},"fused_scores":[{"table":"stock_transfers","fused":0.8675899721443094,"table_sim":0.7011965090595027,"col_score":1.1171801667715198},{"table":"asset_transfers","fused":0.7552320262922705,"table_sim":0.59288750153646,"col_score":0.9987488134259863},{"table":"product_suppliers","fused":0.7115372873547214,"table_sim":0.5745779979943767,"col_score":0.9169762213952386},{"table":"transfer_lines","fused":0.7075055635744195,"table_sim":0.646870577681612,"col_score":0.7984580424136307},{"table":"products","fused":0.7047076281585609,"table_sim":0.5634067444500328,"col_score":0.916658953721353},{"table":"goods_receipts","fused":0.6647348477684304,"table_sim":0.5627684399196974,"col_score":0.8176844595415298},{"table":"sales_orders","fused":0.3631656782913983,"table_sim":0,"col_score":0.9079141957284956},{"table":"sales_opportunities","fused":0.35871816534170115,"table_sim":0,"col_score":0.8967954133542528},{"table":"purchase_orders","fused":0.3555280340817691,"table_sim":0,"col_score":0.8888200852044227},{"table":"bank_transactions","fused":0.35258327858545535,"table_sim":0,"col_score":0.8814581964636383},{"table":"inventory_transactions","fused":0.34929813240112023,"table_sim":0,"col_score":0.8732453310028006},{"table":"sales_quotes","fused":0.3473488145265541,"table_sim":0,"col_score":0.8683720363163852},{"table":"purchase_requisitions","fused":0.3100083978712756,"table_sim":0,"col_score":0.775020994678189},{"table":"fixed_assets","fused":0.25093674511123226,"table_sim":0,"col_score":0.6273418627780806},{"table":"inventory_adjustments","fused":0.23755404221048965,"table_sim":0,"col_score":0.5938851055262241}],"fk_expansion_candidates":69,"fk_expansion_added":2,"fk_expansion_blocked_count":54,"fk_expansion_blocked":[{"table":"employees","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"bank_accounts","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"inventory_transactions","reason":"already_selected"},{"table":"warehouses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"inventory_transactions","reason":"already_selected"},{"table":"po_lines","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"bank_accounts","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"customers","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"asset_locations","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"inventory_levels","reason":"already_selected"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"bank_accounts","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"sales_quotes","reason":"max_tables"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"inventory_levels","reason":"already_selected"},{"table":"po_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"units_of_measure","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":28,"total_retrieval_latency_ms":34,"sql_generated":"SELECT DISTINCT p.product_id, p.name FROM inventory_transactions tt JOIN transfer_lines trl ON tt.product_id = trl.product_id AND tt.warehouse_id = trl.warehouse_id JOIN products p ON p.product_id = trl.product_id WHERE tt.transaction_date >= CURRENT_DATE - INTERVAL '30 days';","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column trl.warehouse_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":2,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":3838,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column trl.warehouse_id does not exist"}
{"timestamp":"2026-01-29T21:28:20.254Z","query_id":"74a4223b-dfb9-400f-a345-fdd2b7f4e105","question":"What is the total spend by vendor this year?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["vendor_invoices","purchase_orders","vendors","project_expenses","product_suppliers","vendor_invoice_lines","project_budgets","sales_orders","sales_quotes","fixed_assets","vendor_contacts","products"],"tables_from_table_retrieval":6,"tables_from_column_only":13,"tables_from_fk_expansion":2,"table_scores":[{"table":"vendor_invoices","similarity":0.6440970715159303},{"table":"vendor_invoices","similarity":0.6440970715159303},{"table":"vendor_invoices","similarity":0.639424435349415},{"table":"vendors","similarity":0.6244918790926227},{"table":"purchase_orders","similarity":0.6205493350711797},{"table":"purchase_orders","similarity":0.6205493350711797},{"table":"vendors","similarity":0.6183112819198846},{"table":"vendors","similarity":0.6183112819198846},{"table":"purchase_orders","similarity":0.6177456671712362},{"table":"product_suppliers","similarity":0.598703660216106},{"table":"fiscal_years","similarity":0.5958886040093712},{"table":"project_expenses","similarity":0.5917559199865416},{"table":"project_expenses","similarity":0.5906949409227156},{"table":"project_expenses","similarity":0.5906949409227156},{"table":"product_suppliers","similarity":0.5892637416806026}],"column_hits_per_table":{"vendor_invoices":10,"budgets":1,"purchase_orders":6,"vendor_invoice_lines":3,"project_expenses":2,"vendors":8,"sales_orders":2,"project_budgets":2,"product_suppliers":2,"sales_quotes":2,"projects":1,"fixed_assets":3,"products":1,"budget_lines":1,"purchase_requisitions":3,"depreciation_schedules":1,"asset_maintenance":1,"vendor_contacts":1},"top_columns_per_table":{"vendor_invoices":[{"column":"total","similarity":0.7062529607669469},{"column":"tax_amount","similarity":0.6569420170620686},{"column":"amount_paid","similarity":0.6525110251426526}],"budgets":[{"column":"total_amount","similarity":0.6533596429158817}],"purchase_orders":[{"column":"total","similarity":0.6425370855623833},{"column":"tax_amount","similarity":0.6174757294901109},{"column":"vendor_id","similarity":0.5942535542023611}],"vendor_invoice_lines":[{"column":"amount","similarity":0.6414203627446952},{"column":"unit_cost","similarity":0.6384854706402397},{"column":"quantity","similarity":0.6008819172893124}],"project_expenses":[{"column":"expense_date","similarity":0.6302596278500101},{"column":"amount","similarity":0.6115972025931361}],"vendors":[{"column":"payment_terms","similarity":0.6287317824441854},{"column":"vendor_number","similarity":0.616273209887938},{"column":"phone","similarity":0.6119598101701121}],"sales_orders":[{"column":"total","similarity":0.6273962434957814},{"column":"tax_amount","similarity":0.5927580498428531}],"project_budgets":[{"column":"actual_amount","similarity":0.6245219111397344},{"column":"planned_amount","similarity":0.6076385195194554}],"product_suppliers":[{"column":"unit_cost","similarity":0.6202704837989403},{"column":"vendor_id","similarity":0.5815547843350841}],"sales_quotes":[{"column":"total","similarity":0.6161006991687307},{"column":"tax_amount","similarity":0.587895729360088}],"projects":[{"column":"budget","similarity":0.6100628879936848}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5986646089942808},{"column":"purchase_date","similarity":0.5961819068723165},{"column":"vendor_id","similarity":0.5938842221789269}],"products":[{"column":"unit_cost","similarity":0.5940432927972419}],"budget_lines":[{"column":"amount","similarity":0.5917264745538887}],"purchase_requisitions":[{"column":"approved_date","similarity":0.5905370205856212},{"column":"request_date","similarity":0.5860336743159205},{"column":"required_date","similarity":0.5847709356931721}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5876422769577351}],"asset_maintenance":[{"column":"vendor_id","similarity":0.5863680456887999}],"vendor_contacts":[{"column":"phone","similarity":0.5837764500936985}]},"fused_scores":[{"table":"vendor_invoices","fused":0.7975442489288413,"table_sim":0.639424435349415,"col_score":1.034723969297981},{"table":"purchase_orders","fused":0.7511573804257172,"table_sim":0.6177456671712362,"col_score":0.9512749503074387},{"table":"vendors","fused":0.7457341241071925,"table_sim":0.6183112819198846,"col_score":0.9368683873881544},{"table":"project_expenses","fused":0.7288402562122607,"table_sim":0.5906949409227156,"col_score":0.9360582291465782},{"table":"product_suppliers","fused":0.6830841083348494,"table_sim":0.5892637416806026,"col_score":0.8238146583162198},{"table":"vendor_invoice_lines","fused":0.38426523922592604,"table_sim":0,"col_score":0.960663098064815},{"table":"project_budgets","fused":0.37133646835978484,"table_sim":0,"col_score":0.9283411708994621},{"table":"sales_orders","fused":0.36951010736688317,"table_sim":0,"col_score":0.9237752684172079},{"table":"sales_quotes","fused":0.36401942553950994,"table_sim":0,"col_score":0.9100485638487747},{"table":"fixed_assets","fused":0.35870222497217563,"table_sim":0,"col_score":0.8967555624304391},{"table":"fiscal_years","fused":0.35753316240562266,"table_sim":0.5958886040093712,"col_score":0},{"table":"purchase_requisitions","fused":0.35342154309743257,"table_sim":0,"col_score":0.8835538577435814},{"table":"budgets","fused":0.26134385716635267,"table_sim":0,"col_score":0.6533596429158817},{"table":"projects","fused":0.24402515519747392,"table_sim":0,"col_score":0.6100628879936848},{"table":"products","fused":0.23761731711889678,"table_sim":0,"col_score":0.5940432927972419}],"fk_expansion_candidates":60,"fk_expansion_added":2,"fk_expansion_blocked_count":45,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"projects","reason":"max_tables"},{"table":"currencies","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"max_tables"},{"table":"po_lines","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"products","reason":"already_selected"},{"table":"customers","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"vendor_contacts","reason":"already_selected"},{"table":"currencies","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"order_lines","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"vendor_contacts","reason":"already_selected"},{"table":"employees","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"projects","reason":"max_tables"},{"table":"currencies","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"max_tables"},{"table":"depreciation_schedules","reason":"max_tables"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"already_selected"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"max_tables"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":13,"total_retrieval_latency_ms":20,"sql_generated":"SELECT v.vendor_id, SUM(vi.amount) AS total_spend FROM vendors v JOIN purchase_orders po ON v.vendor_id = po.vendor_id JOIN vendor_invoice_lines vi ON po.po_id = vi.invoice_id WHERE EXTRACT(YEAR FROM po.order_date) = EXTRACT(YEAR FROM CURRENT_DATE) GROUP BY v.vendor_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42883","error_message":"function year(date) does not exist","total_latency_ms":3319,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T21:28:23.573Z","query_id":"46622b80-4c28-4e9f-8e55-e9c17b33d333","question":"List purchase orders that are overdue (expected date passed but not received)","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["purchase_orders","sales_orders","purchase_requisitions","goods_receipts","order_lines","vendor_invoices","performance_reviews","sales_quotes","po_lines","timesheets","fixed_assets","sales_opportunities"],"tables_from_table_retrieval":5,"tables_from_column_only":10,"tables_from_fk_expansion":2,"table_scores":[{"table":"purchase_orders","similarity":0.6892780734130105},{"table":"purchase_orders","similarity":0.6877847923105723},{"table":"purchase_orders","similarity":0.6877847923105723},{"table":"sales_orders","similarity":0.6436897773327827},{"table":"goods_receipts","similarity":0.6352418457409176},{"table":"sales_orders","similarity":0.6345390772398959},{"table":"sales_orders","similarity":0.6345390772398959},{"table":"purchase_requisitions","similarity":0.6320653594363884},{"table":"purchase_requisitions","similarity":0.6281214571607268},{"table":"purchase_requisitions","similarity":0.6281214571607268},{"table":"order_lines","similarity":0.6266578306760409},{"table":"order_lines","similarity":0.6173850449941319},{"table":"order_lines","similarity":0.6173850449941319},{"table":"goods_receipts","similarity":0.6145302746290987},{"table":"goods_receipts","similarity":0.6145302746290987}],"column_hits_per_table":{"purchase_orders":15,"sales_orders":8,"purchase_requisitions":6,"vendor_invoices":3,"fixed_assets":1,"performance_reviews":3,"stock_transfers":1,"goods_receipts":2,"sales_opportunities":1,"po_lines":2,"order_lines":1,"sales_quotes":3,"timesheets":2,"inventory_transactions":1,"employee_certifications":1},"top_columns_per_table":{"purchase_orders":[{"column":"expected_date","similarity":0.7914963653938238},{"column":"order_date","similarity":0.7635502937685905},{"column":"status","similarity":0.747639644500421}],"sales_orders":[{"column":"order_date","similarity":0.7235546305466264},{"column":"required_date","similarity":0.7185386655573599},{"column":"ship_date","similarity":0.7100060695804065}],"purchase_requisitions":[{"column":"request_date","similarity":0.6846871495702603},{"column":"approved_date","similarity":0.6846235647380197},{"column":"required_date","similarity":0.6803613753458558}],"vendor_invoices":[{"column":"due_date","similarity":0.6486808836793426},{"column":"invoice_date","similarity":0.633314911035975},{"column":"status","similarity":0.6320046740385495}],"fixed_assets":[{"column":"purchase_date","similarity":0.6483597718886084}],"performance_reviews":[{"column":"review_date","similarity":0.6402500237578782},{"column":"review_period_end","similarity":0.6181137197537518},{"column":"review_period_start","similarity":0.6090541573304037}],"stock_transfers":[{"column":"requested_date","similarity":0.6397536436713247}],"goods_receipts":[{"column":"receipt_date","similarity":0.6320711731665748},{"column":"po_id","similarity":0.6150599127133874}],"sales_opportunities":[{"column":"expected_close_date","similarity":0.627425520789371}],"po_lines":[{"column":"po_id","similarity":0.621403776034774},{"column":"quantity_received","similarity":0.6133005378966102}],"order_lines":[{"column":"quantity_shipped","similarity":0.6213051311566832}],"sales_quotes":[{"column":"status","similarity":0.6196764702539621},{"column":"valid_until","similarity":0.6117760233170634},{"column":"quote_date","similarity":0.6084274483307646}],"timesheets":[{"column":"approved_date","similarity":0.6125536693705684},{"column":"status","similarity":0.6090778000186181}],"inventory_transactions":[{"column":"transaction_date","similarity":0.610775225230928}],"employee_certifications":[{"column":"obtained_date","similarity":0.6043033574871731}]},"fused_scores":[{"table":"purchase_orders","fused":0.8819794802975911,"table_sim":0.6877847923105723,"col_score":1.1732715122781192},{"table":"sales_orders","fused":0.81385303167406,"table_sim":0.6345390772398959,"col_score":1.0828239633253063},{"table":"purchase_requisitions","fused":0.7876724470721441,"table_sim":0.6281214571607268,"col_score":1.02699893193927},{"table":"goods_receipts","fused":0.7076550218239634,"table_sim":0.6145302746290987,"col_score":0.8473421426162604},{"table":"order_lines","fused":0.6189530794591525,"table_sim":0.6173850449941319,"col_score":0.6213051311566832},{"table":"vendor_invoices","fused":0.3861353356789321,"table_sim":0,"col_score":0.9653383391973301},{"table":"performance_reviews","fused":0.37972275345390166,"table_sim":0,"col_score":0.9493068836347541},{"table":"sales_quotes","fused":0.3663958989929783,"table_sim":0,"col_score":0.9159897474824457},{"table":"po_lines","fused":0.33231674380351245,"table_sim":0,"col_score":0.8307918595087811},{"table":"timesheets","fused":0.33029235975083393,"table_sim":0,"col_score":0.8257308993770848},{"table":"fixed_assets","fused":0.2593439087554434,"table_sim":0,"col_score":0.6483597718886084},{"table":"stock_transfers","fused":0.2559014574685299,"table_sim":0,"col_score":0.6397536436713247},{"table":"sales_opportunities","fused":0.2509702083157484,"table_sim":0,"col_score":0.627425520789371},{"table":"inventory_transactions","fused":0.2443100900923712,"table_sim":0,"col_score":0.610775225230928},{"table":"employee_certifications","fused":0.24172134299486925,"table_sim":0,"col_score":0.6043033574871731}],"fk_expansion_candidates":42,"fk_expansion_added":2,"fk_expansion_blocked_count":36,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"already_selected"},{"table":"fixed_assets","reason":"already_selected"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"already_selected"},{"table":"sales_opportunities","reason":"already_selected"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":28,"total_retrieval_latency_ms":35,"sql_generated":"SELECT po.po_id AS \"Purchase Order ID\", po.order_date AS \"Order Date\", po.required_date AS \"Required Date\", vo.vendor_name AS \"Vendor Name\" FROM purchase_orders po JOIN vendor_invoices vo ON po.po_id = vo.po_id WHERE po.expected_date < CURRENT_DATE AND po.status != 'Received' ORDER BY po.order_date;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column po.required_date does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":0,"autocorrect_failure_reason":"No candidates found for column 'required_date'","total_latency_ms":3900,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column po.required_date does not exist"}
{"timestamp":"2026-01-29T21:28:27.473Z","query_id":"f21e2f1f-0cb3-4126-bca0-958903874409","question":"Show the approval rate for purchase requisitions","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["purchase_requisitions","purchase_orders","requisition_lines","performance_reviews","sales_orders","vendor_invoices","fixed_assets","timesheets","product_suppliers","inventory_adjustments","order_lines"],"tables_from_table_retrieval":6,"tables_from_column_only":11,"tables_from_fk_expansion":1,"table_scores":[{"table":"purchase_requisitions","similarity":0.7226292162446724},{"table":"purchase_requisitions","similarity":0.7226292162446724},{"table":"purchase_requisitions","similarity":0.7144537875190509},{"table":"purchase_orders","similarity":0.6838035609323098},{"table":"purchase_orders","similarity":0.6838035609323098},{"table":"purchase_orders","similarity":0.6754585362390629},{"table":"requisition_lines","similarity":0.6574096478940754},{"table":"requisition_lines","similarity":0.6574096478940754},{"table":"requisition_lines","similarity":0.6526067337493826},{"table":"performance_reviews","similarity":0.5761025171829891},{"table":"sales_orders","similarity":0.5687655577174364},{"table":"sales_orders","similarity":0.5687655577174364},{"table":"vendor_invoices","similarity":0.5649116344007853},{"table":"vendor_invoices","similarity":0.5649116344007853},{"table":"performance_reviews","similarity":0.5638451623641205}],"column_hits_per_table":{"purchase_requisitions":11,"purchase_orders":11,"requisition_lines":5,"performance_reviews":3,"inventory_adjustments":1,"fixed_assets":2,"order_lines":1,"budgets":1,"timesheets":2,"sales_orders":5,"employee_salaries":1,"project_expenses":1,"quote_lines":1,"tax_rates":1,"vendor_invoices":1,"product_suppliers":2,"project_resources":1},"top_columns_per_table":{"purchase_requisitions":[{"column":"approved_date","similarity":0.7766675210993076},{"column":"approved_by","similarity":0.7199034718995457},{"column":"status","similarity":0.7073786073810431}],"purchase_orders":[{"column":"approved_by","similarity":0.6705580315294349},{"column":"requisition_id","similarity":0.6613289750833529},{"column":"total","similarity":0.6594363248888107}],"requisition_lines":[{"column":"requisition_id","similarity":0.6370319480171334},{"column":"estimated_total","similarity":0.6269887433093003},{"column":"estimated_unit_cost","similarity":0.625934325952803}],"performance_reviews":[{"column":"goals_met_percent","similarity":0.6195475886627112},{"column":"rating","similarity":0.5921179439607568},{"column":"review_date","similarity":0.5730063449640999}],"inventory_adjustments":[{"column":"approved_by","similarity":0.6149213210803182}],"fixed_assets":[{"column":"purchase_cost","similarity":0.6114883686057044},{"column":"purchase_date","similarity":0.5785038067743914}],"order_lines":[{"column":"discount_percent","similarity":0.6106530783790173}],"budgets":[{"column":"approved_by","similarity":0.602834670385188}],"timesheets":[{"column":"approved_date","similarity":0.5978626810289969},{"column":"approved_by","similarity":0.5903213401616674}],"sales_orders":[{"column":"total","similarity":0.5972436821987498},{"column":"status","similarity":0.5843282149659323},{"column":"tax_amount","similarity":0.5804608469563398}],"employee_salaries":[{"column":"approved_by","similarity":0.593883247254701}],"project_expenses":[{"column":"approved_by","similarity":0.5842337880872422}],"quote_lines":[{"column":"discount_percent","similarity":0.5811124096463001}],"tax_rates":[{"column":"rate","similarity":0.5763708905847392}],"vendor_invoices":[{"column":"total","similarity":0.5756181171303799}],"product_suppliers":[{"column":"is_preferred","similarity":0.5726740078455087},{"column":"minimum_order_qty","similarity":0.5720268431578629}],"project_resources":[{"column":"hourly_rate","similarity":0.5723431863834083}]},"fused_scores":[{"table":"purchase_requisitions","fused":0.8833199753310628,"table_sim":0.7144537875190509,"col_score":1.1366192570490805},{"table":"purchase_orders","fused":0.8053855993329739,"table_sim":0.6754585362390629,"col_score":1.0002761939738403},{"table":"requisition_lines","fused":0.7675464027639103,"table_sim":0.6526067337493826,"col_score":0.9399559062857018},{"table":"performance_reviews","fused":0.7045497216757082,"table_sim":0.5638451623641205,"col_score":0.9156065606430897},{"table":"sales_orders","fused":0.6962489769012297,"table_sim":0.5687655577174364,"col_score":0.8874741056769198},{"table":"vendor_invoices","fused":0.5691942274926232,"table_sim":0.5649116344007853,"col_score":0.5756181171303799},{"table":"fixed_assets","fused":0.36029610879716006,"table_sim":0,"col_score":0.9007402719929001},{"table":"timesheets","fused":0.35720934044393227,"table_sim":0,"col_score":0.8930233511098306},{"table":"product_suppliers","fused":0.3434749717697761,"table_sim":0,"col_score":0.8586874294244402},{"table":"inventory_adjustments","fused":0.24596852843212727,"table_sim":0,"col_score":0.6149213210803182},{"table":"order_lines","fused":0.24426123135160693,"table_sim":0,"col_score":0.6106530783790173},{"table":"budgets","fused":0.24113386815407523,"table_sim":0,"col_score":0.602834670385188},{"table":"employee_salaries","fused":0.2375532989018804,"table_sim":0,"col_score":0.593883247254701},{"table":"project_expenses","fused":0.2336935152348969,"table_sim":0,"col_score":0.5842337880872422},{"table":"quote_lines","fused":0.23244496385852004,"table_sim":0,"col_score":0.5811124096463001}],"fk_expansion_candidates":60,"fk_expansion_added":1,"fk_expansion_blocked_count":57,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"order_lines","reason":"already_selected"},{"table":"order_lines","reason":"already_selected"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":17,"total_retrieval_latency_ms":24,"sql_generated":"SELECT COUNT(DISTINCT rl.requisition_id) AS approved_requisitions, COUNT(*) AS total_requisitions FROM requisition_lines rl JOIN performance_reviews pr ON rl.employee_id = pr.employee_id WHERE pr.rating >= 3;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column rl.employee_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":0,"autocorrect_failure_reason":"No candidates found for column 'employee_id'","total_latency_ms":2696,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column rl.employee_id does not exist"}
{"timestamp":"2026-01-29T21:28:30.169Z","query_id":"696923f0-e09a-4851-a91e-8aef2e475cc4","question":"What is the total debit and credit for each account in the current period?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["bank_accounts","depreciation_entries","depreciation_schedules","bank_transactions","chart_of_accounts","fiscal_periods","customers","project_budgets","project_expenses","budgets","journal_lines","sales_orders"],"tables_from_table_retrieval":7,"tables_from_column_only":20,"tables_from_fk_expansion":2,"table_scores":[{"table":"bank_accounts","similarity":0.6774767745272873},{"table":"bank_accounts","similarity":0.6637119412946053},{"table":"bank_accounts","similarity":0.6637119412946053},{"table":"depreciation_schedules","similarity":0.6498181514395631},{"table":"depreciation_schedules","similarity":0.6498181514395631},{"table":"depreciation_entries","similarity":0.648921875856853},{"table":"depreciation_entries","similarity":0.648921875856853},{"table":"depreciation_entries","similarity":0.6479655202571633},{"table":"depreciation_schedules","similarity":0.6391071490249879},{"table":"bank_transactions","similarity":0.6215432609525777},{"table":"bank_transactions","similarity":0.6186829982985472},{"table":"bank_transactions","similarity":0.6186829982985472},{"table":"fiscal_periods","similarity":0.6118740658020915},{"table":"chart_of_accounts","similarity":0.6113283904518393},{"table":"customers","similarity":0.6110220975215452}],"column_hits_per_table":{"bank_accounts":7,"depreciation_entries":8,"depreciation_schedules":7,"budgets":2,"purchase_orders":1,"bank_transactions":2,"vendor_invoices":1,"asset_categories":1,"timesheets":1,"sales_orders":1,"project_budgets":2,"po_lines":1,"requisition_lines":1,"order_lines":1,"chart_of_accounts":1,"quote_lines":1,"journal_lines":1,"departments":1,"sales_quotes":1,"fiscal_periods":1,"project_milestones":1,"account_types":1,"customers":1,"fixed_assets":1,"projects":1,"project_expenses":2,"inventory_levels":1},"top_columns_per_table":{"bank_accounts":[{"column":"current_balance","similarity":0.7091841928818097},{"column":"account_number","similarity":0.6419731099305319},{"column":"is_active","similarity":0.6295019659358201}],"depreciation_entries":[{"column":"amount","similarity":0.6872612675445888},{"column":"accumulated_depreciation","similarity":0.6792929796251425},{"column":"period_id","similarity":0.6616962014495356}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.6798083658343647},{"column":"monthly_amount","similarity":0.6722756292621933},{"column":"start_date","similarity":0.6548042836876464}],"budgets":[{"column":"total_amount","similarity":0.66266591023344},{"column":"status","similarity":0.6029088724565239}],"purchase_orders":[{"column":"total","similarity":0.6385670460750342}],"bank_transactions":[{"column":"amount","similarity":0.628826289554302},{"column":"transaction_date","similarity":0.5968086476507635}],"vendor_invoices":[{"column":"total","similarity":0.6243636979717804}],"asset_categories":[{"column":"depreciation_method","similarity":0.6240014992246529}],"timesheets":[{"column":"total_hours","similarity":0.6227337420930529}],"sales_orders":[{"column":"total","similarity":0.6223028921864684}],"project_budgets":[{"column":"actual_amount","similarity":0.617506824130773},{"column":"planned_amount","similarity":0.5941166158449659}],"po_lines":[{"column":"line_total","similarity":0.616731755167915}],"requisition_lines":[{"column":"estimated_total","similarity":0.6162717841911394}],"order_lines":[{"column":"line_total","similarity":0.6136225013161591}],"chart_of_accounts":[{"column":"account_number","similarity":0.6134827144686594}],"quote_lines":[{"column":"line_total","similarity":0.6119848744133741}],"journal_lines":[{"column":"debit","similarity":0.6106943672167331}],"departments":[{"column":"budget","similarity":0.6102538819136373}],"sales_quotes":[{"column":"total","similarity":0.6078976656380447}],"fiscal_periods":[{"column":"period_number","similarity":0.6051498655202864}],"project_milestones":[{"column":"amount","similarity":0.6026750191107226}],"account_types":[{"column":"normal_balance","similarity":0.6021368217241928}],"customers":[{"column":"credit_limit","similarity":0.6016687157986615}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5989518390574556}],"projects":[{"column":"budget","similarity":0.5989453113679677}],"project_expenses":[{"column":"amount","similarity":0.5956749512175924},{"column":"expense_date","similarity":0.5939500617562942}],"inventory_levels":[{"column":"last_count_date","similarity":0.5932624381452135}]},"fused_scores":[{"table":"bank_accounts","fused":0.8102954639155935,"table_sim":0.6637119412946053,"col_score":1.0301707478470756},{"table":"depreciation_entries","fused":0.799542415097162,"table_sim":0.6479655202571633,"col_score":1.0269077573571601},{"table":"depreciation_schedules","fused":0.7898427616011772,"table_sim":0.6391071490249879,"col_score":1.0159461804654613},{"table":"bank_transactions","fused":0.7421020443310018,"table_sim":0.6186829982985472,"col_score":0.9272306133796837},{"table":"chart_of_accounts","fused":0.6121901200585673,"table_sim":0.6113283904518393,"col_score":0.6134827144686594},{"table":"fiscal_periods","fused":0.6091843856893695,"table_sim":0.6118740658020915,"col_score":0.6051498655202864},{"table":"customers","fused":0.6072807448323918,"table_sim":0.6110220975215452,"col_score":0.6016687157986615},{"table":"project_budgets","fused":0.3658260528213024,"table_sim":0,"col_score":0.914565132053256},{"table":"project_expenses","fused":0.3570599928382958,"table_sim":0,"col_score":0.8926499820957394},{"table":"budgets","fused":0.3494736062372894,"table_sim":0,"col_score":0.8736840155932234},{"table":"purchase_orders","fused":0.2554268184300137,"table_sim":0,"col_score":0.6385670460750342},{"table":"vendor_invoices","fused":0.24974547918871215,"table_sim":0,"col_score":0.6243636979717804},{"table":"asset_categories","fused":0.24960059968986115,"table_sim":0,"col_score":0.6240014992246529},{"table":"timesheets","fused":0.24909349683722115,"table_sim":0,"col_score":0.6227337420930529},{"table":"sales_orders","fused":0.24892115687458738,"table_sim":0,"col_score":0.6223028921864684}],"fk_expansion_candidates":48,"fk_expansion_added":2,"fk_expansion_blocked_count":42,"fk_expansion_blocked":[{"table":"account_types","reason":"no_evidence"},{"table":"account_types","reason":"no_evidence"},{"table":"account_types","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_lines","reason":"already_selected"},{"table":"journal_lines","reason":"already_selected"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_orders","reason":"already_selected"},{"table":"sales_orders","reason":"already_selected"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":40,"total_retrieval_latency_ms":46,"sql_generated":"SELECT c.name AS account_name, SUM(jl.debit) AS total_debit, SUM(jl.credit) AS total_credit FROM chart_of_accounts c JOIN journal_lines jl ON c.account_id = jl.account_id WHERE EXISTS (SELECT 1 FROM depreciation_entries de JOIN fiscal_periods fp ON de.period_id = fp.period_id) AND fp.start_date <= CURRENT_DATE AND fp.end_date >= CURRENT_DATE GROUP BY c.name;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42P01","error_message":"missing FROM-clause entry for table \"fp\"","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_failure_reason":"Alias 'fp' not defined. Possible table: fiscal_periods. Define alias in FROM/JOIN clause.","total_latency_ms":5094,"failure_type":"join_path_miss","failure_details":"Database error after 3 attempts: missing FROM-clause entry for table \"fp\""}
{"timestamp":"2026-01-29T21:28:35.264Z","query_id":"93e349a2-94ae-4f52-825a-bf9e1ba01c33","question":"List all posted journal entries for the current month","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["journal_entries","journal_lines","depreciation_entries","timesheet_entries","depreciation_schedules","goods_receipts","performance_reviews","timesheets","purchase_orders","sales_orders","fiscal_periods"],"tables_from_table_retrieval":6,"tables_from_column_only":11,"tables_from_fk_expansion":1,"table_scores":[{"table":"journal_entries","similarity":0.7371200347881697},{"table":"journal_entries","similarity":0.7337575383913534},{"table":"journal_entries","similarity":0.7337575383913534},{"table":"depreciation_entries","similarity":0.6388628310824237},{"table":"journal_lines","similarity":0.6381042717949331},{"table":"journal_lines","similarity":0.6375228213542982},{"table":"journal_lines","similarity":0.6375228213542982},{"table":"depreciation_entries","similarity":0.620321548516075},{"table":"depreciation_entries","similarity":0.620321548516075},{"table":"timesheet_entries","similarity":0.591409348833156},{"table":"timesheet_entries","similarity":0.5779744014930662},{"table":"timesheet_entries","similarity":0.5779744014930662},{"table":"goods_receipts","similarity":0.5514372844287214},{"table":"goods_receipts","similarity":0.5514372844287214},{"table":"depreciation_schedules","similarity":0.5496411130563262}],"column_hits_per_table":{"journal_entries":9,"depreciation_entries":5,"journal_lines":7,"timesheet_entries":6,"timesheets":3,"goods_receipts":2,"performance_reviews":3,"purchase_orders":2,"project_budgets":1,"depreciation_schedules":3,"sales_orders":2,"inventory_adjustments":1,"project_milestones":2,"project_expenses":1,"asset_maintenance":1,"inventory_levels":1,"fiscal_periods":1},"top_columns_per_table":{"journal_entries":[{"column":"entry_date","similarity":0.7655855491601273},{"column":"status","similarity":0.7275626775552384},{"column":"description","similarity":0.6934262774097697}],"depreciation_entries":[{"column":"entry_date","similarity":0.6527378197389673},{"column":"journal_entry_id","similarity":0.6264997627243734},{"column":"period_id","similarity":0.5784124082329226}],"journal_lines":[{"column":"debit","similarity":0.6462162662227552},{"column":"entry_id","similarity":0.63445493384167},{"column":"credit","similarity":0.6302297921040358}],"timesheet_entries":[{"column":"entry_date","similarity":0.643149580648736},{"column":"description","similarity":0.5784471414475906},{"column":"is_billable","similarity":0.5646044939625099}],"timesheets":[{"column":"submitted_date","similarity":0.6071227188529923},{"column":"approved_date","similarity":0.558240470220022},{"column":"status","similarity":0.5546176605609148}],"goods_receipts":[{"column":"receipt_date","similarity":0.6069794047492042},{"column":"notes","similarity":0.5874873259337253}],"performance_reviews":[{"column":"review_date","similarity":0.5950094300516277},{"column":"review_period_start","similarity":0.5831041324802553},{"column":"review_period_end","similarity":0.5815085145824492}],"purchase_orders":[{"column":"expected_date","similarity":0.5699322697921354},{"column":"order_date","similarity":0.5626891014743185}],"project_budgets":[{"column":"notes","similarity":0.5673321472292275}],"depreciation_schedules":[{"column":"start_date","similarity":0.5658993130104887},{"column":"end_date","similarity":0.5657267369208648},{"column":"useful_life_months","similarity":0.55595733939211}],"sales_orders":[{"column":"order_date","similarity":0.5624106989815346},{"column":"ship_date","similarity":0.5530449744222993}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.5603354872689613}],"project_milestones":[{"column":"due_date","similarity":0.5592106844491532},{"column":"completed_date","similarity":0.5526238895701121}],"project_expenses":[{"column":"expense_date","similarity":0.5579679430250829}],"asset_maintenance":[{"column":"completed_date","similarity":0.5568546149961348}],"inventory_levels":[{"column":"last_count_date","similarity":0.5485679778292861}],"fiscal_periods":[{"column":"start_date","similarity":0.5482872222538088}]},"fused_scores":[{"table":"journal_entries","fused":0.8831407330933849,"table_sim":0.7337575383913534,"col_score":1.1072155251464324},{"table":"journal_lines","fused":0.7670461577224882,"table_sim":0.6375228213542982,"col_score":0.9613311622747731},{"table":"depreciation_entries","fused":0.7482943452989723,"table_sim":0.620321548516075,"col_score":0.9402535404733183},{"table":"timesheet_entries","fused":0.7169653719478362,"table_sim":0.5779744014930662,"col_score":0.9254518276299909},{"table":"depreciation_schedules","fused":0.6692897404221642,"table_sim":0.5496411130563262,"col_score":0.848762681470921},{"table":"goods_receipts","fused":0.6559023581876361,"table_sim":0.5514372844287214,"col_score":0.812599968826008},{"table":"performance_reviews","fused":0.35462459851670214,"table_sim":0,"col_score":0.8865614962917553},{"table":"timesheets","fused":0.3544971815852013,"table_sim":0,"col_score":0.8862429539630032},{"table":"purchase_orders","fused":0.3405107282117179,"table_sim":0,"col_score":0.8512768205292947},{"table":"sales_orders","fused":0.33557327447707375,"table_sim":0,"col_score":0.8389331861926843},{"table":"project_milestones","fused":0.33420905169368376,"table_sim":0,"col_score":0.8355226292342093},{"table":"inventory_adjustments","fused":0.22413419490758454,"table_sim":0,"col_score":0.5603354872689613},{"table":"project_expenses","fused":0.22318717721003317,"table_sim":0,"col_score":0.5579679430250829},{"table":"asset_maintenance","fused":0.22274184599845392,"table_sim":0,"col_score":0.5568546149961348},{"table":"inventory_levels","fused":0.21942719113171447,"table_sim":0,"col_score":0.5485679778292861}],"fk_expansion_candidates":51,"fk_expansion_added":1,"fk_expansion_blocked_count":48,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"already_selected"},{"table":"fiscal_periods","reason":"already_selected"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":18,"total_retrieval_latency_ms":24,"sql_generated":"SELECT j.entry_id AS entry_id, j.entry_number AS entry_number, j.entry_date AS entry_date, jl.account_id AS account_id, jl.debit AS debit, jl.credit AS credit, d.monthly_amount AS monthly_amount FROM journal_entries j JOIN journal_lines jl ON j.entry_id = jl.entry_id JOIN depreciation_schedules d ON j.period_id = d.start_date WHERE EXTRACT(MONTH FROM CURRENT_DATE) = EXTRACT(MONTH FROM j.entry_date);","tables_used_in_sql":[],"total_latency_ms":5570,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T21:28:40.834Z","query_id":"521b41e2-13f5-4e23-85b3-c7011a5cca31","question":"Show budget vs actual spending by department","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["budgets","project_budgets","departments","project_expenses","budget_lines","cost_centers","fiscal_periods","projects","fixed_assets","fiscal_years"],"tables_from_table_retrieval":6,"tables_from_column_only":9,"tables_from_fk_expansion":0,"table_scores":[{"table":"budgets","similarity":0.6743467953278661},{"table":"budgets","similarity":0.6696787142109972},{"table":"budgets","similarity":0.6696787142109972},{"table":"project_budgets","similarity":0.6399342167994372},{"table":"project_budgets","similarity":0.625479815809335},{"table":"project_budgets","similarity":0.625479815809335},{"table":"budget_lines","similarity":0.6120027063639643},{"table":"departments","similarity":0.6078621456074449},{"table":"budget_lines","similarity":0.5989246191783324},{"table":"budget_lines","similarity":0.5989246191783324},{"table":"cost_centers","similarity":0.5976264909955187},{"table":"project_expenses","similarity":0.5925480261881607},{"table":"departments","similarity":0.5844440352873819},{"table":"departments","similarity":0.5844440352873819},{"table":"cost_centers","similarity":0.5713648686111387}],"column_hits_per_table":{"departments":5,"budgets":8,"project_budgets":6,"projects":1,"cost_centers":4,"budget_lines":5,"project_expenses":10,"purchase_requisitions":1,"fiscal_periods":4,"employees":1,"fixed_assets":1,"positions":1,"journal_lines":1,"fiscal_years":1,"requisition_lines":1},"top_columns_per_table":{"departments":[{"column":"budget","similarity":0.7495917239034583},{"column":"name","similarity":0.5755650515829921},{"column":"parent_department_id","similarity":0.5706427726662122}],"budgets":[{"column":"department_id","similarity":0.6950775126936677},{"column":"total_amount","similarity":0.667786554654465},{"column":"status","similarity":0.6456108671424535}],"project_budgets":[{"column":"actual_amount","similarity":0.6672453210209517},{"column":"category","similarity":0.6364564423512089},{"column":"planned_amount","similarity":0.6313162099542824}],"projects":[{"column":"budget","similarity":0.6339398871894302}],"cost_centers":[{"column":"department_id","similarity":0.6309159447379118},{"column":"is_active","similarity":0.5725191475396931},{"column":"name","similarity":0.5342580632651498}],"budget_lines":[{"column":"amount","similarity":0.6270291557125669},{"column":"budget_id","similarity":0.6119783533872745},{"column":"period_id","similarity":0.5916602644004139}],"project_expenses":[{"column":"category","similarity":0.6091416233792963},{"column":"amount","similarity":0.608230851250711},{"column":"is_billable","similarity":0.6010086163947923}],"purchase_requisitions":[{"column":"department_id","similarity":0.5868126293907591}],"fiscal_periods":[{"column":"period_number","similarity":0.5573405580706999},{"column":"is_closed","similarity":0.5486176225532576},{"column":"fiscal_year_id","similarity":0.542120776396656}],"employees":[{"column":"department_id","similarity":0.549593783899725}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5426840706112633}],"positions":[{"column":"department_id","similarity":0.5422206846512622}],"journal_lines":[{"column":"cost_center_id","similarity":0.5404923386923173}],"fiscal_years":[{"column":"year","similarity":0.5379300104521342}],"requisition_lines":[{"column":"estimated_unit_cost","similarity":0.5310951239241254}]},"fused_scores":[{"table":"budgets","fused":0.7927672704314797,"table_sim":0.6696787142109972,"col_score":0.9774001047622032},{"table":"project_budgets","fused":0.7694773063642235,"table_sim":0.625479815809335,"col_score":0.9854735421965561},{"table":"departments","fused":0.7310822179554313,"table_sim":0.5844440352873819,"col_score":0.9510394919575055},{"table":"project_expenses","fused":0.7208316353147572,"table_sim":0.5925480261881607,"col_score":0.9132570490046519},{"table":"budget_lines","fused":0.6958434032662446,"table_sim":0.5989246191783324,"col_score":0.8412215793981129},{"table":"cost_centers","fused":0.6440128307218487,"table_sim":0.5713648686111387,"col_score":0.7529847738879138},{"table":"fiscal_periods","fused":0.33265974773893153,"table_sim":0,"col_score":0.8316493693473288},{"table":"projects","fused":0.25357595487577206,"table_sim":0,"col_score":0.6339398871894302},{"table":"fixed_assets","fused":0.21707362824450535,"table_sim":0,"col_score":0.5426840706112633},{"table":"fiscal_years","fused":0.2151720041808537,"table_sim":0,"col_score":0.5379300104521342},{"table":"requisition_lines","fused":0.21243804956965018,"table_sim":0,"col_score":0.5310951239241254},{"table":"purchase_requisitions","fused":0.16430753622941252,"table_sim":0,"col_score":0.4107688405735313},{"table":"employees","fused":0.15388625949192303,"table_sim":0,"col_score":0.3847156487298075},{"table":"positions","fused":0.1518217917023534,"table_sim":0,"col_score":0.3795544792558835},{"table":"journal_lines","fused":0.15133785483384884,"table_sim":0,"col_score":0.37834463708462207}],"fk_expansion_candidates":57,"fk_expansion_added":0,"fk_expansion_blocked_count":57,"fk_expansion_blocked":[{"table":"asset_categories","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"project_milestones","reason":"no_evidence"},{"table":"project_milestones","reason":"no_evidence"},{"table":"project_milestones","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":22,"total_retrieval_latency_ms":29,"sql_generated":"SELECT d.name AS department_name, b.total_amount AS total_budget, SUM(p.actual_amount) AS total_actual_spending FROM departments d LEFT JOIN budgets b ON d.department_id = b.department_id AND b.status = 'approved' GROUP BY d.name, b.total_amount;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42P01","error_message":"missing FROM-clause entry for table \"p\"","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_failure_reason":"Alias 'p' not defined. Possible table: project_budgets. Define alias in FROM/JOIN clause.","total_latency_ms":3091,"failure_type":"join_path_miss","failure_details":"Database error after 3 attempts: missing FROM-clause entry for table \"p\""}
{"timestamp":"2026-01-29T21:28:43.926Z","query_id":"c10196b9-c632-4e28-9d6b-7568b17ea3d2","question":"What is the total expense amount per project?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["project_expenses","project_budgets","projects","project_resources","project_milestones","requisition_lines","vendor_invoices","project_tasks","purchase_orders","depreciation_schedules","products","vendor_invoice_lines"],"tables_from_table_retrieval":5,"tables_from_column_only":19,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_expenses","similarity":0.7579256306198433},{"table":"project_expenses","similarity":0.7579256306198433},{"table":"project_expenses","similarity":0.7357232557396823},{"table":"project_budgets","similarity":0.7265263943390426},{"table":"project_budgets","similarity":0.7265263943390426},{"table":"project_budgets","similarity":0.7124927404351951},{"table":"project_milestones","similarity":0.6341783562502439},{"table":"project_milestones","similarity":0.6327617739785869},{"table":"project_milestones","similarity":0.6327617739785869},{"table":"projects","similarity":0.621762698662178},{"table":"projects","similarity":0.621762698662178},{"table":"project_resources","similarity":0.6179077692716867},{"table":"project_resources","similarity":0.6179077692716867},{"table":"project_resources","similarity":0.6177078775243305},{"table":"projects","similarity":0.6089962100611707}],"column_hits_per_table":{"project_expenses":10,"project_budgets":6,"budgets":1,"projects":2,"project_milestones":3,"budget_lines":1,"project_resources":3,"vendor_invoices":3,"requisition_lines":2,"project_tasks":2,"asset_maintenance":1,"purchase_orders":2,"product_suppliers":1,"maintenance_types":1,"products":1,"depreciation_schedules":2,"sales_orders":1,"departments":1,"depreciation_entries":1,"employee_salaries":1,"fixed_assets":1,"vendor_invoice_lines":2,"cost_centers":1,"bank_transactions":1},"top_columns_per_table":{"project_expenses":[{"column":"amount","similarity":0.7981720469231877},{"column":"project_id","similarity":0.6993700351285576},{"column":"expense_date","similarity":0.6976862753776708}],"project_budgets":[{"column":"actual_amount","similarity":0.7544693731428739},{"column":"planned_amount","similarity":0.7475286878234714},{"column":"notes","similarity":0.6743372266880852}],"budgets":[{"column":"total_amount","similarity":0.7244402768016153}],"projects":[{"column":"budget","similarity":0.7063289030461566},{"column":"project_number","similarity":0.6281879793284453}],"project_milestones":[{"column":"amount","similarity":0.6973822743170455},{"column":"project_id","similarity":0.6134928683540164},{"column":"description","similarity":0.5964450815919577}],"budget_lines":[{"column":"amount","similarity":0.6474203598538232}],"project_resources":[{"column":"allocation_percent","similarity":0.6462989167237004},{"column":"hourly_rate","similarity":0.6385625515015617},{"column":"project_id","similarity":0.6168915789933885}],"vendor_invoices":[{"column":"total","similarity":0.6401126688839376},{"column":"tax_amount","similarity":0.6065038506039637},{"column":"amount_paid","similarity":0.6026309455729351}],"requisition_lines":[{"column":"estimated_total","similarity":0.6310334497515143},{"column":"estimated_unit_cost","similarity":0.6268164964734461}],"project_tasks":[{"column":"estimated_hours","similarity":0.6305074503163082},{"column":"actual_hours","similarity":0.6251982989877009}],"asset_maintenance":[{"column":"cost","similarity":0.6261574066715916}],"purchase_orders":[{"column":"total","similarity":0.6208795786058339},{"column":"tax_amount","similarity":0.6034316104821902}],"product_suppliers":[{"column":"unit_cost","similarity":0.6203195070815227}],"maintenance_types":[{"column":"estimated_cost","similarity":0.6200443707585799}],"products":[{"column":"unit_cost","similarity":0.6147011653596138}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.614550945299665},{"column":"monthly_amount","similarity":0.6065005360138125}],"sales_orders":[{"column":"total","similarity":0.6137682710613002}],"departments":[{"column":"budget","similarity":0.6129728617339807}],"depreciation_entries":[{"column":"amount","similarity":0.6104740649740648}],"employee_salaries":[{"column":"amount","similarity":0.6103603528626569}],"fixed_assets":[{"column":"purchase_cost","similarity":0.6026468504879459}],"vendor_invoice_lines":[{"column":"amount","similarity":0.6003959822481075},{"column":"unit_cost","similarity":0.5981934490405764}],"cost_centers":[{"column":"department_id","similarity":0.6003827939727152}],"bank_transactions":[{"column":"amount","similarity":0.5987202435335099}]},"fused_scores":[{"table":"project_expenses","fused":0.9002400272886186,"table_sim":0.7357232557396823,"col_score":1.1470151846120231},{"table":"project_budgets","fused":0.8787891310829609,"table_sim":0.7124927404351951,"col_score":1.1282337170546095},{"table":"projects","fused":0.7735668831208542,"table_sim":0.6089962100611707,"col_score":1.0204228927103793},{"table":"project_resources","fused":0.7568568035043909,"table_sim":0.6177078775243305,"col_score":0.9655801924744813},{"table":"project_milestones","fused":0.7444989756835327,"table_sim":0.6327617739785869,"col_score":0.9121047782409513},{"table":"requisition_lines","fused":0.37777667919529495,"table_sim":0,"col_score":0.9444416979882373},{"table":"vendor_invoices","fused":0.3773458376743678,"table_sim":0,"col_score":0.9433645941859194},{"table":"project_tasks","fused":0.3772426399240635,"table_sim":0,"col_score":0.9431065998101587},{"table":"purchase_orders","fused":0.3690381535387716,"table_sim":0,"col_score":0.922595383846929},{"table":"depreciation_schedules","fused":0.36712048532262853,"table_sim":0,"col_score":0.9178012133065713},{"table":"vendor_invoice_lines","fused":0.35979708270735833,"table_sim":0,"col_score":0.8994927067683958},{"table":"budgets","fused":0.28977611072064613,"table_sim":0,"col_score":0.7244402768016153},{"table":"budget_lines","fused":0.2589681439415293,"table_sim":0,"col_score":0.6474203598538232},{"table":"asset_maintenance","fused":0.25046296266863666,"table_sim":0,"col_score":0.6261574066715916},{"table":"product_suppliers","fused":0.2481278028326091,"table_sim":0,"col_score":0.6203195070815227}],"fk_expansion_candidates":39,"fk_expansion_added":2,"fk_expansion_blocked_count":33,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"already_selected"},{"table":"products","reason":"already_selected"},{"table":"project_phases","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"already_selected"},{"table":"vendor_invoice_lines","reason":"already_selected"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":23,"total_retrieval_latency_ms":30,"sql_generated":"SELECT pr.project_id AS \"ProjectID\", SUM(pe.amount) AS \"TotalExpenses\" FROM projects pr JOIN project_expenses pe ON pr.project_id = pe.project_id GROUP BY pr.project_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":100,"total_latency_ms":801}
{"timestamp":"2026-01-29T21:28:44.727Z","query_id":"63f8c755-e94f-4060-8efa-c5e87f09ecdc","question":"List projects that are over budget","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["project_budgets","project_expenses","projects","budgets","project_milestones","project_resources","project_tasks","budget_lines","departments"],"tables_from_table_retrieval":6,"tables_from_column_only":3,"tables_from_fk_expansion":0,"table_scores":[{"table":"project_budgets","similarity":0.722964742520668},{"table":"project_budgets","similarity":0.7149382810327576},{"table":"project_budgets","similarity":0.7149382810327576},{"table":"project_expenses","similarity":0.6616137568759273},{"table":"project_expenses","similarity":0.6616137568759273},{"table":"project_expenses","similarity":0.6612139885640923},{"table":"project_milestones","similarity":0.6086742516860566},{"table":"projects","similarity":0.6032117409064212},{"table":"projects","similarity":0.6032117409064212},{"table":"projects","similarity":0.603119867291799},{"table":"project_resources","similarity":0.597322584800267},{"table":"project_milestones","similarity":0.5963753466104804},{"table":"project_milestones","similarity":0.5963753466104804},{"table":"budgets","similarity":0.5962983646598873},{"table":"budgets","similarity":0.5962983646598873}],"column_hits_per_table":{"projects":10,"project_budgets":6,"project_expenses":9,"budgets":6,"budget_lines":3,"project_milestones":4,"project_tasks":8,"project_resources":3,"departments":1},"top_columns_per_table":{"projects":[{"column":"budget","similarity":0.7040586919716509},{"column":"planned_end_date","similarity":0.6178230121937325},{"column":"project_number","similarity":0.6141630378138243}],"project_budgets":[{"column":"notes","similarity":0.6952498482759191},{"column":"category","similarity":0.684511328503381},{"column":"planned_amount","similarity":0.6722268345754978}],"project_expenses":[{"column":"is_billable","similarity":0.6461941542288852},{"column":"category","similarity":0.6420132273918641},{"column":"expense_date","similarity":0.63434637160428}],"budgets":[{"column":"total_amount","similarity":0.614370809503817},{"column":"status","similarity":0.6108205553547363},{"column":"budget_id","similarity":0.5929594782171785}],"budget_lines":[{"column":"budget_id","similarity":0.6079961535935847},{"column":"amount","similarity":0.6077961190977996},{"column":"line_id","similarity":0.5893204834240592}],"project_milestones":[{"column":"is_billable","similarity":0.6071449572441574},{"column":"amount","similarity":0.588199497133572},{"column":"due_date","similarity":0.5812913433040277}],"project_tasks":[{"column":"estimated_hours","similarity":0.5963088711841054},{"column":"due_date","similarity":0.5950349513196225},{"column":"actual_hours","similarity":0.5923374564661072}],"project_resources":[{"column":"allocation_percent","similarity":0.5884306445284694},{"column":"project_id","similarity":0.584485395721684},{"column":"end_date","similarity":0.5723455956479002}],"departments":[{"column":"budget","similarity":0.5759799767407416}]},"fused_scores":[{"table":"project_budgets","fused":0.8372128669361065,"table_sim":0.7149382810327576,"col_score":1.02062474579113},{"table":"project_expenses","fused":0.7836087003083823,"table_sim":0.6612139885640923,"col_score":0.9672007679248171},{"table":"projects","fused":0.7670599996024863,"table_sim":0.603119867291799,"col_score":1.0129701980685173},{"table":"budgets","fused":0.7209543495760293,"table_sim":0.5962983646598873,"col_score":0.9079383269502421},{"table":"project_milestones","fused":0.7183230902906657,"table_sim":0.5963753466104804,"col_score":0.9012447058109434},{"table":"project_resources","fused":0.708234927821128,"table_sim":0.597322584800267,"col_score":0.8746034423524195},{"table":"project_tasks","fused":0.3575305387375667,"table_sim":0,"col_score":0.8938263468439166},{"table":"budget_lines","fused":0.32823790914222173,"table_sim":0,"col_score":0.8205947728555543},{"table":"departments","fused":0.23039199069629668,"table_sim":0,"col_score":0.5759799767407416}],"fk_expansion_candidates":33,"fk_expansion_added":0,"fk_expansion_blocked_count":33,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":22,"total_retrieval_latency_ms":29,"sql_generated":"SELECT p.project_id AS ProjectID, p.name AS ProjectName, b.total_amount AS TotalBudget, SUM(pte.actual_hours) AS ActualHoursSpent FROM projects p INNER JOIN budgets b ON p.budget = b.budget_id INNER JOIN project_tasks pte ON p.project_id = pte.project_id GROUP BY p.project_id, p.name, b.total_amount HAVING SUM(pte.actual_hours) > (SELECT planned_amount FROM budgets WHERE budget_id = p.budget) LIMIT 1000;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column pte.project_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_correction":"Replaced 'budget_id' with 'budget' (prefix, score: 0.85)","autocorrect_candidates":3,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":5450,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column pte.project_id does not exist"}
{"timestamp":"2026-01-29T21:28:50.178Z","query_id":"33299bed-cba2-4703-a6b4-9aa4d2bb1bad","question":"Show project resources and their allocation percentages","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["project_resources","project_budgets","projects","project_expenses","project_milestones","project_tasks","task_assignments","project_phases","asset_categories","order_lines"],"tables_from_table_retrieval":7,"tables_from_column_only":8,"tables_from_fk_expansion":0,"table_scores":[{"table":"project_resources","similarity":0.7742133717857291},{"table":"project_resources","similarity":0.7726017161069211},{"table":"project_resources","similarity":0.7726017161069211},{"table":"project_budgets","similarity":0.65507694472865},{"table":"project_budgets","similarity":0.6455070367212973},{"table":"project_budgets","similarity":0.6455070367212973},{"table":"project_expenses","similarity":0.6350034671876015},{"table":"projects","similarity":0.6288717870995568},{"table":"project_expenses","similarity":0.6218657368982583},{"table":"project_expenses","similarity":0.6218657368982583},{"table":"task_assignments","similarity":0.6137701156863598},{"table":"project_tasks","similarity":0.6095803048417692},{"table":"project_milestones","similarity":0.6065393117891723},{"table":"projects","similarity":0.6043704297265652},{"table":"projects","similarity":0.6043704297265652}],"column_hits_per_table":{"project_resources":8,"project_budgets":6,"projects":10,"asset_categories":1,"project_milestones":4,"project_expenses":7,"project_tasks":5,"order_lines":1,"quote_lines":1,"performance_reviews":1,"budgets":1,"project_phases":3,"currencies":1,"tax_rates":1},"top_columns_per_table":{"project_resources":[{"column":"allocation_percent","similarity":0.8633059160366073},{"column":"hourly_rate","similarity":0.7567099176701401},{"column":"role","similarity":0.6958791512171763}],"project_budgets":[{"column":"actual_amount","similarity":0.6563642230002711},{"column":"planned_amount","similarity":0.6553043653436582},{"column":"category","similarity":0.6379137974118141}],"projects":[{"column":"priority","similarity":0.6469555758830943},{"column":"budget","similarity":0.6427722399625124},{"column":"project_number","similarity":0.6401181954274701}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.6435021784071759}],"project_milestones":[{"column":"amount","similarity":0.6398826628819255},{"column":"due_date","similarity":0.6049153702959417},{"column":"description","similarity":0.5917008678550857}],"project_expenses":[{"column":"amount","similarity":0.6242586475384743},{"column":"category","similarity":0.6142015362068918},{"column":"description","similarity":0.6079819074448459}],"project_tasks":[{"column":"priority","similarity":0.6242534548890795},{"column":"actual_hours","similarity":0.6180862719180372},{"column":"due_date","similarity":0.6052605786793172}],"order_lines":[{"column":"discount_percent","similarity":0.5942047522544827}],"quote_lines":[{"column":"discount_percent","similarity":0.5937287046720631}],"performance_reviews":[{"column":"goals_met_percent","similarity":0.5894147308873736}],"budgets":[{"column":"total_amount","similarity":0.5872817125068575}],"project_phases":[{"column":"project_id","similarity":0.5861825792508847},{"column":"sequence","similarity":0.5827342342492163},{"column":"description","similarity":0.5826479776722895}],"currencies":[{"column":"exchange_rate","similarity":0.5799546058797589}],"tax_rates":[{"column":"rate","similarity":0.5799367806129271}]},"fused_scores":[{"table":"project_resources","fused":0.9602253796128235,"table_sim":0.7726017161069211,"col_score":1.2416608748716773},{"table":"project_budgets","fused":0.7809107843016184,"table_sim":0.6455070367212973,"col_score":0.9840164056721001},{"table":"projects","fused":0.7499589361816793,"table_sim":0.6043704297265652,"col_score":0.9683416958643505},{"table":"project_expenses","fused":0.7456632083957231,"table_sim":0.6218657368982583,"col_score":0.9313594156419202},{"table":"project_milestones","fused":0.7408597262854619,"table_sim":0.6065393117891723,"col_score":0.9423403480298964},{"table":"project_tasks","fused":0.7390668192443008,"table_sim":0.6095803048417692,"col_score":0.9332965908480981},{"table":"task_assignments","fused":0.36826206941181583,"table_sim":0.6137701156863598,"col_score":0},{"table":"project_phases","fused":0.3151592547948104,"table_sim":0,"col_score":0.7878981369870259},{"table":"asset_categories","fused":0.2574008713628704,"table_sim":0,"col_score":0.6435021784071759},{"table":"order_lines","fused":0.2376819009017931,"table_sim":0,"col_score":0.5942047522544827},{"table":"quote_lines","fused":0.23749148186882524,"table_sim":0,"col_score":0.5937287046720631},{"table":"performance_reviews","fused":0.23576589235494946,"table_sim":0,"col_score":0.5894147308873736},{"table":"budgets","fused":0.23491268500274298,"table_sim":0,"col_score":0.5872817125068575},{"table":"currencies","fused":0.23198184235190356,"table_sim":0,"col_score":0.5799546058797589},{"table":"tax_rates","fused":0.23197471224517086,"table_sim":0,"col_score":0.5799367806129271}],"fk_expansion_candidates":18,"fk_expansion_added":0,"fk_expansion_blocked_count":18,"fk_expansion_blocked":[{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":19,"total_retrieval_latency_ms":26,"sql_generated":"SELECT pr.project_id AS \"ProjectID\", rr.role AS \"Role\", rr.allocation_percent AS \"AllocationPercent\" FROM project_resources AS rr JOIN projects AS pr ON rr.project_id = pr.project_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":300,"total_latency_ms":874}
{"timestamp":"2026-01-29T21:28:51.052Z","query_id":"919d49f9-411c-4ff9-a3e8-5c96e4f1d7a0","question":"List fixed assets by category with their total purchase cost","attempt_count":3,"retry_succeeded":true,"execution_success":true,"retriever_version":"V2","tables_retrieved":["fixed_assets","asset_categories","asset_maintenance","products","depreciation_schedules","purchase_orders","depreciation_entries","asset_transfers","purchase_requisitions","project_expenses","departments","maintenance_types"],"tables_from_table_retrieval":5,"tables_from_column_only":12,"tables_from_fk_expansion":2,"table_scores":[{"table":"fixed_assets","similarity":0.7671508108800839},{"table":"fixed_assets","similarity":0.7671508108800839},{"table":"fixed_assets","similarity":0.7654083493676195},{"table":"asset_categories","similarity":0.7259858085236982},{"table":"asset_categories","similarity":0.72092108607088},{"table":"asset_categories","similarity":0.72092108607088},{"table":"asset_maintenance","similarity":0.6539211907012796},{"table":"asset_maintenance","similarity":0.6348030204988977},{"table":"asset_maintenance","similarity":0.6348030204988977},{"table":"products","similarity":0.6262946781709159},{"table":"products","similarity":0.6262946781709159},{"table":"depreciation_schedules","similarity":0.6168004716425273},{"table":"depreciation_schedules","similarity":0.6168004716425273},{"table":"products","similarity":0.614929355062545},{"table":"depreciation_schedules","similarity":0.6121354509873786}],"column_hits_per_table":{"fixed_assets":17,"asset_maintenance":5,"asset_categories":5,"purchase_orders":5,"asset_transfers":2,"depreciation_entries":2,"project_expenses":1,"products":2,"depreciation_schedules":1,"project_budgets":1,"maintenance_types":1,"purchase_requisitions":3,"sales_orders":1,"budgets":1,"departments":1,"product_categories":1,"product_suppliers":1},"top_columns_per_table":{"fixed_assets":[{"column":"purchase_cost","similarity":0.8198772015639547},{"column":"purchase_date","similarity":0.7467731747895039},{"column":"category_id","similarity":0.7278001390498363}],"asset_maintenance":[{"column":"cost","similarity":0.6959112135520997},{"column":"asset_id","similarity":0.6605498780552402},{"column":"status","similarity":0.6365694723201099}],"asset_categories":[{"column":"depreciation_method","similarity":0.6914816579489624},{"column":"salvage_value_percent","similarity":0.6861491499470286},{"column":"name","similarity":0.680679494396876}],"purchase_orders":[{"column":"total","similarity":0.670586118670476},{"column":"shipping_cost","similarity":0.640379738676011},{"column":"subtotal","similarity":0.637971799251016}],"asset_transfers":[{"column":"asset_id","similarity":0.6625737391840324},{"column":"reason","similarity":0.6105152608091542}],"depreciation_entries":[{"column":"asset_id","similarity":0.661025419881134},{"column":"accumulated_depreciation","similarity":0.6155524514035258}],"project_expenses":[{"column":"category","similarity":0.6464899039427223}],"products":[{"column":"unit_cost","similarity":0.642832807024477},{"column":"list_price","similarity":0.6321686201995896}],"depreciation_schedules":[{"column":"asset_id","similarity":0.6414080766024978}],"project_budgets":[{"column":"category","similarity":0.6328605061405524}],"maintenance_types":[{"column":"estimated_cost","similarity":0.6315283480937153}],"purchase_requisitions":[{"column":"status","similarity":0.62811109700508},{"column":"requisition_number","similarity":0.6166193497762641},{"column":"notes","similarity":0.6141499806901694}],"sales_orders":[{"column":"total","similarity":0.6248918377251549}],"budgets":[{"column":"total_amount","similarity":0.6163584124223674}],"departments":[{"column":"budget","similarity":0.615804850011434}],"product_categories":[{"column":"description","similarity":0.6126142026531948}],"product_suppliers":[{"column":"unit_cost","similarity":0.611791518325227}]},"fused_scores":[{"table":"fixed_assets","fused":0.9365505252040545,"table_sim":0.7654083493676195,"col_score":1.1932637889587068},{"table":"asset_categories","fused":0.8463751448115187,"table_sim":0.72092108607088,"col_score":1.0345562329224767},{"table":"asset_maintenance","fused":0.7831805519609546,"table_sim":0.6348030204988977,"col_score":1.00574684915404},{"table":"products","fused":0.7525244598872358,"table_sim":0.614929355062545,"col_score":0.9589171171242719},{"table":"depreciation_schedules","fused":0.5468755320411265,"table_sim":0.6121354509873786,"col_score":0.4489856536217484},{"table":"purchase_orders","fused":0.3963103952033926,"table_sim":0,"col_score":0.9907759880084814},{"table":"depreciation_entries","fused":0.3387645393447691,"table_sim":0,"col_score":0.8469113483619226},{"table":"asset_transfers","fused":0.3369664278094262,"table_sim":0,"col_score":0.8424160695235655},{"table":"purchase_requisitions","fused":0.33458329349121685,"table_sim":0,"col_score":0.8364582337280421},{"table":"project_expenses","fused":0.2585959615770889,"table_sim":0,"col_score":0.6464899039427223},{"table":"project_budgets","fused":0.253144202456221,"table_sim":0,"col_score":0.6328605061405524},{"table":"maintenance_types","fused":0.25261133923748613,"table_sim":0,"col_score":0.6315283480937153},{"table":"sales_orders","fused":0.24995673509006197,"table_sim":0,"col_score":0.6248918377251549},{"table":"budgets","fused":0.246543364968947,"table_sim":0,"col_score":0.6163584124223674},{"table":"departments","fused":0.24632194000457364,"table_sim":0,"col_score":0.615804850011434}],"fk_expansion_candidates":72,"fk_expansion_added":2,"fk_expansion_blocked_count":63,"fk_expansion_blocked":[{"table":"employees","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"departments","reason":"already_selected"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"maintenance_types","reason":"already_selected"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"departments","reason":"already_selected"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"product_suppliers","reason":"max_tables"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"product_suppliers","reason":"max_tables"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"product_suppliers","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"maintenance_types","reason":"already_selected"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":28,"total_retrieval_latency_ms":35,"sql_generated":"SELECT af.category_id AS category, SUM(af.purchase_cost) AS total_purchase_cost FROM fixed_assets af GROUP BY af.category_id;","tables_used_in_sql":[],"explain_result":"success","sqlstate":"42703","error_message":"column ac.asset_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":3,"autocorrect_failure_reason":"Replacement pattern not found in SQL","rows_returned":7,"total_latency_ms":2052}
{"timestamp":"2026-01-29T21:28:53.104Z","query_id":"7eeed118-456f-4aa3-be9a-fdeb10e98df6","question":"List assets due for maintenance in the next 30 days","attempt_count":2,"retry_succeeded":true,"execution_success":true,"retriever_version":"V2","tables_retrieved":["asset_maintenance","fixed_assets","depreciation_schedules","asset_transfers","maintenance_types","depreciation_entries","project_expenses","inventory_adjustments","project_tasks","employee_benefits","asset_categories"],"tables_from_table_retrieval":5,"tables_from_column_only":10,"tables_from_fk_expansion":1,"table_scores":[{"table":"asset_maintenance","similarity":0.7135403855722379},{"table":"asset_maintenance","similarity":0.7135403855722379},{"table":"asset_maintenance","similarity":0.6994637000895678},{"table":"fixed_assets","similarity":0.6764596229184475},{"table":"fixed_assets","similarity":0.6733613177336575},{"table":"fixed_assets","similarity":0.6733613177336575},{"table":"depreciation_schedules","similarity":0.6273221911861584},{"table":"depreciation_schedules","similarity":0.6165498794694232},{"table":"depreciation_schedules","similarity":0.6165498794694232},{"table":"maintenance_types","similarity":0.5989446217445276},{"table":"maintenance_types","similarity":0.5989446217445276},{"table":"asset_transfers","similarity":0.5971719320807494},{"table":"maintenance_types","similarity":0.5961062154680403},{"table":"asset_transfers","similarity":0.5960224713409419},{"table":"asset_transfers","similarity":0.5960224713409419}],"column_hits_per_table":{"asset_maintenance":10,"fixed_assets":17,"depreciation_schedules":4,"asset_transfers":3,"project_expenses":2,"maintenance_types":2,"depreciation_entries":3,"inventory_adjustments":2,"project_tasks":1,"employee_benefits":1,"purchase_requisitions":1,"project_milestones":1,"asset_locations":1,"asset_categories":1,"budgets":1},"top_columns_per_table":{"asset_maintenance":[{"column":"scheduled_date","similarity":0.739898742205908},{"column":"completed_date","similarity":0.7284483792345208},{"column":"status","similarity":0.7101114444407461}],"fixed_assets":[{"column":"disposal_date","similarity":0.6888298809769268},{"column":"purchase_date","similarity":0.6863275066336678},{"column":"warranty_expiry","similarity":0.6767168006008178}],"depreciation_schedules":[{"column":"asset_id","similarity":0.6382143138838896},{"column":"end_date","similarity":0.6022449069977498},{"column":"start_date","similarity":0.5877836267018011}],"asset_transfers":[{"column":"transfer_date","similarity":0.629042679787289},{"column":"asset_id","similarity":0.6153656526379016},{"column":"reason","similarity":0.581820393022087}],"project_expenses":[{"column":"expense_date","similarity":0.6101532216190212},{"column":"status","similarity":0.5810411591332079}],"maintenance_types":[{"column":"estimated_cost","similarity":0.6075361589401804},{"column":"frequency_months","similarity":0.5655954128168349}],"depreciation_entries":[{"column":"asset_id","similarity":0.6069641044175335},{"column":"entry_date","similarity":0.5764830727802217},{"column":"accumulated_depreciation","similarity":0.5729541876728412}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.5914927180055287},{"column":"status","similarity":0.5710920004037154}],"project_tasks":[{"column":"due_date","similarity":0.572177501074105}],"employee_benefits":[{"column":"end_date","similarity":0.5674256643532543}],"purchase_requisitions":[{"column":"required_date","similarity":0.5649724847275831}],"project_milestones":[{"column":"due_date","similarity":0.5629639209729828}],"asset_locations":[{"column":"description","similarity":0.5623171240430319}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.5602795069744737}],"budgets":[{"column":"status","similarity":0.5600489740464554}]},"fused_scores":[{"table":"asset_maintenance","fused":0.8613273927830081,"table_sim":0.6994637000895678,"col_score":1.1041229318231685},{"table":"fixed_assets","fused":0.8168142443576987,"table_sim":0.6733613177336575,"col_score":1.0319936342937606},{"table":"depreciation_schedules","fused":0.728384615821114,"table_sim":0.6165498794694232,"col_score":0.8961367203486503},{"table":"asset_transfers","fused":0.7255946333238981,"table_sim":0.5960224713409419,"col_score":0.9199528762983324},{"table":"maintenance_types","fused":0.7137972754202634,"table_sim":0.5961062154680403,"col_score":0.8903338653485979},{"table":"depreciation_entries","fused":0.34518406664665696,"table_sim":0,"col_score":0.8629601666166423},{"table":"project_expenses","fused":0.3254070509262576,"table_sim":0,"col_score":0.8135176273156439},{"table":"inventory_adjustments","fused":0.3165499672587317,"table_sim":0,"col_score":0.7913749181468291},{"table":"project_tasks","fused":0.22887100042964204,"table_sim":0,"col_score":0.572177501074105},{"table":"employee_benefits","fused":0.22697026574130172,"table_sim":0,"col_score":0.5674256643532543},{"table":"purchase_requisitions","fused":0.22598899389103325,"table_sim":0,"col_score":0.5649724847275831},{"table":"project_milestones","fused":0.22518556838919312,"table_sim":0,"col_score":0.5629639209729828},{"table":"asset_categories","fused":0.22411180278978948,"table_sim":0,"col_score":0.5602795069744737},{"table":"asset_locations","fused":0.15744879473204895,"table_sim":0,"col_score":0.39362198683012234},{"table":"budgets","fused":0.1568137127330075,"table_sim":0,"col_score":0.39203428183251876}],"fk_expansion_candidates":42,"fk_expansion_added":1,"fk_expansion_blocked_count":39,"fk_expansion_blocked":[{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"asset_categories","reason":"already_selected"},{"table":"asset_categories","reason":"already_selected"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":24,"total_retrieval_latency_ms":30,"sql_generated":"SELECT fa.asset_id, fa.name AS asset_name, am.maintenance_type_id, am.scheduled_date, am.completed_date, am.performed_by, am.vendor_id, am.cost, am.notes, am.status\nFROM fixed_assets fa\nJOIN maintenance_types mt ON fa.category_id = mt.type_id\nLEFT JOIN asset_maintenance am ON fa.asset_id = am.asset_id AND (am.completed_date IS NULL OR am.completed_date > CURRENT_DATE + INTERVAL '30 days')\nWHERE am.scheduled_date BETWEEN CURRENT_DATE AND CURRENT_DATE + INTERVAL '30 days';","tables_used_in_sql":[],"explain_result":"success","sqlstate":"42703","error_message":"column am.mainteny_type_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":3,"autocorrect_failure_reason":"Best candidate 'maintenance_types.type_id' has score 0.65 < threshold 0.7","rows_returned":0,"total_latency_ms":4564}
{"timestamp":"2026-01-29T21:28:57.668Z","query_id":"7e7d85d9-a5a5-4338-adac-600fee7c996d","question":"How many documents are attached to each entity type?","attempt_count":3,"retry_succeeded":true,"execution_success":true,"retriever_version":"V2","tables_retrieved":["document_attachments","asset_categories","account_types","certifications","maintenance_types","benefit_types","inventory_transactions","inventory_levels","employee_certifications","asset_maintenance","chart_of_accounts"],"tables_from_table_retrieval":6,"tables_from_column_only":15,"tables_from_fk_expansion":1,"table_scores":[{"table":"document_attachments","similarity":0.7393040203593138},{"table":"document_attachments","similarity":0.7393040203593138},{"table":"document_attachments","similarity":0.7352812742665428},{"table":"account_types","similarity":0.5981352749242909},{"table":"account_types","similarity":0.5981352749242909},{"table":"maintenance_types","similarity":0.5897465403330582},{"table":"maintenance_types","similarity":0.5897465403330582},{"table":"benefit_types","similarity":0.5853557438584527},{"table":"benefit_types","similarity":0.5853557438584527},{"table":"asset_categories","similarity":0.5755840603854031},{"table":"asset_categories","similarity":0.5755840603854031},{"table":"asset_categories","similarity":0.5753411818367143},{"table":"certifications","similarity":0.5748402961818171},{"table":"certifications","similarity":0.5748402961818171},{"table":"account_types","similarity":0.5738443826637069}],"column_hits_per_table":{"document_attachments":9,"inventory_transactions":3,"maintenance_types":3,"account_types":3,"employee_certifications":3,"asset_maintenance":2,"asset_categories":4,"benefit_types":3,"certifications":2,"chart_of_accounts":2,"employee_benefits":1,"departments":3,"warehouses":1,"sales_regions":1,"business_units":1,"product_categories":3,"asset_locations":1,"inventory_levels":2,"leave_types":1,"audit_log":1,"asset_transfers":1},"top_columns_per_table":{"document_attachments":[{"column":"entity_type","similarity":0.7979734617201061},{"column":"entity_id","similarity":0.7507212541180398},{"column":"attachment_id","similarity":0.6499131194867761}],"inventory_transactions":[{"column":"reference_type","similarity":0.5907758006474604},{"column":"transaction_type","similarity":0.5740359961697677},{"column":"created_by","similarity":0.5409655490497369}],"maintenance_types":[{"column":"description","similarity":0.5849404241337369},{"column":"type_id","similarity":0.5687464182699},{"column":"name","similarity":0.5466111937708543}],"account_types":[{"column":"category","similarity":0.5795842717697016},{"column":"type_id","similarity":0.572204772617412},{"column":"name","similarity":0.54522230629148}],"employee_certifications":[{"column":"certificate_number","similarity":0.570344611110217},{"column":"cert_id","similarity":0.5516333538250004},{"column":"employee_id","similarity":0.5450123538269055}],"asset_maintenance":[{"column":"maintenance_type_id","similarity":0.5695302816995195},{"column":"notes","similarity":0.5345241852289304}],"asset_categories":[{"column":"category_id","similarity":0.5686260353611468},{"column":"depreciation_method","similarity":0.5475874755164923},{"column":"name","similarity":0.5455049147965266}],"benefit_types":[{"column":"description","similarity":0.5684622522725375},{"column":"benefit_type_id","similarity":0.554474960208018},{"column":"name","similarity":0.5413044190115788}],"certifications":[{"column":"description","similarity":0.5628134265182438},{"column":"issuing_body","similarity":0.5519765334559635}],"chart_of_accounts":[{"column":"account_type_id","similarity":0.5590662505285231},{"column":"description","similarity":0.535907997292557}],"employee_benefits":[{"column":"benefit_type_id","similarity":0.5588809609991403}],"departments":[{"column":"manager_id","similarity":0.5524511044152465},{"column":"department_id","similarity":0.5490358819561373},{"column":"parent_department_id","similarity":0.5456710356874805}],"warehouses":[{"column":"manager_id","similarity":0.5486508621983892}],"sales_regions":[{"column":"manager_id","similarity":0.5473931431415607}],"business_units":[{"column":"manager_id","similarity":0.5472492280812445}],"product_categories":[{"column":"description","similarity":0.5469667414543651},{"column":"category_id","similarity":0.5469560360203749},{"column":"parent_category_id","similarity":0.5356836644445996}],"asset_locations":[{"column":"description","similarity":0.5460071186556418}],"inventory_levels":[{"column":"quantity_available","similarity":0.5401083097075305},{"column":"quantity_on_hand","similarity":0.5359471229919481}],"leave_types":[{"column":"leave_type_id","similarity":0.5379614368742229}],"audit_log":[{"column":"table_name","similarity":0.5362126705338817}],"asset_transfers":[{"column":"transfer_id","similarity":0.533307845538454}]},"fused_scores":[{"table":"document_attachments","fused":0.8890806280125436,"table_sim":0.7352812742665428,"col_score":1.1197796586315447},{"table":"asset_categories","fused":0.6714887456297062,"table_sim":0.5753411818367143,"col_score":0.8157100913191939},{"table":"account_types","fused":0.6562490064725425,"table_sim":0.5738443826637069,"col_score":0.7798559421857958},{"table":"certifications","fused":0.6444886708040298,"table_sim":0.5748402961818171,"col_score":0.7489612327373489},{"table":"maintenance_types","fused":0.5972557415150672,"table_sim":0.5897465403330582,"col_score":0.6085195432880808},{"table":"benefit_types","fused":0.5880093713805046,"table_sim":0.5853557438584527,"col_score":0.5919898126635825},{"table":"inventory_transactions","fused":0.35111751949293774,"table_sim":0,"col_score":0.8777937987323443},{"table":"inventory_levels","fused":0.3232327484814019,"table_sim":0,"col_score":0.8080818712035046},{"table":"employee_certifications","fused":0.30536651397958686,"table_sim":0,"col_score":0.7634162849489671},{"table":"asset_maintenance","fused":0.2343018648079157,"table_sim":0,"col_score":0.5857546620197892},{"table":"chart_of_accounts","fused":0.23156566976894444,"table_sim":0,"col_score":0.578914174422361},{"table":"departments","fused":0.23155133271012823,"table_sim":0,"col_score":0.5788783317753206},{"table":"product_categories","fused":0.22972453265007473,"table_sim":0,"col_score":0.5743113316251868},{"table":"employee_benefits","fused":0.15648666907975928,"table_sim":0,"col_score":0.3912166726993982},{"table":"warehouses","fused":0.15362224141554898,"table_sim":0,"col_score":0.3840556035388724}],"fk_expansion_candidates":24,"fk_expansion_added":1,"fk_expansion_blocked_count":21,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"already_selected"},{"table":"chart_of_accounts","reason":"already_selected"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":30,"total_retrieval_latency_ms":36,"sql_generated":"SELECT d.entity_type, COUNT(d.file_name) AS num_documents FROM document_attachments d GROUP BY d.entity_type;","tables_used_in_sql":[],"explain_result":"success","rows_returned":7,"total_latency_ms":1786}
{"timestamp":"2026-01-29T21:28:59.454Z","query_id":"15c61bc2-027a-4889-999e-0853c7d735de","question":"Calculate employee turnover rate by department for 2024","attempt_count":1,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employees","employee_salaries","departments","sales_regions","budgets","sales_territories","positions","employee_training","inventory_adjustments","asset_transfers","employee_certifications","employment_history"],"tables_from_table_retrieval":7,"tables_from_column_only":16,"tables_from_fk_expansion":2,"table_scores":[{"table":"employees","similarity":0.6359658673732379},{"table":"employees","similarity":0.6283128721980845},{"table":"employees","similarity":0.6283128721980845},{"table":"employee_salaries","similarity":0.6154920185256858},{"table":"employee_salaries","similarity":0.6154920185256858},{"table":"employee_salaries","similarity":0.6137332929756416},{"table":"departments","similarity":0.6101103038853555},{"table":"positions","similarity":0.5999463882310814},{"table":"positions","similarity":0.599093570754041},{"table":"positions","similarity":0.599093570754041},{"table":"sales_territories","similarity":0.5983156084770043},{"table":"departments","similarity":0.5980265380974776},{"table":"departments","similarity":0.5980265380974776},{"table":"sales_regions","similarity":0.5955253694234874},{"table":"budgets","similarity":0.5922652556433196}],"column_hits_per_table":{"departments":4,"sales_territories":1,"employees":7,"employee_salaries":7,"positions":1,"employee_training":4,"asset_maintenance":1,"goods_receipts":1,"sales_orders":1,"performance_reviews":2,"sales_regions":2,"asset_transfers":3,"budgets":2,"employee_certifications":2,"employee_benefits":2,"cost_centers":1,"inventory_adjustments":2,"purchase_requisitions":1,"currencies":1,"employment_history":2,"sales_opportunities":1,"business_units":1,"timesheets":1},"top_columns_per_table":{"departments":[{"column":"budget","similarity":0.6171215338559899},{"column":"manager_id","similarity":0.5961383943023354},{"column":"created_at","similarity":0.5650467732880422}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.613735339271099}],"employees":[{"column":"department_id","similarity":0.6128547771691438},{"column":"salary","similarity":0.601752847347806},{"column":"termination_date","similarity":0.5966071793770903}],"employee_salaries":[{"column":"end_date","similarity":0.6066714954048358},{"column":"amount","similarity":0.593388338491163},{"column":"effective_date","similarity":0.5928836468348673}],"positions":[{"column":"department_id","similarity":0.601081477446699}],"employee_training":[{"column":"score","similarity":0.5928527070079839},{"column":"scheduled_date","similarity":0.5735550391908764},{"column":"employee_id","similarity":0.5706780616174596}],"asset_maintenance":[{"column":"performed_by","similarity":0.5871347008280439}],"goods_receipts":[{"column":"received_by","similarity":0.5868493099400296}],"sales_orders":[{"column":"sales_rep_id","similarity":0.5843091252583017}],"performance_reviews":[{"column":"employee_id","similarity":0.5837580109083931},{"column":"reviewer_id","similarity":0.5714175766121258}],"sales_regions":[{"column":"manager_id","similarity":0.5798833108533066},{"column":"target_revenue","similarity":0.5574040652402492}],"asset_transfers":[{"column":"transferred_by","similarity":0.5794683807030565},{"column":"to_employee_id","similarity":0.5716790888698292},{"column":"from_employee_id","similarity":0.5709346468764337}],"budgets":[{"column":"department_id","similarity":0.5771392831310456},{"column":"approved_by","similarity":0.5582712309076955}],"employee_certifications":[{"column":"employee_id","similarity":0.5746489952027047},{"column":"expiry_date","similarity":0.5686582077330544}],"employee_benefits":[{"column":"end_date","similarity":0.5727875043304892},{"column":"employee_id","similarity":0.5623488537687561}],"cost_centers":[{"column":"department_id","similarity":0.5719328818068407}],"inventory_adjustments":[{"column":"adjusted_by","similarity":0.5712410647201211},{"column":"approved_by","similarity":0.5645446751844594}],"purchase_requisitions":[{"column":"department_id","similarity":0.5675362306468967}],"currencies":[{"column":"exchange_rate","similarity":0.566384286000632}],"employment_history":[{"column":"employee_id","similarity":0.5633517132005502},{"column":"reason_for_leaving","similarity":0.5587429277691088}],"sales_opportunities":[{"column":"owner_id","similarity":0.5617897810640338}],"business_units":[{"column":"manager_id","similarity":0.5600356791366401}],"timesheets":[{"column":"employee_id","similarity":0.5600062923329793}]},"fused_scores":[{"table":"employees","fused":0.7370102981333913,"table_sim":0.6283128721980845,"col_score":0.9000564370363511},{"table":"employee_salaries","fused":0.7295862416455519,"table_sim":0.6137332929756416,"col_score":0.9033656646504173},{"table":"departments","fused":0.6891239116032095,"table_sim":0.5980265380974776,"col_score":0.8257699718618072},{"table":"sales_regions","fused":0.661460511269655,"table_sim":0.5955253694234874,"col_score":0.7603632240389064},{"table":"budgets","fused":0.6594671453874164,"table_sim":0.5922652556433196,"col_score":0.7602699800035614},{"table":"sales_territories","fused":0.5308352600821102,"table_sim":0.5983156084770043,"col_score":0.4296147374897693},{"table":"positions","fused":0.5277589561375002,"table_sim":0.599093570754041,"col_score":0.4207570342126893},{"table":"employee_training","fused":0.35185209064136885,"table_sim":0,"col_score":0.879630226603422},{"table":"inventory_adjustments","fused":0.34140536092494034,"table_sim":0,"col_score":0.8535134023123508},{"table":"asset_transfers","fused":0.3118224247229987,"table_sim":0,"col_score":0.7795560618074967},{"table":"employee_certifications","fused":0.3079141424216005,"table_sim":0,"col_score":0.7697853560540011},{"table":"employee_benefits","fused":0.30784384125982156,"table_sim":0,"col_score":0.7696096031495538},{"table":"employment_history","fused":0.3023664109557206,"table_sim":0,"col_score":0.7559160273893014},{"table":"performance_reviews","fused":0.24345070378004766,"table_sim":0,"col_score":0.6086267594501191},{"table":"asset_maintenance","fused":0.23485388033121757,"table_sim":0,"col_score":0.5871347008280439}],"fk_expansion_candidates":96,"fk_expansion_added":2,"fk_expansion_blocked_count":78,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employment_history","reason":"already_selected"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"already_selected"},{"table":"performance_reviews","reason":"max_tables"},{"table":"training_courses","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"employee_certifications","reason":"already_selected"},{"table":"project_expenses","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"goods_receipts","reason":"max_tables"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"performance_reviews","reason":"max_tables"},{"table":"cost_centers","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"performance_reviews","reason":"max_tables"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"employment_history","reason":"already_selected"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":21,"total_retrieval_latency_ms":30,"sql_generated":"","tables_used_in_sql":[],"total_latency_ms":2709,"failure_type":"execution_error","failure_details":"Model generated invalid output (gibberish detected)"}
{"timestamp":"2026-01-29T21:29:02.164Z","query_id":"5b1b96e3-be16-4c85-b4b7-dfb99b26c6ba","question":"Find the salary percentile ranking for each employee within their department","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_salaries","employees","positions","departments","performance_reviews","sales_regions","project_resources","sales_orders","vendor_invoices","employee_benefits","budgets","employee_training"],"tables_from_table_retrieval":6,"tables_from_column_only":15,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_salaries","similarity":0.7150971626527787},{"table":"employee_salaries","similarity":0.7150971626527787},{"table":"employee_salaries","similarity":0.708947353388894},{"table":"positions","similarity":0.673242751719371},{"table":"positions","similarity":0.6565261063268311},{"table":"positions","similarity":0.6565261063268311},{"table":"employees","similarity":0.6495295179488771},{"table":"departments","similarity":0.64741802797087},{"table":"employees","similarity":0.633369499345302},{"table":"employees","similarity":0.633369499345302},{"table":"departments","similarity":0.6328181923670926},{"table":"departments","similarity":0.6328181923670926},{"table":"sales_regions","similarity":0.6247633430026287},{"table":"performance_reviews","similarity":0.6201770986480979},{"table":"performance_reviews","similarity":0.6063045966524395}],"column_hits_per_table":{"employees":8,"employee_salaries":7,"departments":4,"positions":3,"employee_training":1,"project_resources":2,"sales_orders":4,"performance_reviews":4,"employee_benefits":2,"order_lines":1,"sales_territories":1,"employee_certifications":2,"currencies":1,"tax_rates":1,"sales_regions":1,"vendor_invoices":3,"asset_categories":1,"purchase_orders":1,"budgets":1,"quote_lines":1,"product_suppliers":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.7516999267912566},{"column":"employee_number","similarity":0.6475222105411707},{"column":"phone","similarity":0.6335347761920442}],"employee_salaries":[{"column":"amount","similarity":0.7335170013770521},{"column":"approved_by","similarity":0.6822708118932407},{"column":"effective_date","similarity":0.6739318834802893}],"departments":[{"column":"budget","similarity":0.677998212273291},{"column":"manager_id","similarity":0.6351459248984429},{"column":"parent_department_id","similarity":0.623290651523152}],"positions":[{"column":"min_salary","similarity":0.6744645855381992},{"column":"max_salary","similarity":0.6663214050707933},{"column":"department_id","similarity":0.6424140802376155}],"employee_training":[{"column":"score","similarity":0.6565621289067415}],"project_resources":[{"column":"hourly_rate","similarity":0.6430540971391342},{"column":"allocation_percent","similarity":0.621737392517516}],"sales_orders":[{"column":"total","similarity":0.6323044264651041},{"column":"subtotal","similarity":0.6231063815552383},{"column":"sales_rep_id","similarity":0.603951442295968}],"performance_reviews":[{"column":"goals_met_percent","similarity":0.6309951342900396},{"column":"reviewer_id","similarity":0.6296156415374472},{"column":"employee_id","similarity":0.6270036415776163}],"employee_benefits":[{"column":"coverage_level","similarity":0.6291373504427914},{"column":"employee_id","similarity":0.608538154628989}],"order_lines":[{"column":"discount_percent","similarity":0.6288230405331483}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.626169512850208}],"employee_certifications":[{"column":"certificate_number","similarity":0.6179354657069774},{"column":"employee_id","similarity":0.6116376107330588}],"currencies":[{"column":"exchange_rate","similarity":0.6151317939764944}],"tax_rates":[{"column":"rate","similarity":0.6140263720536819}],"sales_regions":[{"column":"manager_id","similarity":0.6125537057406677}],"vendor_invoices":[{"column":"total","similarity":0.6094602269991619},{"column":"subtotal","similarity":0.604766812781768},{"column":"amount_paid","similarity":0.6027268036015034}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.6075033191187711}],"purchase_orders":[{"column":"total","similarity":0.6070169426521217}],"budgets":[{"column":"approved_by","similarity":0.6061548136762259}],"quote_lines":[{"column":"discount_percent","similarity":0.6047639324071958}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6034202600276743}]},"fused_scores":[{"table":"employee_salaries","fused":0.8552293749628055,"table_sim":0.708947353388894,"col_score":1.0746524073236725},{"table":"employees","fused":0.810206112431918,"table_sim":0.633369499345302,"col_score":1.0754610320618418},{"table":"positions","fused":0.7969657790255369,"table_sim":0.6565261063268311,"col_score":1.0076252880735959},{"table":"departments","fused":0.739810629815354,"table_sim":0.6328181923670926,"col_score":0.9002992859877461},{"table":"performance_reviews","fused":0.7380201350757962,"table_sim":0.6063045966524395,"col_score":0.9355934427108312},{"table":"sales_regions","fused":0.5463730434089642,"table_sim":0.6247633430026287,"col_score":0.4287875940184674},{"table":"project_resources","fused":0.3815691173591569,"table_sim":0,"col_score":0.9539227933978922},{"table":"sales_orders","fused":0.37754304689708934,"table_sim":0,"col_score":0.9438576172427233},{"table":"vendor_invoices","fused":0.36473745335601837,"table_sim":0,"col_score":0.9118436333900459},{"table":"employee_benefits","fused":0.33685028182517507,"table_sim":0,"col_score":0.8421257045629376},{"table":"employee_certifications","fused":0.33280345178541926,"table_sim":0,"col_score":0.832008629463548},{"table":"employee_training","fused":0.2626248515626966,"table_sim":0,"col_score":0.6565621289067415},{"table":"order_lines","fused":0.25152921621325935,"table_sim":0,"col_score":0.6288230405331483},{"table":"currencies","fused":0.24605271759059777,"table_sim":0,"col_score":0.6151317939764944},{"table":"tax_rates","fused":0.2456105488214728,"table_sim":0,"col_score":0.6140263720536819}],"fk_expansion_candidates":99,"fk_expansion_added":2,"fk_expansion_blocked_count":84,"fk_expansion_blocked":[{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"employee_certifications","reason":"max_tables"},{"table":"employment_history","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"purchase_orders","reason":"max_tables"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"employee_training","reason":"already_selected"},{"table":"customers","reason":"no_evidence"},{"table":"budgets","reason":"already_selected"},{"table":"employment_history","reason":"no_evidence"},{"table":"budgets","reason":"already_selected"},{"table":"benefit_types","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"order_lines","reason":"max_tables"},{"table":"cost_centers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"max_tables"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"purchase_orders","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"employee_training","reason":"already_selected"},{"table":"employee_certifications","reason":"max_tables"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"order_lines","reason":"max_tables"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"order_lines","reason":"max_tables"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_orders","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":31,"total_retrieval_latency_ms":38,"sql_generated":"SELECT e.employee_id, CONCAT(e.first_name, ' ', e.last_name) AS full_name, d.department_id, p.position_id, s.salary, 100 * (s.salary / sub.total) as salary_percentile\nFROM employees e\nJOIN departments d ON e.department_id = d.department_id\nJOIN positions p ON e.position_id = p.position_id\nJOIN employee_salaries s ON e.employee_id = s.employee_id\nJOIN (SELECT department_id, AVG(salary) as subtotal FROM employees GROUP BY department_id) sub ON d.department_id = sub.department_id AND p.position_id = s.position_id\nORDER BY e.employee_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column s.position_id does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":0,"autocorrect_failure_reason":"No candidates found for column 'position_id'","total_latency_ms":7495,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column s.position_id does not exist"}
{"timestamp":"2026-01-29T21:29:09.659Z","query_id":"d75e8048-5114-471e-8153-54145663f62c","question":"Identify employees who have not completed mandatory training","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_training","training_courses","employee_certifications","employees","employee_salaries","leave_requests","employee_benefits","asset_maintenance","fixed_assets","task_assignments"],"tables_from_table_retrieval":6,"tables_from_column_only":12,"tables_from_fk_expansion":0,"table_scores":[{"table":"employee_training","similarity":0.704722872966379},{"table":"employee_training","similarity":0.704722872966379},{"table":"employee_training","similarity":0.6889099730779654},{"table":"training_courses","similarity":0.6502538829600134},{"table":"training_courses","similarity":0.6479414954111261},{"table":"training_courses","similarity":0.6479414954111261},{"table":"employee_certifications","similarity":0.6250915878473813},{"table":"employee_certifications","similarity":0.6250915878473813},{"table":"employee_certifications","similarity":0.622622468299915},{"table":"employees","similarity":0.5917832723264214},{"table":"employees","similarity":0.5917832723264214},{"table":"employees","similarity":0.5856498095746774},{"table":"leave_requests","similarity":0.562719264388909},{"table":"employee_salaries","similarity":0.5602939159575271},{"table":"employee_salaries","similarity":0.5602939159575271}],"column_hits_per_table":{"employee_training":7,"training_courses":7,"employees":13,"employee_certifications":6,"employee_salaries":2,"task_assignments":1,"leave_requests":2,"leave_types":1,"certifications":1,"sales_territories":1,"warehouses":1,"business_units":1,"departments":1,"asset_maintenance":1,"emergency_contacts":1,"fixed_assets":1,"employee_benefits":2,"sales_regions":1},"top_columns_per_table":{"employee_training":[{"column":"completion_date","similarity":0.7097029109110412},{"column":"status","similarity":0.6976372257898822},{"column":"scheduled_date","similarity":0.6929640745659373}],"training_courses":[{"column":"is_mandatory","similarity":0.7012303940272651},{"column":"is_active","similarity":0.6332101562224836},{"column":"duration_hours","similarity":0.6052562024596296}],"employees":[{"column":"is_active","similarity":0.6199746938033394},{"column":"employee_id","similarity":0.5826338967861492},{"column":"hire_date","similarity":0.5802768513083864}],"employee_certifications":[{"column":"obtained_date","similarity":0.6093546957662352},{"column":"employee_id","similarity":0.6062132886742129},{"column":"expiry_date","similarity":0.5973898422628211}],"employee_salaries":[{"column":"effective_date","similarity":0.5735579062029842},{"column":"end_date","similarity":0.5734035938209808}],"task_assignments":[{"column":"employee_id","similarity":0.5697426551622571}],"leave_requests":[{"column":"employee_id","similarity":0.5660077016574807},{"column":"approved_by","similarity":0.5639076344538145}],"leave_types":[{"column":"is_paid","similarity":0.5643874982938306}],"certifications":[{"column":"description","similarity":0.5613971013724545}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5601484599678442}],"warehouses":[{"column":"manager_id","similarity":0.559427574061162}],"business_units":[{"column":"manager_id","similarity":0.5583488075095108}],"departments":[{"column":"manager_id","similarity":0.5561382857923995}],"asset_maintenance":[{"column":"performed_by","similarity":0.5557857799870751}],"emergency_contacts":[{"column":"employee_id","similarity":0.5555155902473405}],"fixed_assets":[{"column":"assigned_to","similarity":0.5550951258692207}],"employee_benefits":[{"column":"start_date","similarity":0.5541815032041719},{"column":"end_date","similarity":0.5539179805848201}],"sales_regions":[{"column":"manager_id","similarity":0.5490780636724084}]},"fused_scores":[{"table":"employee_training","fused":0.8358199631243832,"table_sim":0.6889099730779654,"col_score":1.05618494819401},{"table":"training_courses","fused":0.7903082953495078,"table_sim":0.6479414954111261,"col_score":1.00385849525708},{"table":"employee_certifications","fused":0.7367933277390073,"table_sim":0.622622468299915,"col_score":0.9080496168976457},{"table":"employees","fused":0.6993894779630755,"table_sim":0.5856498095746774,"col_score":0.8699989805456727},{"table":"employee_salaries","fused":0.6802802308199061,"table_sim":0.5602939159575271,"col_score":0.8602597031134747},{"table":"leave_requests","fused":0.6424356906469184,"table_sim":0.562719264388909,"col_score":0.7620103300339327},{"table":"employee_benefits","fused":0.33245619739863286,"table_sim":0,"col_score":0.831140493496582},{"table":"asset_maintenance","fused":0.22231431199483007,"table_sim":0,"col_score":0.5557857799870751},{"table":"fixed_assets","fused":0.2220380503476883,"table_sim":0,"col_score":0.5550951258692207},{"table":"task_assignments","fused":0.15952794344543197,"table_sim":0,"col_score":0.39881985861357994},{"table":"leave_types","fused":0.15802849952227258,"table_sim":0,"col_score":0.3950712488056814},{"table":"certifications","fused":0.15719118838428725,"table_sim":0,"col_score":0.3929779709607181},{"table":"sales_territories","fused":0.1568415687909964,"table_sim":0,"col_score":0.39210392197749094},{"table":"warehouses","fused":0.15663972073712534,"table_sim":0,"col_score":0.39159930184281333},{"table":"business_units","fused":0.156337666102663,"table_sim":0,"col_score":0.3908441652566575}],"fk_expansion_candidates":111,"fk_expansion_added":0,"fk_expansion_blocked_count":111,"fk_expansion_blocked":[{"table":"certifications","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"leave_types","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"leave_types","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"leave_types","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":15,"total_retrieval_latency_ms":23,"sql_generated":"SELECT e.employee_id, e.first_name, e.last_name FROM employees e LEFT JOIN employee_training et ON e.employee_id = et.employee_id WHERE et.course_id IS NULL AND et.is_active = 'true';","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column et.is_active does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":1,"autocorrect_failure_reason":"Replacement pattern not found in SQL","total_latency_ms":6884,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column et.is_active does not exist"}
{"timestamp":"2026-01-29T21:29:16.544Z","query_id":"7ec5254f-f4f4-4c6b-920a-0ed3f6e25bf8","question":"Calculate month-over-month sales growth rate for the past 12 months","attempt_count":2,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_opportunities","sales_orders","sales_quotes","project_milestones","performance_reviews","purchase_orders","sales_regions","depreciation_schedules","maintenance_types","product_suppliers","fixed_assets","goods_receipts"],"tables_from_table_retrieval":7,"tables_from_column_only":13,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_opportunities","similarity":0.6157116926794552},{"table":"sales_opportunities","similarity":0.6070846065624028},{"table":"sales_opportunities","similarity":0.6070846065624028},{"table":"sales_orders","similarity":0.6006459034551404},{"table":"sales_orders","similarity":0.5887441533450763},{"table":"sales_orders","similarity":0.5887441533450763},{"table":"sales_regions","similarity":0.5852419849044662},{"table":"sales_quotes","similarity":0.5842211564145057},{"table":"sales_regions","similarity":0.5757547372230886},{"table":"sales_regions","similarity":0.5757547372230886},{"table":"project_milestones","similarity":0.570290032024122},{"table":"sales_quotes","similarity":0.5681300155177891},{"table":"sales_quotes","similarity":0.5681300155177891},{"table":"purchase_orders","similarity":0.5671901529888976},{"table":"performance_reviews","similarity":0.5664270760489215}],"column_hits_per_table":{"sales_opportunities":8,"sales_regions":2,"sales_orders":9,"maintenance_types":1,"sales_quotes":7,"performance_reviews":4,"purchase_orders":3,"project_milestones":3,"product_suppliers":1,"depreciation_schedules":2,"sales_territories":1,"inventory_adjustments":1,"fixed_assets":1,"goods_receipts":1,"inventory_levels":1,"employee_salaries":1,"project_resources":1,"employee_benefits":1,"fiscal_years":1,"fiscal_periods":1},"top_columns_per_table":{"sales_opportunities":[{"column":"expected_close_date","similarity":0.6363002878299652},{"column":"actual_close_date","similarity":0.6293430551643405},{"column":"probability","similarity":0.6090506488590046}],"sales_regions":[{"column":"target_revenue","similarity":0.6231668309815453},{"column":"name","similarity":0.585191877724474}],"sales_orders":[{"column":"order_date","similarity":0.608157039227958},{"column":"ship_date","similarity":0.5938744066184168},{"column":"total","similarity":0.5899520680113397}],"maintenance_types":[{"column":"frequency_months","similarity":0.6034947907940172}],"sales_quotes":[{"column":"quote_date","similarity":0.6017792039675379},{"column":"status","similarity":0.5902208864403699},{"column":"valid_until","similarity":0.5831203611386355}],"performance_reviews":[{"column":"goals_met_percent","similarity":0.5909294294176741},{"column":"review_period_start","similarity":0.5615927806546327},{"column":"review_date","similarity":0.5576939251570936}],"purchase_orders":[{"column":"expected_date","similarity":0.583020378163897},{"column":"order_date","similarity":0.5622198964497076},{"column":"total","similarity":0.5529608978561139}],"project_milestones":[{"column":"amount","similarity":0.5816574903010769},{"column":"completed_date","similarity":0.5747741736862505},{"column":"due_date","similarity":0.5699308185216523}],"product_suppliers":[{"column":"lead_time_days","similarity":0.5803736956944617}],"depreciation_schedules":[{"column":"useful_life_months","similarity":0.579285680033414},{"column":"monthly_amount","similarity":0.574824063929058}],"sales_territories":[{"column":"name","similarity":0.5781934127104026}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.5725144040106267}],"fixed_assets":[{"column":"purchase_date","similarity":0.5697887482679104}],"goods_receipts":[{"column":"receipt_date","similarity":0.5676283184863925}],"inventory_levels":[{"column":"last_count_date","similarity":0.5634798348449386}],"employee_salaries":[{"column":"effective_date","similarity":0.5606593500435769}],"project_resources":[{"column":"hourly_rate","similarity":0.5590398909892947}],"employee_benefits":[{"column":"start_date","similarity":0.5585024004457627}],"fiscal_years":[{"column":"year","similarity":0.5573744243801744}],"fiscal_periods":[{"column":"period_number","similarity":0.5554732589241962}]},"fused_scores":[{"table":"sales_opportunities","fused":0.7446394901022959,"table_sim":0.6070846065624028,"col_score":0.9509718154121354},{"table":"sales_orders","fused":0.7152841890219124,"table_sim":0.5887441533450763,"col_score":0.9050942425371664},{"table":"sales_quotes","fused":0.6982137631254157,"table_sim":0.5681300155177891,"col_score":0.8933393845368557},{"table":"project_milestones","fused":0.689791850072154,"table_sim":0.570290032024122,"col_score":0.8690445771442021},{"table":"performance_reviews","fused":0.688546573527349,"table_sim":0.5664270760489215,"col_score":0.8717258197449904},{"table":"purchase_orders","fused":0.6859662223488389,"table_sim":0.5671901529888976,"col_score":0.8641303263887508},{"table":"sales_regions","fused":0.6766464376078977,"table_sim":0.5757547372230886,"col_score":0.8279839881851112},{"table":"depreciation_schedules","fused":0.3466790847991772,"table_sim":0,"col_score":0.866697711997943},{"table":"maintenance_types","fused":0.2413979163176069,"table_sim":0,"col_score":0.6034947907940172},{"table":"product_suppliers","fused":0.2321494782777847,"table_sim":0,"col_score":0.5803736956944617},{"table":"inventory_adjustments","fused":0.22900576160425068,"table_sim":0,"col_score":0.5725144040106267},{"table":"fixed_assets","fused":0.22791549930716415,"table_sim":0,"col_score":0.5697887482679104},{"table":"goods_receipts","fused":0.22705132739455702,"table_sim":0,"col_score":0.5676283184863925},{"table":"inventory_levels","fused":0.22539193393797544,"table_sim":0,"col_score":0.5634798348449386},{"table":"employee_salaries","fused":0.22426374001743077,"table_sim":0,"col_score":0.5606593500435769}],"fk_expansion_candidates":48,"fk_expansion_added":2,"fk_expansion_blocked_count":42,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"already_selected"},{"table":"fixed_assets","reason":"already_selected"},{"table":"goods_receipts","reason":"already_selected"},{"table":"goods_receipts","reason":"already_selected"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":45,"total_retrieval_latency_ms":51,"sql_generated":"","tables_used_in_sql":[],"total_latency_ms":5418,"failure_type":"execution_error","failure_details":"Model generated invalid output (gibberish detected)"}
{"timestamp":"2026-01-29T21:29:21.962Z","query_id":"9636a58a-cbd1-4767-8b2e-849f74dd33e9","question":"Find the average order value and order frequency for each customer segment based on credit limit","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["customers","order_lines","sales_orders","purchase_orders","po_lines","reorder_rules","vendor_invoice_lines","inventory_levels","quote_lines","product_suppliers","customer_contacts","receipt_lines"],"tables_from_table_retrieval":5,"tables_from_column_only":10,"tables_from_fk_expansion":2,"table_scores":[{"table":"customers","similarity":0.6806365809432632},{"table":"customers","similarity":0.6617339783713272},{"table":"customers","similarity":0.6617339783713272},{"table":"order_lines","similarity":0.6612582093852053},{"table":"sales_orders","similarity":0.6503570787641184},{"table":"order_lines","similarity":0.6440009106463637},{"table":"order_lines","similarity":0.6440009106463637},{"table":"sales_orders","similarity":0.6376795436737537},{"table":"sales_orders","similarity":0.6376795436737537},{"table":"purchase_orders","similarity":0.6350119894518774},{"table":"purchase_orders","similarity":0.626466775910568},{"table":"purchase_orders","similarity":0.626466775910568},{"table":"po_lines","similarity":0.6239700790357152},{"table":"po_lines","similarity":0.609465351537268},{"table":"po_lines","similarity":0.609465351537268}],"column_hits_per_table":{"customers":5,"order_lines":8,"purchase_orders":8,"sales_orders":7,"po_lines":5,"reorder_rules":3,"product_suppliers":1,"vendor_invoice_lines":3,"inventory_levels":3,"vendor_invoices":1,"customer_contacts":1,"quote_lines":2,"requisition_lines":1,"bank_transactions":1,"receipt_lines":1},"top_columns_per_table":{"customers":[{"column":"credit_limit","similarity":0.7562213296764043},{"column":"customer_number","similarity":0.6521520293534339},{"column":"payment_terms","similarity":0.6492525283356417}],"order_lines":[{"column":"line_total","similarity":0.6913816625333152},{"column":"unit_price","similarity":0.6750525139519165},{"column":"discount_percent","similarity":0.6707705169056545}],"purchase_orders":[{"column":"total","similarity":0.679308087050387},{"column":"po_number","similarity":0.65047868884927},{"column":"shipping_cost","similarity":0.6476903653884583}],"sales_orders":[{"column":"total","similarity":0.676144027149082},{"column":"order_number","similarity":0.6628715408716754},{"column":"shipping_cost","similarity":0.6417700268316578}],"po_lines":[{"column":"line_total","similarity":0.6567240233932621},{"column":"quantity","similarity":0.6366461345850174},{"column":"quantity_received","similarity":0.6338507022822304}],"reorder_rules":[{"column":"max_quantity","similarity":0.6445353762194392},{"column":"min_quantity","similarity":0.6258826394823849},{"column":"reorder_quantity","similarity":0.6145566972207888}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6397191137681456}],"vendor_invoice_lines":[{"column":"amount","similarity":0.6344433381575307},{"column":"quantity","similarity":0.6232178113301293},{"column":"unit_cost","similarity":0.6211589188193147}],"inventory_levels":[{"column":"quantity_reserved","similarity":0.6238969286133056},{"column":"last_count_date","similarity":0.6121516191920202},{"column":"quantity_on_hand","similarity":0.6120873561780505}],"vendor_invoices":[{"column":"total","similarity":0.6173072545374575}],"customer_contacts":[{"column":"phone","similarity":0.615865684240799}],"quote_lines":[{"column":"line_total","similarity":0.6146477438819443},{"column":"unit_price","similarity":0.6079234006312217}],"requisition_lines":[{"column":"estimated_total","similarity":0.6125923514934559}],"bank_transactions":[{"column":"amount","similarity":0.6096968542896204}],"receipt_lines":[{"column":"quantity_received","similarity":0.6070953158065068}]},"fused_scores":[{"table":"customers","fused":0.8299593247640449,"table_sim":0.6617339783713272,"col_score":1.0822973443531212},{"table":"order_lines","fused":0.7979637141915276,"table_sim":0.6440009106463637,"col_score":1.0289079195092734},{"table":"sales_orders","fused":0.7856396452382202,"table_sim":0.6376795436737537,"col_score":1.0075797975849197},{"table":"purchase_orders","fused":0.7776990381363496,"table_sim":0.626466775910568,"col_score":1.004547431475022},{"table":"po_lines","fused":0.7556980471966691,"table_sim":0.609465351537268,"col_score":0.9750470906857708},{"table":"reorder_rules","fused":0.3829906783842527,"table_sim":0,"col_score":0.9574766959606317},{"table":"vendor_invoice_lines","fused":0.3784208975290382,"table_sim":0,"col_score":0.9460522438225953},{"table":"inventory_levels","fused":0.3719890952837263,"table_sim":0,"col_score":0.9299727382093157},{"table":"quote_lines","fused":0.3674437776790221,"table_sim":0,"col_score":0.9186094441975552},{"table":"product_suppliers","fused":0.25588764550725823,"table_sim":0,"col_score":0.6397191137681456},{"table":"vendor_invoices","fused":0.246922901814983,"table_sim":0,"col_score":0.6173072545374575},{"table":"customer_contacts","fused":0.24634627369631962,"table_sim":0,"col_score":0.615865684240799},{"table":"requisition_lines","fused":0.24503694059738237,"table_sim":0,"col_score":0.6125923514934559},{"table":"bank_transactions","fused":0.24387874171584817,"table_sim":0,"col_score":0.6096968542896204},{"table":"receipt_lines","fused":0.2428381263226027,"table_sim":0,"col_score":0.6070953158065068}],"fk_expansion_candidates":51,"fk_expansion_added":2,"fk_expansion_blocked_count":42,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"customer_contacts","reason":"already_selected"},{"table":"customer_contacts","reason":"already_selected"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"receipt_lines","reason":"already_selected"},{"table":"receipt_lines","reason":"already_selected"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"vendor_invoices","reason":"max_tables"},{"table":"vendor_invoices","reason":"max_tables"},{"table":"vendor_invoices","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":24,"total_retrieval_latency_ms":30,"sql_generated":"SELECT c.name AS customer_segment, AVG(sales_orders.total) as avg_order_value, COUNT(*) / 365.0 as order_frequency FROM customers c JOIN sales_orders ON c.customer_id = sales_orders.customer_id GROUP BY c.name;","tables_used_in_sql":[],"explain_result":"success","rows_returned":413,"total_latency_ms":1097}
{"timestamp":"2026-01-29T21:29:23.059Z","query_id":"1c5a5abd-93c8-4e1d-95da-aba874337800","question":"What is the sales pipeline weighted value by stage and expected close month?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_opportunities","sales_orders","vendor_invoices","purchase_orders","vendor_invoice_lines","opportunity_stages","sales_quotes","project_phases","inventory_levels","products","order_lines","projects"],"tables_from_table_retrieval":7,"tables_from_column_only":10,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_opportunities","similarity":0.6054695442586654},{"table":"sales_opportunities","similarity":0.5991342441914193},{"table":"sales_opportunities","similarity":0.5991342441914193},{"table":"opportunity_stages","similarity":0.5878194026125775},{"table":"purchase_orders","similarity":0.569620040129231},{"table":"opportunity_stages","similarity":0.5683265438173515},{"table":"opportunity_stages","similarity":0.5683265438173515},{"table":"sales_orders","similarity":0.5672773314428301},{"table":"vendor_invoices","similarity":0.5653986063661894},{"table":"sales_orders","similarity":0.5581057438001689},{"table":"sales_orders","similarity":0.5581057438001689},{"table":"vendor_invoices","similarity":0.5555915054629954},{"table":"vendor_invoices","similarity":0.5555915054629954},{"table":"vendor_invoice_lines","similarity":0.5524555005656138},{"table":"sales_quotes","similarity":0.550409683101325}],"column_hits_per_table":{"sales_opportunities":6,"sales_quotes":7,"vendor_invoice_lines":3,"sales_orders":8,"vendor_invoices":7,"products":1,"purchase_orders":4,"project_phases":3,"opportunity_stages":2,"sales_regions":1,"product_suppliers":1,"depreciation_schedules":1,"inventory_levels":2,"project_milestones":1,"performance_reviews":1,"projects":1,"order_lines":1},"top_columns_per_table":{"sales_opportunities":[{"column":"expected_close_date","similarity":0.668690771832423},{"column":"actual_close_date","similarity":0.6339245575123714},{"column":"probability","similarity":0.5692602631371995}],"sales_quotes":[{"column":"status","similarity":0.5921986529170727},{"column":"total","similarity":0.5752162059761756},{"column":"quote_date","similarity":0.5738522658738787}],"vendor_invoice_lines":[{"column":"amount","similarity":0.5845362816918436},{"column":"quantity","similarity":0.5763391839401236},{"column":"unit_cost","similarity":0.5761415252217038}],"sales_orders":[{"column":"subtotal","similarity":0.5845302560552877},{"column":"total","similarity":0.5825451432204839},{"column":"shipping_cost","similarity":0.5774331860294376}],"vendor_invoices":[{"column":"subtotal","similarity":0.5822705703803419},{"column":"total","similarity":0.582041980504164},{"column":"status","similarity":0.5656992120499805}],"products":[{"column":"weight","similarity":0.5815009424843107}],"purchase_orders":[{"column":"expected_date","similarity":0.5741026972061223},{"column":"total","similarity":0.5488581395929076},{"column":"subtotal","similarity":0.5484437995629727}],"project_phases":[{"column":"end_date","similarity":0.5687826504010404},{"column":"start_date","similarity":0.543726006663315},{"column":"status","similarity":0.542017684104051}],"opportunity_stages":[{"column":"is_closed","similarity":0.5678148186760426},{"column":"probability","similarity":0.5543864927330566}],"sales_regions":[{"column":"target_revenue","similarity":0.5654854838224989}],"product_suppliers":[{"column":"lead_time_days","similarity":0.5615731578476576}],"depreciation_schedules":[{"column":"monthly_amount","similarity":0.558713615169843}],"inventory_levels":[{"column":"last_count_date","similarity":0.5575421295633526},{"column":"quantity_on_hand","similarity":0.5419613068262183}],"project_milestones":[{"column":"amount","similarity":0.5518840450887265}],"performance_reviews":[{"column":"review_period_end","similarity":0.5513220446834107}],"projects":[{"column":"planned_end_date","similarity":0.5476762261808827}],"order_lines":[{"column":"discount_percent","similarity":0.545524369079207}]},"fused_scores":[{"table":"sales_opportunities","fused":0.753741766750295,"table_sim":0.5991342441914193,"col_score":0.9856530505886087},{"table":"sales_orders","fused":0.6851845773463132,"table_sim":0.5581057438001689,"col_score":0.8758028276655296},{"table":"vendor_invoices","fused":0.6826715275307668,"table_sim":0.5555915054629954,"col_score":0.8732915606324239},{"table":"purchase_orders","fused":0.681184730878569,"table_sim":0.569620040129231,"col_score":0.848531767002576},{"table":"vendor_invoice_lines","fused":0.6805556498041303,"table_sim":0.5524555005656138,"col_score":0.8727058736619053},{"table":"opportunity_stages","fused":0.6789991523074392,"table_sim":0.5683265438173515,"col_score":0.8450080650425709},{"table":"sales_quotes","fused":0.675102745426041,"table_sim":0.550409683101325,"col_score":0.862142338913115},{"table":"project_phases","fused":0.33625826149307914,"table_sim":0,"col_score":0.8406456537326978},{"table":"inventory_levels","fused":0.33140911319058475,"table_sim":0,"col_score":0.8285227829764618},{"table":"products","fused":0.2326003769937243,"table_sim":0,"col_score":0.5815009424843107},{"table":"sales_regions","fused":0.22619419352899955,"table_sim":0,"col_score":0.5654854838224989},{"table":"product_suppliers","fused":0.22462926313906306,"table_sim":0,"col_score":0.5615731578476576},{"table":"depreciation_schedules","fused":0.2234854460679372,"table_sim":0,"col_score":0.558713615169843},{"table":"project_milestones","fused":0.2207536180354906,"table_sim":0,"col_score":0.5518840450887265},{"table":"performance_reviews","fused":0.2205288178733643,"table_sim":0,"col_score":0.5513220446834107}],"fk_expansion_candidates":72,"fk_expansion_added":2,"fk_expansion_blocked_count":63,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"order_lines","reason":"already_selected"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"product_suppliers","reason":"max_tables"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"order_lines","reason":"already_selected"},{"table":"quote_lines","reason":"no_evidence"},{"table":"product_suppliers","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"projects","reason":"already_selected"},{"table":"product_suppliers","reason":"max_tables"},{"table":"project_tasks","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"projects","reason":"already_selected"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":41,"total_retrieval_latency_ms":48,"sql_generated":"SELECT s.stage_name AS stage, p.project_name AS project, SUM(o.line_total * o.probability / 100) OVER (PARTITION BY s.stage_id, p.project_id ORDER BY EXTRACT(MONTH FROM s.expected_close_date)) AS weighted_value\nFROM sales_opportunities s\nJOIN opportunity_stages o ON s.stage_id = o.stage_id\nJOIN projects p ON s.project_id = p.project_id\nLEFT JOIN order_lines l ON s.sales_order_id = l.sales_order_id AND s.product_id = l.product_id\nGROUP BY s.stage_id, p.project_id, EXTRACT(MONTH FROM s.expected_close_date);","tables_used_in_sql":[],"total_latency_ms":8160,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T21:29:31.220Z","query_id":"3734051c-0778-4dd8-a697-f3a74f077a26","question":"Calculate inventory turnover ratio by product category","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["inventory_levels","inventory_transactions","asset_categories","products","product_categories","sales_orders","reorder_rules","inventory_adjustments","product_suppliers","depreciation_entries","order_lines","receipt_lines"],"tables_from_table_retrieval":5,"tables_from_column_only":10,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_levels","similarity":0.6747561713408694},{"table":"inventory_levels","similarity":0.6691204463835779},{"table":"inventory_levels","similarity":0.6691204463835779},{"table":"products","similarity":0.6673866757064916},{"table":"asset_categories","similarity":0.6658822163690923},{"table":"inventory_transactions","similarity":0.6584332771076702},{"table":"products","similarity":0.6538676672378335},{"table":"products","similarity":0.6538676672378335},{"table":"product_categories","similarity":0.6501703787798785},{"table":"asset_categories","similarity":0.6498613946467077},{"table":"asset_categories","similarity":0.6498613946467077},{"table":"inventory_transactions","similarity":0.6496833625181302},{"table":"inventory_transactions","similarity":0.6496833625181302},{"table":"product_categories","similarity":0.6492322259777316},{"table":"product_categories","similarity":0.6492322259777316}],"column_hits_per_table":{"inventory_transactions":7,"inventory_levels":6,"asset_categories":4,"product_categories":5,"products":7,"sales_orders":4,"fixed_assets":1,"reorder_rules":3,"product_suppliers":2,"inventory_adjustments":4,"receipt_lines":2,"sales_regions":1,"depreciation_entries":2,"goods_receipts":1,"order_lines":1},"top_columns_per_table":{"inventory_transactions":[{"column":"quantity","similarity":0.6807888987316983},{"column":"transaction_type","similarity":0.6515365120278798},{"column":"reference_type","similarity":0.637828790421886}],"inventory_levels":[{"column":"quantity_reserved","similarity":0.671007230009608},{"column":"quantity_available","similarity":0.6650873994044184},{"column":"quantity_on_hand","similarity":0.6516421570126745}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.6641371665838605},{"column":"depreciation_method","similarity":0.6354419036675771},{"column":"useful_life_years","similarity":0.621287819824621}],"product_categories":[{"column":"description","similarity":0.6507497169789198},{"column":"is_active","similarity":0.649502344633669},{"column":"category_id","similarity":0.6475053642784276}],"products":[{"column":"category_id","similarity":0.6427715834682924},{"column":"weight","similarity":0.6295802003912835},{"column":"unit_cost","similarity":0.6162112154039736}],"sales_orders":[{"column":"total","similarity":0.6200420126879076},{"column":"subtotal","similarity":0.6007588555599288},{"column":"tax_amount","similarity":0.5987801944503532}],"fixed_assets":[{"column":"category_id","similarity":0.6184944064206663}],"reorder_rules":[{"column":"reorder_quantity","similarity":0.6154008693245504},{"column":"product_id","similarity":0.6044803841321819},{"column":"min_quantity","similarity":0.603522150399881}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6130859746943957},{"column":"unit_cost","similarity":0.5933645257338089}],"inventory_adjustments":[{"column":"adjustment_number","similarity":0.6089434793102139},{"column":"adjusted_by","similarity":0.6069731015030922},{"column":"status","similarity":0.6019433143183657}],"receipt_lines":[{"column":"quantity_received","similarity":0.6032347735819231},{"column":"product_id","similarity":0.6026462248777215}],"sales_regions":[{"column":"target_revenue","similarity":0.6030920394288763}],"depreciation_entries":[{"column":"accumulated_depreciation","similarity":0.6025970339514821},{"column":"book_value","similarity":0.5960312123863106}],"goods_receipts":[{"column":"receipt_number","similarity":0.5957984012288485}],"order_lines":[{"column":"quantity_shipped","similarity":0.5947556552108059}]},"fused_scores":[{"table":"inventory_levels","fused":0.8028926397148737,"table_sim":0.6691204463835779,"col_score":1.0035509297118173},{"table":"inventory_transactions","fused":0.7924328794091334,"table_sim":0.6496833625181302,"col_score":1.0065571547456382},{"table":"asset_categories","fused":0.7826600841550841,"table_sim":0.6498613946467077,"col_score":0.981858118417649},{"table":"products","fused":0.7673949235800083,"table_sim":0.6538676672378335,"col_score":0.9376858080932703},{"table":"product_categories","fused":0.6626795845894502,"table_sim":0.6492322259777316,"col_score":0.682850622507028},{"table":"sales_orders","fused":0.3681685761871488,"table_sim":0,"col_score":0.920421440467872},{"table":"reorder_rules","fused":0.3668647778097964,"table_sim":0,"col_score":0.917161944524491},{"table":"inventory_adjustments","fused":0.36497201202470403,"table_sim":0,"col_score":0.91243003006176},{"table":"product_suppliers","fused":0.3639072950245201,"table_sim":0,"col_score":0.9097682375613002},{"table":"depreciation_entries","fused":0.360245056057855,"table_sim":0,"col_score":0.9006126401446375},{"table":"receipt_lines","fused":0.3256643809156503,"table_sim":0,"col_score":0.8141609522891257},{"table":"sales_regions","fused":0.24123681577155054,"table_sim":0,"col_score":0.6030920394288763},{"table":"goods_receipts","fused":0.23831936049153943,"table_sim":0,"col_score":0.5957984012288485},{"table":"order_lines","fused":0.23790226208432236,"table_sim":0,"col_score":0.5947556552108059},{"table":"fixed_assets","fused":0.17317843379778658,"table_sim":0,"col_score":0.4329460844944664}],"fk_expansion_candidates":54,"fk_expansion_added":2,"fk_expansion_blocked_count":48,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"order_lines","reason":"already_selected"},{"table":"order_lines","reason":"already_selected"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"already_selected"},{"table":"receipt_lines","reason":"already_selected"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":17,"total_retrieval_latency_ms":24,"sql_generated":"SELECT pc.name AS product_category, SUM(il.quantity_on_hand) / AVG(pr.unit_cost * il.quantity_on_hand) AS inventory_turnover_ratio FROM products pr INNER JOIN inventory_levels il ON pr.product_id = il.product_id INNER JOIN product_categories pc ON pr.category_id = pc.category_id GROUP BY pc.name;","tables_used_in_sql":[],"explain_result":"success","rows_returned":30,"total_latency_ms":1304}
{"timestamp":"2026-01-29T21:29:32.523Z","query_id":"feacefba-2e6e-4ba3-b943-288fd183371d","question":"Identify products with significant inventory discrepancies (adjustment > 10% of stock)","attempt_count":2,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["inventory_adjustments","adjustment_lines","inventory_transactions","inventory_levels","products","fixed_assets","stock_transfers","asset_categories","sales_orders","product_suppliers","asset_locations","warehouse_locations"],"tables_from_table_retrieval":7,"tables_from_column_only":13,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_adjustments","similarity":0.6958975386244389},{"table":"inventory_adjustments","similarity":0.6915197337369523},{"table":"inventory_adjustments","similarity":0.6915197337369523},{"table":"adjustment_lines","similarity":0.6522288043937092},{"table":"adjustment_lines","similarity":0.6522288043937092},{"table":"adjustment_lines","similarity":0.651007722195867},{"table":"fixed_assets","similarity":0.5955860146307721},{"table":"inventory_levels","similarity":0.5926011478403523},{"table":"inventory_levels","similarity":0.5835973247906563},{"table":"inventory_levels","similarity":0.5835973247906563},{"table":"products","similarity":0.578715845938642},{"table":"stock_transfers","similarity":0.5760981592349576},{"table":"inventory_transactions","similarity":0.5750206157907899},{"table":"fixed_assets","similarity":0.5651757713023685},{"table":"fixed_assets","similarity":0.5651757713023685}],"column_hits_per_table":{"inventory_adjustments":8,"adjustment_lines":5,"inventory_transactions":4,"products":6,"inventory_levels":5,"stock_transfers":2,"sales_orders":2,"fixed_assets":4,"product_suppliers":1,"asset_categories":3,"product_categories":1,"project_expenses":1,"warehouse_locations":1,"goods_receipts":1,"sales_opportunities":1,"purchase_orders":1,"asset_maintenance":1,"purchase_requisitions":1,"asset_locations":1,"vendor_invoices":1},"top_columns_per_table":{"inventory_adjustments":[{"column":"adjustment_number","similarity":0.7341965834229129},{"column":"reason","similarity":0.7286392066545573},{"column":"status","similarity":0.7138688590653707}],"adjustment_lines":[{"column":"quantity_change","similarity":0.6392157712019857},{"column":"quantity_before","similarity":0.634171940504201},{"column":"quantity_after","similarity":0.6332989804641287}],"inventory_transactions":[{"column":"reference_type","similarity":0.6271412703735331},{"column":"transaction_type","similarity":0.6257663977952485},{"column":"quantity","similarity":0.6079063742265192}],"products":[{"column":"sku","similarity":0.6164491394343341},{"column":"name","similarity":0.6034174012104574},{"column":"weight","similarity":0.5959940766492622}],"inventory_levels":[{"column":"quantity_on_hand","similarity":0.608866183311948},{"column":"quantity_available","similarity":0.6051195357195316},{"column":"quantity_reserved","similarity":0.6037194678286041}],"stock_transfers":[{"column":"status","similarity":0.6079256845371828},{"column":"transfer_number","similarity":0.6034595992854049}],"sales_orders":[{"column":"order_number","similarity":0.6005608184497583},{"column":"status","similarity":0.5891804513517737}],"fixed_assets":[{"column":"serial_number","similarity":0.5959181419986975},{"column":"status","similarity":0.5830638318759733},{"column":"asset_tag","similarity":0.5821282768349391}],"product_suppliers":[{"column":"vendor_sku","similarity":0.5933274478553298}],"asset_categories":[{"column":"depreciation_method","similarity":0.5909825633152775},{"column":"salvage_value_percent","similarity":0.5765146715808612},{"column":"name","similarity":0.5610883455413478}],"product_categories":[{"column":"name","similarity":0.5904071610230438}],"project_expenses":[{"column":"category","similarity":0.5810751474323431}],"warehouse_locations":[{"column":"aisle","similarity":0.5786356735369311}],"goods_receipts":[{"column":"receipt_number","similarity":0.5779296040347197}],"sales_opportunities":[{"column":"source","similarity":0.5765090582142506}],"purchase_orders":[{"column":"status","similarity":0.5729152190846236}],"asset_maintenance":[{"column":"status","similarity":0.5721672810617285}],"purchase_requisitions":[{"column":"requisition_number","similarity":0.5665364323660178}],"asset_locations":[{"column":"floor","similarity":0.5662760777195117}],"vendor_invoices":[{"column":"invoice_number","similarity":0.560424242944695}]},"fused_scores":[{"table":"inventory_adjustments","fused":0.854318314942248,"table_sim":0.6915197337369523,"col_score":1.0985161867501916},{"table":"adjustment_lines","fused":0.7731253298991547,"table_sim":0.651007722195867,"col_score":0.9563017414540862},{"table":"inventory_transactions","fused":0.7210221571829369,"table_sim":0.5750206157907899,"col_score":0.9400244692711572},{"table":"inventory_levels","fused":0.7147287753430793,"table_sim":0.5835973247906563,"col_score":0.9114259511717138},{"table":"products","fused":0.7130079786667713,"table_sim":0.578715845938642,"col_score":0.9144461777589652},{"table":"fixed_assets","fused":0.693898374947888,"table_sim":0.5651757713023685,"col_score":0.8869822804161671},{"table":"stock_transfers","fused":0.6721523310903421,"table_sim":0.5760981592349576,"col_score":0.8162335888734189},{"table":"asset_categories","fused":0.3516959596422833,"table_sim":0,"col_score":0.8792398991057082},{"table":"sales_orders","fused":0.32270959056915166,"table_sim":0,"col_score":0.8067739764228791},{"table":"product_suppliers","fused":0.23733097914213191,"table_sim":0,"col_score":0.5933274478553298},{"table":"project_expenses","fused":0.23243005897293725,"table_sim":0,"col_score":0.5810751474323431},{"table":"warehouse_locations","fused":0.23145426941477246,"table_sim":0,"col_score":0.5786356735369311},{"table":"goods_receipts","fused":0.2311718416138879,"table_sim":0,"col_score":0.5779296040347197},{"table":"sales_opportunities","fused":0.23060362328570025,"table_sim":0,"col_score":0.5765090582142506},{"table":"purchase_requisitions","fused":0.22661457294640713,"table_sim":0,"col_score":0.5665364323660178}],"fk_expansion_candidates":66,"fk_expansion_added":2,"fk_expansion_blocked_count":60,"fk_expansion_blocked":[{"table":"employees","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"asset_locations","reason":"already_selected"},{"table":"customers","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"asset_locations","reason":"already_selected"},{"table":"order_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"warehouse_locations","reason":"already_selected"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"already_selected"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":17,"total_retrieval_latency_ms":23,"sql_generated":"","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column a.reason does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_candidates":0,"autocorrect_failure_reason":"No candidates found for column 'reason'","total_latency_ms":3257,"failure_type":"execution_error","failure_details":"Model did not generate SELECT statement"}
{"timestamp":"2026-01-29T21:29:35.780Z","query_id":"76fab4cb-d458-4875-9e1d-edb007fd3147","question":"Calculate vendor performance score based on on-time delivery and invoice accuracy","attempt_count":2,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["vendor_invoices","performance_reviews","vendor_invoice_lines","vendors","product_suppliers","purchase_orders","vendor_contacts","sales_orders","fixed_assets","asset_maintenance"],"tables_from_table_retrieval":6,"tables_from_column_only":4,"tables_from_fk_expansion":0,"table_scores":[{"table":"vendor_invoices","similarity":0.6955551654807471},{"table":"vendor_invoices","similarity":0.6877693444044282},{"table":"vendor_invoices","similarity":0.6877693444044282},{"table":"performance_reviews","similarity":0.6709085810677549},{"table":"performance_reviews","similarity":0.6616195213650082},{"table":"performance_reviews","similarity":0.6616195213650082},{"table":"purchase_orders","similarity":0.6347301134279532},{"table":"vendors","similarity":0.630909375510322},{"table":"purchase_orders","similarity":0.6231004988578854},{"table":"purchase_orders","similarity":0.6231004988578854},{"table":"vendor_invoice_lines","similarity":0.6204253750668519},{"table":"vendor_invoice_lines","similarity":0.6204253750668519},{"table":"product_suppliers","similarity":0.6192498236848171},{"table":"vendors","similarity":0.6155248174915915},{"table":"vendors","similarity":0.6155248174915915}],"column_hits_per_table":{"vendor_invoices":12,"vendor_invoice_lines":6,"performance_reviews":9,"vendors":9,"vendor_contacts":4,"purchase_orders":2,"product_suppliers":4,"fixed_assets":1,"sales_orders":2,"asset_maintenance":1},"top_columns_per_table":{"vendor_invoices":[{"column":"invoice_date","similarity":0.6765580061331256},{"column":"total","similarity":0.6764019740002268},{"column":"invoice_number","similarity":0.6636094388195389}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.6434932528090191},{"column":"amount","similarity":0.6366634169908185},{"column":"unit_cost","similarity":0.622904924682905}],"performance_reviews":[{"column":"review_date","similarity":0.6381782068433183},{"column":"goals_met_percent","similarity":0.6328139994418308},{"column":"review_period_start","similarity":0.6179144234098587}],"vendors":[{"column":"vendor_number","similarity":0.6328044268147751},{"column":"phone","similarity":0.6308043133506924},{"column":"website","similarity":0.6136264685506736}],"vendor_contacts":[{"column":"phone","similarity":0.6099312252856707},{"column":"email","similarity":0.5929107702232568},{"column":"title","similarity":0.5908148084239192}],"purchase_orders":[{"column":"vendor_id","similarity":0.6033254664913035},{"column":"expected_date","similarity":0.5718044755694628}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6007097500202866},{"column":"lead_time_days","similarity":0.6002656091547952},{"column":"vendor_id","similarity":0.5929190374101849}],"fixed_assets":[{"column":"vendor_id","similarity":0.5790519907978402}],"sales_orders":[{"column":"order_date","similarity":0.5770519982365088},{"column":"shipping_cost","similarity":0.5731083814243623}],"asset_maintenance":[{"column":"vendor_id","similarity":0.5763399733911833}]},"fused_scores":[{"table":"vendor_invoices","fused":0.8185652038959526,"table_sim":0.6877693444044282,"col_score":1.014758993133239},{"table":"performance_reviews","fused":0.7788057954446985,"table_sim":0.6616195213650082,"col_score":0.9545852065642337},{"table":"vendor_invoice_lines","fused":0.7569852095618825,"table_sim":0.6204253750668519,"col_score":0.9618249613044284},{"table":"vendors","fused":0.7485975238910034,"table_sim":0.6155248174915915,"col_score":0.9482065834901213},{"table":"product_suppliers","fused":0.7318869160499639,"table_sim":0.6192498236848171,"col_score":0.9008425545976841},{"table":"purchase_orders","fused":0.6870476548512989,"table_sim":0.6231004988578854,"col_score":0.782968388841419},{"table":"vendor_contacts","fused":0.36255464415891964,"table_sim":0,"col_score":0.9063866103972991},{"table":"sales_orders","fused":0.345442475579476,"table_sim":0,"col_score":0.8636061889486899},{"table":"fixed_assets","fused":0.16213455742339525,"table_sim":0,"col_score":0.4053363935584881},{"table":"asset_maintenance","fused":0.1613751925495313,"table_sim":0,"col_score":0.40343798137382825}],"fk_expansion_candidates":51,"fk_expansion_added":0,"fk_expansion_blocked_count":51,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":50,"total_retrieval_latency_ms":57,"sql_generated":"","tables_used_in_sql":[],"total_latency_ms":5326,"failure_type":"execution_error","failure_details":"Model generated invalid output (gibberish detected)"}
{"timestamp":"2026-01-29T21:29:41.106Z","query_id":"dda2dc45-7c4e-450d-a174-39473b3d1221","question":"Generate a trial balance for the current period showing debits and credits by account category","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["bank_accounts","depreciation_entries","depreciation_schedules","account_types","asset_categories","bank_transactions","journal_lines","fiscal_periods","purchase_orders","timesheets","fixed_assets","vendor_invoices"],"tables_from_table_retrieval":6,"tables_from_column_only":17,"tables_from_fk_expansion":2,"table_scores":[{"table":"bank_accounts","similarity":0.6367900839880641},{"table":"asset_categories","similarity":0.6346535809758647},{"table":"bank_accounts","similarity":0.6340482364220554},{"table":"bank_accounts","similarity":0.6340482364220554},{"table":"depreciation_schedules","similarity":0.6304903160077374},{"table":"depreciation_schedules","similarity":0.6304903160077374},{"table":"depreciation_entries","similarity":0.6297144045903278},{"table":"depreciation_entries","similarity":0.6297144045903278},{"table":"account_types","similarity":0.6272285653729832},{"table":"depreciation_entries","similarity":0.6225511215159643},{"table":"account_types","similarity":0.6193803416295194},{"table":"account_types","similarity":0.6193803416295194},{"table":"depreciation_schedules","similarity":0.6165057393727287},{"table":"bank_transactions","similarity":0.6150962404412702},{"table":"asset_categories","similarity":0.6102645047904957}],"column_hits_per_table":{"bank_accounts":4,"account_types":2,"depreciation_schedules":7,"depreciation_entries":6,"asset_categories":2,"project_budgets":1,"journal_lines":2,"benefit_types":1,"fiscal_periods":5,"project_expenses":1,"bank_transactions":4,"timesheets":2,"budgets":2,"departments":1,"projects":1,"asset_maintenance":1,"customers":1,"chart_of_accounts":1,"purchase_orders":2,"budget_lines":1,"vendor_invoices":1,"fixed_assets":1,"employee_benefits":1},"top_columns_per_table":{"bank_accounts":[{"column":"current_balance","similarity":0.6856207008937131},{"column":"account_name","similarity":0.6085119078521903},{"column":"bank_name","similarity":0.6052810360125528}],"account_types":[{"column":"normal_balance","similarity":0.6471004935426607},{"column":"category","similarity":0.6220382371057719}],"depreciation_schedules":[{"column":"monthly_amount","similarity":0.6453000273773885},{"column":"annual_amount","similarity":0.6430843573005959},{"column":"depreciation_method","similarity":0.6209191877039439}],"depreciation_entries":[{"column":"amount","similarity":0.6447408121789926},{"column":"period_id","similarity":0.643559649092342},{"column":"accumulated_depreciation","similarity":0.6397138442937423}],"asset_categories":[{"column":"depreciation_method","similarity":0.640600565078528},{"column":"salvage_value_percent","similarity":0.5872709992162598}],"project_budgets":[{"column":"category","similarity":0.6169569178206936}],"journal_lines":[{"column":"debit","similarity":0.615233183208468},{"column":"credit","similarity":0.5881297887352918}],"benefit_types":[{"column":"annual_cost","similarity":0.6144825624279615}],"fiscal_periods":[{"column":"name","similarity":0.6139653006720002},{"column":"start_date","similarity":0.5940557583983144},{"column":"period_id","similarity":0.593789594476675}],"project_expenses":[{"column":"category","similarity":0.6108512270852675}],"bank_transactions":[{"column":"amount","similarity":0.6009151929141651},{"column":"reference","similarity":0.5946297202608782},{"column":"transaction_type","similarity":0.5925000251285931}],"timesheets":[{"column":"total_hours","similarity":0.5953084784593494},{"column":"status","similarity":0.5824555063940192}],"budgets":[{"column":"status","similarity":0.5947490104323017},{"column":"total_amount","similarity":0.5858262812102382}],"departments":[{"column":"budget","similarity":0.5935516329426287}],"projects":[{"column":"budget","similarity":0.5933004396512298}],"asset_maintenance":[{"column":"cost","similarity":0.5920636317252489}],"customers":[{"column":"credit_limit","similarity":0.5881966845767086}],"chart_of_accounts":[{"column":"description","similarity":0.5871916379697032}],"purchase_orders":[{"column":"total","similarity":0.5864519649300926},{"column":"subtotal","similarity":0.5855426910442382}],"budget_lines":[{"column":"period_id","similarity":0.585414728590752}],"vendor_invoices":[{"column":"subtotal","similarity":0.5854109351756007}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5847057269059956}],"employee_benefits":[{"column":"coverage_level","similarity":0.5835880291391402}]},"fused_scores":[{"table":"bank_accounts","fused":0.7756396663227276,"table_sim":0.6340482364220554,"col_score":0.9880268111737361},{"table":"depreciation_entries","fused":0.7593697666399241,"table_sim":0.6225511215159643,"col_score":0.9645977343258638},{"table":"depreciation_schedules","fused":0.7566403260347119,"table_sim":0.6165057393727287,"col_score":0.9668422060276864},{"table":"account_types","fused":0.7548760498159303,"table_sim":0.6193803416295194,"col_score":0.9581196120955466},{"table":"asset_categories","fused":0.7398531287489605,"table_sim":0.6102645047904957,"col_score":0.9342360646866579},{"table":"bank_transactions","fused":0.7283497654826038,"table_sim":0.6150962404412702,"col_score":0.8982300530446041},{"table":"journal_lines","fused":0.36371923103044557,"table_sim":0,"col_score":0.9092980775761139},{"table":"fiscal_periods","fused":0.355317154334716,"table_sim":0,"col_score":0.8882928858367899},{"table":"purchase_orders","fused":0.35168932418088467,"table_sim":0,"col_score":0.8792233104522116},{"table":"timesheets","fused":0.31966716227890246,"table_sim":0,"col_score":0.7991679056972562},{"table":"budgets","fused":0.31759537394461756,"table_sim":0,"col_score":0.7939884348615438},{"table":"project_budgets","fused":0.24678276712827746,"table_sim":0,"col_score":0.6169569178206936},{"table":"benefit_types","fused":0.2457930249711846,"table_sim":0,"col_score":0.6144825624279615},{"table":"project_expenses","fused":0.24434049083410703,"table_sim":0,"col_score":0.6108512270852675},{"table":"departments","fused":0.2374206531770515,"table_sim":0,"col_score":0.5935516329426287}],"fk_expansion_candidates":45,"fk_expansion_added":2,"fk_expansion_blocked_count":39,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fixed_assets","reason":"already_selected"},{"table":"fixed_assets","reason":"already_selected"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"vendor_invoices","reason":"already_selected"},{"table":"vendor_invoices","reason":"already_selected"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":36,"total_retrieval_latency_ms":43,"sql_generated":"SELECT ac.name AS account_category, SUM(bt.amount) AS total_debits, SUM(jl.credit) AS total_credits FROM (SELECT bt.bank_account_id, SUM(bt.amount) AS debit FROM bank_transactions bt GROUP BY bt.bank_account_id) b JOIN journal_lines jl ON bt.bank_account_id = jl.account_id AND ac.name = account_categories.name WHERE fp.start_date >= CURRENT_DATE - INTERVAL '1 year' GROUP BY ac.name, total_debits, total_credits LIMIT 1000;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42P01","error_message":"missing FROM-clause entry for table \"bt\"","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_correction":"Replaced 'account_id' with 'bank_account_id' (suffix, score: 0.80)","autocorrect_candidates":2,"autocorrect_failure_reason":"Alias 'bt' not defined. Possible table: bank_accounts. Define alias in FROM/JOIN clause.","total_latency_ms":5623,"failure_type":"join_path_miss","failure_details":"Database error after 3 attempts: missing FROM-clause entry for table \"bt\""}
{"timestamp":"2026-01-29T21:29:46.729Z","query_id":"dbea3393-18b7-4c40-8e5c-9113d993620b","question":"Calculate cash flow from bank transactions grouped by transaction type and month","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["bank_transactions","bank_accounts","inventory_transactions","account_types","depreciation_entries","project_budgets","depreciation_schedules","asset_transfers","benefit_types","sales_orders","currencies","projects"],"tables_from_table_retrieval":6,"tables_from_column_only":16,"tables_from_fk_expansion":2,"table_scores":[{"table":"bank_transactions","similarity":0.7232703691525166},{"table":"bank_transactions","similarity":0.7144733407570569},{"table":"bank_transactions","similarity":0.7144733407570569},{"table":"bank_accounts","similarity":0.6412885484513536},{"table":"bank_accounts","similarity":0.6330427898995664},{"table":"bank_accounts","similarity":0.6330427898995664},{"table":"inventory_transactions","similarity":0.6130368701918206},{"table":"inventory_transactions","similarity":0.5906232287127622},{"table":"inventory_transactions","similarity":0.5906232287127622},{"table":"account_types","similarity":0.5890479368554123},{"table":"account_types","similarity":0.5890479368554123},{"table":"account_types","similarity":0.5746397921552414},{"table":"depreciation_entries","similarity":0.5640374269123315},{"table":"depreciation_entries","similarity":0.5640374269123315},{"table":"project_budgets","similarity":0.563995673637428}],"column_hits_per_table":{"bank_transactions":9,"inventory_transactions":5,"bank_accounts":8,"depreciation_schedules":2,"account_types":2,"depreciation_entries":4,"asset_transfers":4,"benefit_types":1,"sales_orders":1,"departments":1,"vendor_invoices":1,"asset_categories":1,"project_budgets":2,"customers":1,"chart_of_accounts":1,"vendors":1,"maintenance_types":1,"projects":1,"currencies":1,"stock_transfers":1,"project_expenses":1,"purchase_orders":1},"top_columns_per_table":{"bank_transactions":[{"column":"transaction_type","similarity":0.7300639775150025},{"column":"transaction_date","similarity":0.7100635579167792},{"column":"amount","similarity":0.6854638850683717}],"inventory_transactions":[{"column":"transaction_type","similarity":0.6356058298235756},{"column":"reference_type","similarity":0.5936573308025523},{"column":"transaction_date","similarity":0.5927457550817244}],"bank_accounts":[{"column":"bank_name","similarity":0.6149721846522818},{"column":"currency_id","similarity":0.6078267071474764},{"column":"account_name","similarity":0.6020854555355626}],"depreciation_schedules":[{"column":"monthly_amount","similarity":0.590534089672661},{"column":"annual_amount","similarity":0.556973315206173}],"account_types":[{"column":"category","similarity":0.5726836627158123},{"column":"normal_balance","similarity":0.5553730449724036}],"depreciation_entries":[{"column":"entry_date","similarity":0.5724732006538439},{"column":"amount","similarity":0.5657822173033439},{"column":"period_id","similarity":0.5574773293779076}],"asset_transfers":[{"column":"reason","similarity":0.5702229734035696},{"column":"transfer_date","similarity":0.5701831755618614},{"column":"transferred_by","similarity":0.5584118665702265}],"benefit_types":[{"column":"annual_cost","similarity":0.570209215995342}],"sales_orders":[{"column":"subtotal","similarity":0.5666578377274356}],"departments":[{"column":"budget","similarity":0.562686445646288}],"vendor_invoices":[{"column":"subtotal","similarity":0.5611108207005183}],"asset_categories":[{"column":"depreciation_method","similarity":0.5610490636648584}],"project_budgets":[{"column":"category","similarity":0.5583505425484427},{"column":"notes","similarity":0.556499900200207}],"customers":[{"column":"currency_id","similarity":0.5559130206307922}],"chart_of_accounts":[{"column":"account_type_id","similarity":0.554936668356843}],"vendors":[{"column":"currency_id","similarity":0.5537994023819492}],"maintenance_types":[{"column":"frequency_months","similarity":0.553500950186699}],"projects":[{"column":"budget","similarity":0.5534871574363848}],"currencies":[{"column":"symbol","similarity":0.5533906348014246}],"stock_transfers":[{"column":"status","similarity":0.5531469664212183}],"project_expenses":[{"column":"category","similarity":0.5508824364902253}],"purchase_orders":[{"column":"subtotal","similarity":0.5494862539767775}]},"fused_scores":[{"table":"bank_transactions","fused":0.862722307043591,"table_sim":0.7144733407570569,"col_score":1.085095756473392},{"table":"bank_accounts","fused":0.7362206212200488,"table_sim":0.6330427898995664,"col_score":0.8909873682007723},{"table":"inventory_transactions","fused":0.7273477353175981,"table_sim":0.5906232287127622,"col_score":0.9324344952248518},{"table":"account_types","fused":0.6849319493739505,"table_sim":0.5746397921552414,"col_score":0.850370185202014},{"table":"depreciation_entries","fused":0.6805681798696053,"table_sim":0.5640374269123315,"col_score":0.8553643093055159},{"table":"project_budgets","fused":0.6396476072298629,"table_sim":0.563995673637428,"col_score":0.7531255076185152},{"table":"depreciation_schedules","fused":0.347608298910299,"table_sim":0,"col_score":0.8690207472757474},{"table":"asset_transfers","fused":0.34212582447380013,"table_sim":0,"col_score":0.8553145611845003},{"table":"benefit_types","fused":0.2280836863981368,"table_sim":0,"col_score":0.570209215995342},{"table":"sales_orders","fused":0.22666313509097424,"table_sim":0,"col_score":0.5666578377274356},{"table":"departments","fused":0.2250745782585152,"table_sim":0,"col_score":0.562686445646288},{"table":"vendor_invoices","fused":0.22444432828020733,"table_sim":0,"col_score":0.5611108207005183},{"table":"asset_categories","fused":0.22441962546594338,"table_sim":0,"col_score":0.5610490636648584},{"table":"maintenance_types","fused":0.2214003800746796,"table_sim":0,"col_score":0.553500950186699},{"table":"projects","fused":0.2213948629745539,"table_sim":0,"col_score":0.5534871574363848}],"fk_expansion_candidates":48,"fk_expansion_added":2,"fk_expansion_blocked_count":42,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"already_selected"},{"table":"currencies","reason":"already_selected"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"already_selected"},{"table":"projects","reason":"already_selected"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":28,"total_retrieval_latency_ms":34,"sql_generated":"SELECT t.transaction_type, EXTRACT(MONTH FROM t.transaction_date) AS month, SUM(t.amount) as cash_flow \nFROM bank_transactions t JOIN bank_accounts a ON t.bank_account_id = a.bank_account_id \nGROUP BY t.transaction_type, EXTRACT(MONTH FROM t.transaction_date);","tables_used_in_sql":[],"total_latency_ms":3748,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-29T21:29:50.477Z","query_id":"737cbab8-2b47-4ada-bfc4-15c868b199f6","question":"Calculate project profitability comparing budget vs actual expenses","attempt_count":2,"retry_succeeded":true,"execution_success":true,"retriever_version":"V2","tables_retrieved":["project_budgets","project_expenses","budgets","project_resources","budget_lines","projects","project_milestones","project_tasks","depreciation_schedules","departments","fixed_assets"],"tables_from_table_retrieval":5,"tables_from_column_only":13,"tables_from_fk_expansion":1,"table_scores":[{"table":"project_budgets","similarity":0.6969020680342091},{"table":"project_budgets","similarity":0.6957582349451407},{"table":"project_budgets","similarity":0.6957582349451407},{"table":"project_expenses","similarity":0.6915216956418679},{"table":"project_expenses","similarity":0.6915216956418679},{"table":"project_expenses","similarity":0.6901643358621746},{"table":"budgets","similarity":0.612258488134445},{"table":"budgets","similarity":0.612258488134445},{"table":"budgets","similarity":0.6054710146643664},{"table":"project_resources","similarity":0.5884392614999969},{"table":"project_resources","similarity":0.5805503579785858},{"table":"project_resources","similarity":0.5805503579785858},{"table":"budget_lines","similarity":0.5713392587016516},{"table":"budget_lines","similarity":0.5686398725889051},{"table":"budget_lines","similarity":0.5686398725889051}],"column_hits_per_table":{"project_budgets":6,"project_expenses":10,"projects":4,"budgets":8,"departments":1,"budget_lines":3,"project_resources":3,"project_tasks":3,"project_milestones":2,"product_suppliers":1,"fixed_assets":1,"products":1,"requisition_lines":1,"cost_centers":1,"asset_maintenance":1,"depreciation_schedules":2,"benefit_types":1,"maintenance_types":1},"top_columns_per_table":{"project_budgets":[{"column":"actual_amount","similarity":0.7262554064624759},{"column":"planned_amount","similarity":0.7004924793564835},{"column":"category","similarity":0.6694662055461488}],"project_expenses":[{"column":"amount","similarity":0.7114601809657055},{"column":"is_billable","similarity":0.6966630240889287},{"column":"status","similarity":0.6836007020930082}],"projects":[{"column":"budget","similarity":0.6970008685557271},{"column":"status","similarity":0.5629230171908491},{"column":"project_number","similarity":0.5622062989180432}],"budgets":[{"column":"total_amount","similarity":0.6493408476253937},{"column":"status","similarity":0.6263032542399831},{"column":"name","similarity":0.5916349551000758}],"departments":[{"column":"budget","similarity":0.6220086035822576}],"budget_lines":[{"column":"amount","similarity":0.6088101737210796},{"column":"budget_id","similarity":0.5755343306843482},{"column":"period_id","similarity":0.5433751751705854}],"project_resources":[{"column":"hourly_rate","similarity":0.6029252229063784},{"column":"allocation_percent","similarity":0.5808610647776508},{"column":"project_id","similarity":0.5585123041056318}],"project_tasks":[{"column":"actual_hours","similarity":0.5942018563156196},{"column":"estimated_hours","similarity":0.5835819683987098},{"column":"status","similarity":0.5534727998732568}],"project_milestones":[{"column":"is_billable","similarity":0.5918713032194266},{"column":"amount","similarity":0.5907992216686975}],"product_suppliers":[{"column":"unit_cost","similarity":0.5623878668953419}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5566543017155177}],"products":[{"column":"unit_cost","similarity":0.553864201344991}],"requisition_lines":[{"column":"estimated_unit_cost","similarity":0.5527788351319599}],"cost_centers":[{"column":"is_active","similarity":0.5513344669503466}],"asset_maintenance":[{"column":"cost","similarity":0.5501460559859814}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5496518172593629},{"column":"monthly_amount","similarity":0.5452582264469823}],"benefit_types":[{"column":"annual_cost","similarity":0.5430813519625031}],"maintenance_types":[{"column":"estimated_cost","similarity":0.540145737002778}]},"fused_scores":[{"table":"project_budgets","fused":0.8480555994233716,"table_sim":0.6957582349451407,"col_score":1.0765016461407177},{"table":"project_expenses","fused":0.8380152787213727,"table_sim":0.6901643358621746,"col_score":1.0597916930101698},{"table":"budgets","fused":0.7376052777790789,"table_sim":0.6054710146643664,"col_score":0.9358066724511477},{"table":"project_resources","fused":0.705672516905233,"table_sim":0.5805503579785858,"col_score":0.8933557552952038},{"table":"budget_lines","fused":0.6652827993375837,"table_sim":0.5686398725889051,"col_score":0.8102471894606015},{"table":"projects","fused":0.3912416072058995,"table_sim":0,"col_score":0.9781040180147487},{"table":"project_milestones","fused":0.3549083656215102,"table_sim":0,"col_score":0.8872709140537753},{"table":"project_tasks","fused":0.35439713620598984,"table_sim":0,"col_score":0.8859928405149745},{"table":"depreciation_schedules","fused":0.3289123721931416,"table_sim":0,"col_score":0.822280930482854},{"table":"departments","fused":0.24880344143290306,"table_sim":0,"col_score":0.6220086035822576},{"table":"product_suppliers","fused":0.22495514675813677,"table_sim":0,"col_score":0.5623878668953419},{"table":"fixed_assets","fused":0.22266172068620707,"table_sim":0,"col_score":0.5566543017155177},{"table":"products","fused":0.22154568053799642,"table_sim":0,"col_score":0.553864201344991},{"table":"requisition_lines","fused":0.22111153405278397,"table_sim":0,"col_score":0.5527788351319599},{"table":"asset_maintenance","fused":0.22005842239439258,"table_sim":0,"col_score":0.5501460559859814}],"fk_expansion_candidates":36,"fk_expansion_added":1,"fk_expansion_blocked_count":33,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fixed_assets","reason":"already_selected"},{"table":"fixed_assets","reason":"already_selected"},{"table":"positions","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":21,"total_retrieval_latency_ms":28,"sql_generated":"SELECT p.project_number, b.name AS department_name, SUM(pb.actual_amount) - SUM(be.amount) AS total_expense_difference \nFROM projects p \nJOIN departments d ON p.budget = d.department_id \nJOIN budgets b ON d.department_id = b.department_id \nLEFT JOIN project_budgets pb ON p.project_id = pb.project_id AND pb.category = 'actual' \nLEFT JOIN project_expenses be ON p.project_id = be.project_id AND be.category = 'actual' \nGROUP BY p.project_number, b.name;","tables_used_in_sql":[],"explain_result":"success","sqlstate":"42803","error_message":"column \"b.name\" must appear in the GROUP BY clause or be used in an aggregate function","rows_returned":0,"total_latency_ms":4004}
{"timestamp":"2026-01-29T21:29:54.481Z","query_id":"46cacffb-1e88-4d69-a108-624ad87206a8","question":"Find resource allocation by employee across all active projects","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["project_resources","projects","project_expenses","employees","employee_salaries","task_assignments","project_tasks","inventory_adjustments","purchase_requisitions","asset_transfers","budgets","timesheets"],"tables_from_table_retrieval":6,"tables_from_column_only":15,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_resources","similarity":0.7731177943741443},{"table":"project_resources","similarity":0.7614596035707293},{"table":"project_resources","similarity":0.7614596035707293},{"table":"task_assignments","similarity":0.6903320131383612},{"table":"project_expenses","similarity":0.6860669651962393},{"table":"task_assignments","similarity":0.6782316484776133},{"table":"task_assignments","similarity":0.6782316484776133},{"table":"projects","similarity":0.6699593096880756},{"table":"projects","similarity":0.6633532658939397},{"table":"projects","similarity":0.6633532658939397},{"table":"project_expenses","similarity":0.6627460444190597},{"table":"project_expenses","similarity":0.6627460444190597},{"table":"employee_salaries","similarity":0.6405071946271549},{"table":"employees","similarity":0.6339025803715616},{"table":"employee_salaries","similarity":0.6310176470805876}],"column_hits_per_table":{"project_resources":7,"projects":5,"project_expenses":3,"task_assignments":1,"asset_maintenance":1,"fixed_assets":1,"asset_transfers":3,"project_tasks":4,"budgets":1,"leave_requests":2,"sales_territories":1,"employees":8,"inventory_adjustments":2,"employee_salaries":1,"purchase_requisitions":2,"employee_benefits":2,"timesheets":2,"departments":1,"performance_reviews":1,"inventory_transactions":1,"sales_regions":1},"top_columns_per_table":{"project_resources":[{"column":"allocation_percent","similarity":0.728757432780467},{"column":"employee_id","similarity":0.7255842747784741},{"column":"role","similarity":0.6783516003676235}],"projects":[{"column":"project_manager_id","similarity":0.6839282490004714},{"column":"priority","similarity":0.6427573172941073},{"column":"project_number","similarity":0.6341632426692734}],"project_expenses":[{"column":"approved_by","similarity":0.6823442671200762},{"column":"employee_id","similarity":0.67150172783302},{"column":"status","similarity":0.6242036195337299}],"task_assignments":[{"column":"employee_id","similarity":0.6605806631335326}],"asset_maintenance":[{"column":"performed_by","similarity":0.657596774025439}],"fixed_assets":[{"column":"assigned_to","similarity":0.6547948182113684}],"asset_transfers":[{"column":"transferred_by","similarity":0.6477089129448399},{"column":"to_employee_id","similarity":0.6397881646168211},{"column":"from_employee_id","similarity":0.632962477097971}],"project_tasks":[{"column":"actual_hours","similarity":0.6402444434475},{"column":"estimated_hours","similarity":0.6283389400715463},{"column":"priority","similarity":0.6271077493801277}],"budgets":[{"column":"approved_by","similarity":0.6395498605286063}],"leave_requests":[{"column":"approved_by","similarity":0.6361902211226609},{"column":"employee_id","similarity":0.6137651256012868}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6322095184817824}],"employees":[{"column":"employee_number","similarity":0.6295903417489341},{"column":"manager_id","similarity":0.6247850569740808},{"column":"position_id","similarity":0.6238476921771267}],"inventory_adjustments":[{"column":"approved_by","similarity":0.6261133068410986},{"column":"adjusted_by","similarity":0.6181901122068721}],"employee_salaries":[{"column":"approved_by","similarity":0.6259053995932096}],"purchase_requisitions":[{"column":"approved_by","similarity":0.6204631562858176},{"column":"requested_by","similarity":0.6143387196019348}],"employee_benefits":[{"column":"employee_id","similarity":0.6197903020961568},{"column":"coverage_level","similarity":0.6109362115850033}],"timesheets":[{"column":"approved_by","similarity":0.6175242206652112},{"column":"employee_id","similarity":0.6147088479677592}],"departments":[{"column":"manager_id","similarity":0.616788142923364}],"performance_reviews":[{"column":"employee_id","similarity":0.6128993747418323}],"inventory_transactions":[{"column":"created_by","similarity":0.6125536347226702}],"sales_regions":[{"column":"manager_id","similarity":0.6111362570848077}]},"fused_scores":[{"table":"project_resources","fused":0.884049055328149,"table_sim":0.7614596035707293,"col_score":1.0679332329642788},{"table":"projects","fused":0.7819475349878615,"table_sim":0.6633532658939397,"col_score":0.959838938628744},{"table":"project_expenses","fused":0.7645955753960891,"table_sim":0.6627460444190597,"col_score":0.9173698718616332},{"table":"employees","fused":0.7560292383950562,"table_sim":0.6339025803715616,"col_score":0.9392192254302982},{"table":"employee_salaries","fused":0.6289727480856364,"table_sim":0.6310176470805876,"col_score":0.6259053995932096},{"table":"task_assignments","fused":0.5919015747639571,"table_sim":0.6782316484776133,"col_score":0.46240646419347275},{"table":"project_tasks","fused":0.3817655653933093,"table_sim":0,"col_score":0.9544139134832732},{"table":"inventory_adjustments","fused":0.3740833451778139,"table_sim":0,"col_score":0.9352083629445347},{"table":"purchase_requisitions","fused":0.371053006434714,"table_sim":0,"col_score":0.927632516086785},{"table":"asset_transfers","fused":0.34865390822429093,"table_sim":0,"col_score":0.8716347705607272},{"table":"leave_requests","fused":0.3404032060332445,"table_sim":0,"col_score":0.8510080150831112},{"table":"timesheets","fused":0.33306892698157076,"table_sim":0,"col_score":0.8326723174539269},{"table":"employee_benefits","fused":0.3311451269274633,"table_sim":0,"col_score":0.8278628173186582},{"table":"asset_maintenance","fused":0.2630387096101756,"table_sim":0,"col_score":0.657596774025439},{"table":"fixed_assets","fused":0.2619179272845474,"table_sim":0,"col_score":0.6547948182113684}],"fk_expansion_candidates":105,"fk_expansion_added":2,"fk_expansion_blocked_count":87,"fk_expansion_blocked":[{"table":"departments","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"budgets","reason":"already_selected"},{"table":"sales_regions","reason":"no_evidence"},{"table":"project_milestones","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"project_budgets","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"project_milestones","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"project_milestones","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"leave_requests","reason":"max_tables"},{"table":"positions","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"project_budgets","reason":"no_evidence"},{"table":"budgets","reason":"already_selected"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"project_budgets","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"timesheets","reason":"already_selected"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"leave_requests","reason":"max_tables"},{"table":"sales_orders","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"employee_benefits","reason":"max_tables"},{"table":"sales_territories","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"sales_regions","reason":"no_evidence"},{"table":"leave_requests","reason":"max_tables"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"employee_benefits","reason":"max_tables"},{"table":"fixed_assets","reason":"max_tables"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"timesheets","reason":"already_selected"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":30,"total_retrieval_latency_ms":37,"sql_generated":"SELECT pr.employee_id AS EmployeeID, SUM(pr.allocation_percent) AS TotalAllocationPercentage FROM project_resources pr JOIN employees e ON pr.employee_id = e.employee_id WHERE EXISTS (SELECT 1 FROM projects p WHERE p.project_id = pr.project_id AND p.status = 'active') GROUP BY pr.employee_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":48,"total_latency_ms":1309}
{"timestamp":"2026-01-29T21:29:55.790Z","query_id":"3c71db60-8c83-4be2-a6ab-fb0d39cea8f0","question":"List all fixed assets with their assigned employees and current locations","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["fixed_assets","asset_locations","asset_maintenance","asset_transfers","employees","sales_territories","project_expenses","depreciation_schedules","stock_transfers","adjustment_lines"],"tables_from_table_retrieval":6,"tables_from_column_only":5,"tables_from_fk_expansion":0,"table_scores":[{"table":"fixed_assets","similarity":0.7199454700518836},{"table":"fixed_assets","similarity":0.7148515452309757},{"table":"fixed_assets","similarity":0.7148515452309757},{"table":"asset_locations","similarity":0.7140253439243075},{"table":"asset_locations","similarity":0.7140253439243075},{"table":"asset_locations","similarity":0.6993840670281728},{"table":"asset_transfers","similarity":0.6681876163750934},{"table":"asset_maintenance","similarity":0.6662441365446851},{"table":"asset_transfers","similarity":0.6646799369428842},{"table":"asset_transfers","similarity":0.6646799369428842},{"table":"asset_maintenance","similarity":0.6520664008414063},{"table":"asset_maintenance","similarity":0.6520664008414063},{"table":"sales_territories","similarity":0.6138568966711586},{"table":"employees","similarity":0.6041748893811374},{"table":"sales_territories","similarity":0.6032467851960226}],"column_hits_per_table":{"fixed_assets":17,"asset_locations":6,"asset_maintenance":8,"asset_transfers":7,"employees":6,"sales_territories":1,"depreciation_schedules":1,"project_expenses":1,"stock_transfers":1,"adjustment_lines":1,"employee_training":1},"top_columns_per_table":{"fixed_assets":[{"column":"assigned_to","similarity":0.7309660903600991},{"column":"status","similarity":0.7290998988380747},{"column":"location_id","similarity":0.727307286621006}],"asset_locations":[{"column":"building","similarity":0.7055757855424262},{"column":"floor","similarity":0.6952344209513786},{"column":"room","similarity":0.6866855307465951}],"asset_maintenance":[{"column":"status","similarity":0.6627607281665651},{"column":"performed_by","similarity":0.655208869514037},{"column":"asset_id","similarity":0.650844110389269}],"asset_transfers":[{"column":"to_location_id","similarity":0.6598091379381406},{"column":"asset_id","similarity":0.648915686961598},{"column":"from_location_id","similarity":0.6453059808359782}],"employees":[{"column":"email","similarity":0.6222128415310486},{"column":"is_active","similarity":0.6099795955898375},{"column":"created_at","similarity":0.6087545437137886}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6151626798031035}],"depreciation_schedules":[{"column":"asset_id","similarity":0.609072695972689}],"project_expenses":[{"column":"approved_by","similarity":0.5891477196810594}],"stock_transfers":[{"column":"created_by","similarity":0.5885257652007055}],"adjustment_lines":[{"column":"location_id","similarity":0.5880278471168174}],"employee_training":[{"column":"status","similarity":0.5864804082369928}]},"fused_scores":[{"table":"fixed_assets","fused":0.8604937201613337,"table_sim":0.7148515452309757,"col_score":1.0789569825568708},{"table":"asset_locations","fused":0.8409076386241499,"table_sim":0.6993840670281728,"col_score":1.0531929960181154},{"table":"asset_maintenance","fused":0.7790907068878921,"table_sim":0.6520664008414063,"col_score":0.9696271659576206},{"table":"asset_transfers","fused":0.7712951274831453,"table_sim":0.6646799369428842,"col_score":0.931217913293537},{"table":"employees","fused":0.7306585636601679,"table_sim":0.6041748893811374,"col_score":0.9203840750787138},{"table":"sales_territories","fused":0.5341936214624825,"table_sim":0.6032467851960226,"col_score":0.4306138758621724},{"table":"project_expenses","fused":0.23565908787242376,"table_sim":0,"col_score":0.5891477196810594},{"table":"depreciation_schedules","fused":0.17054035487235292,"table_sim":0,"col_score":0.42635088718088227},{"table":"stock_transfers","fused":0.16478721425619755,"table_sim":0,"col_score":0.41196803564049383},{"table":"adjustment_lines","fused":0.1646477971927089,"table_sim":0,"col_score":0.4116194929817722},{"table":"employee_training","fused":0.16421451430635797,"table_sim":0,"col_score":0.4105362857658949}],"fk_expansion_candidates":108,"fk_expansion_added":0,"fk_expansion_blocked_count":108,"fk_expansion_blocked":[{"table":"departments","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":25,"total_retrieval_latency_ms":31,"sql_generated":"SELECT fa.asset_id AS asset_id, fa.name AS asset_name, fa.location_id AS location_id, e.employee_number AS employee_number, e.first_name || ' ' || e.last_name AS assigned_employee_full_name FROM fixed_assets fa JOIN employees e ON fa.assigned_to = e.employee_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":0,"total_latency_ms":1249}
{"timestamp":"2026-01-29T21:29:57.039Z","query_id":"9aa75d50-06ca-4e66-acbb-928cc37cfbf2","question":"Create a comprehensive employee cost report including salary and benefits by department","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_salaries","employee_benefits","employees","project_expenses","budgets","departments","vendor_invoices","project_budgets","project_resources","employee_training","positions","benefit_types"],"tables_from_table_retrieval":6,"tables_from_column_only":18,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_salaries","similarity":0.722375473943176},{"table":"employee_salaries","similarity":0.722375473943176},{"table":"employee_benefits","similarity":0.705595592348026},{"table":"employee_benefits","similarity":0.705595592348026},{"table":"employee_benefits","similarity":0.7033203083522601},{"table":"employee_salaries","similarity":0.7004330807404299},{"table":"project_expenses","similarity":0.6709016284087207},{"table":"project_expenses","similarity":0.6668157727165617},{"table":"project_expenses","similarity":0.6668157727165617},{"table":"employees","similarity":0.6665648484199336},{"table":"employees","similarity":0.6665648484199336},{"table":"employees","similarity":0.6573833023433696},{"table":"budgets","similarity":0.647440451476846},{"table":"budgets","similarity":0.647440451476846},{"table":"departments","similarity":0.6467717005028588}],"column_hits_per_table":{"employees":4,"employee_salaries":7,"employee_benefits":6,"departments":2,"benefit_types":1,"project_expenses":4,"project_resources":2,"cost_centers":1,"budgets":3,"goods_receipts":1,"sales_territories":1,"asset_maintenance":1,"performance_reviews":1,"employment_history":1,"sales_regions":1,"positions":1,"vendor_invoices":4,"product_suppliers":1,"project_budgets":2,"requisition_lines":1,"employee_certifications":1,"employee_training":2,"vendor_invoice_lines":1,"products":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.7361416760164768},{"column":"department_id","similarity":0.643475236115711},{"column":"employee_number","similarity":0.6268915453560163}],"employee_salaries":[{"column":"amount","similarity":0.7283991668176124},{"column":"effective_date","similarity":0.6740447561967371},{"column":"employee_id","similarity":0.6634321666385734}],"employee_benefits":[{"column":"coverage_level","similarity":0.6930697298081193},{"column":"employee_id","similarity":0.6823515721494041},{"column":"benefit_id","similarity":0.6763225886423792}],"departments":[{"column":"budget","similarity":0.6828503188805319},{"column":"manager_id","similarity":0.6345520008976717}],"benefit_types":[{"column":"annual_cost","similarity":0.6699186739305134}],"project_expenses":[{"column":"employee_id","similarity":0.6672105776168827},{"column":"approved_by","similarity":0.657595738784029},{"column":"amount","similarity":0.64664507348676}],"project_resources":[{"column":"hourly_rate","similarity":0.6397016874167624},{"column":"employee_id","similarity":0.6182816053207806}],"cost_centers":[{"column":"department_id","similarity":0.6391395639861553}],"budgets":[{"column":"approved_by","similarity":0.6383618398519554},{"column":"total_amount","similarity":0.6226660734244392},{"column":"department_id","similarity":0.6205743891433299}],"goods_receipts":[{"column":"received_by","similarity":0.6322934653710801}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6291100859650857}],"asset_maintenance":[{"column":"cost","similarity":0.6284459886126739}],"performance_reviews":[{"column":"employee_id","similarity":0.62586180623406}],"employment_history":[{"column":"employee_id","similarity":0.6257662452515415}],"sales_regions":[{"column":"manager_id","similarity":0.6249326800266781}],"positions":[{"column":"min_salary","similarity":0.6243487687260623}],"vendor_invoices":[{"column":"subtotal","similarity":0.6229204399409228},{"column":"amount_paid","similarity":0.6225701829476908},{"column":"total","similarity":0.6212865306083739}],"product_suppliers":[{"column":"unit_cost","similarity":0.6215630296727815}],"project_budgets":[{"column":"actual_amount","similarity":0.6210869451422038},{"column":"planned_amount","similarity":0.6161072096529497}],"requisition_lines":[{"column":"estimated_unit_cost","similarity":0.6201015589432831}],"employee_certifications":[{"column":"employee_id","similarity":0.6199040218225059}],"employee_training":[{"column":"score","similarity":0.6191389283848391},{"column":"status","similarity":0.6156063942576597}],"vendor_invoice_lines":[{"column":"unit_cost","similarity":0.6184622029186051}],"products":[{"column":"unit_cost","similarity":0.6160894325566642}]},"fused_scores":[{"table":"employee_salaries","fused":0.8464284664106503,"table_sim":0.7004330807404299,"col_score":1.065421544915981},{"table":"employee_benefits","fused":0.8314440780203399,"table_sim":0.7033203083522601,"col_score":1.0236297325224597},{"table":"employees","fused":0.8142649608838157,"table_sim":0.6573833023433696,"col_score":1.049587448694485},{"table":"project_expenses","fused":0.7924567738409006,"table_sim":0.6668157727165617,"col_score":0.9809182755274091},{"table":"budgets","fused":0.7683422215117777,"table_sim":0.647440451476846,"col_score":0.9496948765641751},{"table":"departments","fused":0.7500404279796021,"table_sim":0.6467717005028588,"col_score":0.904943519194717},{"table":"vendor_invoices","fused":0.37342548209804394,"table_sim":0,"col_score":0.9335637052451098},{"table":"project_budgets","fused":0.3716562199874715,"table_sim":0,"col_score":0.9291405499686787},{"table":"project_resources","fused":0.3424400997116142,"table_sim":0,"col_score":0.8561002492790355},{"table":"employee_training","fused":0.333840466550008,"table_sim":0,"col_score":0.8346011663750199},{"table":"benefit_types","fused":0.26796746957220535,"table_sim":0,"col_score":0.6699186739305134},{"table":"goods_receipts","fused":0.25291738614843207,"table_sim":0,"col_score":0.6322934653710801},{"table":"asset_maintenance","fused":0.25137839544506957,"table_sim":0,"col_score":0.6284459886126739},{"table":"positions","fused":0.24973950749042492,"table_sim":0,"col_score":0.6243487687260623},{"table":"product_suppliers","fused":0.24862521186911263,"table_sim":0,"col_score":0.6215630296727815}],"fk_expansion_candidates":105,"fk_expansion_added":2,"fk_expansion_blocked_count":90,"fk_expansion_blocked":[{"table":"employee_certifications","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"positions","reason":"already_selected"},{"table":"sales_regions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"max_tables"},{"table":"sales_territories","reason":"no_evidence"},{"table":"benefit_types","reason":"already_selected"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"sales_regions","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"positions","reason":"already_selected"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"benefit_types","reason":"already_selected"},{"table":"sales_orders","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":30,"total_retrieval_latency_ms":37,"sql_generated":"SELECT d.name AS DepartmentName, SUM(es.amount) + COALESCE(SUM(eb.amount), 0) AS TotalCost, COUNT(DISTINCT e.employee_id) AS NumberOfEmployees FROM departments d LEFT JOIN employees e ON d.department_id = e.department_id LEFT JOIN employee_salaries es ON e.employee_id = es.employee_id LEFT JOIN employee_benefits eb ON e.employee_id = eb.employee_id GROUP BY d.name;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column eb.amount does not exist","autocorrect_attempted":true,"autocorrect_success":false,"autocorrect_failure_reason":"Replacement pattern not found in SQL","autocorrect_candidates":1,"total_latency_ms":4465,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column eb.amount does not exist"}
