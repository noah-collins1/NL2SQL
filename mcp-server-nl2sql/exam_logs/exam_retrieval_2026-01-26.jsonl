{"timestamp":"2026-01-26T22:32:53.595Z","query_id":"75d29d93-6394-49ca-bb8d-c6f71b0eac92","question":"How many employees are there?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employees","employee_salaries","customers","employee_certifications","employee_training","employee_benefits","business_units","sales_regions","sales_territories","departments","employment_history","warehouses"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"employees","similarity":0.6706160944528957},{"table":"sales_regions","similarity":0.6379184330971299},{"table":"business_units","similarity":0.6336489150135487},{"table":"positions","similarity":0.6287308943065547},{"table":"employee_salaries","similarity":0.6212928408792732},{"table":"sales_territories","similarity":0.6177671705303469},{"table":"warehouses","similarity":0.6139227212577063},{"table":"employee_certifications","similarity":0.6097082842733971},{"table":"departments","similarity":0.6019166980117042},{"table":"employment_history","similarity":0.6009855487801761},{"table":"employee_training","similarity":0.597050686203717},{"table":"employee_benefits","similarity":0.5964145990940535},{"table":"emergency_contacts","similarity":0.5941752551261682},{"table":"customers","similarity":0.5791613976477926},{"table":"leave_requests","similarity":0.5770652957037857}],"column_hits_per_table":{"employees":16,"departments":1,"sales_regions":1,"business_units":2,"employee_salaries":3,"sales_territories":1,"employee_certifications":2,"sales_opportunities":1,"project_resources":1,"task_assignments":1,"employee_training":3,"customers":3,"timesheets":1,"sales_orders":1,"goods_receipts":1,"asset_maintenance":1,"warehouses":1,"emergency_contacts":1,"project_expenses":1,"asset_transfers":2,"employee_benefits":2,"projects":1,"employment_history":1,"leave_requests":1,"stock_transfers":1},"top_columns_per_table":{"employees":[{"column":"employee_number","similarity":0.7342931683640221},{"column":"is_active","similarity":0.7147999358942504},{"column":"phone","similarity":0.6992269565208645}],"departments":[{"column":"manager_id","similarity":0.6339546653626524}],"sales_regions":[{"column":"manager_id","similarity":0.6328327588738232}],"business_units":[{"column":"manager_id","similarity":0.6282343186105536},{"column":"is_active","similarity":0.6188673184615759}],"employee_salaries":[{"column":"amount","similarity":0.6271531939036803},{"column":"employee_id","similarity":0.6022102013785101},{"column":"approved_by","similarity":0.5989558788984728}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6268350036698649}],"employee_certifications":[{"column":"certificate_number","similarity":0.6234405943183209},{"column":"employee_id","similarity":0.6229758199159574}],"sales_opportunities":[{"column":"owner_id","similarity":0.6209032690551649}],"project_resources":[{"column":"employee_id","similarity":0.6149762761369977}],"task_assignments":[{"column":"employee_id","similarity":0.6147113939101412}],"employee_training":[{"column":"status","similarity":0.6123271900148729},{"column":"score","similarity":0.6069909882548994},{"column":"employee_id","similarity":0.6061794627042085}],"customers":[{"column":"is_active","similarity":0.6110381584367489},{"column":"customer_number","similarity":0.610116502624541},{"column":"phone","similarity":0.6006544022801623}],"timesheets":[{"column":"employee_id","similarity":0.609795212898591}],"sales_orders":[{"column":"sales_rep_id","similarity":0.608843242793323}],"goods_receipts":[{"column":"received_by","similarity":0.6081526022058688}],"asset_maintenance":[{"column":"performed_by","similarity":0.607776168447355}],"warehouses":[{"column":"manager_id","similarity":0.6076856459924543}],"emergency_contacts":[{"column":"employee_id","similarity":0.606701404187491}],"project_expenses":[{"column":"employee_id","similarity":0.6041258269467229}],"asset_transfers":[{"column":"to_employee_id","similarity":0.6038697023645355},{"column":"from_employee_id","similarity":0.5993786020822188}],"employee_benefits":[{"column":"employee_id","similarity":0.6035257291207066},{"column":"coverage_level","similarity":0.5996563315976151}],"projects":[{"column":"project_manager_id","similarity":0.6008184675549474}],"employment_history":[{"column":"employee_id","similarity":0.5959112786561307}],"leave_requests":[{"column":"employee_id","similarity":0.595674422194902}],"stock_transfers":[{"column":"created_by","similarity":0.5954706805509963}]},"fused_scores":[{"table":"employees","fused":0.8359323153215192,"table_sim":0.6706160944528957,"col_score":1.0839066466244545},{"table":"employee_salaries","fused":0.7434281578687305,"table_sim":0.6212928408792732,"col_score":0.9266311333529167},{"table":"customers","fused":0.7116743200945245,"table_sim":0.5791613976477926,"col_score":0.9104437037646221},{"table":"employee_certifications","fused":0.7024178230796007,"table_sim":0.6097082842733971,"col_score":0.841482131288906},{"table":"employee_training","fused":0.6867526136262722,"table_sim":0.597050686203717,"col_score":0.8213055047601049},{"table":"employee_benefits","fused":0.6822048941723771,"table_sim":0.5964145990940535,"col_score":0.8108903367898623},{"table":"business_units","fused":0.6427363828037049,"table_sim":0.6336489150135487,"col_score":0.6563675844889391},{"table":"sales_regions","fused":0.5599442323429484,"table_sim":0.6379184330971299,"col_score":0.4429829312116762},{"table":"sales_territories","fused":0.5461741033457703,"table_sim":0.6177671705303469,"col_score":0.4387845025689054},{"table":"departments","fused":0.5386573251085652,"table_sim":0.6019166980117042,"col_score":0.4437682657538567},{"table":"warehouses","fused":0.538505613632511,"table_sim":0.6139227212577063,"col_score":0.425379952194718},{"table":"employment_history","fused":0.5274464872918222,"table_sim":0.6009855487801761,"col_score":0.41713789505929144},{"table":"emergency_contacts","fused":0.5263815462481984,"table_sim":0.5941752551261682,"col_score":0.42469098293124363},{"table":"leave_requests","fused":0.513028015636844,"table_sim":0.5770652957037857,"col_score":0.41697209553643133},{"table":"positions","fused":0.3772385365839328,"table_sim":0.6287308943065547,"col_score":0}],"fk_expansion_candidates":33,"fk_expansion_added":2,"fk_expansion_blocked_count":25,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"max_tables"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"max_tables"},{"table":"benefit_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"max_tables"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"max_tables"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"currencies","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":1087,"total_retrieval_latency_ms":1109,"sql_generated":"SELECT COUNT(*) FROM employees;","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":24064}
{"timestamp":"2026-01-26T22:33:17.660Z","query_id":"4ac9063e-736c-4fce-b597-0113d05d72fa","question":"Which employees have pending leave requests?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["leave_requests","employees","leave_types","purchase_requisitions","employee_salaries","employee_training","employment_history","timesheets","employee_certifications","goods_receipts","sales_territories","positions"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"leave_requests","similarity":0.7600790941142384},{"table":"employees","similarity":0.6318821970092333},{"table":"leave_types","similarity":0.6243053165161109},{"table":"employment_history","similarity":0.6232974261189369},{"table":"purchase_requisitions","similarity":0.5939119628114023},{"table":"timesheets","similarity":0.5786251968824939},{"table":"employee_training","similarity":0.5750839227740789},{"table":"employee_certifications","similarity":0.5743962867871555},{"table":"goods_receipts","similarity":0.5718610848354152},{"table":"task_assignments","similarity":0.5706152949131827},{"table":"sales_territories","similarity":0.5614078081373084},{"table":"positions","similarity":0.5597262073340161},{"table":"projects","similarity":0.5534503002083008},{"table":"sales_opportunities","similarity":0.5512834500880964},{"table":"employee_salaries","similarity":0.5491897540036026}],"column_hits_per_table":{"leave_requests":10,"employee_training":2,"employees":12,"employment_history":1,"timesheets":2,"leave_types":3,"sales_orders":1,"purchase_requisitions":2,"vendor_invoices":1,"project_tasks":1,"asset_maintenance":1,"employee_benefits":1,"projects":1,"purchase_orders":1,"stock_transfers":1,"sales_quotes":1,"project_expenses":1,"fixed_assets":1,"employee_certifications":1,"task_assignments":1,"goods_receipts":1,"employee_salaries":2,"sales_territories":1,"project_phases":1},"top_columns_per_table":{"leave_requests":[{"column":"status","similarity":0.7848719368682063},{"column":"employee_id","similarity":0.7576636579687751},{"column":"days_requested","similarity":0.7398783151100068}],"employee_training":[{"column":"status","similarity":0.6651923522652087},{"column":"scheduled_date","similarity":0.5942999900390922}],"employees":[{"column":"termination_date","similarity":0.6457696051473769},{"column":"email","similarity":0.6346475885363552},{"column":"last_name","similarity":0.6289095722388175}],"employment_history":[{"column":"reason_for_leaving","similarity":0.6361385453486292}],"timesheets":[{"column":"status","similarity":0.6339196627014697},{"column":"employee_id","similarity":0.5914292311259354}],"leave_types":[{"column":"is_paid","similarity":0.6210462067937735},{"column":"days_allowed","similarity":0.6179268957404154},{"column":"requires_approval","similarity":0.6015299391142729}],"sales_orders":[{"column":"status","similarity":0.6210060419850735}],"purchase_requisitions":[{"column":"status","similarity":0.6193300474461643},{"column":"requested_by","similarity":0.6053096443813046}],"vendor_invoices":[{"column":"status","similarity":0.6155310542664321}],"project_tasks":[{"column":"status","similarity":0.6119107629795923}],"asset_maintenance":[{"column":"status","similarity":0.6085158795953126}],"employee_benefits":[{"column":"end_date","similarity":0.6074126091020398}],"projects":[{"column":"status","similarity":0.6062843845135029}],"purchase_orders":[{"column":"status","similarity":0.6056490490407618}],"stock_transfers":[{"column":"status","similarity":0.6050219711376368}],"sales_quotes":[{"column":"status","similarity":0.6049360812469786}],"project_expenses":[{"column":"status","similarity":0.6029918860858492}],"fixed_assets":[{"column":"status","similarity":0.6000566812603433}],"employee_certifications":[{"column":"expiry_date","similarity":0.5947566615407769}],"task_assignments":[{"column":"employee_id","similarity":0.5916098874816911}],"goods_receipts":[{"column":"received_by","similarity":0.5906067416911127}],"employee_salaries":[{"column":"change_reason","similarity":0.5843630753678524},{"column":"end_date","similarity":0.579293919815319}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5811710599296118}],"project_phases":[{"column":"status","similarity":0.5807882110700618}]},"fused_scores":[{"table":"leave_requests","fused":0.8980468193115467,"table_sim":0.7600790941142384,"col_score":1.1049984071075094},{"table":"employees","fused":0.7643666779717617,"table_sim":0.6318821970092333,"col_score":0.9630933994155545},{"table":"leave_types","fused":0.7420599360286873,"table_sim":0.6243053165161109,"col_score":0.9186918652975518},{"table":"purchase_requisitions","fused":0.6851772420818263,"table_sim":0.5939119628114023,"col_score":0.8220751609874621},{"table":"employee_salaries","fused":0.6791178665123663,"table_sim":0.5491897540036026,"col_score":0.8740100352755118},{"table":"employee_training","fused":0.6758972789972135,"table_sim":0.5750839227740789,"col_score":0.8271173133319152},{"table":"employment_history","fused":0.6284338738108138,"table_sim":0.6232974261189369,"col_score":0.6361385453486292},{"table":"timesheets","fused":0.6074727160435388,"table_sim":0.5786251968824939,"col_score":0.6507439947851061},{"table":"employee_certifications","fused":0.582540436688604,"table_sim":0.5743962867871555,"col_score":0.5947566615407769},{"table":"goods_receipts","fused":0.5793593475776941,"table_sim":0.5718610848354152,"col_score":0.5906067416911127},{"table":"task_assignments","fused":0.5080199454427832,"table_sim":0.5706152949131827,"col_score":0.41412692123718375},{"table":"projects","fused":0.5018298077887613,"table_sim":0.5534503002083008,"col_score":0.42439906915945197},{"table":"sales_territories","fused":0.4995725816626763,"table_sim":0.5614078081373084,"col_score":0.40681974195072823},{"table":"positions","fused":0.33583572440040965,"table_sim":0.5597262073340161,"col_score":0},{"table":"sales_opportunities","fused":0.33077007005285786,"table_sim":0.5512834500880964,"col_score":0}],"fk_expansion_candidates":32,"fk_expansion_added":2,"fk_expansion_blocked_count":26,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"projects","reason":"max_tables"},{"table":"task_assignments","reason":"max_tables"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":52,"total_retrieval_latency_ms":61,"sql_generated":"SELECT DISTINCT e.employee_id, e.first_name || ' ' || e.last_name AS employee_full_name FROM employees e JOIN leave_requests lr ON e.employee_id = lr.employee_id WHERE lr.status = 'pending';","tables_used_in_sql":[],"explain_result":"success","rows_returned":194,"total_latency_ms":1050}
{"timestamp":"2026-01-26T22:33:18.710Z","query_id":"8338cbdc-a9ac-4bd4-bb2f-b39d9edb9eb2","question":"Show me all employees in the IT department","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employees","departments","employee_salaries","employee_certifications","goods_receipts","positions","sales_regions","business_units","sales_territories","purchase_requisitions","employment_history","budgets"],"tables_from_table_retrieval":15,"tables_from_column_only":12,"tables_from_fk_expansion":2,"table_scores":[{"table":"departments","similarity":0.6927396246818182},{"table":"employees","similarity":0.6924868186506937},{"table":"positions","similarity":0.6522882892638996},{"table":"employee_salaries","similarity":0.6328453565322726},{"table":"sales_regions","similarity":0.6289343921495985},{"table":"employee_certifications","similarity":0.6228902985040294},{"table":"business_units","similarity":0.6183807687080644},{"table":"sales_territories","similarity":0.6123467220731618},{"table":"budgets","similarity":0.6115621877349338},{"table":"purchase_requisitions","similarity":0.611311095836367},{"table":"employment_history","similarity":0.6082899463282893},{"table":"employee_training","similarity":0.6057958807766469},{"table":"employee_benefits","similarity":0.6052911588006946},{"table":"emergency_contacts","similarity":0.6022886854441117},{"table":"goods_receipts","similarity":0.6013599248669833}],"column_hits_per_table":{"employees":15,"departments":5,"positions":1,"employee_certifications":2,"goods_receipts":1,"sales_orders":1,"sales_territories":1,"business_units":1,"asset_maintenance":1,"project_expenses":2,"sales_regions":1,"employee_benefits":1,"purchase_requisitions":1,"task_assignments":1,"employee_salaries":2,"budgets":1,"emergency_contacts":1,"performance_reviews":1,"sales_opportunities":1,"timesheets":1,"asset_transfers":3,"employee_training":1,"project_resources":1,"employment_history":1,"cost_centers":1,"warehouses":1,"purchase_orders":1},"top_columns_per_table":{"employees":[{"column":"department_id","similarity":0.7331035834494063},{"column":"phone","similarity":0.687493922408777},{"column":"is_active","similarity":0.682100608063993}],"departments":[{"column":"manager_id","similarity":0.7048775537978292},{"column":"department_id","similarity":0.6680869319903886},{"column":"name","similarity":0.6648396703255444}],"positions":[{"column":"department_id","similarity":0.6788322978888058}],"employee_certifications":[{"column":"employee_id","similarity":0.6617140130243413},{"column":"certification_id","similarity":0.6327398370814213}],"goods_receipts":[{"column":"received_by","similarity":0.6550045910013622}],"sales_orders":[{"column":"sales_rep_id","similarity":0.6541949644779772}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6533393179177758}],"business_units":[{"column":"manager_id","similarity":0.6512230534069243}],"asset_maintenance":[{"column":"performed_by","similarity":0.6443059386166702}],"project_expenses":[{"column":"employee_id","similarity":0.6404466515624411},{"column":"approved_by","similarity":0.6210547510160669}],"sales_regions":[{"column":"manager_id","similarity":0.6390087374754855}],"employee_benefits":[{"column":"employee_id","similarity":0.6386782039268882}],"purchase_requisitions":[{"column":"department_id","similarity":0.6383043921071383}],"task_assignments":[{"column":"employee_id","similarity":0.6371499967690952}],"employee_salaries":[{"column":"employee_id","similarity":0.6371314408261511},{"column":"approved_by","similarity":0.625626929878524}],"budgets":[{"column":"department_id","similarity":0.6364556919350218}],"emergency_contacts":[{"column":"employee_id","similarity":0.6343158127685631}],"performance_reviews":[{"column":"employee_id","similarity":0.6333789531415293}],"sales_opportunities":[{"column":"owner_id","similarity":0.6333091115188922}],"timesheets":[{"column":"employee_id","similarity":0.6316201090342737}],"asset_transfers":[{"column":"to_employee_id","similarity":0.6310652406163723},{"column":"transferred_by","similarity":0.6236630677503007},{"column":"from_employee_id","similarity":0.6231588735474997}],"employee_training":[{"column":"employee_id","similarity":0.6304860594714952}],"project_resources":[{"column":"employee_id","similarity":0.6302888585732642}],"employment_history":[{"column":"employee_id","similarity":0.6281546533125549}],"cost_centers":[{"column":"department_id","similarity":0.6246612740191144}],"warehouses":[{"column":"manager_id","similarity":0.6217952445252526}],"purchase_orders":[{"column":"approved_by","similarity":0.6205804179606539}]},"fused_scores":[{"table":"employees","fused":0.8265232925715071,"table_sim":0.6924868186506937,"col_score":1.027578003452727},{"table":"departments","fused":0.7799634154575771,"table_sim":0.6927396246818182,"col_score":0.9107991016212155},{"table":"employee_salaries","fused":0.7191563875864343,"table_sim":0.6328453565322726,"col_score":0.8486229341676769},{"table":"employee_certifications","fused":0.6475976799406322,"table_sim":0.6228902985040294,"col_score":0.6846587520955363},{"table":"goods_receipts","fused":0.6228177913207349,"table_sim":0.6013599248669833,"col_score":0.6550045910013622},{"table":"positions","fused":0.5814460169672053,"table_sim":0.6522882892638996,"col_score":0.47518260852216404},{"table":"sales_regions","fused":0.556283081782895,"table_sim":0.6289343921495985,"col_score":0.4473061162328398},{"table":"business_units","fused":0.5533709161787774,"table_sim":0.6183807687080644,"col_score":0.455856137384847},{"table":"sales_territories","fused":0.5503430422608743,"table_sim":0.6123467220731618,"col_score":0.45733752254244303},{"table":"purchase_requisitions","fused":0.545511887291819,"table_sim":0.611311095836367,"col_score":0.4468130744749968},{"table":"budgets","fused":0.5451449063827664,"table_sim":0.6115621877349338,"col_score":0.44551898435451526},{"table":"employee_benefits","fused":0.5420045923799455,"table_sim":0.6052911588006946,"col_score":0.44707474274882175},{"table":"employment_history","fused":0.540857270724489,"table_sim":0.6082899463282893,"col_score":0.43970825731878843},{"table":"employee_training","fused":0.5400136251180068,"table_sim":0.6057958807766469,"col_score":0.4413402416300466},{"table":"emergency_contacts","fused":0.5389816388416647,"table_sim":0.6022886854441117,"col_score":0.44402106893799415}],"fk_expansion_candidates":30,"fk_expansion_added":2,"fk_expansion_blocked_count":21,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"employee_training","reason":"max_tables"},{"table":"project_expenses","reason":"max_tables"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"emergency_contacts","reason":"max_tables"},{"table":"asset_transfers","reason":"max_tables"},{"table":"purchase_orders","reason":"max_tables"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":1186,"total_retrieval_latency_ms":1195,"sql_generated":"SELECT e.employee_id, e.first_name, e.last_name, d.department_id, d.name AS department_name FROM employees e JOIN departments d ON e.department_id = d.department_id WHERE d.name = 'IT';","tables_used_in_sql":[],"explain_result":"success","rows_returned":0,"total_latency_ms":2222}
{"timestamp":"2026-01-26T22:33:20.933Z","query_id":"9253ef08-2fa1-4500-8d6c-ba7fdc8ce556","question":"List employees with their current salaries","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employee_salaries","employees","positions","employee_benefits","employee_training","employment_history","project_expenses","departments","employee_certifications","task_assignments","budgets","business_units"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_salaries","similarity":0.7545464013852723},{"table":"positions","similarity":0.6820696780393701},{"table":"employees","similarity":0.6688527253671303},{"table":"employee_benefits","similarity":0.6391234436343393},{"table":"employee_training","similarity":0.6334978152522242},{"table":"employee_certifications","similarity":0.6281483915653624},{"table":"employment_history","similarity":0.6255889990807703},{"table":"task_assignments","similarity":0.6163464886255163},{"table":"project_expenses","similarity":0.6127626899533423},{"table":"departments","similarity":0.6068087816000566},{"table":"timesheets","similarity":0.6052313343764657},{"table":"sales_regions","similarity":0.6013057215085695},{"table":"budgets","similarity":0.5980582536160217},{"table":"business_units","similarity":0.5890906869521807},{"table":"project_resources","similarity":0.587977678105991}],"column_hits_per_table":{"employees":15,"employee_salaries":7,"positions":3,"employee_benefits":5,"project_expenses":2,"employee_certifications":2,"employee_training":3,"fixed_assets":1,"sales_territories":1,"task_assignments":1,"asset_transfers":2,"timesheets":1,"employment_history":2,"bank_accounts":1,"sales_opportunities":1,"departments":2,"sales_orders":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.7947701900702193},{"column":"position_id","similarity":0.6857792489633598},{"column":"employee_number","similarity":0.6831879289835511}],"employee_salaries":[{"column":"amount","similarity":0.7646733110997672},{"column":"end_date","similarity":0.7643631933436075},{"column":"effective_date","similarity":0.7643358910844487}],"positions":[{"column":"max_salary","similarity":0.694770037171918},{"column":"min_salary","similarity":0.6883303576863916},{"column":"department_id","similarity":0.6331678635947874}],"employee_benefits":[{"column":"employee_id","similarity":0.6601111949250146},{"column":"end_date","similarity":0.646493278147022},{"column":"coverage_level","similarity":0.6392220306614724}],"project_expenses":[{"column":"employee_id","similarity":0.656040337794174},{"column":"approved_by","similarity":0.624034750171451}],"employee_certifications":[{"column":"employee_id","similarity":0.6491761640451195},{"column":"certification_id","similarity":0.620403748691102}],"employee_training":[{"column":"score","similarity":0.6477661773540994},{"column":"status","similarity":0.6433963802316086},{"column":"employee_id","similarity":0.6378386821003409}],"fixed_assets":[{"column":"assigned_to","similarity":0.6383793615271043}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6344566459465192}],"task_assignments":[{"column":"employee_id","similarity":0.6333134836390694}],"asset_transfers":[{"column":"to_employee_id","similarity":0.628235759338944},{"column":"from_employee_id","similarity":0.6275136213761696}],"timesheets":[{"column":"employee_id","similarity":0.6260185693624314}],"employment_history":[{"column":"employee_id","similarity":0.6248309838689987},{"column":"position","similarity":0.6229223873224801}],"bank_accounts":[{"column":"current_balance","similarity":0.6213442302678798}],"sales_opportunities":[{"column":"owner_id","similarity":0.6207524206425837}],"departments":[{"column":"budget","similarity":0.6187140956753353},{"column":"manager_id","similarity":0.6165608493427884}],"sales_orders":[{"column":"sales_rep_id","similarity":0.6177752037780809}]},"fused_scores":[{"table":"employee_salaries","fused":0.9114698039397918,"table_sim":0.7545464013852723,"col_score":1.146854907771571},{"table":"employees","fused":0.8558572970450762,"table_sim":0.6688527253671303,"col_score":1.136364154561995},{"table":"positions","fused":0.8248158932296676,"table_sim":0.6820696780393701,"col_score":1.0389352160151137},{"table":"employee_benefits","fused":0.7699157835717068,"table_sim":0.6391234436343393,"col_score":0.9661042934777582},{"table":"employee_training","fused":0.7292806533253995,"table_sim":0.6334978152522242,"col_score":0.8729549104351624},{"table":"employment_history","fused":0.7119986921191139,"table_sim":0.6255889990807703,"col_score":0.8416132316766296},{"table":"project_expenses","fused":0.7091171613317702,"table_sim":0.6127626899533423,"col_score":0.8536488683994119},{"table":"departments","fused":0.6978894261381585,"table_sim":0.6068087816000566,"col_score":0.8345103929453113},{"table":"employee_certifications","fused":0.6455148856886052,"table_sim":0.6281483915653624,"col_score":0.6715646268734693},{"table":"task_assignments","fused":0.5471356685942492,"table_sim":0.6163464886255163,"col_score":0.4433194385473485},{"table":"timesheets","fused":0.5384240000473601,"table_sim":0.6052313343764657,"col_score":0.43821299855370194},{"table":"sales_regions","fused":0.3607834329051417,"table_sim":0.6013057215085695,"col_score":0},{"table":"budgets","fused":0.35883495216961303,"table_sim":0.5980582536160217,"col_score":0},{"table":"business_units","fused":0.3534544121713084,"table_sim":0.5890906869521807,"col_score":0},{"table":"project_resources","fused":0.3527866068635946,"table_sim":0.587977678105991,"col_score":0}],"fk_expansion_candidates":31,"fk_expansion_added":2,"fk_expansion_blocked_count":24,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"sales_regions","reason":"max_tables"},{"table":"fixed_assets","reason":"max_tables"},{"table":"project_resources","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"max_tables"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":48,"total_retrieval_latency_ms":53,"sql_generated":"SELECT e.employee_id, e.first_name || ' ' || e.last_name AS employee_full_name, s.amount AS current_salary FROM employees e JOIN employee_salaries s ON e.employee_id = s.employee_id WHERE s.effective_date <= CURRENT_DATE AND (s.end_date IS NULL OR s.end_date > CURRENT_DATE) ORDER BY e.first_name, e.last_name;","tables_used_in_sql":[],"explain_result":"success","rows_returned":97,"total_latency_ms":1559}
{"timestamp":"2026-01-26T22:33:22.492Z","query_id":"7fd33409-b4b0-40c7-81a8-2deb42829f62","question":"Which employees have completed training courses?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employee_training","training_courses","employee_certifications","employees","employee_salaries","certifications","employee_benefits","employment_history","task_assignments","business_units","sales_territories","positions"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_training","similarity":0.7594736216634744},{"table":"training_courses","similarity":0.7101023249398373},{"table":"employee_certifications","similarity":0.6550228424696093},{"table":"employees","similarity":0.6037757943602328},{"table":"certifications","similarity":0.572859100311977},{"table":"employee_salaries","similarity":0.568815365784873},{"table":"employment_history","similarity":0.5685938099294188},{"table":"employee_benefits","similarity":0.553980322439993},{"table":"business_units","similarity":0.5506481609132864},{"table":"task_assignments","similarity":0.5398673987476856},{"table":"positions","similarity":0.53664128993155},{"table":"stock_transfers","similarity":0.5344473656587291},{"table":"leave_requests","similarity":0.5325101814972547},{"table":"sales_territories","similarity":0.5281794593257764},{"table":"sales_opportunities","similarity":0.5281132315811581}],"column_hits_per_table":{"employee_training":7,"training_courses":7,"employee_certifications":6,"employee_salaries":3,"employees":14,"certifications":4,"employee_benefits":3,"employment_history":3,"task_assignments":1,"project_resources":1,"asset_transfers":1},"top_columns_per_table":{"employee_training":[{"column":"completion_date","similarity":0.7847573270287406},{"column":"status","similarity":0.7335246295145528},{"column":"scheduled_date","similarity":0.7300573718707475}],"training_courses":[{"column":"description","similarity":0.7052032414059842},{"column":"is_active","similarity":0.7001484806135001},{"column":"duration_hours","similarity":0.6790122388318868}],"employee_certifications":[{"column":"obtained_date","similarity":0.6636550094342382},{"column":"expiry_date","similarity":0.6187511260606384},{"column":"employee_id","similarity":0.6164329663625314}],"employee_salaries":[{"column":"end_date","similarity":0.6085203264368407},{"column":"effective_date","similarity":0.5903722078100417},{"column":"change_reason","similarity":0.5554958551271948}],"employees":[{"column":"is_active","similarity":0.607034723655981},{"column":"hire_date","similarity":0.5971076363057518},{"column":"birth_date","similarity":0.5968323056479627}],"certifications":[{"column":"description","similarity":0.6059429882651829},{"column":"issuing_body","similarity":0.5776625370445255},{"column":"name","similarity":0.5675833015608702}],"employee_benefits":[{"column":"end_date","similarity":0.588518957730868},{"column":"start_date","similarity":0.5778607862628358},{"column":"coverage_level","similarity":0.5564618237146433}],"employment_history":[{"column":"end_date","similarity":0.569632747735359},{"column":"company_name","similarity":0.5528688622771137},{"column":"employee_id","similarity":0.5502946902499726}],"task_assignments":[{"column":"employee_id","similarity":0.5633764583146826}],"project_resources":[{"column":"employee_id","similarity":0.556363285891573}],"asset_transfers":[{"column":"from_employee_id","similarity":0.5512345321344566}]},"fused_scores":[{"table":"employee_training","fused":0.9155985781837304,"table_sim":0.7594736216634744,"col_score":1.1497860129641144},{"table":"training_courses","fused":0.8320578907927199,"table_sim":0.7101023249398373,"col_score":1.014991239572044},{"table":"employee_certifications","fused":0.7822259344675886,"table_sim":0.6550228424696093,"col_score":0.9730305724645574},{"table":"employees","fused":0.7204749922680329,"table_sim":0.6037757943602328,"col_score":0.8955237891297332},{"table":"employee_salaries","fused":0.7027717916076685,"table_sim":0.568815365784873,"col_score":0.9037064303418616},{"table":"certifications","fused":0.6871593017303956,"table_sim":0.572859100311977,"col_score":0.8586096038580235},{"table":"employee_benefits","fused":0.6833679338089103,"table_sim":0.553980322439993,"col_score":0.8774493508622859},{"table":"employment_history","fused":0.6464110257705907,"table_sim":0.5685938099294188,"col_score":0.7631368495323487},{"table":"task_assignments","fused":0.4816658475767225,"table_sim":0.5398673987476856,"col_score":0.3943635208202778},{"table":"business_units","fused":0.3303888965479718,"table_sim":0.5506481609132864,"col_score":0},{"table":"positions","fused":0.32198477395893,"table_sim":0.53664128993155,"col_score":0},{"table":"stock_transfers","fused":0.32066841939523744,"table_sim":0.5344473656587291,"col_score":0},{"table":"leave_requests","fused":0.3195061088983528,"table_sim":0.5325101814972547,"col_score":0},{"table":"sales_territories","fused":0.3169076755954658,"table_sim":0.5281794593257764,"col_score":0},{"table":"sales_opportunities","fused":0.31686793894869486,"table_sim":0.5281132315811581,"col_score":0}],"fk_expansion_candidates":30,"fk_expansion_added":2,"fk_expansion_blocked_count":25,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"max_tables"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"max_tables"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":20,"total_retrieval_latency_ms":26,"sql_generated":"SELECT e.employee_id, e.first_name || ' ' || e.last_name AS employee_full_name FROM employees e JOIN employee_training et ON e.employee_id = et.employee_id WHERE et.completion_date IS NOT NULL;","tables_used_in_sql":[],"explain_result":"success","rows_returned":526,"total_latency_ms":924}
{"timestamp":"2026-01-26T22:33:23.416Z","query_id":"1dec555f-245a-46f7-b5b3-0c95a8486ca9","question":"Show all journal entries for this fiscal year","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["journal_entries","depreciation_entries","fiscal_years","journal_lines","fiscal_periods","timesheet_entries","depreciation_schedules","goods_receipts","budgets","budget_lines","departments","receipt_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"journal_entries","similarity":0.7387079860597112},{"table":"depreciation_entries","similarity":0.6784979792559839},{"table":"fiscal_years","similarity":0.6537718203384439},{"table":"journal_lines","similarity":0.6229397792911378},{"table":"fiscal_periods","similarity":0.6112845842462493},{"table":"budget_lines","similarity":0.5769463284548185},{"table":"budgets","similarity":0.5648198477305948},{"table":"timesheet_entries","similarity":0.5568657088692981},{"table":"depreciation_schedules","similarity":0.5280204892971312},{"table":"asset_categories","similarity":0.5181089263302088},{"table":"project_budgets","similarity":0.5167392128630822},{"table":"goods_receipts","similarity":0.516710576777363},{"table":"audit_log","similarity":0.5049644866655677},{"table":"tax_rates","similarity":0.4979902150259412},{"table":"receipt_lines","similarity":0.493285737804819}],"column_hits_per_table":{"journal_entries":9,"depreciation_entries":8,"fiscal_years":5,"journal_lines":7,"budgets":2,"fiscal_periods":7,"timesheet_entries":3,"goods_receipts":2,"project_budgets":1,"budget_lines":1,"departments":1,"depreciation_schedules":3,"performance_reviews":1},"top_columns_per_table":{"journal_entries":[{"column":"entry_date","similarity":0.7471964161720794},{"column":"period_id","similarity":0.7269548029396768},{"column":"description","similarity":0.6892470471622779}],"depreciation_entries":[{"column":"journal_entry_id","similarity":0.6650913980161991},{"column":"entry_date","similarity":0.6634444152328394},{"column":"period_id","similarity":0.6351772683029223}],"fiscal_years":[{"column":"year","similarity":0.6536712052374944},{"column":"start_date","similarity":0.6458473529707516},{"column":"end_date","similarity":0.635477434155023}],"journal_lines":[{"column":"debit","similarity":0.6534453211246423},{"column":"entry_id","similarity":0.6461922747661374},{"column":"credit","similarity":0.6355362139356633}],"budgets":[{"column":"fiscal_year_id","similarity":0.6316465304741155},{"column":"status","similarity":0.5726382282689442}],"fiscal_periods":[{"column":"start_date","similarity":0.6297493761137097},{"column":"fiscal_year_id","similarity":0.625909293554885},{"column":"end_date","similarity":0.6166230533697363}],"timesheet_entries":[{"column":"entry_date","similarity":0.6138131089017452},{"column":"is_billable","similarity":0.5745529144139921},{"column":"description","similarity":0.562656336230838}],"goods_receipts":[{"column":"receipt_date","similarity":0.6099753048986172},{"column":"notes","similarity":0.6087312460685832}],"project_budgets":[{"column":"notes","similarity":0.6050733845605758}],"budget_lines":[{"column":"period_id","similarity":0.5954087805501386}],"departments":[{"column":"budget","similarity":0.5734883956645156}],"depreciation_schedules":[{"column":"start_date","similarity":0.5652436205418795},{"column":"end_date","similarity":0.56290347843083},{"column":"annual_amount","similarity":0.5580010391557005}],"performance_reviews":[{"column":"review_date","similarity":0.5562885337209809}]},"fused_scores":[{"table":"journal_entries","fused":0.8778319371594454,"table_sim":0.7387079860597112,"col_score":1.0865178638090467},{"table":"depreciation_entries","fused":0.7969088627917953,"table_sim":0.6784979792559839,"col_score":0.9745251880955124},{"table":"fiscal_years","fused":0.7829010448922145,"table_sim":0.6537718203384439,"col_score":0.9765948817228702},{"table":"journal_lines","fused":0.7622492388116722,"table_sim":0.6229397792911378,"col_score":0.9712134280924739},{"table":"fiscal_periods","fused":0.7419951116671808,"table_sim":0.6112845842462493,"col_score":0.9380609027985779},{"table":"timesheet_entries","fused":0.6945552517650754,"table_sim":0.5568657088692981,"col_score":0.9010895661087412},{"table":"depreciation_schedules","fused":0.6554904374811965,"table_sim":0.5280204892971312,"col_score":0.8466953597572945},{"table":"goods_receipts","fused":0.6392388424754663,"table_sim":0.516710576777363,"col_score":0.8230312410226213},{"table":"budgets","fused":0.5959222891287614,"table_sim":0.5648198477305948,"col_score":0.6425759512260112},{"table":"budget_lines","fused":0.5128822556269299,"table_sim":0.5769463284548185,"col_score":0.416786146385097},{"table":"project_budgets","fused":0.47946407539481056,"table_sim":0.5167392128630822,"col_score":0.42355136919240305},{"table":"asset_categories","fused":0.31086535579812524,"table_sim":0.5181089263302088,"col_score":0},{"table":"audit_log","fused":0.30297869199934063,"table_sim":0.5049644866655677,"col_score":0},{"table":"tax_rates","fused":0.29879412901556474,"table_sim":0.4979902150259412,"col_score":0},{"table":"receipt_lines","fused":0.2959714426828914,"table_sim":0.493285737804819,"col_score":0}],"fk_expansion_candidates":11,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":22,"total_retrieval_latency_ms":28,"sql_generated":"SELECT j.entry_id AS entry_id, j.entry_number AS entry_number, j.entry_date AS entry_date, d.name AS department_name, g.receipt_number AS receipt_number, p.po_id AS purchase_order_id\nFROM journal_entries j\nJOIN fiscal_years y ON j.period_id = fp.period_id AND y.fiscal_year_id = fp.fiscal_year_id\nJOIN departments d ON j.department_id = d.department_id\nLEFT JOIN goods_receipts g ON j.entry_id = g.receipt_id\nWHERE YEAR(j.entry_date) = YEAR(CURRENT_DATE);","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42P01","error_message":"missing FROM-clause entry for table \"fp\"","total_latency_ms":6237,"failure_type":"join_path_miss","failure_details":"Database error after 3 attempts: missing FROM-clause entry for table \"fp\""}
{"timestamp":"2026-01-26T22:33:29.653Z","query_id":"48c43d90-ca27-476c-ad83-4cd00e72c434","question":"What is the total budget by cost center?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["project_budgets","budgets","cost_centers","project_expenses","budget_lines","depreciation_schedules","departments","projects","warehouse_locations","project_resources","fiscal_periods","fiscal_years"],"tables_from_table_retrieval":15,"tables_from_column_only":10,"tables_from_fk_expansion":2,"table_scores":[{"table":"cost_centers","similarity":0.6876703627246904},{"table":"project_budgets","similarity":0.6588978684039324},{"table":"budgets","similarity":0.6312660069418664},{"table":"budget_lines","similarity":0.6193574417544377},{"table":"project_expenses","similarity":0.6022289853108402},{"table":"fiscal_years","similarity":0.5496788446429816},{"table":"fiscal_periods","similarity":0.5369396016055871},{"table":"departments","similarity":0.5364826895722529},{"table":"depreciation_schedules","similarity":0.5233046638187542},{"table":"depreciation_entries","similarity":0.5183607660602447},{"table":"warehouse_locations","similarity":0.5132331493789545},{"table":"inventory_levels","similarity":0.5098879743301286},{"table":"projects","similarity":0.5092741345543956},{"table":"project_resources","similarity":0.5050066012737228},{"table":"timesheet_entries","similarity":0.4957074021362251}],"column_hits_per_table":{"budgets":8,"cost_centers":5,"project_budgets":6,"departments":1,"budget_lines":5,"journal_lines":1,"projects":1,"project_expenses":10,"purchase_orders":1,"fixed_assets":1,"depreciation_schedules":2,"sales_orders":1,"asset_maintenance":1,"project_resources":1,"vendor_invoices":1,"products":1,"product_suppliers":1,"requisition_lines":1,"warehouse_locations":1,"order_lines":1},"top_columns_per_table":{"budgets":[{"column":"total_amount","similarity":0.7401121403103866},{"column":"department_id","similarity":0.635533785177714},{"column":"budget_id","similarity":0.6340511872635402}],"cost_centers":[{"column":"is_active","similarity":0.7005820529585428},{"column":"department_id","similarity":0.6884728871042377},{"column":"code","similarity":0.6836163834031967}],"project_budgets":[{"column":"actual_amount","similarity":0.6821108345000997},{"column":"planned_amount","similarity":0.6625156967656242},{"column":"budget_id","similarity":0.6352888024403147}],"departments":[{"column":"budget","similarity":0.6755583265244872}],"budget_lines":[{"column":"amount","similarity":0.6661375020998581},{"column":"budget_id","similarity":0.6311281732006139},{"column":"line_id","similarity":0.5951887409334163}],"journal_lines":[{"column":"cost_center_id","similarity":0.6644566905681991}],"projects":[{"column":"budget","similarity":0.6485191491051205}],"project_expenses":[{"column":"amount","similarity":0.6446828541163709},{"column":"expense_date","similarity":0.6152508671697716},{"column":"is_billable","similarity":0.5974824310765149}],"purchase_orders":[{"column":"total","similarity":0.5784422804812954}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5752304029988025}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5713560900362603},{"column":"monthly_amount","similarity":0.5695494441668361}],"sales_orders":[{"column":"total","similarity":0.5625452173118727}],"asset_maintenance":[{"column":"cost","similarity":0.5617479872737756}],"project_resources":[{"column":"allocation_percent","similarity":0.5614560532117141}],"vendor_invoices":[{"column":"total","similarity":0.5613413712673133}],"products":[{"column":"unit_cost","similarity":0.5579579587262947}],"product_suppliers":[{"column":"unit_cost","similarity":0.5572301035800272}],"requisition_lines":[{"column":"estimated_unit_cost","similarity":0.5549808401153731}],"warehouse_locations":[{"column":"capacity","similarity":0.5545760955005136}],"order_lines":[{"column":"line_total","similarity":0.5534445279607138}]},"fused_scores":[{"table":"project_budgets","fused":0.8006861941955241,"table_sim":0.6588978684039324,"col_score":1.0133686828829118},{"table":"budgets","fused":0.7976444334821781,"table_sim":0.6312660069418664,"col_score":1.0472120732926455},{"table":"cost_centers","fused":0.7841302584102889,"table_sim":0.6876703627246904,"col_score":0.9288201019386867},{"table":"project_expenses","fused":0.7422607062670068,"table_sim":0.6022289853108402,"col_score":0.9523082877012568},{"table":"budget_lines","fused":0.7264274101406918,"table_sim":0.6193574417544377,"col_score":0.8870323627200729},{"table":"depreciation_schedules","fused":0.6564351231391239,"table_sim":0.5233046638187542,"col_score":0.8561308121196783},{"table":"departments","fused":0.5921129443531467,"table_sim":0.5364826895722529,"col_score":0.6755583265244872},{"table":"projects","fused":0.5649721403746856,"table_sim":0.5092741345543956,"col_score":0.6485191491051205},{"table":"warehouse_locations","fused":0.529770327827578,"table_sim":0.5132331493789545,"col_score":0.5545760955005136},{"table":"project_resources","fused":0.5275863820489193,"table_sim":0.5050066012737228,"col_score":0.5614560532117141},{"table":"fiscal_years","fused":0.3298073067857889,"table_sim":0.5496788446429816,"col_score":0},{"table":"fiscal_periods","fused":0.32216376096335225,"table_sim":0.5369396016055871,"col_score":0},{"table":"depreciation_entries","fused":0.3110164596361468,"table_sim":0.5183607660602447,"col_score":0},{"table":"inventory_levels","fused":0.3059327845980771,"table_sim":0.5098879743301286,"col_score":0},{"table":"timesheet_entries","fused":0.29742444128173506,"table_sim":0.4957074021362251,"col_score":0}],"fk_expansion_candidates":17,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"adjustment_lines","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"inventory_levels","reason":"max_tables"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"project_milestones","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"timesheet_entries","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":1193,"total_retrieval_latency_ms":1200,"sql_generated":"SELECT c.name AS CostCenterName, SUM(b.total_amount) AS TotalBudgetByCostCenter FROM departments d JOIN cost_centers c ON d.department_id = c.department_id JOIN budgets b ON d.department_id = b.department_id GROUP BY c.name;","tables_used_in_sql":[],"explain_result":"success","rows_returned":23,"total_latency_ms":2294}
{"timestamp":"2026-01-26T22:33:31.947Z","query_id":"bd6b153d-0aaf-45bd-abbf-330a92382c2d","question":"List all bank transactions for checking accounts","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["bank_transactions","bank_accounts","inventory_transactions","asset_transfers","chart_of_accounts","asset_maintenance","depreciation_entries","account_types","audit_log","stock_transfers","budget_lines","fixed_assets"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"bank_transactions","similarity":0.7350399428703827},{"table":"bank_accounts","similarity":0.6932776677012232},{"table":"inventory_transactions","similarity":0.6078035010000935},{"table":"chart_of_accounts","similarity":0.5811876200626925},{"table":"account_types","similarity":0.5785905328397332},{"table":"audit_log","similarity":0.569621521262353},{"table":"asset_maintenance","similarity":0.5638828022794103},{"table":"customers","similarity":0.5572972844982044},{"table":"asset_transfers","similarity":0.5539554159613063},{"table":"stock_transfers","similarity":0.551460445977451},{"table":"goods_receipts","similarity":0.5486447429224688},{"table":"depreciation_entries","similarity":0.5445529770493676},{"table":"budget_lines","similarity":0.5444716834560583},{"table":"fixed_assets","similarity":0.535349431568337},{"table":"transfer_lines","similarity":0.5333639682946071}],"column_hits_per_table":{"bank_transactions":9,"bank_accounts":8,"inventory_transactions":10,"stock_transfers":1,"sales_orders":2,"chart_of_accounts":4,"purchase_orders":2,"asset_maintenance":2,"asset_transfers":5,"goods_receipts":1,"account_types":1,"budget_lines":1,"depreciation_entries":2,"fixed_assets":1,"audit_log":1},"top_columns_per_table":{"bank_transactions":[{"column":"reconciled","similarity":0.7214308253186722},{"column":"bank_account_id","similarity":0.7206154536516838},{"column":"amount","similarity":0.7132008967283301}],"bank_accounts":[{"column":"current_balance","similarity":0.7031362764631},{"column":"is_active","similarity":0.6784075130389157},{"column":"bank_name","similarity":0.6687279104275711}],"inventory_transactions":[{"column":"quantity","similarity":0.6280865460424342},{"column":"transaction_type","similarity":0.6140788693009865},{"column":"reference_id","similarity":0.6053592325865079}],"stock_transfers":[{"column":"status","similarity":0.5900077529704967}],"sales_orders":[{"column":"total","similarity":0.5897775088044135},{"column":"subtotal","similarity":0.564411438896901}],"chart_of_accounts":[{"column":"description","similarity":0.585020757185758},{"column":"account_type_id","similarity":0.5662022088423913},{"column":"is_active","similarity":0.5658508512558068}],"purchase_orders":[{"column":"total","similarity":0.5846803876787667},{"column":"subtotal","similarity":0.5613649427051103}],"asset_maintenance":[{"column":"notes","similarity":0.5829361383714962},{"column":"performed_by","similarity":0.568531527134383}],"asset_transfers":[{"column":"asset_id","similarity":0.5811270971145388},{"column":"transferred_by","similarity":0.5796061605548147},{"column":"reason","similarity":0.5731753772052691}],"goods_receipts":[{"column":"notes","similarity":0.5764766744036599}],"account_types":[{"column":"normal_balance","similarity":0.5753213876874379}],"budget_lines":[{"column":"account_id","similarity":0.5744184195057266}],"depreciation_entries":[{"column":"accumulated_depreciation","similarity":0.5739569490557753},{"column":"asset_id","similarity":0.562590522271116}],"fixed_assets":[{"column":"po_id","similarity":0.5637990264442527}],"audit_log":[{"column":"changed_by","similarity":0.5624037180482369}]},"fused_scores":[{"table":"bank_transactions","fused":0.8722364751953645,"table_sim":0.7350399428703827,"col_score":1.0780312736828372},{"table":"bank_accounts","fused":0.8270402311555408,"table_sim":0.6932776677012232,"col_score":1.0276840763370172},{"table":"inventory_transactions","fused":0.7387324928772271,"table_sim":0.6078035010000935,"col_score":0.9351259806929275},{"table":"asset_transfers","fused":0.6788507892397635,"table_sim":0.5539554159613063,"col_score":0.8661938491574492},{"table":"chart_of_accounts","fused":0.6561473279998847,"table_sim":0.5811876200626925,"col_score":0.7685868899056729},{"table":"asset_maintenance","fused":0.6473533515934089,"table_sim":0.5638828022794103,"col_score":0.7725591755644067},{"table":"depreciation_entries","fused":0.6350772389698869,"table_sim":0.5445529770493676,"col_score":0.7708636318506659},{"table":"account_types","fused":0.577282874778815,"table_sim":0.5785905328397332,"col_score":0.5753213876874379},{"table":"audit_log","fused":0.5667343999767065,"table_sim":0.569621521262353,"col_score":0.5624037180482369},{"table":"stock_transfers","fused":0.49607843841820964,"table_sim":0.551460445977451,"col_score":0.4130054270793477},{"table":"goods_receipts","fused":0.49060031458650605,"table_sim":0.5486447429224688,"col_score":0.4035336720825619},{"table":"budget_lines","fused":0.4875201675352384,"table_sim":0.5444716834560583,"col_score":0.4020928936540086},{"table":"fixed_assets","fused":0.479073386345393,"table_sim":0.535349431568337,"col_score":0.3946593185109769},{"table":"sales_orders","fused":0.3487932913011456,"table_sim":0,"col_score":0.871983228252864},{"table":"purchase_orders","fused":0.34614514361252874,"table_sim":0,"col_score":0.8653628590313218}],"fk_expansion_candidates":15,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"asset_locations","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"transfer_lines","reason":"max_tables"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":24,"total_retrieval_latency_ms":29,"sql_generated":"SELECT bt.transaction_id, bt.transaction_date, bt.amount, bt.transaction_type, bt.reference, bt.description, bt.reconciled, bt.created_at FROM bank_transactions AS bt JOIN bank_accounts AS ba ON bt.bank_account_id = ba.bank_account_id WHERE ba.account_number LIKE 'CHK%' AND ba.is_active;","tables_used_in_sql":[],"explain_result":"success","rows_returned":0,"total_latency_ms":1517}
{"timestamp":"2026-01-26T22:33:33.464Z","query_id":"d9ce02be-c96a-4906-836a-6290178e316d","question":"How many customers do we have by region?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["customers","sales_regions","customer_contacts","countries","vendor_contacts","states_provinces","sales_territories","sales_orders","vendors","cities","employees","order_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_regions","similarity":0.6997471294676098},{"table":"sales_territories","similarity":0.6696766890051326},{"table":"customers","similarity":0.6479319379336471},{"table":"countries","similarity":0.6235105969769398},{"table":"customer_contacts","similarity":0.619996649411895},{"table":"states_provinces","similarity":0.6022599508236542},{"table":"sales_orders","similarity":0.5660816491801938},{"table":"cities","similarity":0.5595111664703014},{"table":"vendor_contacts","similarity":0.5564348501502726},{"table":"sales_opportunities","similarity":0.554482831043141},{"table":"purchase_orders","similarity":0.5530361207105073},{"table":"vendors","similarity":0.5516716334174269},{"table":"tax_rates","similarity":0.5489763742834645},{"table":"business_units","similarity":0.5484346112332508},{"table":"receipt_lines","similarity":0.5433665834663901}],"column_hits_per_table":{"customers":12,"sales_regions":4,"sales_territories":4,"customer_contacts":8,"countries":4,"employees":3,"vendor_contacts":2,"states_provinces":3,"vendors":1,"sales_orders":2,"receipt_lines":1,"purchase_orders":1,"order_lines":1,"cities":1,"sales_opportunities":1,"warehouse_locations":1,"tax_rates":1},"top_columns_per_table":{"customers":[{"column":"customer_number","similarity":0.6965149060314849},{"column":"phone","similarity":0.6865431896385247},{"column":"website","similarity":0.6457341825924602}],"sales_regions":[{"column":"target_revenue","similarity":0.6959805601691413},{"column":"name","similarity":0.6791398491399765},{"column":"region_id","similarity":0.6580896216335446}],"sales_territories":[{"column":"region_id","similarity":0.6595642151879438},{"column":"name","similarity":0.5749817193874632},{"column":"assigned_rep_id","similarity":0.570181208219976}],"customer_contacts":[{"column":"phone","similarity":0.6541231311280714},{"column":"email","similarity":0.633083898817527},{"column":"title","similarity":0.6172891060744045}],"countries":[{"column":"phone_code","similarity":0.6372925119855164},{"column":"name","similarity":0.6059536861262033},{"column":"iso_code","similarity":0.5954988713471328}],"employees":[{"column":"phone","similarity":0.6003385543952829},{"column":"employee_number","similarity":0.5836625505604774},{"column":"email","similarity":0.560946098566116}],"vendor_contacts":[{"column":"phone","similarity":0.5959324765580184},{"column":"email","similarity":0.5777335023099477}],"states_provinces":[{"column":"country_id","similarity":0.5939108987043535},{"column":"abbreviation","similarity":0.5855267489113103},{"column":"name","similarity":0.5728041179702279}],"vendors":[{"column":"phone","similarity":0.586032092965728}],"sales_orders":[{"column":"order_number","similarity":0.577729367915025},{"column":"customer_id","similarity":0.5745322680426952}],"receipt_lines":[{"column":"location_id","similarity":0.5727556858361972}],"purchase_orders":[{"column":"po_number","similarity":0.5707097892749454}],"order_lines":[{"column":"quantity_shipped","similarity":0.5704212239605938}],"cities":[{"column":"postal_code","similarity":0.5686035622387722}],"sales_opportunities":[{"column":"customer_id","similarity":0.5674580026147376}],"warehouse_locations":[{"column":"capacity","similarity":0.5663518185606718}],"tax_rates":[{"column":"country_id","similarity":0.5599141651930671}]},"fused_scores":[{"table":"customers","fused":0.8046737631004872,"table_sim":0.6479319379336471,"col_score":1.0397865008507472},{"table":"sales_regions","fused":0.7933200806278191,"table_sim":0.6997471294676098,"col_score":0.9336795073681331},{"table":"customer_contacts","fused":0.760264021861871,"table_sim":0.619996649411895,"col_score":0.9706650805368349},{"table":"countries","fused":0.748123137249797,"table_sim":0.6235105969769398,"col_score":0.9350419476590828},{"table":"vendor_contacts","fused":0.6877806011753604,"table_sim":0.5564348501502726,"col_score":0.8847992277129922},{"table":"states_provinces","fused":0.6787141958773262,"table_sim":0.6022599508236542,"col_score":0.793395563457834},{"table":"sales_territories","fused":0.6669814343699486,"table_sim":0.6696766890051326,"col_score":0.6629385524171727},{"table":"sales_orders","fused":0.6511752542001037,"table_sim":0.5660816491801938,"col_score":0.7788156617299684},{"table":"vendors","fused":0.5654158172367473,"table_sim":0.5516716334174269,"col_score":0.586032092965728},{"table":"cities","fused":0.5631481247776897,"table_sim":0.5595111664703014,"col_score":0.5686035622387722},{"table":"purchase_orders","fused":0.5601055881362826,"table_sim":0.5530361207105073,"col_score":0.5707097892749454},{"table":"sales_opportunities","fused":0.4915779393580111,"table_sim":0.554482831043141,"col_score":0.39722060183031627},{"table":"receipt_lines","fused":0.48639154211396923,"table_sim":0.5433665834663901,"col_score":0.400928980085338},{"table":"tax_rates","fused":0.48616179082413746,"table_sim":0.5489763742834645,"col_score":0.39193991563514696},{"table":"employees","fused":0.35686793187020865,"table_sim":0,"col_score":0.8921698296755216}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":8,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"product_suppliers","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_orders","reason":"max_tables"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"tax_rates","reason":"max_tables"},{"table":"vendor_invoices","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":37,"total_retrieval_latency_ms":42,"sql_generated":"SELECT sr.name AS sales_region, COUNT(DISTINCT c.customer_id) AS num_customers FROM customers c JOIN sales_orders so ON c.customer_id = so.customer_id JOIN sales_regions sr ON so.sales_rep_id = sr.employee_id GROUP BY sr.name;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column sr.employee_id does not exist","total_latency_ms":3002,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column sr.employee_id does not exist"}
{"timestamp":"2026-01-26T22:33:36.466Z","query_id":"61b9f790-b313-4abf-acb4-7cf3e89952b5","question":"Show all open sales orders","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_orders","purchase_orders","order_lines","sales_opportunities","sales_quotes","goods_receipts","vendor_invoices","product_suppliers","sales_regions","po_lines","receipt_lines","sales_territories"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.6970264711908751},{"table":"purchase_orders","similarity":0.6559527096809746},{"table":"order_lines","similarity":0.6296595044154469},{"table":"goods_receipts","similarity":0.5842457715966204},{"table":"vendor_invoices","similarity":0.5783065953840286},{"table":"po_lines","similarity":0.5620685086921631},{"table":"sales_opportunities","similarity":0.5619162577565138},{"table":"sales_quotes","similarity":0.556186835075904},{"table":"sales_territories","similarity":0.5491670354721004},{"table":"product_suppliers","similarity":0.5464768305083914},{"table":"vendors","similarity":0.5441045044222989},{"table":"vendor_invoice_lines","similarity":0.5414343849328535},{"table":"sales_regions","similarity":0.5367221154496525},{"table":"receipt_lines","similarity":0.5307800382022794},{"table":"reorder_rules","similarity":0.5292884170249752}],"column_hits_per_table":{"sales_orders":15,"purchase_orders":15,"sales_opportunities":2,"sales_quotes":3,"order_lines":6,"goods_receipts":2,"product_suppliers":1,"vendor_invoices":2,"po_lines":1,"sales_regions":1,"fixed_assets":1,"purchase_requisitions":1},"top_columns_per_table":{"sales_orders":[{"column":"status","similarity":0.730491552381523},{"column":"order_date","similarity":0.7218963870161988},{"column":"total","similarity":0.7070741573308901}],"purchase_orders":[{"column":"status","similarity":0.6802146621992243},{"column":"total","similarity":0.6653106962221466},{"column":"order_date","similarity":0.6585921415194497}],"sales_opportunities":[{"column":"expected_close_date","similarity":0.6381677257811708},{"column":"actual_close_date","similarity":0.6256103824971094}],"sales_quotes":[{"column":"status","similarity":0.6317404794734829},{"column":"valid_until","similarity":0.5867530520697652},{"column":"total","similarity":0.5712672866651851}],"order_lines":[{"column":"order_id","similarity":0.6275596311582896},{"column":"quantity_shipped","similarity":0.6117025369170342},{"column":"discount_percent","similarity":0.6003860389189138}],"goods_receipts":[{"column":"po_id","similarity":0.6078160696673574},{"column":"notes","similarity":0.5733260857538881}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.5897526996050519}],"vendor_invoices":[{"column":"po_id","similarity":0.587989307563123},{"column":"status","similarity":0.5879394718367492}],"po_lines":[{"column":"po_id","similarity":0.583083645418339}],"sales_regions":[{"column":"target_revenue","similarity":0.5792976204543986}],"fixed_assets":[{"column":"po_id","similarity":0.5788868818422293}],"purchase_requisitions":[{"column":"status","similarity":0.5767845129260555}]},"fused_scores":[{"table":"sales_orders","fused":0.8483892689871826,"table_sim":0.6970264711908751,"col_score":1.0754334656816438},{"table":"purchase_orders","fused":0.7914143326013334,"table_sim":0.6559527096809746,"col_score":0.9946067669818714},{"table":"order_lines","fused":0.7425539251998647,"table_sim":0.6296595044154469,"col_score":0.9118955563764912},{"table":"sales_opportunities","fused":0.7175389214657983,"table_sim":0.5619162577565138,"col_score":0.9509729170297254},{"table":"sales_quotes","fused":0.6826667792064856,"table_sim":0.556186835075904,"col_score":0.8723866954023578},{"table":"goods_receipts","fused":0.6010016144703767,"table_sim":0.5842457715966204,"col_score":0.626135378781011},{"table":"vendor_invoices","fused":0.5939324894052365,"table_sim":0.5783065953840286,"col_score":0.6173713304370483},{"table":"product_suppliers","fused":0.5637871781470556,"table_sim":0.5464768305083914,"col_score":0.5897526996050519},{"table":"sales_regions","fused":0.553752317451551,"table_sim":0.5367221154496525,"col_score":0.5792976204543986},{"table":"po_lines","fused":0.5005045259324328,"table_sim":0.5620685086921631,"col_score":0.4081585517928373},{"table":"sales_territories","fused":0.32950022128326023,"table_sim":0.5491670354721004,"col_score":0},{"table":"vendors","fused":0.3264627026533793,"table_sim":0.5441045044222989,"col_score":0},{"table":"vendor_invoice_lines","fused":0.32486063095971207,"table_sim":0.5414343849328535,"col_score":0},{"table":"receipt_lines","fused":0.3184680229213676,"table_sim":0.5307800382022794,"col_score":0},{"table":"reorder_rules","fused":0.3175730502149851,"table_sim":0.5292884170249752,"col_score":0}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendors","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":902,"total_retrieval_latency_ms":908,"sql_generated":"SELECT s.order_id AS order_id, s.order_number AS order_number, s.customer_id AS customer_id, s.quote_id AS quote_id, o.opportunity_id AS opportunity_id, s.sales_rep_id AS sales_rep_id, s.status AS status FROM sales_orders s JOIN sales_quotes q ON s.quote_id = q.quote_id JOIN sales_opportunities o ON q.opportunity_id = o WHERE s.status = 'open';","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42883","error_message":"operator does not exist: integer = sales_opportunities","total_latency_ms":5445,"failure_type":"llm_reasoning","failure_details":"SQL error 42883: Database error after 3 attempts: operator does not exist: integer = sales_opportunities"}
{"timestamp":"2026-01-26T22:33:41.912Z","query_id":"0d4fcb8c-5a74-4416-a45a-abee30862696","question":"List sales opportunities by stage","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_opportunities","opportunity_stages","sales_orders","sales_quotes","sales_regions","purchase_orders","positions","project_phases","sales_territories","inventory_levels","purchase_requisitions","vendor_invoices"],"tables_from_table_retrieval":15,"tables_from_column_only":1,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_opportunities","similarity":0.7488218367541872},{"table":"opportunity_stages","similarity":0.7387001071554995},{"table":"sales_quotes","similarity":0.5990326619152895},{"table":"sales_orders","similarity":0.5961242279773005},{"table":"sales_regions","similarity":0.5666844980264762},{"table":"sales_territories","similarity":0.5662501634497588},{"table":"inventory_levels","similarity":0.5551869237952217},{"table":"purchase_orders","similarity":0.5535068835745663},{"table":"positions","similarity":0.5527425817776501},{"table":"stock_transfers","similarity":0.5403776712417364},{"table":"vendor_invoices","similarity":0.5384186183163231},{"table":"project_phases","similarity":0.5349502276938867},{"table":"product_suppliers","similarity":0.5319343328865994},{"table":"vendors","similarity":0.5310044593640754},{"table":"purchase_requisitions","similarity":0.5308450936072595}],"column_hits_per_table":{"sales_opportunities":11,"opportunity_stages":6,"sales_quotes":6,"sales_orders":9,"sales_regions":2,"sales_territories":2,"stock_transfers":1,"purchase_orders":3,"project_phases":3,"purchase_requisitions":1,"positions":2,"inventory_levels":1,"vendor_invoices":1,"vendor_contacts":1,"vendors":1},"top_columns_per_table":{"sales_opportunities":[{"column":"stage_id","similarity":0.7812191839362287},{"column":"source","similarity":0.7285872612266221},{"column":"actual_close_date","similarity":0.721674868898495}],"opportunity_stages":[{"column":"sequence","similarity":0.7084223673691245},{"column":"probability","similarity":0.6966796537873633},{"column":"name","similarity":0.6959017792235883}],"sales_quotes":[{"column":"opportunity_id","similarity":0.6592506881899283},{"column":"status","similarity":0.6272860606170748},{"column":"quote_date","similarity":0.5947808826051652}],"sales_orders":[{"column":"status","similarity":0.6393336543997898},{"column":"subtotal","similarity":0.6234643626429246},{"column":"ship_date","similarity":0.6093255041152477}],"sales_regions":[{"column":"target_revenue","similarity":0.6271959229313243},{"column":"name","similarity":0.5921501632690844}],"sales_territories":[{"column":"name","similarity":0.6062311274372745},{"column":"territory_id","similarity":0.5668352489137205}],"stock_transfers":[{"column":"status","similarity":0.5831831362027144}],"purchase_orders":[{"column":"status","similarity":0.5794221220306016},{"column":"subtotal","similarity":0.5693073572807368},{"column":"expected_date","similarity":0.5640120100012569}],"project_phases":[{"column":"description","similarity":0.5772047772304357},{"column":"start_date","similarity":0.5742333317701723},{"column":"status","similarity":0.5659941562279918}],"purchase_requisitions":[{"column":"status","similarity":0.5738642959703262}],"positions":[{"column":"is_active","similarity":0.5700843315022887},{"column":"title","similarity":0.5687948654690558}],"inventory_levels":[{"column":"quantity_available","similarity":0.568422913474792}],"vendor_invoices":[{"column":"status","similarity":0.566094214430957}],"vendor_contacts":[{"column":"title","similarity":0.5633765235313364}],"vendors":[{"column":"website","similarity":0.5633018630658402}]},"fused_scores":[{"table":"sales_opportunities","fused":0.8850629803228602,"table_sim":0.7488218367541872,"col_score":1.0894246956758695},{"table":"opportunity_stages","fused":0.8659249419984221,"table_sim":0.7387001071554995,"col_score":1.056762194262806},{"table":"sales_orders","fused":0.7289253826665997,"table_sim":0.5961242279773005,"col_score":0.9281271147005484},{"table":"sales_quotes","fused":0.7147893764319808,"table_sim":0.5990326619152895,"col_score":0.888424448207018},{"table":"sales_regions","fused":0.6737900908460873,"table_sim":0.5666844980264762,"col_score":0.8344484800755039},{"table":"purchase_orders","fused":0.6726294750572859,"table_sim":0.5535068835745663,"col_score":0.8513133622813652},{"table":"positions","fused":0.6389753016645328,"table_sim":0.5527425817776501,"col_score":0.7683243814948568},{"table":"project_phases","fused":0.6314721381366619,"table_sim":0.5349502276938867,"col_score":0.7762550038008248},{"table":"sales_territories","fused":0.5888517486002129,"table_sim":0.5662501634497588,"col_score":0.6227541263258943},{"table":"inventory_levels","fused":0.5604813196670498,"table_sim":0.5551869237952217,"col_score":0.568422913474792},{"table":"vendors","fused":0.5439234208447813,"table_sim":0.5310044593640754,"col_score":0.5633018630658402},{"table":"stock_transfers","fused":0.48751788088180187,"table_sim":0.5403776712417364,"col_score":0.4082281953419001},{"table":"vendor_invoices","fused":0.48155755103046183,"table_sim":0.5384186183163231,"col_score":0.3962659501016699},{"table":"purchase_requisitions","fused":0.479189059036047,"table_sim":0.5308450936072595,"col_score":0.4017050071792283},{"table":"product_suppliers","fused":0.31916059973195965,"table_sim":0.5319343328865994,"col_score":0}],"fk_expansion_candidates":17,"fk_expansion_added":2,"fk_expansion_blocked_count":14,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"vendors","reason":"max_tables"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":20,"total_retrieval_latency_ms":26,"sql_generated":"SELECT s.name AS opportunity_name, os.stage, COUNT(*) AS count FROM sales_opportunities s JOIN opportunity_stages os ON s.stage_id = os.stage_id GROUP BY s.name, os.stage ORDER BY s.name;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column os.stage does not exist","total_latency_ms":2475,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column os.stage does not exist"}
{"timestamp":"2026-01-26T22:33:44.387Z","query_id":"7f6318a0-2ac7-4d0b-bb04-ef3ceb0285cf","question":"Show all pending purchase orders","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["purchase_orders","sales_orders","purchase_requisitions","order_lines","fixed_assets","vendor_invoices","po_lines","goods_receipts","stock_transfers","receipt_lines","requisition_lines","transfer_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"purchase_orders","similarity":0.6726275016898541},{"table":"sales_orders","similarity":0.6079554200458425},{"table":"order_lines","similarity":0.5894785937685689},{"table":"po_lines","similarity":0.5859895139432882},{"table":"purchase_requisitions","similarity":0.5798117387993795},{"table":"goods_receipts","similarity":0.5785694396960592},{"table":"vendor_invoices","similarity":0.5591792520527451},{"table":"receipt_lines","similarity":0.5176781696548273},{"table":"product_suppliers","similarity":0.5148349256330765},{"table":"requisition_lines","similarity":0.5144843611205253},{"table":"vendor_invoice_lines","similarity":0.5119286469569616},{"table":"stock_transfers","similarity":0.5102210218369493},{"table":"fixed_assets","similarity":0.5046316473274615},{"table":"transfer_lines","similarity":0.5042595776302109},{"table":"vendors","similarity":0.49945243614728074}],"column_hits_per_table":{"purchase_orders":15,"sales_orders":11,"purchase_requisitions":8,"fixed_assets":2,"stock_transfers":1,"goods_receipts":1,"po_lines":1,"sales_quotes":1,"vendor_invoices":2,"order_lines":4,"project_phases":1,"timesheets":1,"inventory_adjustments":1,"projects":1},"top_columns_per_table":{"purchase_orders":[{"column":"status","similarity":0.7812688532102515},{"column":"order_date","similarity":0.7223491091495468},{"column":"expected_date","similarity":0.72077869204253}],"sales_orders":[{"column":"status","similarity":0.7123433470051231},{"column":"order_date","similarity":0.6511246775174059},{"column":"ship_date","similarity":0.6421254918168265}],"purchase_requisitions":[{"column":"status","similarity":0.6929498649165783},{"column":"approved_date","similarity":0.6378132613295451},{"column":"notes","similarity":0.6333800326018751}],"fixed_assets":[{"column":"po_id","similarity":0.6267463912185721},{"column":"purchase_date","similarity":0.6136291847040686}],"stock_transfers":[{"column":"status","similarity":0.6236189393122314}],"goods_receipts":[{"column":"po_id","similarity":0.6234735112276755}],"po_lines":[{"column":"po_id","similarity":0.6215531759712258}],"sales_quotes":[{"column":"status","similarity":0.619400325767196}],"vendor_invoices":[{"column":"status","similarity":0.6184700740651621},{"column":"po_id","similarity":0.5990431928291781}],"order_lines":[{"column":"order_id","similarity":0.5920796291031895},{"column":"quantity_shipped","similarity":0.5854649407997706},{"column":"product_id","similarity":0.5765219173111574}],"project_phases":[{"column":"status","similarity":0.5801704321592616}],"timesheets":[{"column":"status","similarity":0.5751684140284343}],"inventory_adjustments":[{"column":"status","similarity":0.5703716055337085}],"projects":[{"column":"status","similarity":0.5687086192092645}]},"fused_scores":[{"table":"purchase_orders","fused":0.8366718830822372,"table_sim":0.6726275016898541,"col_score":1.0827384551708117},{"table":"sales_orders","fused":0.7536482213978333,"table_sim":0.6079554200458425,"col_score":0.9721874234258192},{"table":"purchase_requisitions","fused":0.7253510586080711,"table_sim":0.5798117387993795,"col_score":0.9436600383211085},{"table":"order_lines","fused":0.7015179959046066,"table_sim":0.5894785937685689,"col_score":0.8695770991086631},{"table":"fixed_assets","fused":0.6359751570487044,"table_sim":0.5046316473274615,"col_score":0.8329904216305688},{"table":"vendor_invoices","fused":0.5925452189659773,"table_sim":0.5591792520527451,"col_score":0.6425941693358257},{"table":"po_lines","fused":0.5256285976379161,"table_sim":0.5859895139432882,"col_score":0.43508722317985804},{"table":"goods_receipts","fused":0.5217142469613847,"table_sim":0.5785694396960592,"col_score":0.4364314578593728},{"table":"stock_transfers","fused":0.4807459161095944,"table_sim":0.5102210218369493,"col_score":0.436533257518562},{"table":"receipt_lines","fused":0.31060690179289635,"table_sim":0.5176781696548273,"col_score":0},{"table":"product_suppliers","fused":0.3089009553798459,"table_sim":0.5148349256330765,"col_score":0},{"table":"requisition_lines","fused":0.3086906166723152,"table_sim":0.5144843611205253,"col_score":0},{"table":"vendor_invoice_lines","fused":0.307157188174177,"table_sim":0.5119286469569616,"col_score":0},{"table":"transfer_lines","fused":0.3025557465781265,"table_sim":0.5042595776302109,"col_score":0},{"table":"vendors","fused":0.29967146168836845,"table_sim":0.49945243614728074,"col_score":0}],"fk_expansion_candidates":18,"fk_expansion_added":2,"fk_expansion_blocked_count":14,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendors","reason":"max_tables"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":21,"total_retrieval_latency_ms":26,"sql_generated":"SELECT po.po_id AS order_id, po.order_number, po.customer_id, po.quote_id, po.order_date, po.required_date, po.ship_date, po[Response]: 1\n    , po.shipping_cost, po.total, po.status, po.created_at FROM sales_orders AS po WHERE po.status = 'pending';","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42601","error_message":"syntax error at or near \":\"","total_latency_ms":3981,"failure_type":"llm_reasoning","failure_details":"SQL error 42601: Database error after 3 attempts: syntax error at or near \":\""}
{"timestamp":"2026-01-26T22:33:48.369Z","query_id":"f9a01fe6-8fe3-4e8a-a6cc-fe63779c8377","question":"List vendors with their contact information","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["vendor_contacts","vendors","vendor_invoices","vendor_invoice_lines","product_suppliers","customer_contacts","purchase_orders","emergency_contacts","sales_orders","customers","goods_receipts","purchase_requisitions"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"vendor_contacts","similarity":0.7699207641372863},{"table":"vendors","similarity":0.7275511956864886},{"table":"vendor_invoices","similarity":0.702588723674999},{"table":"product_suppliers","similarity":0.6735342566127633},{"table":"purchase_orders","similarity":0.6664071713206549},{"table":"vendor_invoice_lines","similarity":0.6415308328617355},{"table":"sales_orders","similarity":0.6142250984652092},{"table":"customers","similarity":0.6070076841742095},{"table":"goods_receipts","similarity":0.6053585520851397},{"table":"customer_contacts","similarity":0.6048150723191461},{"table":"emergency_contacts","similarity":0.6006290109678083},{"table":"purchase_requisitions","similarity":0.5837867980560181},{"table":"sales_regions","similarity":0.5783993778199142},{"table":"sales_opportunities","similarity":0.5753723400570517},{"table":"stock_transfers","similarity":0.568442355637247}],"column_hits_per_table":{"vendor_contacts":8,"vendors":12,"product_suppliers":3,"vendor_invoices":12,"purchase_orders":1,"fixed_assets":1,"vendor_invoice_lines":8,"asset_maintenance":1,"customer_contacts":3,"emergency_contacts":1},"top_columns_per_table":{"vendor_contacts":[{"column":"email","similarity":0.7784067548444297},{"column":"vendor_id","similarity":0.7679072513442577},{"column":"phone","similarity":0.7676781013396602}],"vendors":[{"column":"email","similarity":0.7632893779864717},{"column":"phone","similarity":0.7612847703214335},{"column":"vendor_number","similarity":0.7353539765595607}],"product_suppliers":[{"column":"vendor_id","similarity":0.7035027231913848},{"column":"product_id","similarity":0.6345385232693925},{"column":"vendor_sku","similarity":0.6275443637568583}],"vendor_invoices":[{"column":"vendor_id","similarity":0.691584679194062},{"column":"due_date","similarity":0.6850390052928865},{"column":"invoice_date","similarity":0.6795714431776986}],"purchase_orders":[{"column":"vendor_id","similarity":0.6904076294174107}],"fixed_assets":[{"column":"vendor_id","similarity":0.6640768726106403}],"vendor_invoice_lines":[{"column":"invoice_id","similarity":0.6495373298353041},{"column":"quantity","similarity":0.6435090195975931},{"column":"account_id","similarity":0.6425100310333399}],"asset_maintenance":[{"column":"vendor_id","similarity":0.6488151823395512}],"customer_contacts":[{"column":"email","similarity":0.6349920802618931},{"column":"customer_id","similarity":0.6277720608989554},{"column":"contact_id","similarity":0.6246315888297366}],"emergency_contacts":[{"column":"employee_id","similarity":0.6196442706207614}]},"fused_scores":[{"table":"vendor_contacts","fused":0.9268507806880757,"table_sim":0.7699207641372863,"col_score":1.1622458055142597},{"table":"vendors","fused":0.8941034226707685,"table_sim":0.7275511956864886,"col_score":1.1439317631471884},{"table":"vendor_invoices","fused":0.8314831249576937,"table_sim":0.702588723674999,"col_score":1.0248247268817359},{"table":"vendor_invoice_lines","fused":0.7695186444908553,"table_sim":0.6415308328617355,"col_score":0.9615003619345349},{"table":"product_suppliers","fused":0.7536286807171952,"table_sim":0.6735342566127633,"col_score":0.873770316873843},{"table":"customer_contacts","fused":0.7047739640220987,"table_sim":0.6048150723191461,"col_score":0.8547123015765276},{"table":"purchase_orders","fused":0.5931584390292679,"table_sim":0.6664071713206549,"col_score":0.4832853405921875},{"table":"emergency_contacts","fused":0.5338778023544981,"table_sim":0.6006290109678083,"col_score":0.433750989434533},{"table":"sales_orders","fused":0.36853505907912554,"table_sim":0.6142250984652092,"col_score":0},{"table":"customers","fused":0.3642046105045257,"table_sim":0.6070076841742095,"col_score":0},{"table":"goods_receipts","fused":0.3632151312510838,"table_sim":0.6053585520851397,"col_score":0},{"table":"purchase_requisitions","fused":0.35027207883361083,"table_sim":0.5837867980560181,"col_score":0},{"table":"sales_regions","fused":0.34703962669194854,"table_sim":0.5783993778199142,"col_score":0},{"table":"sales_opportunities","fused":0.345223404034231,"table_sim":0.5753723400570517,"col_score":0},{"table":"stock_transfers","fused":0.3410654133823482,"table_sim":0.568442355637247,"col_score":0}],"fk_expansion_candidates":14,"fk_expansion_added":2,"fk_expansion_blocked_count":11,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":41,"total_retrieval_latency_ms":47,"sql_generated":"SELECT v.vendor_id AS vendor_id, v.vendor_number AS vendor_number, v.name AS name, v.email AS email, v.phone AS phone, v.website AS website FROM vendors v;","tables_used_in_sql":[],"explain_result":"success","rows_returned":200,"total_latency_ms":910}
{"timestamp":"2026-01-26T22:33:49.279Z","query_id":"da49c026-e562-46f6-8da1-1d9cac338e05","question":"Show current inventory levels by warehouse","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["inventory_levels","warehouse_locations","inventory_transactions","inventory_adjustments","warehouses","stock_transfers","product_suppliers","goods_receipts","reorder_rules","adjustment_lines","purchase_orders","receipt_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_levels","similarity":0.8122701554169101},{"table":"warehouse_locations","similarity":0.7005446958361526},{"table":"inventory_adjustments","similarity":0.6969636312647738},{"table":"warehouses","similarity":0.6914813751135357},{"table":"inventory_transactions","similarity":0.6771788340132321},{"table":"stock_transfers","similarity":0.6499504306194971},{"table":"goods_receipts","similarity":0.6377887719498387},{"table":"adjustment_lines","similarity":0.6097130019684833},{"table":"reorder_rules","similarity":0.6037644045496187},{"table":"receipt_lines","similarity":0.5895839062260034},{"table":"asset_maintenance","similarity":0.58895150536011},{"table":"product_suppliers","similarity":0.5875120417320973},{"table":"purchase_orders","similarity":0.583350571792489},{"table":"fixed_assets","similarity":0.5783522370941722},{"table":"vendor_invoices","similarity":0.5760198387885328}],"column_hits_per_table":{"inventory_levels":8,"inventory_adjustments":8,"inventory_transactions":9,"warehouse_locations":7,"warehouses":6,"goods_receipts":1,"stock_transfers":2,"reorder_rules":1,"receipt_lines":1,"adjustment_lines":1,"vendor_invoice_lines":1,"product_suppliers":1,"asset_maintenance":1,"sales_orders":3},"top_columns_per_table":{"inventory_levels":[{"column":"warehouse_id","similarity":0.8087067250182546},{"column":"quantity_available","similarity":0.7708676560798907},{"column":"location_id","similarity":0.7625724502705881}],"inventory_adjustments":[{"column":"warehouse_id","similarity":0.7245615210797313},{"column":"status","similarity":0.6422947841665952},{"column":"adjusted_by","similarity":0.6314356057174179}],"inventory_transactions":[{"column":"warehouse_id","similarity":0.7109794213360597},{"column":"location_id","similarity":0.6833091875503385},{"column":"quantity","similarity":0.6820838480989065}],"warehouse_locations":[{"column":"capacity","similarity":0.7034845650513002},{"column":"warehouse_id","similarity":0.692642288557592},{"column":"aisle","similarity":0.6907962299029669}],"warehouses":[{"column":"is_active","similarity":0.7022103472024303},{"column":"code","similarity":0.7017218936009072},{"column":"warehouse_id","similarity":0.6953453125452076}],"goods_receipts":[{"column":"warehouse_id","similarity":0.6884052539582376}],"stock_transfers":[{"column":"to_warehouse_id","similarity":0.6823470536306719},{"column":"from_warehouse_id","similarity":0.6736660429085841}],"reorder_rules":[{"column":"warehouse_id","similarity":0.6401487308499733}],"receipt_lines":[{"column":"location_id","similarity":0.6301983345887696}],"adjustment_lines":[{"column":"location_id","similarity":0.6169700392267938}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.608614993961869}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6064091216201988}],"asset_maintenance":[{"column":"vendor_id","similarity":0.6045501910744662}],"sales_orders":[{"column":"status","similarity":0.5959424588810748},{"column":"total","similarity":0.5922343777517407},{"column":"order_number","similarity":0.5904853401646156}]},"fused_scores":[{"table":"inventory_levels","fused":0.945548064221666,"table_sim":0.8122701554169101,"col_score":1.1454649274288},{"table":"warehouse_locations","fused":0.8398798895028051,"table_sim":0.7005446958361526,"col_score":1.0488826800027837},{"table":"inventory_transactions","fused":0.8033817924490303,"table_sim":0.6771788340132321,"col_score":0.9926862301027277},{"table":"inventory_adjustments","fused":0.7956361449809894,"table_sim":0.6969636312647738,"col_score":0.943644915555313},{"table":"warehouses","fused":0.7938870311168246,"table_sim":0.6914813751135357,"col_score":0.9474955151217578},{"table":"stock_transfers","fused":0.6753406793954881,"table_sim":0.6499504306194971,"col_score":0.7134260525594747},{"table":"product_suppliers","fused":0.5950708736873379,"table_sim":0.5875120417320973,"col_score":0.6064091216201988},{"table":"goods_receipts","fused":0.5754267342782098,"table_sim":0.6377887719498387,"col_score":0.4818836777707663},{"table":"reorder_rules","fused":0.5415002873677637,"table_sim":0.6037644045496187,"col_score":0.44810411159498126},{"table":"adjustment_lines","fused":0.5385794121645923,"table_sim":0.6097130019684833,"col_score":0.43187902745875567},{"table":"receipt_lines","fused":0.5302058774204575,"table_sim":0.5895839062260034,"col_score":0.4411388342121387},{"table":"asset_maintenance","fused":0.5226449567169165,"table_sim":0.58895150536011,"col_score":0.4231851337521263},{"table":"sales_orders","fused":0.35499081913361946,"table_sim":0,"col_score":0.8874770478340486},{"table":"purchase_orders","fused":0.35001034307549334,"table_sim":0.583350571792489,"col_score":0},{"table":"fixed_assets","fused":0.34701134225650326,"table_sim":0.5783522370941722,"col_score":0}],"fk_expansion_candidates":7,"fk_expansion_added":2,"fk_expansion_blocked_count":5,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":50,"total_retrieval_latency_ms":55,"sql_generated":"SELECT w.warehouse_id, wl.location_id, il.quantity_on_hand AS quantity_available FROM inventory_levels il JOIN warehouses w ON il.warehouse_id = w.warehouse_id JOIN warehouse_locations wl ON il.location_id = wl.location_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":1000,"total_latency_ms":1264}
{"timestamp":"2026-01-26T22:33:50.543Z","query_id":"1e9f3e06-8b13-45f2-8d7a-a6876c90eab4","question":"List products below reorder point","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["reorder_rules","order_lines","products","purchase_orders","product_suppliers","sales_orders","purchase_requisitions","po_lines","requisition_lines","inventory_levels","adjustment_lines","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":1,"tables_from_fk_expansion":2,"table_scores":[{"table":"reorder_rules","similarity":0.6891300096060532},{"table":"order_lines","similarity":0.6495736364233624},{"table":"purchase_orders","similarity":0.6171064449824001},{"table":"products","similarity":0.6099812510447741},{"table":"product_suppliers","similarity":0.6023078206466751},{"table":"requisition_lines","similarity":0.5997722685332619},{"table":"po_lines","similarity":0.5932294179504943},{"table":"sales_orders","similarity":0.5931481383626416},{"table":"inventory_levels","similarity":0.5881321655091816},{"table":"receipt_lines","similarity":0.5736389422685968},{"table":"purchase_requisitions","similarity":0.5730846669682242},{"table":"goods_receipts","similarity":0.5716811266856189},{"table":"product_categories","similarity":0.5701141523028324},{"table":"adjustment_lines","similarity":0.5629948997097548},{"table":"vendor_invoices","similarity":0.5531906674668465}],"column_hits_per_table":{"reorder_rules":7,"order_lines":8,"purchase_orders":8,"po_lines":2,"requisition_lines":1,"products":7,"sales_orders":5,"purchase_requisitions":5,"product_suppliers":3,"receipt_lines":1,"warehouse_locations":1,"product_categories":1,"inventory_levels":1},"top_columns_per_table":{"reorder_rules":[{"column":"product_id","similarity":0.7030062549510593},{"column":"reorder_quantity","similarity":0.6755903208496081},{"column":"is_active","similarity":0.655874841708844}],"order_lines":[{"column":"product_id","similarity":0.6692556284972292},{"column":"quantity_shipped","similarity":0.6314775915147526},{"column":"quantity","similarity":0.6164835549409056}],"purchase_orders":[{"column":"status","similarity":0.6414360250871004},{"column":"order_date","similarity":0.6265350567690635},{"column":"expected_date","similarity":0.6238142284779228}],"po_lines":[{"column":"product_id","similarity":0.6405617046841838},{"column":"quantity_received","similarity":0.5924492991984552}],"requisition_lines":[{"column":"product_id","similarity":0.6391887620592966}],"products":[{"column":"list_price","similarity":0.6384206201936673},{"column":"weight","similarity":0.6263161927979818},{"column":"sku","similarity":0.6248765105620059}],"sales_orders":[{"column":"status","similarity":0.6306896911203655},{"column":"order_date","similarity":0.6220998329158779},{"column":"order_number","similarity":0.6205244288605009}],"purchase_requisitions":[{"column":"status","similarity":0.6203550112389075},{"column":"notes","similarity":0.6134706129740787},{"column":"requisition_number","similarity":0.598825829410005}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6180085004942412},{"column":"is_preferred","similarity":0.602779021818133},{"column":"vendor_sku","similarity":0.6006400538113781}],"receipt_lines":[{"column":"product_id","similarity":0.6012079855563756}],"warehouse_locations":[{"column":"aisle","similarity":0.5994754881015156}],"product_categories":[{"column":"name","similarity":0.5994252978085345}],"inventory_levels":[{"column":"product_id","similarity":0.5930402090331849}]},"fused_scores":[{"table":"reorder_rules","fused":0.8148078360080986,"table_sim":0.6891300096060532,"col_score":1.0033245756111666},{"table":"order_lines","fused":0.7656319294480995,"table_sim":0.6495736364233624,"col_score":0.9397193689852054},{"table":"products","fused":0.7466202372639277,"table_sim":0.6099812510447741,"col_score":0.9515787165926581},{"table":"purchase_orders","fused":0.74564073539265,"table_sim":0.6171064449824001,"col_score":0.9384421710080249},{"table":"product_suppliers","fused":0.7291438969493281,"table_sim":0.6023078206466751,"col_score":0.9193980114033077},{"table":"sales_orders","fused":0.7288337019560363,"table_sim":0.5931481383626416,"col_score":0.9323620473461283},{"table":"purchase_requisitions","fused":0.7030703659338328,"table_sim":0.5730846669682242,"col_score":0.8980489143822454},{"table":"po_lines","fused":0.6825960091054645,"table_sim":0.5932294179504943,"col_score":0.8166458958379196},{"table":"requisition_lines","fused":0.5388362144965602,"table_sim":0.5997722685332619,"col_score":0.4474321334415076},{"table":"inventory_levels","fused":0.5189305578348007,"table_sim":0.5881321655091816,"col_score":0.4151281463232294},{"table":"receipt_lines","fused":0.5125216013169432,"table_sim":0.5736389422685968,"col_score":0.42084558988946286},{"table":"product_categories","fused":0.509907574768089,"table_sim":0.5701141523028324,"col_score":0.4195977084659741},{"table":"goods_receipts","fused":0.3430086760113713,"table_sim":0.5716811266856189,"col_score":0},{"table":"adjustment_lines","fused":0.33779693982585285,"table_sim":0.5629948997097548,"col_score":0},{"table":"vendor_invoices","fused":0.3319144004801079,"table_sim":0.5531906674668465,"col_score":0}],"fk_expansion_candidates":19,"fk_expansion_added":2,"fk_expansion_blocked_count":13,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"product_categories","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendor_invoices","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":30,"total_retrieval_latency_ms":35,"sql_generated":"SELECT p.product_id, p.name FROM products p JOIN inventory_levels il ON p.product_id = il.product_id JOIN adjustment_lines al ON p.product_id = al.product_id JOIN product_suppliers ps ON p.product_id = ps.product_id JOIN reorder_rules rr ON p.product_id = rr.product_id WHERE il.quantity_available < rr.min_quantity;","tables_used_in_sql":[],"explain_result":"success","rows_returned":0,"total_latency_ms":1544}
{"timestamp":"2026-01-26T22:33:52.088Z","query_id":"d8cfa061-531a-490f-8bbb-ab3c9c4acd14","question":"Show all active projects with their budgets","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["project_budgets","project_expenses","projects","budgets","project_milestones","project_resources","project_tasks","budget_lines","project_phases","cost_centers","departments","fiscal_periods"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_budgets","similarity":0.7320823439513227},{"table":"project_expenses","similarity":0.6598715374153977},{"table":"budgets","similarity":0.6252283388997992},{"table":"project_milestones","similarity":0.6127876529039639},{"table":"project_resources","similarity":0.6051262496114734},{"table":"cost_centers","similarity":0.5961858155894687},{"table":"projects","similarity":0.5903180372174496},{"table":"budget_lines","similarity":0.5822368575743743},{"table":"project_tasks","similarity":0.5816816207299483},{"table":"fiscal_years","similarity":0.5654846986667442},{"table":"project_phases","similarity":0.5638302756145323},{"table":"fiscal_periods","similarity":0.5387383773781637},{"table":"depreciation_schedules","similarity":0.5368290303277935},{"table":"product_categories","similarity":0.5325548414882022},{"table":"positions","similarity":0.5310522578501183}],"column_hits_per_table":{"projects":9,"project_budgets":6,"budgets":8,"project_expenses":10,"departments":1,"cost_centers":1,"project_tasks":3,"project_milestones":3,"project_resources":3,"budget_lines":2,"project_phases":2,"products":1,"product_categories":1},"top_columns_per_table":{"projects":[{"column":"budget","similarity":0.7455956166400012},{"column":"status","similarity":0.6717292600704149},{"column":"project_number","similarity":0.6403210276190118}],"project_budgets":[{"column":"category","similarity":0.732676588046277},{"column":"actual_amount","similarity":0.7272059205267601},{"column":"notes","similarity":0.7206934066256374}],"budgets":[{"column":"status","similarity":0.7196367211941822},{"column":"total_amount","similarity":0.683849665567237},{"column":"approved_by","similarity":0.6555542518734748}],"project_expenses":[{"column":"status","similarity":0.7002120705419038},{"column":"category","similarity":0.6802281342306288},{"column":"is_billable","similarity":0.6681203927219221}],"departments":[{"column":"budget","similarity":0.6588459117462755}],"cost_centers":[{"column":"is_active","similarity":0.6567248775975596}],"project_tasks":[{"column":"status","similarity":0.6353002504917631},{"column":"actual_hours","similarity":0.6217700476487774},{"column":"estimated_hours","similarity":0.6063593542490929}],"project_milestones":[{"column":"amount","similarity":0.630592692947858},{"column":"is_billable","similarity":0.6236843558003595},{"column":"project_id","similarity":0.6038660669596277}],"project_resources":[{"column":"allocation_percent","similarity":0.6270675132854936},{"column":"hourly_rate","similarity":0.6065222419436299},{"column":"project_id","similarity":0.6028165225663205}],"budget_lines":[{"column":"budget_id","similarity":0.6222147218577904},{"column":"amount","similarity":0.6131679213132466}],"project_phases":[{"column":"status","similarity":0.6189866862590713},{"column":"project_id","similarity":0.6005221574032521}],"products":[{"column":"is_active","similarity":0.6123381516080405}],"product_categories":[{"column":"is_active","similarity":0.6098026157798132}]},"fused_scores":[{"table":"project_budgets","fused":0.8777612256946564,"table_sim":0.7320823439513227,"col_score":1.096279548309657},{"table":"project_expenses","fused":0.8016382546858745,"table_sim":0.6598715374153977,"col_score":1.0142883305915897},{"table":"projects","fused":0.7804932745102726,"table_sim":0.5903180372174496,"col_score":1.0657561304495071},{"table":"budgets","fused":0.7797877199414693,"table_sim":0.6252283388997992,"col_score":1.0116267915039745},{"table":"project_milestones","fused":0.7446465400815935,"table_sim":0.6127876529039639,"col_score":0.9424348708480378},{"table":"project_resources","fused":0.7352072034698075,"table_sim":0.6051262496114734,"col_score":0.9303286342573085},{"table":"project_tasks","fused":0.7189888623472985,"table_sim":0.5816816207299483,"col_score":0.9249497247733238},{"table":"budget_lines","fused":0.6817193441300138,"table_sim":0.5822368575743743,"col_score":0.8309430739634732},{"table":"project_phases","fused":0.5956875395577146,"table_sim":0.5638302756145323,"col_score":0.6434734354724881},{"table":"cost_centers","fused":0.5415944550809979,"table_sim":0.5961858155894687,"col_score":0.4597074143182917},{"table":"product_categories","fused":0.490277637311269,"table_sim":0.5325548414882022,"col_score":0.4268618310458692},{"table":"fiscal_years","fused":0.3392908192000465,"table_sim":0.5654846986667442,"col_score":0},{"table":"fiscal_periods","fused":0.3232430264268982,"table_sim":0.5387383773781637,"col_score":0},{"table":"depreciation_schedules","fused":0.3220974181966761,"table_sim":0.5368290303277935,"col_score":0},{"table":"positions","fused":0.318631354710071,"table_sim":0.5310522578501183,"col_score":0}],"fk_expansion_candidates":9,"fk_expansion_added":2,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"max_tables"},{"table":"journal_lines","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":37,"total_retrieval_latency_ms":43,"sql_generated":"SELECT p.project_id AS project_id, p.name AS project_name, b.total_amount AS budget_amount FROM projects p INNER JOIN departments d ON p.department_id = d.department_id AND d.is_active = TRUE INNER JOIN budgets b ON p.budget_id = b.budget_id WHERE p.status = 'Active' AND p.is_billable = FALSE;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column p.department_id does not exist","total_latency_ms":3884,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column p.department_id does not exist"}
{"timestamp":"2026-01-26T22:33:55.973Z","query_id":"811e75bb-e245-4925-a25f-ed9eff7ca5b9","question":"List project tasks and their assignments","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["task_assignments","project_tasks","projects","project_budgets","project_resources","project_milestones","project_expenses","project_phases","timesheet_entries","positions","timesheets"],"tables_from_table_retrieval":15,"tables_from_column_only":0,"tables_from_fk_expansion":1,"table_scores":[{"table":"task_assignments","similarity":0.794811758868832},{"table":"project_tasks","similarity":0.7479363814207686},{"table":"project_budgets","similarity":0.6753012194006066},{"table":"projects","similarity":0.6706703496538925},{"table":"project_resources","similarity":0.670662875673676},{"table":"project_milestones","similarity":0.6574088205357302},{"table":"project_expenses","similarity":0.6421144412639581},{"table":"project_phases","similarity":0.637586979207752},{"table":"timesheet_entries","similarity":0.6021634473434545},{"table":"positions","similarity":0.5440131395270893},{"table":"asset_transfers","similarity":0.5433653291138221},{"table":"asset_maintenance","similarity":0.5410659522528909},{"table":"document_attachments","similarity":0.538264152501339},{"table":"budgets","similarity":0.5380849860873653},{"table":"timesheets","similarity":0.5372314972303646}],"column_hits_per_table":{"task_assignments":6,"project_tasks":11,"projects":12,"timesheet_entries":1,"project_budgets":5,"project_expenses":3,"project_milestones":5,"project_phases":4,"project_resources":3},"top_columns_per_table":{"task_assignments":[{"column":"task_id","similarity":0.794432609013778},{"column":"assigned_date","similarity":0.7458785300757574},{"column":"role","similarity":0.7325674032802315}],"project_tasks":[{"column":"description","similarity":0.781919950769442},{"column":"actual_hours","similarity":0.7690443873719177},{"column":"status","similarity":0.7581716220481812}],"projects":[{"column":"priority","similarity":0.7183283168933002},{"column":"status","similarity":0.7015408184158168},{"column":"project_number","similarity":0.6970978559251599}],"timesheet_entries":[{"column":"task_id","similarity":0.6759257202121561}],"project_budgets":[{"column":"project_id","similarity":0.6730768816270133},{"column":"notes","similarity":0.6712745296242655},{"column":"planned_amount","similarity":0.6546656746087739}],"project_expenses":[{"column":"status","similarity":0.6653133367945684},{"column":"project_id","similarity":0.6638223602076747},{"column":"category","similarity":0.6546371883429939}],"project_milestones":[{"column":"project_id","similarity":0.6596828164394077},{"column":"description","similarity":0.659131012760805},{"column":"completed_date","similarity":0.6567433178113954}],"project_phases":[{"column":"project_id","similarity":0.6594348785796363},{"column":"status","similarity":0.6589869600993276},{"column":"sequence","similarity":0.6568897027897936}],"project_resources":[{"column":"project_id","similarity":0.6552391250832739},{"column":"allocation_percent","similarity":0.6532044084318167},{"column":"role","similarity":0.6526354194808693}]},"fused_scores":[{"table":"task_assignments","fused":0.9217519480076486,"table_sim":0.794811758868832,"col_score":1.1121622317158733},{"table":"project_tasks","fused":0.9070191950947581,"table_sim":0.7479363814207686,"col_score":1.1456434156057425},{"table":"projects","fused":0.8291531077346876,"table_sim":0.6706703496538925,"col_score":1.0668772448558803},{"table":"project_budgets","fused":0.797474871214878,"table_sim":0.6753012194006066,"col_score":0.980735348936285},{"table":"project_resources","fused":0.7942065726731061,"table_sim":0.670662875673676,"col_score":0.9795221181722513},{"table":"project_milestones","fused":0.7879074132453845,"table_sim":0.6574088205357302,"col_score":0.9836553023098658},{"table":"project_expenses","fused":0.740267407246812,"table_sim":0.6421144412639581,"col_score":0.8874968562210928},{"table":"project_phases","fused":0.7376289516417178,"table_sim":0.637586979207752,"col_score":0.8876919102926664},{"table":"timesheet_entries","fused":0.5505572700654764,"table_sim":0.6021634473434545,"col_score":0.47314800414850927},{"table":"positions","fused":0.32640788371625357,"table_sim":0.5440131395270893,"col_score":0},{"table":"asset_transfers","fused":0.3260191974682932,"table_sim":0.5433653291138221,"col_score":0},{"table":"asset_maintenance","fused":0.32463957135173455,"table_sim":0.5410659522528909,"col_score":0},{"table":"document_attachments","fused":0.32295849150080336,"table_sim":0.538264152501339,"col_score":0},{"table":"budgets","fused":0.3228509916524192,"table_sim":0.5380849860873653,"col_score":0},{"table":"timesheets","fused":0.3223388983382187,"table_sim":0.5372314972303646,"col_score":0}],"fk_expansion_candidates":4,"fk_expansion_added":1,"fk_expansion_blocked_count":3,"fk_expansion_blocked":[{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":35,"total_retrieval_latency_ms":41,"sql_generated":"SELECT p.name AS project_name, t.name AS task_name, ta.employee_id AS assigned_to, t.estimated_hours AS estimated_hours, t.actual_hours AS actual_hours, t.priority AS priority FROM projects p JOIN project_tasks t ON p.project_id = t.project_id JOIN task_assignments ta ON t.task_id = ta.task_id WHERE p.project_number = '12345' AND t.status = 'In Progress';","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column t.project_id does not exist","total_latency_ms":4075,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column t.project_id does not exist"}
{"timestamp":"2026-01-26T22:34:00.048Z","query_id":"0fa3424e-cf94-4706-9834-68cb30c2485b","question":"Show employees who approved purchase orders over $10000","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["purchase_orders","purchase_requisitions","sales_orders","order_lines","vendor_invoice_lines","goods_receipts","vendor_invoices","employee_salaries","project_expenses","product_suppliers","po_lines","requisition_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":2,"table_scores":[{"table":"purchase_orders","similarity":0.6797725643003449},{"table":"purchase_requisitions","similarity":0.6297089396793315},{"table":"sales_orders","similarity":0.6136645609497355},{"table":"order_lines","similarity":0.5917678060525449},{"table":"employee_salaries","similarity":0.5841426531615431},{"table":"po_lines","similarity":0.57677560819743},{"table":"goods_receipts","similarity":0.5759375335272986},{"table":"vendor_invoices","similarity":0.5711282087223335},{"table":"vendor_invoice_lines","similarity":0.5684952595365412},{"table":"performance_reviews","similarity":0.5664223683138354},{"table":"product_suppliers","similarity":0.5576381986691553},{"table":"employee_certifications","similarity":0.5526156525787472},{"table":"project_expenses","similarity":0.5456952342152768},{"table":"requisition_lines","similarity":0.5439054599186619},{"table":"sales_quotes","similarity":0.5407908629511505}],"column_hits_per_table":{"purchase_orders":15,"purchase_requisitions":5,"sales_orders":8,"budgets":1,"project_expenses":1,"employee_salaries":1,"inventory_adjustments":1,"timesheets":1,"leave_requests":1,"vendor_invoices":3,"order_lines":4,"goods_receipts":2,"product_suppliers":1,"fixed_assets":1,"sales_territories":1,"performance_reviews":1,"vendor_invoice_lines":2,"po_lines":1},"top_columns_per_table":{"purchase_orders":[{"column":"approved_by","similarity":0.7524044355926115},{"column":"total","similarity":0.6891210511456356},{"column":"buyer_id","similarity":0.6838141777283322}],"purchase_requisitions":[{"column":"approved_by","similarity":0.6921271112571127},{"column":"requested_by","similarity":0.6210599258161047},{"column":"approved_date","similarity":0.6167763167073651}],"sales_orders":[{"column":"total","similarity":0.6422509159334961},{"column":"sales_rep_id","similarity":0.6341654678457911},{"column":"shipping_cost","similarity":0.6252194727693764}],"budgets":[{"column":"approved_by","similarity":0.637053073474786}],"project_expenses":[{"column":"approved_by","similarity":0.6347994448589064}],"employee_salaries":[{"column":"approved_by","similarity":0.6347373256882605}],"inventory_adjustments":[{"column":"approved_by","similarity":0.6313886636474608}],"timesheets":[{"column":"approved_by","similarity":0.6248545860756274}],"leave_requests":[{"column":"approved_by","similarity":0.6033698940179187}],"vendor_invoices":[{"column":"po_id","similarity":0.6015032759771921},{"column":"total","similarity":0.5961912554265089},{"column":"amount_paid","similarity":0.5768583686324344}],"order_lines":[{"column":"discount_percent","similarity":0.5991904281808885},{"column":"quantity_shipped","similarity":0.5973432133053823},{"column":"line_total","similarity":0.5968477146694883}],"goods_receipts":[{"column":"po_id","similarity":0.5953554679245545},{"column":"received_by","similarity":0.5920617006823624}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.5917538024535053}],"fixed_assets":[{"column":"po_id","similarity":0.5855439077223433}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5834248145489547}],"performance_reviews":[{"column":"employee_id","similarity":0.5786183434580838}],"vendor_invoice_lines":[{"column":"unit_cost","similarity":0.5782351286776587},{"column":"amount","similarity":0.5753975440025115}],"po_lines":[{"column":"po_id","similarity":0.5766724813661239}]},"fused_scores":[{"table":"purchase_orders","fused":0.8466495230463786,"table_sim":0.6797725643003449,"col_score":1.0969649611654293},{"table":"purchase_requisitions","fused":0.7788881934736649,"table_sim":0.6297089396793315,"col_score":1.002657074165165},{"table":"sales_orders","fused":0.7501429974971151,"table_sim":0.6136645609497355,"col_score":0.9548606523181844},{"table":"order_lines","fused":0.7142054975649588,"table_sim":0.5917678060525449,"col_score":0.8978620348335797},{"table":"vendor_invoice_lines","fused":0.6874707159934905,"table_sim":0.5684952595365412,"col_score":0.8659339006789144},{"table":"goods_receipts","fused":0.6657369658987617,"table_sim":0.5759375335272986,"col_score":0.8004361144559564},{"table":"vendor_invoices","fused":0.6653638860408106,"table_sim":0.5711282087223335,"col_score":0.8067174020185262},{"table":"employee_salaries","fused":0.60438052217223,"table_sim":0.5841426531615431,"col_score":0.6347373256882605},{"table":"project_expenses","fused":0.5813369184727286,"table_sim":0.5456952342152768,"col_score":0.6347994448589064},{"table":"product_suppliers","fused":0.5712844401828954,"table_sim":0.5576381986691553,"col_score":0.5917538024535053},{"table":"po_lines","fused":0.5075336597009728,"table_sim":0.57677560819743,"col_score":0.40367073695628675},{"table":"performance_reviews","fused":0.5018665571565647,"table_sim":0.5664223683138354,"col_score":0.4050328404206587},{"table":"employee_certifications","fused":0.33156939154724835,"table_sim":0.5526156525787472,"col_score":0},{"table":"requisition_lines","fused":0.3263432759511971,"table_sim":0.5439054599186619,"col_score":0},{"table":"sales_quotes","fused":0.3244745177706903,"table_sim":0.5407908629511505,"col_score":0}],"fk_expansion_candidates":14,"fk_expansion_added":2,"fk_expansion_blocked_count":11,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":1128,"total_retrieval_latency_ms":1134,"sql_generated":"SELECT DISTINCT e.employee_id, e.name FROM employees e JOIN purchase_orders p ON e.employee_id = p.approved_by WHERE p.total > 10000;","tables_used_in_sql":[],"total_latency_ms":3279,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-26T22:34:03.327Z","query_id":"38d09124-8b7a-42dc-b995-1902923aadac","question":"List customers with their sales orders and payment status","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_orders","purchase_orders","customers","vendor_invoices","order_lines","sales_quotes","goods_receipts","purchase_requisitions","vendors","sales_opportunities","vendor_contacts","customer_contacts"],"tables_from_table_retrieval":15,"tables_from_column_only":0,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.7641602397101095},{"table":"purchase_orders","similarity":0.7365617797005046},{"table":"vendor_invoices","similarity":0.6937572568284461},{"table":"customers","similarity":0.6854049718022314},{"table":"order_lines","similarity":0.6825633799075381},{"table":"goods_receipts","similarity":0.6673255035794428},{"table":"vendors","similarity":0.6583202785382029},{"table":"vendor_invoice_lines","similarity":0.654551057432151},{"table":"sales_quotes","similarity":0.6498316991254931},{"table":"purchase_requisitions","similarity":0.6475808157274204},{"table":"product_suppliers","similarity":0.6452584323836371},{"table":"po_lines","similarity":0.6261517951334078},{"table":"vendor_contacts","similarity":0.6221252947724678},{"table":"sales_opportunities","similarity":0.6220230295574533},{"table":"customer_contacts","similarity":0.6200737099781095}],"column_hits_per_table":{"sales_orders":15,"purchase_orders":15,"customers":5,"vendor_invoices":5,"sales_quotes":2,"purchase_requisitions":2,"vendors":1,"order_lines":2,"goods_receipts":2,"sales_opportunities":1},"top_columns_per_table":{"sales_orders":[{"column":"status","similarity":0.7895702849430285},{"column":"total","similarity":0.7370993657996305},{"column":"subtotal","similarity":0.7332482332528857}],"purchase_orders":[{"column":"status","similarity":0.7575682634891336},{"column":"total","similarity":0.709397358678029},{"column":"subtotal","similarity":0.7074901982326053}],"customers":[{"column":"payment_terms","similarity":0.7217870278211255},{"column":"is_active","similarity":0.6701801053929627},{"column":"website","similarity":0.6649101738882435}],"vendor_invoices":[{"column":"status","similarity":0.7151506406622694},{"column":"subtotal","similarity":0.6672743128056666},{"column":"po_id","similarity":0.6659654627529409}],"sales_quotes":[{"column":"status","similarity":0.7137688830170639},{"column":"customer_id","similarity":0.6634095014982454}],"purchase_requisitions":[{"column":"status","similarity":0.6931941605210901},{"column":"notes","similarity":0.6532300662975343}],"vendors":[{"column":"payment_terms","similarity":0.6827745956981239}],"order_lines":[{"column":"quantity_shipped","similarity":0.6717360420286046},{"column":"order_id","similarity":0.6545155889148146}],"goods_receipts":[{"column":"po_id","similarity":0.666682423647452},{"column":"notes","similarity":0.6476375693784853}],"sales_opportunities":[{"column":"customer_id","similarity":0.6519193284524821}]},"fused_scores":[{"table":"sales_orders","fused":0.8999855367964951,"table_sim":0.7641602397101095,"col_score":1.1037234824260733},{"table":"purchase_orders","fused":0.8671940509380354,"table_sim":0.7365617797005046,"col_score":1.0631424577943316},{"table":"customers","fused":0.8329398289874377,"table_sim":0.6854049718022314,"col_score":1.0542421147652472},{"table":"vendor_invoices","fused":0.8146921822450973,"table_sim":0.6937572568284461,"col_score":0.9960945703700741},{"table":"order_lines","fused":0.7698646272040388,"table_sim":0.6825633799075381,"col_score":0.9008164981487897},{"table":"sales_quotes","fused":0.6826316369298281,"table_sim":0.6498316991254931,"col_score":0.7318315436363305},{"table":"goods_receipts","fused":0.6777356404819401,"table_sim":0.6673255035794428,"col_score":0.6933508458356862},{"table":"purchase_requisitions","fused":0.6740950636640122,"table_sim":0.6475808157274204,"col_score":0.7138664355689},{"table":"vendors","fused":0.6681020054021712,"table_sim":0.6583202785382029,"col_score":0.6827745956981239},{"table":"sales_opportunities","fused":0.5557512297011669,"table_sim":0.6220230295574533,"col_score":0.45634352991673743},{"table":"vendor_invoice_lines","fused":0.39273063445929063,"table_sim":0.654551057432151,"col_score":0},{"table":"product_suppliers","fused":0.38715505943018225,"table_sim":0.6452584323836371,"col_score":0},{"table":"po_lines","fused":0.3756910770800447,"table_sim":0.6261517951334078,"col_score":0},{"table":"vendor_contacts","fused":0.37327517686348066,"table_sim":0.6221252947724678,"col_score":0},{"table":"customer_contacts","fused":0.3720442259868657,"table_sim":0.6200737099781095,"col_score":0}],"fk_expansion_candidates":18,"fk_expansion_added":2,"fk_expansion_blocked_count":13,"fk_expansion_blocked":[{"table":"employees","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"product_suppliers","reason":"max_tables"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"po_lines","reason":"max_tables"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":20,"total_retrieval_latency_ms":26,"sql_generated":"SELECT c.customer_id, c.name AS customer_name, s.order_id, o.status AS order_status FROM customers c JOIN sales_orders s ON c.customer_id = s.customer_id WHERE EXISTS (SELECT 1 FROM sales_orders so WHERE so.customer_id = c.customer_id AND so.status = 'Paid');","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42P01","error_message":"missing FROM-clause entry for table \"o\"","total_latency_ms":8354,"failure_type":"join_path_miss","failure_details":"Database error after 3 attempts: missing FROM-clause entry for table \"o\""}
{"timestamp":"2026-01-26T22:34:11.681Z","query_id":"8c4cbe9a-d160-4fa0-83a2-285540de49c5","question":"Show projects with their assigned employees and timesheets","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["timesheets","task_assignments","projects","project_tasks","timesheet_entries","employees","project_expenses","project_resources","departments","project_budgets","employment_history","budgets"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"task_assignments","similarity":0.7254601286163709},{"table":"timesheets","similarity":0.724599356925528},{"table":"projects","similarity":0.7060381287747283},{"table":"timesheet_entries","similarity":0.68440665593784},{"table":"project_resources","similarity":0.6773645072067691},{"table":"project_expenses","similarity":0.6639235843071432},{"table":"project_tasks","similarity":0.6390970523600644},{"table":"departments","similarity":0.6348393442273855},{"table":"employees","similarity":0.6317149616075417},{"table":"budgets","similarity":0.614607713190159},{"table":"project_budgets","similarity":0.6085749814594456},{"table":"project_milestones","similarity":0.6003628627740564},{"table":"employee_salaries","similarity":0.5957345589587495},{"table":"document_attachments","similarity":0.5931086920904521},{"table":"employment_history","similarity":0.5838987236273493}],"column_hits_per_table":{"timesheets":7,"projects":12,"timesheet_entries":4,"employees":6,"project_tasks":6,"task_assignments":4,"project_resources":2,"project_expenses":2,"fixed_assets":2,"departments":2,"budgets":1,"products":1,"project_budgets":1},"top_columns_per_table":{"timesheets":[{"column":"employee_id","similarity":0.7227720329166448},{"column":"approved_by","similarity":0.7021304478738212},{"column":"total_hours","similarity":0.6732004703319849}],"projects":[{"column":"created_at","similarity":0.7195855256412981},{"column":"project_manager_id","similarity":0.6940566582894363},{"column":"project_number","similarity":0.6399594426589975}],"timesheet_entries":[{"column":"project_id","similarity":0.7065537911792291},{"column":"task_id","similarity":0.6806725137327428},{"column":"hours","similarity":0.653010148651423}],"employees":[{"column":"created_at","similarity":0.7007321286335527},{"column":"hire_date","similarity":0.6429989669650297},{"column":"department_id","similarity":0.6235299480852099}],"project_tasks":[{"column":"actual_hours","similarity":0.696797135648885},{"column":"estimated_hours","similarity":0.691363001111502},{"column":"due_date","similarity":0.6527047673920735}],"task_assignments":[{"column":"employee_id","similarity":0.6819376090533371},{"column":"estimated_hours","similarity":0.6727343456257171},{"column":"assigned_date","similarity":0.6383201214889102}],"project_resources":[{"column":"employee_id","similarity":0.6732590736917553},{"column":"hourly_rate","similarity":0.6272446037102534}],"project_expenses":[{"column":"employee_id","similarity":0.6669444746896335},{"column":"approved_by","similarity":0.6626681198228287}],"fixed_assets":[{"column":"assigned_to","similarity":0.642907456377345},{"column":"created_at","similarity":0.6122069411558807}],"departments":[{"column":"created_at","similarity":0.6390087298382683},{"column":"manager_id","similarity":0.6135297678119693}],"budgets":[{"column":"created_at","similarity":0.6239444037843506}],"products":[{"column":"created_at","similarity":0.6137026868384319}],"project_budgets":[{"column":"planned_amount","similarity":0.6128856372997997}]},"fused_scores":[{"table":"timesheets","fused":0.8502518873712424,"table_sim":0.724599356925528,"col_score":1.0387306830398138},{"table":"task_assignments","fused":0.8320338397178915,"table_sim":0.7254601286163709,"col_score":0.9918944063701722},{"table":"projects","fused":0.8069027698366162,"table_sim":0.7060381287747283,"col_score":0.9581997314294481},{"table":"project_tasks","fused":0.8004496858978931,"table_sim":0.6390970523600644,"col_score":1.042478636204636},{"table":"timesheet_entries","fused":0.7707655837883653,"table_sim":0.68440665593784,"col_score":0.9003039755641532},{"table":"employees","fused":0.7598772202237776,"table_sim":0.6317149616075417,"col_score":0.9521206081481315},{"table":"project_expenses","fused":0.756793624969966,"table_sim":0.6639235843071432,"col_score":0.8960986859642004},{"table":"project_resources","fused":0.7515728161250086,"table_sim":0.6773645072067691,"col_score":0.8628852795023677},{"table":"departments","fused":0.6457202183848221,"table_sim":0.6348393442273855,"col_score":0.6620415296209771},{"table":"project_budgets","fused":0.6102992437955872,"table_sim":0.6085749814594456,"col_score":0.6128856372997997},{"table":"budgets","fused":0.5434690609737136,"table_sim":0.614607713190159,"col_score":0.4367610826490454},{"table":"project_milestones","fused":0.36021771766443383,"table_sim":0.6003628627740564,"col_score":0},{"table":"employee_salaries","fused":0.3574407353752497,"table_sim":0.5957345589587495,"col_score":0},{"table":"document_attachments","fused":0.3558652152542713,"table_sim":0.5931086920904521,"col_score":0},{"table":"employment_history","fused":0.35033923417640955,"table_sim":0.5838987236273493,"col_score":0}],"fk_expansion_candidates":33,"fk_expansion_added":2,"fk_expansion_blocked_count":27,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"document_attachments","reason":"max_tables"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_salaries","reason":"max_tables"},{"table":"project_milestones","reason":"max_tables"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":27,"total_retrieval_latency_ms":33,"sql_generated":"SELECT p.project_id AS project_id, p.name AS project_name, e.first_name || ' ' || e.last_name AS employee_full_name, ts.entry_date AS timesheet_date, SUM(ts.hours) OVER (PARTITION BY p.project_id) AS total_timesheet_hours\nFROM projects p\nJOIN project_resources pr ON p.project_id = pr.project_id AND pr.employee_id = e.employee_id\nJOIN employees e ON pr.employee_id = e.employee_id\nLEFT JOIN timesheets ts ON e.employee_id = ts.employee_id AND ts.timesheet_date BETWEEN p.start_date AND COALESCE(p.planned_end_date, CURRENT_DATE)\nGROUP BY p.project_id, e.first_name;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42P01","error_message":"missing FROM-clause entry for table \"e\"","total_latency_ms":8110,"failure_type":"join_path_miss","failure_details":"Database error after 3 attempts: missing FROM-clause entry for table \"e\""}
