{"timestamp":"2026-01-27T20:37:25.503Z","query_id":"5e6a0810-d61a-4bed-92ba-0a8feafc3823","question":"List all employees in the Sales department","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employees","departments","employee_salaries","employee_certifications","goods_receipts","positions","sales_regions","business_units","budgets","sales_territories","employment_history","employee_training"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"departments","similarity":0.7018819264422769},{"table":"employees","similarity":0.6963141569337209},{"table":"positions","similarity":0.6581594168559208},{"table":"employee_salaries","similarity":0.639257259916862},{"table":"sales_regions","similarity":0.6312030956746659},{"table":"business_units","similarity":0.6239684491575331},{"table":"employee_certifications","similarity":0.6229972990181882},{"table":"budgets","similarity":0.617459472791645},{"table":"sales_territories","similarity":0.6102039592511826},{"table":"employment_history","similarity":0.6101413897607149},{"table":"purchase_requisitions","similarity":0.6097607241658892},{"table":"employee_benefits","similarity":0.6082385664329927},{"table":"employee_training","similarity":0.6047853289798245},{"table":"goods_receipts","similarity":0.6024016522018802},{"table":"emergency_contacts","similarity":0.6009863587594317}],"column_hits_per_table":{"employees":16,"departments":6,"positions":1,"employee_certifications":2,"goods_receipts":1,"business_units":1,"sales_territories":1,"sales_orders":1,"budgets":1,"sales_regions":1,"asset_maintenance":1,"employee_salaries":2,"project_expenses":2,"employee_benefits":1,"purchase_requisitions":1,"sales_opportunities":1,"task_assignments":1,"emergency_contacts":1,"timesheets":1,"employment_history":1,"employee_training":1,"cost_centers":1,"asset_transfers":2,"project_resources":1,"warehouses":1,"performance_reviews":1},"top_columns_per_table":{"employees":[{"column":"department_id","similarity":0.7438378780959836},{"column":"is_active","similarity":0.6898514430157328},{"column":"phone","similarity":0.6884781654193587}],"departments":[{"column":"manager_id","similarity":0.7148098723176987},{"column":"department_id","similarity":0.6802234045695587},{"column":"budget","similarity":0.6768568604597922}],"positions":[{"column":"department_id","similarity":0.6885987208242758}],"employee_certifications":[{"column":"employee_id","similarity":0.6617681978427804},{"column":"certification_id","similarity":0.6311135283463721}],"goods_receipts":[{"column":"received_by","similarity":0.6583117635667177}],"business_units":[{"column":"manager_id","similarity":0.6545196306469504}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6512458142884996}],"sales_orders":[{"column":"sales_rep_id","similarity":0.6499960316755506}],"budgets":[{"column":"department_id","similarity":0.6460822382776508}],"sales_regions":[{"column":"manager_id","similarity":0.6439326618471962}],"asset_maintenance":[{"column":"performed_by","similarity":0.6437090997046176}],"employee_salaries":[{"column":"employee_id","similarity":0.6423794415726771},{"column":"approved_by","similarity":0.6339811095593604}],"project_expenses":[{"column":"employee_id","similarity":0.641830403107342},{"column":"approved_by","similarity":0.6256513564368459}],"employee_benefits":[{"column":"employee_id","similarity":0.641816911740203}],"purchase_requisitions":[{"column":"department_id","similarity":0.6412971471190316}],"sales_opportunities":[{"column":"owner_id","similarity":0.6380140640371665}],"task_assignments":[{"column":"employee_id","similarity":0.6368520287345143}],"emergency_contacts":[{"column":"employee_id","similarity":0.6359115695387068}],"timesheets":[{"column":"employee_id","similarity":0.6333688009401329}],"employment_history":[{"column":"employee_id","similarity":0.6321379482184605}],"employee_training":[{"column":"employee_id","similarity":0.6321176608254997}],"cost_centers":[{"column":"department_id","similarity":0.6314138263804895}],"asset_transfers":[{"column":"to_employee_id","similarity":0.6311987237616232},{"column":"transferred_by","similarity":0.6249766402000394}],"project_resources":[{"column":"employee_id","similarity":0.6300298241419464}],"warehouses":[{"column":"manager_id","similarity":0.6284950025854869}],"performance_reviews":[{"column":"employee_id","similarity":0.6283937123860818}]},"fused_scores":[{"table":"employees","fused":0.8298251093085066,"table_sim":0.6963141569337209,"col_score":1.0300915378706852},{"table":"departments","fused":0.7919452821737608,"table_sim":0.7018819264422769,"col_score":0.9270403157709868},{"table":"employee_salaries","fused":0.7270799215940361,"table_sim":0.639257259916862,"col_score":0.8588139141097973},{"table":"employee_certifications","fused":0.6474493687753835,"table_sim":0.6229972990181882,"col_score":0.6841274734111765},{"table":"goods_receipts","fused":0.6247656967478152,"table_sim":0.6024016522018802,"col_score":0.6583117635667177},{"table":"positions","fused":0.5877032919443497,"table_sim":0.6581594168559208,"col_score":0.482019104576993},{"table":"sales_regions","fused":0.5590230027220144,"table_sim":0.6312030956746659,"col_score":0.4507528632930373},{"table":"business_units","fused":0.557646566075666,"table_sim":0.6239684491575331,"col_score":0.45816374145286526},{"table":"budgets","fused":0.5513787103927292,"table_sim":0.617459472791645,"col_score":0.4522575667943555},{"table":"sales_territories","fused":0.5484712035514895,"table_sim":0.6102039592511826,"col_score":0.4558720700019497},{"table":"purchase_requisitions","fused":0.5454196356928624,"table_sim":0.6097607241658892,"col_score":0.4489080029833221},{"table":"employee_benefits","fused":0.5446518751470524,"table_sim":0.6082385664329927,"col_score":0.4492718382181421},{"table":"employment_history","fused":0.5430834593575978,"table_sim":0.6101413897607149,"col_score":0.4424965637529223},{"table":"employee_training","fused":0.5398641424190346,"table_sim":0.6047853289798245,"col_score":0.44248236257784973},{"table":"emergency_contacts","fused":0.538647054726497,"table_sim":0.6009863587594317,"col_score":0.4451380986770947}],"fk_expansion_candidates":31,"fk_expansion_added":2,"fk_expansion_blocked_count":23,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"project_expenses","reason":"max_tables"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"emergency_contacts","reason":"max_tables"},{"table":"asset_transfers","reason":"max_tables"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":1653,"total_retrieval_latency_ms":1702,"sql_generated":"SELECT e.employee_id, e.first_name || ' ' || e.last_name AS employee_full_name FROM employees e JOIN departments d ON e.department_id = d.department_id WHERE d.name = 'Sales';","tables_used_in_sql":[],"explain_result":"success","rows_returned":63,"total_latency_ms":5123}
{"timestamp":"2026-01-27T20:37:30.627Z","query_id":"3cf7ed76-0329-4101-aadc-b5c8ddc641bc","question":"How many employees were hired in 2024?","attempt_count":2,"retry_succeeded":true,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employees","employee_salaries","employment_history","employee_certifications","employee_training","employee_benefits","timesheets","purchase_requisitions","budgets","sales_regions","sales_territories","positions"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"employees","similarity":0.6144292223525214},{"table":"employment_history","similarity":0.5990869260811272},{"table":"employee_salaries","similarity":0.5957232611905978},{"table":"employee_certifications","similarity":0.5847149077570227},{"table":"timesheets","similarity":0.575594643141534},{"table":"sales_regions","similarity":0.5687908420029388},{"table":"purchase_requisitions","similarity":0.5664402915390976},{"table":"positions","similarity":0.5658085475279547},{"table":"sales_opportunities","similarity":0.5639075817288894},{"table":"task_assignments","similarity":0.562680711321946},{"table":"employee_training","similarity":0.5619832232346038},{"table":"employee_benefits","similarity":0.5521280809074093},{"table":"sales_territories","similarity":0.5514528346239352},{"table":"budgets","similarity":0.5403087942053312},{"table":"sales_quotes","similarity":0.5393048811827968}],"column_hits_per_table":{"employees":16,"employee_salaries":6,"employee_certifications":4,"employment_history":6,"employee_training":5,"employee_benefits":2,"timesheets":2,"sales_regions":1,"stock_transfers":1,"sales_territories":1,"departments":1,"task_assignments":1,"business_units":1,"purchase_requisitions":1,"budgets":1,"sales_quotes":1},"top_columns_per_table":{"employees":[{"column":"hire_date","similarity":0.7106559818290373},{"column":"birth_date","similarity":0.6517135742797255},{"column":"employee_number","similarity":0.633121778910481}],"employee_salaries":[{"column":"effective_date","similarity":0.6296154988591133},{"column":"end_date","similarity":0.609101620634113},{"column":"approved_by","similarity":0.5761653893037841}],"employee_certifications":[{"column":"obtained_date","similarity":0.6094607553884445},{"column":"expiry_date","similarity":0.6007861744748104},{"column":"certificate_number","similarity":0.5633632316465422}],"employment_history":[{"column":"start_date","similarity":0.6071257631385101},{"column":"end_date","similarity":0.5989153405055726},{"column":"position","similarity":0.5890884348995125}],"employee_training":[{"column":"scheduled_date","similarity":0.6029307116623341},{"column":"completion_date","similarity":0.6028518248589481},{"column":"status","similarity":0.5708936159109197}],"employee_benefits":[{"column":"start_date","similarity":0.5952623658369748},{"column":"end_date","similarity":0.5732788329636184}],"timesheets":[{"column":"approved_by","similarity":0.5691747597184825},{"column":"employee_id","similarity":0.5581640185946611}],"sales_regions":[{"column":"manager_id","similarity":0.5671745315621484}],"stock_transfers":[{"column":"created_by","similarity":0.562232812523577}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5618670479918372}],"departments":[{"column":"manager_id","similarity":0.5617735539821376}],"task_assignments":[{"column":"employee_id","similarity":0.5576232667870425}],"business_units":[{"column":"manager_id","similarity":0.5563961234903366}],"purchase_requisitions":[{"column":"approved_by","similarity":0.5556539730090067}],"budgets":[{"column":"approved_by","similarity":0.5516931281633284}],"sales_quotes":[{"column":"created_by","similarity":0.5460264622486979}]},"fused_scores":[{"table":"employees","fused":0.7832626409990728,"table_sim":0.6144292223525214,"col_score":1.0365127689689002},{"table":"employee_salaries","fused":0.7311004803848267,"table_sim":0.5957232611905978,"col_score":0.9341663091761698},{"table":"employment_history","fused":0.7220855290051948,"table_sim":0.5990869260811272,"col_score":0.9065834333912963},{"table":"employee_certifications","fused":0.7147704817045535,"table_sim":0.5847149077570227,"col_score":0.9098538426258497},{"table":"employee_training","fused":0.6989325835774856,"table_sim":0.5619832232346038,"col_score":0.9043566240918082},{"table":"employee_benefits","fused":0.6840375614719592,"table_sim":0.5521280809074093,"col_score":0.881901782318784},{"table":"timesheets","fused":0.6511696523755659,"table_sim":0.575594643141534,"col_score":0.7645321662266139},{"table":"purchase_requisitions","fused":0.5621257641270612,"table_sim":0.5664402915390976,"col_score":0.5556539730090067},{"table":"budgets","fused":0.5448625277885301,"table_sim":0.5403087942053312,"col_score":0.5516931281633284},{"table":"sales_regions","fused":0.5000833740391648,"table_sim":0.5687908420029388,"col_score":0.3970221720935038},{"table":"task_assignments","fused":0.4937429414935395,"table_sim":0.562680711321946,"col_score":0.39033628675092974},{"table":"sales_territories","fused":0.4881944742120755,"table_sim":0.5514528346239352,"col_score":0.393306933594286},{"table":"sales_quotes","fused":0.4764703381393135,"table_sim":0.5393048811827968,"col_score":0.3822185235740885},{"table":"positions","fused":0.3394851285167728,"table_sim":0.5658085475279547,"col_score":0},{"table":"sales_opportunities","fused":0.33834454903733363,"table_sim":0.5639075817288894,"col_score":0}],"fk_expansion_candidates":33,"fk_expansion_added":2,"fk_expansion_blocked_count":28,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":34,"total_retrieval_latency_ms":41,"sql_generated":"SELECT COUNT(*) FROM employees WHERE hire_date BETWEEN '2024-01-01' AND '2024-12-31';","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":1126}
{"timestamp":"2026-01-27T20:37:31.753Z","query_id":"e6c07e5c-a44a-4647-a44b-9c33e9be8b53","question":"What is the average salary by department?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["positions","employee_salaries","employees","departments","budgets","goods_receipts","employee_benefits","journal_entries","employment_history","project_expenses","cost_centers","sales_territories"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"positions","similarity":0.6472399264470684},{"table":"employee_salaries","similarity":0.6163489777991259},{"table":"departments","similarity":0.6143006157633061},{"table":"employees","similarity":0.5843710762372889},{"table":"cost_centers","similarity":0.5579264629700211},{"table":"budgets","similarity":0.5571964787833181},{"table":"sales_regions","similarity":0.5364724383376334},{"table":"sales_territories","similarity":0.5299492722581486},{"table":"journal_entries","similarity":0.526534036172237},{"table":"purchase_requisitions","similarity":0.5238763225772829},{"table":"project_expenses","similarity":0.5181308895485073},{"table":"employee_benefits","similarity":0.5174411519669776},{"table":"goods_receipts","similarity":0.5160018389560823},{"table":"task_assignments","similarity":0.513087451687374},{"table":"employment_history","similarity":0.5120203905454107}],"column_hits_per_table":{"employees":8,"departments":6,"employee_salaries":7,"positions":4,"cost_centers":1,"budgets":2,"employee_benefits":1,"purchase_requisitions":1,"requisition_lines":2,"project_resources":1,"employment_history":1,"sales_orders":2,"project_budgets":1,"employee_training":1,"currencies":1,"vendor_invoices":2,"goods_receipts":2,"product_suppliers":1,"project_expenses":1,"journal_entries":1,"depreciation_schedules":1,"employee_certifications":1,"sales_quotes":1,"sales_territories":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.6714025402580912},{"column":"department_id","similarity":0.584700343354732},{"column":"employee_number","similarity":0.5532682108483173}],"departments":[{"column":"budget","similarity":0.6693178899525953},{"column":"name","similarity":0.6171203083627336},{"column":"parent_department_id","similarity":0.5878888275901532}],"employee_salaries":[{"column":"amount","similarity":0.6538497128830203},{"column":"effective_date","similarity":0.6119174466610072},{"column":"salary_id","similarity":0.6029067593645321}],"positions":[{"column":"department_id","similarity":0.6330316284547595},{"column":"max_salary","similarity":0.6298490831807669},{"column":"min_salary","similarity":0.6262751289068413}],"cost_centers":[{"column":"department_id","similarity":0.5944196229868914}],"budgets":[{"column":"department_id","similarity":0.57844391567942},{"column":"total_amount","similarity":0.5345358880503847}],"employee_benefits":[{"column":"coverage_level","similarity":0.5592633154028713}],"purchase_requisitions":[{"column":"department_id","similarity":0.5579053225850302}],"requisition_lines":[{"column":"estimated_total","similarity":0.5575389137165062},{"column":"estimated_unit_cost","similarity":0.5432548724783238}],"project_resources":[{"column":"hourly_rate","similarity":0.5507729867753033}],"employment_history":[{"column":"position","similarity":0.546923389654957}],"sales_orders":[{"column":"total","similarity":0.5456325341224678},{"column":"subtotal","similarity":0.5256028180358103}],"project_budgets":[{"column":"actual_amount","similarity":0.5389410727850935}],"employee_training":[{"column":"score","similarity":0.5351809226270803}],"currencies":[{"column":"exchange_rate","similarity":0.5339462316729515}],"vendor_invoices":[{"column":"amount_paid","similarity":0.5331812479989457},{"column":"total","similarity":0.5302071561700523}],"goods_receipts":[{"column":"received_by","similarity":0.5319872343080682},{"column":"receipt_number","similarity":0.523270196493927}],"product_suppliers":[{"column":"unit_cost","similarity":0.5297268931690184}],"project_expenses":[{"column":"amount","similarity":0.5280982333276214}],"journal_entries":[{"column":"posted_by","similarity":0.5260241851684003}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5257318815448632}],"employee_certifications":[{"column":"certificate_number","similarity":0.5236560179787567}],"sales_quotes":[{"column":"total","similarity":0.5236132162689948}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5204418572284772}]},"fused_scores":[{"table":"positions","fused":0.7655386149219161,"table_sim":0.6472399264470684,"col_score":0.9429866476341876},{"table":"employee_salaries","fused":0.7537327611648852,"table_sim":0.6163489777991259,"col_score":0.959808436213524},{"table":"employees","fused":0.7298373040152732,"table_sim":0.5843710762372889,"col_score":0.9480366456822499},{"table":"departments","fused":0.7227043686098045,"table_sim":0.6143006157633061,"col_score":0.8853099978795521},{"table":"budgets","fused":0.6291143906852635,"table_sim":0.5571964787833181,"col_score":0.7369912585381817},{"table":"goods_receipts","fused":0.6270500363956621,"table_sim":0.5160018389560823,"col_score":0.7936223325550317},{"table":"employee_benefits","fused":0.5341700173413351,"table_sim":0.5174411519669776,"col_score":0.5592633154028713},{"table":"journal_entries","fused":0.5263300957707023,"table_sim":0.526534036172237,"col_score":0.5260241851684003},{"table":"employment_history","fused":0.5259815901892293,"table_sim":0.5120203905454107,"col_score":0.546923389654957},{"table":"project_expenses","fused":0.522117827060153,"table_sim":0.5181308895485073,"col_score":0.5280982333276214},{"table":"cost_centers","fused":0.5011933722183423,"table_sim":0.5579264629700211,"col_score":0.416093736090824},{"table":"purchase_requisitions","fused":0.4705392838701782,"table_sim":0.5238763225772829,"col_score":0.3905337258095211},{"table":"sales_territories","fused":0.46369328337886273,"table_sim":0.5299492722581486,"col_score":0.36430930005993406},{"table":"requisition_lines","fused":0.33166653998226725,"table_sim":0,"col_score":0.8291663499556681},{"table":"sales_orders","fused":0.32337357725614924,"table_sim":0,"col_score":0.808433943140373}],"fk_expansion_candidates":34,"fk_expansion_added":2,"fk_expansion_blocked_count":27,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"sales_regions","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"benefit_types","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":33,"total_retrieval_latency_ms":39,"sql_generated":"SELECT d.name AS department_name, AVG(e.salary) AS avg_salary FROM departments d JOIN employees e ON d.department_id = e.department_id GROUP BY d.name;","tables_used_in_sql":[],"explain_result":"success","rows_returned":19,"total_latency_ms":888}
{"timestamp":"2026-01-27T20:37:32.642Z","query_id":"db96aab3-e122-47fa-ba45-c9e534bca3c1","question":"List all customers with credit limit over $100,000","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["customers","customer_contacts","bank_accounts","sales_quotes","certifications","budget_lines","purchase_requisitions","project_expenses","budgets","cost_centers","bank_transactions","employee_certifications"],"tables_from_table_retrieval":15,"tables_from_column_only":15,"tables_from_fk_expansion":2,"table_scores":[{"table":"customers","similarity":0.6422232823454113},{"table":"customer_contacts","similarity":0.5702946339617082},{"table":"sales_regions","similarity":0.5667997703273866},{"table":"certifications","similarity":0.5571072107976042},{"table":"sales_quotes","similarity":0.5491541498727729},{"table":"purchase_requisitions","similarity":0.5478589409950445},{"table":"budget_lines","similarity":0.5454449382794198},{"table":"bank_accounts","similarity":0.5447528216147618},{"table":"cost_centers","similarity":0.540959333993602},{"table":"employee_certifications","similarity":0.5407552237950306},{"table":"projects","similarity":0.5406308106386197},{"table":"project_expenses","similarity":0.5396310315886659},{"table":"fixed_assets","similarity":0.5381704816225558},{"table":"vendor_invoice_lines","similarity":0.5372813385528225},{"table":"budgets","similarity":0.5364846137863498}],"column_hits_per_table":{"customers":11,"projects":1,"customer_contacts":7,"sales_opportunities":1,"sales_quotes":2,"sales_orders":2,"reorder_rules":1,"budgets":1,"vendor_invoices":1,"project_expenses":1,"quote_lines":1,"certifications":1,"purchase_orders":3,"budget_lines":1,"bank_accounts":2,"bank_transactions":2,"journal_lines":1,"purchase_requisitions":1,"order_lines":1,"vendor_invoice_lines":1,"positions":1,"sales_regions":1,"po_lines":1,"cost_centers":1,"project_budgets":1,"project_milestones":1,"warehouse_locations":1,"requisition_lines":1},"top_columns_per_table":{"customers":[{"column":"credit_limit","similarity":0.8290390589962461},{"column":"payment_terms","similarity":0.6650377871997543},{"column":"customer_number","similarity":0.6415139612300956}],"projects":[{"column":"customer_id","similarity":0.6113530297711885}],"customer_contacts":[{"column":"phone","similarity":0.6040484167837853},{"column":"customer_id","similarity":0.6035386821269575},{"column":"contact_id","similarity":0.5998404377039879}],"sales_opportunities":[{"column":"customer_id","similarity":0.5973351705123849}],"sales_quotes":[{"column":"customer_id","similarity":0.5961691774985171},{"column":"total","similarity":0.5659883632982617}],"sales_orders":[{"column":"customer_id","similarity":0.58549970245739},{"column":"total","similarity":0.5683405933157465}],"reorder_rules":[{"column":"max_quantity","similarity":0.5844362539863144}],"budgets":[{"column":"approved_by","similarity":0.5826134824645886}],"vendor_invoices":[{"column":"total","similarity":0.5814502781366767}],"project_expenses":[{"column":"approved_by","similarity":0.5806637778484305}],"quote_lines":[{"column":"line_total","similarity":0.5801896505180127}],"certifications":[{"column":"validity_years","similarity":0.5798577433614027}],"purchase_orders":[{"column":"total","similarity":0.5778492143323815},{"column":"approved_by","similarity":0.5753364140452711},{"column":"buyer_id","similarity":0.5681572281535011}],"budget_lines":[{"column":"amount","similarity":0.5775415147969544}],"bank_accounts":[{"column":"current_balance","similarity":0.5767501897962805},{"column":"account_number","similarity":0.5703853537704927}],"bank_transactions":[{"column":"amount","similarity":0.5760624192982815},{"column":"reference","similarity":0.566440413697339}],"journal_lines":[{"column":"credit","similarity":0.5758582782262962}],"purchase_requisitions":[{"column":"approved_by","similarity":0.573497894904601}],"order_lines":[{"column":"line_total","similarity":0.5724929640076355}],"vendor_invoice_lines":[{"column":"amount","similarity":0.5692283162401672}],"positions":[{"column":"max_salary","similarity":0.5687679838535561}],"sales_regions":[{"column":"manager_id","similarity":0.5681024224683461}],"po_lines":[{"column":"line_total","similarity":0.5673570249509682}],"cost_centers":[{"column":"code","similarity":0.5669986563600412}],"project_budgets":[{"column":"actual_amount","similarity":0.566506927799081}],"project_milestones":[{"column":"amount","similarity":0.5661535207015114}],"warehouse_locations":[{"column":"capacity","similarity":0.5659576253370232}],"requisition_lines":[{"column":"estimated_total","similarity":0.5640113461906648}]},"fused_scores":[{"table":"customers","fused":0.8499571504456961,"table_sim":0.6422232823454113,"col_score":1.1615579525961233},{"table":"customer_contacts","fused":0.7028167334530704,"table_sim":0.5702946339617082,"col_score":0.9015998826901137},{"table":"bank_accounts","fused":0.6716288396414678,"table_sim":0.5447528216147618,"col_score":0.8619428666815268},{"table":"sales_quotes","fused":0.6393515200927609,"table_sim":0.5491541498727729,"col_score":0.7746475754227427},{"table":"certifications","fused":0.5662074238231236,"table_sim":0.5571072107976042,"col_score":0.5798577433614027},{"table":"budget_lines","fused":0.5582835688864336,"table_sim":0.5454449382794198,"col_score":0.5775415147969544},{"table":"purchase_requisitions","fused":0.5581145225588671,"table_sim":0.5478589409950445,"col_score":0.573497894904601},{"table":"project_expenses","fused":0.5560441300925718,"table_sim":0.5396310315886659,"col_score":0.5806637778484305},{"table":"budgets","fused":0.5549361612576453,"table_sim":0.5364846137863498,"col_score":0.5826134824645886},{"table":"cost_centers","fused":0.5513750629401777,"table_sim":0.540959333993602,"col_score":0.5669986563600412},{"table":"vendor_invoice_lines","fused":0.5500601296277604,"table_sim":0.5372813385528225,"col_score":0.5692283162401672},{"table":"sales_regions","fused":0.49914854048756885,"table_sim":0.5667997703273866,"col_score":0.3976716957278422},{"table":"projects","fused":0.4955573347191046,"table_sim":0.5406308106386197,"col_score":0.42794712083983194},{"table":"purchase_orders","fused":0.34620696854200683,"table_sim":0,"col_score":0.865517421355017},{"table":"bank_transactions","fused":0.3437130504587804,"table_sim":0,"col_score":0.8592826261469511}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":11,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"projects","reason":"max_tables"},{"table":"purchase_orders","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":1378,"total_retrieval_latency_ms":1385,"sql_generated":"SELECT c.customer_id, c.name AS customer_name, c.email, c.phone, c.credit_limit FROM customers c WHERE c.credit_limit > 100000;","tables_used_in_sql":[],"explain_result":"success","rows_returned":206,"total_latency_ms":2163}
{"timestamp":"2026-01-27T20:37:34.805Z","query_id":"f499cadb-6348-4dd5-8b17-c61bbd28a00b","question":"How many sales orders are in pending status?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["sales_orders","purchase_orders","sales_opportunities","order_lines","vendor_invoices","purchase_requisitions","sales_quotes","goods_receipts","po_lines","product_suppliers","fixed_assets","receipt_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":12,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.6863020331203206},{"table":"purchase_orders","similarity":0.6720782086239174},{"table":"order_lines","similarity":0.620432904007153},{"table":"vendor_invoices","similarity":0.6085185379492049},{"table":"goods_receipts","similarity":0.6053687360586439},{"table":"sales_opportunities","similarity":0.601388904869088},{"table":"po_lines","similarity":0.576218684979662},{"table":"product_suppliers","similarity":0.5754254810584586},{"table":"purchase_requisitions","similarity":0.57327171968414},{"table":"vendor_invoice_lines","similarity":0.5682118570421297},{"table":"sales_territories","similarity":0.5678982904980082},{"table":"receipt_lines","similarity":0.5660529547253613},{"table":"vendors","similarity":0.5659136630376012},{"table":"reorder_rules","similarity":0.5568055924346023},{"table":"sales_quotes","similarity":0.5566655088616519}],"column_hits_per_table":{"sales_orders":14,"purchase_orders":13,"sales_quotes":1,"vendor_invoices":3,"purchase_requisitions":1,"stock_transfers":1,"timesheets":1,"leave_requests":1,"sales_opportunities":2,"project_phases":1,"projects":1,"journal_entries":1,"inventory_adjustments":1,"fixed_assets":2,"asset_maintenance":1,"order_lines":2,"employee_training":1,"project_expenses":1,"goods_receipts":1,"project_tasks":1},"top_columns_per_table":{"sales_orders":[{"column":"status","similarity":0.8126679915790036},{"column":"order_date","similarity":0.7078984846645195},{"column":"ship_date","similarity":0.6929006763015985}],"purchase_orders":[{"column":"status","similarity":0.770838550445989},{"column":"order_date","similarity":0.6497285521212871},{"column":"po_number","similarity":0.6445881341176289}],"sales_quotes":[{"column":"status","similarity":0.7105128416768823}],"vendor_invoices":[{"column":"status","similarity":0.6915681497187584},{"column":"due_date","similarity":0.5983254925630166},{"column":"po_id","similarity":0.5978553329024192}],"purchase_requisitions":[{"column":"status","similarity":0.6886346020649313}],"stock_transfers":[{"column":"status","similarity":0.6613621118756833}],"timesheets":[{"column":"status","similarity":0.6425710565758574}],"leave_requests":[{"column":"status","similarity":0.6303639699021262}],"sales_opportunities":[{"column":"expected_close_date","similarity":0.6291685056430228},{"column":"actual_close_date","similarity":0.6262923756162083}],"project_phases":[{"column":"status","similarity":0.6275085851720199}],"projects":[{"column":"status","similarity":0.6256287411296566}],"journal_entries":[{"column":"status","similarity":0.6235483153718223}],"inventory_adjustments":[{"column":"status","similarity":0.6208235335633071}],"fixed_assets":[{"column":"status","similarity":0.6168418961639195},{"column":"po_id","similarity":0.6010404984118506}],"asset_maintenance":[{"column":"status","similarity":0.6160182585727294}],"order_lines":[{"column":"quantity_shipped","similarity":0.6148753597061939},{"column":"order_id","similarity":0.6054379790805837}],"employee_training":[{"column":"status","similarity":0.6139587143974272}],"project_expenses":[{"column":"status","similarity":0.6069411878269023}],"goods_receipts":[{"column":"po_id","similarity":0.6057662952497207}],"project_tasks":[{"column":"status","similarity":0.6001730432395295}]},"fused_scores":[{"table":"sales_orders","fused":0.8335207489983198,"table_sim":0.6863020331203206,"col_score":1.0543488228153188},{"table":"purchase_orders","fused":0.7920559728463912,"table_sim":0.6720782086239174,"col_score":0.9720226191801016},{"table":"sales_opportunities","fused":0.7377592203019037,"table_sim":0.601388904869088,"col_score":0.9423146934511271},{"table":"order_lines","fused":0.7029712033580511,"table_sim":0.620432904007153,"col_score":0.8267786523843982},{"table":"vendor_invoices","fused":0.7012608607553557,"table_sim":0.6085185379492049,"col_score":0.840374344964582},{"table":"purchase_requisitions","fused":0.5367807203886648,"table_sim":0.57327171968414,"col_score":0.4820442214454519},{"table":"sales_quotes","fused":0.5329429009865182,"table_sim":0.5566655088616519,"col_score":0.4973589891738176},{"table":"goods_receipts","fused":0.5328358043051082,"table_sim":0.6053687360586439,"col_score":0.42403640667480447},{"table":"po_lines","fused":0.3457312109877972,"table_sim":0.576218684979662,"col_score":0},{"table":"product_suppliers","fused":0.34525528863507515,"table_sim":0.5754254810584586,"col_score":0},{"table":"vendor_invoice_lines","fused":0.3409271142252778,"table_sim":0.5682118570421297,"col_score":0},{"table":"sales_territories","fused":0.3407389742988049,"table_sim":0.5678982904980082,"col_score":0},{"table":"receipt_lines","fused":0.3396317728352168,"table_sim":0.5660529547253613,"col_score":0},{"table":"vendors","fused":0.3395481978225607,"table_sim":0.5659136630376012,"col_score":0},{"table":"reorder_rules","fused":0.33408335546076134,"table_sim":0.5568055924346023,"col_score":0}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendors","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":37,"total_retrieval_latency_ms":43,"sql_generated":"SELECT COUNT(*) FROM sales_orders WHERE status = 'pending';","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":514}
{"timestamp":"2026-01-27T20:37:35.319Z","query_id":"196f007d-4b4a-4ba4-8bea-3c8880761ae2","question":"List all products in the Electronics category","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["products","asset_categories","product_categories","product_suppliers","inventory_levels","purchase_orders","project_budgets","fixed_assets","order_lines","goods_receipts","inventory_transactions","purchase_requisitions"],"tables_from_table_retrieval":15,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"product_categories","similarity":0.7247710633179223},{"table":"products","similarity":0.6925442846427379},{"table":"asset_categories","similarity":0.6732299389573608},{"table":"product_suppliers","similarity":0.6030261734368682},{"table":"inventory_levels","similarity":0.5983462217768915},{"table":"fixed_assets","similarity":0.5837780825065988},{"table":"order_lines","similarity":0.579950725989159},{"table":"benefit_types","similarity":0.5783320444020242},{"table":"goods_receipts","similarity":0.5716501955638699},{"table":"inventory_transactions","similarity":0.5662070064714834},{"table":"purchase_orders","similarity":0.5640672157629032},{"table":"reorder_rules","similarity":0.5631110139120176},{"table":"sales_orders","similarity":0.5610178986822795},{"table":"project_budgets","similarity":0.5604683231309531},{"table":"receipt_lines","similarity":0.5589477791069778}],"column_hits_per_table":{"product_categories":5,"products":11,"asset_categories":5,"fixed_assets":1,"project_expenses":1,"project_budgets":1,"inventory_levels":3,"product_suppliers":6,"goods_receipts":1,"inventory_transactions":1,"receipt_lines":1,"purchase_orders":3,"order_lines":1,"purchase_requisitions":2,"sales_orders":1,"requisition_lines":1,"po_lines":1,"transfer_lines":1,"projects":1,"reorder_rules":1,"vendors":1,"project_milestones":1},"top_columns_per_table":{"product_categories":[{"column":"description","similarity":0.7744734798782056},{"column":"is_active","similarity":0.764103621998991},{"column":"category_id","similarity":0.7400673790806138}],"products":[{"column":"category_id","similarity":0.7448968885002062},{"column":"weight","similarity":0.7338384533236261},{"column":"description","similarity":0.7270322585700298}],"asset_categories":[{"column":"category_id","similarity":0.6720113269687207},{"column":"name","similarity":0.6440506484802837},{"column":"useful_life_years","similarity":0.6436763776718329}],"fixed_assets":[{"column":"category_id","similarity":0.6687988929895817}],"project_expenses":[{"column":"category","similarity":0.6580372401808694}],"project_budgets":[{"column":"category","similarity":0.6411736891011891}],"inventory_levels":[{"column":"product_id","similarity":0.6383729329618826},{"column":"quantity_available","similarity":0.6195689232836453},{"column":"quantity_reserved","similarity":0.6150070840715671}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6357396016111654},{"column":"is_preferred","similarity":0.6352037703917482},{"column":"product_id","similarity":0.6350232984655001}],"goods_receipts":[{"column":"notes","similarity":0.6342701892167845}],"inventory_transactions":[{"column":"product_id","similarity":0.6285109886489371}],"receipt_lines":[{"column":"product_id","similarity":0.6251008787738574}],"purchase_orders":[{"column":"status","similarity":0.6246767013236649},{"column":"subtotal","similarity":0.6129627891245971},{"column":"total","similarity":0.6109546136413169}],"order_lines":[{"column":"product_id","similarity":0.6228405864995272}],"purchase_requisitions":[{"column":"notes","similarity":0.6219501766292409},{"column":"status","similarity":0.6143404481217759}],"sales_orders":[{"column":"status","similarity":0.6179542401442183}],"requisition_lines":[{"column":"product_id","similarity":0.6178394374568797}],"po_lines":[{"column":"product_id","similarity":0.6141691155677201}],"transfer_lines":[{"column":"product_id","similarity":0.6137213514394801}],"projects":[{"column":"description","similarity":0.6114423632244014}],"reorder_rules":[{"column":"product_id","similarity":0.6112855739301208}],"vendors":[{"column":"website","similarity":0.6078254177271813}],"project_milestones":[{"column":"description","similarity":0.6073811792561313}]},"fused_scores":[{"table":"products","fused":0.84960555792291,"table_sim":0.6925442846427379,"col_score":1.0851974678431684},{"table":"asset_categories","fused":0.785802907667366,"table_sim":0.6732299389573608,"col_score":0.9546623607323738},{"table":"product_categories","fused":0.7586897194365096,"table_sim":0.7247710633179223,"col_score":0.8095677036143907},{"table":"product_suppliers","fused":0.7431522987849367,"table_sim":0.6030261734368682,"col_score":0.9533414868070396},{"table":"inventory_levels","fused":0.7298367191939065,"table_sim":0.5983462217768915,"col_score":0.9270724653194289},{"table":"purchase_orders","fused":0.7058163678358441,"table_sim":0.5640672157629032,"col_score":0.9184400959452556},{"table":"project_budgets","fused":0.5927504695190475,"table_sim":0.5604683231309531,"col_score":0.6411736891011891},{"table":"fixed_assets","fused":0.5375305395410421,"table_sim":0.5837780825065988,"col_score":0.4681592250927072},{"table":"order_lines","fused":0.5223657998133631,"table_sim":0.579950725989159,"col_score":0.435988410549669},{"table":"goods_receipts","fused":0.5205857703190215,"table_sim":0.5716501955638699,"col_score":0.4439891324517491},{"table":"inventory_transactions","fused":0.5157072807045924,"table_sim":0.5662070064714834,"col_score":0.4399576920542559},{"table":"receipt_lines","fused":0.5103969135208668,"table_sim":0.5589477791069778,"col_score":0.4375706151417002},{"table":"sales_orders","fused":0.5096379264497488,"table_sim":0.5610178986822795,"col_score":0.43256796810095277},{"table":"reorder_rules","fused":0.5090265690476443,"table_sim":0.5631110139120176,"col_score":0.42789990175108455},{"table":"benefit_types","fused":0.3469992266412145,"table_sim":0.5783320444020242,"col_score":0}],"fk_expansion_candidates":23,"fk_expansion_added":2,"fk_expansion_blocked_count":17,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"max_tables"},{"table":"reorder_rules","reason":"max_tables"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"max_tables"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":21,"total_retrieval_latency_ms":26,"sql_generated":"SELECT p.name AS product_name, p.sku, pc.category_id, pc.name AS category_name FROM products p INNER JOIN product_categories pc ON p.category_id = pc.category_id WHERE pc.name = 'Electronics';","tables_used_in_sql":[],"explain_result":"success","rows_returned":62,"total_latency_ms":985}
{"timestamp":"2026-01-27T20:37:36.304Z","query_id":"5e8106fc-9b49-44e7-8db9-0a50d5ed0a1c","question":"What are the names of all warehouses?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["warehouse_locations","warehouses","asset_locations","inventory_levels","stock_transfers","vendors","product_suppliers","inventory_transactions","goods_receipts","receipt_lines","addresses","adjustment_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":14,"tables_from_fk_expansion":2,"table_scores":[{"table":"warehouse_locations","similarity":0.7285498737313786},{"table":"warehouses","similarity":0.6792134543197855},{"table":"inventory_levels","similarity":0.6028416640616783},{"table":"stock_transfers","similarity":0.5855227429535015},{"table":"asset_locations","similarity":0.5811905860356016},{"table":"inventory_transactions","similarity":0.5741447160112193},{"table":"goods_receipts","similarity":0.562857185642988},{"table":"receipt_lines","similarity":0.5455584769843732},{"table":"inventory_adjustments","similarity":0.5426259114305894},{"table":"departments","similarity":0.5313134558364061},{"table":"business_units","similarity":0.5244981901049215},{"table":"asset_categories","similarity":0.5238562017802103},{"table":"product_suppliers","similarity":0.5237894596417773},{"table":"vendors","similarity":0.5237362245698947},{"table":"adjustment_lines","similarity":0.5220765049120273}],"column_hits_per_table":{"warehouses":6,"warehouse_locations":7,"stock_transfers":2,"goods_receipts":1,"inventory_levels":2,"inventory_transactions":2,"receipt_lines":1,"departments":1,"vendors":2,"inventory_adjustments":1,"adjustment_lines":1,"asset_locations":6,"cities":1,"reorder_rules":1,"business_units":1,"cost_centers":1,"sales_territories":1,"products":1,"sales_regions":1,"projects":1,"currencies":1,"product_categories":1,"budgets":1,"product_suppliers":2,"units_of_measure":1,"project_phases":1,"vendor_contacts":1,"asset_categories":1,"addresses":1},"top_columns_per_table":{"warehouses":[{"column":"name","similarity":0.8306423755557336},{"column":"code","similarity":0.7512829316334283},{"column":"warehouse_id","similarity":0.7425092729476251}],"warehouse_locations":[{"column":"rack","similarity":0.7298143500706573},{"column":"bin","similarity":0.7297344203964418},{"column":"aisle","similarity":0.7247238571215294}],"stock_transfers":[{"column":"to_warehouse_id","similarity":0.6377076065867383},{"column":"from_warehouse_id","similarity":0.6282759066468376}],"goods_receipts":[{"column":"warehouse_id","similarity":0.6325079254457334}],"inventory_levels":[{"column":"warehouse_id","similarity":0.623490938233287},{"column":"location_id","similarity":0.6197290277532869}],"inventory_transactions":[{"column":"warehouse_id","similarity":0.6172355443974565},{"column":"location_id","similarity":0.6163600073929221}],"receipt_lines":[{"column":"location_id","similarity":0.6086776313817097}],"departments":[{"column":"name","similarity":0.6046172861965688}],"vendors":[{"column":"name","similarity":0.6006474572761235},{"column":"website","similarity":0.5429020150551502}],"inventory_adjustments":[{"column":"warehouse_id","similarity":0.5962150819746229}],"adjustment_lines":[{"column":"location_id","similarity":0.5953390531464773}],"asset_locations":[{"column":"name","similarity":0.59252797863612},{"column":"building","similarity":0.5687769385352075},{"column":"description","similarity":0.568123307445186}],"cities":[{"column":"name","similarity":0.5913925051006355}],"reorder_rules":[{"column":"warehouse_id","similarity":0.5860961886053743}],"business_units":[{"column":"name","similarity":0.5855760360515111}],"cost_centers":[{"column":"name","similarity":0.5796551031766091}],"sales_territories":[{"column":"name","similarity":0.5739343094189399}],"products":[{"column":"name","similarity":0.5715109515395136}],"sales_regions":[{"column":"name","similarity":0.5686881306616351}],"projects":[{"column":"name","similarity":0.5628106374186854}],"currencies":[{"column":"name","similarity":0.5599164983958906}],"product_categories":[{"column":"name","similarity":0.5543220703341668}],"budgets":[{"column":"name","similarity":0.5506764127199264}],"product_suppliers":[{"column":"supplier_id","similarity":0.5505276328361339},{"column":"is_preferred","similarity":0.545694199708335}],"units_of_measure":[{"column":"name","similarity":0.5498315512937682}],"project_phases":[{"column":"name","similarity":0.5455907198882759}],"vendor_contacts":[{"column":"first_name","similarity":0.5438345209961394}],"asset_categories":[{"column":"name","similarity":0.5437632464112468}],"addresses":[{"column":"street1","similarity":0.5425795221955373}]},"fused_scores":[{"table":"warehouse_locations","fused":0.8750025483463784,"table_sim":0.7285498737313786,"col_score":1.0946815602688782},{"table":"warehouses","fused":0.8243311778230453,"table_sim":0.6792134543197855,"col_score":1.042007763077935},{"table":"asset_locations","fused":0.6856831018359026,"table_sim":0.5811905860356016,"col_score":0.8424218755363542},{"table":"inventory_levels","fused":0.6230445250277874,"table_sim":0.6028416640616783,"col_score":0.6533488164769513},{"table":"stock_transfers","fused":0.6178304025469449,"table_sim":0.5855227429535015,"col_score":0.6662918919371099},{"table":"vendors","fused":0.6154931847826541,"table_sim":0.5237362245698947,"col_score":0.7531286251017935},{"table":"product_suppliers","fused":0.6096252242654591,"table_sim":0.5237894596417773,"col_score":0.7383788712009819},{"table":"inventory_transactions","fused":0.6036031830730284,"table_sim":0.5741447160112193,"col_score":0.6477908836657422},{"table":"goods_receipts","fused":0.5148165305105982,"table_sim":0.562857185642988,"col_score":0.4427555478120134},{"table":"receipt_lines","fused":0.49776482297750263,"table_sim":0.5455584769843732,"col_score":0.4260743419671968},{"table":"inventory_adjustments","fused":0.492515769811248,"table_sim":0.5426259114305894,"col_score":0.41735055738223603},{"table":"departments","fused":0.4880809136368829,"table_sim":0.5313134558364061,"col_score":0.42323210033759817},{"table":"adjustment_lines","fused":0.47994083782823005,"table_sim":0.5220765049120273,"col_score":0.4167373372025341},{"table":"business_units","fused":0.478660204157376,"table_sim":0.5244981901049215,"col_score":0.40990322523605777},{"table":"asset_categories","fused":0.4665674300632753,"table_sim":0.5238562017802103,"col_score":0.3806342724878728}],"fk_expansion_candidates":15,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"max_tables"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"vendor_contacts","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":22,"total_retrieval_latency_ms":28,"sql_generated":"SELECT w.name FROM warehouses AS w;","tables_used_in_sql":[],"explain_result":"success","rows_returned":5,"total_latency_ms":405}
{"timestamp":"2026-01-27T20:37:36.709Z","query_id":"9f7d1d85-48ac-43cb-a744-c954d71bf421","question":"List all active vendors","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["vendors","vendor_contacts","vendor_invoices","product_suppliers","vendor_invoice_lines","purchase_orders","warehouses","sales_orders","asset_maintenance","positions","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":1,"table_scores":[{"table":"vendors","similarity":0.6880006513779018},{"table":"vendor_invoices","similarity":0.6543823921120047},{"table":"vendor_contacts","similarity":0.6543707733450305},{"table":"product_suppliers","similarity":0.6368613960189783},{"table":"purchase_orders","similarity":0.6046285681195724},{"table":"warehouses","similarity":0.598149679590252},{"table":"vendor_invoice_lines","similarity":0.5838401301268009},{"table":"sales_orders","similarity":0.5640201838810418},{"table":"employee_certifications","similarity":0.551813660527373},{"table":"positions","similarity":0.5516308950343896},{"table":"goods_receipts","similarity":0.546132532397609},{"table":"certifications","similarity":0.5422578536384377},{"table":"business_units","similarity":0.5370141517568868},{"table":"sales_opportunities","similarity":0.5364263200685896},{"table":"asset_maintenance","similarity":0.5360709301261409}],"column_hits_per_table":{"vendors":12,"vendor_invoices":11,"product_suppliers":3,"vendor_contacts":8,"fixed_assets":1,"customers":1,"employees":1,"products":1,"asset_maintenance":1,"purchase_orders":1,"warehouses":1,"vendor_invoice_lines":4,"business_units":1,"positions":1,"sales_orders":1,"product_categories":1,"bank_accounts":1},"top_columns_per_table":{"vendors":[{"column":"is_active","similarity":0.8155853373692737},{"column":"vendor_id","similarity":0.7047968333046998},{"column":"website","similarity":0.7047070539914414}],"vendor_invoices":[{"column":"status","similarity":0.6853007949330985},{"column":"total","similarity":0.6625184230380687},{"column":"vendor_id","similarity":0.658515810844043}],"product_suppliers":[{"column":"vendor_id","similarity":0.6663864141204237},{"column":"vendor_sku","similarity":0.6217787251674654},{"column":"is_preferred","similarity":0.6033063105449389}],"vendor_contacts":[{"column":"vendor_id","similarity":0.666362862060921},{"column":"is_primary","similarity":0.6648517274867396},{"column":"contact_id","similarity":0.6527908754111679}],"fixed_assets":[{"column":"vendor_id","similarity":0.6576219040714807}],"customers":[{"column":"is_active","similarity":0.6545248955843614}],"employees":[{"column":"is_active","similarity":0.649190940172776}],"products":[{"column":"is_active","similarity":0.6479807345635332}],"asset_maintenance":[{"column":"vendor_id","similarity":0.6479581638128978}],"purchase_orders":[{"column":"vendor_id","similarity":0.6472967761083289}],"warehouses":[{"column":"is_active","similarity":0.6446855549903335}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.6230871843854703},{"column":"invoice_id","similarity":0.6101244773591274},{"column":"line_id","similarity":0.609089375870349}],"business_units":[{"column":"is_active","similarity":0.6149605862492391}],"positions":[{"column":"is_active","similarity":0.6137399762218805}],"sales_orders":[{"column":"status","similarity":0.6081473914740269}],"product_categories":[{"column":"is_active","similarity":0.6076608572400397}],"bank_accounts":[{"column":"is_active","similarity":0.6030985737718401}]},"fused_scores":[{"table":"vendors","fused":0.8340562331865453,"table_sim":0.6880006513779018,"col_score":1.0531396058995104},{"table":"vendor_contacts","fused":0.7889592560034033,"table_sim":0.6543707733450305,"col_score":0.9908419799909627},{"table":"vendor_invoices","fused":0.7879374726767754,"table_sim":0.6543823921120047,"col_score":0.9882700935239312},{"table":"product_suppliers","fused":0.751489589787361,"table_sim":0.6368613960189783,"col_score":0.9234318804399348},{"table":"vendor_invoice_lines","fused":0.7211190259203175,"table_sim":0.5838401301268009,"col_score":0.9270373696105922},{"table":"purchase_orders","fused":0.5440202381820756,"table_sim":0.6046285681195724,"col_score":0.4531077432758302},{"table":"warehouses","fused":0.5394017631514445,"table_sim":0.598149679590252,"col_score":0.4512798884932334},{"table":"sales_orders","fused":0.5086933799413526,"table_sim":0.5640201838810418,"col_score":0.4257031740318188},{"table":"asset_maintenance","fused":0.5030708439432959,"table_sim":0.5360709301261409,"col_score":0.45357071466902843},{"table":"positions","fused":0.5028257303627602,"table_sim":0.5516308950343896,"col_score":0.4296179833553163},{"table":"business_units","fused":0.49439745520391903,"table_sim":0.5370141517568868,"col_score":0.4304724103744674},{"table":"employee_certifications","fused":0.3310881963164238,"table_sim":0.551813660527373,"col_score":0},{"table":"goods_receipts","fused":0.3276795194385654,"table_sim":0.546132532397609,"col_score":0},{"table":"certifications","fused":0.3253547121830626,"table_sim":0.5422578536384377,"col_score":0},{"table":"sales_opportunities","fused":0.3218557920411537,"table_sim":0.5364263200685896,"col_score":0}],"fk_expansion_candidates":20,"fk_expansion_added":1,"fk_expansion_blocked_count":19,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":853,"total_retrieval_latency_ms":860,"sql_generated":"SELECT v.vendor_id, v.vendor_number, v.name FROM vendors AS v WHERE v.is_active = TRUE;","tables_used_in_sql":[],"explain_result":"success","rows_returned":200,"total_latency_ms":1448}
{"timestamp":"2026-01-27T20:37:38.157Z","query_id":"3ad85a13-9fa4-4167-a5f8-7bfcfa3f1a37","question":"What are the different account types in the chart of accounts?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["account_types","chart_of_accounts","bank_accounts","bank_transactions","asset_categories","audit_log","benefit_types","journal_lines","vendor_invoice_lines","budget_lines","currencies","employee_benefits"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"chart_of_accounts","similarity":0.819203299985527},{"table":"account_types","similarity":0.7962345365841693},{"table":"bank_accounts","similarity":0.724679255065619},{"table":"journal_lines","similarity":0.625444495321535},{"table":"asset_categories","similarity":0.618359452764169},{"table":"benefit_types","similarity":0.6179653147868353},{"table":"bank_transactions","similarity":0.6154557182401941},{"table":"vendor_invoice_lines","similarity":0.6040685769049701},{"table":"budget_lines","similarity":0.5976766494889552},{"table":"customers","similarity":0.594854133582724},{"table":"leave_types","similarity":0.584850284339393},{"table":"audit_log","similarity":0.5826141715666185},{"table":"maintenance_types","similarity":0.5755860970964287},{"table":"currencies","similarity":0.5740346669434278},{"table":"certifications","similarity":0.5726437402506039}],"column_hits_per_table":{"chart_of_accounts":8,"account_types":4,"bank_accounts":8,"journal_lines":1,"budget_lines":1,"vendor_invoice_lines":1,"bank_transactions":3,"inventory_transactions":2,"asset_categories":3,"audit_log":2,"benefit_types":4,"document_attachments":1,"sales_orders":1,"employee_certifications":1,"journal_entries":1,"maintenance_types":1,"employee_benefits":2,"goods_receipts":1,"leave_types":1,"sales_regions":1,"stock_transfers":1,"employment_history":1,"product_categories":1},"top_columns_per_table":{"chart_of_accounts":[{"column":"account_number","similarity":0.8096926316994187},{"column":"account_type_id","similarity":0.7968800422254282},{"column":"name","similarity":0.7787449565502012}],"account_types":[{"column":"category","similarity":0.8060382831667645},{"column":"name","similarity":0.7816311319186199},{"column":"normal_balance","similarity":0.771440158430953}],"bank_accounts":[{"column":"account_number","similarity":0.7265786276491443},{"column":"gl_account_id","similarity":0.7192429462418238},{"column":"account_name","similarity":0.7122946577731373}],"journal_lines":[{"column":"account_id","similarity":0.6967143979052984}],"budget_lines":[{"column":"account_id","similarity":0.684445613990559}],"vendor_invoice_lines":[{"column":"account_id","similarity":0.6840058160952801}],"bank_transactions":[{"column":"transaction_type","similarity":0.6518087698648707},{"column":"bank_account_id","similarity":0.6061370977618293},{"column":"reference","similarity":0.5906710248731557}],"inventory_transactions":[{"column":"transaction_type","similarity":0.6495161080312447},{"column":"reference_type","similarity":0.6175642629967973}],"asset_categories":[{"column":"name","similarity":0.6338625869508345},{"column":"depreciation_method","similarity":0.6289044257771695},{"column":"category_id","similarity":0.6034748261864737}],"audit_log":[{"column":"table_name","similarity":0.6323776797561055},{"column":"action","similarity":0.6264802121253557}],"benefit_types":[{"column":"name","similarity":0.631265442053339},{"column":"benefit_type_id","similarity":0.5989631957377372},{"column":"description","similarity":0.5970070919798401}],"document_attachments":[{"column":"entity_type","similarity":0.610129485144327}],"sales_orders":[{"column":"order_number","similarity":0.6014897520147031}],"employee_certifications":[{"column":"certificate_number","similarity":0.6014221103097243}],"journal_entries":[{"column":"entry_number","similarity":0.5960303492351093}],"maintenance_types":[{"column":"name","similarity":0.5941881078938602}],"employee_benefits":[{"column":"coverage_level","similarity":0.59406931034147},{"column":"benefit_type_id","similarity":0.5920431573893533}],"goods_receipts":[{"column":"receipt_number","similarity":0.5921999581294917}],"leave_types":[{"column":"name","similarity":0.590925842666314}],"sales_regions":[{"column":"name","similarity":0.5908831690426579}],"stock_transfers":[{"column":"transfer_number","similarity":0.5905182588855986}],"employment_history":[{"column":"position","similarity":0.5900957722493421}],"product_categories":[{"column":"name","similarity":0.5900660138884373}]},"fused_scores":[{"table":"account_types","fused":0.954444066903398,"table_sim":0.7962345365841693,"col_score":1.191758362382241},{"table":"chart_of_accounts","fused":0.9269622385826437,"table_sim":0.819203299985527,"col_score":1.0886006464783187},{"table":"bank_accounts","fused":0.8505843245377838,"table_sim":0.724679255065619,"col_score":1.0394419287460308},{"table":"bank_transactions","fused":0.7481311438646958,"table_sim":0.6154557182401941,"col_score":0.9471442823014485},{"table":"asset_categories","fused":0.7113182041424861,"table_sim":0.618359452764169,"col_score":0.8507563312099616},{"table":"audit_log","fused":0.6886934629559682,"table_sim":0.5826141715666185,"col_score":0.8478124000399926},{"table":"benefit_types","fused":0.6313883600503192,"table_sim":0.6179653147868353,"col_score":0.6515229279455452},{"table":"journal_lines","fused":0.5703467286064046,"table_sim":0.625444495321535,"col_score":0.4877000785337089},{"table":"vendor_invoice_lines","fused":0.5539627746496605,"table_sim":0.6040685769049701,"col_score":0.47880407126669605},{"table":"budget_lines","fused":0.5502507616107296,"table_sim":0.5976766494889552,"col_score":0.4791119297933913},{"table":"leave_types","fused":0.5163694065502037,"table_sim":0.584850284339393,"col_score":0.41364808986641977},{"table":"maintenance_types","fused":0.5117243284681381,"table_sim":0.5755860970964287,"col_score":0.41593167552570215},{"table":"inventory_transactions","fused":0.38331929581185736,"table_sim":0,"col_score":0.9582982395296433},{"table":"customers","fused":0.3569124801496344,"table_sim":0.594854133582724,"col_score":0},{"table":"currencies","fused":0.34442080016605664,"table_sim":0.5740346669434278,"col_score":0}],"fk_expansion_candidates":9,"fk_expansion_added":2,"fk_expansion_blocked_count":7,"fk_expansion_blocked":[{"table":"budgets","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":1256,"total_retrieval_latency_ms":1262,"sql_generated":"SELECT DISTINCT at.name AS AccountType FROM account_types at;","tables_used_in_sql":[],"explain_result":"success","rows_returned":25,"total_latency_ms":1664}
{"timestamp":"2026-01-27T20:37:39.821Z","query_id":"504e8e1f-c453-4dae-966c-f0a98df84281","question":"List all bank accounts and their current balances","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["bank_accounts","bank_transactions","account_types","chart_of_accounts","depreciation_entries","currencies","budgets","asset_maintenance","fixed_assets","budget_lines","asset_categories","asset_transfers"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"bank_accounts","similarity":0.7329690151560269},{"table":"bank_transactions","similarity":0.6432688918493359},{"table":"account_types","similarity":0.631508179872346},{"table":"chart_of_accounts","similarity":0.6020063005251778},{"table":"budget_lines","similarity":0.5651962639440569},{"table":"customers","similarity":0.5535278665609116},{"table":"asset_categories","similarity":0.5521572577010813},{"table":"asset_maintenance","similarity":0.5475464914896694},{"table":"fixed_assets","similarity":0.542263585011133},{"table":"depreciation_entries","similarity":0.540207110520008},{"table":"depreciation_schedules","similarity":0.5389700501296238},{"table":"budgets","similarity":0.5356853372102878},{"table":"audit_log","similarity":0.5355796554212624},{"table":"currencies","similarity":0.5347534603370891},{"table":"asset_transfers","similarity":0.5308786114003121}],"column_hits_per_table":{"bank_accounts":8,"account_types":4,"bank_transactions":8,"chart_of_accounts":7,"budget_lines":1,"budgets":2,"asset_maintenance":4,"fixed_assets":3,"departments":1,"stock_transfers":1,"purchase_orders":1,"inventory_adjustments":1,"sales_orders":1,"depreciation_entries":3,"asset_transfers":1,"po_lines":1,"currencies":2,"order_lines":1},"top_columns_per_table":{"bank_accounts":[{"column":"current_balance","similarity":0.8131918868327234},{"column":"bank_name","similarity":0.6859971206500465},{"column":"is_active","similarity":0.6856206372857585}],"account_types":[{"column":"normal_balance","similarity":0.651680429614802},{"column":"name","similarity":0.5702821319602579},{"column":"category","similarity":0.5677375251541499}],"bank_transactions":[{"column":"bank_account_id","similarity":0.6394080898784963},{"column":"amount","similarity":0.6276211603986331},{"column":"reconciled","similarity":0.6180619655169489}],"chart_of_accounts":[{"column":"account_number","similarity":0.6009438246638642},{"column":"is_active","similarity":0.5880663435274229},{"column":"description","similarity":0.5864624123051488}],"budget_lines":[{"column":"account_id","similarity":0.5958013856129102}],"budgets":[{"column":"status","similarity":0.5911631228971014},{"column":"total_amount","similarity":0.5869858538327237}],"asset_maintenance":[{"column":"status","similarity":0.5877659188337945},{"column":"cost","similarity":0.5661365628191241},{"column":"notes","similarity":0.5650870530420457}],"fixed_assets":[{"column":"status","similarity":0.5876108236636884},{"column":"purchase_cost","similarity":0.5561615272534075},{"column":"po_id","similarity":0.5498653271915838}],"departments":[{"column":"budget","similarity":0.5809728059571625}],"stock_transfers":[{"column":"status","similarity":0.5709511656558833}],"purchase_orders":[{"column":"total","similarity":0.5687313472919212}],"inventory_adjustments":[{"column":"status","similarity":0.5683037201005342}],"sales_orders":[{"column":"total","similarity":0.5660190484076101}],"depreciation_entries":[{"column":"accumulated_depreciation","similarity":0.5614194260846443},{"column":"amount","similarity":0.555260116269063},{"column":"asset_id","similarity":0.5551633641468458}],"asset_transfers":[{"column":"asset_id","similarity":0.5602763924959059}],"po_lines":[{"column":"line_total","similarity":0.5571370270411418}],"currencies":[{"column":"symbol","similarity":0.5502956016313811},{"column":"code","similarity":0.5500909502155655}],"order_lines":[{"column":"line_total","similarity":0.5495504183282629}]},"fused_scores":[{"table":"bank_accounts","fused":0.902177471523772,"table_sim":0.7329690151560269,"col_score":1.1559901560753896},{"table":"bank_transactions","fused":0.7606221923724445,"table_sim":0.6432688918493359,"col_score":0.9366521431571075},{"table":"account_types","fused":0.7531245848001584,"table_sim":0.631508179872346,"col_score":0.9355491921918769},{"table":"chart_of_accounts","fused":0.6839105982744915,"table_sim":0.6020063005251778,"col_score":0.8067670448984622},{"table":"depreciation_entries","fused":0.6597440599996751,"table_sim":0.540207110520008,"col_score":0.8390494842191758},{"table":"currencies","fused":0.6509885068979191,"table_sim":0.5347534603370891,"col_score":0.8253410767391639},{"table":"budgets","fused":0.6389683810648563,"table_sim":0.5356853372102878,"col_score":0.7938929468467092},{"table":"asset_maintenance","fused":0.6372697486581825,"table_sim":0.5475464914896694,"col_score":0.7718546344109521},{"table":"fixed_assets","fused":0.6300882772209593,"table_sim":0.542263585011133,"col_score":0.7618253155356984},{"table":"budget_lines","fused":0.5059421463380489,"table_sim":0.5651962639440569,"col_score":0.41706096992903713},{"table":"asset_transfers","fused":0.4754045567390409,"table_sim":0.5308786114003121,"col_score":0.3921934747471341},{"table":"customers","fused":0.33211671993654696,"table_sim":0.5535278665609116,"col_score":0},{"table":"asset_categories","fused":0.33129435462064877,"table_sim":0.5521572577010813,"col_score":0},{"table":"depreciation_schedules","fused":0.3233820300777743,"table_sim":0.5389700501296238,"col_score":0},{"table":"audit_log","fused":0.3213477932527574,"table_sim":0.5355796554212624,"col_score":0}],"fk_expansion_candidates":15,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"asset_locations","reason":"no_evidence"},{"table":"customers","reason":"max_tables"},{"table":"departments","reason":"max_tables"},{"table":"depreciation_schedules","reason":"max_tables"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"purchase_orders","reason":"max_tables"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":17,"total_retrieval_latency_ms":22,"sql_generated":"SELECT ba.account_number AS \"Account Number\", ba.account_name AS \"Account Name\", ba.current_balance AS \"Current Balance\" FROM fixed_assets fa INNER JOIN bank_accounts ba ON fa.asset_id = ba.bank_account_id WHERE fa.category_id IN (SELECT category_id FROM asset_categories WHERE name = 'Fixed Assets');","tables_used_in_sql":[],"explain_result":"success","rows_returned":0,"total_latency_ms":1257}
{"timestamp":"2026-01-27T20:37:41.079Z","query_id":"80988809-f6b8-45e3-9e52-f2517afcd725","question":"How many projects are currently active?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["project_tasks","projects","project_milestones","project_phases","project_resources","project_expenses","positions","product_categories","warehouses","cost_centers","project_budgets","task_assignments"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_tasks","similarity":0.6324363750327547},{"table":"project_milestones","similarity":0.6170314556998037},{"table":"project_phases","similarity":0.6128862225489412},{"table":"projects","similarity":0.6020298260872147},{"table":"project_resources","similarity":0.6015867769428557},{"table":"project_budgets","similarity":0.5892063991800344},{"table":"project_expenses","similarity":0.5696442071698902},{"table":"positions","similarity":0.5644568182612411},{"table":"opportunity_stages","similarity":0.5589162087700763},{"table":"warehouses","similarity":0.5509035131365505},{"table":"cost_centers","similarity":0.548129265267962},{"table":"task_assignments","similarity":0.5450320760647058},{"table":"product_categories","similarity":0.539820939875771},{"table":"asset_maintenance","similarity":0.52313956323239},{"table":"business_units","similarity":0.5210598083671529}],"column_hits_per_table":{"projects":11,"project_phases":8,"project_tasks":9,"products":1,"project_milestones":7,"product_categories":1,"positions":1,"project_expenses":1,"project_resources":3,"training_courses":1,"employees":1,"warehouses":1,"business_units":1,"cost_centers":1,"vendors":1,"bank_accounts":1,"customers":1},"top_columns_per_table":{"projects":[{"column":"status","similarity":0.7039586739514128},{"column":"start_date","similarity":0.6607094006164724},{"column":"project_number","similarity":0.6518983609724518}],"project_phases":[{"column":"status","similarity":0.6689746254874316},{"column":"start_date","similarity":0.6271086432862566},{"column":"project_id","similarity":0.6166614910327677}],"project_tasks":[{"column":"status","similarity":0.6676901253189378},{"column":"completed_date","similarity":0.6374421602481329},{"column":"actual_hours","similarity":0.6316381487867313}],"products":[{"column":"is_active","similarity":0.6425708119490484}],"project_milestones":[{"column":"completed_date","similarity":0.6325660468867274},{"column":"is_billable","similarity":0.6124934562333328},{"column":"project_id","similarity":0.6076897771208767}],"product_categories":[{"column":"is_active","similarity":0.6317144051457637}],"positions":[{"column":"is_active","similarity":0.6252475888035075}],"project_expenses":[{"column":"status","similarity":0.622364299630185}],"project_resources":[{"column":"start_date","similarity":0.6206371456319261},{"column":"end_date","similarity":0.6084386815140401},{"column":"project_id","similarity":0.5910943352806449}],"training_courses":[{"column":"is_active","similarity":0.6141042575011056}],"employees":[{"column":"is_active","similarity":0.6117702012307417}],"warehouses":[{"column":"is_active","similarity":0.6079254385625211}],"business_units":[{"column":"is_active","similarity":0.6021027569519785}],"cost_centers":[{"column":"is_active","similarity":0.597901030459316}],"vendors":[{"column":"is_active","similarity":0.5950232278262507}],"bank_accounts":[{"column":"is_active","similarity":0.5888223633904216}],"customers":[{"column":"is_active","similarity":0.5831120305694527}]},"fused_scores":[{"table":"project_tasks","fused":0.7607663188762523,"table_sim":0.6324363750327547,"col_score":0.9532612346414986},{"table":"projects","fused":0.7558813280934082,"table_sim":0.6020298260872147,"col_score":0.9866585811026983},{"table":"project_milestones","fused":0.7457439834212397,"table_sim":0.6170314556998037,"col_score":0.9388127750033938},{"table":"project_phases","fused":0.7418687116489029,"table_sim":0.6128862225489412,"col_score":0.9353424452988452},{"table":"project_resources","fused":0.7308946607212918,"table_sim":0.6015867769428557,"col_score":0.9248564863889461},{"table":"project_expenses","fused":0.5160485281983859,"table_sim":0.5696442071698902,"col_score":0.4356550097411295},{"table":"positions","fused":0.5137434158217267,"table_sim":0.5644568182612411,"col_score":0.4376733121624552},{"table":"product_categories","fused":0.5007725973662764,"table_sim":0.539820939875771,"col_score":0.44220008360203455},{"table":"warehouses","fused":0.5007612306794362,"table_sim":0.5509035131365505,"col_score":0.42554780699376477},{"table":"cost_centers","fused":0.49628984768938567,"table_sim":0.548129265267962,"col_score":0.41853072132152114},{"table":"business_units","fused":0.48122465696684574,"table_sim":0.5210598083671529,"col_score":0.4214719298663849},{"table":"project_budgets","fused":0.35352383950802063,"table_sim":0.5892063991800344,"col_score":0},{"table":"opportunity_stages","fused":0.33534972526204576,"table_sim":0.5589162087700763,"col_score":0},{"table":"task_assignments","fused":0.3270192456388235,"table_sim":0.5450320760647058,"col_score":0},{"table":"asset_maintenance","fused":0.31388373793943397,"table_sim":0.52313956323239,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":14,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":34,"total_retrieval_latency_ms":40,"sql_generated":"SELECT COUNT(*) FROM projects WHERE status = 'active';","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":356}
{"timestamp":"2026-01-27T20:37:41.436Z","query_id":"9dc230b9-e593-4e4f-a83f-6b1570b0b1c9","question":"List all fixed assets with their purchase cost","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["fixed_assets","asset_maintenance","purchase_orders","asset_transfers","project_budgets","project_expenses","asset_categories","purchase_requisitions","depreciation_schedules","depreciation_entries","asset_locations","maintenance_types"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"fixed_assets","similarity":0.7209497053888301},{"table":"asset_maintenance","similarity":0.6308058404117752},{"table":"asset_categories","similarity":0.5912281177120349},{"table":"depreciation_schedules","similarity":0.5814813777494169},{"table":"asset_transfers","similarity":0.5810308594815269},{"table":"purchase_requisitions","similarity":0.5569747421146416},{"table":"purchase_orders","similarity":0.5506831817049027},{"table":"depreciation_entries","similarity":0.5454814933769311},{"table":"asset_locations","similarity":0.545468446655189},{"table":"requisition_lines","similarity":0.5406198549845527},{"table":"project_expenses","similarity":0.5394520045423311},{"table":"project_budgets","similarity":0.5162048498656928},{"table":"inventory_adjustments","similarity":0.5159531035642008},{"table":"sales_territories","similarity":0.5074635447871859},{"table":"adjustment_lines","similarity":0.5062944760482943}],"column_hits_per_table":{"fixed_assets":17,"asset_maintenance":8,"asset_transfers":2,"purchase_orders":5,"maintenance_types":1,"depreciation_entries":1,"depreciation_schedules":1,"products":2,"purchase_requisitions":2,"asset_categories":1,"project_expenses":2,"project_budgets":2,"sales_orders":2,"product_suppliers":1,"projects":1,"vendor_invoices":1,"budgets":1},"top_columns_per_table":{"fixed_assets":[{"column":"purchase_cost","similarity":0.8423448992143113},{"column":"purchase_date","similarity":0.7689166463133373},{"column":"disposal_amount","similarity":0.7227764959896598}],"asset_maintenance":[{"column":"cost","similarity":0.7099171439402068},{"column":"asset_id","similarity":0.6516176549413301},{"column":"status","similarity":0.6280454782739386}],"asset_transfers":[{"column":"asset_id","similarity":0.6460511870752553},{"column":"reason","similarity":0.5978803089362457}],"purchase_orders":[{"column":"total","similarity":0.6344593910735148},{"column":"shipping_cost","similarity":0.6188978318886464},{"column":"subtotal","similarity":0.6026448016407694}],"maintenance_types":[{"column":"estimated_cost","similarity":0.6142507699404941}],"depreciation_entries":[{"column":"asset_id","similarity":0.609651147848969}],"depreciation_schedules":[{"column":"asset_id","similarity":0.6056651094167285}],"products":[{"column":"unit_cost","similarity":0.6018845518779156},{"column":"list_price","similarity":0.5829432045610968}],"purchase_requisitions":[{"column":"status","similarity":0.6006593595483197},{"column":"notes","similarity":0.580625013783363}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.5981101161213059}],"project_expenses":[{"column":"amount","similarity":0.5845721523119052},{"column":"status","similarity":0.5742178119977871}],"project_budgets":[{"column":"actual_amount","similarity":0.5819665579953361},{"column":"planned_amount","similarity":0.5770144160331034}],"sales_orders":[{"column":"total","similarity":0.5794698766565994},{"column":"shipping_cost","similarity":0.5723923913919466}],"product_suppliers":[{"column":"unit_cost","similarity":0.5781850879817803}],"projects":[{"column":"budget","similarity":0.5753357955995387}],"vendor_invoices":[{"column":"total","similarity":0.5747822939355819}],"budgets":[{"column":"total_amount","similarity":0.5743122120825542}]},"fused_scores":[{"table":"fixed_assets","fused":0.92329111218169,"table_sim":0.7209497053888301,"col_score":1.22680322237098},{"table":"asset_maintenance","fused":0.7860559067350223,"table_sim":0.6308058404117752,"col_score":1.0189310062198929},{"table":"purchase_orders","fused":0.7079732318300769,"table_sim":0.5506831817049027,"col_score":0.943908307017838},{"table":"asset_transfers","fused":0.67821780545395,"table_sim":0.5810308594815269,"col_score":0.823998224412585},{"table":"project_budgets","fused":0.6579124163241709,"table_sim":0.5162048498656928,"col_score":0.8704737660118879},{"table":"project_expenses","fused":0.637890557329851,"table_sim":0.5394520045423311,"col_score":0.7855483865111307},{"table":"asset_categories","fused":0.5939809170757433,"table_sim":0.5912281177120349,"col_score":0.5981101161213059},{"table":"purchase_requisitions","fused":0.5836569678719853,"table_sim":0.5569747421146416,"col_score":0.6236803065080008},{"table":"depreciation_schedules","fused":0.5184750572863341,"table_sim":0.5814813777494169,"col_score":0.4239655765917099},{"table":"depreciation_entries","fused":0.49799121742387,"table_sim":0.5454814933769311,"col_score":0.4267558034942783},{"table":"products","fused":0.3573424616633856,"table_sim":0,"col_score":0.893356154158464},{"table":"sales_orders","fused":0.3462664289410291,"table_sim":0,"col_score":0.8656660723525728},{"table":"asset_locations","fused":0.3272810679931134,"table_sim":0.545468446655189,"col_score":0},{"table":"requisition_lines","fused":0.3243719129907316,"table_sim":0.5406198549845527,"col_score":0},{"table":"inventory_adjustments","fused":0.30957186213852045,"table_sim":0.5159531035642008,"col_score":0}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"projects","reason":"max_tables"},{"table":"requisition_lines","reason":"max_tables"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":27,"total_retrieval_latency_ms":33,"sql_generated":"SELECT fa.asset_id AS asset_id, fa.name AS name, fa.purchase_cost AS purchase_cost FROM fixed_assets fa;","tables_used_in_sql":[],"explain_result":"success","rows_returned":500,"total_latency_ms":690}
{"timestamp":"2026-01-27T20:37:42.126Z","query_id":"052f834e-5cc4-4f06-841c-f7a7908dbe37","question":"What are all the available leave types?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["leave_types","leave_requests","maintenance_types","account_types","employment_history","benefit_types","employees","positions","employee_benefits","asset_maintenance","chart_of_accounts","sales_territories"],"tables_from_table_retrieval":15,"tables_from_column_only":9,"tables_from_fk_expansion":2,"table_scores":[{"table":"leave_types","similarity":0.7907961003152969},{"table":"leave_requests","similarity":0.7143778015997992},{"table":"maintenance_types","similarity":0.6481400096068088},{"table":"benefit_types","similarity":0.6269933285396667},{"table":"account_types","similarity":0.6192881819056906},{"table":"positions","similarity":0.5752929625327803},{"table":"employee_benefits","similarity":0.5713679218642078},{"table":"employment_history","similarity":0.5660594097075526},{"table":"employees","similarity":0.5660053394491918},{"table":"asset_maintenance","similarity":0.5543920873977978},{"table":"chart_of_accounts","similarity":0.5502530849823464},{"table":"sales_territories","similarity":0.5497748598255436},{"table":"sales_opportunities","similarity":0.5460540206653771},{"table":"training_courses","similarity":0.5421204605814522},{"table":"asset_categories","similarity":0.537612536880944}],"column_hits_per_table":{"leave_types":5,"leave_requests":10,"maintenance_types":5,"benefit_types":5,"employment_history":2,"account_types":4,"employee_training":1,"asset_maintenance":2,"timesheets":1,"sales_orders":1,"employee_benefits":2,"positions":2,"fixed_assets":1,"employees":2,"vendor_invoices":1,"sales_opportunities":1,"purchase_requisitions":1,"stock_transfers":1,"inventory_adjustments":1,"sales_quotes":1,"sales_territories":1},"top_columns_per_table":{"leave_types":[{"column":"days_allowed","similarity":0.7686500345965878},{"column":"is_paid","similarity":0.7623841534239336},{"column":"name","similarity":0.7406312254921097}],"leave_requests":[{"column":"status","similarity":0.7444703766728187},{"column":"leave_type_id","similarity":0.7158957943298758},{"column":"days_requested","similarity":0.6957721236459536}],"maintenance_types":[{"column":"description","similarity":0.6377767194823566},{"column":"name","similarity":0.631136316452077},{"column":"type_id","similarity":0.6167514426103488}],"benefit_types":[{"column":"is_active","similarity":0.6269473121389368},{"column":"name","similarity":0.6220834198328969},{"column":"description","similarity":0.6122108465746717}],"employment_history":[{"column":"reason_for_leaving","similarity":0.6243515506921076},{"column":"position","similarity":0.5714253900200132}],"account_types":[{"column":"normal_balance","similarity":0.6149563569549518},{"column":"category","similarity":0.6045207339251893},{"column":"name","similarity":0.5905785819022606}],"employee_training":[{"column":"status","similarity":0.6084208038692348}],"asset_maintenance":[{"column":"status","similarity":0.5961072885143408},{"column":"maintenance_type_id","similarity":0.5889166627027309}],"timesheets":[{"column":"status","similarity":0.5896684755702837}],"sales_orders":[{"column":"status","similarity":0.5833814673451871}],"employee_benefits":[{"column":"benefit_type_id","similarity":0.5820988681778586},{"column":"coverage_level","similarity":0.563402375606914}],"positions":[{"column":"is_active","similarity":0.5815402830311333},{"column":"title","similarity":0.5780125325936805}],"fixed_assets":[{"column":"status","similarity":0.5779508245109969}],"employees":[{"column":"termination_date","similarity":0.5720522989676154},{"column":"gender","similarity":0.5661719915149735}],"vendor_invoices":[{"column":"status","similarity":0.5694778387064632}],"sales_opportunities":[{"column":"source","similarity":0.5693960477309942}],"purchase_requisitions":[{"column":"status","similarity":0.5692240149966709}],"stock_transfers":[{"column":"status","similarity":0.5691483787100361}],"inventory_adjustments":[{"column":"status","similarity":0.566032834035236}],"sales_quotes":[{"column":"status","similarity":0.5648321255084394}],"sales_territories":[{"column":"name","similarity":0.5628683783439146}]},"fused_scores":[{"table":"leave_types","fused":0.9271541516976758,"table_sim":0.7907961003152969,"col_score":1.131691228771244},{"table":"leave_requests","fused":0.8425926840869853,"table_sim":0.7143778015997992,"col_score":1.0349150078177645},{"table":"maintenance_types","fused":0.7488967046422195,"table_sim":0.6481400096068088,"col_score":0.9000317471953356},{"table":"account_types","fused":0.738459598710433,"table_sim":0.6192881819056906,"col_score":0.9172167239175464},{"table":"employment_history","fused":0.7036613441053773,"table_sim":0.5660594097075526,"col_score":0.9100642457021142},{"table":"benefit_types","fused":0.6888048802259811,"table_sim":0.6269933285396667,"col_score":0.7815222077554526},{"table":"employees","fused":0.6816585215595561,"table_sim":0.5660053394491918,"col_score":0.8551382947251023},{"table":"positions","fused":0.657796430181499,"table_sim":0.5752929625327803,"col_score":0.7815516316545771},{"table":"employee_benefits","fused":0.6496755449061905,"table_sim":0.5713679218642078,"col_score":0.7671369794691645},{"table":"asset_maintenance","fused":0.5819936260010764,"table_sim":0.5543920873977978,"col_score":0.6233959339059943},{"table":"sales_opportunities","fused":0.5553908314916239,"table_sim":0.5460540206653771,"col_score":0.5693960477309942},{"table":"sales_territories","fused":0.4874680618316223,"table_sim":0.5497748598255436,"col_score":0.3940078648407402},{"table":"chart_of_accounts","fused":0.3301518509894078,"table_sim":0.5502530849823464,"col_score":0},{"table":"training_courses","fused":0.32527227634887135,"table_sim":0.5421204605814522,"col_score":0},{"table":"asset_categories","fused":0.3225675221285664,"table_sim":0.537612536880944,"col_score":0}],"fk_expansion_candidates":32,"fk_expansion_added":2,"fk_expansion_blocked_count":29,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":29,"total_retrieval_latency_ms":36,"sql_generated":"SELECT lt.name FROM leave_types AS lt;","tables_used_in_sql":[],"explain_result":"success","rows_returned":8,"total_latency_ms":406}
{"timestamp":"2026-01-27T20:37:42.532Z","query_id":"913d0d65-e180-4776-9158-7de96bd4b1c5","question":"List all training courses that are mandatory","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["training_courses","employee_training","certifications","employee_certifications","leave_types","maintenance_types","purchase_requisitions","emergency_contacts","units_of_measure","business_units","asset_maintenance","employees"],"tables_from_table_retrieval":15,"tables_from_column_only":12,"tables_from_fk_expansion":2,"table_scores":[{"table":"training_courses","similarity":0.7832587829851695},{"table":"employee_training","similarity":0.6570057454586046},{"table":"certifications","similarity":0.5900939338505992},{"table":"employee_certifications","similarity":0.5760162077924663},{"table":"maintenance_types","similarity":0.49281971341629327},{"table":"leave_types","similarity":0.49016105575765045},{"table":"emergency_contacts","similarity":0.4738555676585048},{"table":"account_types","similarity":0.47279576060367634},{"table":"business_units","similarity":0.47237885502957644},{"table":"units_of_measure","similarity":0.46939263092633876},{"table":"asset_maintenance","similarity":0.4667394047579505},{"table":"purchase_requisitions","similarity":0.4654660756610647},{"table":"employees","similarity":0.4617701057229451},{"table":"positions","similarity":0.46160419508462314},{"table":"countries","similarity":0.46045896330476366}],"column_hits_per_table":{"training_courses":7,"employee_training":7,"certifications":5,"employee_certifications":6,"leave_types":3,"sales_orders":1,"purchase_requisitions":2,"maintenance_types":4,"emergency_contacts":1,"project_milestones":2,"benefit_types":1,"business_units":1,"requisition_lines":1,"product_suppliers":1,"project_resources":1,"project_tasks":1,"reorder_rules":1,"units_of_measure":1,"projects":1,"employee_benefits":1,"inventory_levels":1,"vendor_contacts":1},"top_columns_per_table":{"training_courses":[{"column":"is_mandatory","similarity":0.8183425520777443},{"column":"description","similarity":0.7152546556290251},{"column":"cost","similarity":0.703103057924051}],"employee_training":[{"column":"course_id","similarity":0.6726632190515707},{"column":"scheduled_date","similarity":0.6406033902015907},{"column":"completion_date","similarity":0.6314212095563025}],"certifications":[{"column":"description","similarity":0.6043807811754061},{"column":"issuing_body","similarity":0.5890949692558212},{"column":"validity_years","similarity":0.5683544613271275}],"employee_certifications":[{"column":"certification_id","similarity":0.5641935913194706},{"column":"cert_id","similarity":0.5530637459134944},{"column":"certificate_number","similarity":0.5527992455216449}],"leave_types":[{"column":"requires_approval","similarity":0.5414363431590249},{"column":"is_paid","similarity":0.5069584623421746},{"column":"days_allowed","similarity":0.48500668213425}],"sales_orders":[{"column":"required_date","similarity":0.522537932147881}],"purchase_requisitions":[{"column":"required_date","similarity":0.5198974320372106},{"column":"notes","similarity":0.48367699787532503}],"maintenance_types":[{"column":"description","similarity":0.515090472968373},{"column":"frequency_months","similarity":0.49330482595376823},{"column":"estimated_cost","similarity":0.49293759341419907}],"emergency_contacts":[{"column":"is_primary","similarity":0.5039578758679507}],"project_milestones":[{"column":"is_billable","similarity":0.49776557203974603},{"column":"description","similarity":0.4804638717229941}],"benefit_types":[{"column":"is_active","similarity":0.494470742028722}],"business_units":[{"column":"is_active","similarity":0.4928108442926942}],"requisition_lines":[{"column":"quantity","similarity":0.4922188905326943}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.48865331705843196}],"project_resources":[{"column":"hourly_rate","similarity":0.4852972701989151}],"project_tasks":[{"column":"priority","similarity":0.4836687970545305}],"reorder_rules":[{"column":"max_quantity","similarity":0.4829698043754158}],"units_of_measure":[{"column":"abbreviation","similarity":0.4823545888550096}],"projects":[{"column":"priority","similarity":0.48215945015056816}],"employee_benefits":[{"column":"coverage_level","similarity":0.48183762318937706}],"inventory_levels":[{"column":"quantity_reserved","similarity":0.48177652205374843}],"vendor_contacts":[{"column":"is_primary","similarity":0.4800372811419217}]},"fused_scores":[{"table":"training_courses","fused":0.9379129022070096,"table_sim":0.7832587829851695,"col_score":1.1698940810397698},{"table":"employee_training","fused":0.7767290452670595,"table_sim":0.6570057454586046,"col_score":0.956313994979742},{"table":"certifications","fused":0.7033652402781134,"table_sim":0.5900939338505992,"col_score":0.8732721999193849},{"table":"employee_certifications","fused":0.6746819403171497,"table_sim":0.5760162077924663,"col_score":0.8226805391041746},{"table":"leave_types","fused":0.6076725071450502,"table_sim":0.49016105575765045,"col_score":0.7839396842261499},{"table":"maintenance_types","fused":0.591601277114123,"table_sim":0.49281971341629327,"col_score":0.7397736226608678},{"table":"purchase_requisitions","fused":0.5549533979140686,"table_sim":0.4654660756610647,"col_score":0.6891843812935744},{"table":"emergency_contacts","fused":0.48589649094228315,"table_sim":0.4738555676585048,"col_score":0.5039578758679507},{"table":"units_of_measure","fused":0.47457741409780707,"table_sim":0.46939263092633876,"col_score":0.4823545888550096},{"table":"business_units","fused":0.42141434941970024,"table_sim":0.47237885502957644,"col_score":0.3449675910048859},{"table":"account_types","fused":0.2836774563622058,"table_sim":0.47279576060367634,"col_score":0},{"table":"asset_maintenance","fused":0.2800436428547703,"table_sim":0.4667394047579505,"col_score":0},{"table":"employees","fused":0.27706206343376705,"table_sim":0.4617701057229451,"col_score":0},{"table":"positions","fused":0.27696251705077385,"table_sim":0.46160419508462314,"col_score":0},{"table":"countries","fused":0.2762753779828582,"table_sim":0.46045896330476366,"col_score":0}],"fk_expansion_candidates":7,"fk_expansion_added":2,"fk_expansion_blocked_count":5,"fk_expansion_blocked":[{"table":"departments","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":23,"total_retrieval_latency_ms":28,"sql_generated":"SELECT tc.name AS course_name, tc.duration_hours, tc.cost, tc.is_active FROM training_courses tc WHERE tc.is_mandatory = TRUE;","tables_used_in_sql":[],"explain_result":"success","rows_returned":4,"total_latency_ms":804}
{"timestamp":"2026-01-27T20:37:43.337Z","query_id":"f4d7d669-24f9-442c-89a3-352268d6fec5","question":"What are the different opportunity stages?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["opportunity_stages","sales_opportunities","project_phases","project_tasks","sales_quotes","positions","employment_history","vendor_contacts","task_assignments","benefit_types","projects","timesheet_entries"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"opportunity_stages","similarity":0.8221357699980866},{"table":"sales_opportunities","similarity":0.705452578214936},{"table":"project_phases","similarity":0.5910011427333453},{"table":"project_tasks","similarity":0.5856436723604402},{"table":"positions","similarity":0.5399052196547368},{"table":"asset_categories","similarity":0.5283525308586682},{"table":"benefit_types","similarity":0.5259100173290491},{"table":"project_milestones","similarity":0.5171558130474864},{"table":"inventory_levels","similarity":0.5163777584176084},{"table":"vendor_contacts","similarity":0.5161594726009905},{"table":"task_assignments","similarity":0.5159234125463281},{"table":"sales_quotes","similarity":0.5145326653191699},{"table":"timesheet_entries","similarity":0.5109343321958333},{"table":"employment_history","similarity":0.5109304894618054},{"table":"vendors","similarity":0.509941756909679}],"column_hits_per_table":{"opportunity_stages":6,"sales_opportunities":11,"project_phases":8,"sales_quotes":2,"project_tasks":4,"projects":3,"positions":1,"employment_history":1,"stock_transfers":1,"vendor_invoices":1,"vendor_contacts":1,"sales_orders":1,"performance_reviews":1,"purchase_requisitions":1,"task_assignments":1,"employee_training":1,"timesheets":1,"project_milestones":1,"journal_entries":1,"purchase_orders":1,"benefit_types":1,"warehouse_locations":1},"top_columns_per_table":{"opportunity_stages":[{"column":"name","similarity":0.8022669439071034},{"column":"sequence","similarity":0.7826323931295351},{"column":"probability","similarity":0.7818078987294276}],"sales_opportunities":[{"column":"stage_id","similarity":0.7199852660162092},{"column":"source","similarity":0.6694163213892567},{"column":"name","similarity":0.6490089853551896}],"project_phases":[{"column":"status","similarity":0.6164785012384887},{"column":"start_date","similarity":0.6071014985723452},{"column":"description","similarity":0.599519601414315}],"sales_quotes":[{"column":"opportunity_id","similarity":0.613132018194432},{"column":"status","similarity":0.5429687740505206}],"project_tasks":[{"column":"priority","similarity":0.5861525983204229},{"column":"phase_id","similarity":0.5727236988248975},{"column":"status","similarity":0.5679605460087266}],"projects":[{"column":"priority","similarity":0.5824136089158493},{"column":"status","similarity":0.5614455668233992},{"column":"start_date","similarity":0.5455112148719066}],"positions":[{"column":"title","similarity":0.570845518096384}],"employment_history":[{"column":"position","similarity":0.5638653453378809}],"stock_transfers":[{"column":"status","similarity":0.5612083430408489}],"vendor_invoices":[{"column":"status","similarity":0.5583699388667535}],"vendor_contacts":[{"column":"title","similarity":0.555419734524806}],"sales_orders":[{"column":"status","similarity":0.5534662786155742}],"performance_reviews":[{"column":"review_period_start","similarity":0.5523942655144478}],"purchase_requisitions":[{"column":"status","similarity":0.5523731471352765}],"task_assignments":[{"column":"role","similarity":0.5518232752608079}],"employee_training":[{"column":"status","similarity":0.5505061546622828}],"timesheets":[{"column":"status","similarity":0.5501145087173305}],"project_milestones":[{"column":"name","similarity":0.5480794501954276}],"journal_entries":[{"column":"status","similarity":0.5450907789109756}],"purchase_orders":[{"column":"status","similarity":0.5448321917989046}],"benefit_types":[{"column":"name","similarity":0.5417057889558006}],"warehouse_locations":[{"column":"aisle","similarity":0.541280937948999}]},"fused_scores":[{"table":"opportunity_stages","fused":0.9626959989965516,"table_sim":0.8221357699980866,"col_score":1.1735363424942489},{"table":"sales_opportunities","fused":0.8201333553810458,"table_sim":0.705452578214936,"col_score":0.9921545211302105},{"table":"project_phases","fused":0.7145727552551784,"table_sim":0.5910011427333453,"col_score":0.899930174037928},{"table":"project_tasks","fused":0.6963386277407597,"table_sim":0.5856436723604402,"col_score":0.8623810608112388},{"table":"sales_quotes","fused":0.5564121926530157,"table_sim":0.5145326653191699,"col_score":0.6192314836537846},{"table":"positions","fused":0.5522813390313956,"table_sim":0.5399052196547368,"col_score":0.570845518096384},{"table":"employment_history","fused":0.5321044318122357,"table_sim":0.5109304894618054,"col_score":0.5638653453378809},{"table":"vendor_contacts","fused":0.5318635773705167,"table_sim":0.5161594726009905,"col_score":0.555419734524806},{"table":"task_assignments","fused":0.53028335763212,"table_sim":0.5159234125463281,"col_score":0.5518232752608079},{"table":"benefit_types","fused":0.46722363130505357,"table_sim":0.5259100173290491,"col_score":0.3791940522690604},{"table":"project_milestones","fused":0.46375573388321156,"table_sim":0.5171558130474864,"col_score":0.3836556151367993},{"table":"projects","fused":0.34206768654072106,"table_sim":0,"col_score":0.8551692163518025},{"table":"asset_categories","fused":0.3170115185152009,"table_sim":0.5283525308586682,"col_score":0},{"table":"inventory_levels","fused":0.309826655050565,"table_sim":0.5163777584176084,"col_score":0},{"table":"timesheet_entries","fused":0.30656059931749996,"table_sim":0.5109343321958333,"col_score":0}],"fk_expansion_candidates":9,"fk_expansion_added":2,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"vendors","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":18,"total_retrieval_latency_ms":23,"sql_generated":"SELECT o.name AS stage_name FROM sales_opportunities s JOIN opportunity_stages o ON s.stage_id = o.stage_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":500,"total_latency_ms":648}
{"timestamp":"2026-01-27T20:37:43.986Z","query_id":"f1c704f9-5f86-4cd2-bc93-b9b89f6775eb","question":"List all countries in the system","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["countries","states_provinces","currencies","tax_rates","sales_regions","fiscal_periods","certifications","cities","opportunity_stages","bank_accounts","bank_transactions","chart_of_accounts"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"countries","similarity":0.7008865097920517},{"table":"states_provinces","similarity":0.6734638308582259},{"table":"tax_rates","similarity":0.6116670532927957},{"table":"sales_territories","similarity":0.5947794602061558},{"table":"currencies","similarity":0.5771716778997639},{"table":"sales_regions","similarity":0.5687569498363646},{"table":"cities","similarity":0.5643183199830137},{"table":"bank_accounts","similarity":0.5493286779600007},{"table":"customers","similarity":0.5473386397932745},{"table":"fiscal_periods","similarity":0.5354796670765565},{"table":"budgets","similarity":0.5305192103519173},{"table":"units_of_measure","similarity":0.530053961527814},{"table":"chart_of_accounts","similarity":0.5269687220084575},{"table":"certifications","similarity":0.5251628602461479},{"table":"opportunity_stages","similarity":0.516133383734989}],"column_hits_per_table":{"countries":4,"states_provinces":4,"tax_rates":3,"currencies":5,"sales_regions":4,"sales_territories":3,"cities":2,"departments":2,"fiscal_periods":4,"bank_accounts":2,"certifications":2,"opportunity_stages":3,"customers":1,"bank_transactions":2,"purchase_orders":1,"employee_certifications":1,"depreciation_schedules":1,"purchase_requisitions":1,"budgets":2,"sales_orders":1,"chart_of_accounts":1,"units_of_measure":1},"top_columns_per_table":{"countries":[{"column":"iso_code","similarity":0.7094552565742085},{"column":"country_id","similarity":0.7034508481088982},{"column":"phone_code","similarity":0.6971526730933061}],"states_provinces":[{"column":"country_id","similarity":0.6585897097894581},{"column":"abbreviation","similarity":0.6227531297693802},{"column":"state_id","similarity":0.615041526003746}],"tax_rates":[{"column":"country_id","similarity":0.6476800041509223},{"column":"tax_type","similarity":0.5346619654310693},{"column":"is_active","similarity":0.5310671397615585}],"currencies":[{"column":"symbol","similarity":0.6017932772414536},{"column":"code","similarity":0.5922775211340294},{"column":"exchange_rate","similarity":0.5871891787003841}],"sales_regions":[{"column":"region_id","similarity":0.5979708903249663},{"column":"target_revenue","similarity":0.5885873954148771},{"column":"name","similarity":0.5800101337735474}],"sales_territories":[{"column":"region_id","similarity":0.5886237086003984},{"column":"territory_id","similarity":0.5882437418814783},{"column":"name","similarity":0.5535958855949109}],"cities":[{"column":"state_id","similarity":0.5632563689816771},{"column":"postal_code","similarity":0.5457995889050259}],"departments":[{"column":"budget","similarity":0.5599421293881339},{"column":"department_id","similarity":0.5287387143275804}],"fiscal_periods":[{"column":"period_id","similarity":0.5574490774711056},{"column":"period_number","similarity":0.5426208530973385},{"column":"is_closed","similarity":0.5359946713020163}],"bank_accounts":[{"column":"currency_id","similarity":0.5528259934931027},{"column":"account_number","similarity":0.527840068757793}],"certifications":[{"column":"issuing_body","similarity":0.5492583443931628},{"column":"validity_years","similarity":0.5292809185879692}],"opportunity_stages":[{"column":"is_won","similarity":0.5445577792640248},{"column":"stage_id","similarity":0.5312529758785186},{"column":"is_closed","similarity":0.5279107666014274}],"customers":[{"column":"currency_id","similarity":0.5418522210198313}],"bank_transactions":[{"column":"reconciled","similarity":0.5412872186561721},{"column":"reference","similarity":0.5335321048989391}],"purchase_orders":[{"column":"total","similarity":0.5378236017835311}],"employee_certifications":[{"column":"certificate_number","similarity":0.5358775279065638}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5330783009686003}],"purchase_requisitions":[{"column":"requisition_number","similarity":0.5326439676865584}],"budgets":[{"column":"total_amount","similarity":0.5320906832758429},{"column":"status","similarity":0.5283826109384306}],"sales_orders":[{"column":"total","similarity":0.5319665810732878}],"chart_of_accounts":[{"column":"account_number","similarity":0.5295972929492838}],"units_of_measure":[{"column":"abbreviation","similarity":0.5291537257765798}]},"fused_scores":[{"table":"countries","fused":0.8437445431235756,"table_sim":0.7008865097920517,"col_score":1.0580315931208615},{"table":"states_provinces","fused":0.7453821097932118,"table_sim":0.6734638308582259,"col_score":0.8532595281956905},{"table":"currencies","fused":0.7054758218632456,"table_sim":0.5771716778997639,"col_score":0.8979320378084683},{"table":"tax_rates","fused":0.6715402187292342,"table_sim":0.6116670532927957,"col_score":0.761349966883892},{"table":"sales_regions","fused":0.6604050527132649,"table_sim":0.5687569498363646,"col_score":0.7978772070286153},{"table":"fiscal_periods","fused":0.6455350757452726,"table_sim":0.5354796670765565,"col_score":0.8106181887483467},{"table":"certifications","fused":0.6406572376225477,"table_sim":0.5251628602461479,"col_score":0.8138988036871474},{"table":"cities","fused":0.6357667192092533,"table_sim":0.5643183199830137,"col_score":0.7429393180486128},{"table":"opportunity_stages","fused":0.6330852952668888,"table_sim":0.516133383734989,"col_score":0.8085131625647386},{"table":"bank_accounts","fused":0.618128873368152,"table_sim":0.5493286779600007,"col_score":0.7213291664803789},{"table":"budgets","fused":0.6051213650528678,"table_sim":0.5305192103519173,"col_score":0.7170245971042936},{"table":"sales_territories","fused":0.6040364383952119,"table_sim":0.5947794602061558,"col_score":0.6179219056787962},{"table":"units_of_measure","fused":0.5296938672273204,"table_sim":0.530053961527814,"col_score":0.5291537257765798},{"table":"chart_of_accounts","fused":0.528020150384788,"table_sim":0.5269687220084575,"col_score":0.5295972929492838},{"table":"customers","fused":0.4801218057615174,"table_sim":0.5473386397932745,"col_score":0.3792965547138819}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":8,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"customers","reason":"max_tables"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"max_tables"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_territories","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":55,"total_retrieval_latency_ms":61,"sql_generated":"SELECT c.name AS country_name FROM countries c;","tables_used_in_sql":[],"explain_result":"success","rows_returned":10,"total_latency_ms":377}
{"timestamp":"2026-01-27T20:37:44.363Z","query_id":"d68a1e64-d00d-424a-80d4-8bc33d28ee27","question":"How many departments are there?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["departments","inventory_levels","warehouse_locations","employees","asset_categories","states_provinces","sales_territories","business_units","sales_regions","goods_receipts","cost_centers","budgets"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"departments","similarity":0.6407681888721862},{"table":"positions","similarity":0.5909863911053447},{"table":"cost_centers","similarity":0.574249226454042},{"table":"inventory_levels","similarity":0.5635818909554858},{"table":"budgets","similarity":0.5602507290061229},{"table":"sales_territories","similarity":0.5569437466660422},{"table":"employees","similarity":0.5540635075766074},{"table":"asset_categories","similarity":0.5524861703308546},{"table":"sales_regions","similarity":0.5484119711938432},{"table":"business_units","similarity":0.5474055608256236},{"table":"warehouse_locations","similarity":0.5405733104094866},{"table":"warehouses","similarity":0.5397302827647444},{"table":"receipt_lines","similarity":0.5366200658119428},{"table":"states_provinces","similarity":0.5358430398633552},{"table":"goods_receipts","similarity":0.5302924907564094}],"column_hits_per_table":{"departments":6,"positions":1,"budgets":1,"purchase_requisitions":1,"cost_centers":1,"employees":3,"warehouse_locations":5,"inventory_levels":5,"business_units":2,"sales_orders":1,"countries":2,"receipt_lines":1,"sales_territories":2,"states_provinces":2,"asset_categories":4,"employee_certifications":1,"goods_receipts":1,"inventory_transactions":1,"product_categories":2,"asset_locations":1,"sales_regions":2,"journal_entries":1,"warehouses":1,"chart_of_accounts":1,"account_types":1,"fixed_assets":1},"top_columns_per_table":{"departments":[{"column":"name","similarity":0.6941972522780406},{"column":"department_id","similarity":0.6602069080482118},{"column":"budget","similarity":0.6469841378823648}],"positions":[{"column":"department_id","similarity":0.6231663015950821}],"budgets":[{"column":"department_id","similarity":0.593281818376156}],"purchase_requisitions":[{"column":"department_id","similarity":0.5925097694857517}],"cost_centers":[{"column":"department_id","similarity":0.5899520016540825}],"employees":[{"column":"department_id","similarity":0.5869672961244217},{"column":"employee_number","similarity":0.5336637347597826},{"column":"phone","similarity":0.5302169880417581}],"warehouse_locations":[{"column":"capacity","similarity":0.5585006436523671},{"column":"aisle","similarity":0.5402403475702542},{"column":"bin","similarity":0.5395965062528575}],"inventory_levels":[{"column":"quantity_available","similarity":0.5536773605505522},{"column":"location_id","similarity":0.5478183684084642},{"column":"warehouse_id","similarity":0.5386657375761456}],"business_units":[{"column":"is_active","similarity":0.5483697953425726},{"column":"name","similarity":0.5312957563157671}],"sales_orders":[{"column":"order_number","similarity":0.5443598297457732}],"countries":[{"column":"name","similarity":0.5423505833277624},{"column":"iso_code","similarity":0.5306770884511268}],"receipt_lines":[{"column":"location_id","similarity":0.541901303657067}],"sales_territories":[{"column":"territory_id","similarity":0.5409487686207964},{"column":"name","similarity":0.5343562590819858}],"states_provinces":[{"column":"abbreviation","similarity":0.5407121012597066},{"column":"name","similarity":0.531882867182094}],"asset_categories":[{"column":"category_id","similarity":0.5392003897260558},{"column":"depreciation_method","similarity":0.5319818505729739},{"column":"name","similarity":0.5291238140761095}],"employee_certifications":[{"column":"certificate_number","similarity":0.5373080593402337}],"goods_receipts":[{"column":"receipt_number","similarity":0.5364792634452933}],"inventory_transactions":[{"column":"location_id","similarity":0.5361046916920993}],"product_categories":[{"column":"is_active","similarity":0.5347372390015604},{"column":"category_id","similarity":0.5276640423111497}],"asset_locations":[{"column":"room","similarity":0.5344524415418452}],"sales_regions":[{"column":"manager_id","similarity":0.5307027431815718},{"column":"name","similarity":0.5263871057906565}],"journal_entries":[{"column":"entry_number","similarity":0.5287182520724618}],"warehouses":[{"column":"is_active","similarity":0.5286972556869094}],"chart_of_accounts":[{"column":"account_number","similarity":0.5279529362943834}],"account_types":[{"column":"category","similarity":0.526499449669073}],"fixed_assets":[{"column":"category_id","similarity":0.5261865346648418}]},"fused_scores":[{"table":"departments","fused":0.7404421837951833,"table_sim":0.6407681888721862,"col_score":0.889953176179679},{"table":"inventory_levels","fused":0.6669469201400264,"table_sim":0.5635818909554858,"col_score":0.8219944639168373},{"table":"warehouse_locations","fused":0.6557923132206898,"table_sim":0.5405733104094866,"col_score":0.8286208174374942},{"table":"employees","fused":0.651946996058229,"table_sim":0.5540635075766074,"col_score":0.7987722287806616},{"table":"asset_categories","fused":0.6495296324944673,"table_sim":0.5524861703308546,"col_score":0.7950948257398862},{"table":"states_provinces","fused":0.612254265827389,"table_sim":0.5358430398633552,"col_score":0.7268711047734395},{"table":"sales_territories","fused":0.5604417794849264,"table_sim":0.5569437466660422,"col_score":0.5656888287132525},{"table":"business_units","fused":0.5563682850755018,"table_sim":0.5474055608256236,"col_score":0.5698123714503193},{"table":"sales_regions","fused":0.5513381456178379,"table_sim":0.5484119711938432,"col_score":0.5557274072538301},{"table":"goods_receipts","fused":0.532767199831963,"table_sim":0.5302924907564094,"col_score":0.5364792634452933},{"table":"positions","fused":0.5290783991098298,"table_sim":0.5909863911053447,"col_score":0.43621641111655746},{"table":"cost_centers","fused":0.5097360963355683,"table_sim":0.574249226454042,"col_score":0.4129664011578577},{"table":"budgets","fused":0.5022693465489974,"table_sim":0.5602507290061229,"col_score":0.4152972728633092},{"table":"receipt_lines","fused":0.4737044045111444,"table_sim":0.5366200658119428,"col_score":0.3793309125599469},{"table":"warehouses","fused":0.47187340125118127,"table_sim":0.5397302827647444,"col_score":0.37008807898083657}],"fk_expansion_candidates":36,"fk_expansion_added":2,"fk_expansion_blocked_count":28,"fk_expansion_blocked":[{"table":"employment_history","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"warehouses","reason":"max_tables"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"countries","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"max_tables"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"cities","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"receipt_lines","reason":"max_tables"},{"table":"products","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":17,"total_retrieval_latency_ms":23,"sql_generated":"SELECT COUNT(*) FROM departments;","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":322}
{"timestamp":"2026-01-27T20:37:44.685Z","query_id":"b43d674f-4919-49eb-b979-62e9e222ea23","question":"List all units of measure","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["units_of_measure","products","requisition_lines","currencies","sales_orders","adjustment_lines","business_units","sales_regions","asset_categories","states_provinces","countries","inventory_adjustments"],"tables_from_table_retrieval":15,"tables_from_column_only":13,"tables_from_fk_expansion":2,"table_scores":[{"table":"units_of_measure","similarity":0.8089934324181249},{"table":"products","similarity":0.6263866411837252},{"table":"business_units","similarity":0.6082946070315649},{"table":"currencies","similarity":0.5785280842826401},{"table":"sales_regions","similarity":0.5709271404332362},{"table":"sales_territories","similarity":0.5693966691739235},{"table":"countries","similarity":0.5676275319870521},{"table":"asset_categories","similarity":0.5659467183764512},{"table":"states_provinces","similarity":0.5592331745887797},{"table":"requisition_lines","similarity":0.5583095777203371},{"table":"certifications","similarity":0.5559645378048772},{"table":"tax_rates","similarity":0.5510295392649189},{"table":"adjustment_lines","similarity":0.5399153135407744},{"table":"sales_orders","similarity":0.5334992405089671},{"table":"inventory_adjustments","similarity":0.5331747868814581}],"column_hits_per_table":{"units_of_measure":5,"products":3,"business_units":5,"requisition_lines":3,"purchase_orders":3,"sales_orders":3,"currencies":3,"product_suppliers":1,"departments":1,"vendor_invoice_lines":1,"sales_regions":1,"inventory_transactions":1,"order_lines":3,"po_lines":1,"quote_lines":3,"adjustment_lines":3,"inventory_levels":3,"asset_categories":1,"tax_rates":1,"budgets":1,"sales_quotes":1,"transfer_lines":1,"project_milestones":1,"states_provinces":1},"top_columns_per_table":{"units_of_measure":[{"column":"abbreviation","similarity":0.7908596870464625},{"column":"conversion_factor","similarity":0.7888286633130566},{"column":"base_uom_id","similarity":0.7640196738182461}],"products":[{"column":"uom_id","similarity":0.7066301376353167},{"column":"unit_cost","similarity":0.645047938032986},{"column":"weight","similarity":0.5991041081015385}],"business_units":[{"column":"unit_id","similarity":0.641535708551069},{"column":"name","similarity":0.619264219383008},{"column":"parent_unit_id","similarity":0.6183248611809289}],"requisition_lines":[{"column":"estimated_unit_cost","similarity":0.6408702119064383},{"column":"quantity","similarity":0.60563150403585},{"column":"estimated_total","similarity":0.6022013259478313}],"purchase_orders":[{"column":"total","similarity":0.6185750233926293},{"column":"tax_amount","similarity":0.6044881564028687},{"column":"subtotal","similarity":0.5921825679677115}],"sales_orders":[{"column":"total","similarity":0.6151081698617773},{"column":"tax_amount","similarity":0.5989576895110381},{"column":"subtotal","similarity":0.5899469028603763}],"currencies":[{"column":"exchange_rate","similarity":0.6121012209509241},{"column":"code","similarity":0.5831850755185266},{"column":"symbol","similarity":0.5817000993637726}],"product_suppliers":[{"column":"unit_cost","similarity":0.6086576309378499}],"departments":[{"column":"budget","similarity":0.6073768063072543}],"vendor_invoice_lines":[{"column":"unit_cost","similarity":0.6069149029756971}],"sales_regions":[{"column":"target_revenue","similarity":0.6030903855357957}],"inventory_transactions":[{"column":"quantity","similarity":0.6014447625236534}],"order_lines":[{"column":"unit_price","similarity":0.6010852874698508},{"column":"line_total","similarity":0.5898125509820846},{"column":"quantity","similarity":0.5808820575005385}],"po_lines":[{"column":"unit_cost","similarity":0.5994543665297027}],"quote_lines":[{"column":"unit_price","similarity":0.5969998512857845},{"column":"quantity","similarity":0.5845299298536462},{"column":"line_total","similarity":0.5817307536871642}],"adjustment_lines":[{"column":"quantity_before","similarity":0.59599905061019},{"column":"quantity_change","similarity":0.5898155994713205},{"column":"quantity_after","similarity":0.5894162707009223}],"inventory_levels":[{"column":"quantity_available","similarity":0.5953692846871987},{"column":"quantity_reserved","similarity":0.5953692437147827},{"column":"quantity_on_hand","similarity":0.5833133095093345}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.5917112785912468}],"tax_rates":[{"column":"rate","similarity":0.5877911896124333}],"budgets":[{"column":"total_amount","similarity":0.5860142614107526}],"sales_quotes":[{"column":"total","similarity":0.5855133877859668}],"transfer_lines":[{"column":"quantity_transferred","similarity":0.5854636892263618}],"project_milestones":[{"column":"amount","similarity":0.5846729861578354}],"states_provinces":[{"column":"abbreviation","similarity":0.5831025103571312}]},"fused_scores":[{"table":"units_of_measure","fused":0.9595056669320713,"table_sim":0.8089934324181249,"col_score":1.1852740187029909},{"table":"products","fused":0.7536719815437372,"table_sim":0.6263866411837252,"col_score":0.9445999920837552},{"table":"requisition_lines","fused":0.7124601322019475,"table_sim":0.5583095777203371,"col_score":0.9436859639243633},{"table":"currencies","fused":0.708594354053659,"table_sim":0.5785280842826401,"col_score":0.9036937587101874},{"table":"sales_orders","fused":0.6859343501522988,"table_sim":0.5334992405089671,"col_score":0.9145870146172963},{"table":"adjustment_lines","fused":0.6803119282628047,"table_sim":0.5399153135407744,"col_score":0.8909068503458502},{"table":"business_units","fused":0.6313037533268594,"table_sim":0.6082946070315649,"col_score":0.6658174727698011},{"table":"sales_regions","fused":0.5837924384742601,"table_sim":0.5709271404332362,"col_score":0.6030903855357957},{"table":"asset_categories","fused":0.5762525424623695,"table_sim":0.5659467183764512,"col_score":0.5917112785912468},{"table":"states_provinces","fused":0.5687809088961203,"table_sim":0.5592331745887797,"col_score":0.5831025103571312},{"table":"tax_rates","fused":0.5657341994039247,"table_sim":0.5510295392649189,"col_score":0.5877911896124333},{"table":"purchase_orders","fused":0.36832764063762546,"table_sim":0,"col_score":0.9208191015940637},{"table":"order_lines","fused":0.3583966251843573,"table_sim":0,"col_score":0.8959915629608931},{"table":"inventory_levels","fused":0.3572215626178361,"table_sim":0,"col_score":0.8930539065445902},{"table":"quote_lines","fused":0.35570592648504307,"table_sim":0,"col_score":0.8892648162126076}],"fk_expansion_candidates":23,"fk_expansion_added":2,"fk_expansion_blocked_count":16,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"bank_accounts","reason":"no_evidence"},{"table":"cities","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"inventory_levels","reason":"max_tables"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"order_lines","reason":"max_tables"},{"table":"po_lines","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"product_suppliers","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"quote_lines","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_territories","reason":"max_tables"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":50,"total_retrieval_latency_ms":55,"sql_generated":"SELECT uom.name AS unit_of_measure_name FROM units_of_measure uom;","tables_used_in_sql":[],"explain_result":"success","rows_returned":11,"total_latency_ms":482}
{"timestamp":"2026-01-27T20:37:45.167Z","query_id":"73660f9e-80a4-4ed3-b279-06b29d8d1409","question":"What fiscal years exist in the system?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["fiscal_years","fiscal_periods","budgets","depreciation_schedules","depreciation_entries","budget_lines","project_budgets","project_expenses","departments","project_milestones","journal_entries","projects"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"fiscal_years","similarity":0.7923960498118316},{"table":"fiscal_periods","similarity":0.7616670856526071},{"table":"budgets","similarity":0.6911637589323553},{"table":"journal_entries","similarity":0.6269724979465695},{"table":"budget_lines","similarity":0.6218203134963756},{"table":"depreciation_entries","similarity":0.6167782937248956},{"table":"depreciation_schedules","similarity":0.5985836737050324},{"table":"tax_rates","similarity":0.5716127675571235},{"table":"project_budgets","similarity":0.5656182034505703},{"table":"departments","similarity":0.5523947282192829},{"table":"opportunity_stages","similarity":0.5504537485994739},{"table":"sales_regions","similarity":0.5448968436545046},{"table":"project_expenses","similarity":0.5436618291443818},{"table":"project_milestones","similarity":0.5414688649545092},{"table":"timesheet_entries","similarity":0.5409769768138163}],"column_hits_per_table":{"fiscal_years":5,"fiscal_periods":7,"budgets":7,"budget_lines":3,"depreciation_entries":3,"journal_entries":1,"depreciation_schedules":7,"departments":1,"project_expenses":2,"project_budgets":5,"tax_rates":1,"goods_receipts":1,"projects":1,"project_milestones":1,"timesheet_entries":1,"certifications":1,"performance_reviews":1,"asset_categories":1,"opportunity_stages":1},"top_columns_per_table":{"fiscal_years":[{"column":"year","similarity":0.79289185497887},{"column":"start_date","similarity":0.7915481870907012},{"column":"is_closed","similarity":0.7687751840462032}],"fiscal_periods":[{"column":"start_date","similarity":0.7659921609127918},{"column":"period_number","similarity":0.7503599279176923},{"column":"fiscal_year_id","similarity":0.7427677986256532}],"budgets":[{"column":"fiscal_year_id","similarity":0.7119377164190824},{"column":"status","similarity":0.6301145472980343},{"column":"total_amount","similarity":0.6173246359192148}],"budget_lines":[{"column":"period_id","similarity":0.6801393090386698},{"column":"amount","similarity":0.5964392433040447},{"column":"budget_id","similarity":0.5771887798868078}],"depreciation_entries":[{"column":"period_id","similarity":0.6644590594465214},{"column":"entry_date","similarity":0.6182044744233723},{"column":"accumulated_depreciation","similarity":0.591719344216716}],"journal_entries":[{"column":"period_id","similarity":0.6584803744495903}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.6374273471660927},{"column":"start_date","similarity":0.6327992496100886},{"column":"useful_life_months","similarity":0.6309634564637141}],"departments":[{"column":"budget","similarity":0.6251109583075001}],"project_expenses":[{"column":"expense_date","similarity":0.6152948115721372},{"column":"is_billable","similarity":0.6022943783818646}],"project_budgets":[{"column":"category","similarity":0.6108356164669405},{"column":"actual_amount","similarity":0.604739033656996},{"column":"planned_amount","similarity":0.5906958847025185}],"tax_rates":[{"column":"is_active","similarity":0.6102719456894563}],"goods_receipts":[{"column":"receipt_date","similarity":0.6033126792490972}],"projects":[{"column":"budget","similarity":0.5988151518250451}],"project_milestones":[{"column":"is_billable","similarity":0.5985840177634407}],"timesheet_entries":[{"column":"is_billable","similarity":0.5976425797634352}],"certifications":[{"column":"validity_years","similarity":0.5951280377775735}],"performance_reviews":[{"column":"review_period_start","similarity":0.5797933929886745}],"asset_categories":[{"column":"useful_life_years","similarity":0.5756856657958654}],"opportunity_stages":[{"column":"is_closed","similarity":0.5741087121255803}]},"fused_scores":[{"table":"fiscal_years","fused":0.9509040092967873,"table_sim":0.7923960498118316,"col_score":1.1886659485242206},{"table":"fiscal_periods","fused":0.9134691013402194,"table_sim":0.7616670856526071,"col_score":1.141172124871638},{"table":"budgets","fused":0.7612993900257706,"table_sim":0.6911637589323553,"col_score":0.8665028366658937},{"table":"depreciation_schedules","fused":0.7406809930114742,"table_sim":0.5985836737050324,"col_score":0.953826971971137},{"table":"depreciation_entries","fused":0.7356926348476295,"table_sim":0.6167782937248956,"col_score":0.9140641465317303},{"table":"budget_lines","fused":0.706887388684857,"table_sim":0.6218203134963756,"col_score":0.8344880014675792},{"table":"project_budgets","fused":0.7046529753885176,"table_sim":0.5656182034505703,"col_score":0.9132051332954385},{"table":"project_expenses","fused":0.6927738977918569,"table_sim":0.5436618291443818,"col_score":0.9164420007630695},{"table":"departments","fused":0.5814812202545698,"table_sim":0.5523947282192829,"col_score":0.6251109583075001},{"table":"project_milestones","fused":0.5643149260780818,"table_sim":0.5414688649545092,"col_score":0.5985840177634407},{"table":"timesheet_entries","fused":0.5636432179936639,"table_sim":0.5409769768138163,"col_score":0.5976425797634352},{"table":"journal_entries","fused":0.560558003613827,"table_sim":0.6269724979465695,"col_score":0.46093626211471317},{"table":"opportunity_stages","fused":0.5599157340099165,"table_sim":0.5504537485994739,"col_score":0.5741087121255803},{"table":"tax_rates","fused":0.5138438053273219,"table_sim":0.5716127675571235,"col_score":0.4271903619826194},{"table":"sales_regions","fused":0.32693810619270275,"table_sim":0.5448968436545046,"col_score":0}],"fk_expansion_candidates":8,"fk_expansion_added":2,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":19,"total_retrieval_latency_ms":25,"sql_generated":"SELECT DISTINCT fiscal_years.fiscal_year FROM fiscal_years;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column fiscal_years.fiscal_year does not exist","total_latency_ms":1160,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column fiscal_years.fiscal_year does not exist"}
{"timestamp":"2026-01-27T20:37:46.327Z","query_id":"2e1f7c36-629a-4817-a6d4-acf47495c865","question":"What are the different asset categories?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["asset_categories","fixed_assets","asset_locations","account_types","asset_transfers","asset_maintenance","benefit_types","product_categories","depreciation_entries","products","chart_of_accounts","depreciation_schedules"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"asset_categories","similarity":0.8168827711422647},{"table":"fixed_assets","similarity":0.6620037919617541},{"table":"asset_locations","similarity":0.6390829860060242},{"table":"account_types","similarity":0.6334397842726383},{"table":"product_categories","similarity":0.622177487707741},{"table":"asset_maintenance","similarity":0.621270551657517},{"table":"benefit_types","similarity":0.5903668937249158},{"table":"asset_transfers","similarity":0.5862689042988987},{"table":"depreciation_entries","similarity":0.5805433634197894},{"table":"products","similarity":0.5538274728539676},{"table":"depreciation_schedules","similarity":0.552160929389354},{"table":"chart_of_accounts","similarity":0.5427108945847197},{"table":"bank_accounts","similarity":0.5321134297281863},{"table":"countries","similarity":0.5281213098174355},{"table":"maintenance_types","similarity":0.5272099691279456}],"column_hits_per_table":{"asset_categories":5,"fixed_assets":9,"account_types":4,"asset_locations":6,"product_categories":5,"asset_transfers":6,"asset_maintenance":6,"project_budgets":1,"project_expenses":1,"depreciation_entries":1,"benefit_types":4,"products":1,"inventory_transactions":1},"top_columns_per_table":{"asset_categories":[{"column":"name","similarity":0.7875780707525062},{"column":"depreciation_method","similarity":0.7603448714847105},{"column":"category_id","similarity":0.758482100045761}],"fixed_assets":[{"column":"category_id","similarity":0.7014273982200495},{"column":"asset_tag","similarity":0.6626698663454819},{"column":"asset_id","similarity":0.6413881206539997}],"account_types":[{"column":"category","similarity":0.6881378304861365},{"column":"name","similarity":0.5992168172839945},{"column":"normal_balance","similarity":0.5947116865094776}],"asset_locations":[{"column":"building","similarity":0.6559618510281601},{"column":"description","similarity":0.6470926594735155},{"column":"floor","similarity":0.6470899039825275}],"product_categories":[{"column":"name","similarity":0.652576873610378},{"column":"description","similarity":0.6503788706671084},{"column":"category_id","similarity":0.6420597581466748}],"asset_transfers":[{"column":"reason","similarity":0.6473230015974661},{"column":"asset_id","similarity":0.6282032799433002},{"column":"transfer_id","similarity":0.6154246196195988}],"asset_maintenance":[{"column":"status","similarity":0.6334546005541394},{"column":"asset_id","similarity":0.6105732245848465},{"column":"maintenance_type_id","similarity":0.6070052571550042}],"project_budgets":[{"column":"category","similarity":0.6288554954539255}],"project_expenses":[{"column":"category","similarity":0.626992700689606}],"depreciation_entries":[{"column":"asset_id","similarity":0.6187898293393472}],"benefit_types":[{"column":"name","similarity":0.5974204688811928},{"column":"is_active","similarity":0.5896744133334022},{"column":"description","similarity":0.5883422456276791}],"products":[{"column":"category_id","similarity":0.5858403992443696}],"inventory_transactions":[{"column":"transaction_type","similarity":0.5816690816812632}]},"fused_scores":[{"table":"asset_categories","fused":0.9416071891617808,"table_sim":0.8168827711422647,"col_score":1.1286938161910547},{"table":"fixed_assets","fused":0.7846998038830493,"table_sim":0.6620037919617541,"col_score":0.9687438217649922},{"table":"asset_locations","fused":0.7752525128113841,"table_sim":0.6390829860060242,"col_score":0.9795068030194238},{"table":"account_types","fused":0.7742613400599331,"table_sim":0.6334397842726383,"col_score":0.9854936737408753},{"table":"asset_transfers","fused":0.7270812848332002,"table_sim":0.5862689042988987,"col_score":0.9382998556346527},{"table":"asset_maintenance","fused":0.6976709678451112,"table_sim":0.621270551657517,"col_score":0.8122715921265024},{"table":"benefit_types","fused":0.6707121036646139,"table_sim":0.5903668937249158,"col_score":0.7912299185741609},{"table":"product_categories","fused":0.6470810591289455,"table_sim":0.622177487707741,"col_score":0.6844364162607525},{"table":"depreciation_entries","fused":0.5215871702668908,"table_sim":0.5805433634197894,"col_score":0.43315288053754303},{"table":"products","fused":0.4963317955008041,"table_sim":0.5538274728539676,"col_score":0.4100882794710587},{"table":"depreciation_schedules","fused":0.3312965576336124,"table_sim":0.552160929389354,"col_score":0},{"table":"chart_of_accounts","fused":0.3256265367508318,"table_sim":0.5427108945847197,"col_score":0},{"table":"bank_accounts","fused":0.31926805783691176,"table_sim":0.5321134297281863,"col_score":0},{"table":"countries","fused":0.3168727858904613,"table_sim":0.5281213098174355,"col_score":0},{"table":"maintenance_types","fused":0.3163259814767673,"table_sim":0.5272099691279456,"col_score":0}],"fk_expansion_candidates":21,"fk_expansion_added":2,"fk_expansion_blocked_count":17,"fk_expansion_blocked":[{"table":"adjustment_lines","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"inventory_transactions","reason":"max_tables"},{"table":"journal_entries","reason":"no_evidence"},{"table":"maintenance_types","reason":"max_tables"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"product_suppliers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":22,"total_retrieval_latency_ms":27,"sql_generated":"SELECT DISTINCT ac.name AS AssetCategory FROM asset_categories ac;","tables_used_in_sql":[],"explain_result":"success","rows_returned":7,"total_latency_ms":460}
{"timestamp":"2026-01-27T20:47:37.994Z","query_id":"55548467-2d42-47e6-be11-51c9f6b70053","question":"List all employees in the Sales department","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employees","departments","employee_salaries","employee_certifications","goods_receipts","positions","sales_regions","business_units","budgets","sales_territories","employment_history","employee_training"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"departments","similarity":0.7018819264422769},{"table":"employees","similarity":0.6963141569337209},{"table":"positions","similarity":0.6581594168559208},{"table":"employee_salaries","similarity":0.639257259916862},{"table":"sales_regions","similarity":0.6312030956746659},{"table":"business_units","similarity":0.6239684491575331},{"table":"employee_certifications","similarity":0.6229972990181882},{"table":"budgets","similarity":0.617459472791645},{"table":"sales_territories","similarity":0.6102039592511826},{"table":"employment_history","similarity":0.6101413897607149},{"table":"purchase_requisitions","similarity":0.6097607241658892},{"table":"employee_benefits","similarity":0.6082385664329927},{"table":"employee_training","similarity":0.6047853289798245},{"table":"goods_receipts","similarity":0.6024016522018802},{"table":"emergency_contacts","similarity":0.6009863587594317}],"column_hits_per_table":{"employees":16,"departments":6,"positions":1,"employee_certifications":2,"goods_receipts":1,"business_units":1,"sales_territories":1,"sales_orders":1,"budgets":1,"sales_regions":1,"asset_maintenance":1,"employee_salaries":2,"project_expenses":2,"employee_benefits":1,"purchase_requisitions":1,"sales_opportunities":1,"task_assignments":1,"emergency_contacts":1,"timesheets":1,"employment_history":1,"employee_training":1,"cost_centers":1,"asset_transfers":2,"project_resources":1,"warehouses":1,"performance_reviews":1},"top_columns_per_table":{"employees":[{"column":"department_id","similarity":0.7438378780959836},{"column":"is_active","similarity":0.6898514430157328},{"column":"phone","similarity":0.6884781654193587}],"departments":[{"column":"manager_id","similarity":0.7148098723176987},{"column":"department_id","similarity":0.6802234045695587},{"column":"budget","similarity":0.6768568604597922}],"positions":[{"column":"department_id","similarity":0.6885987208242758}],"employee_certifications":[{"column":"employee_id","similarity":0.6617681978427804},{"column":"certification_id","similarity":0.6311135283463721}],"goods_receipts":[{"column":"received_by","similarity":0.6583117635667177}],"business_units":[{"column":"manager_id","similarity":0.6545196306469504}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6512458142884996}],"sales_orders":[{"column":"sales_rep_id","similarity":0.6499960316755506}],"budgets":[{"column":"department_id","similarity":0.6460822382776508}],"sales_regions":[{"column":"manager_id","similarity":0.6439326618471962}],"asset_maintenance":[{"column":"performed_by","similarity":0.6437090997046176}],"employee_salaries":[{"column":"employee_id","similarity":0.6423794415726771},{"column":"approved_by","similarity":0.6339811095593604}],"project_expenses":[{"column":"employee_id","similarity":0.641830403107342},{"column":"approved_by","similarity":0.6256513564368459}],"employee_benefits":[{"column":"employee_id","similarity":0.641816911740203}],"purchase_requisitions":[{"column":"department_id","similarity":0.6412971471190316}],"sales_opportunities":[{"column":"owner_id","similarity":0.6380140640371665}],"task_assignments":[{"column":"employee_id","similarity":0.6368520287345143}],"emergency_contacts":[{"column":"employee_id","similarity":0.6359115695387068}],"timesheets":[{"column":"employee_id","similarity":0.6333688009401329}],"employment_history":[{"column":"employee_id","similarity":0.6321379482184605}],"employee_training":[{"column":"employee_id","similarity":0.6321176608254997}],"cost_centers":[{"column":"department_id","similarity":0.6314138263804895}],"asset_transfers":[{"column":"to_employee_id","similarity":0.6311987237616232},{"column":"transferred_by","similarity":0.6249766402000394}],"project_resources":[{"column":"employee_id","similarity":0.6300298241419464}],"warehouses":[{"column":"manager_id","similarity":0.6284950025854869}],"performance_reviews":[{"column":"employee_id","similarity":0.6283937123860818}]},"fused_scores":[{"table":"employees","fused":0.8298251093085066,"table_sim":0.6963141569337209,"col_score":1.0300915378706852},{"table":"departments","fused":0.7919452821737608,"table_sim":0.7018819264422769,"col_score":0.9270403157709868},{"table":"employee_salaries","fused":0.7270799215940361,"table_sim":0.639257259916862,"col_score":0.8588139141097973},{"table":"employee_certifications","fused":0.6474493687753835,"table_sim":0.6229972990181882,"col_score":0.6841274734111765},{"table":"goods_receipts","fused":0.6247656967478152,"table_sim":0.6024016522018802,"col_score":0.6583117635667177},{"table":"positions","fused":0.5877032919443497,"table_sim":0.6581594168559208,"col_score":0.482019104576993},{"table":"sales_regions","fused":0.5590230027220144,"table_sim":0.6312030956746659,"col_score":0.4507528632930373},{"table":"business_units","fused":0.557646566075666,"table_sim":0.6239684491575331,"col_score":0.45816374145286526},{"table":"budgets","fused":0.5513787103927292,"table_sim":0.617459472791645,"col_score":0.4522575667943555},{"table":"sales_territories","fused":0.5484712035514895,"table_sim":0.6102039592511826,"col_score":0.4558720700019497},{"table":"purchase_requisitions","fused":0.5454196356928624,"table_sim":0.6097607241658892,"col_score":0.4489080029833221},{"table":"employee_benefits","fused":0.5446518751470524,"table_sim":0.6082385664329927,"col_score":0.4492718382181421},{"table":"employment_history","fused":0.5430834593575978,"table_sim":0.6101413897607149,"col_score":0.4424965637529223},{"table":"employee_training","fused":0.5398641424190346,"table_sim":0.6047853289798245,"col_score":0.44248236257784973},{"table":"emergency_contacts","fused":0.538647054726497,"table_sim":0.6009863587594317,"col_score":0.4451380986770947}],"fk_expansion_candidates":31,"fk_expansion_added":2,"fk_expansion_blocked_count":23,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"project_expenses","reason":"max_tables"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"emergency_contacts","reason":"max_tables"},{"table":"asset_transfers","reason":"max_tables"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":938,"total_retrieval_latency_ms":960,"sql_generated":"SELECT e.employee_id, e.first_name || ' ' || e.last_name AS employee_full_name FROM employees e JOIN departments d ON e.department_id = d.department_id WHERE d.name = 'Sales';","tables_used_in_sql":[],"explain_result":"success","rows_returned":63,"total_latency_ms":3364}
{"timestamp":"2026-01-27T20:47:41.359Z","query_id":"503281e9-9003-4ab6-9d69-388f36987ca4","question":"How many employees were hired in 2024?","attempt_count":2,"retry_succeeded":true,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employees","employee_salaries","employment_history","employee_certifications","employee_training","employee_benefits","timesheets","purchase_requisitions","budgets","sales_regions","sales_territories","positions"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"employees","similarity":0.6144292223525214},{"table":"employment_history","similarity":0.5990869260811272},{"table":"employee_salaries","similarity":0.5957232611905978},{"table":"employee_certifications","similarity":0.5847149077570227},{"table":"timesheets","similarity":0.575594643141534},{"table":"sales_regions","similarity":0.5687908420029388},{"table":"purchase_requisitions","similarity":0.5664402915390976},{"table":"positions","similarity":0.5658085475279547},{"table":"sales_opportunities","similarity":0.5639075817288894},{"table":"task_assignments","similarity":0.562680711321946},{"table":"employee_training","similarity":0.5619832232346038},{"table":"employee_benefits","similarity":0.5521280809074093},{"table":"sales_territories","similarity":0.5514528346239352},{"table":"budgets","similarity":0.5403087942053312},{"table":"sales_quotes","similarity":0.5393048811827968}],"column_hits_per_table":{"employees":16,"employee_salaries":6,"employee_certifications":4,"employment_history":6,"employee_training":5,"employee_benefits":2,"timesheets":2,"sales_regions":1,"stock_transfers":1,"sales_territories":1,"departments":1,"task_assignments":1,"business_units":1,"purchase_requisitions":1,"budgets":1,"sales_quotes":1},"top_columns_per_table":{"employees":[{"column":"hire_date","similarity":0.7106559818290373},{"column":"birth_date","similarity":0.6517135742797255},{"column":"employee_number","similarity":0.633121778910481}],"employee_salaries":[{"column":"effective_date","similarity":0.6296154988591133},{"column":"end_date","similarity":0.609101620634113},{"column":"approved_by","similarity":0.5761653893037841}],"employee_certifications":[{"column":"obtained_date","similarity":0.6094607553884445},{"column":"expiry_date","similarity":0.6007861744748104},{"column":"certificate_number","similarity":0.5633632316465422}],"employment_history":[{"column":"start_date","similarity":0.6071257631385101},{"column":"end_date","similarity":0.5989153405055726},{"column":"position","similarity":0.5890884348995125}],"employee_training":[{"column":"scheduled_date","similarity":0.6029307116623341},{"column":"completion_date","similarity":0.6028518248589481},{"column":"status","similarity":0.5708936159109197}],"employee_benefits":[{"column":"start_date","similarity":0.5952623658369748},{"column":"end_date","similarity":0.5732788329636184}],"timesheets":[{"column":"approved_by","similarity":0.5691747597184825},{"column":"employee_id","similarity":0.5581640185946611}],"sales_regions":[{"column":"manager_id","similarity":0.5671745315621484}],"stock_transfers":[{"column":"created_by","similarity":0.562232812523577}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5618670479918372}],"departments":[{"column":"manager_id","similarity":0.5617735539821376}],"task_assignments":[{"column":"employee_id","similarity":0.5576232667870425}],"business_units":[{"column":"manager_id","similarity":0.5563961234903366}],"purchase_requisitions":[{"column":"approved_by","similarity":0.5556539730090067}],"budgets":[{"column":"approved_by","similarity":0.5516931281633284}],"sales_quotes":[{"column":"created_by","similarity":0.5460264622486979}]},"fused_scores":[{"table":"employees","fused":0.7832626409990728,"table_sim":0.6144292223525214,"col_score":1.0365127689689002},{"table":"employee_salaries","fused":0.7311004803848267,"table_sim":0.5957232611905978,"col_score":0.9341663091761698},{"table":"employment_history","fused":0.7220855290051948,"table_sim":0.5990869260811272,"col_score":0.9065834333912963},{"table":"employee_certifications","fused":0.7147704817045535,"table_sim":0.5847149077570227,"col_score":0.9098538426258497},{"table":"employee_training","fused":0.6989325835774856,"table_sim":0.5619832232346038,"col_score":0.9043566240918082},{"table":"employee_benefits","fused":0.6840375614719592,"table_sim":0.5521280809074093,"col_score":0.881901782318784},{"table":"timesheets","fused":0.6511696523755659,"table_sim":0.575594643141534,"col_score":0.7645321662266139},{"table":"purchase_requisitions","fused":0.5621257641270612,"table_sim":0.5664402915390976,"col_score":0.5556539730090067},{"table":"budgets","fused":0.5448625277885301,"table_sim":0.5403087942053312,"col_score":0.5516931281633284},{"table":"sales_regions","fused":0.5000833740391648,"table_sim":0.5687908420029388,"col_score":0.3970221720935038},{"table":"task_assignments","fused":0.4937429414935395,"table_sim":0.562680711321946,"col_score":0.39033628675092974},{"table":"sales_territories","fused":0.4881944742120755,"table_sim":0.5514528346239352,"col_score":0.393306933594286},{"table":"sales_quotes","fused":0.4764703381393135,"table_sim":0.5393048811827968,"col_score":0.3822185235740885},{"table":"positions","fused":0.3394851285167728,"table_sim":0.5658085475279547,"col_score":0},{"table":"sales_opportunities","fused":0.33834454903733363,"table_sim":0.5639075817288894,"col_score":0}],"fk_expansion_candidates":33,"fk_expansion_added":2,"fk_expansion_blocked_count":28,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":47,"total_retrieval_latency_ms":53,"sql_generated":"SELECT COUNT(*) FROM employees WHERE hire_date BETWEEN '2024-01-01' AND '2024-12-31';","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":1138}
{"timestamp":"2026-01-27T20:47:42.498Z","query_id":"fa77b4b1-8336-429e-9525-b26cf1918f64","question":"What is the average salary by department?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["positions","employee_salaries","employees","departments","budgets","goods_receipts","employee_benefits","journal_entries","employment_history","project_expenses","cost_centers","sales_territories"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"positions","similarity":0.6472399264470684},{"table":"employee_salaries","similarity":0.6163489777991259},{"table":"departments","similarity":0.6143006157633061},{"table":"employees","similarity":0.5843710762372889},{"table":"cost_centers","similarity":0.5579264629700211},{"table":"budgets","similarity":0.5571964787833181},{"table":"sales_regions","similarity":0.5364724383376334},{"table":"sales_territories","similarity":0.5299492722581486},{"table":"journal_entries","similarity":0.526534036172237},{"table":"purchase_requisitions","similarity":0.5238763225772829},{"table":"project_expenses","similarity":0.5181308895485073},{"table":"employee_benefits","similarity":0.5174411519669776},{"table":"goods_receipts","similarity":0.5160018389560823},{"table":"task_assignments","similarity":0.513087451687374},{"table":"employment_history","similarity":0.5120203905454107}],"column_hits_per_table":{"employees":8,"departments":6,"employee_salaries":7,"positions":4,"cost_centers":1,"budgets":2,"employee_benefits":1,"purchase_requisitions":1,"requisition_lines":2,"project_resources":1,"employment_history":1,"sales_orders":2,"project_budgets":1,"employee_training":1,"currencies":1,"vendor_invoices":2,"goods_receipts":2,"product_suppliers":1,"project_expenses":1,"journal_entries":1,"depreciation_schedules":1,"employee_certifications":1,"sales_quotes":1,"sales_territories":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.6714025402580912},{"column":"department_id","similarity":0.584700343354732},{"column":"employee_number","similarity":0.5532682108483173}],"departments":[{"column":"budget","similarity":0.6693178899525953},{"column":"name","similarity":0.6171203083627336},{"column":"parent_department_id","similarity":0.5878888275901532}],"employee_salaries":[{"column":"amount","similarity":0.6538497128830203},{"column":"effective_date","similarity":0.6119174466610072},{"column":"salary_id","similarity":0.6029067593645321}],"positions":[{"column":"department_id","similarity":0.6330316284547595},{"column":"max_salary","similarity":0.6298490831807669},{"column":"min_salary","similarity":0.6262751289068413}],"cost_centers":[{"column":"department_id","similarity":0.5944196229868914}],"budgets":[{"column":"department_id","similarity":0.57844391567942},{"column":"total_amount","similarity":0.5345358880503847}],"employee_benefits":[{"column":"coverage_level","similarity":0.5592633154028713}],"purchase_requisitions":[{"column":"department_id","similarity":0.5579053225850302}],"requisition_lines":[{"column":"estimated_total","similarity":0.5575389137165062},{"column":"estimated_unit_cost","similarity":0.5432548724783238}],"project_resources":[{"column":"hourly_rate","similarity":0.5507729867753033}],"employment_history":[{"column":"position","similarity":0.546923389654957}],"sales_orders":[{"column":"total","similarity":0.5456325341224678},{"column":"subtotal","similarity":0.5256028180358103}],"project_budgets":[{"column":"actual_amount","similarity":0.5389410727850935}],"employee_training":[{"column":"score","similarity":0.5351809226270803}],"currencies":[{"column":"exchange_rate","similarity":0.5339462316729515}],"vendor_invoices":[{"column":"amount_paid","similarity":0.5331812479989457},{"column":"total","similarity":0.5302071561700523}],"goods_receipts":[{"column":"received_by","similarity":0.5319872343080682},{"column":"receipt_number","similarity":0.523270196493927}],"product_suppliers":[{"column":"unit_cost","similarity":0.5297268931690184}],"project_expenses":[{"column":"amount","similarity":0.5280982333276214}],"journal_entries":[{"column":"posted_by","similarity":0.5260241851684003}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5257318815448632}],"employee_certifications":[{"column":"certificate_number","similarity":0.5236560179787567}],"sales_quotes":[{"column":"total","similarity":0.5236132162689948}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5204418572284772}]},"fused_scores":[{"table":"positions","fused":0.7655386149219161,"table_sim":0.6472399264470684,"col_score":0.9429866476341876},{"table":"employee_salaries","fused":0.7537327611648852,"table_sim":0.6163489777991259,"col_score":0.959808436213524},{"table":"employees","fused":0.7298373040152732,"table_sim":0.5843710762372889,"col_score":0.9480366456822499},{"table":"departments","fused":0.7227043686098045,"table_sim":0.6143006157633061,"col_score":0.8853099978795521},{"table":"budgets","fused":0.6291143906852635,"table_sim":0.5571964787833181,"col_score":0.7369912585381817},{"table":"goods_receipts","fused":0.6270500363956621,"table_sim":0.5160018389560823,"col_score":0.7936223325550317},{"table":"employee_benefits","fused":0.5341700173413351,"table_sim":0.5174411519669776,"col_score":0.5592633154028713},{"table":"journal_entries","fused":0.5263300957707023,"table_sim":0.526534036172237,"col_score":0.5260241851684003},{"table":"employment_history","fused":0.5259815901892293,"table_sim":0.5120203905454107,"col_score":0.546923389654957},{"table":"project_expenses","fused":0.522117827060153,"table_sim":0.5181308895485073,"col_score":0.5280982333276214},{"table":"cost_centers","fused":0.5011933722183423,"table_sim":0.5579264629700211,"col_score":0.416093736090824},{"table":"purchase_requisitions","fused":0.4705392838701782,"table_sim":0.5238763225772829,"col_score":0.3905337258095211},{"table":"sales_territories","fused":0.46369328337886273,"table_sim":0.5299492722581486,"col_score":0.36430930005993406},{"table":"requisition_lines","fused":0.33166653998226725,"table_sim":0,"col_score":0.8291663499556681},{"table":"sales_orders","fused":0.32337357725614924,"table_sim":0,"col_score":0.808433943140373}],"fk_expansion_candidates":34,"fk_expansion_added":2,"fk_expansion_blocked_count":27,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"sales_regions","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"benefit_types","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":35,"total_retrieval_latency_ms":42,"sql_generated":"SELECT d.name AS department_name, AVG(e.salary) AS avg_salary FROM departments d JOIN employees e ON d.department_id = e.department_id GROUP BY d.name;","tables_used_in_sql":[],"explain_result":"success","rows_returned":19,"total_latency_ms":885}
{"timestamp":"2026-01-27T20:47:43.383Z","query_id":"d8ee4ea6-6f5b-43d4-98b3-96369026dbe1","question":"List all customers with credit limit over $100,000","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["customers","customer_contacts","bank_accounts","sales_quotes","certifications","budget_lines","purchase_requisitions","project_expenses","budgets","cost_centers","bank_transactions","employee_certifications"],"tables_from_table_retrieval":15,"tables_from_column_only":15,"tables_from_fk_expansion":2,"table_scores":[{"table":"customers","similarity":0.6422232823454113},{"table":"customer_contacts","similarity":0.5702946339617082},{"table":"sales_regions","similarity":0.5667997703273866},{"table":"certifications","similarity":0.5571072107976042},{"table":"sales_quotes","similarity":0.5491541498727729},{"table":"purchase_requisitions","similarity":0.5478589409950445},{"table":"budget_lines","similarity":0.5454449382794198},{"table":"bank_accounts","similarity":0.5447528216147618},{"table":"cost_centers","similarity":0.540959333993602},{"table":"employee_certifications","similarity":0.5407552237950306},{"table":"projects","similarity":0.5406308106386197},{"table":"project_expenses","similarity":0.5396310315886659},{"table":"fixed_assets","similarity":0.5381704816225558},{"table":"vendor_invoice_lines","similarity":0.5372813385528225},{"table":"budgets","similarity":0.5364846137863498}],"column_hits_per_table":{"customers":11,"projects":1,"customer_contacts":7,"sales_opportunities":1,"sales_quotes":2,"sales_orders":2,"reorder_rules":1,"budgets":1,"vendor_invoices":1,"project_expenses":1,"quote_lines":1,"certifications":1,"purchase_orders":3,"budget_lines":1,"bank_accounts":2,"bank_transactions":2,"journal_lines":1,"purchase_requisitions":1,"order_lines":1,"vendor_invoice_lines":1,"positions":1,"sales_regions":1,"po_lines":1,"cost_centers":1,"project_budgets":1,"project_milestones":1,"warehouse_locations":1,"requisition_lines":1},"top_columns_per_table":{"customers":[{"column":"credit_limit","similarity":0.8290390589962461},{"column":"payment_terms","similarity":0.6650377871997543},{"column":"customer_number","similarity":0.6415139612300956}],"projects":[{"column":"customer_id","similarity":0.6113530297711885}],"customer_contacts":[{"column":"phone","similarity":0.6040484167837853},{"column":"customer_id","similarity":0.6035386821269575},{"column":"contact_id","similarity":0.5998404377039879}],"sales_opportunities":[{"column":"customer_id","similarity":0.5973351705123849}],"sales_quotes":[{"column":"customer_id","similarity":0.5961691774985171},{"column":"total","similarity":0.5659883632982617}],"sales_orders":[{"column":"customer_id","similarity":0.58549970245739},{"column":"total","similarity":0.5683405933157465}],"reorder_rules":[{"column":"max_quantity","similarity":0.5844362539863144}],"budgets":[{"column":"approved_by","similarity":0.5826134824645886}],"vendor_invoices":[{"column":"total","similarity":0.5814502781366767}],"project_expenses":[{"column":"approved_by","similarity":0.5806637778484305}],"quote_lines":[{"column":"line_total","similarity":0.5801896505180127}],"certifications":[{"column":"validity_years","similarity":0.5798577433614027}],"purchase_orders":[{"column":"total","similarity":0.5778492143323815},{"column":"approved_by","similarity":0.5753364140452711},{"column":"buyer_id","similarity":0.5681572281535011}],"budget_lines":[{"column":"amount","similarity":0.5775415147969544}],"bank_accounts":[{"column":"current_balance","similarity":0.5767501897962805},{"column":"account_number","similarity":0.5703853537704927}],"bank_transactions":[{"column":"amount","similarity":0.5760624192982815},{"column":"reference","similarity":0.566440413697339}],"journal_lines":[{"column":"credit","similarity":0.5758582782262962}],"purchase_requisitions":[{"column":"approved_by","similarity":0.573497894904601}],"order_lines":[{"column":"line_total","similarity":0.5724929640076355}],"vendor_invoice_lines":[{"column":"amount","similarity":0.5692283162401672}],"positions":[{"column":"max_salary","similarity":0.5687679838535561}],"sales_regions":[{"column":"manager_id","similarity":0.5681024224683461}],"po_lines":[{"column":"line_total","similarity":0.5673570249509682}],"cost_centers":[{"column":"code","similarity":0.5669986563600412}],"project_budgets":[{"column":"actual_amount","similarity":0.566506927799081}],"project_milestones":[{"column":"amount","similarity":0.5661535207015114}],"warehouse_locations":[{"column":"capacity","similarity":0.5659576253370232}],"requisition_lines":[{"column":"estimated_total","similarity":0.5640113461906648}]},"fused_scores":[{"table":"customers","fused":0.8499571504456961,"table_sim":0.6422232823454113,"col_score":1.1615579525961233},{"table":"customer_contacts","fused":0.7028167334530704,"table_sim":0.5702946339617082,"col_score":0.9015998826901137},{"table":"bank_accounts","fused":0.6716288396414678,"table_sim":0.5447528216147618,"col_score":0.8619428666815268},{"table":"sales_quotes","fused":0.6393515200927609,"table_sim":0.5491541498727729,"col_score":0.7746475754227427},{"table":"certifications","fused":0.5662074238231236,"table_sim":0.5571072107976042,"col_score":0.5798577433614027},{"table":"budget_lines","fused":0.5582835688864336,"table_sim":0.5454449382794198,"col_score":0.5775415147969544},{"table":"purchase_requisitions","fused":0.5581145225588671,"table_sim":0.5478589409950445,"col_score":0.573497894904601},{"table":"project_expenses","fused":0.5560441300925718,"table_sim":0.5396310315886659,"col_score":0.5806637778484305},{"table":"budgets","fused":0.5549361612576453,"table_sim":0.5364846137863498,"col_score":0.5826134824645886},{"table":"cost_centers","fused":0.5513750629401777,"table_sim":0.540959333993602,"col_score":0.5669986563600412},{"table":"vendor_invoice_lines","fused":0.5500601296277604,"table_sim":0.5372813385528225,"col_score":0.5692283162401672},{"table":"sales_regions","fused":0.49914854048756885,"table_sim":0.5667997703273866,"col_score":0.3976716957278422},{"table":"projects","fused":0.4955573347191046,"table_sim":0.5406308106386197,"col_score":0.42794712083983194},{"table":"purchase_orders","fused":0.34620696854200683,"table_sim":0,"col_score":0.865517421355017},{"table":"bank_transactions","fused":0.3437130504587804,"table_sim":0,"col_score":0.8592826261469511}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":11,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"projects","reason":"max_tables"},{"table":"purchase_orders","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":49,"total_retrieval_latency_ms":55,"sql_generated":"SELECT c.customer_id, c.name AS customer_name, c.email, c.phone, c.credit_limit FROM customers c WHERE c.credit_limit > 100000;","tables_used_in_sql":[],"explain_result":"success","rows_returned":206,"total_latency_ms":829}
{"timestamp":"2026-01-27T20:47:44.213Z","query_id":"62fde9ec-7f70-4040-a4ed-5000d40bc8bd","question":"How many sales orders are in pending status?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["sales_orders","purchase_orders","sales_opportunities","order_lines","vendor_invoices","purchase_requisitions","sales_quotes","goods_receipts","po_lines","product_suppliers","fixed_assets","receipt_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":12,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.6863020331203206},{"table":"purchase_orders","similarity":0.6720782086239174},{"table":"order_lines","similarity":0.620432904007153},{"table":"vendor_invoices","similarity":0.6085185379492049},{"table":"goods_receipts","similarity":0.6053687360586439},{"table":"sales_opportunities","similarity":0.601388904869088},{"table":"po_lines","similarity":0.576218684979662},{"table":"product_suppliers","similarity":0.5754254810584586},{"table":"purchase_requisitions","similarity":0.57327171968414},{"table":"vendor_invoice_lines","similarity":0.5682118570421297},{"table":"sales_territories","similarity":0.5678982904980082},{"table":"receipt_lines","similarity":0.5660529547253613},{"table":"vendors","similarity":0.5659136630376012},{"table":"reorder_rules","similarity":0.5568055924346023},{"table":"sales_quotes","similarity":0.5566655088616519}],"column_hits_per_table":{"sales_orders":14,"purchase_orders":13,"sales_quotes":1,"vendor_invoices":3,"purchase_requisitions":1,"stock_transfers":1,"timesheets":1,"leave_requests":1,"sales_opportunities":2,"project_phases":1,"projects":1,"journal_entries":1,"inventory_adjustments":1,"fixed_assets":2,"asset_maintenance":1,"order_lines":2,"employee_training":1,"project_expenses":1,"goods_receipts":1,"project_tasks":1},"top_columns_per_table":{"sales_orders":[{"column":"status","similarity":0.8126679915790036},{"column":"order_date","similarity":0.7078984846645195},{"column":"ship_date","similarity":0.6929006763015985}],"purchase_orders":[{"column":"status","similarity":0.770838550445989},{"column":"order_date","similarity":0.6497285521212871},{"column":"po_number","similarity":0.6445881341176289}],"sales_quotes":[{"column":"status","similarity":0.7105128416768823}],"vendor_invoices":[{"column":"status","similarity":0.6915681497187584},{"column":"due_date","similarity":0.5983254925630166},{"column":"po_id","similarity":0.5978553329024192}],"purchase_requisitions":[{"column":"status","similarity":0.6886346020649313}],"stock_transfers":[{"column":"status","similarity":0.6613621118756833}],"timesheets":[{"column":"status","similarity":0.6425710565758574}],"leave_requests":[{"column":"status","similarity":0.6303639699021262}],"sales_opportunities":[{"column":"expected_close_date","similarity":0.6291685056430228},{"column":"actual_close_date","similarity":0.6262923756162083}],"project_phases":[{"column":"status","similarity":0.6275085851720199}],"projects":[{"column":"status","similarity":0.6256287411296566}],"journal_entries":[{"column":"status","similarity":0.6235483153718223}],"inventory_adjustments":[{"column":"status","similarity":0.6208235335633071}],"fixed_assets":[{"column":"status","similarity":0.6168418961639195},{"column":"po_id","similarity":0.6010404984118506}],"asset_maintenance":[{"column":"status","similarity":0.6160182585727294}],"order_lines":[{"column":"quantity_shipped","similarity":0.6148753597061939},{"column":"order_id","similarity":0.6054379790805837}],"employee_training":[{"column":"status","similarity":0.6139587143974272}],"project_expenses":[{"column":"status","similarity":0.6069411878269023}],"goods_receipts":[{"column":"po_id","similarity":0.6057662952497207}],"project_tasks":[{"column":"status","similarity":0.6001730432395295}]},"fused_scores":[{"table":"sales_orders","fused":0.8335207489983198,"table_sim":0.6863020331203206,"col_score":1.0543488228153188},{"table":"purchase_orders","fused":0.7920559728463912,"table_sim":0.6720782086239174,"col_score":0.9720226191801016},{"table":"sales_opportunities","fused":0.7377592203019037,"table_sim":0.601388904869088,"col_score":0.9423146934511271},{"table":"order_lines","fused":0.7029712033580511,"table_sim":0.620432904007153,"col_score":0.8267786523843982},{"table":"vendor_invoices","fused":0.7012608607553557,"table_sim":0.6085185379492049,"col_score":0.840374344964582},{"table":"purchase_requisitions","fused":0.5367807203886648,"table_sim":0.57327171968414,"col_score":0.4820442214454519},{"table":"sales_quotes","fused":0.5329429009865182,"table_sim":0.5566655088616519,"col_score":0.4973589891738176},{"table":"goods_receipts","fused":0.5328358043051082,"table_sim":0.6053687360586439,"col_score":0.42403640667480447},{"table":"po_lines","fused":0.3457312109877972,"table_sim":0.576218684979662,"col_score":0},{"table":"product_suppliers","fused":0.34525528863507515,"table_sim":0.5754254810584586,"col_score":0},{"table":"vendor_invoice_lines","fused":0.3409271142252778,"table_sim":0.5682118570421297,"col_score":0},{"table":"sales_territories","fused":0.3407389742988049,"table_sim":0.5678982904980082,"col_score":0},{"table":"receipt_lines","fused":0.3396317728352168,"table_sim":0.5660529547253613,"col_score":0},{"table":"vendors","fused":0.3395481978225607,"table_sim":0.5659136630376012,"col_score":0},{"table":"reorder_rules","fused":0.33408335546076134,"table_sim":0.5568055924346023,"col_score":0}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendors","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":13,"total_retrieval_latency_ms":19,"sql_generated":"SELECT COUNT(*) FROM sales_orders WHERE status = 'pending';","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":476}
{"timestamp":"2026-01-27T20:47:44.689Z","query_id":"7a9997e6-1818-4f32-8850-3d0f93b74d0e","question":"List all products in the Electronics category","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["products","asset_categories","product_categories","product_suppliers","inventory_levels","purchase_orders","project_budgets","fixed_assets","order_lines","goods_receipts","inventory_transactions","purchase_requisitions"],"tables_from_table_retrieval":15,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"product_categories","similarity":0.7247710633179223},{"table":"products","similarity":0.6925442846427379},{"table":"asset_categories","similarity":0.6732299389573608},{"table":"product_suppliers","similarity":0.6030261734368682},{"table":"inventory_levels","similarity":0.5983462217768915},{"table":"fixed_assets","similarity":0.5837780825065988},{"table":"order_lines","similarity":0.579950725989159},{"table":"benefit_types","similarity":0.5783320444020242},{"table":"goods_receipts","similarity":0.5716501955638699},{"table":"inventory_transactions","similarity":0.5662070064714834},{"table":"purchase_orders","similarity":0.5640672157629032},{"table":"reorder_rules","similarity":0.5631110139120176},{"table":"sales_orders","similarity":0.5610178986822795},{"table":"project_budgets","similarity":0.5604683231309531},{"table":"receipt_lines","similarity":0.5589477791069778}],"column_hits_per_table":{"product_categories":5,"products":11,"asset_categories":5,"fixed_assets":1,"project_expenses":1,"project_budgets":1,"inventory_levels":3,"product_suppliers":6,"goods_receipts":1,"inventory_transactions":1,"receipt_lines":1,"purchase_orders":3,"order_lines":1,"purchase_requisitions":2,"sales_orders":1,"requisition_lines":1,"po_lines":1,"transfer_lines":1,"projects":1,"reorder_rules":1,"vendors":1,"project_milestones":1},"top_columns_per_table":{"product_categories":[{"column":"description","similarity":0.7744734798782056},{"column":"is_active","similarity":0.764103621998991},{"column":"category_id","similarity":0.7400673790806138}],"products":[{"column":"category_id","similarity":0.7448968885002062},{"column":"weight","similarity":0.7338384533236261},{"column":"description","similarity":0.7270322585700298}],"asset_categories":[{"column":"category_id","similarity":0.6720113269687207},{"column":"name","similarity":0.6440506484802837},{"column":"useful_life_years","similarity":0.6436763776718329}],"fixed_assets":[{"column":"category_id","similarity":0.6687988929895817}],"project_expenses":[{"column":"category","similarity":0.6580372401808694}],"project_budgets":[{"column":"category","similarity":0.6411736891011891}],"inventory_levels":[{"column":"product_id","similarity":0.6383729329618826},{"column":"quantity_available","similarity":0.6195689232836453},{"column":"quantity_reserved","similarity":0.6150070840715671}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6357396016111654},{"column":"is_preferred","similarity":0.6352037703917482},{"column":"product_id","similarity":0.6350232984655001}],"goods_receipts":[{"column":"notes","similarity":0.6342701892167845}],"inventory_transactions":[{"column":"product_id","similarity":0.6285109886489371}],"receipt_lines":[{"column":"product_id","similarity":0.6251008787738574}],"purchase_orders":[{"column":"status","similarity":0.6246767013236649},{"column":"subtotal","similarity":0.6129627891245971},{"column":"total","similarity":0.6109546136413169}],"order_lines":[{"column":"product_id","similarity":0.6228405864995272}],"purchase_requisitions":[{"column":"notes","similarity":0.6219501766292409},{"column":"status","similarity":0.6143404481217759}],"sales_orders":[{"column":"status","similarity":0.6179542401442183}],"requisition_lines":[{"column":"product_id","similarity":0.6178394374568797}],"po_lines":[{"column":"product_id","similarity":0.6141691155677201}],"transfer_lines":[{"column":"product_id","similarity":0.6137213514394801}],"projects":[{"column":"description","similarity":0.6114423632244014}],"reorder_rules":[{"column":"product_id","similarity":0.6112855739301208}],"vendors":[{"column":"website","similarity":0.6078254177271813}],"project_milestones":[{"column":"description","similarity":0.6073811792561313}]},"fused_scores":[{"table":"products","fused":0.84960555792291,"table_sim":0.6925442846427379,"col_score":1.0851974678431684},{"table":"asset_categories","fused":0.785802907667366,"table_sim":0.6732299389573608,"col_score":0.9546623607323738},{"table":"product_categories","fused":0.7586897194365096,"table_sim":0.7247710633179223,"col_score":0.8095677036143907},{"table":"product_suppliers","fused":0.7431522987849367,"table_sim":0.6030261734368682,"col_score":0.9533414868070396},{"table":"inventory_levels","fused":0.7298367191939065,"table_sim":0.5983462217768915,"col_score":0.9270724653194289},{"table":"purchase_orders","fused":0.7058163678358441,"table_sim":0.5640672157629032,"col_score":0.9184400959452556},{"table":"project_budgets","fused":0.5927504695190475,"table_sim":0.5604683231309531,"col_score":0.6411736891011891},{"table":"fixed_assets","fused":0.5375305395410421,"table_sim":0.5837780825065988,"col_score":0.4681592250927072},{"table":"order_lines","fused":0.5223657998133631,"table_sim":0.579950725989159,"col_score":0.435988410549669},{"table":"goods_receipts","fused":0.5205857703190215,"table_sim":0.5716501955638699,"col_score":0.4439891324517491},{"table":"inventory_transactions","fused":0.5157072807045924,"table_sim":0.5662070064714834,"col_score":0.4399576920542559},{"table":"receipt_lines","fused":0.5103969135208668,"table_sim":0.5589477791069778,"col_score":0.4375706151417002},{"table":"sales_orders","fused":0.5096379264497488,"table_sim":0.5610178986822795,"col_score":0.43256796810095277},{"table":"reorder_rules","fused":0.5090265690476443,"table_sim":0.5631110139120176,"col_score":0.42789990175108455},{"table":"benefit_types","fused":0.3469992266412145,"table_sim":0.5783320444020242,"col_score":0}],"fk_expansion_candidates":23,"fk_expansion_added":2,"fk_expansion_blocked_count":17,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"max_tables"},{"table":"reorder_rules","reason":"max_tables"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"max_tables"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":37,"total_retrieval_latency_ms":43,"sql_generated":"SELECT p.name AS product_name, p.sku, pc.category_id, pc.name AS category_name FROM products p INNER JOIN product_categories pc ON p.category_id = pc.category_id WHERE pc.name = 'Electronics';","tables_used_in_sql":[],"explain_result":"success","rows_returned":62,"total_latency_ms":997}
{"timestamp":"2026-01-27T20:47:45.687Z","query_id":"f8d4bb39-c191-4643-b005-49849166d104","question":"What are the names of all warehouses?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["warehouse_locations","warehouses","asset_locations","inventory_levels","stock_transfers","vendors","product_suppliers","inventory_transactions","goods_receipts","receipt_lines","addresses","adjustment_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":14,"tables_from_fk_expansion":2,"table_scores":[{"table":"warehouse_locations","similarity":0.7285498737313786},{"table":"warehouses","similarity":0.6792134543197855},{"table":"inventory_levels","similarity":0.6028416640616783},{"table":"stock_transfers","similarity":0.5855227429535015},{"table":"asset_locations","similarity":0.5811905860356016},{"table":"inventory_transactions","similarity":0.5741447160112193},{"table":"goods_receipts","similarity":0.562857185642988},{"table":"receipt_lines","similarity":0.5455584769843732},{"table":"inventory_adjustments","similarity":0.5426259114305894},{"table":"departments","similarity":0.5313134558364061},{"table":"business_units","similarity":0.5244981901049215},{"table":"asset_categories","similarity":0.5238562017802103},{"table":"product_suppliers","similarity":0.5237894596417773},{"table":"vendors","similarity":0.5237362245698947},{"table":"adjustment_lines","similarity":0.5220765049120273}],"column_hits_per_table":{"warehouses":6,"warehouse_locations":7,"stock_transfers":2,"goods_receipts":1,"inventory_levels":2,"inventory_transactions":2,"receipt_lines":1,"departments":1,"vendors":2,"inventory_adjustments":1,"adjustment_lines":1,"asset_locations":6,"cities":1,"reorder_rules":1,"business_units":1,"cost_centers":1,"sales_territories":1,"products":1,"sales_regions":1,"projects":1,"currencies":1,"product_categories":1,"budgets":1,"product_suppliers":2,"units_of_measure":1,"project_phases":1,"vendor_contacts":1,"asset_categories":1,"addresses":1},"top_columns_per_table":{"warehouses":[{"column":"name","similarity":0.8306423755557336},{"column":"code","similarity":0.7512829316334283},{"column":"warehouse_id","similarity":0.7425092729476251}],"warehouse_locations":[{"column":"rack","similarity":0.7298143500706573},{"column":"bin","similarity":0.7297344203964418},{"column":"aisle","similarity":0.7247238571215294}],"stock_transfers":[{"column":"to_warehouse_id","similarity":0.6377076065867383},{"column":"from_warehouse_id","similarity":0.6282759066468376}],"goods_receipts":[{"column":"warehouse_id","similarity":0.6325079254457334}],"inventory_levels":[{"column":"warehouse_id","similarity":0.623490938233287},{"column":"location_id","similarity":0.6197290277532869}],"inventory_transactions":[{"column":"warehouse_id","similarity":0.6172355443974565},{"column":"location_id","similarity":0.6163600073929221}],"receipt_lines":[{"column":"location_id","similarity":0.6086776313817097}],"departments":[{"column":"name","similarity":0.6046172861965688}],"vendors":[{"column":"name","similarity":0.6006474572761235},{"column":"website","similarity":0.5429020150551502}],"inventory_adjustments":[{"column":"warehouse_id","similarity":0.5962150819746229}],"adjustment_lines":[{"column":"location_id","similarity":0.5953390531464773}],"asset_locations":[{"column":"name","similarity":0.59252797863612},{"column":"building","similarity":0.5687769385352075},{"column":"description","similarity":0.568123307445186}],"cities":[{"column":"name","similarity":0.5913925051006355}],"reorder_rules":[{"column":"warehouse_id","similarity":0.5860961886053743}],"business_units":[{"column":"name","similarity":0.5855760360515111}],"cost_centers":[{"column":"name","similarity":0.5796551031766091}],"sales_territories":[{"column":"name","similarity":0.5739343094189399}],"products":[{"column":"name","similarity":0.5715109515395136}],"sales_regions":[{"column":"name","similarity":0.5686881306616351}],"projects":[{"column":"name","similarity":0.5628106374186854}],"currencies":[{"column":"name","similarity":0.5599164983958906}],"product_categories":[{"column":"name","similarity":0.5543220703341668}],"budgets":[{"column":"name","similarity":0.5506764127199264}],"product_suppliers":[{"column":"supplier_id","similarity":0.5505276328361339},{"column":"is_preferred","similarity":0.545694199708335}],"units_of_measure":[{"column":"name","similarity":0.5498315512937682}],"project_phases":[{"column":"name","similarity":0.5455907198882759}],"vendor_contacts":[{"column":"first_name","similarity":0.5438345209961394}],"asset_categories":[{"column":"name","similarity":0.5437632464112468}],"addresses":[{"column":"street1","similarity":0.5425795221955373}]},"fused_scores":[{"table":"warehouse_locations","fused":0.8750025483463784,"table_sim":0.7285498737313786,"col_score":1.0946815602688782},{"table":"warehouses","fused":0.8243311778230453,"table_sim":0.6792134543197855,"col_score":1.042007763077935},{"table":"asset_locations","fused":0.6856831018359026,"table_sim":0.5811905860356016,"col_score":0.8424218755363542},{"table":"inventory_levels","fused":0.6230445250277874,"table_sim":0.6028416640616783,"col_score":0.6533488164769513},{"table":"stock_transfers","fused":0.6178304025469449,"table_sim":0.5855227429535015,"col_score":0.6662918919371099},{"table":"vendors","fused":0.6154931847826541,"table_sim":0.5237362245698947,"col_score":0.7531286251017935},{"table":"product_suppliers","fused":0.6096252242654591,"table_sim":0.5237894596417773,"col_score":0.7383788712009819},{"table":"inventory_transactions","fused":0.6036031830730284,"table_sim":0.5741447160112193,"col_score":0.6477908836657422},{"table":"goods_receipts","fused":0.5148165305105982,"table_sim":0.562857185642988,"col_score":0.4427555478120134},{"table":"receipt_lines","fused":0.49776482297750263,"table_sim":0.5455584769843732,"col_score":0.4260743419671968},{"table":"inventory_adjustments","fused":0.492515769811248,"table_sim":0.5426259114305894,"col_score":0.41735055738223603},{"table":"departments","fused":0.4880809136368829,"table_sim":0.5313134558364061,"col_score":0.42323210033759817},{"table":"adjustment_lines","fused":0.47994083782823005,"table_sim":0.5220765049120273,"col_score":0.4167373372025341},{"table":"business_units","fused":0.478660204157376,"table_sim":0.5244981901049215,"col_score":0.40990322523605777},{"table":"asset_categories","fused":0.4665674300632753,"table_sim":0.5238562017802103,"col_score":0.3806342724878728}],"fk_expansion_candidates":15,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"asset_maintenance","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"max_tables"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"vendor_contacts","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":21,"total_retrieval_latency_ms":27,"sql_generated":"SELECT w.name FROM warehouses AS w;","tables_used_in_sql":[],"explain_result":"success","rows_returned":5,"total_latency_ms":406}
{"timestamp":"2026-01-27T20:47:46.092Z","query_id":"135b38da-b036-4c8c-a5b5-712daa131e4e","question":"List all active vendors","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["vendors","vendor_contacts","vendor_invoices","product_suppliers","vendor_invoice_lines","purchase_orders","warehouses","sales_orders","asset_maintenance","positions","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":1,"table_scores":[{"table":"vendors","similarity":0.6880006513779018},{"table":"vendor_invoices","similarity":0.6543823921120047},{"table":"vendor_contacts","similarity":0.6543707733450305},{"table":"product_suppliers","similarity":0.6368613960189783},{"table":"purchase_orders","similarity":0.6046285681195724},{"table":"warehouses","similarity":0.598149679590252},{"table":"vendor_invoice_lines","similarity":0.5838401301268009},{"table":"sales_orders","similarity":0.5640201838810418},{"table":"employee_certifications","similarity":0.551813660527373},{"table":"positions","similarity":0.5516308950343896},{"table":"goods_receipts","similarity":0.546132532397609},{"table":"certifications","similarity":0.5422578536384377},{"table":"business_units","similarity":0.5370141517568868},{"table":"sales_opportunities","similarity":0.5364263200685896},{"table":"asset_maintenance","similarity":0.5360709301261409}],"column_hits_per_table":{"vendors":12,"vendor_invoices":11,"product_suppliers":3,"vendor_contacts":8,"fixed_assets":1,"customers":1,"employees":1,"products":1,"asset_maintenance":1,"purchase_orders":1,"warehouses":1,"vendor_invoice_lines":4,"business_units":1,"positions":1,"sales_orders":1,"product_categories":1,"bank_accounts":1},"top_columns_per_table":{"vendors":[{"column":"is_active","similarity":0.8155853373692737},{"column":"vendor_id","similarity":0.7047968333046998},{"column":"website","similarity":0.7047070539914414}],"vendor_invoices":[{"column":"status","similarity":0.6853007949330985},{"column":"total","similarity":0.6625184230380687},{"column":"vendor_id","similarity":0.658515810844043}],"product_suppliers":[{"column":"vendor_id","similarity":0.6663864141204237},{"column":"vendor_sku","similarity":0.6217787251674654},{"column":"is_preferred","similarity":0.6033063105449389}],"vendor_contacts":[{"column":"vendor_id","similarity":0.666362862060921},{"column":"is_primary","similarity":0.6648517274867396},{"column":"contact_id","similarity":0.6527908754111679}],"fixed_assets":[{"column":"vendor_id","similarity":0.6576219040714807}],"customers":[{"column":"is_active","similarity":0.6545248955843614}],"employees":[{"column":"is_active","similarity":0.649190940172776}],"products":[{"column":"is_active","similarity":0.6479807345635332}],"asset_maintenance":[{"column":"vendor_id","similarity":0.6479581638128978}],"purchase_orders":[{"column":"vendor_id","similarity":0.6472967761083289}],"warehouses":[{"column":"is_active","similarity":0.6446855549903335}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.6230871843854703},{"column":"invoice_id","similarity":0.6101244773591274},{"column":"line_id","similarity":0.609089375870349}],"business_units":[{"column":"is_active","similarity":0.6149605862492391}],"positions":[{"column":"is_active","similarity":0.6137399762218805}],"sales_orders":[{"column":"status","similarity":0.6081473914740269}],"product_categories":[{"column":"is_active","similarity":0.6076608572400397}],"bank_accounts":[{"column":"is_active","similarity":0.6030985737718401}]},"fused_scores":[{"table":"vendors","fused":0.8340562331865453,"table_sim":0.6880006513779018,"col_score":1.0531396058995104},{"table":"vendor_contacts","fused":0.7889592560034033,"table_sim":0.6543707733450305,"col_score":0.9908419799909627},{"table":"vendor_invoices","fused":0.7879374726767754,"table_sim":0.6543823921120047,"col_score":0.9882700935239312},{"table":"product_suppliers","fused":0.751489589787361,"table_sim":0.6368613960189783,"col_score":0.9234318804399348},{"table":"vendor_invoice_lines","fused":0.7211190259203175,"table_sim":0.5838401301268009,"col_score":0.9270373696105922},{"table":"purchase_orders","fused":0.5440202381820756,"table_sim":0.6046285681195724,"col_score":0.4531077432758302},{"table":"warehouses","fused":0.5394017631514445,"table_sim":0.598149679590252,"col_score":0.4512798884932334},{"table":"sales_orders","fused":0.5086933799413526,"table_sim":0.5640201838810418,"col_score":0.4257031740318188},{"table":"asset_maintenance","fused":0.5030708439432959,"table_sim":0.5360709301261409,"col_score":0.45357071466902843},{"table":"positions","fused":0.5028257303627602,"table_sim":0.5516308950343896,"col_score":0.4296179833553163},{"table":"business_units","fused":0.49439745520391903,"table_sim":0.5370141517568868,"col_score":0.4304724103744674},{"table":"employee_certifications","fused":0.3310881963164238,"table_sim":0.551813660527373,"col_score":0},{"table":"goods_receipts","fused":0.3276795194385654,"table_sim":0.546132532397609,"col_score":0},{"table":"certifications","fused":0.3253547121830626,"table_sim":0.5422578536384377,"col_score":0},{"table":"sales_opportunities","fused":0.3218557920411537,"table_sim":0.5364263200685896,"col_score":0}],"fk_expansion_candidates":20,"fk_expansion_added":1,"fk_expansion_blocked_count":19,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":25,"total_retrieval_latency_ms":31,"sql_generated":"SELECT v.vendor_id, v.vendor_number, v.name FROM vendors AS v WHERE v.is_active = TRUE;","tables_used_in_sql":[],"explain_result":"success","rows_returned":200,"total_latency_ms":617}
{"timestamp":"2026-01-27T20:47:46.709Z","query_id":"5b84ae7f-4b51-4d3a-b315-ed8cd5482ebe","question":"What are the different account types in the chart of accounts?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["account_types","chart_of_accounts","bank_accounts","bank_transactions","asset_categories","audit_log","benefit_types","journal_lines","vendor_invoice_lines","budget_lines","currencies","employee_benefits"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"chart_of_accounts","similarity":0.819203299985527},{"table":"account_types","similarity":0.7962345365841693},{"table":"bank_accounts","similarity":0.724679255065619},{"table":"journal_lines","similarity":0.625444495321535},{"table":"asset_categories","similarity":0.618359452764169},{"table":"benefit_types","similarity":0.6179653147868353},{"table":"bank_transactions","similarity":0.6154557182401941},{"table":"vendor_invoice_lines","similarity":0.6040685769049701},{"table":"budget_lines","similarity":0.5976766494889552},{"table":"customers","similarity":0.594854133582724},{"table":"leave_types","similarity":0.584850284339393},{"table":"audit_log","similarity":0.5826141715666185},{"table":"maintenance_types","similarity":0.5755860970964287},{"table":"currencies","similarity":0.5740346669434278},{"table":"certifications","similarity":0.5726437402506039}],"column_hits_per_table":{"chart_of_accounts":8,"account_types":4,"bank_accounts":8,"journal_lines":1,"budget_lines":1,"vendor_invoice_lines":1,"bank_transactions":3,"inventory_transactions":2,"asset_categories":3,"audit_log":2,"benefit_types":4,"document_attachments":1,"sales_orders":1,"employee_certifications":1,"journal_entries":1,"maintenance_types":1,"employee_benefits":2,"goods_receipts":1,"leave_types":1,"sales_regions":1,"stock_transfers":1,"employment_history":1,"product_categories":1},"top_columns_per_table":{"chart_of_accounts":[{"column":"account_number","similarity":0.8096926316994187},{"column":"account_type_id","similarity":0.7968800422254282},{"column":"name","similarity":0.7787449565502012}],"account_types":[{"column":"category","similarity":0.8060382831667645},{"column":"name","similarity":0.7816311319186199},{"column":"normal_balance","similarity":0.771440158430953}],"bank_accounts":[{"column":"account_number","similarity":0.7265786276491443},{"column":"gl_account_id","similarity":0.7192429462418238},{"column":"account_name","similarity":0.7122946577731373}],"journal_lines":[{"column":"account_id","similarity":0.6967143979052984}],"budget_lines":[{"column":"account_id","similarity":0.684445613990559}],"vendor_invoice_lines":[{"column":"account_id","similarity":0.6840058160952801}],"bank_transactions":[{"column":"transaction_type","similarity":0.6518087698648707},{"column":"bank_account_id","similarity":0.6061370977618293},{"column":"reference","similarity":0.5906710248731557}],"inventory_transactions":[{"column":"transaction_type","similarity":0.6495161080312447},{"column":"reference_type","similarity":0.6175642629967973}],"asset_categories":[{"column":"name","similarity":0.6338625869508345},{"column":"depreciation_method","similarity":0.6289044257771695},{"column":"category_id","similarity":0.6034748261864737}],"audit_log":[{"column":"table_name","similarity":0.6323776797561055},{"column":"action","similarity":0.6264802121253557}],"benefit_types":[{"column":"name","similarity":0.631265442053339},{"column":"benefit_type_id","similarity":0.5989631957377372},{"column":"description","similarity":0.5970070919798401}],"document_attachments":[{"column":"entity_type","similarity":0.610129485144327}],"sales_orders":[{"column":"order_number","similarity":0.6014897520147031}],"employee_certifications":[{"column":"certificate_number","similarity":0.6014221103097243}],"journal_entries":[{"column":"entry_number","similarity":0.5960303492351093}],"maintenance_types":[{"column":"name","similarity":0.5941881078938602}],"employee_benefits":[{"column":"coverage_level","similarity":0.59406931034147},{"column":"benefit_type_id","similarity":0.5920431573893533}],"goods_receipts":[{"column":"receipt_number","similarity":0.5921999581294917}],"leave_types":[{"column":"name","similarity":0.590925842666314}],"sales_regions":[{"column":"name","similarity":0.5908831690426579}],"stock_transfers":[{"column":"transfer_number","similarity":0.5905182588855986}],"employment_history":[{"column":"position","similarity":0.5900957722493421}],"product_categories":[{"column":"name","similarity":0.5900660138884373}]},"fused_scores":[{"table":"account_types","fused":0.954444066903398,"table_sim":0.7962345365841693,"col_score":1.191758362382241},{"table":"chart_of_accounts","fused":0.9269622385826437,"table_sim":0.819203299985527,"col_score":1.0886006464783187},{"table":"bank_accounts","fused":0.8505843245377838,"table_sim":0.724679255065619,"col_score":1.0394419287460308},{"table":"bank_transactions","fused":0.7481311438646958,"table_sim":0.6154557182401941,"col_score":0.9471442823014485},{"table":"asset_categories","fused":0.7113182041424861,"table_sim":0.618359452764169,"col_score":0.8507563312099616},{"table":"audit_log","fused":0.6886934629559682,"table_sim":0.5826141715666185,"col_score":0.8478124000399926},{"table":"benefit_types","fused":0.6313883600503192,"table_sim":0.6179653147868353,"col_score":0.6515229279455452},{"table":"journal_lines","fused":0.5703467286064046,"table_sim":0.625444495321535,"col_score":0.4877000785337089},{"table":"vendor_invoice_lines","fused":0.5539627746496605,"table_sim":0.6040685769049701,"col_score":0.47880407126669605},{"table":"budget_lines","fused":0.5502507616107296,"table_sim":0.5976766494889552,"col_score":0.4791119297933913},{"table":"leave_types","fused":0.5163694065502037,"table_sim":0.584850284339393,"col_score":0.41364808986641977},{"table":"maintenance_types","fused":0.5117243284681381,"table_sim":0.5755860970964287,"col_score":0.41593167552570215},{"table":"inventory_transactions","fused":0.38331929581185736,"table_sim":0,"col_score":0.9582982395296433},{"table":"customers","fused":0.3569124801496344,"table_sim":0.594854133582724,"col_score":0},{"table":"currencies","fused":0.34442080016605664,"table_sim":0.5740346669434278,"col_score":0}],"fk_expansion_candidates":9,"fk_expansion_added":2,"fk_expansion_blocked_count":7,"fk_expansion_blocked":[{"table":"budgets","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":56,"total_retrieval_latency_ms":62,"sql_generated":"SELECT DISTINCT at.name AS AccountType FROM account_types at;","tables_used_in_sql":[],"explain_result":"success","rows_returned":25,"total_latency_ms":456}
{"timestamp":"2026-01-27T20:47:47.166Z","query_id":"e7d7a73d-2c97-4d9e-889f-e0ccd710a67e","question":"List all bank accounts and their current balances","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["bank_accounts","bank_transactions","account_types","chart_of_accounts","depreciation_entries","currencies","budgets","asset_maintenance","fixed_assets","budget_lines","asset_categories","asset_transfers"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"bank_accounts","similarity":0.7329690151560269},{"table":"bank_transactions","similarity":0.6432688918493359},{"table":"account_types","similarity":0.631508179872346},{"table":"chart_of_accounts","similarity":0.6020063005251778},{"table":"budget_lines","similarity":0.5651962639440569},{"table":"customers","similarity":0.5535278665609116},{"table":"asset_categories","similarity":0.5521572577010813},{"table":"asset_maintenance","similarity":0.5475464914896694},{"table":"fixed_assets","similarity":0.542263585011133},{"table":"depreciation_entries","similarity":0.540207110520008},{"table":"depreciation_schedules","similarity":0.5389700501296238},{"table":"budgets","similarity":0.5356853372102878},{"table":"audit_log","similarity":0.5355796554212624},{"table":"currencies","similarity":0.5347534603370891},{"table":"asset_transfers","similarity":0.5308786114003121}],"column_hits_per_table":{"bank_accounts":8,"account_types":4,"bank_transactions":8,"chart_of_accounts":7,"budget_lines":1,"budgets":2,"asset_maintenance":4,"fixed_assets":3,"departments":1,"stock_transfers":1,"purchase_orders":1,"inventory_adjustments":1,"sales_orders":1,"depreciation_entries":3,"asset_transfers":1,"po_lines":1,"currencies":2,"order_lines":1},"top_columns_per_table":{"bank_accounts":[{"column":"current_balance","similarity":0.8131918868327234},{"column":"bank_name","similarity":0.6859971206500465},{"column":"is_active","similarity":0.6856206372857585}],"account_types":[{"column":"normal_balance","similarity":0.651680429614802},{"column":"name","similarity":0.5702821319602579},{"column":"category","similarity":0.5677375251541499}],"bank_transactions":[{"column":"bank_account_id","similarity":0.6394080898784963},{"column":"amount","similarity":0.6276211603986331},{"column":"reconciled","similarity":0.6180619655169489}],"chart_of_accounts":[{"column":"account_number","similarity":0.6009438246638642},{"column":"is_active","similarity":0.5880663435274229},{"column":"description","similarity":0.5864624123051488}],"budget_lines":[{"column":"account_id","similarity":0.5958013856129102}],"budgets":[{"column":"status","similarity":0.5911631228971014},{"column":"total_amount","similarity":0.5869858538327237}],"asset_maintenance":[{"column":"status","similarity":0.5877659188337945},{"column":"cost","similarity":0.5661365628191241},{"column":"notes","similarity":0.5650870530420457}],"fixed_assets":[{"column":"status","similarity":0.5876108236636884},{"column":"purchase_cost","similarity":0.5561615272534075},{"column":"po_id","similarity":0.5498653271915838}],"departments":[{"column":"budget","similarity":0.5809728059571625}],"stock_transfers":[{"column":"status","similarity":0.5709511656558833}],"purchase_orders":[{"column":"total","similarity":0.5687313472919212}],"inventory_adjustments":[{"column":"status","similarity":0.5683037201005342}],"sales_orders":[{"column":"total","similarity":0.5660190484076101}],"depreciation_entries":[{"column":"accumulated_depreciation","similarity":0.5614194260846443},{"column":"amount","similarity":0.555260116269063},{"column":"asset_id","similarity":0.5551633641468458}],"asset_transfers":[{"column":"asset_id","similarity":0.5602763924959059}],"po_lines":[{"column":"line_total","similarity":0.5571370270411418}],"currencies":[{"column":"symbol","similarity":0.5502956016313811},{"column":"code","similarity":0.5500909502155655}],"order_lines":[{"column":"line_total","similarity":0.5495504183282629}]},"fused_scores":[{"table":"bank_accounts","fused":0.902177471523772,"table_sim":0.7329690151560269,"col_score":1.1559901560753896},{"table":"bank_transactions","fused":0.7606221923724445,"table_sim":0.6432688918493359,"col_score":0.9366521431571075},{"table":"account_types","fused":0.7531245848001584,"table_sim":0.631508179872346,"col_score":0.9355491921918769},{"table":"chart_of_accounts","fused":0.6839105982744915,"table_sim":0.6020063005251778,"col_score":0.8067670448984622},{"table":"depreciation_entries","fused":0.6597440599996751,"table_sim":0.540207110520008,"col_score":0.8390494842191758},{"table":"currencies","fused":0.6509885068979191,"table_sim":0.5347534603370891,"col_score":0.8253410767391639},{"table":"budgets","fused":0.6389683810648563,"table_sim":0.5356853372102878,"col_score":0.7938929468467092},{"table":"asset_maintenance","fused":0.6372697486581825,"table_sim":0.5475464914896694,"col_score":0.7718546344109521},{"table":"fixed_assets","fused":0.6300882772209593,"table_sim":0.542263585011133,"col_score":0.7618253155356984},{"table":"budget_lines","fused":0.5059421463380489,"table_sim":0.5651962639440569,"col_score":0.41706096992903713},{"table":"asset_transfers","fused":0.4754045567390409,"table_sim":0.5308786114003121,"col_score":0.3921934747471341},{"table":"customers","fused":0.33211671993654696,"table_sim":0.5535278665609116,"col_score":0},{"table":"asset_categories","fused":0.33129435462064877,"table_sim":0.5521572577010813,"col_score":0},{"table":"depreciation_schedules","fused":0.3233820300777743,"table_sim":0.5389700501296238,"col_score":0},{"table":"audit_log","fused":0.3213477932527574,"table_sim":0.5355796554212624,"col_score":0}],"fk_expansion_candidates":15,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"asset_locations","reason":"no_evidence"},{"table":"customers","reason":"max_tables"},{"table":"departments","reason":"max_tables"},{"table":"depreciation_schedules","reason":"max_tables"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"purchase_orders","reason":"max_tables"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":25,"total_retrieval_latency_ms":30,"sql_generated":"SELECT ba.account_number AS \"Account Number\", ba.account_name AS \"Account Name\", ba.current_balance AS \"Current Balance\" FROM fixed_assets fa INNER JOIN bank_accounts ba ON fa.asset_id = ba.bank_account_id WHERE fa.category_id IN (SELECT category_id FROM asset_categories WHERE name = 'Fixed Assets');","tables_used_in_sql":[],"explain_result":"success","rows_returned":0,"total_latency_ms":1263}
{"timestamp":"2026-01-27T20:47:48.429Z","query_id":"f4823904-cf51-4755-9cbc-d752e9d29c31","question":"How many projects are currently active?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["project_tasks","projects","project_milestones","project_phases","project_resources","project_expenses","positions","product_categories","warehouses","cost_centers","project_budgets","task_assignments"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_tasks","similarity":0.6324363750327547},{"table":"project_milestones","similarity":0.6170314556998037},{"table":"project_phases","similarity":0.6128862225489412},{"table":"projects","similarity":0.6020298260872147},{"table":"project_resources","similarity":0.6015867769428557},{"table":"project_budgets","similarity":0.5892063991800344},{"table":"project_expenses","similarity":0.5696442071698902},{"table":"positions","similarity":0.5644568182612411},{"table":"opportunity_stages","similarity":0.5589162087700763},{"table":"warehouses","similarity":0.5509035131365505},{"table":"cost_centers","similarity":0.548129265267962},{"table":"task_assignments","similarity":0.5450320760647058},{"table":"product_categories","similarity":0.539820939875771},{"table":"asset_maintenance","similarity":0.52313956323239},{"table":"business_units","similarity":0.5210598083671529}],"column_hits_per_table":{"projects":11,"project_phases":8,"project_tasks":9,"products":1,"project_milestones":7,"product_categories":1,"positions":1,"project_expenses":1,"project_resources":3,"training_courses":1,"employees":1,"warehouses":1,"business_units":1,"cost_centers":1,"vendors":1,"bank_accounts":1,"customers":1},"top_columns_per_table":{"projects":[{"column":"status","similarity":0.7039586739514128},{"column":"start_date","similarity":0.6607094006164724},{"column":"project_number","similarity":0.6518983609724518}],"project_phases":[{"column":"status","similarity":0.6689746254874316},{"column":"start_date","similarity":0.6271086432862566},{"column":"project_id","similarity":0.6166614910327677}],"project_tasks":[{"column":"status","similarity":0.6676901253189378},{"column":"completed_date","similarity":0.6374421602481329},{"column":"actual_hours","similarity":0.6316381487867313}],"products":[{"column":"is_active","similarity":0.6425708119490484}],"project_milestones":[{"column":"completed_date","similarity":0.6325660468867274},{"column":"is_billable","similarity":0.6124934562333328},{"column":"project_id","similarity":0.6076897771208767}],"product_categories":[{"column":"is_active","similarity":0.6317144051457637}],"positions":[{"column":"is_active","similarity":0.6252475888035075}],"project_expenses":[{"column":"status","similarity":0.622364299630185}],"project_resources":[{"column":"start_date","similarity":0.6206371456319261},{"column":"end_date","similarity":0.6084386815140401},{"column":"project_id","similarity":0.5910943352806449}],"training_courses":[{"column":"is_active","similarity":0.6141042575011056}],"employees":[{"column":"is_active","similarity":0.6117702012307417}],"warehouses":[{"column":"is_active","similarity":0.6079254385625211}],"business_units":[{"column":"is_active","similarity":0.6021027569519785}],"cost_centers":[{"column":"is_active","similarity":0.597901030459316}],"vendors":[{"column":"is_active","similarity":0.5950232278262507}],"bank_accounts":[{"column":"is_active","similarity":0.5888223633904216}],"customers":[{"column":"is_active","similarity":0.5831120305694527}]},"fused_scores":[{"table":"project_tasks","fused":0.7607663188762523,"table_sim":0.6324363750327547,"col_score":0.9532612346414986},{"table":"projects","fused":0.7558813280934082,"table_sim":0.6020298260872147,"col_score":0.9866585811026983},{"table":"project_milestones","fused":0.7457439834212397,"table_sim":0.6170314556998037,"col_score":0.9388127750033938},{"table":"project_phases","fused":0.7418687116489029,"table_sim":0.6128862225489412,"col_score":0.9353424452988452},{"table":"project_resources","fused":0.7308946607212918,"table_sim":0.6015867769428557,"col_score":0.9248564863889461},{"table":"project_expenses","fused":0.5160485281983859,"table_sim":0.5696442071698902,"col_score":0.4356550097411295},{"table":"positions","fused":0.5137434158217267,"table_sim":0.5644568182612411,"col_score":0.4376733121624552},{"table":"product_categories","fused":0.5007725973662764,"table_sim":0.539820939875771,"col_score":0.44220008360203455},{"table":"warehouses","fused":0.5007612306794362,"table_sim":0.5509035131365505,"col_score":0.42554780699376477},{"table":"cost_centers","fused":0.49628984768938567,"table_sim":0.548129265267962,"col_score":0.41853072132152114},{"table":"business_units","fused":0.48122465696684574,"table_sim":0.5210598083671529,"col_score":0.4214719298663849},{"table":"project_budgets","fused":0.35352383950802063,"table_sim":0.5892063991800344,"col_score":0},{"table":"opportunity_stages","fused":0.33534972526204576,"table_sim":0.5589162087700763,"col_score":0},{"table":"task_assignments","fused":0.3270192456388235,"table_sim":0.5450320760647058,"col_score":0},{"table":"asset_maintenance","fused":0.31388373793943397,"table_sim":0.52313956323239,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":14,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":16,"total_retrieval_latency_ms":21,"sql_generated":"SELECT COUNT(*) FROM projects WHERE status = 'active';","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":339}
{"timestamp":"2026-01-27T20:47:48.768Z","query_id":"9d3719a4-f56f-4a01-bea7-3571303a0b1d","question":"List all fixed assets with their purchase cost","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["fixed_assets","asset_maintenance","purchase_orders","asset_transfers","project_budgets","project_expenses","asset_categories","purchase_requisitions","depreciation_schedules","depreciation_entries","asset_locations","maintenance_types"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"fixed_assets","similarity":0.7209497053888301},{"table":"asset_maintenance","similarity":0.6308058404117752},{"table":"asset_categories","similarity":0.5912281177120349},{"table":"depreciation_schedules","similarity":0.5814813777494169},{"table":"asset_transfers","similarity":0.5810308594815269},{"table":"purchase_requisitions","similarity":0.5569747421146416},{"table":"purchase_orders","similarity":0.5506831817049027},{"table":"depreciation_entries","similarity":0.5454814933769311},{"table":"asset_locations","similarity":0.545468446655189},{"table":"requisition_lines","similarity":0.5406198549845527},{"table":"project_expenses","similarity":0.5394520045423311},{"table":"project_budgets","similarity":0.5162048498656928},{"table":"inventory_adjustments","similarity":0.5159531035642008},{"table":"sales_territories","similarity":0.5074635447871859},{"table":"adjustment_lines","similarity":0.5062944760482943}],"column_hits_per_table":{"fixed_assets":17,"asset_maintenance":8,"asset_transfers":2,"purchase_orders":5,"maintenance_types":1,"depreciation_entries":1,"depreciation_schedules":1,"products":2,"purchase_requisitions":2,"asset_categories":1,"project_expenses":2,"project_budgets":2,"sales_orders":2,"product_suppliers":1,"projects":1,"vendor_invoices":1,"budgets":1},"top_columns_per_table":{"fixed_assets":[{"column":"purchase_cost","similarity":0.8423448992143113},{"column":"purchase_date","similarity":0.7689166463133373},{"column":"disposal_amount","similarity":0.7227764959896598}],"asset_maintenance":[{"column":"cost","similarity":0.7099171439402068},{"column":"asset_id","similarity":0.6516176549413301},{"column":"status","similarity":0.6280454782739386}],"asset_transfers":[{"column":"asset_id","similarity":0.6460511870752553},{"column":"reason","similarity":0.5978803089362457}],"purchase_orders":[{"column":"total","similarity":0.6344593910735148},{"column":"shipping_cost","similarity":0.6188978318886464},{"column":"subtotal","similarity":0.6026448016407694}],"maintenance_types":[{"column":"estimated_cost","similarity":0.6142507699404941}],"depreciation_entries":[{"column":"asset_id","similarity":0.609651147848969}],"depreciation_schedules":[{"column":"asset_id","similarity":0.6056651094167285}],"products":[{"column":"unit_cost","similarity":0.6018845518779156},{"column":"list_price","similarity":0.5829432045610968}],"purchase_requisitions":[{"column":"status","similarity":0.6006593595483197},{"column":"notes","similarity":0.580625013783363}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.5981101161213059}],"project_expenses":[{"column":"amount","similarity":0.5845721523119052},{"column":"status","similarity":0.5742178119977871}],"project_budgets":[{"column":"actual_amount","similarity":0.5819665579953361},{"column":"planned_amount","similarity":0.5770144160331034}],"sales_orders":[{"column":"total","similarity":0.5794698766565994},{"column":"shipping_cost","similarity":0.5723923913919466}],"product_suppliers":[{"column":"unit_cost","similarity":0.5781850879817803}],"projects":[{"column":"budget","similarity":0.5753357955995387}],"vendor_invoices":[{"column":"total","similarity":0.5747822939355819}],"budgets":[{"column":"total_amount","similarity":0.5743122120825542}]},"fused_scores":[{"table":"fixed_assets","fused":0.92329111218169,"table_sim":0.7209497053888301,"col_score":1.22680322237098},{"table":"asset_maintenance","fused":0.7860559067350223,"table_sim":0.6308058404117752,"col_score":1.0189310062198929},{"table":"purchase_orders","fused":0.7079732318300769,"table_sim":0.5506831817049027,"col_score":0.943908307017838},{"table":"asset_transfers","fused":0.67821780545395,"table_sim":0.5810308594815269,"col_score":0.823998224412585},{"table":"project_budgets","fused":0.6579124163241709,"table_sim":0.5162048498656928,"col_score":0.8704737660118879},{"table":"project_expenses","fused":0.637890557329851,"table_sim":0.5394520045423311,"col_score":0.7855483865111307},{"table":"asset_categories","fused":0.5939809170757433,"table_sim":0.5912281177120349,"col_score":0.5981101161213059},{"table":"purchase_requisitions","fused":0.5836569678719853,"table_sim":0.5569747421146416,"col_score":0.6236803065080008},{"table":"depreciation_schedules","fused":0.5184750572863341,"table_sim":0.5814813777494169,"col_score":0.4239655765917099},{"table":"depreciation_entries","fused":0.49799121742387,"table_sim":0.5454814933769311,"col_score":0.4267558034942783},{"table":"products","fused":0.3573424616633856,"table_sim":0,"col_score":0.893356154158464},{"table":"sales_orders","fused":0.3462664289410291,"table_sim":0,"col_score":0.8656660723525728},{"table":"asset_locations","fused":0.3272810679931134,"table_sim":0.545468446655189,"col_score":0},{"table":"requisition_lines","fused":0.3243719129907316,"table_sim":0.5406198549845527,"col_score":0},{"table":"inventory_adjustments","fused":0.30957186213852045,"table_sim":0.5159531035642008,"col_score":0}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"projects","reason":"max_tables"},{"table":"requisition_lines","reason":"max_tables"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":42,"total_retrieval_latency_ms":48,"sql_generated":"SELECT fa.asset_id AS asset_id, fa.name AS name, fa.purchase_cost AS purchase_cost FROM fixed_assets fa;","tables_used_in_sql":[],"explain_result":"success","rows_returned":500,"total_latency_ms":706}
{"timestamp":"2026-01-27T20:47:49.474Z","query_id":"25115326-67d0-4dee-bfd2-735645f57d0d","question":"What are all the available leave types?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["leave_types","leave_requests","maintenance_types","account_types","employment_history","benefit_types","employees","positions","employee_benefits","asset_maintenance","chart_of_accounts","sales_territories"],"tables_from_table_retrieval":15,"tables_from_column_only":9,"tables_from_fk_expansion":2,"table_scores":[{"table":"leave_types","similarity":0.7907961003152969},{"table":"leave_requests","similarity":0.7143778015997992},{"table":"maintenance_types","similarity":0.6481400096068088},{"table":"benefit_types","similarity":0.6269933285396667},{"table":"account_types","similarity":0.6192881819056906},{"table":"positions","similarity":0.5752929625327803},{"table":"employee_benefits","similarity":0.5713679218642078},{"table":"employment_history","similarity":0.5660594097075526},{"table":"employees","similarity":0.5660053394491918},{"table":"asset_maintenance","similarity":0.5543920873977978},{"table":"chart_of_accounts","similarity":0.5502530849823464},{"table":"sales_territories","similarity":0.5497748598255436},{"table":"sales_opportunities","similarity":0.5460540206653771},{"table":"training_courses","similarity":0.5421204605814522},{"table":"asset_categories","similarity":0.537612536880944}],"column_hits_per_table":{"leave_types":5,"leave_requests":10,"maintenance_types":5,"benefit_types":5,"employment_history":2,"account_types":4,"employee_training":1,"asset_maintenance":2,"timesheets":1,"sales_orders":1,"employee_benefits":2,"positions":2,"fixed_assets":1,"employees":2,"vendor_invoices":1,"sales_opportunities":1,"purchase_requisitions":1,"stock_transfers":1,"inventory_adjustments":1,"sales_quotes":1,"sales_territories":1},"top_columns_per_table":{"leave_types":[{"column":"days_allowed","similarity":0.7686500345965878},{"column":"is_paid","similarity":0.7623841534239336},{"column":"name","similarity":0.7406312254921097}],"leave_requests":[{"column":"status","similarity":0.7444703766728187},{"column":"leave_type_id","similarity":0.7158957943298758},{"column":"days_requested","similarity":0.6957721236459536}],"maintenance_types":[{"column":"description","similarity":0.6377767194823566},{"column":"name","similarity":0.631136316452077},{"column":"type_id","similarity":0.6167514426103488}],"benefit_types":[{"column":"is_active","similarity":0.6269473121389368},{"column":"name","similarity":0.6220834198328969},{"column":"description","similarity":0.6122108465746717}],"employment_history":[{"column":"reason_for_leaving","similarity":0.6243515506921076},{"column":"position","similarity":0.5714253900200132}],"account_types":[{"column":"normal_balance","similarity":0.6149563569549518},{"column":"category","similarity":0.6045207339251893},{"column":"name","similarity":0.5905785819022606}],"employee_training":[{"column":"status","similarity":0.6084208038692348}],"asset_maintenance":[{"column":"status","similarity":0.5961072885143408},{"column":"maintenance_type_id","similarity":0.5889166627027309}],"timesheets":[{"column":"status","similarity":0.5896684755702837}],"sales_orders":[{"column":"status","similarity":0.5833814673451871}],"employee_benefits":[{"column":"benefit_type_id","similarity":0.5820988681778586},{"column":"coverage_level","similarity":0.563402375606914}],"positions":[{"column":"is_active","similarity":0.5815402830311333},{"column":"title","similarity":0.5780125325936805}],"fixed_assets":[{"column":"status","similarity":0.5779508245109969}],"employees":[{"column":"termination_date","similarity":0.5720522989676154},{"column":"gender","similarity":0.5661719915149735}],"vendor_invoices":[{"column":"status","similarity":0.5694778387064632}],"sales_opportunities":[{"column":"source","similarity":0.5693960477309942}],"purchase_requisitions":[{"column":"status","similarity":0.5692240149966709}],"stock_transfers":[{"column":"status","similarity":0.5691483787100361}],"inventory_adjustments":[{"column":"status","similarity":0.566032834035236}],"sales_quotes":[{"column":"status","similarity":0.5648321255084394}],"sales_territories":[{"column":"name","similarity":0.5628683783439146}]},"fused_scores":[{"table":"leave_types","fused":0.9271541516976758,"table_sim":0.7907961003152969,"col_score":1.131691228771244},{"table":"leave_requests","fused":0.8425926840869853,"table_sim":0.7143778015997992,"col_score":1.0349150078177645},{"table":"maintenance_types","fused":0.7488967046422195,"table_sim":0.6481400096068088,"col_score":0.9000317471953356},{"table":"account_types","fused":0.738459598710433,"table_sim":0.6192881819056906,"col_score":0.9172167239175464},{"table":"employment_history","fused":0.7036613441053773,"table_sim":0.5660594097075526,"col_score":0.9100642457021142},{"table":"benefit_types","fused":0.6888048802259811,"table_sim":0.6269933285396667,"col_score":0.7815222077554526},{"table":"employees","fused":0.6816585215595561,"table_sim":0.5660053394491918,"col_score":0.8551382947251023},{"table":"positions","fused":0.657796430181499,"table_sim":0.5752929625327803,"col_score":0.7815516316545771},{"table":"employee_benefits","fused":0.6496755449061905,"table_sim":0.5713679218642078,"col_score":0.7671369794691645},{"table":"asset_maintenance","fused":0.5819936260010764,"table_sim":0.5543920873977978,"col_score":0.6233959339059943},{"table":"sales_opportunities","fused":0.5553908314916239,"table_sim":0.5460540206653771,"col_score":0.5693960477309942},{"table":"sales_territories","fused":0.4874680618316223,"table_sim":0.5497748598255436,"col_score":0.3940078648407402},{"table":"chart_of_accounts","fused":0.3301518509894078,"table_sim":0.5502530849823464,"col_score":0},{"table":"training_courses","fused":0.32527227634887135,"table_sim":0.5421204605814522,"col_score":0},{"table":"asset_categories","fused":0.3225675221285664,"table_sim":0.537612536880944,"col_score":0}],"fk_expansion_candidates":32,"fk_expansion_added":2,"fk_expansion_blocked_count":29,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":40,"total_retrieval_latency_ms":46,"sql_generated":"SELECT lt.name FROM leave_types AS lt;","tables_used_in_sql":[],"explain_result":"success","rows_returned":8,"total_latency_ms":413}
{"timestamp":"2026-01-27T20:47:49.887Z","query_id":"180fa441-3018-429a-9256-54c22d23b79e","question":"List all training courses that are mandatory","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["training_courses","employee_training","certifications","employee_certifications","leave_types","maintenance_types","purchase_requisitions","emergency_contacts","units_of_measure","business_units","asset_maintenance","employees"],"tables_from_table_retrieval":15,"tables_from_column_only":12,"tables_from_fk_expansion":2,"table_scores":[{"table":"training_courses","similarity":0.7832587829851695},{"table":"employee_training","similarity":0.6570057454586046},{"table":"certifications","similarity":0.5900939338505992},{"table":"employee_certifications","similarity":0.5760162077924663},{"table":"maintenance_types","similarity":0.49281971341629327},{"table":"leave_types","similarity":0.49016105575765045},{"table":"emergency_contacts","similarity":0.4738555676585048},{"table":"account_types","similarity":0.47279576060367634},{"table":"business_units","similarity":0.47237885502957644},{"table":"units_of_measure","similarity":0.46939263092633876},{"table":"asset_maintenance","similarity":0.4667394047579505},{"table":"purchase_requisitions","similarity":0.4654660756610647},{"table":"employees","similarity":0.4617701057229451},{"table":"positions","similarity":0.46160419508462314},{"table":"countries","similarity":0.46045896330476366}],"column_hits_per_table":{"training_courses":7,"employee_training":7,"certifications":5,"employee_certifications":6,"leave_types":3,"sales_orders":1,"purchase_requisitions":2,"maintenance_types":4,"emergency_contacts":1,"project_milestones":2,"benefit_types":1,"business_units":1,"requisition_lines":1,"product_suppliers":1,"project_resources":1,"project_tasks":1,"reorder_rules":1,"units_of_measure":1,"projects":1,"employee_benefits":1,"inventory_levels":1,"vendor_contacts":1},"top_columns_per_table":{"training_courses":[{"column":"is_mandatory","similarity":0.8183425520777443},{"column":"description","similarity":0.7152546556290251},{"column":"cost","similarity":0.703103057924051}],"employee_training":[{"column":"course_id","similarity":0.6726632190515707},{"column":"scheduled_date","similarity":0.6406033902015907},{"column":"completion_date","similarity":0.6314212095563025}],"certifications":[{"column":"description","similarity":0.6043807811754061},{"column":"issuing_body","similarity":0.5890949692558212},{"column":"validity_years","similarity":0.5683544613271275}],"employee_certifications":[{"column":"certification_id","similarity":0.5641935913194706},{"column":"cert_id","similarity":0.5530637459134944},{"column":"certificate_number","similarity":0.5527992455216449}],"leave_types":[{"column":"requires_approval","similarity":0.5414363431590249},{"column":"is_paid","similarity":0.5069584623421746},{"column":"days_allowed","similarity":0.48500668213425}],"sales_orders":[{"column":"required_date","similarity":0.522537932147881}],"purchase_requisitions":[{"column":"required_date","similarity":0.5198974320372106},{"column":"notes","similarity":0.48367699787532503}],"maintenance_types":[{"column":"description","similarity":0.515090472968373},{"column":"frequency_months","similarity":0.49330482595376823},{"column":"estimated_cost","similarity":0.49293759341419907}],"emergency_contacts":[{"column":"is_primary","similarity":0.5039578758679507}],"project_milestones":[{"column":"is_billable","similarity":0.49776557203974603},{"column":"description","similarity":0.4804638717229941}],"benefit_types":[{"column":"is_active","similarity":0.494470742028722}],"business_units":[{"column":"is_active","similarity":0.4928108442926942}],"requisition_lines":[{"column":"quantity","similarity":0.4922188905326943}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.48865331705843196}],"project_resources":[{"column":"hourly_rate","similarity":0.4852972701989151}],"project_tasks":[{"column":"priority","similarity":0.4836687970545305}],"reorder_rules":[{"column":"max_quantity","similarity":0.4829698043754158}],"units_of_measure":[{"column":"abbreviation","similarity":0.4823545888550096}],"projects":[{"column":"priority","similarity":0.48215945015056816}],"employee_benefits":[{"column":"coverage_level","similarity":0.48183762318937706}],"inventory_levels":[{"column":"quantity_reserved","similarity":0.48177652205374843}],"vendor_contacts":[{"column":"is_primary","similarity":0.4800372811419217}]},"fused_scores":[{"table":"training_courses","fused":0.9379129022070096,"table_sim":0.7832587829851695,"col_score":1.1698940810397698},{"table":"employee_training","fused":0.7767290452670595,"table_sim":0.6570057454586046,"col_score":0.956313994979742},{"table":"certifications","fused":0.7033652402781134,"table_sim":0.5900939338505992,"col_score":0.8732721999193849},{"table":"employee_certifications","fused":0.6746819403171497,"table_sim":0.5760162077924663,"col_score":0.8226805391041746},{"table":"leave_types","fused":0.6076725071450502,"table_sim":0.49016105575765045,"col_score":0.7839396842261499},{"table":"maintenance_types","fused":0.591601277114123,"table_sim":0.49281971341629327,"col_score":0.7397736226608678},{"table":"purchase_requisitions","fused":0.5549533979140686,"table_sim":0.4654660756610647,"col_score":0.6891843812935744},{"table":"emergency_contacts","fused":0.48589649094228315,"table_sim":0.4738555676585048,"col_score":0.5039578758679507},{"table":"units_of_measure","fused":0.47457741409780707,"table_sim":0.46939263092633876,"col_score":0.4823545888550096},{"table":"business_units","fused":0.42141434941970024,"table_sim":0.47237885502957644,"col_score":0.3449675910048859},{"table":"account_types","fused":0.2836774563622058,"table_sim":0.47279576060367634,"col_score":0},{"table":"asset_maintenance","fused":0.2800436428547703,"table_sim":0.4667394047579505,"col_score":0},{"table":"employees","fused":0.27706206343376705,"table_sim":0.4617701057229451,"col_score":0},{"table":"positions","fused":0.27696251705077385,"table_sim":0.46160419508462314,"col_score":0},{"table":"countries","fused":0.2762753779828582,"table_sim":0.46045896330476366,"col_score":0}],"fk_expansion_candidates":7,"fk_expansion_added":2,"fk_expansion_blocked_count":5,"fk_expansion_blocked":[{"table":"departments","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":20,"total_retrieval_latency_ms":26,"sql_generated":"SELECT tc.name AS course_name, tc.duration_hours, tc.cost, tc.is_active FROM training_courses tc WHERE tc.is_mandatory = TRUE;","tables_used_in_sql":[],"explain_result":"success","rows_returned":4,"total_latency_ms":799}
{"timestamp":"2026-01-27T20:47:50.686Z","query_id":"c2d06250-0f8e-495c-8940-72e7f52d03e9","question":"What are the different opportunity stages?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["opportunity_stages","sales_opportunities","project_phases","project_tasks","sales_quotes","positions","employment_history","vendor_contacts","task_assignments","benefit_types","projects","timesheet_entries"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"opportunity_stages","similarity":0.8221357699980866},{"table":"sales_opportunities","similarity":0.705452578214936},{"table":"project_phases","similarity":0.5910011427333453},{"table":"project_tasks","similarity":0.5856436723604402},{"table":"positions","similarity":0.5399052196547368},{"table":"asset_categories","similarity":0.5283525308586682},{"table":"benefit_types","similarity":0.5259100173290491},{"table":"project_milestones","similarity":0.5171558130474864},{"table":"inventory_levels","similarity":0.5163777584176084},{"table":"vendor_contacts","similarity":0.5161594726009905},{"table":"task_assignments","similarity":0.5159234125463281},{"table":"sales_quotes","similarity":0.5145326653191699},{"table":"timesheet_entries","similarity":0.5109343321958333},{"table":"employment_history","similarity":0.5109304894618054},{"table":"vendors","similarity":0.509941756909679}],"column_hits_per_table":{"opportunity_stages":6,"sales_opportunities":11,"project_phases":8,"sales_quotes":2,"project_tasks":4,"projects":3,"positions":1,"employment_history":1,"stock_transfers":1,"vendor_invoices":1,"vendor_contacts":1,"sales_orders":1,"performance_reviews":1,"purchase_requisitions":1,"task_assignments":1,"employee_training":1,"timesheets":1,"project_milestones":1,"journal_entries":1,"purchase_orders":1,"benefit_types":1,"warehouse_locations":1},"top_columns_per_table":{"opportunity_stages":[{"column":"name","similarity":0.8022669439071034},{"column":"sequence","similarity":0.7826323931295351},{"column":"probability","similarity":0.7818078987294276}],"sales_opportunities":[{"column":"stage_id","similarity":0.7199852660162092},{"column":"source","similarity":0.6694163213892567},{"column":"name","similarity":0.6490089853551896}],"project_phases":[{"column":"status","similarity":0.6164785012384887},{"column":"start_date","similarity":0.6071014985723452},{"column":"description","similarity":0.599519601414315}],"sales_quotes":[{"column":"opportunity_id","similarity":0.613132018194432},{"column":"status","similarity":0.5429687740505206}],"project_tasks":[{"column":"priority","similarity":0.5861525983204229},{"column":"phase_id","similarity":0.5727236988248975},{"column":"status","similarity":0.5679605460087266}],"projects":[{"column":"priority","similarity":0.5824136089158493},{"column":"status","similarity":0.5614455668233992},{"column":"start_date","similarity":0.5455112148719066}],"positions":[{"column":"title","similarity":0.570845518096384}],"employment_history":[{"column":"position","similarity":0.5638653453378809}],"stock_transfers":[{"column":"status","similarity":0.5612083430408489}],"vendor_invoices":[{"column":"status","similarity":0.5583699388667535}],"vendor_contacts":[{"column":"title","similarity":0.555419734524806}],"sales_orders":[{"column":"status","similarity":0.5534662786155742}],"performance_reviews":[{"column":"review_period_start","similarity":0.5523942655144478}],"purchase_requisitions":[{"column":"status","similarity":0.5523731471352765}],"task_assignments":[{"column":"role","similarity":0.5518232752608079}],"employee_training":[{"column":"status","similarity":0.5505061546622828}],"timesheets":[{"column":"status","similarity":0.5501145087173305}],"project_milestones":[{"column":"name","similarity":0.5480794501954276}],"journal_entries":[{"column":"status","similarity":0.5450907789109756}],"purchase_orders":[{"column":"status","similarity":0.5448321917989046}],"benefit_types":[{"column":"name","similarity":0.5417057889558006}],"warehouse_locations":[{"column":"aisle","similarity":0.541280937948999}]},"fused_scores":[{"table":"opportunity_stages","fused":0.9626959989965516,"table_sim":0.8221357699980866,"col_score":1.1735363424942489},{"table":"sales_opportunities","fused":0.8201333553810458,"table_sim":0.705452578214936,"col_score":0.9921545211302105},{"table":"project_phases","fused":0.7145727552551784,"table_sim":0.5910011427333453,"col_score":0.899930174037928},{"table":"project_tasks","fused":0.6963386277407597,"table_sim":0.5856436723604402,"col_score":0.8623810608112388},{"table":"sales_quotes","fused":0.5564121926530157,"table_sim":0.5145326653191699,"col_score":0.6192314836537846},{"table":"positions","fused":0.5522813390313956,"table_sim":0.5399052196547368,"col_score":0.570845518096384},{"table":"employment_history","fused":0.5321044318122357,"table_sim":0.5109304894618054,"col_score":0.5638653453378809},{"table":"vendor_contacts","fused":0.5318635773705167,"table_sim":0.5161594726009905,"col_score":0.555419734524806},{"table":"task_assignments","fused":0.53028335763212,"table_sim":0.5159234125463281,"col_score":0.5518232752608079},{"table":"benefit_types","fused":0.46722363130505357,"table_sim":0.5259100173290491,"col_score":0.3791940522690604},{"table":"project_milestones","fused":0.46375573388321156,"table_sim":0.5171558130474864,"col_score":0.3836556151367993},{"table":"projects","fused":0.34206768654072106,"table_sim":0,"col_score":0.8551692163518025},{"table":"asset_categories","fused":0.3170115185152009,"table_sim":0.5283525308586682,"col_score":0},{"table":"inventory_levels","fused":0.309826655050565,"table_sim":0.5163777584176084,"col_score":0},{"table":"timesheet_entries","fused":0.30656059931749996,"table_sim":0.5109343321958333,"col_score":0}],"fk_expansion_candidates":9,"fk_expansion_added":2,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"vendors","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":22,"total_retrieval_latency_ms":29,"sql_generated":"SELECT o.name AS stage_name FROM sales_opportunities s JOIN opportunity_stages o ON s.stage_id = o.stage_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":500,"total_latency_ms":652}
{"timestamp":"2026-01-27T20:47:51.339Z","query_id":"797418b6-53de-4c10-b48a-fbb54788a0f8","question":"List all countries in the system","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["countries","states_provinces","currencies","tax_rates","sales_regions","fiscal_periods","certifications","cities","opportunity_stages","bank_accounts","bank_transactions","chart_of_accounts"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"countries","similarity":0.7008865097920517},{"table":"states_provinces","similarity":0.6734638308582259},{"table":"tax_rates","similarity":0.6116670532927957},{"table":"sales_territories","similarity":0.5947794602061558},{"table":"currencies","similarity":0.5771716778997639},{"table":"sales_regions","similarity":0.5687569498363646},{"table":"cities","similarity":0.5643183199830137},{"table":"bank_accounts","similarity":0.5493286779600007},{"table":"customers","similarity":0.5473386397932745},{"table":"fiscal_periods","similarity":0.5354796670765565},{"table":"budgets","similarity":0.5305192103519173},{"table":"units_of_measure","similarity":0.530053961527814},{"table":"chart_of_accounts","similarity":0.5269687220084575},{"table":"certifications","similarity":0.5251628602461479},{"table":"opportunity_stages","similarity":0.516133383734989}],"column_hits_per_table":{"countries":4,"states_provinces":4,"tax_rates":3,"currencies":5,"sales_regions":4,"sales_territories":3,"cities":2,"departments":2,"fiscal_periods":4,"bank_accounts":2,"certifications":2,"opportunity_stages":3,"customers":1,"bank_transactions":2,"purchase_orders":1,"employee_certifications":1,"depreciation_schedules":1,"purchase_requisitions":1,"budgets":2,"sales_orders":1,"chart_of_accounts":1,"units_of_measure":1},"top_columns_per_table":{"countries":[{"column":"iso_code","similarity":0.7094552565742085},{"column":"country_id","similarity":0.7034508481088982},{"column":"phone_code","similarity":0.6971526730933061}],"states_provinces":[{"column":"country_id","similarity":0.6585897097894581},{"column":"abbreviation","similarity":0.6227531297693802},{"column":"state_id","similarity":0.615041526003746}],"tax_rates":[{"column":"country_id","similarity":0.6476800041509223},{"column":"tax_type","similarity":0.5346619654310693},{"column":"is_active","similarity":0.5310671397615585}],"currencies":[{"column":"symbol","similarity":0.6017932772414536},{"column":"code","similarity":0.5922775211340294},{"column":"exchange_rate","similarity":0.5871891787003841}],"sales_regions":[{"column":"region_id","similarity":0.5979708903249663},{"column":"target_revenue","similarity":0.5885873954148771},{"column":"name","similarity":0.5800101337735474}],"sales_territories":[{"column":"region_id","similarity":0.5886237086003984},{"column":"territory_id","similarity":0.5882437418814783},{"column":"name","similarity":0.5535958855949109}],"cities":[{"column":"state_id","similarity":0.5632563689816771},{"column":"postal_code","similarity":0.5457995889050259}],"departments":[{"column":"budget","similarity":0.5599421293881339},{"column":"department_id","similarity":0.5287387143275804}],"fiscal_periods":[{"column":"period_id","similarity":0.5574490774711056},{"column":"period_number","similarity":0.5426208530973385},{"column":"is_closed","similarity":0.5359946713020163}],"bank_accounts":[{"column":"currency_id","similarity":0.5528259934931027},{"column":"account_number","similarity":0.527840068757793}],"certifications":[{"column":"issuing_body","similarity":0.5492583443931628},{"column":"validity_years","similarity":0.5292809185879692}],"opportunity_stages":[{"column":"is_won","similarity":0.5445577792640248},{"column":"stage_id","similarity":0.5312529758785186},{"column":"is_closed","similarity":0.5279107666014274}],"customers":[{"column":"currency_id","similarity":0.5418522210198313}],"bank_transactions":[{"column":"reconciled","similarity":0.5412872186561721},{"column":"reference","similarity":0.5335321048989391}],"purchase_orders":[{"column":"total","similarity":0.5378236017835311}],"employee_certifications":[{"column":"certificate_number","similarity":0.5358775279065638}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5330783009686003}],"purchase_requisitions":[{"column":"requisition_number","similarity":0.5326439676865584}],"budgets":[{"column":"total_amount","similarity":0.5320906832758429},{"column":"status","similarity":0.5283826109384306}],"sales_orders":[{"column":"total","similarity":0.5319665810732878}],"chart_of_accounts":[{"column":"account_number","similarity":0.5295972929492838}],"units_of_measure":[{"column":"abbreviation","similarity":0.5291537257765798}]},"fused_scores":[{"table":"countries","fused":0.8437445431235756,"table_sim":0.7008865097920517,"col_score":1.0580315931208615},{"table":"states_provinces","fused":0.7453821097932118,"table_sim":0.6734638308582259,"col_score":0.8532595281956905},{"table":"currencies","fused":0.7054758218632456,"table_sim":0.5771716778997639,"col_score":0.8979320378084683},{"table":"tax_rates","fused":0.6715402187292342,"table_sim":0.6116670532927957,"col_score":0.761349966883892},{"table":"sales_regions","fused":0.6604050527132649,"table_sim":0.5687569498363646,"col_score":0.7978772070286153},{"table":"fiscal_periods","fused":0.6455350757452726,"table_sim":0.5354796670765565,"col_score":0.8106181887483467},{"table":"certifications","fused":0.6406572376225477,"table_sim":0.5251628602461479,"col_score":0.8138988036871474},{"table":"cities","fused":0.6357667192092533,"table_sim":0.5643183199830137,"col_score":0.7429393180486128},{"table":"opportunity_stages","fused":0.6330852952668888,"table_sim":0.516133383734989,"col_score":0.8085131625647386},{"table":"bank_accounts","fused":0.618128873368152,"table_sim":0.5493286779600007,"col_score":0.7213291664803789},{"table":"budgets","fused":0.6051213650528678,"table_sim":0.5305192103519173,"col_score":0.7170245971042936},{"table":"sales_territories","fused":0.6040364383952119,"table_sim":0.5947794602061558,"col_score":0.6179219056787962},{"table":"units_of_measure","fused":0.5296938672273204,"table_sim":0.530053961527814,"col_score":0.5291537257765798},{"table":"chart_of_accounts","fused":0.528020150384788,"table_sim":0.5269687220084575,"col_score":0.5295972929492838},{"table":"customers","fused":0.4801218057615174,"table_sim":0.5473386397932745,"col_score":0.3792965547138819}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":8,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"customers","reason":"max_tables"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"max_tables"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_territories","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":50,"total_retrieval_latency_ms":55,"sql_generated":"SELECT c.name AS country_name FROM countries c;","tables_used_in_sql":[],"explain_result":"success","rows_returned":10,"total_latency_ms":362}
{"timestamp":"2026-01-27T20:47:51.702Z","query_id":"d2294add-91d0-4967-9ee7-8061755f7265","question":"How many departments are there?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["departments","inventory_levels","warehouse_locations","employees","asset_categories","states_provinces","sales_territories","business_units","sales_regions","goods_receipts","cost_centers","budgets"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"departments","similarity":0.6407681888721862},{"table":"positions","similarity":0.5909863911053447},{"table":"cost_centers","similarity":0.574249226454042},{"table":"inventory_levels","similarity":0.5635818909554858},{"table":"budgets","similarity":0.5602507290061229},{"table":"sales_territories","similarity":0.5569437466660422},{"table":"employees","similarity":0.5540635075766074},{"table":"asset_categories","similarity":0.5524861703308546},{"table":"sales_regions","similarity":0.5484119711938432},{"table":"business_units","similarity":0.5474055608256236},{"table":"warehouse_locations","similarity":0.5405733104094866},{"table":"warehouses","similarity":0.5397302827647444},{"table":"receipt_lines","similarity":0.5366200658119428},{"table":"states_provinces","similarity":0.5358430398633552},{"table":"goods_receipts","similarity":0.5302924907564094}],"column_hits_per_table":{"departments":6,"positions":1,"budgets":1,"purchase_requisitions":1,"cost_centers":1,"employees":3,"warehouse_locations":5,"inventory_levels":5,"business_units":2,"sales_orders":1,"countries":2,"receipt_lines":1,"sales_territories":2,"states_provinces":2,"asset_categories":4,"employee_certifications":1,"goods_receipts":1,"inventory_transactions":1,"product_categories":2,"asset_locations":1,"sales_regions":2,"journal_entries":1,"warehouses":1,"chart_of_accounts":1,"account_types":1,"fixed_assets":1},"top_columns_per_table":{"departments":[{"column":"name","similarity":0.6941972522780406},{"column":"department_id","similarity":0.6602069080482118},{"column":"budget","similarity":0.6469841378823648}],"positions":[{"column":"department_id","similarity":0.6231663015950821}],"budgets":[{"column":"department_id","similarity":0.593281818376156}],"purchase_requisitions":[{"column":"department_id","similarity":0.5925097694857517}],"cost_centers":[{"column":"department_id","similarity":0.5899520016540825}],"employees":[{"column":"department_id","similarity":0.5869672961244217},{"column":"employee_number","similarity":0.5336637347597826},{"column":"phone","similarity":0.5302169880417581}],"warehouse_locations":[{"column":"capacity","similarity":0.5585006436523671},{"column":"aisle","similarity":0.5402403475702542},{"column":"bin","similarity":0.5395965062528575}],"inventory_levels":[{"column":"quantity_available","similarity":0.5536773605505522},{"column":"location_id","similarity":0.5478183684084642},{"column":"warehouse_id","similarity":0.5386657375761456}],"business_units":[{"column":"is_active","similarity":0.5483697953425726},{"column":"name","similarity":0.5312957563157671}],"sales_orders":[{"column":"order_number","similarity":0.5443598297457732}],"countries":[{"column":"name","similarity":0.5423505833277624},{"column":"iso_code","similarity":0.5306770884511268}],"receipt_lines":[{"column":"location_id","similarity":0.541901303657067}],"sales_territories":[{"column":"territory_id","similarity":0.5409487686207964},{"column":"name","similarity":0.5343562590819858}],"states_provinces":[{"column":"abbreviation","similarity":0.5407121012597066},{"column":"name","similarity":0.531882867182094}],"asset_categories":[{"column":"category_id","similarity":0.5392003897260558},{"column":"depreciation_method","similarity":0.5319818505729739},{"column":"name","similarity":0.5291238140761095}],"employee_certifications":[{"column":"certificate_number","similarity":0.5373080593402337}],"goods_receipts":[{"column":"receipt_number","similarity":0.5364792634452933}],"inventory_transactions":[{"column":"location_id","similarity":0.5361046916920993}],"product_categories":[{"column":"is_active","similarity":0.5347372390015604},{"column":"category_id","similarity":0.5276640423111497}],"asset_locations":[{"column":"room","similarity":0.5344524415418452}],"sales_regions":[{"column":"manager_id","similarity":0.5307027431815718},{"column":"name","similarity":0.5263871057906565}],"journal_entries":[{"column":"entry_number","similarity":0.5287182520724618}],"warehouses":[{"column":"is_active","similarity":0.5286972556869094}],"chart_of_accounts":[{"column":"account_number","similarity":0.5279529362943834}],"account_types":[{"column":"category","similarity":0.526499449669073}],"fixed_assets":[{"column":"category_id","similarity":0.5261865346648418}]},"fused_scores":[{"table":"departments","fused":0.7404421837951833,"table_sim":0.6407681888721862,"col_score":0.889953176179679},{"table":"inventory_levels","fused":0.6669469201400264,"table_sim":0.5635818909554858,"col_score":0.8219944639168373},{"table":"warehouse_locations","fused":0.6557923132206898,"table_sim":0.5405733104094866,"col_score":0.8286208174374942},{"table":"employees","fused":0.651946996058229,"table_sim":0.5540635075766074,"col_score":0.7987722287806616},{"table":"asset_categories","fused":0.6495296324944673,"table_sim":0.5524861703308546,"col_score":0.7950948257398862},{"table":"states_provinces","fused":0.612254265827389,"table_sim":0.5358430398633552,"col_score":0.7268711047734395},{"table":"sales_territories","fused":0.5604417794849264,"table_sim":0.5569437466660422,"col_score":0.5656888287132525},{"table":"business_units","fused":0.5563682850755018,"table_sim":0.5474055608256236,"col_score":0.5698123714503193},{"table":"sales_regions","fused":0.5513381456178379,"table_sim":0.5484119711938432,"col_score":0.5557274072538301},{"table":"goods_receipts","fused":0.532767199831963,"table_sim":0.5302924907564094,"col_score":0.5364792634452933},{"table":"positions","fused":0.5290783991098298,"table_sim":0.5909863911053447,"col_score":0.43621641111655746},{"table":"cost_centers","fused":0.5097360963355683,"table_sim":0.574249226454042,"col_score":0.4129664011578577},{"table":"budgets","fused":0.5022693465489974,"table_sim":0.5602507290061229,"col_score":0.4152972728633092},{"table":"receipt_lines","fused":0.4737044045111444,"table_sim":0.5366200658119428,"col_score":0.3793309125599469},{"table":"warehouses","fused":0.47187340125118127,"table_sim":0.5397302827647444,"col_score":0.37008807898083657}],"fk_expansion_candidates":36,"fk_expansion_added":2,"fk_expansion_blocked_count":28,"fk_expansion_blocked":[{"table":"employment_history","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"warehouses","reason":"max_tables"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"countries","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"max_tables"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"employee_salaries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"cities","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"receipt_lines","reason":"max_tables"},{"table":"products","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":48,"total_retrieval_latency_ms":54,"sql_generated":"SELECT COUNT(*) FROM departments;","tables_used_in_sql":[],"explain_result":"success","rows_returned":1,"total_latency_ms":355}
{"timestamp":"2026-01-27T20:47:52.057Z","query_id":"96776866-24ab-494c-9a6b-ea2629f2409a","question":"List all units of measure","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["units_of_measure","products","requisition_lines","currencies","sales_orders","adjustment_lines","business_units","sales_regions","asset_categories","states_provinces","countries","inventory_adjustments"],"tables_from_table_retrieval":15,"tables_from_column_only":13,"tables_from_fk_expansion":2,"table_scores":[{"table":"units_of_measure","similarity":0.8089934324181249},{"table":"products","similarity":0.6263866411837252},{"table":"business_units","similarity":0.6082946070315649},{"table":"currencies","similarity":0.5785280842826401},{"table":"sales_regions","similarity":0.5709271404332362},{"table":"sales_territories","similarity":0.5693966691739235},{"table":"countries","similarity":0.5676275319870521},{"table":"asset_categories","similarity":0.5659467183764512},{"table":"states_provinces","similarity":0.5592331745887797},{"table":"requisition_lines","similarity":0.5583095777203371},{"table":"certifications","similarity":0.5559645378048772},{"table":"tax_rates","similarity":0.5510295392649189},{"table":"adjustment_lines","similarity":0.5399153135407744},{"table":"sales_orders","similarity":0.5334992405089671},{"table":"inventory_adjustments","similarity":0.5331747868814581}],"column_hits_per_table":{"units_of_measure":5,"products":3,"business_units":5,"requisition_lines":3,"purchase_orders":3,"sales_orders":3,"currencies":3,"product_suppliers":1,"departments":1,"vendor_invoice_lines":1,"sales_regions":1,"inventory_transactions":1,"order_lines":3,"po_lines":1,"quote_lines":3,"adjustment_lines":3,"inventory_levels":3,"asset_categories":1,"tax_rates":1,"budgets":1,"sales_quotes":1,"transfer_lines":1,"project_milestones":1,"states_provinces":1},"top_columns_per_table":{"units_of_measure":[{"column":"abbreviation","similarity":0.7908596870464625},{"column":"conversion_factor","similarity":0.7888286633130566},{"column":"base_uom_id","similarity":0.7640196738182461}],"products":[{"column":"uom_id","similarity":0.7066301376353167},{"column":"unit_cost","similarity":0.645047938032986},{"column":"weight","similarity":0.5991041081015385}],"business_units":[{"column":"unit_id","similarity":0.641535708551069},{"column":"name","similarity":0.619264219383008},{"column":"parent_unit_id","similarity":0.6183248611809289}],"requisition_lines":[{"column":"estimated_unit_cost","similarity":0.6408702119064383},{"column":"quantity","similarity":0.60563150403585},{"column":"estimated_total","similarity":0.6022013259478313}],"purchase_orders":[{"column":"total","similarity":0.6185750233926293},{"column":"tax_amount","similarity":0.6044881564028687},{"column":"subtotal","similarity":0.5921825679677115}],"sales_orders":[{"column":"total","similarity":0.6151081698617773},{"column":"tax_amount","similarity":0.5989576895110381},{"column":"subtotal","similarity":0.5899469028603763}],"currencies":[{"column":"exchange_rate","similarity":0.6121012209509241},{"column":"code","similarity":0.5831850755185266},{"column":"symbol","similarity":0.5817000993637726}],"product_suppliers":[{"column":"unit_cost","similarity":0.6086576309378499}],"departments":[{"column":"budget","similarity":0.6073768063072543}],"vendor_invoice_lines":[{"column":"unit_cost","similarity":0.6069149029756971}],"sales_regions":[{"column":"target_revenue","similarity":0.6030903855357957}],"inventory_transactions":[{"column":"quantity","similarity":0.6014447625236534}],"order_lines":[{"column":"unit_price","similarity":0.6010852874698508},{"column":"line_total","similarity":0.5898125509820846},{"column":"quantity","similarity":0.5808820575005385}],"po_lines":[{"column":"unit_cost","similarity":0.5994543665297027}],"quote_lines":[{"column":"unit_price","similarity":0.5969998512857845},{"column":"quantity","similarity":0.5845299298536462},{"column":"line_total","similarity":0.5817307536871642}],"adjustment_lines":[{"column":"quantity_before","similarity":0.59599905061019},{"column":"quantity_change","similarity":0.5898155994713205},{"column":"quantity_after","similarity":0.5894162707009223}],"inventory_levels":[{"column":"quantity_available","similarity":0.5953692846871987},{"column":"quantity_reserved","similarity":0.5953692437147827},{"column":"quantity_on_hand","similarity":0.5833133095093345}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.5917112785912468}],"tax_rates":[{"column":"rate","similarity":0.5877911896124333}],"budgets":[{"column":"total_amount","similarity":0.5860142614107526}],"sales_quotes":[{"column":"total","similarity":0.5855133877859668}],"transfer_lines":[{"column":"quantity_transferred","similarity":0.5854636892263618}],"project_milestones":[{"column":"amount","similarity":0.5846729861578354}],"states_provinces":[{"column":"abbreviation","similarity":0.5831025103571312}]},"fused_scores":[{"table":"units_of_measure","fused":0.9595056669320713,"table_sim":0.8089934324181249,"col_score":1.1852740187029909},{"table":"products","fused":0.7536719815437372,"table_sim":0.6263866411837252,"col_score":0.9445999920837552},{"table":"requisition_lines","fused":0.7124601322019475,"table_sim":0.5583095777203371,"col_score":0.9436859639243633},{"table":"currencies","fused":0.708594354053659,"table_sim":0.5785280842826401,"col_score":0.9036937587101874},{"table":"sales_orders","fused":0.6859343501522988,"table_sim":0.5334992405089671,"col_score":0.9145870146172963},{"table":"adjustment_lines","fused":0.6803119282628047,"table_sim":0.5399153135407744,"col_score":0.8909068503458502},{"table":"business_units","fused":0.6313037533268594,"table_sim":0.6082946070315649,"col_score":0.6658174727698011},{"table":"sales_regions","fused":0.5837924384742601,"table_sim":0.5709271404332362,"col_score":0.6030903855357957},{"table":"asset_categories","fused":0.5762525424623695,"table_sim":0.5659467183764512,"col_score":0.5917112785912468},{"table":"states_provinces","fused":0.5687809088961203,"table_sim":0.5592331745887797,"col_score":0.5831025103571312},{"table":"tax_rates","fused":0.5657341994039247,"table_sim":0.5510295392649189,"col_score":0.5877911896124333},{"table":"purchase_orders","fused":0.36832764063762546,"table_sim":0,"col_score":0.9208191015940637},{"table":"order_lines","fused":0.3583966251843573,"table_sim":0,"col_score":0.8959915629608931},{"table":"inventory_levels","fused":0.3572215626178361,"table_sim":0,"col_score":0.8930539065445902},{"table":"quote_lines","fused":0.35570592648504307,"table_sim":0,"col_score":0.8892648162126076}],"fk_expansion_candidates":23,"fk_expansion_added":2,"fk_expansion_blocked_count":16,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"bank_accounts","reason":"no_evidence"},{"table":"cities","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"inventory_levels","reason":"max_tables"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"order_lines","reason":"max_tables"},{"table":"po_lines","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"product_suppliers","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"quote_lines","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"sales_territories","reason":"max_tables"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":32,"total_retrieval_latency_ms":38,"sql_generated":"SELECT uom.name AS unit_of_measure_name FROM units_of_measure uom;","tables_used_in_sql":[],"explain_result":"success","rows_returned":11,"total_latency_ms":463}
{"timestamp":"2026-01-27T20:47:52.520Z","query_id":"1afff493-387b-4e8e-b98a-33dcf06e23f7","question":"What fiscal years exist in the system?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["fiscal_years","fiscal_periods","budgets","depreciation_schedules","depreciation_entries","budget_lines","project_budgets","project_expenses","departments","project_milestones","journal_entries","projects"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"fiscal_years","similarity":0.7923960498118316},{"table":"fiscal_periods","similarity":0.7616670856526071},{"table":"budgets","similarity":0.6911637589323553},{"table":"journal_entries","similarity":0.6269724979465695},{"table":"budget_lines","similarity":0.6218203134963756},{"table":"depreciation_entries","similarity":0.6167782937248956},{"table":"depreciation_schedules","similarity":0.5985836737050324},{"table":"tax_rates","similarity":0.5716127675571235},{"table":"project_budgets","similarity":0.5656182034505703},{"table":"departments","similarity":0.5523947282192829},{"table":"opportunity_stages","similarity":0.5504537485994739},{"table":"sales_regions","similarity":0.5448968436545046},{"table":"project_expenses","similarity":0.5436618291443818},{"table":"project_milestones","similarity":0.5414688649545092},{"table":"timesheet_entries","similarity":0.5409769768138163}],"column_hits_per_table":{"fiscal_years":5,"fiscal_periods":7,"budgets":7,"budget_lines":3,"depreciation_entries":3,"journal_entries":1,"depreciation_schedules":7,"departments":1,"project_expenses":2,"project_budgets":5,"tax_rates":1,"goods_receipts":1,"projects":1,"project_milestones":1,"timesheet_entries":1,"certifications":1,"performance_reviews":1,"asset_categories":1,"opportunity_stages":1},"top_columns_per_table":{"fiscal_years":[{"column":"year","similarity":0.79289185497887},{"column":"start_date","similarity":0.7915481870907012},{"column":"is_closed","similarity":0.7687751840462032}],"fiscal_periods":[{"column":"start_date","similarity":0.7659921609127918},{"column":"period_number","similarity":0.7503599279176923},{"column":"fiscal_year_id","similarity":0.7427677986256532}],"budgets":[{"column":"fiscal_year_id","similarity":0.7119377164190824},{"column":"status","similarity":0.6301145472980343},{"column":"total_amount","similarity":0.6173246359192148}],"budget_lines":[{"column":"period_id","similarity":0.6801393090386698},{"column":"amount","similarity":0.5964392433040447},{"column":"budget_id","similarity":0.5771887798868078}],"depreciation_entries":[{"column":"period_id","similarity":0.6644590594465214},{"column":"entry_date","similarity":0.6182044744233723},{"column":"accumulated_depreciation","similarity":0.591719344216716}],"journal_entries":[{"column":"period_id","similarity":0.6584803744495903}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.6374273471660927},{"column":"start_date","similarity":0.6327992496100886},{"column":"useful_life_months","similarity":0.6309634564637141}],"departments":[{"column":"budget","similarity":0.6251109583075001}],"project_expenses":[{"column":"expense_date","similarity":0.6152948115721372},{"column":"is_billable","similarity":0.6022943783818646}],"project_budgets":[{"column":"category","similarity":0.6108356164669405},{"column":"actual_amount","similarity":0.604739033656996},{"column":"planned_amount","similarity":0.5906958847025185}],"tax_rates":[{"column":"is_active","similarity":0.6102719456894563}],"goods_receipts":[{"column":"receipt_date","similarity":0.6033126792490972}],"projects":[{"column":"budget","similarity":0.5988151518250451}],"project_milestones":[{"column":"is_billable","similarity":0.5985840177634407}],"timesheet_entries":[{"column":"is_billable","similarity":0.5976425797634352}],"certifications":[{"column":"validity_years","similarity":0.5951280377775735}],"performance_reviews":[{"column":"review_period_start","similarity":0.5797933929886745}],"asset_categories":[{"column":"useful_life_years","similarity":0.5756856657958654}],"opportunity_stages":[{"column":"is_closed","similarity":0.5741087121255803}]},"fused_scores":[{"table":"fiscal_years","fused":0.9509040092967873,"table_sim":0.7923960498118316,"col_score":1.1886659485242206},{"table":"fiscal_periods","fused":0.9134691013402194,"table_sim":0.7616670856526071,"col_score":1.141172124871638},{"table":"budgets","fused":0.7612993900257706,"table_sim":0.6911637589323553,"col_score":0.8665028366658937},{"table":"depreciation_schedules","fused":0.7406809930114742,"table_sim":0.5985836737050324,"col_score":0.953826971971137},{"table":"depreciation_entries","fused":0.7356926348476295,"table_sim":0.6167782937248956,"col_score":0.9140641465317303},{"table":"budget_lines","fused":0.706887388684857,"table_sim":0.6218203134963756,"col_score":0.8344880014675792},{"table":"project_budgets","fused":0.7046529753885176,"table_sim":0.5656182034505703,"col_score":0.9132051332954385},{"table":"project_expenses","fused":0.6927738977918569,"table_sim":0.5436618291443818,"col_score":0.9164420007630695},{"table":"departments","fused":0.5814812202545698,"table_sim":0.5523947282192829,"col_score":0.6251109583075001},{"table":"project_milestones","fused":0.5643149260780818,"table_sim":0.5414688649545092,"col_score":0.5985840177634407},{"table":"timesheet_entries","fused":0.5636432179936639,"table_sim":0.5409769768138163,"col_score":0.5976425797634352},{"table":"journal_entries","fused":0.560558003613827,"table_sim":0.6269724979465695,"col_score":0.46093626211471317},{"table":"opportunity_stages","fused":0.5599157340099165,"table_sim":0.5504537485994739,"col_score":0.5741087121255803},{"table":"tax_rates","fused":0.5138438053273219,"table_sim":0.5716127675571235,"col_score":0.4271903619826194},{"table":"sales_regions","fused":0.32693810619270275,"table_sim":0.5448968436545046,"col_score":0}],"fk_expansion_candidates":8,"fk_expansion_added":2,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"positions","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":25,"total_retrieval_latency_ms":31,"sql_generated":"SELECT DISTINCT fiscal_years.fiscal_year FROM fiscal_years;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column fiscal_years.fiscal_year does not exist","total_latency_ms":1155,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column fiscal_years.fiscal_year does not exist"}
{"timestamp":"2026-01-27T20:47:53.675Z","query_id":"01078e83-3693-411d-83c2-ede35a3d4de8","question":"What are the different asset categories?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["asset_categories","fixed_assets","asset_locations","account_types","asset_transfers","asset_maintenance","benefit_types","product_categories","depreciation_entries","products","chart_of_accounts","depreciation_schedules"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"asset_categories","similarity":0.8168827711422647},{"table":"fixed_assets","similarity":0.6620037919617541},{"table":"asset_locations","similarity":0.6390829860060242},{"table":"account_types","similarity":0.6334397842726383},{"table":"product_categories","similarity":0.622177487707741},{"table":"asset_maintenance","similarity":0.621270551657517},{"table":"benefit_types","similarity":0.5903668937249158},{"table":"asset_transfers","similarity":0.5862689042988987},{"table":"depreciation_entries","similarity":0.5805433634197894},{"table":"products","similarity":0.5538274728539676},{"table":"depreciation_schedules","similarity":0.552160929389354},{"table":"chart_of_accounts","similarity":0.5427108945847197},{"table":"bank_accounts","similarity":0.5321134297281863},{"table":"countries","similarity":0.5281213098174355},{"table":"maintenance_types","similarity":0.5272099691279456}],"column_hits_per_table":{"asset_categories":5,"fixed_assets":9,"account_types":4,"asset_locations":6,"product_categories":5,"asset_transfers":6,"asset_maintenance":6,"project_budgets":1,"project_expenses":1,"depreciation_entries":1,"benefit_types":4,"products":1,"inventory_transactions":1},"top_columns_per_table":{"asset_categories":[{"column":"name","similarity":0.7875780707525062},{"column":"depreciation_method","similarity":0.7603448714847105},{"column":"category_id","similarity":0.758482100045761}],"fixed_assets":[{"column":"category_id","similarity":0.7014273982200495},{"column":"asset_tag","similarity":0.6626698663454819},{"column":"asset_id","similarity":0.6413881206539997}],"account_types":[{"column":"category","similarity":0.6881378304861365},{"column":"name","similarity":0.5992168172839945},{"column":"normal_balance","similarity":0.5947116865094776}],"asset_locations":[{"column":"building","similarity":0.6559618510281601},{"column":"description","similarity":0.6470926594735155},{"column":"floor","similarity":0.6470899039825275}],"product_categories":[{"column":"name","similarity":0.652576873610378},{"column":"description","similarity":0.6503788706671084},{"column":"category_id","similarity":0.6420597581466748}],"asset_transfers":[{"column":"reason","similarity":0.6473230015974661},{"column":"asset_id","similarity":0.6282032799433002},{"column":"transfer_id","similarity":0.6154246196195988}],"asset_maintenance":[{"column":"status","similarity":0.6334546005541394},{"column":"asset_id","similarity":0.6105732245848465},{"column":"maintenance_type_id","similarity":0.6070052571550042}],"project_budgets":[{"column":"category","similarity":0.6288554954539255}],"project_expenses":[{"column":"category","similarity":0.626992700689606}],"depreciation_entries":[{"column":"asset_id","similarity":0.6187898293393472}],"benefit_types":[{"column":"name","similarity":0.5974204688811928},{"column":"is_active","similarity":0.5896744133334022},{"column":"description","similarity":0.5883422456276791}],"products":[{"column":"category_id","similarity":0.5858403992443696}],"inventory_transactions":[{"column":"transaction_type","similarity":0.5816690816812632}]},"fused_scores":[{"table":"asset_categories","fused":0.9416071891617808,"table_sim":0.8168827711422647,"col_score":1.1286938161910547},{"table":"fixed_assets","fused":0.7846998038830493,"table_sim":0.6620037919617541,"col_score":0.9687438217649922},{"table":"asset_locations","fused":0.7752525128113841,"table_sim":0.6390829860060242,"col_score":0.9795068030194238},{"table":"account_types","fused":0.7742613400599331,"table_sim":0.6334397842726383,"col_score":0.9854936737408753},{"table":"asset_transfers","fused":0.7270812848332002,"table_sim":0.5862689042988987,"col_score":0.9382998556346527},{"table":"asset_maintenance","fused":0.6976709678451112,"table_sim":0.621270551657517,"col_score":0.8122715921265024},{"table":"benefit_types","fused":0.6707121036646139,"table_sim":0.5903668937249158,"col_score":0.7912299185741609},{"table":"product_categories","fused":0.6470810591289455,"table_sim":0.622177487707741,"col_score":0.6844364162607525},{"table":"depreciation_entries","fused":0.5215871702668908,"table_sim":0.5805433634197894,"col_score":0.43315288053754303},{"table":"products","fused":0.4963317955008041,"table_sim":0.5538274728539676,"col_score":0.4100882794710587},{"table":"depreciation_schedules","fused":0.3312965576336124,"table_sim":0.552160929389354,"col_score":0},{"table":"chart_of_accounts","fused":0.3256265367508318,"table_sim":0.5427108945847197,"col_score":0},{"table":"bank_accounts","fused":0.31926805783691176,"table_sim":0.5321134297281863,"col_score":0},{"table":"countries","fused":0.3168727858904613,"table_sim":0.5281213098174355,"col_score":0},{"table":"maintenance_types","fused":0.3163259814767673,"table_sim":0.5272099691279456,"col_score":0}],"fk_expansion_candidates":21,"fk_expansion_added":2,"fk_expansion_blocked_count":17,"fk_expansion_blocked":[{"table":"adjustment_lines","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"inventory_transactions","reason":"max_tables"},{"table":"journal_entries","reason":"no_evidence"},{"table":"maintenance_types","reason":"max_tables"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"product_suppliers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":26,"total_retrieval_latency_ms":31,"sql_generated":"SELECT DISTINCT ac.name AS AssetCategory FROM asset_categories ac;","tables_used_in_sql":[],"explain_result":"success","rows_returned":7,"total_latency_ms":460}
{"timestamp":"2026-01-27T20:47:54.135Z","query_id":"44011137-72a4-4718-b27f-faf60df7f670","question":"Find employees who have been with the company for more than 5 years and earn above $100,000","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_salaries","employees","employee_certifications","employee_benefits","employment_history","project_expenses","employee_training","positions","sales_opportunities","sales_regions","budgets","customers"],"tables_from_table_retrieval":15,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_salaries","similarity":0.6596309142898193},{"table":"employees","similarity":0.6117387326317625},{"table":"employee_certifications","similarity":0.6063101517291073},{"table":"employment_history","similarity":0.6006272540139823},{"table":"employee_benefits","similarity":0.588385638564704},{"table":"sales_quotes","similarity":0.5847288131119626},{"table":"project_expenses","similarity":0.5811440306100932},{"table":"positions","similarity":0.5783549710101321},{"table":"employee_training","similarity":0.5764842814424564},{"table":"sales_regions","similarity":0.5670236882958988},{"table":"sales_opportunities","similarity":0.5660664544581816},{"table":"timesheets","similarity":0.5640662437739868},{"table":"budgets","similarity":0.5625706029614268},{"table":"purchase_requisitions","similarity":0.5609922414021342},{"table":"performance_reviews","similarity":0.5599055606275851}],"column_hits_per_table":{"employees":14,"employee_salaries":7,"positions":1,"employee_benefits":4,"employee_training":3,"employee_certifications":4,"project_expenses":2,"certifications":1,"sales_opportunities":1,"employment_history":4,"departments":1,"sales_territories":1,"sales_regions":1,"fixed_assets":1,"performance_reviews":1,"business_units":1,"asset_transfers":1,"customers":1,"asset_maintenance":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.6754855997136985},{"column":"employee_number","similarity":0.6230502501184026},{"column":"last_name","similarity":0.6053409230190048}],"employee_salaries":[{"column":"amount","similarity":0.6329359756226043},{"column":"approved_by","similarity":0.6321375616232344},{"column":"change_reason","similarity":0.6316069528404761}],"positions":[{"column":"max_salary","similarity":0.6142693265161863}],"employee_benefits":[{"column":"employee_id","similarity":0.6006536688890698},{"column":"coverage_level","similarity":0.5965968421979039},{"column":"end_date","similarity":0.586557123942836}],"employee_training":[{"column":"score","similarity":0.6001910014859368},{"column":"status","similarity":0.5788237982645894},{"column":"employee_id","similarity":0.5766309092930753}],"employee_certifications":[{"column":"employee_id","similarity":0.5974403532583366},{"column":"certificate_number","similarity":0.5892450502925397},{"column":"expiry_date","similarity":0.578236416981715}],"project_expenses":[{"column":"employee_id","similarity":0.5944299421640671},{"column":"approved_by","similarity":0.5909885243295638}],"certifications":[{"column":"validity_years","similarity":0.589664761360241}],"sales_opportunities":[{"column":"owner_id","similarity":0.5895000558969312}],"employment_history":[{"column":"company_name","similarity":0.5883478253463156},{"column":"employee_id","similarity":0.5824689633275649},{"column":"reason_for_leaving","similarity":0.5723476282964999}],"departments":[{"column":"manager_id","similarity":0.5793473377308171}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5787575753820128}],"sales_regions":[{"column":"manager_id","similarity":0.5775817103737491}],"fixed_assets":[{"column":"assigned_to","similarity":0.5758011214737297}],"performance_reviews":[{"column":"employee_id","similarity":0.5751238749562096}],"business_units":[{"column":"manager_id","similarity":0.5736554784472759}],"asset_transfers":[{"column":"from_employee_id","similarity":0.5735387092093984}],"customers":[{"column":"credit_limit","similarity":0.5730323963896138}],"asset_maintenance":[{"column":"performed_by","similarity":0.5729277114702274}]},"fused_scores":[{"table":"employee_salaries","fused":0.7753804511475801,"table_sim":0.6596309142898193,"col_score":0.9490047564342214},{"table":"employees","fused":0.7618475294882174,"table_sim":0.6117387326317625,"col_score":0.9870107247728999},{"table":"employee_certifications","fused":0.7151313945508233,"table_sim":0.6063101517291073,"col_score":0.8783632587833972},{"table":"employee_benefits","fused":0.7089815448065512,"table_sim":0.588385638564704,"col_score":0.8898754041693219},{"table":"employment_history","fused":0.703710893427009,"table_sim":0.6006272540139823,"col_score":0.8583363525465489},{"table":"project_expenses","fused":0.6683020200008508,"table_sim":0.5811440306100932,"col_score":0.7990390040869872},{"table":"employee_training","fused":0.6670023012168911,"table_sim":0.5764842814424564,"col_score":0.8027793308785431},{"table":"positions","fused":0.5927207132125538,"table_sim":0.5783549710101321,"col_score":0.6142693265161863},{"table":"sales_opportunities","fused":0.5046998883260497,"table_sim":0.5660664544581816,"col_score":0.4126500391278518},{"table":"sales_regions","fused":0.501937091882189,"table_sim":0.5670236882958988,"col_score":0.40430719726162434},{"table":"performance_reviews","fused":0.49697802136428976,"table_sim":0.5599055606275851,"col_score":0.40258671246934674},{"table":"sales_quotes","fused":0.35083728786717755,"table_sim":0.5847288131119626,"col_score":0},{"table":"timesheets","fused":0.3384397462643921,"table_sim":0.5640662437739868,"col_score":0},{"table":"budgets","fused":0.3375423617768561,"table_sim":0.5625706029614268,"col_score":0},{"table":"purchase_requisitions","fused":0.3365953448412805,"table_sim":0.5609922414021342,"col_score":0}],"fk_expansion_candidates":31,"fk_expansion_added":2,"fk_expansion_blocked_count":22,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"max_tables"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"max_tables"},{"table":"sales_quotes","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"max_tables"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":38,"total_retrieval_latency_ms":44,"sql_generated":"SELECT e.employee_id, e.first_name, e.last_name, s.salary FROM employees e JOIN employee_salaries s ON e.employee_id = s.employee_id WHERE e.hire_date <= (CURRENT_DATE - INTERVAL '5 years') AND s.amount > 100000;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column s.salary does not exist","total_latency_ms":3201,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column s.salary does not exist"}
{"timestamp":"2026-01-27T20:47:57.336Z","query_id":"5f81a90e-b3bd-4b04-b866-1c157061b5e3","question":"List employees and their managers' names","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employees","employee_salaries","departments","business_units","employment_history","warehouses","projects","employee_training","sales_territories","sales_regions","positions","employee_certifications"],"tables_from_table_retrieval":15,"tables_from_column_only":10,"tables_from_fk_expansion":2,"table_scores":[{"table":"employees","similarity":0.6739271388388655},{"table":"departments","similarity":0.657958333696202},{"table":"sales_regions","similarity":0.6410429290818445},{"table":"business_units","similarity":0.629302299806744},{"table":"employee_salaries","similarity":0.6291178543786463},{"table":"employment_history","similarity":0.628562523709621},{"table":"employee_training","similarity":0.6078450125905032},{"table":"projects","similarity":0.5966184746740394},{"table":"warehouses","similarity":0.595741492988575},{"table":"task_assignments","similarity":0.5956561215476265},{"table":"employee_certifications","similarity":0.5943810266860687},{"table":"sales_territories","similarity":0.5939624260861468},{"table":"timesheets","similarity":0.593138331963305},{"table":"positions","similarity":0.5879685656690451},{"table":"project_expenses","similarity":0.5830402792835349}],"column_hits_per_table":{"employees":17,"departments":2,"business_units":2,"employment_history":2,"warehouses":2,"customers":1,"sales_regions":1,"projects":2,"vendors":1,"sales_territories":2,"task_assignments":1,"certifications":1,"budgets":1,"employee_salaries":4,"timesheets":1,"currencies":1,"project_expenses":1,"stock_transfers":1,"employee_training":2,"employee_certifications":1,"vendor_contacts":1,"products":1,"customer_contacts":1,"project_milestones":1},"top_columns_per_table":{"employees":[{"column":"first_name","similarity":0.7714769709454768},{"column":"last_name","similarity":0.7704055105478298},{"column":"manager_id","similarity":0.7110305691223358}],"departments":[{"column":"manager_id","similarity":0.6915417829685028},{"column":"name","similarity":0.6751242206298983}],"business_units":[{"column":"manager_id","similarity":0.685040091181477},{"column":"name","similarity":0.6765828714174584}],"employment_history":[{"column":"company_name","similarity":0.6822662804075768},{"column":"employee_id","similarity":0.6295340898954124}],"warehouses":[{"column":"manager_id","similarity":0.6735483038590064},{"column":"name","similarity":0.6503195755374178}],"customers":[{"column":"name","similarity":0.6648112452254289}],"sales_regions":[{"column":"manager_id","similarity":0.6593627275777447}],"projects":[{"column":"project_manager_id","similarity":0.6562692578689777},{"column":"name","similarity":0.6475203407196208}],"vendors":[{"column":"name","similarity":0.648693073851878}],"sales_territories":[{"column":"name","similarity":0.6439679107921524},{"column":"assigned_rep_id","similarity":0.6207235426752916}],"task_assignments":[{"column":"employee_id","similarity":0.6386435460734429}],"certifications":[{"column":"name","similarity":0.6377896783299257}],"budgets":[{"column":"name","similarity":0.6363211543819098}],"employee_salaries":[{"column":"end_date","similarity":0.6318747182049583},{"column":"employee_id","similarity":0.6248337519632055},{"column":"effective_date","similarity":0.621871367825837}],"timesheets":[{"column":"employee_id","similarity":0.6280174573982042}],"currencies":[{"column":"name","similarity":0.6277037825883155}],"project_expenses":[{"column":"employee_id","similarity":0.6275598151007045}],"stock_transfers":[{"column":"created_by","similarity":0.6244881174510047}],"employee_training":[{"column":"employee_id","similarity":0.6237522782008402},{"column":"status","similarity":0.6219333593573583}],"employee_certifications":[{"column":"employee_id","similarity":0.6229468191069418}],"vendor_contacts":[{"column":"last_name","similarity":0.6219521334137906}],"products":[{"column":"name","similarity":0.6178261993575316}],"customer_contacts":[{"column":"last_name","similarity":0.6163147653808325}],"project_milestones":[{"column":"name","similarity":0.6158954282593042}]},"fused_scores":[{"table":"employees","fused":0.8285238994112679,"table_sim":0.6739271388388655,"col_score":1.0604190402698717},{"table":"employee_salaries","fused":0.7545948734743385,"table_sim":0.6291178543786463,"col_score":0.9428104021178768},{"table":"departments","fused":0.6829240903370877,"table_sim":0.657958333696202,"col_score":0.7203727252984162},{"table":"business_units","fused":0.6641142074133042,"table_sim":0.629302299806744,"col_score":0.7163320688231443},{"table":"employment_history","fused":0.6563068453252519,"table_sim":0.628562523709621,"col_score":0.697923327748698},{"table":"warehouses","fused":0.6370831614489053,"table_sim":0.595741492988575,"col_score":0.6990956641394007},{"table":"projects","fused":0.6323793247084843,"table_sim":0.5966184746740394,"col_score":0.6860205997601516},{"table":"employee_training","fused":0.6264283157605673,"table_sim":0.6078450125905032,"col_score":0.6543032705156635},{"table":"sales_territories","fused":0.6235897666480316,"table_sim":0.5939624260861468,"col_score":0.6680307774908587},{"table":"sales_regions","fused":0.5692473211708752,"table_sim":0.6410429290818445,"col_score":0.46155390930442125},{"table":"task_assignments","fused":0.5362138658291399,"table_sim":0.5956561215476265,"col_score":0.44705048225141},{"table":"timesheets","fused":0.5317278872494802,"table_sim":0.593138331963305,"col_score":0.43961222017874296},{"table":"employee_certifications","fused":0.531053725361585,"table_sim":0.5943810266860687,"col_score":0.43606277337485927},{"table":"project_expenses","fused":0.5255409157983182,"table_sim":0.5830402792835349,"col_score":0.43929187057049307},{"table":"positions","fused":0.352781139401427,"table_sim":0.5879685656690451,"col_score":0}],"fk_expansion_candidates":36,"fk_expansion_added":2,"fk_expansion_blocked_count":31,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"project_budgets","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"max_tables"},{"table":"project_milestones","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":38,"total_retrieval_latency_ms":43,"sql_generated":"SELECT e.employee_id AS employee_id, e.first_name || ' ' || e.last_name AS employee_name, m.first_name || ' ' || m.last_name AS manager_name FROM employees e INNER JOIN employees m ON e.manager_id = m.employee_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":499,"total_latency_ms":1082}
{"timestamp":"2026-01-27T20:47:58.418Z","query_id":"80c921a4-3be4-4f90-b960-2c408fa776ce","question":"Which employees have pending leave requests?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["leave_requests","employees","leave_types","purchase_requisitions","employee_salaries","employee_training","employment_history","timesheets","employee_certifications","goods_receipts","sales_territories","positions"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"leave_requests","similarity":0.7600790941142384},{"table":"employees","similarity":0.6318821970092333},{"table":"leave_types","similarity":0.6243053165161109},{"table":"employment_history","similarity":0.6232974261189369},{"table":"purchase_requisitions","similarity":0.5939119628114023},{"table":"timesheets","similarity":0.5786251968824939},{"table":"employee_training","similarity":0.5750839227740789},{"table":"employee_certifications","similarity":0.5743962867871555},{"table":"goods_receipts","similarity":0.5718610848354152},{"table":"task_assignments","similarity":0.5706152949131827},{"table":"sales_territories","similarity":0.5614078081373084},{"table":"positions","similarity":0.5597262073340161},{"table":"projects","similarity":0.5534503002083008},{"table":"sales_opportunities","similarity":0.5512834500880964},{"table":"employee_salaries","similarity":0.5491897540036026}],"column_hits_per_table":{"leave_requests":10,"employee_training":2,"employees":12,"employment_history":1,"timesheets":2,"leave_types":3,"sales_orders":1,"purchase_requisitions":2,"vendor_invoices":1,"project_tasks":1,"asset_maintenance":1,"employee_benefits":1,"projects":1,"purchase_orders":1,"stock_transfers":1,"sales_quotes":1,"project_expenses":1,"fixed_assets":1,"employee_certifications":1,"task_assignments":1,"goods_receipts":1,"employee_salaries":2,"sales_territories":1,"project_phases":1},"top_columns_per_table":{"leave_requests":[{"column":"status","similarity":0.7848719368682063},{"column":"employee_id","similarity":0.7576636579687751},{"column":"days_requested","similarity":0.7398783151100068}],"employee_training":[{"column":"status","similarity":0.6651923522652087},{"column":"scheduled_date","similarity":0.5942999900390922}],"employees":[{"column":"termination_date","similarity":0.6457696051473769},{"column":"email","similarity":0.6346475885363552},{"column":"last_name","similarity":0.6289095722388175}],"employment_history":[{"column":"reason_for_leaving","similarity":0.6361385453486292}],"timesheets":[{"column":"status","similarity":0.6339196627014697},{"column":"employee_id","similarity":0.5914292311259354}],"leave_types":[{"column":"is_paid","similarity":0.6210462067937735},{"column":"days_allowed","similarity":0.6179268957404154},{"column":"requires_approval","similarity":0.6015299391142729}],"sales_orders":[{"column":"status","similarity":0.6210060419850735}],"purchase_requisitions":[{"column":"status","similarity":0.6193300474461643},{"column":"requested_by","similarity":0.6053096443813046}],"vendor_invoices":[{"column":"status","similarity":0.6155310542664321}],"project_tasks":[{"column":"status","similarity":0.6119107629795923}],"asset_maintenance":[{"column":"status","similarity":0.6085158795953126}],"employee_benefits":[{"column":"end_date","similarity":0.6074126091020398}],"projects":[{"column":"status","similarity":0.6062843845135029}],"purchase_orders":[{"column":"status","similarity":0.6056490490407618}],"stock_transfers":[{"column":"status","similarity":0.6050219711376368}],"sales_quotes":[{"column":"status","similarity":0.6049360812469786}],"project_expenses":[{"column":"status","similarity":0.6029918860858492}],"fixed_assets":[{"column":"status","similarity":0.6000566812603433}],"employee_certifications":[{"column":"expiry_date","similarity":0.5947566615407769}],"task_assignments":[{"column":"employee_id","similarity":0.5916098874816911}],"goods_receipts":[{"column":"received_by","similarity":0.5906067416911127}],"employee_salaries":[{"column":"change_reason","similarity":0.5843630753678524},{"column":"end_date","similarity":0.579293919815319}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5811710599296118}],"project_phases":[{"column":"status","similarity":0.5807882110700618}]},"fused_scores":[{"table":"leave_requests","fused":0.8980468193115467,"table_sim":0.7600790941142384,"col_score":1.1049984071075094},{"table":"employees","fused":0.7643666779717617,"table_sim":0.6318821970092333,"col_score":0.9630933994155545},{"table":"leave_types","fused":0.7420599360286873,"table_sim":0.6243053165161109,"col_score":0.9186918652975518},{"table":"purchase_requisitions","fused":0.6851772420818263,"table_sim":0.5939119628114023,"col_score":0.8220751609874621},{"table":"employee_salaries","fused":0.6791178665123663,"table_sim":0.5491897540036026,"col_score":0.8740100352755118},{"table":"employee_training","fused":0.6758972789972135,"table_sim":0.5750839227740789,"col_score":0.8271173133319152},{"table":"employment_history","fused":0.6284338738108138,"table_sim":0.6232974261189369,"col_score":0.6361385453486292},{"table":"timesheets","fused":0.6074727160435388,"table_sim":0.5786251968824939,"col_score":0.6507439947851061},{"table":"employee_certifications","fused":0.582540436688604,"table_sim":0.5743962867871555,"col_score":0.5947566615407769},{"table":"goods_receipts","fused":0.5793593475776941,"table_sim":0.5718610848354152,"col_score":0.5906067416911127},{"table":"task_assignments","fused":0.5080199454427832,"table_sim":0.5706152949131827,"col_score":0.41412692123718375},{"table":"projects","fused":0.5018298077887613,"table_sim":0.5534503002083008,"col_score":0.42439906915945197},{"table":"sales_territories","fused":0.4995725816626763,"table_sim":0.5614078081373084,"col_score":0.40681974195072823},{"table":"positions","fused":0.33583572440040965,"table_sim":0.5597262073340161,"col_score":0},{"table":"sales_opportunities","fused":0.33077007005285786,"table_sim":0.5512834500880964,"col_score":0}],"fk_expansion_candidates":32,"fk_expansion_added":2,"fk_expansion_blocked_count":26,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"sales_regions","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"projects","reason":"max_tables"},{"table":"task_assignments","reason":"max_tables"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":19,"total_retrieval_latency_ms":25,"sql_generated":"SELECT DISTINCT e.employee_id, e.first_name || ' ' || e.last_name AS employee_full_name FROM employees e JOIN leave_requests lr ON e.employee_id = lr.employee_id WHERE lr.status = 'pending';","tables_used_in_sql":[],"explain_result":"success","rows_returned":194,"total_latency_ms":1004}
{"timestamp":"2026-01-27T20:47:59.422Z","query_id":"350ea8c5-e8f8-4b74-acd7-7ec2b4d8883a","question":"Show the number of employees per position title","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["positions","employees","employee_salaries","employee_certifications","employment_history","employee_benefits","employee_training","sales_opportunities","sales_territories","sales_regions","departments","business_units"],"tables_from_table_retrieval":15,"tables_from_column_only":4,"tables_from_fk_expansion":2,"table_scores":[{"table":"positions","similarity":0.6979534676247563},{"table":"employee_salaries","similarity":0.659392658582788},{"table":"employees","similarity":0.659318915501233},{"table":"sales_territories","similarity":0.6544391487399293},{"table":"sales_regions","similarity":0.6428263414246281},{"table":"employee_benefits","similarity":0.6167866650759656},{"table":"employee_certifications","similarity":0.6148750377920306},{"table":"employee_training","similarity":0.6083683642118161},{"table":"task_assignments","similarity":0.6071839885197421},{"table":"employment_history","similarity":0.6045972357575983},{"table":"project_resources","similarity":0.6042586180893913},{"table":"departments","similarity":0.6032642584988918},{"table":"business_units","similarity":0.5965911322333207},{"table":"sales_opportunities","similarity":0.5891548833734075},{"table":"certifications","similarity":0.5841777359403402}],"column_hits_per_table":{"employees":15,"positions":6,"employee_salaries":7,"sales_territories":3,"employment_history":2,"employee_certifications":2,"sales_regions":1,"departments":1,"sales_opportunities":2,"customer_contacts":1,"employee_benefits":2,"vendor_contacts":1,"task_assignments":1,"employee_training":2,"business_units":1,"projects":1,"project_resources":1,"sales_orders":1},"top_columns_per_table":{"employees":[{"column":"employee_number","similarity":0.7303595134380423},{"column":"position_id","similarity":0.7050286662527804},{"column":"phone","similarity":0.6945610240790868}],"positions":[{"column":"title","similarity":0.7249937097183676},{"column":"min_salary","similarity":0.675429773675748},{"column":"max_salary","similarity":0.6680713515907781}],"employee_salaries":[{"column":"amount","similarity":0.7000523422305518},{"column":"approved_by","similarity":0.653674871570882},{"column":"effective_date","similarity":0.6502266185759468}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.658183355036331},{"column":"name","similarity":0.6164997394497986},{"column":"territory_id","similarity":0.6102010119398675}],"employment_history":[{"column":"position","similarity":0.6510937516674971},{"column":"company_name","similarity":0.6218123772540076}],"employee_certifications":[{"column":"certificate_number","similarity":0.650658466369623},{"column":"employee_id","similarity":0.6302169951877866}],"sales_regions":[{"column":"manager_id","similarity":0.6438605230157461}],"departments":[{"column":"manager_id","similarity":0.6436672453371529}],"sales_opportunities":[{"column":"owner_id","similarity":0.6408450104060457},{"column":"amount","similarity":0.6062432822580913}],"customer_contacts":[{"column":"title","similarity":0.6381955329460534}],"employee_benefits":[{"column":"coverage_level","similarity":0.6345844389817726},{"column":"employee_id","similarity":0.6161187768667185}],"vendor_contacts":[{"column":"title","similarity":0.6324837364697313}],"task_assignments":[{"column":"employee_id","similarity":0.6251972033262657}],"employee_training":[{"column":"status","similarity":0.6240127994623852},{"column":"score","similarity":0.6193167530282054}],"business_units":[{"column":"manager_id","similarity":0.6238411740584191}],"projects":[{"column":"project_manager_id","similarity":0.6212958877659998}],"project_resources":[{"column":"employee_id","similarity":0.6133242706799946}],"sales_orders":[{"column":"sales_rep_id","similarity":0.6111916781312563}]},"fused_scores":[{"table":"positions","fused":0.8438555191973505,"table_sim":0.6979534676247563,"col_score":1.0627085965562415},{"table":"employees","fused":0.8266473594917741,"table_sim":0.659318915501233,"col_score":1.0776400254775858},{"table":"employee_salaries","fused":0.8063915063560698,"table_sim":0.659392658582788,"col_score":1.0268897780159927},{"table":"employee_certifications","fused":0.7174187885493577,"table_sim":0.6148750377920306,"col_score":0.8712344146853483},{"table":"employment_history","fused":0.7102495749371189,"table_sim":0.6045972357575983,"col_score":0.8687280837063998},{"table":"employee_benefits","fused":0.710162403399629,"table_sim":0.6167866650759656,"col_score":0.8502260108851241},{"table":"employee_training","fused":0.7001095116631058,"table_sim":0.6083683642118161,"col_score":0.8377212328400403},{"table":"sales_opportunities","fused":0.6857085443841274,"table_sim":0.5891548833734075,"col_score":0.8305390359002073},{"table":"sales_territories","fused":0.663264792177102,"table_sim":0.6544391487399293,"col_score":0.6765032573328611},{"table":"sales_regions","fused":0.5659767512991858,"table_sim":0.6428263414246281,"col_score":0.45070236611102227},{"table":"departments","fused":0.5421853837937378,"table_sim":0.6032642584988918,"col_score":0.450567071736007},{"table":"task_assignments","fused":0.5393656100431996,"table_sim":0.6071839885197421,"col_score":0.437638042328386},{"table":"project_resources","fused":0.5342859666440333,"table_sim":0.6042586180893913,"col_score":0.42932698947599623},{"table":"business_units","fused":0.5326302080763498,"table_sim":0.5965911322333207,"col_score":0.43668882184089336},{"table":"certifications","fused":0.3505066415642041,"table_sim":0.5841777359403402,"col_score":0}],"fk_expansion_candidates":31,"fk_expansion_added":2,"fk_expansion_blocked_count":26,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"certifications","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":19,"total_retrieval_latency_ms":26,"sql_generated":"SELECT p.title AS PositionTitle, COUNT(e.employee_id) AS NumberOfEmployees FROM positions p JOIN employees e ON p.position_id = e.position_id GROUP BY p.title;","tables_used_in_sql":[],"explain_result":"success","rows_returned":40,"total_latency_ms":810}
{"timestamp":"2026-01-27T20:48:00.233Z","query_id":"a45adc47-de75-4654-ba34-e9e5819dff73","question":"Find employees with expiring certifications in the next 6 months","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_certifications","certifications","employee_training","employee_salaries","employees","employee_benefits","employment_history","timesheets","leave_requests","sales_opportunities","training_courses","sales_territories"],"tables_from_table_retrieval":15,"tables_from_column_only":4,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_certifications","similarity":0.7706241362613744},{"table":"certifications","similarity":0.6802005917779511},{"table":"employee_training","similarity":0.6440443171141977},{"table":"employee_salaries","similarity":0.6217356175142155},{"table":"employment_history","similarity":0.6209800232699798},{"table":"employees","similarity":0.6208808332740605},{"table":"employee_benefits","similarity":0.6045338983482451},{"table":"leave_requests","similarity":0.5952468212261783},{"table":"timesheets","similarity":0.5895561171146715},{"table":"sales_opportunities","similarity":0.589247250067302},{"table":"sales_territories","similarity":0.5761976363181674},{"table":"sales_regions","similarity":0.571597497122778},{"table":"positions","similarity":0.5699853206265957},{"table":"sales_quotes","similarity":0.5692719307537125},{"table":"asset_maintenance","similarity":0.5679247260279}],"column_hits_per_table":{"employee_certifications":6,"certifications":5,"employee_training":7,"employee_benefits":4,"employee_salaries":4,"employees":13,"employment_history":2,"fixed_assets":1,"sales_territories":1,"leave_requests":1,"training_courses":1,"vendor_invoices":1,"sales_opportunities":1,"sales_orders":1,"timesheets":2},"top_columns_per_table":{"employee_certifications":[{"column":"expiry_date","similarity":0.8223290744223847},{"column":"obtained_date","similarity":0.7048571438609317},{"column":"certificate_number","similarity":0.6844066837361532}],"certifications":[{"column":"validity_years","similarity":0.6831497753418977},{"column":"issuing_body","similarity":0.6675689252914252},{"column":"name","similarity":0.6347875203520511}],"employee_training":[{"column":"status","similarity":0.6694247428105495},{"column":"completion_date","similarity":0.6500543987668643},{"column":"scheduled_date","similarity":0.634378567942575}],"employee_benefits":[{"column":"end_date","similarity":0.668980015269604},{"column":"start_date","similarity":0.6167647109848691},{"column":"employee_id","similarity":0.5890360373550575}],"employee_salaries":[{"column":"end_date","similarity":0.6663230094391236},{"column":"effective_date","similarity":0.6275928989730601},{"column":"approved_by","similarity":0.5920076491340375}],"employees":[{"column":"termination_date","similarity":0.6634096387400048},{"column":"birth_date","similarity":0.6208623682963734},{"column":"hire_date","similarity":0.6131267334537116}],"employment_history":[{"column":"end_date","similarity":0.6255999760444128},{"column":"reason_for_leaving","similarity":0.5952886604965791}],"fixed_assets":[{"column":"warranty_expiry","similarity":0.6127536708511256}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6119690793074023}],"leave_requests":[{"column":"approved_by","similarity":0.597799056732442}],"training_courses":[{"column":"duration_hours","similarity":0.5941472157411798}],"vendor_invoices":[{"column":"status","similarity":0.5930757702064392}],"sales_opportunities":[{"column":"owner_id","similarity":0.5882909136312094}],"sales_orders":[{"column":"sales_rep_id","similarity":0.5865686529713344}],"timesheets":[{"column":"employee_id","similarity":0.5831337158577651},{"column":"approved_by","similarity":0.5831119950290864}]},"fused_scores":[{"table":"employee_certifications","fused":0.9322775402979648,"table_sim":0.7706241362613744,"col_score":1.1747576463528504},{"table":"certifications","fused":0.8148940502618147,"table_sim":0.6802005917779511,"col_score":1.0169342379876103},{"table":"employee_training","fused":0.7733240633637795,"table_sim":0.6440443171141977,"col_score":0.9672436827381519},{"table":"employee_salaries","fused":0.7650891540787907,"table_sim":0.6217356175142155,"col_score":0.9801194589256537},{"table":"employees","fused":0.762064829119713,"table_sim":0.6208808332740605,"col_score":0.9738408228881915},{"table":"employee_benefits","fused":0.7536652873137626,"table_sim":0.6045338983482451,"col_score":0.9773623707620386},{"table":"employment_history","fused":0.7418857364790687,"table_sim":0.6209800232699798,"col_score":0.9232443062927023},{"table":"timesheets","fused":0.6686171885005245,"table_sim":0.5895561171146715,"col_score":0.7872087955793041},{"table":"leave_requests","fused":0.5962677154286837,"table_sim":0.5952468212261783,"col_score":0.597799056732442},{"table":"sales_opportunities","fused":0.5182698058571198,"table_sim":0.589247250067302,"col_score":0.41180363954184657},{"table":"sales_territories","fused":0.5170699239969732,"table_sim":0.5761976363181674,"col_score":0.4283783555151816},{"table":"sales_regions","fused":0.34295849827366676,"table_sim":0.571597497122778,"col_score":0},{"table":"positions","fused":0.3419911923759574,"table_sim":0.5699853206265957,"col_score":0},{"table":"sales_quotes","fused":0.3415631584522275,"table_sim":0.5692719307537125,"col_score":0},{"table":"asset_maintenance","fused":0.34075483561673997,"table_sim":0.5679247260279,"col_score":0}],"fk_expansion_candidates":33,"fk_expansion_added":2,"fk_expansion_blocked_count":26,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"sales_regions","reason":"max_tables"},{"table":"customers","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"leave_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":1334,"total_retrieval_latency_ms":1341,"sql_generated":"SELECT e.employee_id, CONCAT(e.first_name, ' ', e.last_name) AS employee_full_name, c.certification_id, c.name AS certification_name, DATEDIFF(c.expiry_date, CURRENT_DATE) AS days_until_expiration FROM employees e JOIN employee_certifications ec ON e.employee_id = ec.employee_id JOIN certifications c ON ec.certification_id = c.certification_id WHERE c.validity_years > 0 AND DATEDIFF(c.expiry_date, CURRENT_DATE) <= 180;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column c.expiry_date does not exist","total_latency_ms":7075,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column c.expiry_date does not exist"}
{"timestamp":"2026-01-27T20:48:07.309Z","query_id":"137304ea-3d80-4bb5-b600-4a73f5c5cdae","question":"What is the total sales amount by customer for 2024?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_orders","sales_quotes","purchase_orders","sales_opportunities","vendor_invoices","customers","sales_regions","product_suppliers","inventory_transactions","sales_territories","customer_contacts","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.6661782372338159},{"table":"sales_regions","similarity":0.6466539195201415},{"table":"purchase_orders","similarity":0.6425639839861694},{"table":"sales_quotes","similarity":0.6323684030188},{"table":"customers","similarity":0.6254829877818046},{"table":"goods_receipts","similarity":0.624224700776992},{"table":"sales_territories","similarity":0.6219383160682438},{"table":"sales_opportunities","similarity":0.6198918716472263},{"table":"vendor_invoices","similarity":0.6044007553511245},{"table":"product_suppliers","similarity":0.6040993020059657},{"table":"vendors","similarity":0.603297637986599},{"table":"inventory_transactions","similarity":0.5961752149477293},{"table":"customer_contacts","similarity":0.5960659744690372},{"table":"purchase_requisitions","similarity":0.5958567238927183},{"table":"vendor_contacts","similarity":0.5956298644510378}],"column_hits_per_table":{"sales_orders":11,"sales_quotes":8,"purchase_orders":4,"vendor_invoices":4,"sales_regions":2,"sales_opportunities":5,"budgets":1,"vendor_invoice_lines":3,"sales_territories":1,"customers":5,"product_suppliers":2,"inventory_transactions":1,"products":1,"employee_salaries":1,"requisition_lines":1},"top_columns_per_table":{"sales_orders":[{"column":"total","similarity":0.7244313172120884},{"column":"tax_amount","similarity":0.6762874622688556},{"column":"shipping_cost","similarity":0.6612432272072928}],"sales_quotes":[{"column":"total","similarity":0.6950563806491997},{"column":"tax_amount","similarity":0.6549934606699467},{"column":"customer_id","similarity":0.633022609028069}],"purchase_orders":[{"column":"total","similarity":0.6785298093212636},{"column":"tax_amount","similarity":0.6404349276520235},{"column":"shipping_cost","similarity":0.6240185552956755}],"vendor_invoices":[{"column":"total","similarity":0.6747261791238827},{"column":"amount_paid","similarity":0.6298159797552111},{"column":"tax_amount","similarity":0.6272011861089813}],"sales_regions":[{"column":"target_revenue","similarity":0.669211801482299},{"column":"manager_id","similarity":0.6277573682655309}],"sales_opportunities":[{"column":"amount","similarity":0.655450458562276},{"column":"customer_id","similarity":0.6322500352926682},{"column":"actual_close_date","similarity":0.6246929093287042}],"budgets":[{"column":"total_amount","similarity":0.6518162432576314}],"vendor_invoice_lines":[{"column":"amount","similarity":0.6403394670021465},{"column":"quantity","similarity":0.6220633545661067},{"column":"unit_cost","similarity":0.6142783559425501}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6329827875367418}],"customers":[{"column":"customer_number","similarity":0.6307526305965028},{"column":"is_active","similarity":0.6279434554243903},{"column":"payment_terms","similarity":0.6271025683088002}],"product_suppliers":[{"column":"unit_cost","similarity":0.6238036188844898},{"column":"lead_time_days","similarity":0.6148470142139506}],"inventory_transactions":[{"column":"quantity","similarity":0.6205086265646853}],"products":[{"column":"unit_cost","similarity":0.6167414295269279}],"employee_salaries":[{"column":"amount","similarity":0.6161656413500942}],"requisition_lines":[{"column":"estimated_total","similarity":0.6121816423535696}]},"fused_scores":[{"table":"sales_orders","fused":0.824736961678896,"table_sim":0.6661782372338159,"col_score":1.0625750483465162},{"table":"sales_quotes","fused":0.7884422862049492,"table_sim":0.6323684030188,"col_score":1.022553110984173},{"table":"purchase_orders","fused":0.7850372996506118,"table_sim":0.6425639839861694,"col_score":0.9987472731472753},{"table":"sales_opportunities","fused":0.759053888278987,"table_sim":0.6198918716472263,"col_score":0.9677969132266282},{"table":"vendor_invoices","fused":0.757971162082024,"table_sim":0.6044007553511245,"col_score":0.9883267721783733},{"table":"customers","fused":0.753011358569444,"table_sim":0.6254829877818046,"col_score":0.9443039147509029},{"table":"sales_regions","fused":0.7435631038621788,"table_sim":0.6466539195201415,"col_score":0.8889268803752348},{"table":"product_suppliers","fused":0.7349504316001654,"table_sim":0.6040993020059657,"col_score":0.9312271259914651},{"table":"inventory_transactions","fused":0.6059085795945116,"table_sim":0.5961752149477293,"col_score":0.6205086265646853},{"table":"sales_territories","fused":0.5503981701512339,"table_sim":0.6219383160682438,"col_score":0.4430879512757192},{"table":"vendor_invoice_lines","fused":0.38054845771407997,"table_sim":0,"col_score":0.9513711442851999},{"table":"goods_receipts","fused":0.3745348204661952,"table_sim":0.624224700776992,"col_score":0},{"table":"vendors","fused":0.3619785827919594,"table_sim":0.603297637986599,"col_score":0},{"table":"customer_contacts","fused":0.3576395846814223,"table_sim":0.5960659744690372,"col_score":0},{"table":"purchase_requisitions","fused":0.35751403433563095,"table_sim":0.5958567238927183,"col_score":0}],"fk_expansion_candidates":17,"fk_expansion_added":2,"fk_expansion_blocked_count":11,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"max_tables"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendors","reason":"max_tables"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":17,"total_retrieval_latency_ms":23,"sql_generated":"SELECT c.customer_id AS \"CustomerID\", SUM(so.total) AS \"TotalSalesAmount\" FROM customers c JOIN sales_orders so ON c.customer_id = so.customer_id AND EXTRACT(YEAR FROM so.order_date) = 2024 GROUP BY c.customer_id;","tables_used_in_sql":[],"total_latency_ms":3150,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-27T20:48:10.459Z","query_id":"086c558f-e17d-4ff0-96c2-6c8b90062cc5","question":"List the top 10 customers by total order value","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["sales_orders","order_lines","purchase_orders","customers","vendor_invoices","po_lines","vendor_invoice_lines","vendors","product_suppliers","customer_contacts","goods_receipts","receipt_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.6473006572264755},{"table":"order_lines","similarity":0.6399839764362797},{"table":"purchase_orders","similarity":0.6359216236921361},{"table":"customers","similarity":0.6198957604307753},{"table":"product_suppliers","similarity":0.5995729306104617},{"table":"vendor_invoices","similarity":0.5943908353227434},{"table":"customer_contacts","similarity":0.5842306673122464},{"table":"vendor_invoice_lines","similarity":0.5801466694219243},{"table":"po_lines","similarity":0.5791417572195606},{"table":"goods_receipts","similarity":0.5753336348446236},{"table":"vendors","similarity":0.5707400907082698},{"table":"vendor_contacts","similarity":0.5696902100114021},{"table":"sales_quotes","similarity":0.5666705909907517},{"table":"sales_regions","similarity":0.5613559842608495},{"table":"performance_reviews","similarity":0.5612444859070587}],"column_hits_per_table":{"sales_orders":9,"purchase_orders":9,"order_lines":6,"customers":8,"vendor_invoices":3,"po_lines":4,"product_suppliers":1,"vendor_invoice_lines":3,"sales_quotes":1,"vendors":2,"reorder_rules":1,"receipt_lines":1,"customer_contacts":1,"vendor_contacts":1},"top_columns_per_table":{"sales_orders":[{"column":"total","similarity":0.7020817260367288},{"column":"order_number","similarity":0.6685298882909628},{"column":"subtotal","similarity":0.6524962304627586}],"purchase_orders":[{"column":"total","similarity":0.6939612306511255},{"column":"subtotal","similarity":0.6468882375379221},{"column":"po_number","similarity":0.6405494499482387}],"order_lines":[{"column":"line_total","similarity":0.6813706573979386},{"column":"quantity_shipped","similarity":0.6606623309473539},{"column":"unit_price","similarity":0.653638874407219}],"customers":[{"column":"phone","similarity":0.6678457692494831},{"column":"customer_number","similarity":0.667508576224813},{"column":"website","similarity":0.6440350067780187}],"vendor_invoices":[{"column":"total","similarity":0.6547235618821576},{"column":"subtotal","similarity":0.6165793862971071},{"column":"amount_paid","similarity":0.5994096139826286}],"po_lines":[{"column":"line_total","similarity":0.6452038022349394},{"column":"quantity_received","similarity":0.6360841424690086},{"column":"quantity","similarity":0.6154123203857146}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6405471009596841}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.6302050357488331},{"column":"amount","similarity":0.6254578473792903},{"column":"unit_cost","similarity":0.6160639087242643}],"sales_quotes":[{"column":"total","similarity":0.6256755187649439}],"vendors":[{"column":"phone","similarity":0.6250325024206392},{"column":"vendor_number","similarity":0.5980532008806005}],"reorder_rules":[{"column":"max_quantity","similarity":0.6123863797677381}],"receipt_lines":[{"column":"quantity_received","similarity":0.6046309435687143}],"customer_contacts":[{"column":"phone","similarity":0.602251378896717}],"vendor_contacts":[{"column":"phone","similarity":0.5990225595345888}]},"fused_scores":[{"table":"sales_orders","fused":0.8029190624087694,"table_sim":0.6473006572264755,"col_score":1.0363466701822102},{"table":"order_lines","fused":0.788671115010414,"table_sim":0.6399839764362797,"col_score":1.0117018228716155},{"table":"purchase_orders","fused":0.7885151139833163,"table_sim":0.6359216236921361,"col_score":1.0174053494200865},{"table":"customers","fused":0.7725774792032212,"table_sim":0.6198957604307753,"col_score":1.0016000573618897},{"table":"vendor_invoices","fused":0.7418398032059306,"table_sim":0.5943908353227434,"col_score":0.9630132550307111},{"table":"po_lines","fused":0.7327834037195139,"table_sim":0.5791417572195606,"col_score":0.9632458734694438},{"table":"vendor_invoice_lines","fused":0.7252615854285459,"table_sim":0.5801466694219243,"col_score":0.9429339594384782},{"table":"vendors","fused":0.7120676955693377,"table_sim":0.5707400907082698,"col_score":0.9240591028609395},{"table":"product_suppliers","fused":0.6159625987501507,"table_sim":0.5995729306104617,"col_score":0.6405471009596841},{"table":"customer_contacts","fused":0.5914389519460346,"table_sim":0.5842306673122464,"col_score":0.602251378896717},{"table":"sales_quotes","fused":0.5902725621004286,"table_sim":0.5666705909907517,"col_score":0.6256755187649439},{"table":"vendor_contacts","fused":0.5814231498206768,"table_sim":0.5696902100114021,"col_score":0.5990225595345888},{"table":"goods_receipts","fused":0.3452001809067742,"table_sim":0.5753336348446236,"col_score":0},{"table":"sales_regions","fused":0.3368135905565097,"table_sim":0.5613559842608495,"col_score":0},{"table":"performance_reviews","fused":0.3367466915442352,"table_sim":0.5612444859070587,"col_score":0}],"fk_expansion_candidates":14,"fk_expansion_added":2,"fk_expansion_blocked_count":10,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"vendor_contacts","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":23,"total_retrieval_latency_ms":29,"sql_generated":"SELECT c.customer_id, SUM(s.total) AS total_order_value FROM customers c JOIN sales_orders s ON c.customer_id = s.customer_id GROUP BY c.customer_id ORDER BY total_order_value DESC LIMIT 10;","tables_used_in_sql":[],"explain_result":"success","rows_returned":10,"total_latency_ms":1021}
{"timestamp":"2026-01-27T20:48:11.480Z","query_id":"ad8ce8b2-45aa-4d93-8473-2bd9ed2c8d68","question":"Show sales opportunities in the Negotiation stage worth over $50,000","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["sales_opportunities","opportunity_stages","sales_quotes","sales_orders","vendor_invoices","purchase_orders","positions","sales_regions","sales_territories","inventory_levels","fixed_assets","purchase_requisitions"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_opportunities","similarity":0.6992078050992712},{"table":"opportunity_stages","similarity":0.6655732816251885},{"table":"sales_quotes","similarity":0.5966843975960908},{"table":"sales_orders","similarity":0.5593486033229518},{"table":"sales_regions","similarity":0.5589767008926408},{"table":"sales_territories","similarity":0.5454458212189293},{"table":"purchase_orders","similarity":0.5420364894792326},{"table":"inventory_levels","similarity":0.5351174798622741},{"table":"positions","similarity":0.5335687678148762},{"table":"vendor_invoices","similarity":0.530033951859159},{"table":"purchase_requisitions","similarity":0.52468395466863},{"table":"fixed_assets","similarity":0.5210852939306287},{"table":"vendors","similarity":0.5206051380901591},{"table":"product_suppliers","similarity":0.5180116953474874},{"table":"stock_transfers","similarity":0.5145653894331007}],"column_hits_per_table":{"sales_opportunities":11,"sales_quotes":8,"opportunity_stages":6,"sales_orders":6,"sales_regions":2,"vendor_invoices":3,"project_milestones":2,"purchase_orders":3,"positions":2,"sales_territories":2,"fixed_assets":1,"vendor_invoice_lines":1,"inventory_levels":1,"purchase_requisitions":1,"vendors":1},"top_columns_per_table":{"sales_opportunities":[{"column":"amount","similarity":0.7218839163082612},{"column":"stage_id","similarity":0.716924419509995},{"column":"actual_close_date","similarity":0.6885771934035502}],"sales_quotes":[{"column":"opportunity_id","similarity":0.647441890535683},{"column":"total","similarity":0.6155916414203653},{"column":"subtotal","similarity":0.6055615457364606}],"opportunity_stages":[{"column":"sequence","similarity":0.6454142500136325},{"column":"is_won","similarity":0.6341237265976897},{"column":"probability","similarity":0.6324889797951576}],"sales_orders":[{"column":"total","similarity":0.620187694899569},{"column":"subtotal","similarity":0.6117656440801068},{"column":"shipping_cost","similarity":0.5821513623432988}],"sales_regions":[{"column":"target_revenue","similarity":0.5974090175243022},{"column":"name","similarity":0.555083452385604}],"vendor_invoices":[{"column":"total","similarity":0.5954243361867875},{"column":"subtotal","similarity":0.5865062592640437},{"column":"amount_paid","similarity":0.5632369336559707}],"project_milestones":[{"column":"amount","similarity":0.5837677671992427},{"column":"description","similarity":0.5491146358499412}],"purchase_orders":[{"column":"total","similarity":0.5819183589116524},{"column":"subtotal","similarity":0.5743568254746039},{"column":"tax_amount","similarity":0.5472165237974967}],"positions":[{"column":"max_salary","similarity":0.5779609042142907},{"column":"min_salary","similarity":0.5600539081817787}],"sales_territories":[{"column":"name","similarity":0.5672149440546744},{"column":"territory_id","similarity":0.5529670061701181}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5581280439698661}],"vendor_invoice_lines":[{"column":"amount","similarity":0.5566794113536152}],"inventory_levels":[{"column":"quantity_available","similarity":0.5552607980814753}],"purchase_requisitions":[{"column":"status","similarity":0.5540663995768337}],"vendors":[{"column":"payment_terms","similarity":0.5485963499255753}]},"fused_scores":[{"table":"sales_opportunities","fused":0.8459936882635772,"table_sim":0.6992078050992712,"col_score":1.0661725130100363},{"table":"opportunity_stages","fused":0.7843344143001041,"table_sim":0.6655732816251885,"col_score":0.9624761133124773},{"table":"sales_quotes","fused":0.7253596042730928,"table_sim":0.5966843975960908,"col_score":0.9183724142885956},{"table":"sales_orders","fused":0.70603736876962,"table_sim":0.5593486033229518,"col_score":0.9260705169396224},{"table":"vendor_invoices","fused":0.6734913574430191,"table_sim":0.530033951859159,"col_score":0.8886774658188092},{"table":"purchase_orders","fused":0.6728606023471213,"table_sim":0.5420364894792326,"col_score":0.8690967716489544},{"table":"positions","fused":0.6633364040109977,"table_sim":0.5335687678148762,"col_score":0.8579878583051801},{"table":"sales_regions","fused":0.6520613108792899,"table_sim":0.5589767008926408,"col_score":0.7916882258592636},{"table":"sales_territories","fused":0.5635030579304829,"table_sim":0.5454458212189293,"col_score":0.5905889129978134},{"table":"inventory_levels","fused":0.5431748071499546,"table_sim":0.5351174798622741,"col_score":0.5552607980814753},{"table":"fixed_assets","fused":0.5359023939463237,"table_sim":0.5210852939306287,"col_score":0.5581280439698661},{"table":"vendors","fused":0.5318016228243255,"table_sim":0.5206051380901591,"col_score":0.5485963499255753},{"table":"purchase_requisitions","fused":0.46994896468269143,"table_sim":0.52468395466863,"col_score":0.38784647970378355},{"table":"product_suppliers","fused":0.3108070172084924,"table_sim":0.5180116953474874,"col_score":0},{"table":"project_milestones","fused":0.31038315589868887,"table_sim":0,"col_score":0.7759578897467221}],"fk_expansion_candidates":15,"fk_expansion_added":2,"fk_expansion_blocked_count":11,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendors","reason":"max_tables"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":22,"total_retrieval_latency_ms":27,"sql_generated":"SELECT so.name AS opportunity_name, os.stage_id, os.probability FROM sales_opportunities so JOIN opportunity_stages os ON so.stage_id = os.stage_id WHERE so.amount > 50000 AND os.name = 'Negotiation';","tables_used_in_sql":[],"explain_result":"success","rows_returned":69,"total_latency_ms":1100}
{"timestamp":"2026-01-27T20:48:12.580Z","query_id":"71fa334b-efd3-4f1b-a3be-ec4f2660cd8d","question":"What is the conversion rate from quotes to orders?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["quote_lines","sales_quotes","sales_orders","order_lines","purchase_orders","po_lines","product_suppliers","vendor_invoice_lines","tax_rates","units_of_measure","goods_receipts","vendor_invoices"],"tables_from_table_retrieval":15,"tables_from_column_only":1,"tables_from_fk_expansion":2,"table_scores":[{"table":"quote_lines","similarity":0.6904269230356019},{"table":"sales_orders","similarity":0.6835641897302034},{"table":"sales_quotes","similarity":0.6684713746648914},{"table":"order_lines","similarity":0.6535630831611231},{"table":"purchase_orders","similarity":0.6306886393929901},{"table":"po_lines","similarity":0.6176945995415711},{"table":"product_suppliers","similarity":0.5906242515558167},{"table":"vendor_invoices","similarity":0.5859545887931735},{"table":"vendor_invoice_lines","similarity":0.5830820632852473},{"table":"goods_receipts","similarity":0.5790884419628168},{"table":"tax_rates","similarity":0.5718192537871447},{"table":"requisition_lines","similarity":0.5712220355781},{"table":"transfer_lines","similarity":0.5636706691019312},{"table":"units_of_measure","similarity":0.562966241975057},{"table":"performance_reviews","similarity":0.5624540759938077}],"column_hits_per_table":{"sales_orders":9,"quote_lines":6,"sales_quotes":11,"order_lines":6,"purchase_orders":9,"currencies":1,"product_suppliers":1,"po_lines":4,"vendor_invoice_lines":1,"tax_rates":1,"units_of_measure":1},"top_columns_per_table":{"sales_orders":[{"column":"quote_id","similarity":0.7232829089173333},{"column":"total","similarity":0.6782515905024311},{"column":"subtotal","similarity":0.6564656490145492}],"quote_lines":[{"column":"discount_percent","similarity":0.7208835983271276},{"column":"unit_price","similarity":0.704483517001721},{"column":"line_total","similarity":0.6863137629261619}],"sales_quotes":[{"column":"total","similarity":0.706142441581424},{"column":"quote_number","similarity":0.6925940339842922},{"column":"subtotal","similarity":0.6772561289459981}],"order_lines":[{"column":"discount_percent","similarity":0.6959860752364422},{"column":"unit_price","similarity":0.6669167849132327},{"column":"line_total","similarity":0.6535000947209797}],"purchase_orders":[{"column":"total","similarity":0.6835774808972174},{"column":"subtotal","similarity":0.6633148180662753},{"column":"shipping_cost","similarity":0.6595759377904514}],"currencies":[{"column":"exchange_rate","similarity":0.6420843010647603}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6294891258816252}],"po_lines":[{"column":"line_total","similarity":0.6268290778076593},{"column":"unit_cost","similarity":0.6264313657632602},{"column":"quantity_received","similarity":0.6234182435733836}],"vendor_invoice_lines":[{"column":"unit_cost","similarity":0.622062223414914}],"tax_rates":[{"column":"rate","similarity":0.6139738053543071}],"units_of_measure":[{"column":"conversion_factor","similarity":0.6098054698975929}]},"fused_scores":[{"table":"quote_lines","fused":0.8435062965525564,"table_sim":0.6904269230356019,"col_score":1.0731253568279882},{"table":"sales_quotes","fused":0.822058608228363,"table_sim":0.6684713746648914,"col_score":1.0524394585735701},{"table":"sales_orders","fused":0.8127322798420042,"table_sim":0.6835641897302034,"col_score":1.0064844150097056},{"table":"order_lines","fused":0.8039156369738973,"table_sim":0.6535630831611231,"col_score":1.0294444676930585},{"table":"purchase_orders","fused":0.7845071396079362,"table_sim":0.6306886393929901,"col_score":1.0152348899303552},{"table":"po_lines","fused":0.7466346640006585,"table_sim":0.6176945995415711,"col_score":0.9400447606892894},{"table":"product_suppliers","fused":0.6061702012861401,"table_sim":0.5906242515558167,"col_score":0.6294891258816252},{"table":"vendor_invoice_lines","fused":0.598674127337114,"table_sim":0.5830820632852473,"col_score":0.622062223414914},{"table":"tax_rates","fused":0.5886810744140096,"table_sim":0.5718192537871447,"col_score":0.6139738053543071},{"table":"units_of_measure","fused":0.5817019331440714,"table_sim":0.562966241975057,"col_score":0.6098054698975929},{"table":"vendor_invoices","fused":0.3515727532759041,"table_sim":0.5859545887931735,"col_score":0},{"table":"goods_receipts","fused":0.3474530651776901,"table_sim":0.5790884419628168,"col_score":0},{"table":"requisition_lines","fused":0.34273322134686,"table_sim":0.5712220355781,"col_score":0},{"table":"transfer_lines","fused":0.3382024014611587,"table_sim":0.5636706691019312,"col_score":0},{"table":"performance_reviews","fused":0.3374724455962846,"table_sim":0.5624540759938077,"col_score":0}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":11,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"countries","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":30,"total_retrieval_latency_ms":36,"sql_generated":"SELECT COUNT(sales_orders.order_id) / NULLIF(COUNT(quote_lines.line_id), 0) AS conversion_rate FROM sales_quotes JOIN quote_lines ON sales_quotes.quote_id = quote_lines.quote_id JOIN sales_orders ON quote_lines.order_id = sales_orders.order_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column quote_lines.order_id does not exist","total_latency_ms":3324,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column quote_lines.order_id does not exist"}
{"timestamp":"2026-01-27T20:48:15.904Z","query_id":"9c982d10-f9d1-4ba6-8024-100de4477845","question":"List sales orders by sales representative with their totals","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_orders","purchase_orders","order_lines","sales_quotes","po_lines","sales_regions","vendor_invoices","receipt_lines","vendor_invoice_lines","product_suppliers","goods_receipts","quote_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_orders","similarity":0.758754229471184},{"table":"purchase_orders","similarity":0.6987531686909988},{"table":"order_lines","similarity":0.6881373549198537},{"table":"goods_receipts","similarity":0.6456282553665884},{"table":"sales_quotes","similarity":0.6444526679613465},{"table":"sales_territories","similarity":0.6375070500401926},{"table":"sales_regions","similarity":0.6277211189501499},{"table":"vendor_invoices","similarity":0.6246861185869929},{"table":"po_lines","similarity":0.6084083791424837},{"table":"receipt_lines","similarity":0.6068971146953636},{"table":"product_suppliers","similarity":0.6062359599284572},{"table":"quote_lines","similarity":0.6037562036512956},{"table":"vendor_invoice_lines","similarity":0.6029372840473417},{"table":"inventory_levels","similarity":0.591644735010043},{"table":"requisition_lines","similarity":0.5902331648645791}],"column_hits_per_table":{"sales_orders":15,"purchase_orders":13,"sales_quotes":6,"order_lines":5,"sales_regions":1,"sales_territories":1,"vendor_invoices":1,"receipt_lines":1,"po_lines":2,"vendor_invoice_lines":1,"goods_receipts":1,"sales_opportunities":1,"product_suppliers":1,"inventory_transactions":1},"top_columns_per_table":{"sales_orders":[{"column":"total","similarity":0.7998245354916855},{"column":"tax_amount","similarity":0.7409304914795294},{"column":"subtotal","similarity":0.7386795928063996}],"purchase_orders":[{"column":"total","similarity":0.7369898987643527},{"column":"tax_amount","similarity":0.6880914687154579},{"column":"subtotal","similarity":0.6805274523503672}],"sales_quotes":[{"column":"total","similarity":0.7000946313237136},{"column":"status","similarity":0.6570352148347643},{"column":"tax_amount","similarity":0.6496185243884612}],"order_lines":[{"column":"quantity_shipped","similarity":0.6754287630112775},{"column":"line_total","similarity":0.6747818022026829},{"column":"order_id","similarity":0.6500926353163158}],"sales_regions":[{"column":"target_revenue","similarity":0.6609566639968198}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6507336012447592}],"vendor_invoices":[{"column":"total","similarity":0.6490968088980056}],"receipt_lines":[{"column":"quantity_received","similarity":0.6403091638652453}],"po_lines":[{"column":"line_total","similarity":0.633906772238869},{"column":"quantity_received","similarity":0.619669544018957}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.6318424746468201}],"goods_receipts":[{"column":"po_id","similarity":0.6305521343448763}],"sales_opportunities":[{"column":"amount","similarity":0.6247832200658987}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6242146192079842}],"inventory_transactions":[{"column":"quantity","similarity":0.6183812252695141}]},"fused_scores":[{"table":"sales_orders","fused":0.9233684501752903,"table_sim":0.758754229471184,"col_score":1.17028978123145},{"table":"purchase_orders","fused":0.8516661544634319,"table_sim":0.6987531686909988,"col_score":1.0810356331220816},{"table":"order_lines","fused":0.8180102785969599,"table_sim":0.6881373549198537,"col_score":1.012819664112619},{"table":"sales_quotes","fused":0.7966331581839856,"table_sim":0.6444526679613465,"col_score":1.0249038935179442},{"table":"po_lines","fused":0.7425416451848292,"table_sim":0.6084083791424837,"col_score":0.9437415442483476},{"table":"sales_regions","fused":0.6410153369688179,"table_sim":0.6277211189501499,"col_score":0.6609566639968198},{"table":"vendor_invoices","fused":0.634450394711398,"table_sim":0.6246861185869929,"col_score":0.6490968088980056},{"table":"receipt_lines","fused":0.6202619343633162,"table_sim":0.6068971146953636,"col_score":0.6403091638652453},{"table":"vendor_invoice_lines","fused":0.6144993602871331,"table_sim":0.6029372840473417,"col_score":0.6318424746468201},{"table":"product_suppliers","fused":0.613427423640268,"table_sim":0.6062359599284572,"col_score":0.6242146192079842},{"table":"sales_territories","fused":0.5647096383726481,"table_sim":0.6375070500401926,"col_score":0.4555135208713314},{"table":"goods_receipts","fused":0.5639315508365184,"table_sim":0.6456282553665884,"col_score":0.4413864940414134},{"table":"quote_lines","fused":0.36225372219077734,"table_sim":0.6037562036512956,"col_score":0},{"table":"inventory_levels","fused":0.3549868410060258,"table_sim":0.591644735010043,"col_score":0},{"table":"requisition_lines","fused":0.3541398989187475,"table_sim":0.5902331648645791,"col_score":0}],"fk_expansion_candidates":13,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"sales_territories","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":17,"total_retrieval_latency_ms":22,"sql_generated":"SELECT sr.name, SUM(so.total) AS total_sales FROM sales_orders so JOIN sales_regions sr ON so.sales_rep_id = sr.employee_id GROUP BY sr.name;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column sr.employee_id does not exist","total_latency_ms":2319,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column sr.employee_id does not exist"}
{"timestamp":"2026-01-27T20:48:18.224Z","query_id":"8eaa08b9-ee07-4572-85c8-6c16eb90eb2a","question":"Which products have inventory below their reorder point?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["inventory_levels","reorder_rules","order_lines","purchase_orders","sales_orders","inventory_transactions","inventory_adjustments","products","product_suppliers","po_lines","adjustment_lines","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_levels","similarity":0.7070801714571546},{"table":"reorder_rules","similarity":0.6993615141081165},{"table":"order_lines","similarity":0.6642088827606001},{"table":"purchase_orders","similarity":0.6443483426703897},{"table":"inventory_transactions","similarity":0.6416382343377212},{"table":"products","similarity":0.6294483845877934},{"table":"sales_orders","similarity":0.6263982770622627},{"table":"inventory_adjustments","similarity":0.625212937166316},{"table":"product_suppliers","similarity":0.6251606663311581},{"table":"adjustment_lines","similarity":0.6130209514155518},{"table":"po_lines","similarity":0.6120042387827147},{"table":"requisition_lines","similarity":0.6038701680112407},{"table":"goods_receipts","similarity":0.6006720578725578},{"table":"product_categories","similarity":0.5982652346826921},{"table":"vendor_invoice_lines","similarity":0.5939487288947369}],"column_hits_per_table":{"inventory_levels":8,"reorder_rules":6,"order_lines":4,"sales_orders":6,"inventory_transactions":6,"po_lines":1,"inventory_adjustments":6,"purchase_orders":5,"requisition_lines":1,"product_suppliers":1,"warehouse_locations":1,"purchase_requisitions":2,"products":2,"receipt_lines":1},"top_columns_per_table":{"inventory_levels":[{"column":"product_id","similarity":0.6933487635392793},{"column":"last_count_date","similarity":0.6823075362329812},{"column":"quantity_reserved","similarity":0.6757460490667979}],"reorder_rules":[{"column":"product_id","similarity":0.6926440847612831},{"column":"reorder_quantity","similarity":0.6606737830959721},{"column":"max_quantity","similarity":0.6520065510249886}],"order_lines":[{"column":"product_id","similarity":0.6859094375448689},{"column":"quantity_shipped","similarity":0.6455034843795919},{"column":"quantity","similarity":0.6334487398094706}],"sales_orders":[{"column":"order_number","similarity":0.6639517787797891},{"column":"status","similarity":0.6466630830274546},{"column":"order_date","similarity":0.639183860244724}],"inventory_transactions":[{"column":"product_id","similarity":0.6577299676888266},{"column":"location_id","similarity":0.6475618823542578},{"column":"quantity","similarity":0.6407976916150718}],"po_lines":[{"column":"product_id","similarity":0.6572816867979093}],"inventory_adjustments":[{"column":"status","similarity":0.6508806959470139},{"column":"reason","similarity":0.6489151000391595},{"column":"adjustment_number","similarity":0.6357746244949577}],"purchase_orders":[{"column":"po_number","similarity":0.6499714608427599},{"column":"status","similarity":0.6425932566416922},{"column":"expected_date","similarity":0.6284413308063352}],"requisition_lines":[{"column":"product_id","similarity":0.6451053156263248}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.644742435890616}],"warehouse_locations":[{"column":"aisle","similarity":0.6337557011841548}],"purchase_requisitions":[{"column":"requisition_number","similarity":0.6250413268166893},{"column":"status","similarity":0.6175422714713268}],"products":[{"column":"list_price","similarity":0.623827175050673},{"column":"category_id","similarity":0.6206202221080743}],"receipt_lines":[{"column":"product_id","similarity":0.6141560834320862}]},"fused_scores":[{"table":"inventory_levels","fused":0.8323203271808449,"table_sim":0.7070801714571546,"col_score":1.0201805607663803},{"table":"reorder_rules","fused":0.8142877319082565,"table_sim":0.6993615141081165,"col_score":0.9866770586084664},{"table":"order_lines","fused":0.783416471370091,"table_sim":0.6642088827606001,"col_score":0.9622278542843272},{"table":"purchase_orders","fused":0.7722858561006047,"table_sim":0.6443483426703897,"col_score":0.9641921262459275},{"table":"sales_orders","fused":0.7692564497982181,"table_sim":0.6263982770622627,"col_score":0.983543708902151},{"table":"inventory_transactions","fused":0.7669992320885244,"table_sim":0.6416382343377212,"col_score":0.9550407287147291},{"table":"inventory_adjustments","fused":0.761848727214445,"table_sim":0.625212937166316,"col_score":0.9668024122866383},{"table":"products","fused":0.7140867318680757,"table_sim":0.6294483845877934,"col_score":0.8410442527884989},{"table":"product_suppliers","fused":0.6329933741549413,"table_sim":0.6251606663311581,"col_score":0.644742435890616},{"table":"po_lines","fused":0.5512414155730434,"table_sim":0.6120042387827147,"col_score":0.4600971807585365},{"table":"requisition_lines","fused":0.5429515891821154,"table_sim":0.6038701680112407,"col_score":0.4515737209384273},{"table":"adjustment_lines","fused":0.36781257084933106,"table_sim":0.6130209514155518,"col_score":0},{"table":"goods_receipts","fused":0.3604032347235347,"table_sim":0.6006720578725578,"col_score":0},{"table":"product_categories","fused":0.3589591408096153,"table_sim":0.5982652346826921,"col_score":0},{"table":"vendor_invoice_lines","fused":0.35636923733684217,"table_sim":0.5939487288947369,"col_score":0}],"fk_expansion_candidates":19,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"product_categories","reason":"max_tables"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":29,"total_retrieval_latency_ms":35,"sql_generated":"SELECT p.product_id, p.name FROM products p JOIN inventory_levels il ON p.product_id = il.product_id JOIN reorder_rules rr ON p.product_id = rr.product_id WHERE il.quantity_available < rr.min_quantity;","tables_used_in_sql":[],"explain_result":"success","rows_returned":41,"total_latency_ms":1103}
{"timestamp":"2026-01-27T20:48:19.328Z","query_id":"ece15f30-a4a2-4b6e-8981-fc4d8245246f","question":"Show total inventory value by warehouse","attempt_count":2,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["inventory_levels","warehouse_locations","inventory_transactions","warehouses","inventory_adjustments","sales_orders","stock_transfers","purchase_orders","fixed_assets","product_suppliers","goods_receipts","reorder_rules"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_levels","similarity":0.7104203582862987},{"table":"inventory_transactions","similarity":0.680757846413893},{"table":"warehouse_locations","similarity":0.6688272683283106},{"table":"inventory_adjustments","similarity":0.6606002830367331},{"table":"warehouses","similarity":0.6556396900395098},{"table":"goods_receipts","similarity":0.6485940357294664},{"table":"stock_transfers","similarity":0.6361222068277603},{"table":"receipt_lines","similarity":0.599261793575482},{"table":"fixed_assets","similarity":0.5815202009406938},{"table":"purchase_orders","similarity":0.572969973940203},{"table":"asset_categories","similarity":0.5669210401950147},{"table":"asset_maintenance","similarity":0.5650580534060331},{"table":"product_suppliers","similarity":0.5642200983640595},{"table":"sales_orders","similarity":0.5616335878669071},{"table":"reorder_rules","similarity":0.5613905707653182}],"column_hits_per_table":{"inventory_levels":8,"inventory_transactions":7,"inventory_adjustments":2,"goods_receipts":1,"warehouses":6,"stock_transfers":2,"warehouse_locations":7,"sales_orders":3,"vendor_invoices":2,"purchase_orders":1,"budgets":1,"sales_quotes":1,"departments":1,"receipt_lines":1,"product_suppliers":1,"reorder_rules":1,"depreciation_entries":2,"products":2,"fixed_assets":1},"top_columns_per_table":{"inventory_levels":[{"column":"warehouse_id","similarity":0.7245152932924512},{"column":"location_id","similarity":0.670229449220733},{"column":"quantity_available","similarity":0.6634243412325281}],"inventory_transactions":[{"column":"warehouse_id","similarity":0.7126219801719647},{"column":"quantity","similarity":0.6882665247995969},{"column":"location_id","similarity":0.6644472601923928}],"inventory_adjustments":[{"column":"warehouse_id","similarity":0.7000232196630412},{"column":"adjusted_by","similarity":0.6038072357651799}],"goods_receipts":[{"column":"warehouse_id","similarity":0.6983268325646605}],"warehouses":[{"column":"warehouse_id","similarity":0.6884846242517689},{"column":"code","similarity":0.666009086549763},{"column":"manager_id","similarity":0.6602922237598574}],"stock_transfers":[{"column":"to_warehouse_id","similarity":0.68127907076134},{"column":"from_warehouse_id","similarity":0.6749809961693801}],"warehouse_locations":[{"column":"capacity","similarity":0.6795034389771706},{"column":"warehouse_id","similarity":0.6699168364120748},{"column":"aisle","similarity":0.6398304684247763}],"sales_orders":[{"column":"total","similarity":0.6721682901729499},{"column":"tax_amount","similarity":0.6091494655585886},{"column":"shipping_cost","similarity":0.6058838567040926}],"vendor_invoices":[{"column":"total","similarity":0.6677524443677078},{"column":"subtotal","similarity":0.600674989172044}],"purchase_orders":[{"column":"total","similarity":0.6534737529838377}],"budgets":[{"column":"total_amount","similarity":0.6378055154758845}],"sales_quotes":[{"column":"total","similarity":0.623918506647635}],"departments":[{"column":"budget","similarity":0.6201249087174965}],"receipt_lines":[{"column":"location_id","similarity":0.6169512352230854}],"product_suppliers":[{"column":"unit_cost","similarity":0.6157369492414859}],"reorder_rules":[{"column":"warehouse_id","similarity":0.6106322891909687}],"depreciation_entries":[{"column":"amount","similarity":0.6082306456614778},{"column":"book_value","similarity":0.6060019840891933}],"products":[{"column":"unit_cost","similarity":0.6081881272182337},{"column":"list_price","similarity":0.6022375697293547}],"fixed_assets":[{"column":"disposal_amount","similarity":0.6045093113587248}]},"fused_scores":[{"table":"inventory_levels","fused":0.8234550149369311,"table_sim":0.7104203582862987,"col_score":0.9930069999128798},{"table":"warehouse_locations","fused":0.8010638302728099,"table_sim":0.6688272683283106,"col_score":0.9994186731895587},{"table":"inventory_transactions","fused":0.7835283949922496,"table_sim":0.680757846413893,"col_score":0.9376842178597845},{"table":"warehouses","fused":0.7561752960388588,"table_sim":0.6556396900395098,"col_score":0.9069787050378821},{"table":"inventory_adjustments","fused":0.7358863148809376,"table_sim":0.6606002830367331,"col_score":0.8488153626472443},{"table":"sales_orders","fused":0.7276773619010419,"table_sim":0.5616335878669071,"col_score":0.9767430229522442},{"table":"stock_transfers","fused":0.6669288033735445,"table_sim":0.6361222068277603,"col_score":0.713138698192221},{"table":"purchase_orders","fused":0.6051714855576569,"table_sim":0.572969973940203,"col_score":0.6534737529838377},{"table":"fixed_assets","fused":0.5907158451079062,"table_sim":0.5815202009406938,"col_score":0.6045093113587248},{"table":"product_suppliers","fused":0.58482683871503,"table_sim":0.5642200983640595,"col_score":0.6157369492414859},{"table":"goods_receipts","fused":0.5846879345557847,"table_sim":0.6485940357294664,"col_score":0.4888287827952624},{"table":"receipt_lines","fused":0.5323034220077532,"table_sim":0.599261793575482,"col_score":0.4318658646561597},{"table":"reorder_rules","fused":0.5078113834326621,"table_sim":0.5613905707653182,"col_score":0.42744260243367804},{"table":"vendor_invoices","fused":0.3872359755814919,"table_sim":0,"col_score":0.9680899389537297},{"table":"depreciation_entries","fused":0.3644926550824298,"table_sim":0,"col_score":0.9112316377060744}],"fk_expansion_candidates":21,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"employees","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_categories","reason":"max_tables"},{"table":"order_lines","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"vendor_invoices","reason":"max_tables"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"receipt_lines","reason":"max_tables"},{"table":"products","reason":"max_tables"},{"table":"customers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"max_tables"},{"table":"sales_quotes","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":42,"total_retrieval_latency_ms":47,"sql_generated":"","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column w.location_id does not exist","total_latency_ms":1952,"failure_type":"execution_error","failure_details":"Model did not generate SELECT statement"}
{"timestamp":"2026-01-27T20:48:21.281Z","query_id":"620b9b5d-ae36-4c73-9445-2e32b83c2057","question":"List products that had stock transfers in the last 30 days","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["stock_transfers","asset_transfers","product_suppliers","transfer_lines","products","sales_orders","purchase_orders","sales_opportunities","inventory_transactions","bank_transactions","goods_receipts","inventory_levels"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"stock_transfers","similarity":0.7091850354041176},{"table":"transfer_lines","similarity":0.646870577681612},{"table":"asset_transfers","similarity":0.59288750153646},{"table":"product_suppliers","similarity":0.5817884382151997},{"table":"goods_receipts","similarity":0.5680812156740983},{"table":"products","similarity":0.5634067444500328},{"table":"inventory_transactions","similarity":0.5602292192430635},{"table":"purchase_orders","similarity":0.5596151991091506},{"table":"fixed_assets","similarity":0.5580960077160902},{"table":"sales_orders","similarity":0.5561090865394333},{"table":"sales_opportunities","similarity":0.5491462356670244},{"table":"asset_maintenance","similarity":0.5473904753072384},{"table":"purchase_requisitions","similarity":0.5332712706373074},{"table":"bank_transactions","similarity":0.5331448467569079},{"table":"inventory_adjustments","similarity":0.530733629333142}],"column_hits_per_table":{"stock_transfers":9,"asset_transfers":4,"product_suppliers":2,"products":7,"fixed_assets":1,"transfer_lines":3,"sales_orders":3,"goods_receipts":2,"sales_opportunities":2,"purchase_orders":3,"inventory_transactions":2,"bank_transactions":3,"inventory_adjustments":2,"sales_quotes":2,"asset_maintenance":1,"purchase_requisitions":2,"inventory_levels":1,"vendor_invoices":1},"top_columns_per_table":{"stock_transfers":[{"column":"transfer_date","similarity":0.7569744068757143},{"column":"requested_date","similarity":0.7407780240698681},{"column":"status","similarity":0.7336388205522848}],"asset_transfers":[{"column":"transfer_date","similarity":0.6801557927296986},{"column":"reason","similarity":0.636937017402658},{"column":"transferred_by","similarity":0.591261555474914}],"product_suppliers":[{"column":"lead_time_days","similarity":0.6325433597312592},{"column":"vendor_sku","similarity":0.5983939107153067}],"products":[{"column":"weight","similarity":0.6269164154643503},{"column":"sku","similarity":0.6128165683332525},{"column":"name","similarity":0.6112501339273688}],"fixed_assets":[{"column":"purchase_date","similarity":0.6194298336524596}],"transfer_lines":[{"column":"transfer_id","similarity":0.616838099560071},{"column":"product_id","similarity":0.6124982850699332},{"column":"quantity_transferred","similarity":0.5929855373409126}],"sales_orders":[{"column":"ship_date","similarity":0.6139033315106148},{"column":"status","similarity":0.5980018171133202},{"column":"order_date","similarity":0.5881191497886654}],"goods_receipts":[{"column":"receipt_date","similarity":0.6086781538927446},{"column":"notes","similarity":0.5962651293145639}],"sales_opportunities":[{"column":"actual_close_date","similarity":0.6071636494672776},{"column":"expected_close_date","similarity":0.5912239207558383}],"purchase_orders":[{"column":"status","similarity":0.6014695517939539},{"column":"expected_date","similarity":0.5942592923069729},{"column":"order_date","similarity":0.5880912431098863}],"inventory_transactions":[{"column":"transaction_date","similarity":0.5945769623932919},{"column":"reference_type","similarity":0.5800879925710923}],"bank_transactions":[{"column":"transaction_date","similarity":0.5929428887812874},{"column":"reference","similarity":0.5783350592316007},{"column":"reconciled","similarity":0.5781446888114008}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.5902712511353371},{"column":"status","similarity":0.5772237526402182}],"sales_quotes":[{"column":"valid_until","similarity":0.5888547647382517},{"column":"status","similarity":0.587261164996558}],"asset_maintenance":[{"column":"completed_date","similarity":0.586704390488891}],"purchase_requisitions":[{"column":"status","similarity":0.5849457914930625},{"column":"approved_date","similarity":0.5749663116518828}],"inventory_levels":[{"column":"last_count_date","similarity":0.5761760152247924}],"vendor_invoices":[{"column":"status","similarity":0.5752789063344165}]},"fused_scores":[{"table":"stock_transfers","fused":0.8764563888067298,"table_sim":0.7091850354041176,"col_score":1.1273634189106483},{"table":"asset_transfers","fused":0.755182221494287,"table_sim":0.59288750153646,"col_score":0.9986243014310277},{"table":"product_suppliers","fused":0.7217691889646848,"table_sim":0.5817884382151997,"col_score":0.9317403150889125},{"table":"transfer_lines","fused":0.7116738954837423,"table_sim":0.646870577681612,"col_score":0.8088788721869374},{"table":"products","fused":0.7113739265224104,"table_sim":0.5634067444500328,"col_score":0.9333246996309765},{"table":"sales_orders","fused":0.696850614485639,"table_sim":0.5561090865394333,"col_score":0.9079629064049475},{"table":"purchase_orders","fused":0.6910910850102567,"table_sim":0.5596151991091506,"col_score":0.8883049138619161},{"table":"sales_opportunities","fused":0.6905979853382933,"table_sim":0.5491462356670244,"col_score":0.9027756098451968},{"table":"inventory_transactions","fused":0.6899859150173733,"table_sim":0.5602292192430635,"col_score":0.884620958678838},{"table":"bank_transactions","fused":0.6727310754129798,"table_sim":0.5331448467569079,"col_score":0.8821104183970878},{"table":"goods_receipts","fused":0.6677971090655958,"table_sim":0.5680812156740983,"col_score":0.8173709491528419},{"table":"inventory_adjustments","fused":0.6353600034236506,"table_sim":0.530733629333142,"col_score":0.7922995645594134},{"table":"purchase_requisitions","fused":0.6318416978521664,"table_sim":0.5332712706373074,"col_score":0.7796973386744547},{"table":"fixed_assets","fused":0.582629538090638,"table_sim":0.5580960077160902,"col_score":0.6194298336524596},{"table":"asset_maintenance","fused":0.5631160413798995,"table_sim":0.5473904753072384,"col_score":0.586704390488891}],"fk_expansion_candidates":24,"fk_expansion_added":2,"fk_expansion_blocked_count":19,"fk_expansion_blocked":[{"table":"employees","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"product_categories","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"sales_quotes","reason":"max_tables"},{"table":"addresses","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"bank_accounts","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":30,"total_retrieval_latency_ms":37,"sql_generated":"SELECT DISTINCT p.product_id, p.name FROM products AS p JOIN inventory_transactions AS it ON p.product_id = it.product_id AND it.transaction_date >= CURRENT_DATE - INTERVAL '30 days' WHERE EXISTS (SELECT 1 FROM stock_transfers st WHERE st.product_id = p.product_id);","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column st.product_id does not exist","total_latency_ms":3500,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column st.product_id does not exist"}
{"timestamp":"2026-01-27T20:48:24.781Z","query_id":"c9c19945-a0a2-41e1-a084-fe1881954d01","question":"What is the total spend by vendor this year?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["vendor_invoices","purchase_orders","vendors","project_expenses","vendor_invoice_lines","budgets","project_budgets","sales_orders","product_suppliers","purchase_requisitions","budget_lines","fiscal_years"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"vendor_invoices","similarity":0.639424435349415},{"table":"vendors","similarity":0.6244918790926227},{"table":"purchase_orders","similarity":0.6177456671712362},{"table":"product_suppliers","similarity":0.598703660216106},{"table":"fiscal_years","similarity":0.5958886040093712},{"table":"project_expenses","similarity":0.5917559199865416},{"table":"vendor_contacts","similarity":0.5871352454607119},{"table":"project_budgets","similarity":0.5783111700735831},{"table":"vendor_invoice_lines","similarity":0.5735528102960924},{"table":"budgets","similarity":0.5729808761794307},{"table":"sales_orders","similarity":0.558652322840589},{"table":"purchase_requisitions","similarity":0.5504399922373249},{"table":"fiscal_periods","similarity":0.5474194111304026},{"table":"goods_receipts","similarity":0.5455071550265284},{"table":"cost_centers","similarity":0.5407092339260996}],"column_hits_per_table":{"vendor_invoices":10,"budgets":2,"purchase_orders":5,"vendor_invoice_lines":3,"vendors":9,"project_expenses":3,"project_budgets":2,"sales_orders":2,"product_suppliers":2,"sales_quotes":2,"projects":1,"fixed_assets":3,"asset_maintenance":1,"budget_lines":1,"products":1,"depreciation_schedules":1,"purchase_requisitions":1,"cost_centers":1},"top_columns_per_table":{"vendor_invoices":[{"column":"total","similarity":0.7074726026964867},{"column":"tax_amount","similarity":0.6649497692347739},{"column":"amount_paid","similarity":0.6613394434119355}],"budgets":[{"column":"total_amount","similarity":0.6614983036750417},{"column":"approved_by","similarity":0.5947070667678063}],"purchase_orders":[{"column":"total","similarity":0.6515245249628966},{"column":"tax_amount","similarity":0.6241597829948147},{"column":"vendor_id","similarity":0.6143595728723519}],"vendor_invoice_lines":[{"column":"unit_cost","similarity":0.6418835765382308},{"column":"amount","similarity":0.640406660125043},{"column":"quantity","similarity":0.6011977568369454}],"vendors":[{"column":"payment_terms","similarity":0.6369764670557316},{"column":"vendor_number","similarity":0.6217316370349235},{"column":"phone","similarity":0.6164215736258496}],"project_expenses":[{"column":"expense_date","similarity":0.6340219496762818},{"column":"amount","similarity":0.6226087404303633},{"column":"approved_by","similarity":0.5951826173297748}],"project_budgets":[{"column":"actual_amount","similarity":0.6339228432560066},{"column":"planned_amount","similarity":0.6124397686150321}],"sales_orders":[{"column":"total","similarity":0.6331667607848637},{"column":"tax_amount","similarity":0.5979011469280059}],"product_suppliers":[{"column":"unit_cost","similarity":0.627453917704397},{"column":"vendor_id","similarity":0.6081443532598847}],"sales_quotes":[{"column":"total","similarity":0.6239159141661016},{"column":"tax_amount","similarity":0.5928428446380807}],"projects":[{"column":"budget","similarity":0.6156140380189964}],"fixed_assets":[{"column":"vendor_id","similarity":0.6143746297105622},{"column":"purchase_cost","similarity":0.6016807292507821},{"column":"purchase_date","similarity":0.5932914020371511}],"asset_maintenance":[{"column":"vendor_id","similarity":0.6041941466937952}],"budget_lines":[{"column":"amount","similarity":0.6028914729549076}],"products":[{"column":"unit_cost","similarity":0.59947881070682}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5989680887270853}],"purchase_requisitions":[{"column":"approved_date","similarity":0.5937593260844434}],"cost_centers":[{"column":"is_active","similarity":0.5896614020585967}]},"fused_scores":[{"table":"vendor_invoices","fused":0.7996336561351984,"table_sim":0.639424435349415,"col_score":1.0399474873138737},{"table":"purchase_orders","fused":0.7560891668868633,"table_sim":0.6177456671712362,"col_score":0.9636044164603039},{"table":"vendors","fused":0.753832041684851,"table_sim":0.6244918790926227,"col_score":0.9478422855731934},{"table":"project_expenses","fused":0.7331840799485103,"table_sim":0.5917559199865416,"col_score":0.9453263198914634},{"table":"vendor_invoice_lines","fused":0.7289664488179564,"table_sim":0.5735528102960924,"col_score":0.9620869066007522},{"table":"budgets","fused":0.7273292605312365,"table_sim":0.5729808761794307,"col_score":0.9588518370589448},{"table":"project_budgets","fused":0.723043793069559,"table_sim":0.5783111700735831,"col_score":0.9401427275635226},{"table":"sales_orders","fused":0.7080383274039,"table_sim":0.558652322840589,"col_score":0.9321173342488667},{"table":"product_suppliers","fused":0.6953439726678063,"table_sim":0.598703660216106,"col_score":0.8403044413453566},{"table":"purchase_requisitions","fused":0.5677677257761723,"table_sim":0.5504399922373249,"col_score":0.5937593260844434},{"table":"cost_centers","fused":0.48953073293206684,"table_sim":0.5407092339260996,"col_score":0.4127629814410177},{"table":"sales_quotes","fused":0.3681349345940568,"table_sim":0,"col_score":0.9203373364851419},{"table":"fixed_assets","fused":0.3593305721077431,"table_sim":0,"col_score":0.8983264302693577},{"table":"fiscal_years","fused":0.35753316240562266,"table_sim":0.5958886040093712,"col_score":0},{"table":"vendor_contacts","fused":0.3522811472764272,"table_sim":0.5871352454607119,"col_score":0}],"fk_expansion_candidates":18,"fk_expansion_added":2,"fk_expansion_blocked_count":10,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"goods_receipts","reason":"max_tables"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"max_tables"},{"table":"projects","reason":"max_tables"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"max_tables"},{"table":"vendor_contacts","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":41,"total_retrieval_latency_ms":47,"sql_generated":"SELECT v.vendor_id, SUM(vi.amount) AS total_spend FROM vendor_invoices vi JOIN vendors v ON vi.vendor_id = v.vendor_id WHERE EXTRACT(YEAR FROM vi.invoice_date) = EXTRACT(YEAR FROM CURRENT_DATE) GROUP BY v.vendor_id;","tables_used_in_sql":[],"total_latency_ms":3491,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-27T20:48:28.272Z","query_id":"bce34a17-3a88-4c91-ae1a-5444161ac2e9","question":"List purchase orders that are overdue (expected date passed but not received)","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["purchase_orders","sales_orders","purchase_requisitions","vendor_invoices","goods_receipts","order_lines","performance_reviews","po_lines","timesheets","stock_transfers","fixed_assets","receipt_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"purchase_orders","similarity":0.6892780734130105},{"table":"sales_orders","similarity":0.6436897773327827},{"table":"goods_receipts","similarity":0.6352418457409176},{"table":"purchase_requisitions","similarity":0.6320653594363884},{"table":"order_lines","similarity":0.6266578306760409},{"table":"vendor_invoices","similarity":0.6080136686064002},{"table":"po_lines","similarity":0.6011866959038077},{"table":"requisition_lines","similarity":0.5693577300655596},{"table":"receipt_lines","similarity":0.5677454518528996},{"table":"product_suppliers","similarity":0.5615090637021368},{"table":"stock_transfers","similarity":0.5602310027454163},{"table":"timesheets","similarity":0.5554457572922294},{"table":"sales_opportunities","similarity":0.545868201128478},{"table":"performance_reviews","similarity":0.5450261489382808},{"table":"vendor_invoice_lines","similarity":0.5442160951221834}],"column_hits_per_table":{"purchase_orders":15,"sales_orders":8,"purchase_requisitions":6,"vendor_invoices":3,"fixed_assets":1,"stock_transfers":1,"performance_reviews":3,"order_lines":3,"goods_receipts":2,"sales_opportunities":1,"sales_quotes":2,"po_lines":2,"inventory_transactions":1,"timesheets":2},"top_columns_per_table":{"purchase_orders":[{"column":"expected_date","similarity":0.7928880554606059},{"column":"order_date","similarity":0.7657440492397745},{"column":"status","similarity":0.7519184819415597}],"sales_orders":[{"column":"order_date","similarity":0.7211283730098031},{"column":"required_date","similarity":0.7169867205643441},{"column":"ship_date","similarity":0.709284550816042}],"purchase_requisitions":[{"column":"approved_date","similarity":0.6836791699738378},{"column":"request_date","similarity":0.6834968678419967},{"column":"required_date","similarity":0.6788387331991973}],"vendor_invoices":[{"column":"due_date","similarity":0.6486593581769071},{"column":"status","similarity":0.6338796222049127},{"column":"invoice_date","similarity":0.6295602886682071}],"fixed_assets":[{"column":"purchase_date","similarity":0.6430714322189274}],"stock_transfers":[{"column":"requested_date","similarity":0.637706246401799}],"performance_reviews":[{"column":"review_date","similarity":0.6367120823797185},{"column":"review_period_end","similarity":0.6226937978004472},{"column":"review_period_start","similarity":0.6126884795240689}],"order_lines":[{"column":"quantity_shipped","similarity":0.6309090622279526},{"column":"order_id","similarity":0.615272097850357},{"column":"product_id","similarity":0.6125179904480164}],"goods_receipts":[{"column":"po_id","similarity":0.6298071972797271},{"column":"receipt_date","similarity":0.6286410440687602}],"sales_opportunities":[{"column":"expected_close_date","similarity":0.6266064464168489}],"sales_quotes":[{"column":"status","similarity":0.6252578342715298},{"column":"valid_until","similarity":0.6173297581247675}],"po_lines":[{"column":"po_id","similarity":0.6215991718566652},{"column":"quantity_received","similarity":0.6148659346007377}],"inventory_transactions":[{"column":"transaction_date","similarity":0.6171947868805752}],"timesheets":[{"column":"status","similarity":0.6144646954961696},{"column":"approved_date","similarity":0.6115859961900876}]},"fused_scores":[{"table":"purchase_orders","fused":0.8838708760800036,"table_sim":0.6892780734130105,"col_score":1.1757600800804933},{"table":"sales_orders","fused":0.8180625597164597,"table_sim":0.6436897773327827,"col_score":1.079621733291975},{"table":"purchase_requisitions","fused":0.7894102572197675,"table_sim":0.6320653594363884,"col_score":1.0254276038948362},{"table":"vendor_invoices","fused":0.7501840021682444,"table_sim":0.6080136686064002,"col_score":0.9634395025110107},{"table":"goods_receipts","fused":0.7207745326912165,"table_sim":0.6352418457409176,"col_score":0.8490735631166647},{"table":"order_lines","fused":0.7144964169958555,"table_sim":0.6266578306760409,"col_score":0.8462542964755775},{"table":"performance_reviews","fused":0.7062392818749454,"table_sim":0.5450261489382808,"col_score":0.9480589812799421},{"table":"po_lines","fused":0.6936822754425128,"table_sim":0.6011866959038077,"col_score":0.8324256447505705},{"table":"timesheets","fused":0.6639269102208365,"table_sim":0.5554457572922294,"col_score":0.8266486396137469},{"table":"stock_transfers","fused":0.5912211002079693,"table_sim":0.5602310027454163,"col_score":0.637706246401799},{"table":"sales_opportunities","fused":0.5781634992438264,"table_sim":0.545868201128478,"col_score":0.6266064464168489},{"table":"requisition_lines","fused":0.3416146380393357,"table_sim":0.5693577300655596,"col_score":0},{"table":"receipt_lines","fused":0.34064727111173976,"table_sim":0.5677454518528996,"col_score":0},{"table":"product_suppliers","fused":0.3369054382212821,"table_sim":0.5615090637021368,"col_score":0},{"table":"sales_quotes","fused":0.3344680000479212,"table_sim":0,"col_score":0.8361700001198029}],"fk_expansion_candidates":14,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"requisition_lines","reason":"max_tables"},{"table":"sales_quotes","reason":"max_tables"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":21,"total_retrieval_latency_ms":27,"sql_generated":"SELECT po.po_id AS \"Purchase Order ID\", po.po_number AS \"Purchase Order Number\", po.order_date, po.required_date, po.status AS \"Status\" FROM purchase_orders po JOIN goods_receipts gr ON po.po_id = gr.po_id AND gr.receipt_date > CURRENT_DATE WHERE po.expected_date < CURRENT_DATE;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column po.required_date does not exist","total_latency_ms":3941,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column po.required_date does not exist"}
{"timestamp":"2026-01-27T20:48:32.213Z","query_id":"7ca5608f-48df-440e-8251-5fac5e3a2eb9","question":"Show the approval rate for purchase requisitions","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["purchase_requisitions","purchase_orders","requisition_lines","performance_reviews","sales_orders","inventory_adjustments","employee_salaries","vendor_invoices","tax_rates","product_suppliers","fixed_assets","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"purchase_requisitions","similarity":0.7144537875190509},{"table":"purchase_orders","similarity":0.6754585362390629},{"table":"requisition_lines","similarity":0.6526067337493826},{"table":"performance_reviews","similarity":0.5761025171829891},{"table":"vendor_invoices","similarity":0.5620813724541878},{"table":"sales_orders","similarity":0.5600540620423634},{"table":"inventory_adjustments","similarity":0.5560987141173879},{"table":"tax_rates","similarity":0.5556126665897644},{"table":"goods_receipts","similarity":0.5543356866163649},{"table":"certifications","similarity":0.5535315897541819},{"table":"product_suppliers","similarity":0.5532001558068573},{"table":"employee_salaries","similarity":0.5514561137792826},{"table":"po_lines","similarity":0.5507992972695006},{"table":"sales_territories","similarity":0.5472861793239767},{"table":"products","similarity":0.5453782545044963}],"column_hits_per_table":{"purchase_requisitions":11,"purchase_orders":12,"requisition_lines":5,"inventory_adjustments":1,"budgets":1,"performance_reviews":2,"employee_salaries":1,"project_expenses":1,"fixed_assets":2,"order_lines":1,"sales_orders":5,"timesheets":2,"tax_rates":1,"vendor_invoices":1,"project_resources":1,"quote_lines":1,"leave_requests":1,"product_suppliers":1},"top_columns_per_table":{"purchase_requisitions":[{"column":"approved_date","similarity":0.7767304385632029},{"column":"approved_by","similarity":0.7409449955495064},{"column":"requisition_number","similarity":0.7030808814464901}],"purchase_orders":[{"column":"approved_by","similarity":0.6946429533793925},{"column":"requisition_id","similarity":0.6718178582077006},{"column":"total","similarity":0.6683455402204478}],"requisition_lines":[{"column":"requisition_id","similarity":0.6376933087031063},{"column":"estimated_unit_cost","similarity":0.6333969557807274},{"column":"estimated_total","similarity":0.6312495690965759}],"inventory_adjustments":[{"column":"approved_by","similarity":0.6329021901958755}],"budgets":[{"column":"approved_by","similarity":0.6302903790830208}],"performance_reviews":[{"column":"goals_met_percent","similarity":0.6188795533101473},{"column":"rating","similarity":0.5953158785793504}],"employee_salaries":[{"column":"approved_by","similarity":0.6123122319484439}],"project_expenses":[{"column":"approved_by","similarity":0.6113584792040475}],"fixed_assets":[{"column":"purchase_cost","similarity":0.6112437587362358},{"column":"purchase_date","similarity":0.5752418077647418}],"order_lines":[{"column":"discount_percent","similarity":0.6107292969296323}],"sales_orders":[{"column":"total","similarity":0.607277665069308},{"column":"tax_amount","similarity":0.5855697288885665},{"column":"shipping_cost","similarity":0.5854713890413684}],"timesheets":[{"column":"approved_by","similarity":0.6059821911915741},{"column":"approved_date","similarity":0.5902187567696575}],"tax_rates":[{"column":"rate","similarity":0.5848985367091032}],"vendor_invoices":[{"column":"total","similarity":0.5829198135909294}],"project_resources":[{"column":"hourly_rate","similarity":0.5785087387167567}],"quote_lines":[{"column":"discount_percent","similarity":0.5783180170181821}],"leave_requests":[{"column":"approved_by","similarity":0.5782476386378983}],"product_suppliers":[{"column":"unit_cost","similarity":0.5763419254825446}]},"fused_scores":[{"table":"purchase_requisitions","fused":0.887553447046613,"table_sim":0.7144537875190509,"col_score":1.1472029363379561},{"table":"purchase_orders","fused":0.8168014111392844,"table_sim":0.6754585362390629,"col_score":1.0288157234896165},{"table":"requisition_lines","fused":0.7711727363812357,"table_sim":0.6526067337493826,"col_score":0.9490217403290153},{"table":"performance_reviews","fused":0.7122765073497226,"table_sim":0.5761025171829891,"col_score":0.9165374925998225},{"table":"sales_orders","fused":0.6960574490308546,"table_sim":0.5600540620423634,"col_score":0.9000625295135913},{"table":"inventory_adjustments","fused":0.5868201045487829,"table_sim":0.5560987141173879,"col_score":0.6329021901958755},{"table":"employee_salaries","fused":0.5757985610469472,"table_sim":0.5514561137792826,"col_score":0.6123122319484439},{"table":"vendor_invoices","fused":0.5704167489088845,"table_sim":0.5620813724541878,"col_score":0.5829198135909294},{"table":"tax_rates","fused":0.5673270146374999,"table_sim":0.5556126665897644,"col_score":0.5848985367091032},{"table":"product_suppliers","fused":0.5624568636771322,"table_sim":0.5532001558068573,"col_score":0.5763419254825446},{"table":"timesheets","fused":0.3604366278305612,"table_sim":0,"col_score":0.9010915695764029},{"table":"fixed_assets","fused":0.35954586504744274,"table_sim":0,"col_score":0.8988646626186068},{"table":"goods_receipts","fused":0.3326014119698189,"table_sim":0.5543356866163649,"col_score":0},{"table":"certifications","fused":0.33211895385250917,"table_sim":0.5535315897541819,"col_score":0},{"table":"po_lines","fused":0.33047957836170033,"table_sim":0.5507992972695006,"col_score":0}],"fk_expansion_candidates":15,"fk_expansion_added":2,"fk_expansion_blocked_count":10,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"countries","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"order_lines","reason":"max_tables"},{"table":"po_lines","reason":"max_tables"},{"table":"products","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":14,"total_retrieval_latency_ms":19,"sql_generated":"SELECT COUNT(DISTINCT p.po_id) AS approved_requisitions, COUNT(*) AS total_requisitions FROM purchase_orders p JOIN purchase_requisitions pr ON p.po_id = pr.requisition_id WHERE pr.status = 'approved' GROUP BY p.po_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":109,"total_latency_ms":1111}
{"timestamp":"2026-01-27T20:48:33.325Z","query_id":"e72261f4-eb25-4f67-8be4-e210324bfc69","question":"What is the total debit and credit for each account in the current period?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["bank_accounts","depreciation_entries","depreciation_schedules","bank_transactions","project_budgets","budgets","budget_lines","asset_categories","chart_of_accounts","customers","account_types","currencies"],"tables_from_table_retrieval":15,"tables_from_column_only":14,"tables_from_fk_expansion":2,"table_scores":[{"table":"bank_accounts","similarity":0.6774767745272873},{"table":"depreciation_entries","similarity":0.6479655202571633},{"table":"depreciation_schedules","similarity":0.6391071490249879},{"table":"bank_transactions","similarity":0.6215432609525777},{"table":"fiscal_periods","similarity":0.6118740658020915},{"table":"chart_of_accounts","similarity":0.6113283904518393},{"table":"customers","similarity":0.6110220975215452},{"table":"budget_lines","similarity":0.6048243661703417},{"table":"asset_categories","similarity":0.6023939402123736},{"table":"fiscal_years","similarity":0.5978109896942982},{"table":"account_types","similarity":0.5864823487782337},{"table":"budgets","similarity":0.5831943330024605},{"table":"project_budgets","similarity":0.5816505947654121},{"table":"project_milestones","similarity":0.5761644998941425},{"table":"currencies","similarity":0.5748021002449325}],"column_hits_per_table":{"bank_accounts":7,"depreciation_entries":7,"depreciation_schedules":7,"budgets":2,"purchase_orders":1,"bank_transactions":2,"vendor_invoices":1,"sales_orders":1,"asset_categories":1,"timesheets":1,"project_budgets":2,"po_lines":1,"departments":1,"requisition_lines":1,"order_lines":1,"sales_quotes":1,"journal_lines":1,"chart_of_accounts":1,"quote_lines":1,"customers":1,"fiscal_periods":1,"project_milestones":1,"budget_lines":2,"projects":1,"account_types":1,"project_expenses":2,"fixed_assets":1},"top_columns_per_table":{"bank_accounts":[{"column":"current_balance","similarity":0.7120054679865145},{"column":"account_number","similarity":0.6364628577177703},{"column":"is_active","similarity":0.632098349114848}],"depreciation_entries":[{"column":"amount","similarity":0.6892663698793005},{"column":"accumulated_depreciation","similarity":0.6791254877457136},{"column":"period_id","similarity":0.6601758928161718}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.6787718767673881},{"column":"monthly_amount","similarity":0.6713352089955611},{"column":"start_date","similarity":0.6503470632369572}],"budgets":[{"column":"total_amount","similarity":0.6681667214131277},{"column":"status","similarity":0.6095485585752322}],"purchase_orders":[{"column":"total","similarity":0.6434681983394138}],"bank_transactions":[{"column":"amount","similarity":0.6348031550733443},{"column":"transaction_date","similarity":0.5964424364374886}],"vendor_invoices":[{"column":"total","similarity":0.6257147661276886}],"sales_orders":[{"column":"total","similarity":0.6246642633195769}],"asset_categories":[{"column":"depreciation_method","similarity":0.6243470467444369}],"timesheets":[{"column":"total_hours","similarity":0.622973004430975}],"project_budgets":[{"column":"actual_amount","similarity":0.6207060762728754},{"column":"planned_amount","similarity":0.5975993619104593}],"po_lines":[{"column":"line_total","similarity":0.618555602548407}],"departments":[{"column":"budget","similarity":0.6174730859005904}],"requisition_lines":[{"column":"estimated_total","similarity":0.6165631045407493}],"order_lines":[{"column":"line_total","similarity":0.613699532542915}],"sales_quotes":[{"column":"total","similarity":0.6116576686122673}],"journal_lines":[{"column":"debit","similarity":0.6112275365658976}],"chart_of_accounts":[{"column":"account_number","similarity":0.6099549185272944}],"quote_lines":[{"column":"line_total","similarity":0.608422423187917}],"customers":[{"column":"credit_limit","similarity":0.6083072987668613}],"fiscal_periods":[{"column":"period_number","similarity":0.606657627375224}],"project_milestones":[{"column":"amount","similarity":0.6040594662589831}],"budget_lines":[{"column":"account_id","similarity":0.6034178781484847},{"column":"amount","similarity":0.600705481796664}],"projects":[{"column":"budget","similarity":0.6025614577990223}],"account_types":[{"column":"normal_balance","similarity":0.6015543450293432}],"project_expenses":[{"column":"amount","similarity":0.6014681875671599},{"column":"status","similarity":0.5964895591217514}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5971563516971157}]},"fused_scores":[{"table":"bank_accounts","fused":0.8185808234545322,"table_sim":0.6774767745272873,"col_score":1.0302368968453997},{"table":"depreciation_entries","fused":0.8003109576551608,"table_sim":0.6479655202571633,"col_score":1.0288291137521572},{"table":"depreciation_schedules","fused":0.7892400819210602,"table_sim":0.6391071490249879,"col_score":1.0144394812651687},{"table":"bank_transactions","fused":0.7461357058883822,"table_sim":0.6215432609525777,"col_score":0.9330243732920886},{"table":"project_budgets","fused":0.7167926597504893,"table_sim":0.5816505947654121,"col_score":0.9195057572281051},{"table":"budgets","fused":0.7025200865672598,"table_sim":0.5831943330024605,"col_score":0.881508716914459},{"table":"budget_lines","fused":0.6876553153616585,"table_sim":0.6048243661703417,"col_score":0.8119017391486336},{"table":"asset_categories","fused":0.6111751828251989,"table_sim":0.6023939402123736,"col_score":0.6243470467444369},{"table":"chart_of_accounts","fused":0.6107790016820214,"table_sim":0.6113283904518393,"col_score":0.6099549185272944},{"table":"customers","fused":0.6099361780196717,"table_sim":0.6110220975215452,"col_score":0.6083072987668613},{"table":"fiscal_periods","fused":0.6097874904313445,"table_sim":0.6118740658020915,"col_score":0.606657627375224},{"table":"account_types","fused":0.5925111472786775,"table_sim":0.5864823487782337,"col_score":0.6015543450293432},{"table":"project_milestones","fused":0.5873224864400788,"table_sim":0.5761644998941425,"col_score":0.6040594662589831},{"table":"fiscal_years","fused":0.3586865938165789,"table_sim":0.5978109896942982,"col_score":0},{"table":"currencies","fused":0.34488126014695947,"table_sim":0.5748021002449325,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":11,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"max_tables"},{"table":"fiscal_years","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":20,"total_retrieval_latency_ms":26,"sql_generated":"SELECT ca.account_id, SUM(bt.amount) AS total_debit, SUM(at.amount) AS total_credit FROM chart_of_accounts ca LEFT JOIN bank_transactions bt ON ca.account_id = bt.bank_account_id AND bt.transaction_type = 'Debit' AND bt.reconciled = TRUE AND bt.created_at >= CURRENT_DATE - INTERVAL '1 month' LEFT JOIN account_types at ON ca.account_type_id = at.type_id WHERE ca.is_active = TRUE GROUP BY ca.account_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column at.amount does not exist","total_latency_ms":5478,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column at.amount does not exist"}
{"timestamp":"2026-01-27T20:48:38.804Z","query_id":"b897cb73-4447-47fc-a9b5-d36e5d26b357","question":"List all posted journal entries for the current month","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["journal_entries","journal_lines","depreciation_entries","timesheet_entries","depreciation_schedules","performance_reviews","goods_receipts","project_milestones","timesheets","purchase_orders","chart_of_accounts","fiscal_periods"],"tables_from_table_retrieval":15,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"journal_entries","similarity":0.7371200347881697},{"table":"depreciation_entries","similarity":0.6388628310824237},{"table":"journal_lines","similarity":0.6381042717949331},{"table":"timesheet_entries","similarity":0.591409348833156},{"table":"fiscal_years","similarity":0.5469848742333804},{"table":"depreciation_schedules","similarity":0.5458362894331688},{"table":"goods_receipts","similarity":0.5400655622918485},{"table":"fiscal_periods","similarity":0.5399686868510553},{"table":"audit_log","similarity":0.5390638198818073},{"table":"budget_lines","similarity":0.5319608633212602},{"table":"project_milestones","similarity":0.5228205781898283},{"table":"performance_reviews","similarity":0.5210833445978394},{"table":"chart_of_accounts","similarity":0.5176304204490154},{"table":"asset_categories","similarity":0.5110443557995631},{"table":"project_phases","similarity":0.5032511717491329}],"column_hits_per_table":{"journal_entries":9,"journal_lines":7,"depreciation_entries":5,"timesheet_entries":7,"goods_receipts":2,"timesheets":3,"performance_reviews":3,"depreciation_schedules":3,"purchase_orders":2,"project_budgets":1,"sales_orders":2,"asset_maintenance":1,"maintenance_types":1,"project_expenses":1,"inventory_adjustments":1,"project_milestones":2},"top_columns_per_table":{"journal_entries":[{"column":"entry_date","similarity":0.7704936692205318},{"column":"status","similarity":0.7328960805042452},{"column":"posted_by","similarity":0.7019037298711207}],"journal_lines":[{"column":"debit","similarity":0.6580411774438369},{"column":"entry_id","similarity":0.6510961590410065},{"column":"credit","similarity":0.6359552498526305}],"depreciation_entries":[{"column":"entry_date","similarity":0.654431660506666},{"column":"journal_entry_id","similarity":0.6411698211827205},{"column":"period_id","similarity":0.5838462892330042}],"timesheet_entries":[{"column":"entry_date","similarity":0.6446211675734115},{"column":"description","similarity":0.5882230085427652},{"column":"entry_id","similarity":0.5722846831520506}],"goods_receipts":[{"column":"receipt_date","similarity":0.6047305754742575},{"column":"notes","similarity":0.5914014074550097}],"timesheets":[{"column":"submitted_date","similarity":0.6034062021491217},{"column":"status","similarity":0.5605065629261864},{"column":"approved_date","similarity":0.5574665928060918}],"performance_reviews":[{"column":"review_date","similarity":0.5928778431249968},{"column":"review_period_end","similarity":0.5846942408306532},{"column":"review_period_start","similarity":0.5843927700621266}],"depreciation_schedules":[{"column":"end_date","similarity":0.5723218581493166},{"column":"start_date","similarity":0.5661921664416115},{"column":"useful_life_months","similarity":0.5592927836677546}],"purchase_orders":[{"column":"expected_date","similarity":0.5705593782125117},{"column":"order_date","similarity":0.5577237956734042}],"project_budgets":[{"column":"notes","similarity":0.5704481753860894}],"sales_orders":[{"column":"order_date","similarity":0.5574635444979215},{"column":"ship_date","similarity":0.5551436110758307}],"asset_maintenance":[{"column":"completed_date","similarity":0.5574353291980277}],"maintenance_types":[{"column":"frequency_months","similarity":0.5568999551121173}],"project_expenses":[{"column":"expense_date","similarity":0.5566292234027648}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.556301592294009}],"project_milestones":[{"column":"due_date","similarity":0.5548577873367307},{"column":"completed_date","similarity":0.5539763120091956}]},"fused_scores":[{"table":"journal_entries","fused":0.8908502345353386,"table_sim":0.7371200347881697,"col_score":1.121445534156092},{"table":"journal_lines","fused":0.7732700840250207,"table_sim":0.6381042717949331,"col_score":0.9760188023701521},{"table":"depreciation_entries","fused":0.7611368329631072,"table_sim":0.6388628310824237,"col_score":0.9445478357841326},{"table":"timesheet_entries","fused":0.7271270215198551,"table_sim":0.591409348833156,"col_score":0.9307035305499038},{"table":"depreciation_schedules","fused":0.6696689502079503,"table_sim":0.5458362894331688,"col_score":0.8554179413701224},{"table":"performance_reviews","fused":0.666739992174833,"table_sim":0.5210833445978394,"col_score":0.8852249635403234},{"table":"goods_receipts","fused":0.6487277646085134,"table_sim":0.5400655622918485,"col_score":0.8117210680835109},{"table":"project_milestones","fused":0.6464307242504284,"table_sim":0.5228205781898283,"col_score":0.8318459433413286},{"table":"timesheets","fused":0.35285579942086703,"table_sim":0,"col_score":0.8821394985521676},{"table":"purchase_orders","fused":0.33976851041968553,"table_sim":0,"col_score":0.8494212760492138},{"table":"sales_orders","fused":0.3340141400143347,"table_sim":0,"col_score":0.8350353500358367},{"table":"fiscal_years","fused":0.32819092454002824,"table_sim":0.5469848742333804,"col_score":0},{"table":"fiscal_periods","fused":0.32398121211063313,"table_sim":0.5399686868510553,"col_score":0},{"table":"audit_log","fused":0.32343829192908435,"table_sim":0.5390638198818073,"col_score":0},{"table":"budget_lines","fused":0.31917651799275615,"table_sim":0.5319608633212602,"col_score":0}],"fk_expansion_candidates":14,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":37,"total_retrieval_latency_ms":44,"sql_generated":"SELECT j.entry_id AS entry_id, j.entry_number AS entry_number, j.entry_date AS entry_date, jl.debit AS debit, jl.credit AS credit FROM journal_entries j JOIN journal_lines jl ON j.entry_id = jl.entry_id WHERE EXTRACT(MONTH FROM CURRENT_DATE) = EXTRACT(MONTH FROM j.entry_date);","tables_used_in_sql":[],"total_latency_ms":4566,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-27T20:48:43.370Z","query_id":"375ebb3f-7e38-4b45-b2fc-3a106bf41ed0","question":"Show budget vs actual spending by department","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["budgets","project_budgets","departments","project_expenses","budget_lines","fiscal_periods","cost_centers","fiscal_years","depreciation_schedules","purchase_requisitions","depreciation_entries","fixed_assets"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"budgets","similarity":0.6743467953278661},{"table":"project_budgets","similarity":0.6399342167994372},{"table":"budget_lines","similarity":0.6120027063639643},{"table":"departments","similarity":0.6078621456074449},{"table":"cost_centers","similarity":0.5976264909955187},{"table":"project_expenses","similarity":0.5925480261881607},{"table":"fiscal_periods","similarity":0.5508242618316114},{"table":"fiscal_years","similarity":0.5297470824133431},{"table":"purchase_requisitions","similarity":0.5091655209627607},{"table":"positions","similarity":0.5048661154254893},{"table":"depreciation_entries","similarity":0.49557827959519485},{"table":"depreciation_schedules","similarity":0.48960068033897763},{"table":"business_units","similarity":0.4799656071405569},{"table":"bank_accounts","similarity":0.47991777986203277},{"table":"employee_salaries","similarity":0.4787495684544676}],"column_hits_per_table":{"departments":5,"budgets":8,"project_budgets":6,"cost_centers":3,"budget_lines":5,"projects":1,"project_expenses":10,"purchase_requisitions":1,"fiscal_periods":4,"employees":1,"fiscal_years":1,"positions":1,"fixed_assets":1,"journal_lines":1,"depreciation_schedules":1,"asset_maintenance":1},"top_columns_per_table":{"departments":[{"column":"budget","similarity":0.7508816231830893},{"column":"name","similarity":0.5807613926469624},{"column":"parent_department_id","similarity":0.576838586583815}],"budgets":[{"column":"department_id","similarity":0.7124132689447956},{"column":"total_amount","similarity":0.6738486234633608},{"column":"status","similarity":0.6545539781274986}],"project_budgets":[{"column":"actual_amount","similarity":0.6727544749805415},{"column":"category","similarity":0.6432702298136043},{"column":"planned_amount","similarity":0.6345451040343791}],"cost_centers":[{"column":"department_id","similarity":0.6447254284668595},{"column":"is_active","similarity":0.5741948148052456},{"column":"code","similarity":0.5336285679368914}],"budget_lines":[{"column":"amount","similarity":0.6347292734898708},{"column":"budget_id","similarity":0.6254333624544377},{"column":"period_id","similarity":0.6014529896644097}],"projects":[{"column":"budget","similarity":0.6320788528452682}],"project_expenses":[{"column":"amount","similarity":0.6129047067883163},{"column":"category","similarity":0.6079498441831898},{"column":"is_billable","similarity":0.6033626054361303}],"purchase_requisitions":[{"column":"department_id","similarity":0.5964169191021919}],"fiscal_periods":[{"column":"period_number","similarity":0.5636129011166751},{"column":"is_closed","similarity":0.5509300436603198},{"column":"fiscal_year_id","similarity":0.5466861860533114}],"employees":[{"column":"department_id","similarity":0.5532234163970625}],"fiscal_years":[{"column":"year","similarity":0.545470788921557}],"positions":[{"column":"department_id","similarity":0.5428918958420113}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5418088384489079}],"journal_lines":[{"column":"cost_center_id","similarity":0.5382510765684452}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5363986996551952}],"asset_maintenance":[{"column":"cost","similarity":0.5334437301670096}]},"fused_scores":[{"table":"budgets","fused":0.7999004207313699,"table_sim":0.6743467953278661,"col_score":0.9882308588366255},{"table":"project_budgets","fused":0.7817163660345998,"table_sim":0.6399342167994372,"col_score":0.9943895898873436},{"table":"departments","fused":0.7463765316082773,"table_sim":0.6078621456074449,"col_score":0.9541481106095261},{"table":"project_expenses","fused":0.722280667264861,"table_sim":0.5925480261881607,"col_score":0.9168796288799113},{"table":"budget_lines","fused":0.7086540039579482,"table_sim":0.6120027063639643,"col_score":0.853630950348924},{"table":"fiscal_periods","fused":0.6661257262777008,"table_sim":0.5508242618316114,"col_score":0.839077922946835},{"table":"cost_centers","fused":0.6622888817574282,"table_sim":0.5976264909955187,"col_score":0.7592824679002922},{"table":"fiscal_years","fused":0.5360365650166287,"table_sim":0.5297470824133431,"col_score":0.545470788921557},{"table":"depreciation_schedules","fused":0.5083198880654647,"table_sim":0.48960068033897763,"col_score":0.5363986996551952},{"table":"purchase_requisitions","fused":0.47249604992627015,"table_sim":0.5091655209627607,"col_score":0.4174918433715343},{"table":"positions","fused":0.45492940009105676,"table_sim":0.5048661154254893,"col_score":0.38002432708940787},{"table":"depreciation_entries","fused":0.2973469677571169,"table_sim":0.49557827959519485,"col_score":0},{"table":"business_units","fused":0.2879793642843341,"table_sim":0.4799656071405569,"col_score":0},{"table":"bank_accounts","fused":0.2879506679172196,"table_sim":0.47991777986203277,"col_score":0},{"table":"employee_salaries","fused":0.28724974107268053,"table_sim":0.4787495684544676,"col_score":0}],"fk_expansion_candidates":10,"fk_expansion_added":2,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"projects","reason":"max_tables"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":21,"total_retrieval_latency_ms":27,"sql_generated":"SELECT d.name AS department_name, b.total_amount AS planned_budget, SUM(p.actual_amount) AS total_spent FROM departments d LEFT JOIN budgets b ON d.department_id = b.department_id AND b.status = 'approved' LEFT JOIN project_expenses p ON d.department_id = p.employee_id GROUP BY d.name, b.total_amount;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column p.actual_amount does not exist","total_latency_ms":3925,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column p.actual_amount does not exist"}
{"timestamp":"2026-01-27T20:48:47.295Z","query_id":"30463698-1c4e-43f7-aeec-049d637e9e8b","question":"What is the total expense amount per project?","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["project_expenses","project_budgets","projects","project_resources","project_milestones","project_tasks","requisition_lines","budgets","budget_lines","asset_maintenance","departments","fixed_assets"],"tables_from_table_retrieval":15,"tables_from_column_only":11,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_expenses","similarity":0.7357232557396823},{"table":"project_budgets","similarity":0.7124927404351951},{"table":"project_milestones","similarity":0.6341783562502439},{"table":"project_resources","similarity":0.6177078775243305},{"table":"projects","similarity":0.6089962100611707},{"table":"budgets","similarity":0.5874735154116857},{"table":"project_tasks","similarity":0.5836295939230792},{"table":"cost_centers","similarity":0.5743886856767211},{"table":"budget_lines","similarity":0.5692401404171281},{"table":"requisition_lines","similarity":0.568809612012397},{"table":"asset_maintenance","similarity":0.556437308171321},{"table":"project_phases","similarity":0.5544923606039343},{"table":"task_assignments","similarity":0.5542662222237488},{"table":"timesheet_entries","similarity":0.5468607200699919},{"table":"fixed_assets","similarity":0.5442529432134882}],"column_hits_per_table":{"project_expenses":10,"project_budgets":6,"budgets":1,"projects":3,"project_milestones":2,"budget_lines":1,"project_resources":4,"vendor_invoices":3,"project_tasks":2,"asset_maintenance":1,"requisition_lines":2,"purchase_orders":2,"product_suppliers":1,"departments":1,"depreciation_schedules":2,"maintenance_types":1,"depreciation_entries":1,"products":1,"employee_salaries":1,"sales_orders":1,"cost_centers":1,"timesheet_entries":1,"bank_transactions":1,"fixed_assets":1},"top_columns_per_table":{"project_expenses":[{"column":"amount","similarity":0.8069321519691274},{"column":"project_id","similarity":0.72552329592717},{"column":"expense_date","similarity":0.7111753013108498}],"project_budgets":[{"column":"actual_amount","similarity":0.7596350428313324},{"column":"planned_amount","similarity":0.756194071700628},{"column":"project_id","similarity":0.6872231807270061}],"budgets":[{"column":"total_amount","similarity":0.736235837789576}],"projects":[{"column":"budget","similarity":0.7109411424450727},{"column":"project_number","similarity":0.6484869706692974},{"column":"project_manager_id","similarity":0.6124675981962671}],"project_milestones":[{"column":"amount","similarity":0.6962307559454693},{"column":"project_id","similarity":0.6186499569204351}],"budget_lines":[{"column":"amount","similarity":0.6588860854730665}],"project_resources":[{"column":"allocation_percent","similarity":0.6505585041718224},{"column":"hourly_rate","similarity":0.6430651988923763},{"column":"project_id","similarity":0.6237055733666395}],"vendor_invoices":[{"column":"total","similarity":0.6370818584397956},{"column":"tax_amount","similarity":0.6095802423276043},{"column":"amount_paid","similarity":0.6062572726654026}],"project_tasks":[{"column":"estimated_hours","similarity":0.6346881176571489},{"column":"actual_hours","similarity":0.6292081296520667}],"asset_maintenance":[{"column":"cost","similarity":0.6306740793355671}],"requisition_lines":[{"column":"estimated_total","similarity":0.6280439105312469},{"column":"estimated_unit_cost","similarity":0.6261921396116479}],"purchase_orders":[{"column":"total","similarity":0.6236388264470599},{"column":"tax_amount","similarity":0.6030458658029251}],"product_suppliers":[{"column":"unit_cost","similarity":0.6212103289525712}],"departments":[{"column":"budget","similarity":0.6194099003255832}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.6193889490585814},{"column":"monthly_amount","similarity":0.6106697348487319}],"maintenance_types":[{"column":"estimated_cost","similarity":0.6191118273829425}],"depreciation_entries":[{"column":"amount","similarity":0.618608716083846}],"products":[{"column":"unit_cost","similarity":0.616078462844906}],"employee_salaries":[{"column":"amount","similarity":0.6156937669224968}],"sales_orders":[{"column":"total","similarity":0.6156140321020656}],"cost_centers":[{"column":"department_id","similarity":0.6124823312623927}],"timesheet_entries":[{"column":"project_id","similarity":0.6111509757246523}],"bank_transactions":[{"column":"amount","similarity":0.6045668994400772}],"fixed_assets":[{"column":"purchase_cost","similarity":0.604319708746374}]},"fused_scores":[{"table":"project_expenses","fused":0.9064418744936302,"table_sim":0.7357232557396823,"col_score":1.1625198026245522},{"table":"project_budgets","fused":0.8825884757337756,"table_sim":0.7124927404351951,"col_score":1.1377320786816465},{"table":"projects","fused":0.7794715771485909,"table_sim":0.6089962100611707,"col_score":1.0351846277797214},{"table":"project_resources","fused":0.7594611679618026,"table_sim":0.6177078775243305,"col_score":0.9720911036180105},{"table":"project_milestones","fused":0.7456103100971949,"table_sim":0.6341783562502439,"col_score":0.9127582408676216},{"table":"project_tasks","fused":0.7298946293471205,"table_sim":0.5836295939230792,"col_score":0.9492921824831824},{"table":"requisition_lines","fused":0.7177417593422666,"table_sim":0.568809612012397,"col_score":0.9411399803370708},{"table":"budgets","fused":0.6469784443628418,"table_sim":0.5874735154116857,"col_score":0.736235837789576},{"table":"budget_lines","fused":0.6050985184395035,"table_sim":0.5692401404171281,"col_score":0.6588860854730665},{"table":"asset_maintenance","fused":0.5861320166370194,"table_sim":0.556437308171321,"col_score":0.6306740793355671},{"table":"fixed_assets","fused":0.5682796494266424,"table_sim":0.5442529432134882,"col_score":0.604319708746374},{"table":"cost_centers","fused":0.5161282641595026,"table_sim":0.5743886856767211,"col_score":0.42873763188367486},{"table":"timesheet_entries","fused":0.4992387052448977,"table_sim":0.5468607200699919,"col_score":0.4278056830072566},{"table":"vendor_invoices","fused":0.3767487918414391,"table_sim":0,"col_score":0.9418719796035977},{"table":"purchase_orders","fused":0.370064703739409,"table_sim":0,"col_score":0.9251617593485224}],"fk_expansion_candidates":14,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"maintenance_types","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"project_phases","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"timesheet_entries","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":13,"total_retrieval_latency_ms":19,"sql_generated":"SELECT p.project_id AS \"ProjectID\", SUM(pe.amount) AS \"TotalExpenses\" FROM projects p JOIN project_expenses pe ON p.project_id = pe.project_id GROUP BY p.project_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":100,"total_latency_ms":865}
{"timestamp":"2026-01-27T20:48:48.160Z","query_id":"396f6766-ab68-434b-936d-c7c7aa1656b3","question":"List projects that are over budget","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["project_budgets","project_expenses","projects","budgets","project_milestones","project_tasks","budget_lines","project_resources","project_phases","fiscal_years","departments","fiscal_periods"],"tables_from_table_retrieval":15,"tables_from_column_only":1,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_budgets","similarity":0.722964742520668},{"table":"project_expenses","similarity":0.6612139885640923},{"table":"project_milestones","similarity":0.6086742516860566},{"table":"projects","similarity":0.603119867291799},{"table":"project_resources","similarity":0.597322584800267},{"table":"budgets","similarity":0.5947407234206143},{"table":"budget_lines","similarity":0.5904803818054072},{"table":"project_tasks","similarity":0.5884491523727073},{"table":"project_phases","similarity":0.5493907834321079},{"table":"fiscal_years","similarity":0.5452244254955425},{"table":"task_assignments","similarity":0.5358507865308998},{"table":"cost_centers","similarity":0.5300586157001256},{"table":"fixed_assets","similarity":0.5211915048085144},{"table":"fiscal_periods","similarity":0.5200179964407323},{"table":"timesheet_entries","similarity":0.5184037353129961}],"column_hits_per_table":{"projects":10,"project_budgets":6,"project_expenses":10,"budget_lines":4,"budgets":7,"project_milestones":3,"project_tasks":7,"project_resources":2,"departments":1},"top_columns_per_table":{"projects":[{"column":"budget","similarity":0.7157873289228214},{"column":"project_number","similarity":0.6227578683249603},{"column":"planned_end_date","similarity":0.6218592852232092}],"project_budgets":[{"column":"notes","similarity":0.6968840628162604},{"column":"category","similarity":0.6884936581170534},{"column":"actual_amount","similarity":0.6874342070196099}],"project_expenses":[{"column":"is_billable","similarity":0.6524172642922237},{"column":"category","similarity":0.6511394078973038},{"column":"project_id","similarity":0.647913399771598}],"budget_lines":[{"column":"budget_id","similarity":0.6293825469960025},{"column":"amount","similarity":0.61759755130803},{"column":"line_id","similarity":0.5958899978657357}],"budgets":[{"column":"total_amount","similarity":0.6262049969711166},{"column":"status","similarity":0.6201964717884159},{"column":"budget_id","similarity":0.6068251516570441}],"project_milestones":[{"column":"is_billable","similarity":0.6084169219661417},{"column":"amount","similarity":0.5975950101730785},{"column":"project_id","similarity":0.5848627807484997}],"project_tasks":[{"column":"estimated_hours","similarity":0.6059234425364802},{"column":"actual_hours","similarity":0.6011409876391675},{"column":"due_date","similarity":0.5987032301443584}],"project_resources":[{"column":"allocation_percent","similarity":0.6000177528652653},{"column":"project_id","similarity":0.598286675045282}],"departments":[{"column":"budget","similarity":0.5873981545218923}]},"fused_scores":[{"table":"project_budgets","fused":0.8466631501631441,"table_sim":0.722964742520668,"col_score":1.0322107616268583},{"table":"project_expenses","fused":0.7879231804348057,"table_sim":0.6612139885640923,"col_score":0.9779869682408756},{"table":"projects","fused":0.7727384256092,"table_sim":0.603119867291799,"col_score":1.0271662630853016},{"table":"budgets","fused":0.728543662215791,"table_sim":0.5947407234206143,"col_score":0.9292480704085562},{"table":"project_milestones","fused":0.7280903218327064,"table_sim":0.6086742516860566,"col_score":0.907214427052681},{"table":"project_tasks","fused":0.71566706596605,"table_sim":0.5884491523727073,"col_score":0.906493936356064},{"table":"budget_lines","fused":0.6894408061858966,"table_sim":0.5904803818054072,"col_score":0.8378814427566308},{"table":"project_resources","fused":0.6821607865326058,"table_sim":0.597322584800267,"col_score":0.809418089131114},{"table":"project_phases","fused":0.3296344700592647,"table_sim":0.5493907834321079,"col_score":0},{"table":"fiscal_years","fused":0.3271346552973255,"table_sim":0.5452244254955425,"col_score":0},{"table":"task_assignments","fused":0.3215104719185399,"table_sim":0.5358507865308998,"col_score":0},{"table":"cost_centers","fused":0.3180351694200753,"table_sim":0.5300586157001256,"col_score":0},{"table":"fixed_assets","fused":0.3127149028851086,"table_sim":0.5211915048085144,"col_score":0},{"table":"fiscal_periods","fused":0.31201079786443936,"table_sim":0.5200179964407323,"col_score":0},{"table":"timesheet_entries","fused":0.31104224118779766,"table_sim":0.5184037353129961,"col_score":0}],"fk_expansion_candidates":7,"fk_expansion_added":2,"fk_expansion_blocked_count":3,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"timesheet_entries","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":32,"total_retrieval_latency_ms":37,"sql_generated":"SELECT p.project_id, p.name AS project_name, b.total_amount AS total_budget, SUM(pl.actual_hours) AS total_actual_hours FROM projects p JOIN budgets b ON p.project_id = b.project_id AND p.status = 'Completed' GROUP BY p.project_id HAVING b.total_amount > (SELECT budget FROM project_tasks pt WHERE pt.project_id = p.project_id AND status = 'Completed');","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column b.project_id does not exist","total_latency_ms":4383,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column b.project_id does not exist"}
{"timestamp":"2026-01-27T20:48:52.543Z","query_id":"dccc24ac-3672-44ce-b091-f6a1e3d1d7db","question":"Show project resources and their allocation percentages","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["project_resources","project_budgets","projects","project_expenses","project_milestones","project_tasks","project_phases","asset_categories","budgets","task_assignments","fixed_assets"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":1,"table_scores":[{"table":"project_resources","similarity":0.7742133717857291},{"table":"project_budgets","similarity":0.65507694472865},{"table":"project_expenses","similarity":0.6350034671876015},{"table":"projects","similarity":0.6288717870995568},{"table":"task_assignments","similarity":0.6137701156863598},{"table":"project_tasks","similarity":0.6095803048417692},{"table":"project_milestones","similarity":0.6065393117891723},{"table":"project_phases","similarity":0.5813826774295057},{"table":"asset_categories","similarity":0.5802555044855668},{"table":"fixed_assets","similarity":0.5796101268148289},{"table":"asset_transfers","similarity":0.5721318726014173},{"table":"depreciation_schedules","similarity":0.5658856974088946},{"table":"budgets","similarity":0.5649618658822126},{"table":"asset_locations","similarity":0.5604079986432478},{"table":"asset_maintenance","similarity":0.5602754972355342}],"column_hits_per_table":{"project_resources":8,"project_budgets":6,"projects":11,"project_milestones":4,"asset_categories":1,"project_expenses":8,"project_tasks":6,"project_phases":2,"budgets":1,"order_lines":1,"tax_rates":1,"quote_lines":1},"top_columns_per_table":{"project_resources":[{"column":"allocation_percent","similarity":0.8685852466461004},{"column":"hourly_rate","similarity":0.7723593844044561},{"column":"role","similarity":0.7018377644717824}],"project_budgets":[{"column":"actual_amount","similarity":0.6714805333867944},{"column":"planned_amount","similarity":0.664720071485919},{"column":"category","similarity":0.6492185172720708}],"projects":[{"column":"project_number","similarity":0.656031184151131},{"column":"budget","similarity":0.6549834266944344},{"column":"priority","similarity":0.6516089082532873}],"project_milestones":[{"column":"amount","similarity":0.6479447985267763},{"column":"due_date","similarity":0.6055954050810288},{"column":"project_id","similarity":0.5966197964252259}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.6459444435919715}],"project_expenses":[{"column":"amount","similarity":0.6362161613290699},{"column":"category","similarity":0.6270742962995741},{"column":"approved_by","similarity":0.625320544399457}],"project_tasks":[{"column":"priority","similarity":0.6309783351056274},{"column":"actual_hours","similarity":0.624564831852771},{"column":"estimated_hours","similarity":0.6124485167486019}],"project_phases":[{"column":"project_id","similarity":0.598085263443172},{"column":"sequence","similarity":0.5916139582579132}],"budgets":[{"column":"total_amount","similarity":0.5970528201563468}],"order_lines":[{"column":"discount_percent","similarity":0.5946420250920916}],"tax_rates":[{"column":"rate","similarity":0.5907462944083454}],"quote_lines":[{"column":"discount_percent","similarity":0.590710827201031}]},"fused_scores":[{"table":"project_resources","fused":0.9664339986107688,"table_sim":0.7742133717857291,"col_score":1.2547649388483284},{"table":"project_budgets","fused":0.7945823944890915,"table_sim":0.65507694472865,"col_score":1.0038405691297538},{"table":"projects","fused":0.7707322312590734,"table_sim":0.6288717870995568,"col_score":0.9835228974983483},{"table":"project_expenses","fused":0.7609034041041036,"table_sim":0.6350034671876015,"col_score":0.9497533094788569},{"table":"project_milestones","fused":0.7442205875004198,"table_sim":0.6065393117891723,"col_score":0.9507425010672907},{"table":"project_tasks","fused":0.7430524833178667,"table_sim":0.6095803048417692,"col_score":0.9432607510320129},{"table":"project_phases","fused":0.6692071266429127,"table_sim":0.5813826774295057,"col_score":0.8009438004630234},{"table":"asset_categories","fused":0.6065310801281287,"table_sim":0.5802555044855668,"col_score":0.6459444435919715},{"table":"budgets","fused":0.5777982475918663,"table_sim":0.5649618658822126,"col_score":0.5970528201563468},{"table":"task_assignments","fused":0.36826206941181583,"table_sim":0.6137701156863598,"col_score":0},{"table":"fixed_assets","fused":0.34776607608889737,"table_sim":0.5796101268148289,"col_score":0},{"table":"asset_transfers","fused":0.3432791235608504,"table_sim":0.5721318726014173,"col_score":0},{"table":"depreciation_schedules","fused":0.33953141844533674,"table_sim":0.5658856974088946,"col_score":0},{"table":"asset_locations","fused":0.33624479918594863,"table_sim":0.5604079986432478,"col_score":0},{"table":"asset_maintenance","fused":0.3361652983413205,"table_sim":0.5602754972355342,"col_score":0}],"fk_expansion_candidates":7,"fk_expansion_added":1,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"budget_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":31,"total_retrieval_latency_ms":37,"sql_generated":"SELECT p.project_id AS \"ProjectID\", p.name AS \"ProjectName\", prr.role AS \"Role\", prr.allocation_percent AS \"AllocationPercent\" FROM projects p INNER JOIN task_assignments ta ON p.project_id = ta.task_id INNER JOIN project_resources prr ON ta.task_id = prr.task_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column prr.task_id does not exist","total_latency_ms":3343,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column prr.task_id does not exist"}
{"timestamp":"2026-01-27T20:48:55.886Z","query_id":"d3c76c5e-d5f7-4c6c-a3d0-b7ed792b5e7e","question":"List fixed assets by category with their total purchase cost","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["fixed_assets","asset_categories","asset_maintenance","purchase_orders","products","project_expenses","project_budgets","depreciation_entries","purchase_requisitions","depreciation_schedules","maintenance_types","asset_locations"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"fixed_assets","similarity":0.7654083493676195},{"table":"asset_categories","similarity":0.7259858085236982},{"table":"asset_maintenance","similarity":0.6539211907012796},{"table":"products","similarity":0.614929355062545},{"table":"depreciation_schedules","similarity":0.6121354509873786},{"table":"depreciation_entries","similarity":0.6111894897108928},{"table":"purchase_requisitions","similarity":0.6015411064384415},{"table":"asset_transfers","similarity":0.5999948343167759},{"table":"requisition_lines","similarity":0.598284604803533},{"table":"purchase_orders","similarity":0.5960128957667012},{"table":"product_categories","similarity":0.5957745495088865},{"table":"project_expenses","similarity":0.5957623792479935},{"table":"asset_locations","similarity":0.5883070142348943},{"table":"project_budgets","similarity":0.585024592918525},{"table":"inventory_adjustments","similarity":0.5679064338841272}],"column_hits_per_table":{"fixed_assets":17,"asset_maintenance":5,"asset_categories":5,"purchase_orders":4,"asset_transfers":1,"project_expenses":2,"products":2,"depreciation_entries":2,"project_budgets":2,"maintenance_types":1,"sales_orders":1,"purchase_requisitions":3,"depreciation_schedules":1,"budgets":1,"departments":1,"product_suppliers":1,"product_categories":1},"top_columns_per_table":{"fixed_assets":[{"column":"purchase_cost","similarity":0.8279308768975289},{"column":"purchase_date","similarity":0.7577653682683902},{"column":"category_id","similarity":0.7449419823541632}],"asset_maintenance":[{"column":"cost","similarity":0.7038940050431838},{"column":"asset_id","similarity":0.6625276747232278},{"column":"status","similarity":0.6405651323240275}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.6927722364184671},{"column":"depreciation_method","similarity":0.6801647903942473},{"column":"name","similarity":0.6771577193336439}],"purchase_orders":[{"column":"total","similarity":0.6821806774581558},{"column":"shipping_cost","similarity":0.6472948486879604},{"column":"subtotal","similarity":0.6467974357625007}],"asset_transfers":[{"column":"asset_id","similarity":0.6577812240991375}],"project_expenses":[{"column":"category","similarity":0.6549899614084438},{"column":"amount","similarity":0.6178431697050689}],"products":[{"column":"unit_cost","similarity":0.6544733850469636},{"column":"list_price","similarity":0.6424553009766624}],"depreciation_entries":[{"column":"asset_id","similarity":0.6541755757135573},{"column":"accumulated_depreciation","similarity":0.6149445842426364}],"project_budgets":[{"column":"category","similarity":0.637658039961106},{"column":"actual_amount","similarity":0.6203506032041255}],"maintenance_types":[{"column":"estimated_cost","similarity":0.637101104417595}],"sales_orders":[{"column":"total","similarity":0.6367743689772688}],"purchase_requisitions":[{"column":"status","similarity":0.633131401798049},{"column":"notes","similarity":0.618262755877266},{"column":"requisition_number","similarity":0.6168697281232403}],"depreciation_schedules":[{"column":"asset_id","similarity":0.6326055924552645}],"budgets":[{"column":"total_amount","similarity":0.6276622882196059}],"departments":[{"column":"budget","similarity":0.6267573083396116}],"product_suppliers":[{"column":"unit_cost","similarity":0.6215020235372517}],"product_categories":[{"column":"description","similarity":0.6177248433123641}]},"fused_scores":[{"table":"fixed_assets","fused":0.9419704340332613,"table_sim":0.7654083493676195,"col_score":1.206813561031724},{"table":"asset_categories","fused":0.8487333377604551,"table_sim":0.7259858085236982,"col_score":1.0328546316155907},{"table":"asset_maintenance","fused":0.7989303920007285,"table_sim":0.6539211907012796,"col_score":1.0164441939499018},{"table":"purchase_orders","fused":0.7599389781808752,"table_sim":0.5960128957667012,"col_score":1.005828101802136},{"table":"products","fused":0.759238027251645,"table_sim":0.614929355062545,"col_score":0.9757010355352949},{"table":"project_expenses","fused":0.7430220460531873,"table_sim":0.5957623792479935,"col_score":0.9639115462609782},{"table":"project_budgets","fused":0.7301480923763826,"table_sim":0.585024592918525,"col_score":0.9478333415631688},{"table":"depreciation_entries","fused":0.7042761081234883,"table_sim":0.6111894897108928,"col_score":0.8439060357423815},{"table":"purchase_requisitions","fused":0.6963109513640878,"table_sim":0.6015411064384415,"col_score":0.8384657187525574},{"table":"depreciation_schedules","fused":0.5444108364799012,"table_sim":0.6121354509873786,"col_score":0.4428239147186851},{"table":"asset_transfers","fused":0.5441756433378241,"table_sim":0.5999948343167759,"col_score":0.46044685686939624},{"table":"product_categories","fused":0.5304276858327939,"table_sim":0.5957745495088865,"col_score":0.4324073903186548},{"table":"requisition_lines","fused":0.35897076288211976,"table_sim":0.598284604803533,"col_score":0},{"table":"asset_locations","fused":0.35298420854093654,"table_sim":0.5883070142348943,"col_score":0},{"table":"inventory_adjustments","fused":0.3407438603304763,"table_sim":0.5679064338841272,"col_score":0}],"fk_expansion_candidates":25,"fk_expansion_added":2,"fk_expansion_blocked_count":18,"fk_expansion_blocked":[{"table":"employees","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"reorder_rules","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"product_categories","reason":"max_tables"},{"table":"order_lines","reason":"no_evidence"},{"table":"asset_transfers","reason":"max_tables"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"departments","reason":"max_tables"},{"table":"product_suppliers","reason":"max_tables"},{"table":"requisition_lines","reason":"max_tables"},{"table":"inventory_levels","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":40,"total_retrieval_latency_ms":47,"sql_generated":"SELECT af.category_id, SUM(af.purchase_cost) AS total_purchase_cost FROM fixed_assets af JOIN asset_categories ac ON af.category_id = ac.category_id GROUP BY af.category_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":7,"total_latency_ms":907}
{"timestamp":"2026-01-27T20:48:56.793Z","query_id":"37f825ba-1b22-4736-978c-be84be0c865a","question":"List assets due for maintenance in the next 30 days","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["asset_maintenance","fixed_assets","depreciation_schedules","asset_transfers","maintenance_types","depreciation_entries","project_expenses","inventory_adjustments","asset_categories","purchase_requisitions","asset_locations","fiscal_periods"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"asset_maintenance","similarity":0.6994637000895678},{"table":"fixed_assets","similarity":0.6764596229184475},{"table":"depreciation_schedules","similarity":0.6273221911861584},{"table":"asset_transfers","similarity":0.5971719320807494},{"table":"maintenance_types","similarity":0.5961062154680403},{"table":"depreciation_entries","similarity":0.5910746016967453},{"table":"asset_categories","similarity":0.5862300624031879},{"table":"asset_locations","similarity":0.5513908244688821},{"table":"project_expenses","similarity":0.5503523574219773},{"table":"purchase_requisitions","similarity":0.5454859792595109},{"table":"inventory_adjustments","similarity":0.5399910580674154},{"table":"fiscal_years","similarity":0.5310443766821534},{"table":"budget_lines","similarity":0.5280863149217051},{"table":"fiscal_periods","similarity":0.5266541206042973},{"table":"timesheets","similarity":0.5246699967869528}],"column_hits_per_table":{"asset_maintenance":10,"fixed_assets":17,"depreciation_schedules":5,"asset_transfers":4,"maintenance_types":2,"project_expenses":2,"depreciation_entries":3,"inventory_adjustments":2,"budgets":1,"project_tasks":1,"asset_categories":1,"stock_transfers":1,"purchase_requisitions":1},"top_columns_per_table":{"asset_maintenance":[{"column":"scheduled_date","similarity":0.7417912113410527},{"column":"completed_date","similarity":0.7325656662634175},{"column":"status","similarity":0.7129849821736637}],"fixed_assets":[{"column":"purchase_date","similarity":0.6895387616643497},{"column":"disposal_date","similarity":0.6881990364899336},{"column":"warranty_expiry","similarity":0.6800725876800275}],"depreciation_schedules":[{"column":"asset_id","similarity":0.6418619860179837},{"column":"end_date","similarity":0.6048026719079262},{"column":"start_date","similarity":0.5849730629741445}],"asset_transfers":[{"column":"transfer_date","similarity":0.6313435579208717},{"column":"asset_id","similarity":0.6184906613618536},{"column":"reason","similarity":0.5842991078068315}],"maintenance_types":[{"column":"estimated_cost","similarity":0.6166092757884718},{"column":"frequency_months","similarity":0.571291123217713}],"project_expenses":[{"column":"expense_date","similarity":0.6092598391867935},{"column":"status","similarity":0.5937348318403063}],"depreciation_entries":[{"column":"asset_id","similarity":0.6063098011675734},{"column":"accumulated_depreciation","similarity":0.576951693037312},{"column":"entry_date","similarity":0.5752337993503969}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.5889427730753104},{"column":"status","similarity":0.5820136892950087}],"budgets":[{"column":"status","similarity":0.5735098092516532}],"project_tasks":[{"column":"due_date","similarity":0.5689652748773603}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.5684797119021113}],"stock_transfers":[{"column":"status","similarity":0.5664045909553878}],"purchase_requisitions":[{"column":"status","similarity":0.5661977643706151}]},"fused_scores":[{"table":"asset_maintenance","fused":0.8629078378428453,"table_sim":0.6994637000895678,"col_score":1.1080740444727615},{"table":"fixed_assets","fused":0.8193310857147951,"table_sim":0.6764596229184475,"col_score":1.0336382799093164},{"table":"depreciation_schedules","fused":0.7353089960696945,"table_sim":0.6273221911861584,"col_score":0.8972892033949985},{"table":"asset_transfers","fused":0.7277004039781647,"table_sim":0.5971719320807494,"col_score":0.9234931118242875},{"table":"maintenance_types","fused":0.7185656642397555,"table_sim":0.5961062154680403,"col_score":0.9022548373973283},{"table":"depreciation_entries","fused":0.7004721981030513,"table_sim":0.5910746016967453,"col_score":0.8645685927125104},{"table":"project_expenses","fused":0.6570382265855467,"table_sim":0.5503523574219773,"col_score":0.8170670303309007},{"table":"inventory_adjustments","fused":0.6410536605718746,"table_sim":0.5399910580674154,"col_score":0.7926475643285634},{"table":"asset_categories","fused":0.5791299222027573,"table_sim":0.5862300624031879,"col_score":0.5684797119021113},{"table":"purchase_requisitions","fused":0.4858269615794788,"table_sim":0.5454859792595109,"col_score":0.39633843505943056},{"table":"asset_locations","fused":0.33083449468132925,"table_sim":0.5513908244688821,"col_score":0},{"table":"fiscal_years","fused":0.31862662600929204,"table_sim":0.5310443766821534,"col_score":0},{"table":"budget_lines","fused":0.3168517889530231,"table_sim":0.5280863149217051,"col_score":0},{"table":"fiscal_periods","fused":0.3159924723625784,"table_sim":0.5266541206042973,"col_score":0},{"table":"timesheets","fused":0.3148019980721717,"table_sim":0.5246699967869528,"col_score":0}],"fk_expansion_candidates":11,"fk_expansion_added":2,"fk_expansion_blocked_count":9,"fk_expansion_blocked":[{"table":"adjustment_lines","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":15,"total_retrieval_latency_ms":21,"sql_generated":"SELECT f.asset_id, f.name AS asset_name, l.location_id, l.name AS location_name, m.maintenance_type_id, mt.name AS maintenance_type_name FROM fixed_assets f INNER JOIN asset_locations l ON f.location_id = l.location_id INNER JOIN asset_maintenance m ON f.asset_id = m.asset_id INNER JOIN maintenance_types mt ON m.maintenance_type_id = mt.type_id WHERE m.completed_date IS NULL OR m.completed_date > CURRENT_DATE + INTERVAL '30 days';","tables_used_in_sql":[],"explain_result":"success","rows_returned":87,"total_latency_ms":2075}
{"timestamp":"2026-01-27T20:48:58.868Z","query_id":"b2830024-976b-4bed-9bb0-282840cf0882","question":"How many documents are attached to each entity type?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["document_attachments","account_types","asset_categories","certifications","employee_certifications","maintenance_types","benefit_types","product_categories","chart_of_accounts","asset_maintenance","employees","fixed_assets"],"tables_from_table_retrieval":15,"tables_from_column_only":9,"tables_from_fk_expansion":2,"table_scores":[{"table":"document_attachments","similarity":0.7352812742665428},{"table":"asset_categories","similarity":0.5753411818367143},{"table":"account_types","similarity":0.5738443826637069},{"table":"maintenance_types","similarity":0.5636991742375136},{"table":"certifications","similarity":0.5624603819375077},{"table":"benefit_types","similarity":0.5571719369096676},{"table":"product_categories","similarity":0.5551556948057476},{"table":"asset_maintenance","similarity":0.554815914599242},{"table":"employee_certifications","similarity":0.5476424522677461},{"table":"warehouses","similarity":0.5474998114755597},{"table":"leave_types","similarity":0.5434934031567049},{"table":"chart_of_accounts","similarity":0.5411038635038822},{"table":"emergency_contacts","similarity":0.5384920463137224},{"table":"fixed_assets","similarity":0.5383241951125345},{"table":"sales_regions","similarity":0.5350244939156515}],"column_hits_per_table":{"document_attachments":9,"inventory_transactions":3,"account_types":3,"maintenance_types":3,"asset_maintenance":1,"employee_certifications":4,"asset_categories":3,"benefit_types":3,"chart_of_accounts":2,"certifications":2,"departments":3,"employee_benefits":1,"product_categories":3,"business_units":1,"warehouses":1,"sales_regions":1,"asset_locations":1,"fixed_assets":1,"inventory_levels":1,"asset_transfers":1,"leave_types":1,"employees":1,"journal_entries":1},"top_columns_per_table":{"document_attachments":[{"column":"entity_type","similarity":0.7987800419578387},{"column":"entity_id","similarity":0.7594287577919462},{"column":"attachment_id","similarity":0.6546651468230587}],"inventory_transactions":[{"column":"reference_type","similarity":0.5903517205097364},{"column":"transaction_type","similarity":0.5635711569434013},{"column":"created_by","similarity":0.5430876646210533}],"account_types":[{"column":"category","similarity":0.5878690848429569},{"column":"type_id","similarity":0.5794665493145994},{"column":"name","similarity":0.5496137466279906}],"maintenance_types":[{"column":"description","similarity":0.58653779494252},{"column":"type_id","similarity":0.5733718593835123},{"column":"name","similarity":0.5496422533175911}],"asset_maintenance":[{"column":"maintenance_type_id","similarity":0.5827125041473765}],"employee_certifications":[{"column":"certificate_number","similarity":0.5784702110774266},{"column":"cert_id","similarity":0.5612347494814258},{"column":"employee_id","similarity":0.5577094740003373}],"asset_categories":[{"column":"category_id","similarity":0.5723224544867809},{"column":"name","similarity":0.5502669316091798},{"column":"depreciation_method","similarity":0.5473548891396472}],"benefit_types":[{"column":"description","similarity":0.5715454999053485},{"column":"benefit_type_id","similarity":0.5575648471383446},{"column":"name","similarity":0.5484642483573043}],"chart_of_accounts":[{"column":"account_type_id","similarity":0.5685465519383057},{"column":"description","similarity":0.5451128268059807}],"certifications":[{"column":"issuing_body","similarity":0.5640710083272336},{"column":"description","similarity":0.5596023143932606}],"departments":[{"column":"manager_id","similarity":0.5633707821725658},{"column":"department_id","similarity":0.5584502786611573},{"column":"parent_department_id","similarity":0.5566654794357809}],"employee_benefits":[{"column":"benefit_type_id","similarity":0.5570972140176393}],"product_categories":[{"column":"description","similarity":0.5540848765000548},{"column":"category_id","similarity":0.5510211593166828},{"column":"parent_category_id","similarity":0.5473730420164726}],"business_units":[{"column":"manager_id","similarity":0.5532691118392093}],"warehouses":[{"column":"manager_id","similarity":0.5519942538973842}],"sales_regions":[{"column":"manager_id","similarity":0.5505126067891188}],"asset_locations":[{"column":"description","similarity":0.5499214775178357}],"fixed_assets":[{"column":"category_id","similarity":0.5477120144110509}],"inventory_levels":[{"column":"quantity_available","similarity":0.5458319122564639}],"asset_transfers":[{"column":"to_employee_id","similarity":0.5432260682616717}],"leave_types":[{"column":"leave_type_id","similarity":0.543068609508208}],"employees":[{"column":"email","similarity":0.5421198830413347}],"journal_entries":[{"column":"reference","similarity":0.5407169542507763}]},"fused_scores":[{"table":"document_attachments","fused":0.8904731915406621,"table_sim":0.7352812742665428,"col_score":1.1232610674518408},{"table":"account_types","fused":0.6605795804394508,"table_sim":0.5738443826637069,"col_score":0.7906823771030667},{"table":"asset_categories","fused":0.6442718083860368,"table_sim":0.5753411818367143,"col_score":0.7476677482100206},{"table":"certifications","fused":0.6414489565084545,"table_sim":0.5624603819375077,"col_score":0.7599318183648748},{"table":"employee_certifications","fused":0.6385464207190179,"table_sim":0.5476424522677461,"col_score":0.7749023733959256},{"table":"maintenance_types","fused":0.5827221474401055,"table_sim":0.5636991742375136,"col_score":0.6112566072439933},{"table":"benefit_types","fused":0.5723949807186663,"table_sim":0.5571719369096676,"col_score":0.5952295464321646},{"table":"product_categories","fused":0.5653801446077995,"table_sim":0.5551556948057476,"col_score":0.5807168193108774},{"table":"chart_of_accounts","fused":0.5601711483978922,"table_sim":0.5411038635038822,"col_score":0.5887720757389072},{"table":"asset_maintenance","fused":0.4960490499208106,"table_sim":0.554815914599242,"col_score":0.4078987529031635},{"table":"warehouses","fused":0.4830582779766034,"table_sim":0.5474998114755597,"col_score":0.3863959777281689},{"table":"leave_types","fused":0.4781552525563212,"table_sim":0.5434934031567049,"col_score":0.3801480266557456},{"table":"fixed_assets","fused":0.47635388110261495,"table_sim":0.5383241951125345,"col_score":0.3833984100877356},{"table":"sales_regions","fused":0.47515822625034415,"table_sim":0.5350244939156515,"col_score":0.38535882475238314},{"table":"inventory_transactions","fused":0.34885491959257486,"table_sim":0,"col_score":0.8721372989814371}],"fk_expansion_candidates":9,"fk_expansion_added":2,"fk_expansion_blocked_count":7,"fk_expansion_blocked":[{"table":"bank_accounts","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"journal_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":42,"total_retrieval_latency_ms":49,"sql_generated":"SELECT d.entity_type, COUNT(da.file_id) AS num_documents FROM document_attachments da JOIN entities d ON da.uploaded_by = d.employee_id GROUP BY d.entity_type;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column e.name does not exist","total_latency_ms":2183,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-27T20:49:01.051Z","query_id":"7af79aaf-8167-4f57-99c2-3f5bc776f6e1","question":"Calculate employee turnover rate by department for 2024","attempt_count":1,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employees","employee_salaries","employee_training","departments","sales_regions","employee_certifications","employment_history","performance_reviews","goods_receipts","asset_maintenance","budgets","inventory_adjustments"],"tables_from_table_retrieval":15,"tables_from_column_only":9,"tables_from_fk_expansion":2,"table_scores":[{"table":"employees","similarity":0.6359658673732379},{"table":"employee_salaries","similarity":0.6137332929756416},{"table":"departments","similarity":0.6101103038853555},{"table":"positions","similarity":0.5999463882310814},{"table":"sales_territories","similarity":0.5983156084770043},{"table":"sales_regions","similarity":0.5955253694234874},{"table":"budgets","similarity":0.5922652556433196},{"table":"employee_training","similarity":0.5866463738638922},{"table":"employment_history","similarity":0.5855835073288157},{"table":"goods_receipts","similarity":0.585472710203539},{"table":"performance_reviews","similarity":0.5822186192352505},{"table":"purchase_requisitions","similarity":0.578406876111481},{"table":"employee_certifications","similarity":0.5730496448155384},{"table":"inventory_adjustments","similarity":0.5687781234041399},{"table":"asset_maintenance","similarity":0.5668142582852698}],"column_hits_per_table":{"departments":3,"employees":9,"sales_territories":1,"employee_salaries":7,"positions":1,"employee_training":4,"performance_reviews":2,"goods_receipts":1,"sales_orders":1,"sales_regions":2,"asset_maintenance":1,"budgets":1,"employee_certifications":2,"cost_centers":1,"asset_transfers":3,"employee_benefits":2,"purchase_requisitions":1,"inventory_adjustments":1,"currencies":1,"timesheets":1,"sales_opportunities":1,"business_units":1,"employment_history":2,"depreciation_schedules":1},"top_columns_per_table":{"departments":[{"column":"budget","similarity":0.6210989680192394},{"column":"manager_id","similarity":0.5985166795002035},{"column":"created_at","similarity":0.5685222125719833}],"employees":[{"column":"department_id","similarity":0.6200778238440748},{"column":"salary","similarity":0.6038131058150359},{"column":"termination_date","similarity":0.5992766261325304}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6104279964881703}],"employee_salaries":[{"column":"end_date","similarity":0.6057663883190686},{"column":"amount","similarity":0.5994586464671279},{"column":"effective_date","similarity":0.5945383601215039}],"positions":[{"column":"department_id","similarity":0.6049413744489532}],"employee_training":[{"column":"score","similarity":0.5927300142082687},{"column":"scheduled_date","similarity":0.578764520059517},{"column":"status","similarity":0.5718497030719976}],"performance_reviews":[{"column":"employee_id","similarity":0.5849706759238356},{"column":"reviewer_id","similarity":0.5653092836188883}],"goods_receipts":[{"column":"received_by","similarity":0.580378092857111}],"sales_orders":[{"column":"sales_rep_id","similarity":0.5799791205111346}],"sales_regions":[{"column":"manager_id","similarity":0.5785309405554578},{"column":"target_revenue","similarity":0.5570052981646593}],"asset_maintenance":[{"column":"performed_by","similarity":0.577414569986232}],"budgets":[{"column":"department_id","similarity":0.5749997772800637}],"employee_certifications":[{"column":"employee_id","similarity":0.5740569827698636},{"column":"expiry_date","similarity":0.5696332852761125}],"cost_centers":[{"column":"department_id","similarity":0.5739824047413312}],"asset_transfers":[{"column":"transferred_by","similarity":0.5726316663319801},{"column":"to_employee_id","similarity":0.5708185051700986},{"column":"from_employee_id","similarity":0.5690345365953042}],"employee_benefits":[{"column":"end_date","similarity":0.5715674244638516},{"column":"employee_id","similarity":0.562908633973355}],"purchase_requisitions":[{"column":"department_id","similarity":0.5688527878379692}],"inventory_adjustments":[{"column":"adjusted_by","similarity":0.5657897970795053}],"currencies":[{"column":"exchange_rate","similarity":0.5652318119936446}],"timesheets":[{"column":"employee_id","similarity":0.5598968526380919}],"sales_opportunities":[{"column":"owner_id","similarity":0.5589945818871924}],"business_units":[{"column":"manager_id","similarity":0.5578038204905201}],"employment_history":[{"column":"employee_id","similarity":0.5568703170476632},{"column":"reason_for_leaving","similarity":0.5563939133984841}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5567581861316643}]},"fused_scores":[{"table":"employees","fused":0.7429600879764632,"table_sim":0.6359658673732379,"col_score":0.9034514188813011},{"table":"employee_salaries","fused":0.730438260406438,"table_sim":0.6137332929756416,"col_score":0.9054957115526325},{"table":"employee_training","fused":0.7048327340135462,"table_sim":0.5866463738638922,"col_score":0.8821122742380272},{"table":"departments","fused":0.6982981046689376,"table_sim":0.6101103038853555,"col_score":0.8305798058443106},{"table":"sales_regions","fused":0.6611116725977203,"table_sim":0.5955253694234874,"col_score":0.7594911273590695},{"table":"employee_certifications","fused":0.6520510785875488,"table_sim":0.5730496448155384,"col_score":0.7705532292455647},{"table":"employment_history","fused":0.6518695141433559,"table_sim":0.5855835073288157,"col_score":0.7512985243651662},{"table":"performance_reviews","fused":0.5922662605064686,"table_sim":0.5822186192352505,"col_score":0.6073377224132958},{"table":"goods_receipts","fused":0.5834348632649677,"table_sim":0.585472710203539,"col_score":0.580378092857111},{"table":"asset_maintenance","fused":0.5710543829656547,"table_sim":0.5668142582852698,"col_score":0.577414569986232},{"table":"inventory_adjustments","fused":0.567582792874286,"table_sim":0.5687781234041399,"col_score":0.5657897970795053},{"table":"sales_territories","fused":0.5299092041028902,"table_sim":0.5983156084770043,"col_score":0.42729959754171914},{"table":"positions","fused":0.5293514177843557,"table_sim":0.5999463882310814,"col_score":0.42345896211426726},{"table":"budgets","fused":0.5163590910244096,"table_sim":0.5922652556433196,"col_score":0.40249984409604456},{"table":"purchase_requisitions","fused":0.50632290626152,"table_sim":0.578406876111481,"col_score":0.3981969514865784}],"fk_expansion_candidates":32,"fk_expansion_added":2,"fk_expansion_blocked_count":25,"fk_expansion_blocked":[{"table":"maintenance_types","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"sales_territories","reason":"max_tables"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"max_tables"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"max_tables"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":24,"total_retrieval_latency_ms":29,"sql_generated":"","tables_used_in_sql":[],"total_latency_ms":2764,"failure_type":"execution_error","failure_details":"Model generated invalid output (gibberish detected)"}
{"timestamp":"2026-01-27T20:49:03.815Z","query_id":"138a0ec5-20ac-4c3e-9747-e2b4a99d173b","question":"Find the salary percentile ranking for each employee within their department","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_salaries","employees","positions","departments","performance_reviews","employee_training","employee_benefits","employee_certifications","sales_regions","sales_territories","employment_history","budgets"],"tables_from_table_retrieval":15,"tables_from_column_only":8,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_salaries","similarity":0.708947353388894},{"table":"positions","similarity":0.673242751719371},{"table":"employees","similarity":0.6495295179488771},{"table":"departments","similarity":0.64741802797087},{"table":"sales_regions","similarity":0.6247633430026287},{"table":"performance_reviews","similarity":0.6201770986480979},{"table":"budgets","similarity":0.6059422475297072},{"table":"employee_training","similarity":0.605724513187425},{"table":"sales_territories","similarity":0.603501429588932},{"table":"employee_benefits","similarity":0.59838723625395},{"table":"employee_certifications","similarity":0.5971601397111606},{"table":"purchase_requisitions","similarity":0.5927866150381371},{"table":"business_units","similarity":0.5911989355111648},{"table":"units_of_measure","similarity":0.5855786477919521},{"table":"employment_history","similarity":0.5846118164259523}],"column_hits_per_table":{"employees":9,"employee_salaries":7,"departments":4,"positions":3,"employee_training":2,"project_resources":2,"sales_orders":4,"order_lines":1,"performance_reviews":4,"sales_territories":1,"employee_benefits":2,"currencies":1,"tax_rates":1,"employee_certifications":2,"vendor_invoices":3,"sales_regions":1,"purchase_orders":1,"asset_categories":1,"business_units":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.7574782269751729},{"column":"employee_number","similarity":0.6492182366482667},{"column":"department_id","similarity":0.6395368153433474}],"employee_salaries":[{"column":"amount","similarity":0.7359583527234096},{"column":"approved_by","similarity":0.6926943474739576},{"column":"employee_id","similarity":0.676986467510318}],"departments":[{"column":"budget","similarity":0.6829775530024116},{"column":"manager_id","similarity":0.6397221630770776},{"column":"parent_department_id","similarity":0.6254065117903628}],"positions":[{"column":"min_salary","similarity":0.6777126447106386},{"column":"max_salary","similarity":0.6724570189361891},{"column":"department_id","similarity":0.6427390436680331}],"employee_training":[{"column":"score","similarity":0.6590553174224684},{"column":"status","similarity":0.6029782499051857}],"project_resources":[{"column":"hourly_rate","similarity":0.6466943832186318},{"column":"allocation_percent","similarity":0.6196500675265969}],"sales_orders":[{"column":"total","similarity":0.6356725867073684},{"column":"subtotal","similarity":0.6267418575329986},{"column":"tax_amount","similarity":0.6063888395862791}],"order_lines":[{"column":"discount_percent","similarity":0.6264197871171734}],"performance_reviews":[{"column":"employee_id","similarity":0.6263614751745396},{"column":"goals_met_percent","similarity":0.6239844557794996},{"column":"reviewer_id","similarity":0.6213599775398778}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6241225270384395}],"employee_benefits":[{"column":"coverage_level","similarity":0.6222756439662573},{"column":"employee_id","similarity":0.6153391648759183}],"currencies":[{"column":"exchange_rate","similarity":0.6203188576134201}],"tax_rates":[{"column":"rate","similarity":0.6188638790317935}],"employee_certifications":[{"column":"certificate_number","similarity":0.614080794353629},{"column":"employee_id","similarity":0.6138517170268198}],"vendor_invoices":[{"column":"total","similarity":0.6120628382001947},{"column":"subtotal","similarity":0.610881078873543},{"column":"amount_paid","similarity":0.6062315858747155}],"sales_regions":[{"column":"manager_id","similarity":0.6115942597940399}],"purchase_orders":[{"column":"total","similarity":0.6092847852619704}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.6026361592860408}],"business_units":[{"column":"manager_id","similarity":0.6025430641596784}]},"fused_scores":[{"table":"employee_salaries","fused":0.8582906226174918,"table_sim":0.708947353388894,"col_score":1.0823055264603885},{"table":"employees","fused":0.8225526488890488,"table_sim":0.6495295179488771,"col_score":1.0820873452993063},{"table":"positions","fused":0.8095221127031159,"table_sim":0.673242751719371,"col_score":1.0139411541787333},{"table":"departments","fused":0.7512029408142775,"table_sim":0.64741802797087,"col_score":0.9068803100793887},{"table":"performance_reviews","fused":0.742790981718875,"table_sim":0.6201770986480979,"col_score":0.9267118063250408},{"table":"employee_training","fused":0.7114737898681683,"table_sim":0.605724513187425,"col_score":0.8700977048892833},{"table":"employee_benefits","fused":0.6940900824215015,"table_sim":0.59838723625395,"col_score":0.8376443516728287},{"table":"employee_certifications","fused":0.6898676419519026,"table_sim":0.5971601397111606,"col_score":0.8289288953130158},{"table":"sales_regions","fused":0.5461043985439084,"table_sim":0.6247633430026287,"col_score":0.42811598185582794},{"table":"sales_territories","fused":0.5368551653241223,"table_sim":0.603501429588932,"col_score":0.4368857689269076},{"table":"business_units","fused":0.5234314192714088,"table_sim":0.5911989355111648,"col_score":0.42178014491177485},{"table":"project_resources","fused":0.3826077667927721,"table_sim":0,"col_score":0.9565194169819302},{"table":"sales_orders","fused":0.3796174061895471,"table_sim":0,"col_score":0.9490435154738677},{"table":"vendor_invoices","fused":0.3670013510547865,"table_sim":0,"col_score":0.9175033776369662},{"table":"budgets","fused":0.3635653485178243,"table_sim":0.6059422475297072,"col_score":0}],"fk_expansion_candidates":30,"fk_expansion_added":2,"fk_expansion_blocked_count":24,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"business_units","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"project_resources","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"max_tables"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"certifications","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":51,"total_retrieval_latency_ms":57,"sql_generated":"SELECT e.employee_id, CONCAT(e.first_name, ' ', e.last_name) AS full_name, d.department_id, p.position_id, s.salary, RANK() OVER (PARTITION BY d.department_id ORDER BY s.salary) as salary_percentile FROM employees e JOIN departments d ON e.department_id = d.department_id JOIN positions p ON e.position_id = p.position_id JOIN employee_salaries s ON e.employee_id = s.employee_id ORDER BY full_name, salary_percentile;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column s.salary does not exist","total_latency_ms":5698,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column s.salary does not exist"}
{"timestamp":"2026-01-27T20:49:09.513Z","query_id":"b88bd857-b751-42ff-9522-73e9904611d7","question":"Identify employees who have not completed mandatory training","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["employee_training","training_courses","employee_certifications","employees","employee_salaries","certifications","employee_benefits","leave_requests","task_assignments","business_units","employment_history","departments"],"tables_from_table_retrieval":15,"tables_from_column_only":4,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_training","similarity":0.6889099730779654},{"table":"training_courses","similarity":0.6502538829600134},{"table":"employee_certifications","similarity":0.622622468299915},{"table":"employees","similarity":0.5856498095746774},{"table":"leave_requests","similarity":0.562719264388909},{"table":"employee_salaries","similarity":0.5560241204386787},{"table":"certifications","similarity":0.5525137082028069},{"table":"employment_history","similarity":0.5480613869817784},{"table":"business_units","similarity":0.5439038631444495},{"table":"task_assignments","similarity":0.5397934296806453},{"table":"employee_benefits","similarity":0.5344393398297539},{"table":"timesheets","similarity":0.5319406753449695},{"table":"emergency_contacts","similarity":0.5318968233375349},{"table":"departments","similarity":0.5263789627125498},{"table":"positions","similarity":0.5263070089098566}],"column_hits_per_table":{"employee_training":7,"training_courses":7,"employees":15,"employee_certifications":6,"task_assignments":1,"employee_salaries":2,"leave_requests":1,"leave_types":1,"certifications":2,"business_units":1,"departments":1,"emergency_contacts":1,"fixed_assets":1,"sales_territories":1,"employee_benefits":1,"timesheets":1,"warehouses":1},"top_columns_per_table":{"employee_training":[{"column":"completion_date","similarity":0.7168978136285726},{"column":"status","similarity":0.7028985160111028},{"column":"scheduled_date","similarity":0.6960973950291245}],"training_courses":[{"column":"is_mandatory","similarity":0.7023171508593787},{"column":"is_active","similarity":0.633360326144161},{"column":"duration_hours","similarity":0.6170672809188396}],"employees":[{"column":"is_active","similarity":0.6234608396623087},{"column":"hire_date","similarity":0.5874512415515796},{"column":"employee_id","similarity":0.5844803651068503}],"employee_certifications":[{"column":"employee_id","similarity":0.6135493904138725},{"column":"obtained_date","similarity":0.6060985739368497},{"column":"expiry_date","similarity":0.5959077655676795}],"task_assignments":[{"column":"employee_id","similarity":0.5819777223310592}],"employee_salaries":[{"column":"effective_date","similarity":0.573895057820439},{"column":"end_date","similarity":0.5725676252235854}],"leave_requests":[{"column":"employee_id","similarity":0.5678540613812961}],"leave_types":[{"column":"is_paid","similarity":0.562989201901735}],"certifications":[{"column":"description","similarity":0.5609446922689106},{"column":"validity_years","similarity":0.5539678539563746}],"business_units":[{"column":"manager_id","similarity":0.5596404860633486}],"departments":[{"column":"manager_id","similarity":0.5580853205909431}],"emergency_contacts":[{"column":"employee_id","similarity":0.5579377142447549}],"fixed_assets":[{"column":"assigned_to","similarity":0.5574586620303502}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.5565974280594508}],"employee_benefits":[{"column":"end_date","similarity":0.5556804750501676}],"timesheets":[{"column":"employee_id","similarity":0.555561707512954}],"warehouses":[{"column":"manager_id","similarity":0.5551779442719302}]},"fused_scores":[{"table":"employee_training","fused":0.8393245883040332,"table_sim":0.6889099730779654,"col_score":1.0649465111431349},{"table":"training_courses","fused":0.7944926463035276,"table_sim":0.6502538829600134,"col_score":1.0108507913187985},{"table":"employee_certifications","fused":0.7351944636682248,"table_sim":0.622622468299915,"col_score":0.9040524567206896},{"table":"employees","fused":0.7032367749145099,"table_sim":0.5856498095746774,"col_score":0.8796172229242586},{"table":"employee_salaries","fused":0.6776860204360999,"table_sim":0.5560241204386787,"col_score":0.8601788704322317},{"table":"certifications","fused":0.6316276234218814,"table_sim":0.5525137082028069,"col_score":0.7502984962504933},{"table":"employee_benefits","fused":0.5429357939179194,"table_sim":0.5344393398297539,"col_score":0.5556804750501676},{"table":"leave_requests","fused":0.4966306958201083,"table_sim":0.562719264388909,"col_score":0.39749784296690727},{"table":"task_assignments","fused":0.48682982006108366,"table_sim":0.5397934296806453,"col_score":0.4073844056317414},{"table":"business_units","fused":0.4830416539844073,"table_sim":0.5439038631444495,"col_score":0.391748340244344},{"table":"emergency_contacts","fused":0.4753606539910523,"table_sim":0.5318968233375349,"col_score":0.3905563999713284},{"table":"timesheets","fused":0.4747216833106088,"table_sim":0.5319406753449695,"col_score":0.38889319525906774},{"table":"departments","fused":0.47209126739299395,"table_sim":0.5263789627125498,"col_score":0.39065972441366015},{"table":"employment_history","fused":0.32883683218906706,"table_sim":0.5480613869817784,"col_score":0},{"table":"positions","fused":0.31578420534591395,"table_sim":0.5263070089098566,"col_score":0}],"fk_expansion_candidates":31,"fk_expansion_added":2,"fk_expansion_blocked_count":25,"fk_expansion_blocked":[{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"sales_regions","reason":"no_evidence"},{"table":"fixed_assets","reason":"max_tables"},{"table":"project_resources","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"leave_types","reason":"no_evidence"},{"table":"emergency_contacts","reason":"max_tables"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":33,"total_retrieval_latency_ms":39,"sql_generated":"SELECT e.employee_id, e.first_name || ' ' || e.last_name AS employee_full_name FROM employees e LEFT JOIN employee_training et ON e.employee_id = et.employee_id AND et.status = 'completed' WHERE et.course_id IN (SELECT course_id FROM training_courses WHERE is_mandatory = TRUE) AND et.employee_id IS NULL;","tables_used_in_sql":[],"explain_result":"success","rows_returned":0,"total_latency_ms":1365}
{"timestamp":"2026-01-27T20:49:10.879Z","query_id":"04cbdd0f-364f-4dce-b928-49521c98d320","question":"Calculate month-over-month sales growth rate for the past 12 months","attempt_count":1,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_opportunities","sales_orders","sales_quotes","project_milestones","performance_reviews","purchase_orders","sales_regions","sales_territories","goods_receipts","fiscal_years","fiscal_periods","fixed_assets"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_opportunities","similarity":0.6157116926794552},{"table":"sales_orders","similarity":0.6006459034551404},{"table":"sales_regions","similarity":0.5852419849044662},{"table":"sales_quotes","similarity":0.5842211564145057},{"table":"project_milestones","similarity":0.570290032024122},{"table":"purchase_orders","similarity":0.5671901529888976},{"table":"performance_reviews","similarity":0.5664270760489215},{"table":"sales_territories","similarity":0.5642407853687107},{"table":"stock_transfers","similarity":0.5587294182734618},{"table":"goods_receipts","similarity":0.5586981186050166},{"table":"fiscal_periods","similarity":0.557865710059711},{"table":"fiscal_years","similarity":0.5484906283130861},{"table":"purchase_requisitions","similarity":0.5400891317424515},{"table":"inventory_adjustments","similarity":0.5400433012210731},{"table":"tax_rates","similarity":0.5390929131193718}],"column_hits_per_table":{"sales_opportunities":10,"sales_regions":2,"sales_orders":10,"sales_quotes":8,"maintenance_types":1,"performance_reviews":2,"project_milestones":3,"product_suppliers":1,"sales_territories":2,"depreciation_schedules":2,"purchase_orders":3,"inventory_adjustments":1,"goods_receipts":1,"fixed_assets":1,"project_resources":1,"fiscal_years":1,"inventory_levels":1},"top_columns_per_table":{"sales_opportunities":[{"column":"expected_close_date","similarity":0.6349920466572413},{"column":"actual_close_date","similarity":0.6306604293774668},{"column":"probability","similarity":0.6115666602689689}],"sales_regions":[{"column":"target_revenue","similarity":0.6246528697952606},{"column":"name","similarity":0.5895328709845001}],"sales_orders":[{"column":"order_date","similarity":0.6066547704969023},{"column":"total","similarity":0.596441977736594},{"column":"ship_date","similarity":0.5930488071352698}],"sales_quotes":[{"column":"quote_date","similarity":0.6043144886073183},{"column":"valid_until","similarity":0.5926742142050333},{"column":"status","similarity":0.58861972419265}],"maintenance_types":[{"column":"frequency_months","similarity":0.6025393190667295}],"performance_reviews":[{"column":"goals_met_percent","similarity":0.5879927707908889},{"column":"review_period_start","similarity":0.5628892649507783}],"project_milestones":[{"column":"amount","similarity":0.5831571816642501},{"column":"completed_date","similarity":0.5731111906139561},{"column":"due_date","similarity":0.5646006206164285}],"product_suppliers":[{"column":"lead_time_days","similarity":0.5824107328736775}],"sales_territories":[{"column":"name","similarity":0.5815838973769365},{"column":"region_id","similarity":0.5606403725985879}],"depreciation_schedules":[{"column":"monthly_amount","similarity":0.5809365473284506},{"column":"useful_life_months","similarity":0.5752368480135198}],"purchase_orders":[{"column":"expected_date","similarity":0.5807594956317658},{"column":"total","similarity":0.5587034043259257},{"column":"order_date","similarity":0.5574665711216267}],"inventory_adjustments":[{"column":"adjustment_date","similarity":0.5689704746812687}],"goods_receipts":[{"column":"receipt_date","similarity":0.5649131464666418}],"fixed_assets":[{"column":"purchase_date","similarity":0.5640514088105937}],"project_resources":[{"column":"hourly_rate","similarity":0.5639674847646822}],"fiscal_years":[{"column":"year","similarity":0.5622418074015364}],"inventory_levels":[{"column":"last_count_date","similarity":0.5583066702397402}]},"fused_scores":[{"table":"sales_opportunities","fused":0.7495559201460631,"table_sim":0.6157116926794552,"col_score":0.9503222613459748},{"table":"sales_orders","fused":0.7223378458191639,"table_sim":0.6006459034551404,"col_score":0.9048757593651993},{"table":"sales_quotes","fused":0.7107933321326374,"table_sim":0.5842211564145057,"col_score":0.9006515957098349},{"table":"project_milestones","fused":0.6900591300029644,"table_sim":0.570290032024122,"col_score":0.8697127769712282},{"table":"performance_reviews","fused":0.6876312069358641,"table_sim":0.5664270760489215,"col_score":0.8694374032662779},{"table":"purchase_orders","fused":0.6843585709112301,"table_sim":0.5671901529888976,"col_score":0.8601111977947287},{"table":"sales_regions","fused":0.6835409407986139,"table_sim":0.5852419849044662,"col_score":0.8309893746398356},{"table":"sales_territories","fused":0.5798776146505709,"table_sim":0.5642407853687107,"col_score":0.6033328585733613},{"table":"goods_receipts","fused":0.5611841297496667,"table_sim":0.5586981186050166,"col_score":0.5649131464666418},{"table":"fiscal_years","fused":0.5539910999484663,"table_sim":0.5484906283130861,"col_score":0.5622418074015364},{"table":"inventory_adjustments","fused":0.5516141706051514,"table_sim":0.5400433012210731,"col_score":0.5689704746812687},{"table":"depreciation_schedules","fused":0.34742198853408424,"table_sim":0,"col_score":0.8685549713352105},{"table":"stock_transfers","fused":0.33523765096407704,"table_sim":0.5587294182734618,"col_score":0},{"table":"fiscal_periods","fused":0.33471942603582655,"table_sim":0.557865710059711,"col_score":0},{"table":"purchase_requisitions","fused":0.32405347904547094,"table_sim":0.5400891317424515,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":13,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"opportunity_stages","reason":"no_evidence"},{"table":"order_lines","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"vendor_invoices","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":1310,"total_retrieval_latency_ms":1316,"sql_generated":"","tables_used_in_sql":[],"total_latency_ms":4041,"failure_type":"execution_error","failure_details":"Model generated invalid output (gibberish detected)"}
{"timestamp":"2026-01-27T20:49:14.920Z","query_id":"49caed70-1494-46b0-9c19-5a5dd8d8f189","question":"Find the average order value and order frequency for each customer segment based on credit limit","attempt_count":2,"retry_succeeded":true,"execution_success":true,"retriever_version":"V2","tables_retrieved":["customers","order_lines","sales_orders","purchase_orders","po_lines","inventory_levels","vendor_invoice_lines","product_suppliers","vendor_invoices","requisition_lines","customer_contacts","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":3,"tables_from_fk_expansion":2,"table_scores":[{"table":"customers","similarity":0.6806365809432632},{"table":"order_lines","similarity":0.6612582093852053},{"table":"sales_orders","similarity":0.6503570787641184},{"table":"purchase_orders","similarity":0.6350119894518774},{"table":"po_lines","similarity":0.6239700790357152},{"table":"sales_opportunities","similarity":0.6079639266361453},{"table":"inventory_levels","similarity":0.6033202031698347},{"table":"sales_regions","similarity":0.5939454770122685},{"table":"vendor_invoice_lines","similarity":0.5937575753832759},{"table":"requisition_lines","similarity":0.590502871726471},{"table":"goods_receipts","similarity":0.5885428783810364},{"table":"product_suppliers","similarity":0.5881326527582414},{"table":"purchase_requisitions","similarity":0.5870519262773803},{"table":"customer_contacts","similarity":0.5862288727557493},{"table":"vendor_invoices","similarity":0.5856337339498445}],"column_hits_per_table":{"customers":6,"order_lines":8,"purchase_orders":9,"sales_orders":7,"po_lines":5,"reorder_rules":2,"vendor_invoice_lines":3,"product_suppliers":1,"inventory_levels":4,"vendor_invoices":1,"customer_contacts":1,"requisition_lines":1,"quote_lines":1,"budget_lines":1},"top_columns_per_table":{"customers":[{"column":"credit_limit","similarity":0.7585186196959948},{"column":"customer_number","similarity":0.6580317654044683},{"column":"phone","similarity":0.6535915529702684}],"order_lines":[{"column":"line_total","similarity":0.6948388698124641},{"column":"unit_price","similarity":0.6806419895725467},{"column":"discount_percent","similarity":0.6754620796934562}],"purchase_orders":[{"column":"total","similarity":0.6852668855656413},{"column":"shipping_cost","similarity":0.6529784604621701},{"column":"po_number","similarity":0.6529416456054898}],"sales_orders":[{"column":"total","similarity":0.6806848320717455},{"column":"order_number","similarity":0.6663157017306066},{"column":"shipping_cost","similarity":0.6460324115150056}],"po_lines":[{"column":"line_total","similarity":0.6613663843065055},{"column":"unit_cost","similarity":0.634997889978794},{"column":"quantity_received","similarity":0.6333850871020219}],"reorder_rules":[{"column":"max_quantity","similarity":0.6390768169493309},{"column":"min_quantity","similarity":0.613671491916226}],"vendor_invoice_lines":[{"column":"amount","similarity":0.6368350345890655},{"column":"unit_cost","similarity":0.6252213762445078},{"column":"quantity","similarity":0.6211936807432661}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6355194003397301}],"inventory_levels":[{"column":"quantity_reserved","similarity":0.6278756626527294},{"column":"last_count_date","similarity":0.6173098741422713},{"column":"quantity_on_hand","similarity":0.6152745260367936}],"vendor_invoices":[{"column":"total","similarity":0.6233351375751739}],"customer_contacts":[{"column":"phone","similarity":0.6135336030884168}],"requisition_lines":[{"column":"estimated_total","similarity":0.6134905613297535}],"quote_lines":[{"column":"line_total","similarity":0.6131735766593597}],"budget_lines":[{"column":"amount","similarity":0.6095658159713937}]},"fused_scores":[{"table":"customers","fused":0.8433957495252495,"table_sim":0.6806365809432632,"col_score":1.087534502398229},{"table":"order_lines","fused":0.8108188714706182,"table_sim":0.6612582093852053,"col_score":1.0351598645987374},{"table":"sales_orders","fused":0.7957513204332907,"table_sim":0.6503570787641184,"col_score":1.0138426829370488},{"table":"purchase_orders","fused":0.785709639989817,"table_sim":0.6350119894518774,"col_score":1.0117561157967263},{"table":"po_lines","fused":0.7659281791397902,"table_sim":0.6239700790357152,"col_score":0.9788653292959025},{"table":"inventory_levels","fused":0.7366043617914468,"table_sim":0.6033202031698347,"col_score":0.9365305997238651},{"table":"vendor_invoice_lines","fused":0.7360328343144933,"table_sim":0.5937575753832759,"col_score":0.9494457227113194},{"table":"product_suppliers","fused":0.6070873517908368,"table_sim":0.5881326527582414,"col_score":0.6355194003397301},{"table":"vendor_invoices","fused":0.6007142953999762,"table_sim":0.5856337339498445,"col_score":0.6233351375751739},{"table":"requisition_lines","fused":0.599697947567784,"table_sim":0.590502871726471,"col_score":0.6134905613297535},{"table":"customer_contacts","fused":0.5971507648888162,"table_sim":0.5862288727557493,"col_score":0.6135336030884168},{"table":"reorder_rules","fused":0.3783650251629776,"table_sim":0,"col_score":0.945912562907444},{"table":"sales_opportunities","fused":0.3647783559816872,"table_sim":0.6079639266361453,"col_score":0},{"table":"sales_regions","fused":0.3563672862073611,"table_sim":0.5939454770122685,"col_score":0},{"table":"goods_receipts","fused":0.3531257270286218,"table_sim":0.5885428783810364,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":25,"total_retrieval_latency_ms":32,"sql_generated":"SELECT c.credit_limit, AVG(s.total) AS avg_order_value, COUNT(*) / 365.0 AS order_frequency FROM customers c JOIN sales_orders s ON c.customer_id = s.customer_id GROUP BY c.credit_limit;","tables_used_in_sql":[],"explain_result":"success","sqlstate":"42703","error_message":"column c.segment does not exist","rows_returned":5,"total_latency_ms":1890}
{"timestamp":"2026-01-27T20:49:16.810Z","query_id":"a4deb21c-e0c0-44ca-bd6c-19ef28060f4f","question":"What is the sales pipeline weighted value by stage and expected close month?","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["sales_opportunities","sales_orders","vendor_invoices","opportunity_stages","vendor_invoice_lines","purchase_orders","sales_quotes","sales_regions","project_phases","product_suppliers","order_lines","products"],"tables_from_table_retrieval":15,"tables_from_column_only":5,"tables_from_fk_expansion":2,"table_scores":[{"table":"sales_opportunities","similarity":0.6054695442586654},{"table":"opportunity_stages","similarity":0.5878194026125775},{"table":"purchase_orders","similarity":0.569620040129231},{"table":"sales_orders","similarity":0.5672773314428301},{"table":"vendor_invoices","similarity":0.5653986063661894},{"table":"vendor_invoice_lines","similarity":0.5524555005656138},{"table":"sales_quotes","similarity":0.550409683101325},{"table":"product_suppliers","similarity":0.5461777322512522},{"table":"sales_regions","similarity":0.5358537079732489},{"table":"inventory_levels","similarity":0.533856062475615},{"table":"stock_transfers","similarity":0.5326603234644891},{"table":"project_phases","similarity":0.5278052692037372},{"table":"order_lines","similarity":0.5277084897192255},{"table":"vendor_contacts","similarity":0.5244207269459633},{"table":"fiscal_years","similarity":0.5214777441208323}],"column_hits_per_table":{"sales_opportunities":6,"sales_orders":8,"sales_quotes":7,"vendor_invoices":7,"vendor_invoice_lines":3,"products":1,"purchase_orders":4,"opportunity_stages":2,"project_phases":2,"sales_regions":2,"depreciation_schedules":2,"product_suppliers":1,"project_milestones":1,"performance_reviews":1,"inventory_levels":1,"projects":1,"order_lines":1},"top_columns_per_table":{"sales_opportunities":[{"column":"expected_close_date","similarity":0.6672378848884489},{"column":"actual_close_date","similarity":0.634399953849031},{"column":"amount","similarity":0.5735263838442387}],"sales_orders":[{"column":"total","similarity":0.5926957958092102},{"column":"subtotal","similarity":0.5919476684332582},{"column":"shipping_cost","similarity":0.5804098809281995}],"sales_quotes":[{"column":"status","similarity":0.5911942655396014},{"column":"total","similarity":0.5841523851755166},{"column":"subtotal","similarity":0.5810304737355192}],"vendor_invoices":[{"column":"subtotal","similarity":0.5904633340627892},{"column":"total","similarity":0.58918482827673},{"column":"status","similarity":0.5659596977000683}],"vendor_invoice_lines":[{"column":"amount","similarity":0.587921854927484},{"column":"unit_cost","similarity":0.5805145112553433},{"column":"quantity","similarity":0.5740191375367586}],"products":[{"column":"weight","similarity":0.5793059408002791}],"purchase_orders":[{"column":"expected_date","similarity":0.5712405322677854},{"column":"total","similarity":0.55843434508497},{"column":"subtotal","similarity":0.5557966692183937}],"opportunity_stages":[{"column":"is_closed","similarity":0.5687914662845237},{"column":"probability","similarity":0.554174542810227}],"project_phases":[{"column":"end_date","similarity":0.5684419996726171},{"column":"status","similarity":0.5441275392901614}],"sales_regions":[{"column":"target_revenue","similarity":0.5671305047519016},{"column":"name","similarity":0.5466568514473741}],"depreciation_schedules":[{"column":"monthly_amount","similarity":0.5656288481399},{"column":"annual_amount","similarity":0.544202460241292}],"product_suppliers":[{"column":"lead_time_days","similarity":0.5635593957356553}],"project_milestones":[{"column":"amount","similarity":0.5574234871213531}],"performance_reviews":[{"column":"review_period_end","similarity":0.5567893896705155}],"inventory_levels":[{"column":"last_count_date","similarity":0.5552187328325828}],"projects":[{"column":"planned_end_date","similarity":0.5474865766090119}],"order_lines":[{"column":"discount_percent","similarity":0.5465995943119437}]},"fused_scores":[{"table":"sales_opportunities","fused":0.7570568712803851,"table_sim":0.6054695442586654,"col_score":0.9844378618129644},{"table":"sales_orders","fused":0.6958342508760338,"table_sim":0.5672773314428301,"col_score":0.8886696300258392},{"table":"vendor_invoices","fused":0.6932614631001753,"table_sim":0.5653986063661894,"col_score":0.8850557482011542},{"table":"opportunity_stages","fused":0.6910431366434013,"table_sim":0.5878194026125775,"col_score":0.8458787376896373},{"table":"vendor_invoice_lines","fused":0.6827449445614305,"table_sim":0.5524555005656138,"col_score":0.8781791105551557},{"table":"purchase_orders","fused":0.6819551060016467,"table_sim":0.569620040129231,"col_score":0.8504577048102704},{"table":"sales_quotes","fused":0.6801128586781056,"table_sim":0.550409683101325,"col_score":0.8746676220432762},{"table":"sales_regions","fused":0.6248963858873424,"table_sim":0.5358537079732489,"col_score":0.7584604027584826},{"table":"project_phases","fused":0.6202378168919118,"table_sim":0.5278052692037372,"col_score":0.7588866384241736},{"table":"product_suppliers","fused":0.5531303976450135,"table_sim":0.5461777322512522,"col_score":0.5635593957356553},{"table":"inventory_levels","fused":0.5424011306184021,"table_sim":0.533856062475615,"col_score":0.5552187328325828},{"table":"order_lines","fused":0.5352649315563127,"table_sim":0.5277084897192255,"col_score":0.5465995943119437},{"table":"depreciation_schedules","fused":0.33509203130421844,"table_sim":0,"col_score":0.837730078260546},{"table":"stock_transfers","fused":0.31959619407869344,"table_sim":0.5326603234644891,"col_score":0},{"table":"vendor_contacts","fused":0.314652436167578,"table_sim":0.5244207269459633,"col_score":0}],"fk_expansion_candidates":15,"fk_expansion_added":2,"fk_expansion_blocked_count":12,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"project_tasks","reason":"no_evidence"},{"table":"projects","reason":"max_tables"},{"table":"purchase_requisitions","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":42,"total_retrieval_latency_ms":48,"sql_generated":"","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column os.order_id does not exist","total_latency_ms":6504,"failure_type":"execution_error","failure_details":"Model did not generate SELECT statement"}
{"timestamp":"2026-01-27T20:49:23.314Z","query_id":"39f3d88e-3fe1-4b8e-a205-2c2261ac2b97","question":"Calculate inventory turnover ratio by product category","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["inventory_levels","inventory_transactions","asset_categories","products","inventory_adjustments","product_suppliers","sales_orders","reorder_rules","receipt_lines","product_categories","fixed_assets","goods_receipts"],"tables_from_table_retrieval":15,"tables_from_column_only":1,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_levels","similarity":0.6747561713408694},{"table":"products","similarity":0.6673866757064916},{"table":"asset_categories","similarity":0.6658822163690923},{"table":"inventory_transactions","similarity":0.6584332771076702},{"table":"product_categories","similarity":0.6501703787798785},{"table":"reorder_rules","similarity":0.6320804286370688},{"table":"inventory_adjustments","similarity":0.631066892629761},{"table":"goods_receipts","similarity":0.6155086832245751},{"table":"asset_maintenance","similarity":0.6045690515376625},{"table":"fixed_assets","similarity":0.6018441701160724},{"table":"product_suppliers","similarity":0.6013426853614583},{"table":"receipt_lines","similarity":0.596972482520933},{"table":"sales_orders","similarity":0.5904178851402269},{"table":"depreciation_entries","similarity":0.586520590552934},{"table":"order_lines","similarity":0.5853842956573193}],"column_hits_per_table":{"inventory_transactions":8,"inventory_levels":7,"asset_categories":4,"products":7,"product_categories":5,"sales_orders":4,"fixed_assets":1,"inventory_adjustments":5,"reorder_rules":2,"product_suppliers":2,"sales_regions":1,"depreciation_entries":1,"receipt_lines":2,"goods_receipts":1},"top_columns_per_table":{"inventory_transactions":[{"column":"quantity","similarity":0.6865537352744734},{"column":"transaction_type","similarity":0.6508604601013612},{"column":"product_id","similarity":0.6488474271833253}],"inventory_levels":[{"column":"quantity_reserved","similarity":0.6807736099760374},{"column":"quantity_available","similarity":0.6752817875893032},{"column":"product_id","similarity":0.6665316206818281}],"asset_categories":[{"column":"salvage_value_percent","similarity":0.6677845311404557},{"column":"depreciation_method","similarity":0.636435148844442},{"column":"useful_life_years","similarity":0.6246456594520073}],"products":[{"column":"category_id","similarity":0.6569412387377351},{"column":"weight","similarity":0.6437332914835887},{"column":"unit_cost","similarity":0.6272328353575076}],"product_categories":[{"column":"category_id","similarity":0.6539744060156725},{"column":"description","similarity":0.6525521507615628},{"column":"is_active","similarity":0.6498264325617669}],"sales_orders":[{"column":"total","similarity":0.6251835363649095},{"column":"order_number","similarity":0.6053905248062422},{"column":"subtotal","similarity":0.6052825411110333}],"fixed_assets":[{"column":"category_id","similarity":0.6200942331147149}],"inventory_adjustments":[{"column":"adjustment_number","similarity":0.6158389191950121},{"column":"adjusted_by","similarity":0.6148750217624924},{"column":"status","similarity":0.6081076578124999}],"reorder_rules":[{"column":"product_id","similarity":0.6137559004977273},{"column":"reorder_quantity","similarity":0.6086116987509864}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6128603706932287},{"column":"unit_cost","similarity":0.5980571455291517}],"sales_regions":[{"column":"target_revenue","similarity":0.6085079266346386}],"depreciation_entries":[{"column":"accumulated_depreciation","similarity":0.6077181065202967}],"receipt_lines":[{"column":"product_id","similarity":0.6076761642596111},{"column":"quantity_received","similarity":0.6073129685640721}],"goods_receipts":[{"column":"receipt_number","similarity":0.6055856654540261}]},"fused_scores":[{"table":"inventory_levels","fused":0.8122195043127973,"table_sim":0.6747561713408694,"col_score":1.018414503770689},{"table":"inventory_transactions","fused":0.7998535523946637,"table_sim":0.6584332771076702,"col_score":1.011983965325154},{"table":"asset_categories","fused":0.7939301720465259,"table_sim":0.6658822163690923,"col_score":0.9860021055626766},{"table":"products","fused":0.7833718890888319,"table_sim":0.6673866757064916,"col_score":0.9573497091623425},{"table":"inventory_adjustments","fused":0.74795070760836,"table_sim":0.631066892629761,"col_score":0.9232764300762584},{"table":"product_suppliers","fused":0.7255611885999969,"table_sim":0.6013426853614583,"col_score":0.9118889434578046},{"table":"sales_orders","fused":0.7254022505913484,"table_sim":0.5904178851402269,"col_score":0.9278787987680306},{"table":"reorder_rules","fused":0.7086187627523177,"table_sim":0.6320804286370688,"col_score":0.823426263925191},{"table":"receipt_lines","fused":0.6861833399345343,"table_sim":0.596972482520933,"col_score":0.819999626054936},{"table":"product_categories","fused":0.6645723620589341,"table_sim":0.6501703787798785,"col_score":0.6861753369775176},{"table":"goods_receipts","fused":0.6115394761163555,"table_sim":0.6155086832245751,"col_score":0.6055856654540261},{"table":"depreciation_entries","fused":0.5949995969398791,"table_sim":0.586520590552934,"col_score":0.6077181065202967},{"table":"fixed_assets","fused":0.5347328873417636,"table_sim":0.6018441701160724,"col_score":0.4340659631803004},{"table":"asset_maintenance","fused":0.3627414309225975,"table_sim":0.6045690515376625,"col_score":0},{"table":"order_lines","fused":0.35123057739439156,"table_sim":0.5853842956573193,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":13,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"adjustment_lines","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"order_lines","reason":"max_tables"},{"table":"po_lines","reason":"no_evidence"},{"table":"quote_lines","reason":"no_evidence"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":25,"total_retrieval_latency_ms":31,"sql_generated":"SELECT pc.name AS product_category, SUM(il.quantity_on_hand) / AVG(il.quantity_available) AS inventory_turnover_ratio FROM inventory_levels il JOIN products p ON il.product_id = p.product_id JOIN product_categories pc ON p.category_id = pc.category_id GROUP BY pc.name;","tables_used_in_sql":[],"explain_result":"success","rows_returned":30,"total_latency_ms":1284}
{"timestamp":"2026-01-27T20:49:24.598Z","query_id":"36c4b63b-44c5-4b67-8645-5c399759087b","question":"Identify products with significant inventory discrepancies (adjustment > 10% of stock)","attempt_count":2,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["inventory_adjustments","adjustment_lines","inventory_transactions","inventory_levels","products","fixed_assets","asset_categories","stock_transfers","sales_orders","product_suppliers","asset_maintenance","order_lines"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"inventory_adjustments","similarity":0.6958975386244389},{"table":"adjustment_lines","similarity":0.651007722195867},{"table":"fixed_assets","similarity":0.5955860146307721},{"table":"inventory_levels","similarity":0.5926011478403523},{"table":"products","similarity":0.578715845938642},{"table":"stock_transfers","similarity":0.5760981592349576},{"table":"inventory_transactions","similarity":0.5750206157907899},{"table":"asset_categories","similarity":0.5623112702235089},{"table":"asset_maintenance","similarity":0.5600794494972439},{"table":"product_suppliers","similarity":0.5588750264521751},{"table":"sales_orders","similarity":0.5479311734009632},{"table":"order_lines","similarity":0.5473705995587962},{"table":"purchase_orders","similarity":0.546212124678954},{"table":"product_categories","similarity":0.5459325805601473},{"table":"reorder_rules","similarity":0.5325202996518776}],"column_hits_per_table":{"inventory_adjustments":8,"adjustment_lines":5,"inventory_transactions":4,"products":5,"inventory_levels":5,"stock_transfers":2,"product_categories":1,"sales_orders":2,"product_suppliers":1,"asset_categories":3,"fixed_assets":4,"warehouse_locations":1,"goods_receipts":1,"project_expenses":1,"purchase_requisitions":1,"asset_locations":1,"asset_maintenance":1,"sales_opportunities":1,"vendor_invoices":2,"purchase_orders":1},"top_columns_per_table":{"inventory_adjustments":[{"column":"adjustment_number","similarity":0.7379814171122983},{"column":"reason","similarity":0.727925874735162},{"column":"status","similarity":0.7097133930935916}],"adjustment_lines":[{"column":"quantity_change","similarity":0.6459437862491665},{"column":"quantity_before","similarity":0.638065129258906},{"column":"quantity_after","similarity":0.636824144296085}],"inventory_transactions":[{"column":"transaction_type","similarity":0.6388771360730054},{"column":"reference_type","similarity":0.6379927241845618},{"column":"quantity","similarity":0.611413004161695}],"products":[{"column":"sku","similarity":0.6166735172572736},{"column":"name","similarity":0.6049081894916613},{"column":"weight","similarity":0.6002742783527346}],"inventory_levels":[{"column":"quantity_on_hand","similarity":0.6143345114617179},{"column":"quantity_available","similarity":0.6136312184002083},{"column":"quantity_reserved","similarity":0.6127891253033684}],"stock_transfers":[{"column":"transfer_number","similarity":0.6121115337226785},{"column":"status","similarity":0.6084281897334642}],"product_categories":[{"column":"name","similarity":0.6105471170007082}],"sales_orders":[{"column":"order_number","similarity":0.6049937069135132},{"column":"status","similarity":0.5883288690803906}],"product_suppliers":[{"column":"vendor_sku","similarity":0.6005565436728285}],"asset_categories":[{"column":"depreciation_method","similarity":0.5998811628635573},{"column":"name","similarity":0.5815804725674092},{"column":"salvage_value_percent","similarity":0.5811592495285139}],"fixed_assets":[{"column":"serial_number","similarity":0.5963742863000839},{"column":"asset_tag","similarity":0.5892195830987257},{"column":"name","similarity":0.5797471569989101}],"warehouse_locations":[{"column":"aisle","similarity":0.5865692348819901}],"goods_receipts":[{"column":"receipt_number","similarity":0.5864837088793964}],"project_expenses":[{"column":"category","similarity":0.5843825285695107}],"purchase_requisitions":[{"column":"requisition_number","similarity":0.5771490096202545}],"asset_locations":[{"column":"floor","similarity":0.5759538723637104}],"asset_maintenance":[{"column":"status","similarity":0.5750561706184214}],"sales_opportunities":[{"column":"source","similarity":0.5748716289995487}],"vendor_invoices":[{"column":"invoice_number","similarity":0.5743499698456791},{"column":"status","similarity":0.5674179154395642}],"purchase_orders":[{"column":"status","similarity":0.5739475463327183}]},"fused_scores":[{"table":"inventory_adjustments","fused":0.8583162649666151,"table_sim":0.6958975386244389,"col_score":1.1019443544798793},{"table":"adjustment_lines","fused":0.776595173668968,"table_sim":0.651007722195867,"col_score":0.9649763508786195},{"table":"inventory_transactions","fused":0.7281617687405886,"table_sim":0.5750206157907899,"col_score":0.9578734981652863},{"table":"inventory_levels","fused":0.7240207369689402,"table_sim":0.5926011478403523,"col_score":0.921150120661822},{"table":"products","fused":0.7139537701366416,"table_sim":0.578715845938642,"col_score":0.9168106564336409},{"table":"fixed_assets","fused":0.713745239918242,"table_sim":0.5955860146307721,"col_score":0.8909840778494468},{"table":"asset_categories","fused":0.693571077185231,"table_sim":0.5623112702235089,"col_score":0.8904607876278143},{"table":"stock_transfers","fused":0.6756834555927309,"table_sim":0.5760981592349576,"col_score":0.825061400129391},{"table":"sales_orders","fused":0.6531222284772379,"table_sim":0.5479311734009632,"col_score":0.8109088110916499},{"table":"product_suppliers","fused":0.5755476333404366,"table_sim":0.5588750264521751,"col_score":0.6005565436728285},{"table":"product_categories","fused":0.4985127410962866,"table_sim":0.5459325805601473,"col_score":0.42738298190049573},{"table":"asset_maintenance","fused":0.4970633974715043,"table_sim":0.5600794494972439,"col_score":0.40253931943289495},{"table":"purchase_orders","fused":0.48843258778053344,"table_sim":0.546212124678954,"col_score":0.40176328243290277},{"table":"order_lines","fused":0.3284223597352777,"table_sim":0.5473705995587962,"col_score":0},{"table":"reorder_rules","fused":0.31951217979112656,"table_sim":0.5325202996518776,"col_score":0}],"fk_expansion_candidates":22,"fk_expansion_added":2,"fk_expansion_blocked_count":16,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"product_categories","reason":"max_tables"},{"table":"purchase_orders","reason":"max_tables"},{"table":"quote_lines","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"reorder_rules","reason":"max_tables"},{"table":"requisition_lines","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"units_of_measure","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"max_tables"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":32,"total_retrieval_latency_ms":38,"sql_generated":"","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42601","error_message":"syntax error at or near \"LIMIT\"","total_latency_ms":5406,"failure_type":"execution_error","failure_details":"Model did not generate SELECT statement"}
{"timestamp":"2026-01-27T20:49:30.004Z","query_id":"44225156-1e00-4259-88b5-245700a77e04","question":"Calculate vendor performance score based on on-time delivery and invoice accuracy","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["vendor_invoices","performance_reviews","vendors","vendor_invoice_lines","product_suppliers","vendor_contacts","sales_orders","purchase_orders","goods_receipts","customers","order_lines","purchase_requisitions"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"vendor_invoices","similarity":0.6955551654807471},{"table":"performance_reviews","similarity":0.6709085810677549},{"table":"purchase_orders","similarity":0.6347301134279532},{"table":"vendors","similarity":0.630909375510322},{"table":"product_suppliers","similarity":0.6192498236848171},{"table":"vendor_invoice_lines","similarity":0.6085569773940885},{"table":"vendor_contacts","similarity":0.5997141827932857},{"table":"sales_orders","similarity":0.5961588710632616},{"table":"goods_receipts","similarity":0.5661835877563559},{"table":"customers","similarity":0.5465937183932046},{"table":"sales_opportunities","similarity":0.5460555777323932},{"table":"timesheets","similarity":0.5442791382718302},{"table":"order_lines","similarity":0.5315126832995996},{"table":"purchase_requisitions","similarity":0.5282778311071779},{"table":"employee_certifications","similarity":0.5262320271658971}],"column_hits_per_table":{"vendor_invoices":12,"vendor_invoice_lines":6,"vendors":10,"performance_reviews":9,"purchase_orders":2,"vendor_contacts":4,"product_suppliers":3,"fixed_assets":1,"sales_orders":2,"asset_maintenance":1},"top_columns_per_table":{"vendor_invoices":[{"column":"invoice_date","similarity":0.6820971378162017},{"column":"total","similarity":0.6809847435881535},{"column":"amount_paid","similarity":0.6702202083428355}],"vendor_invoice_lines":[{"column":"quantity","similarity":0.6465337363568044},{"column":"amount","similarity":0.6406576732483038},{"column":"unit_cost","similarity":0.6290973902712709}],"vendors":[{"column":"vendor_number","similarity":0.6392790672289599},{"column":"phone","similarity":0.632615514334186},{"column":"website","similarity":0.6187955062109327}],"performance_reviews":[{"column":"review_date","similarity":0.6391298059120761},{"column":"goals_met_percent","similarity":0.6348897232221123},{"column":"employee_id","similarity":0.6192794816779427}],"purchase_orders":[{"column":"vendor_id","similarity":0.6082240149448},{"column":"shipping_cost","similarity":0.5758565410529615}],"vendor_contacts":[{"column":"phone","similarity":0.6061779393166513},{"column":"title","similarity":0.5932972624562619},{"column":"email","similarity":0.5917429339564875}],"product_suppliers":[{"column":"minimum_order_qty","similarity":0.6044250768889664},{"column":"lead_time_days","similarity":0.6030466911489025},{"column":"vendor_id","similarity":0.5943087874293309}],"fixed_assets":[{"column":"vendor_id","similarity":0.5842101591334125}],"sales_orders":[{"column":"shipping_cost","similarity":0.5793358176930354},{"column":"total","similarity":0.5764972250136845}],"asset_maintenance":[{"column":"vendor_id","similarity":0.5782090997352557}]},"fused_scores":[{"table":"vendor_invoices","fused":0.8263689031325596,"table_sim":0.6955551654807471,"col_score":1.0225895096102784},{"table":"performance_reviews","fused":0.7851750156499058,"table_sim":0.6709085810677549,"col_score":0.9565746675231324},{"table":"vendors","fused":0.7607803550646144,"table_sim":0.630909375510322,"col_score":0.9555868243960528},{"table":"vendor_invoice_lines","fused":0.7518792156288356,"table_sim":0.6085569773940885,"col_score":0.9668625729809563},{"table":"product_suppliers","fused":0.7339292631962573,"table_sim":0.6192498236848171,"col_score":0.9059484224634177},{"table":"vendor_contacts","fused":0.7209591378938843,"table_sim":0.5997141827932857,"col_score":0.9028265705447822},{"table":"sales_orders","fused":0.704729094717908,"table_sim":0.5961588710632616,"col_score":0.8675844301998776},{"table":"purchase_orders","fused":0.6963320465702285,"table_sim":0.6347301134279532,"col_score":0.7887349462836415},{"table":"goods_receipts","fused":0.33971015265381355,"table_sim":0.5661835877563559,"col_score":0},{"table":"customers","fused":0.32795623103592275,"table_sim":0.5465937183932046,"col_score":0},{"table":"sales_opportunities","fused":0.32763334663943594,"table_sim":0.5460555777323932,"col_score":0},{"table":"timesheets","fused":0.32656748296309807,"table_sim":0.5442791382718302,"col_score":0},{"table":"order_lines","fused":0.3189076099797597,"table_sim":0.5315126832995996,"col_score":0},{"table":"purchase_requisitions","fused":0.3169666986643067,"table_sim":0.5282778311071779,"col_score":0},{"table":"employee_certifications","fused":0.3157392162995383,"table_sim":0.5262320271658971,"col_score":0}],"fk_expansion_candidates":16,"fk_expansion_added":2,"fk_expansion_blocked_count":13,"fk_expansion_blocked":[{"table":"addresses","reason":"no_evidence"},{"table":"asset_maintenance","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"currencies","reason":"no_evidence"},{"table":"customer_contacts","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"po_lines","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"max_tables"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":38,"total_retrieval_latency_ms":44,"sql_generated":"SELECT v.vendor_id, AVG(CASE WHEN g.received_by IS NOT NULL THEN 1 ELSE 0 END) AS on_time_delivery_score, AVG(CASE WHEN ivl.amount = vr.total THEN 1 ELSE 0 END) AS invoice_accuracy_score FROM vendors v LEFT JOIN goods_receipts g ON v.vendor_id = g.po_id AND g.received_by IS NOT NULL LEFT JOIN vendor_invoices iv ON v.vendor_id = iv.vendor_id LEFT JOIN vendor_invoice_lines ivl ON iv.invoice_id = ivl.invoice_id GROUP BY v.vendor_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42P01","error_message":"missing FROM-clause entry for table \"vr\"","total_latency_ms":6395,"failure_type":"join_path_miss","failure_details":"Database error after 3 attempts: missing FROM-clause entry for table \"vr\""}
{"timestamp":"2026-01-27T20:49:36.399Z","query_id":"299ca516-94a3-4385-9133-033aa6392cf2","question":"Generate a trial balance for the current period showing debits and credits by account category","attempt_count":2,"retry_succeeded":true,"execution_success":true,"retriever_version":"V2","tables_retrieved":["bank_accounts","account_types","depreciation_entries","depreciation_schedules","asset_categories","bank_transactions","fiscal_periods","budget_lines","project_budgets","budgets","chart_of_accounts","departments"],"tables_from_table_retrieval":15,"tables_from_column_only":10,"tables_from_fk_expansion":2,"table_scores":[{"table":"bank_accounts","similarity":0.6367900839880641},{"table":"asset_categories","similarity":0.6346535809758647},{"table":"account_types","similarity":0.6272285653729832},{"table":"depreciation_entries","similarity":0.6225511215159643},{"table":"depreciation_schedules","similarity":0.6165057393727287},{"table":"bank_transactions","similarity":0.6150962404412702},{"table":"fiscal_periods","similarity":0.6041900407507028},{"table":"chart_of_accounts","similarity":0.6007482259075341},{"table":"budget_lines","similarity":0.593425377594523},{"table":"customers","similarity":0.5828336551027367},{"table":"certifications","similarity":0.5762638622043766},{"table":"benefit_types","similarity":0.5715028878009876},{"table":"employee_benefits","similarity":0.5708097023317666},{"table":"project_budgets","similarity":0.5699587952178357},{"table":"budgets","similarity":0.568767701756073}],"column_hits_per_table":{"bank_accounts":4,"account_types":2,"depreciation_schedules":7,"depreciation_entries":5,"asset_categories":2,"benefit_types":1,"fiscal_periods":4,"project_budgets":2,"journal_lines":2,"project_expenses":1,"bank_transactions":4,"budgets":2,"departments":1,"asset_maintenance":1,"timesheets":1,"projects":1,"chart_of_accounts":1,"purchase_orders":2,"customers":1,"vendor_invoices":2,"currencies":1,"budget_lines":2,"inventory_adjustments":1},"top_columns_per_table":{"bank_accounts":[{"column":"current_balance","similarity":0.6869151637984203},{"column":"account_name","similarity":0.6080144236924266},{"column":"bank_name","similarity":0.6066260579567178}],"account_types":[{"column":"normal_balance","similarity":0.6484160338759071},{"column":"category","similarity":0.6238956196601739}],"depreciation_schedules":[{"column":"monthly_amount","similarity":0.6460216272986022},{"column":"annual_amount","similarity":0.6435863787386237},{"column":"start_date","similarity":0.6178549858715044}],"depreciation_entries":[{"column":"amount","similarity":0.6460096782233629},{"column":"period_id","similarity":0.6401048650864071},{"column":"accumulated_depreciation","similarity":0.6398491695651559}],"asset_categories":[{"column":"depreciation_method","similarity":0.6399578806467106},{"column":"salvage_value_percent","similarity":0.5906692564768835}],"benefit_types":[{"column":"annual_cost","similarity":0.614857236154928}],"fiscal_periods":[{"column":"name","similarity":0.6146000724463977},{"column":"period_id","similarity":0.5997794756800909},{"column":"start_date","similarity":0.5958425893901163}],"project_budgets":[{"column":"category","similarity":0.6144822335998272},{"column":"notes","similarity":0.5865421018912569}],"journal_lines":[{"column":"debit","similarity":0.6131519383994092},{"column":"credit","similarity":0.5929067215683504}],"project_expenses":[{"column":"category","similarity":0.6127356317273961}],"bank_transactions":[{"column":"amount","similarity":0.6081752093881687},{"column":"reference","similarity":0.5996793168104082},{"column":"reconciled","similarity":0.5871486254020114}],"budgets":[{"column":"status","similarity":0.5989844575610859},{"column":"total_amount","similarity":0.5890036805604402}],"departments":[{"column":"budget","similarity":0.5980463108867591}],"asset_maintenance":[{"column":"cost","similarity":0.5961138617057076}],"timesheets":[{"column":"total_hours","similarity":0.5956067219737295}],"projects":[{"column":"budget","similarity":0.5946377463056134}],"chart_of_accounts":[{"column":"description","similarity":0.5928520596952875}],"purchase_orders":[{"column":"total","similarity":0.5920004066122796},{"column":"subtotal","similarity":0.589720753994531}],"customers":[{"column":"credit_limit","similarity":0.5915804628924816}],"vendor_invoices":[{"column":"subtotal","similarity":0.5901699024505791},{"column":"total","similarity":0.5854052260141052}],"currencies":[{"column":"symbol","similarity":0.5869910028334465}],"budget_lines":[{"column":"period_id","similarity":0.5869648406526051},{"column":"amount","similarity":0.5853230300290301}],"inventory_adjustments":[{"column":"status","similarity":0.5842747186783505}]},"fused_scores":[{"table":"bank_accounts","fused":0.777472853583897,"table_sim":0.6367900839880641,"col_score":0.9884970079776462},{"table":"account_types","fused":0.7604826767061876,"table_sim":0.6272285653729832,"col_score":0.960363843705994},{"table":"depreciation_entries","fused":0.7599043781119549,"table_sim":0.6225511215159643,"col_score":0.9659342630059409},{"table":"depreciation_schedules","fused":0.7570293702908029,"table_sim":0.6165057393727287,"col_score":0.9678148166679141},{"table":"asset_categories","fused":0.7549091521395797,"table_sim":0.6346535809758647,"col_score":0.9352925088851523},{"table":"bank_transactions","fused":0.7322636913821112,"table_sim":0.6150962404412702,"col_score":0.9080148677933728},{"table":"fiscal_periods","fused":0.7188051953965271,"table_sim":0.6041900407507028,"col_score":0.8907279273652635},{"table":"budget_lines","fused":0.6723595162596906,"table_sim":0.593425377594523,"col_score":0.7907607242574419},{"table":"project_budgets","fused":0.6698840648354083,"table_sim":0.5699587952178357,"col_score":0.8197719692617671},{"table":"budgets","fused":0.6607199173363719,"table_sim":0.568767701756073,"col_score":0.7986482407068203},{"table":"benefit_types","fused":0.5888446271425638,"table_sim":0.5715028878009876,"col_score":0.614857236154928},{"table":"customers","fused":0.5863323782186346,"table_sim":0.5828336551027367,"col_score":0.5915804628924816},{"table":"chart_of_accounts","fused":0.526447512259201,"table_sim":0.6007482259075341,"col_score":0.41499644178670125},{"table":"journal_lines","fused":0.3638421196734338,"table_sim":0,"col_score":0.9096052991835843},{"table":"purchase_orders","fused":0.35474431344381807,"table_sim":0,"col_score":0.8868607836095451}],"fk_expansion_candidates":8,"fk_expansion_added":2,"fk_expansion_blocked_count":6,"fk_expansion_blocked":[{"table":"currencies","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":16,"total_retrieval_latency_ms":21,"sql_generated":"SELECT ca.name AS \"Account Category\", SUM(bl.amount) AS \"Debit Total\" FROM budgets b JOIN budget_lines bl ON b.budget_id = bl.budget_id AND bl.period_id IN (SELECT period_id FROM fiscal_periods WHERE fiscal_year_id = 2023 AND is_closed = TRUE) JOIN chart_of_accounts ca ON bl.account_id = ca.account_id GROUP BY ca.name;","tables_used_in_sql":[],"explain_result":"success","sqlstate":"42703","error_message":"column b.amount does not exist","rows_returned":0,"total_latency_ms":2938}
{"timestamp":"2026-01-27T20:49:39.337Z","query_id":"6a015cd9-dd1e-4d43-b31c-56af7d7b580c","question":"Calculate cash flow from bank transactions grouped by transaction type and month","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["bank_transactions","bank_accounts","inventory_transactions","account_types","depreciation_entries","depreciation_schedules","asset_transfers","vendor_invoices","asset_categories","stock_transfers","currencies"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":1,"table_scores":[{"table":"bank_transactions","similarity":0.7232703691525166},{"table":"bank_accounts","similarity":0.6412885484513536},{"table":"inventory_transactions","similarity":0.6130368701918206},{"table":"account_types","similarity":0.5746397921552414},{"table":"depreciation_entries","similarity":0.5609169011076522},{"table":"stock_transfers","similarity":0.5608182762969601},{"table":"asset_categories","similarity":0.5603941855250653},{"table":"asset_transfers","similarity":0.557070516037654},{"table":"goods_receipts","similarity":0.5570340666097445},{"table":"asset_maintenance","similarity":0.5550122446563767},{"table":"timesheet_entries","similarity":0.5547038308987016},{"table":"customers","similarity":0.5536205739048321},{"table":"depreciation_schedules","similarity":0.5510145110305125},{"table":"budget_lines","similarity":0.5501439459081744},{"table":"vendor_invoices","similarity":0.5501234090713347}],"column_hits_per_table":{"bank_transactions":9,"inventory_transactions":6,"bank_accounts":8,"depreciation_schedules":2,"account_types":2,"depreciation_entries":4,"asset_transfers":4,"benefit_types":1,"sales_orders":1,"vendor_invoices":2,"departments":1,"project_budgets":3,"asset_categories":1,"budgets":1,"currencies":3,"projects":1,"stock_transfers":1},"top_columns_per_table":{"bank_transactions":[{"column":"transaction_type","similarity":0.7226031453519327},{"column":"transaction_date","similarity":0.7197948108865876},{"column":"amount","similarity":0.6937932229170158}],"inventory_transactions":[{"column":"transaction_type","similarity":0.6273448250719428},{"column":"transaction_date","similarity":0.5883515821242886},{"column":"reference_type","similarity":0.5870442032650763}],"bank_accounts":[{"column":"bank_name","similarity":0.6206916343579985},{"column":"currency_id","similarity":0.6080233956923218},{"column":"account_name","similarity":0.6062681595576817}],"depreciation_schedules":[{"column":"monthly_amount","similarity":0.59447656917774},{"column":"annual_amount","similarity":0.5604557333370965}],"account_types":[{"column":"category","similarity":0.5767477686638358},{"column":"normal_balance","similarity":0.553298547454127}],"depreciation_entries":[{"column":"entry_date","similarity":0.5764456999460359},{"column":"amount","similarity":0.5712923688967707},{"column":"accumulated_depreciation","similarity":0.5593081810441107}],"asset_transfers":[{"column":"transfer_date","similarity":0.5753286251599586},{"column":"reason","similarity":0.5680950655456624},{"column":"transferred_by","similarity":0.557655111028576}],"benefit_types":[{"column":"annual_cost","similarity":0.5690702206996687}],"sales_orders":[{"column":"subtotal","similarity":0.5690246047374201}],"vendor_invoices":[{"column":"subtotal","similarity":0.5667884131380803},{"column":"amount_paid","similarity":0.5537916195948072}],"departments":[{"column":"budget","similarity":0.56620715274516}],"project_budgets":[{"column":"category","similarity":0.5630575145165342},{"column":"notes","similarity":0.5566774782603028},{"column":"planned_amount","similarity":0.5539083156532728}],"asset_categories":[{"column":"depreciation_method","similarity":0.5617474146945006}],"budgets":[{"column":"status","similarity":0.5601445371969136}],"currencies":[{"column":"symbol","similarity":0.5600491754665113},{"column":"code","similarity":0.5571181350069567},{"column":"name","similarity":0.5532051640223443}],"projects":[{"column":"budget","similarity":0.5548004632768436}],"stock_transfers":[{"column":"status","similarity":0.5540703957924323}]},"fused_scores":[{"table":"bank_transactions","fused":0.8669624418096007,"table_sim":0.7232703691525166,"col_score":1.0825005507952266},{"table":"bank_accounts","fused":0.7438459153666748,"table_sim":0.6412885484513536,"col_score":0.8976819657396565},{"table":"inventory_transactions","fused":0.7364303685687272,"table_sim":0.6130368701918206,"col_score":0.9215206161340871},{"table":"account_types","fused":0.6861426922495046,"table_sim":0.5746397921552414,"col_score":0.8533970423908993},{"table":"depreciation_entries","fused":0.6813868944223598,"table_sim":0.5609169011076522,"col_score":0.8620918843944212},{"table":"depreciation_schedules","fused":0.6804904809568229,"table_sim":0.5510145110305125,"col_score":0.8747044358462883},{"table":"asset_transfers","fused":0.6779927727957084,"table_sim":0.557070516037654,"col_score":0.8593761579327899},{"table":"vendor_invoices","fused":0.634320237441306,"table_sim":0.5501234090713347,"col_score":0.7606154799962628},{"table":"asset_categories","fused":0.5609354771928394,"table_sim":0.5603941855250653,"col_score":0.5617474146945006},{"table":"stock_transfers","fused":0.4916306766000571,"table_sim":0.5608182762969601,"col_score":0.3878492770547026},{"table":"project_budgets","fused":0.3360046689372682,"table_sim":0,"col_score":0.8400116723431705},{"table":"currencies","fused":0.3354432971879959,"table_sim":0,"col_score":0.8386082429699897},{"table":"goods_receipts","fused":0.3342204399658467,"table_sim":0.5570340666097445,"col_score":0},{"table":"asset_maintenance","fused":0.333007346793826,"table_sim":0.5550122446563767,"col_score":0},{"table":"timesheet_entries","fused":0.3328222985392209,"table_sim":0.5547038308987016,"col_score":0}],"fk_expansion_candidates":14,"fk_expansion_added":1,"fk_expansion_blocked_count":13,"fk_expansion_blocked":[{"table":"asset_locations","reason":"no_evidence"},{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_periods","reason":"no_evidence"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"products","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"transfer_lines","reason":"no_evidence"},{"table":"vendor_invoice_lines","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"warehouse_locations","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":22,"total_retrieval_latency_ms":28,"sql_generated":"SELECT transaction_type, EXTRACT(MONTH FROM transaction_date) AS month, SUM(amount) as cash_flow \nFROM bank_accounts ba JOIN bank_transactions bt ON ba.bank_account_id = bt.bank_account_id \nGROUP BY transaction_type, month;","tables_used_in_sql":[],"total_latency_ms":3124,"failure_type":"llm_reasoning","failure_details":"Failed to generate valid SQL after 3 attempts"}
{"timestamp":"2026-01-27T20:49:42.462Z","query_id":"7a04bedf-067c-4b33-99dd-aea80e817643","question":"Calculate project profitability comparing budget vs actual expenses","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["project_budgets","project_expenses","budgets","projects","project_resources","project_milestones","project_tasks","budget_lines","depreciation_schedules","cost_centers","departments","fiscal_periods"],"tables_from_table_retrieval":15,"tables_from_column_only":7,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_budgets","similarity":0.6969020680342091},{"table":"project_expenses","similarity":0.6901643358621746},{"table":"budgets","similarity":0.6054710146643664},{"table":"project_resources","similarity":0.5884392614999969},{"table":"budget_lines","similarity":0.5713392587016516},{"table":"project_milestones","similarity":0.5640452185585958},{"table":"projects","similarity":0.5566750316098611},{"table":"project_tasks","similarity":0.5430288007477744},{"table":"fiscal_periods","similarity":0.5421955610342155},{"table":"cost_centers","similarity":0.5334843814345405},{"table":"fiscal_years","similarity":0.5330512679525921},{"table":"timesheet_entries","similarity":0.5277321533499411},{"table":"depreciation_schedules","similarity":0.5161348636193235},{"table":"task_assignments","similarity":0.5090218924299275},{"table":"project_phases","similarity":0.5086822303322549}],"column_hits_per_table":{"project_budgets":6,"project_expenses":10,"projects":4,"budgets":8,"departments":1,"budget_lines":3,"project_resources":4,"project_milestones":2,"project_tasks":3,"product_suppliers":1,"products":1,"asset_maintenance":1,"fixed_assets":1,"depreciation_schedules":2,"requisition_lines":1,"cost_centers":1,"benefit_types":1},"top_columns_per_table":{"project_budgets":[{"column":"actual_amount","similarity":0.732381284281357},{"column":"planned_amount","similarity":0.7077655279095464},{"column":"category","similarity":0.6837344583515939}],"project_expenses":[{"column":"amount","similarity":0.719310515063275},{"column":"is_billable","similarity":0.6944071710464874},{"column":"status","similarity":0.6819235762798355}],"projects":[{"column":"budget","similarity":0.7010305666750449},{"column":"project_number","similarity":0.58156128942889},{"column":"status","similarity":0.5727418455053092}],"budgets":[{"column":"total_amount","similarity":0.6566540327671284},{"column":"status","similarity":0.6352662167542227},{"column":"name","similarity":0.6054909942282356}],"departments":[{"column":"budget","similarity":0.6264870674058582}],"budget_lines":[{"column":"amount","similarity":0.6204819952699552},{"column":"budget_id","similarity":0.5789661588581666},{"column":"period_id","similarity":0.5466449934647022}],"project_resources":[{"column":"hourly_rate","similarity":0.6071134658167074},{"column":"allocation_percent","similarity":0.5838131867437651},{"column":"project_id","similarity":0.5594873197213137}],"project_milestones":[{"column":"amount","similarity":0.5947539124725684},{"column":"is_billable","similarity":0.5868460872676451}],"project_tasks":[{"column":"actual_hours","similarity":0.5942692351392902},{"column":"estimated_hours","similarity":0.5851366658523576},{"column":"status","similarity":0.5591681405321435}],"product_suppliers":[{"column":"unit_cost","similarity":0.5658746967491194}],"products":[{"column":"unit_cost","similarity":0.5580213602692399}],"asset_maintenance":[{"column":"cost","similarity":0.5577313360447209}],"fixed_assets":[{"column":"purchase_cost","similarity":0.5575179107884427}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.5573270992269892},{"column":"monthly_amount","similarity":0.5518789639204239}],"requisition_lines":[{"column":"estimated_unit_cost","similarity":0.5519709664483464}],"cost_centers":[{"column":"is_active","similarity":0.5514522094975285}],"benefit_types":[{"column":"annual_cost","similarity":0.5454524684838336}]},"fused_scores":[{"table":"project_budgets","fused":0.8526468601149775,"table_sim":0.6969020680342091,"col_score":1.08626404823613},{"table":"project_expenses","fused":0.8407042417519124,"table_sim":0.6901643358621746,"col_score":1.0665141005865189},{"table":"budgets","fused":0.7410467725305158,"table_sim":0.6054710146643664,"col_score":0.9444104093297399},{"table":"projects","fused":0.7307295035217127,"table_sim":0.5566750316098611,"col_score":0.9918112113894899},{"table":"project_resources","fused":0.7126715805754341,"table_sim":0.5884392614999969,"col_score":0.89902005918859},{"table":"project_milestones","fused":0.6936979135777139,"table_sim":0.5640452185585958,"col_score":0.8881769561063909},{"table":"project_tasks","fused":0.6805523076748522,"table_sim":0.5430288007477744,"col_score":0.886837568065469},{"table":"budget_lines","fused":0.6720516155691163,"table_sim":0.5713392587016516,"col_score":0.8231201508703134},{"table":"depreciation_schedules","fused":0.6429875506464746,"table_sim":0.5161348636193235,"col_score":0.8332665811872011},{"table":"cost_centers","fused":0.4744972475200322,"table_sim":0.5334843814345405,"col_score":0.3860165466482699},{"table":"fiscal_periods","fused":0.3253173366205293,"table_sim":0.5421955610342155,"col_score":0},{"table":"fiscal_years","fused":0.3198307607715552,"table_sim":0.5330512679525921,"col_score":0},{"table":"timesheet_entries","fused":0.3166392920099646,"table_sim":0.5277321533499411,"col_score":0},{"table":"task_assignments","fused":0.30541313545795645,"table_sim":0.5090218924299275,"col_score":0},{"table":"project_phases","fused":0.3052093381993529,"table_sim":0.5086822303322549,"col_score":0}],"fk_expansion_candidates":11,"fk_expansion_added":2,"fk_expansion_blocked_count":4,"fk_expansion_blocked":[{"table":"chart_of_accounts","reason":"no_evidence"},{"table":"customers","reason":"no_evidence"},{"table":"employees","reason":"no_evidence"},{"table":"fiscal_years","reason":"max_tables"},{"table":"fixed_assets","reason":"max_tables"},{"table":"journal_lines","reason":"no_evidence"},{"table":"project_phases","reason":"max_tables"},{"table":"task_assignments","reason":"max_tables"},{"table":"timesheet_entries","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":28,"total_retrieval_latency_ms":33,"sql_generated":"SELECT p.project_id, p.name AS project_name, b.budget_amount, e.actual_expense_amount, (b.budget_amount - e.actual_expense_amount) AS profitability FROM projects p INNER JOIN budgets b ON p.project_id = b.project_id INNER JOIN project_expenses e ON p.project_id = e.project_id WHERE p.status = 'Completed' AND e.is_billable = TRUE;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column b.project_id does not exist","total_latency_ms":4339,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column b.project_id does not exist"}
{"timestamp":"2026-01-27T20:49:46.802Z","query_id":"e7bae4d8-660e-438e-b8b2-b0c49d235a7d","question":"Find resource allocation by employee across all active projects","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["project_resources","project_expenses","projects","employees","asset_transfers","employee_benefits","timesheets","employee_salaries","asset_maintenance","fixed_assets","budgets","inventory_adjustments"],"tables_from_table_retrieval":15,"tables_from_column_only":6,"tables_from_fk_expansion":2,"table_scores":[{"table":"project_resources","similarity":0.7731177943741443},{"table":"task_assignments","similarity":0.6903320131383612},{"table":"project_expenses","similarity":0.6860669651962393},{"table":"projects","similarity":0.6699593096880756},{"table":"employee_salaries","similarity":0.6405071946271549},{"table":"employees","similarity":0.6339025803715616},{"table":"asset_transfers","similarity":0.6295509823374746},{"table":"employee_benefits","similarity":0.6252896926971302},{"table":"asset_maintenance","similarity":0.6144814119310266},{"table":"project_budgets","similarity":0.6127056548770882},{"table":"employee_training","similarity":0.6115716788056256},{"table":"timesheets","similarity":0.6110953610179598},{"table":"fixed_assets","similarity":0.6034608172484828},{"table":"positions","similarity":0.6004520720571301},{"table":"sales_regions","similarity":0.6000624479697053}],"column_hits_per_table":{"project_resources":8,"projects":6,"project_expenses":5,"task_assignments":1,"fixed_assets":1,"asset_maintenance":1,"asset_transfers":3,"project_tasks":4,"employees":9,"budgets":1,"sales_territories":1,"employee_salaries":1,"employee_benefits":2,"leave_requests":1,"project_budgets":1,"inventory_adjustments":2,"departments":1,"timesheets":2},"top_columns_per_table":{"project_resources":[{"column":"allocation_percent","similarity":0.7387995135432864},{"column":"employee_id","similarity":0.736788358139023},{"column":"role","similarity":0.6871253102146296}],"projects":[{"column":"project_manager_id","similarity":0.6950658215815594},{"column":"project_number","similarity":0.6486471523682797},{"column":"priority","similarity":0.647905091409848}],"project_expenses":[{"column":"employee_id","similarity":0.6892341968361351},{"column":"approved_by","similarity":0.6866501279538427},{"column":"status","similarity":0.6365220668607481}],"task_assignments":[{"column":"employee_id","similarity":0.6715931803692717}],"fixed_assets":[{"column":"assigned_to","similarity":0.6693605355449325}],"asset_maintenance":[{"column":"performed_by","similarity":0.6594150176106053}],"asset_transfers":[{"column":"transferred_by","similarity":0.649976405491491},{"column":"to_employee_id","similarity":0.6468918681465957},{"column":"from_employee_id","similarity":0.6392912984449377}],"project_tasks":[{"column":"actual_hours","similarity":0.6431585243015517},{"column":"status","similarity":0.6399283690314367},{"column":"priority","similarity":0.6368769410502637}],"employees":[{"column":"employee_number","similarity":0.6411927718149272},{"column":"position_id","similarity":0.6387230138414012},{"column":"manager_id","similarity":0.6334603651967811}],"budgets":[{"column":"approved_by","similarity":0.6329697386525807}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6317471325498781}],"employee_salaries":[{"column":"approved_by","similarity":0.6297852265264874}],"employee_benefits":[{"column":"employee_id","similarity":0.6282013304971424},{"column":"coverage_level","similarity":0.6209091178386659}],"leave_requests":[{"column":"approved_by","similarity":0.6245063356176883}],"project_budgets":[{"column":"category","similarity":0.6241016561022017}],"inventory_adjustments":[{"column":"approved_by","similarity":0.6219786416053619},{"column":"adjusted_by","similarity":0.6198166093236963}],"departments":[{"column":"manager_id","similarity":0.6208493633226347}],"timesheets":[{"column":"employee_id","similarity":0.6185415592033615},{"column":"approved_by","similarity":0.6172975203434086}]},"fused_scores":[{"table":"project_resources","fused":0.8968155440847271,"table_sim":0.7731177943741443,"col_score":1.0823621686506013},{"table":"project_expenses","fused":0.8105738212591131,"table_sim":0.6860669651962393,"col_score":0.9973341053534239},{"table":"projects","fused":0.7910154650421268,"table_sim":0.6699593096880756,"col_score":0.9725996980732037},{"table":"employees","fused":0.762404804064732,"table_sim":0.6339025803715616,"col_score":0.9551581396044875},{"table":"asset_transfers","fused":0.7282860131396046,"table_sim":0.6295509823374746,"col_score":0.8763885593427996},{"table":"employee_benefits","fused":0.7114856490233444,"table_sim":0.6252896926971302,"col_score":0.8407795835126657},{"table":"timesheets","fused":0.70017204303661,"table_sim":0.6110953610179598,"col_score":0.8337870660645851},{"table":"employee_salaries","fused":0.6362184073868878,"table_sim":0.6405071946271549,"col_score":0.6297852265264874},{"table":"asset_maintenance","fused":0.6324548542028581,"table_sim":0.6144814119310266,"col_score":0.6594150176106053},{"table":"fixed_assets","fused":0.6298207045670627,"table_sim":0.6034608172484828,"col_score":0.6693605355449325},{"table":"project_budgets","fused":0.6172640553671336,"table_sim":0.6127056548770882,"col_score":0.6241016561022017},{"table":"task_assignments","fused":0.6022452983864128,"table_sim":0.6903320131383612,"col_score":0.47011522625849017},{"table":"project_tasks","fused":0.38463879793067346,"table_sim":0,"col_score":0.9615969948266836},{"table":"inventory_adjustments","fused":0.37275477850688404,"table_sim":0,"col_score":0.93188694626721},{"table":"employee_training","fused":0.3669430072833753,"table_sim":0.6115716788056256,"col_score":0}],"fk_expansion_candidates":38,"fk_expansion_added":2,"fk_expansion_blocked_count":30,"fk_expansion_blocked":[{"table":"maintenance_types","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"project_phases","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"departments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"project_budgets","reason":"max_tables"},{"table":"vendors","reason":"no_evidence"},{"table":"positions","reason":"max_tables"},{"table":"sales_regions","reason":"max_tables"},{"table":"customers","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"timesheet_entries","reason":"no_evidence"},{"table":"employee_training","reason":"max_tables"},{"table":"project_milestones","reason":"no_evidence"},{"table":"leave_requests","reason":"max_tables"},{"table":"sales_orders","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"benefit_types","reason":"no_evidence"},{"table":"asset_locations","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"depreciation_schedules","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"task_assignments","reason":"max_tables"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":32,"total_retrieval_latency_ms":38,"sql_generated":"SELECT e.employee_id AS EmployeeID, SUM(pr.hourly_rate) AS TotalHourlyRate FROM project_resources pr JOIN employees e ON pr.employee_id = e.employee_id WHERE p.status = 'active' GROUP BY e.employee_id;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42P01","error_message":"missing FROM-clause entry for table \"p\"","total_latency_ms":2796,"failure_type":"join_path_miss","failure_details":"Database error after 3 attempts: missing FROM-clause entry for table \"p\""}
{"timestamp":"2026-01-27T20:49:49.598Z","query_id":"09f5972b-f084-4c89-a76f-2a16a263b269","question":"List all fixed assets with their assigned employees and current locations","attempt_count":1,"retry_succeeded":false,"execution_success":true,"retriever_version":"V2","tables_retrieved":["fixed_assets","asset_locations","asset_maintenance","asset_transfers","employees","sales_territories","depreciation_schedules","sales_regions","employee_salaries","departments","inventory_adjustments","positions"],"tables_from_table_retrieval":15,"tables_from_column_only":2,"tables_from_fk_expansion":2,"table_scores":[{"table":"fixed_assets","similarity":0.7199454700518836},{"table":"asset_locations","similarity":0.6993840670281728},{"table":"asset_transfers","similarity":0.6681876163750934},{"table":"asset_maintenance","similarity":0.6662441365446851},{"table":"sales_territories","similarity":0.6138568966711586},{"table":"employees","similarity":0.6041748893811374},{"table":"sales_regions","similarity":0.5905113043845756},{"table":"employee_salaries","similarity":0.584781640529263},{"table":"departments","similarity":0.5839722838487205},{"table":"task_assignments","similarity":0.5833995895060854},{"table":"positions","similarity":0.5818633468828208},{"table":"depreciation_schedules","similarity":0.5769154426781498},{"table":"project_resources","similarity":0.573391179917491},{"table":"inventory_adjustments","similarity":0.5728570248654077},{"table":"projects","similarity":0.5679182735225474}],"column_hits_per_table":{"fixed_assets":17,"asset_locations":6,"asset_maintenance":8,"asset_transfers":6,"employees":9,"sales_territories":1,"depreciation_schedules":1,"adjustment_lines":1,"stock_transfers":1},"top_columns_per_table":{"fixed_assets":[{"column":"assigned_to","similarity":0.7610359291813483},{"column":"location_id","similarity":0.7571020804502957},{"column":"status","similarity":0.7351464311922252}],"asset_locations":[{"column":"building","similarity":0.6990298555075612},{"column":"floor","similarity":0.6887653641924915},{"column":"room","similarity":0.678024829035518}],"asset_maintenance":[{"column":"status","similarity":0.6675279258856094},{"column":"asset_id","similarity":0.6617322335301026},{"column":"performed_by","similarity":0.6585231704982136}],"asset_transfers":[{"column":"to_location_id","similarity":0.6668886725808255},{"column":"from_location_id","similarity":0.655575636389779},{"column":"asset_id","similarity":0.6507564493646987}],"employees":[{"column":"email","similarity":0.6306117604539891},{"column":"is_active","similarity":0.6160821371149121},{"column":"created_at","similarity":0.6135709206507636}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6185197898085313}],"depreciation_schedules":[{"column":"asset_id","similarity":0.6108849923785906}],"adjustment_lines":[{"column":"location_id","similarity":0.6013885968583933}],"stock_transfers":[{"column":"created_by","similarity":0.5967870656956826}]},"fused_scores":[{"table":"fixed_assets","fused":0.8768614293329463,"table_sim":0.7199454700518836,"col_score":1.1122353682545403},{"table":"asset_locations","fused":0.8369954552584264,"table_sim":0.6993840670281728,"col_score":1.043412537603807},{"table":"asset_maintenance","fused":0.7896490335594094,"table_sim":0.6662441365446851,"col_score":0.9747563790814959},{"table":"asset_transfers","fused":0.7514669899829727,"table_sim":0.6681876163750934,"col_score":0.8763860503947918},{"table":"employees","fused":0.7358947124042898,"table_sim":0.6041748893811374,"col_score":0.9334744469390185},{"table":"sales_territories","fused":0.5414996791490839,"table_sim":0.6138568966711586,"col_score":0.4329638528659719},{"table":"depreciation_schedules","fused":0.5171970634728953,"table_sim":0.5769154426781498,"col_score":0.4276194946650134},{"table":"sales_regions","fused":0.35430678263074533,"table_sim":0.5905113043845756,"col_score":0},{"table":"employee_salaries","fused":0.35086898431755775,"table_sim":0.584781640529263,"col_score":0},{"table":"departments","fused":0.3503833703092323,"table_sim":0.5839722838487205,"col_score":0},{"table":"task_assignments","fused":0.3500397537036512,"table_sim":0.5833995895060854,"col_score":0},{"table":"positions","fused":0.34911800812969246,"table_sim":0.5818633468828208,"col_score":0},{"table":"project_resources","fused":0.34403470795049457,"table_sim":0.573391179917491,"col_score":0},{"table":"inventory_adjustments","fused":0.3437142149192446,"table_sim":0.5728570248654077,"col_score":0},{"table":"projects","fused":0.34075096411352845,"table_sim":0.5679182735225474,"col_score":0}],"fk_expansion_candidates":33,"fk_expansion_added":2,"fk_expansion_blocked_count":28,"fk_expansion_blocked":[{"table":"maintenance_types","reason":"no_evidence"},{"table":"employment_history","reason":"no_evidence"},{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budgets","reason":"no_evidence"},{"table":"asset_categories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"vendors","reason":"no_evidence"},{"table":"project_resources","reason":"max_tables"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"employee_training","reason":"no_evidence"},{"table":"project_expenses","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"employee_benefits","reason":"no_evidence"},{"table":"goods_receipts","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"max_tables"},{"table":"task_assignments","reason":"max_tables"},{"table":"depreciation_entries","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"no_evidence"},{"table":"purchase_requisitions","reason":"no_evidence"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":24,"total_retrieval_latency_ms":30,"sql_generated":"SELECT fa.asset_id AS AssetID, fa.name AS Name, fa.location_id AS LocationID, fa.assigned_to AS AssignedEmployeeID FROM fixed_assets fa JOIN asset_locations al ON fa.location_id = al.location_id JOIN employees e ON fa.assigned_to = e.employee_id;","tables_used_in_sql":[],"explain_result":"success","rows_returned":0,"total_latency_ms":1261}
{"timestamp":"2026-01-27T20:49:50.860Z","query_id":"70c3e8c8-3b4f-475e-b1ff-f6aceacb7592","question":"Create a comprehensive employee cost report including salary and benefits by department","attempt_count":3,"retry_succeeded":false,"execution_success":false,"retriever_version":"V2","tables_retrieved":["employee_salaries","employee_benefits","employees","project_expenses","budgets","departments","project_resources","benefit_types","goods_receipts","employee_training","employment_history","positions"],"tables_from_table_retrieval":15,"tables_from_column_only":10,"tables_from_fk_expansion":2,"table_scores":[{"table":"employee_benefits","similarity":0.7033203083522601},{"table":"employee_salaries","similarity":0.7004330807404299},{"table":"project_expenses","similarity":0.6709016284087207},{"table":"employees","similarity":0.6573833023433696},{"table":"departments","similarity":0.6467717005028588},{"table":"budgets","similarity":0.6459628498185659},{"table":"purchase_requisitions","similarity":0.6331051084254513},{"table":"sales_regions","similarity":0.6301038851943551},{"table":"employment_history","similarity":0.6247225842183777},{"table":"employee_training","similarity":0.6143787031418324},{"table":"goods_receipts","similarity":0.6134314016075626},{"table":"benefit_types","similarity":0.6103800368440171},{"table":"timesheets","similarity":0.608646580767154},{"table":"positions","similarity":0.6060295054142851},{"table":"project_resources","similarity":0.6058652615663651}],"column_hits_per_table":{"employees":5,"employee_salaries":7,"employee_benefits":6,"departments":2,"project_expenses":4,"benefit_types":1,"cost_centers":1,"project_resources":2,"asset_maintenance":1,"budgets":3,"goods_receipts":1,"positions":1,"performance_reviews":1,"vendor_invoices":4,"employee_training":1,"product_suppliers":1,"employee_certifications":1,"project_budgets":3,"sales_territories":1,"employment_history":1,"sales_regions":1,"depreciation_schedules":1,"requisition_lines":1},"top_columns_per_table":{"employees":[{"column":"salary","similarity":0.7353273158370108},{"column":"department_id","similarity":0.6458933199793105},{"column":"employee_number","similarity":0.6339488054951704}],"employee_salaries":[{"column":"amount","similarity":0.7343697506197728},{"column":"effective_date","similarity":0.6773602786138204},{"column":"employee_id","similarity":0.6719030284173544}],"employee_benefits":[{"column":"coverage_level","similarity":0.692206009981684},{"column":"employee_id","similarity":0.691334472450722},{"column":"benefit_type_id","similarity":0.6825998512347974}],"departments":[{"column":"budget","similarity":0.6845753677360407},{"column":"manager_id","similarity":0.633688934613717}],"project_expenses":[{"column":"employee_id","similarity":0.6753839678754537},{"column":"approved_by","similarity":0.6566797227751197},{"column":"amount","similarity":0.6540423770585583}],"benefit_types":[{"column":"annual_cost","similarity":0.6681632995082879}],"cost_centers":[{"column":"department_id","similarity":0.6444791546112041}],"project_resources":[{"column":"hourly_rate","similarity":0.6330708854761284},{"column":"employee_id","similarity":0.6180596074892039}],"asset_maintenance":[{"column":"cost","similarity":0.6294383521509798}],"budgets":[{"column":"total_amount","similarity":0.627433899620325},{"column":"approved_by","similarity":0.626054957549584},{"column":"department_id","similarity":0.6202588727965219}],"goods_receipts":[{"column":"received_by","similarity":0.6273408234197417}],"positions":[{"column":"min_salary","similarity":0.6249941700853083}],"performance_reviews":[{"column":"employee_id","similarity":0.6248478988858465}],"vendor_invoices":[{"column":"subtotal","similarity":0.6240930475878483},{"column":"amount_paid","similarity":0.6227761450723656},{"column":"total","similarity":0.6214874696934888}],"employee_training":[{"column":"score","similarity":0.6203977331351577}],"product_suppliers":[{"column":"unit_cost","similarity":0.6202977267547164}],"employee_certifications":[{"column":"employee_id","similarity":0.620067204342498}],"project_budgets":[{"column":"planned_amount","similarity":0.620044228211653},{"column":"actual_amount","similarity":0.618194603133217},{"column":"notes","similarity":0.6165560316383816}],"sales_territories":[{"column":"assigned_rep_id","similarity":0.6195472423349481}],"employment_history":[{"column":"employee_id","similarity":0.6193544167665219}],"sales_regions":[{"column":"manager_id","similarity":0.6180082092187474}],"depreciation_schedules":[{"column":"annual_amount","similarity":0.6170760765215243}],"requisition_lines":[{"column":"estimated_unit_cost","similarity":0.6170521107439255}]},"fused_scores":[{"table":"employee_salaries","fused":0.8494798044149312,"table_sim":0.7004330807404299,"col_score":1.0730498899266832},{"table":"employee_benefits","fused":0.8321855077820437,"table_sim":0.7033203083522601,"col_score":1.025483306926719},{"table":"employees","fused":0.8153506688398602,"table_sim":0.6573833023433696,"col_score":1.052301718584596},{"table":"project_expenses","fused":0.7960213415669919,"table_sim":0.6709016284087207,"col_score":0.9837009113043989},{"table":"budgets","fused":0.7637622612491863,"table_sim":0.6459628498185659,"col_score":0.940461378395117},{"table":"departments","fused":0.750609618242052,"table_sim":0.6467717005028588,"col_score":0.9063664948508416},{"table":"project_resources","fused":0.703275856178759,"table_sim":0.6058652615663651,"col_score":0.8493917480973497},{"table":"benefit_types","fused":0.6334933419097255,"table_sim":0.6103800368440171,"col_score":0.6681632995082879},{"table":"goods_receipts","fused":0.6189951703324343,"table_sim":0.6134314016075626,"col_score":0.6273408234197417},{"table":"employee_training","fused":0.6167863151391625,"table_sim":0.6143787031418324,"col_score":0.6203977331351577},{"table":"positions","fused":0.6136153712826944,"table_sim":0.6060295054142851,"col_score":0.6249941700853083},{"table":"sales_regions","fused":0.5511046296978623,"table_sim":0.6301038851943551,"col_score":0.43260574645312316},{"table":"employment_history","fused":0.5482527872256527,"table_sim":0.6247225842183777,"col_score":0.43354809173656533},{"table":"purchase_requisitions","fused":0.3798630650552708,"table_sim":0.6331051084254513,"col_score":0},{"table":"vendor_invoices","fused":0.37393471297383707,"table_sim":0,"col_score":0.9348367824345927}],"fk_expansion_candidates":32,"fk_expansion_added":2,"fk_expansion_blocked_count":26,"fk_expansion_blocked":[{"table":"cost_centers","reason":"no_evidence"},{"table":"inventory_transactions","reason":"no_evidence"},{"table":"budget_lines","reason":"no_evidence"},{"table":"fiscal_years","reason":"no_evidence"},{"table":"training_courses","reason":"no_evidence"},{"table":"inventory_adjustments","reason":"no_evidence"},{"table":"sales_territories","reason":"no_evidence"},{"table":"business_units","reason":"no_evidence"},{"table":"warehouses","reason":"no_evidence"},{"table":"sales_regions","reason":"max_tables"},{"table":"fixed_assets","reason":"no_evidence"},{"table":"document_attachments","reason":"no_evidence"},{"table":"journal_entries","reason":"no_evidence"},{"table":"employee_certifications","reason":"no_evidence"},{"table":"performance_reviews","reason":"no_evidence"},{"table":"leave_requests","reason":"no_evidence"},{"table":"sales_orders","reason":"no_evidence"},{"table":"emergency_contacts","reason":"no_evidence"},{"table":"asset_transfers","reason":"no_evidence"},{"table":"purchase_orders","reason":"no_evidence"},{"table":"asset_maintenance","reason":"max_tables"},{"table":"receipt_lines","reason":"no_evidence"},{"table":"sales_opportunities","reason":"no_evidence"},{"table":"projects","reason":"no_evidence"},{"table":"task_assignments","reason":"no_evidence"},{"table":"sales_quotes","reason":"no_evidence"},{"table":"addresses","reason":"no_evidence"},{"table":"stock_transfers","reason":"no_evidence"},{"table":"timesheets","reason":"max_tables"},{"table":"purchase_requisitions","reason":"max_tables"}],"config":{"table_threshold":0.2,"column_threshold":0.18,"table_weight":0.6,"column_weight":0.4},"embedding_latency_ms":16,"total_retrieval_latency_ms":22,"sql_generated":"SELECT d.name AS department_name, SUM(bs.amount) + COALESCE(SUM(eb.annual_cost), 0) AS total_employee_cost FROM departments d LEFT JOIN budgets bs ON d.department_id = bs.department_id AND bs.status = 'approved' LEFT JOIN employee_benefits eb ON d.department_id = eb.department_id GROUP BY d.name;","tables_used_in_sql":[],"explain_result":"fail","sqlstate":"42703","error_message":"column eb.department_id does not exist","total_latency_ms":3785,"failure_type":"column_miss","failure_details":"Undefined column: Database error after 3 attempts: column eb.department_id does not exist"}
